(()=>{var tk=Object.defineProperty,wx=Object.prototype.hasOwnProperty,Gc=(a,b)=>()=>(b||(b={exports:{}},a(b.exports,b)),b.exports),xx=a=>tk(a,"__esModule",{value:!0}),be=(a,b)=>{xx(a);for(var d in b)tk(a,d,{get:b[d],enumerable:!0})},OA=(a,b)=>{xx(a);if(typeof b==="object"||typeof b==="function")for(let d in b)wx.call(b,d)&&!wx.call(a,d)&&d!=="default"&&tk(a,d,{get:()=>b[d],enumerable:!0});return a},Yb=a=>a&&a.__esModule?a:OA(tk({},"default",{value:a,enumerable:!0}),a);var _r=Gc((a,b)=>{(function(d,f){typeof a==="object"&&typeof b!=="undefined"?b.exports=f():typeof define==="function"&&define.amd?define(f):d.moment=f()})(a,function(){"use strict";var d;function f(){return d.apply(null,arguments)}function i(j){d=j}function l(j){return j instanceof Array||Object.prototype.toString.call(j)==="[object Array]"}function q(j){return j!=null&&Object.prototype.toString.call(j)==="[object Object]"}function u(j,n){return Object.prototype.hasOwnProperty.call(j,n)}function v(j){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(j).length===0;{var n;for(n in j)if(u(j,n))return!1;return!0}}function A(j){return j===void 0}function E(j){return typeof j==="number"||Object.prototype.toString.call(j)==="[object Number]"}function H(j){return j instanceof Date||Object.prototype.toString.call(j)==="[object Date]"}function Q(j,n){var t=[],y;for(y=0;y<j.length;++y)t.push(n(j[y],y));return t}function J(j,n){for(var t in n)u(n,t)&&(j[t]=n[t]);return u(n,"toString")&&(j.toString=n.toString),u(n,"valueOf")&&(j.valueOf=n.valueOf),j}function S(j,n,t,y){return Wh(j,n,t,y,!0).utc()}function aa(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function X(j){return j._pf==null&&(j._pf=aa()),j._pf}var ga;Array.prototype.some?ga=Array.prototype.some:ga=function(j){var n=Object(this),t=n.length>>>0,y;for(y=0;y<t;y++)if(y in n&&j.call(this,n[y],y,n))return!0;return!1};function ja(j){if(j._isValid==null){var n=X(j),t=ga.call(n.parsedDateParts,function(C){return C!=null}),y=!isNaN(j._d.getTime())&&n.overflow<0&&!n.empty&&!n.invalidEra&&!n.invalidMonth&&!n.invalidWeekday&&!n.weekdayMismatch&&!n.nullInput&&!n.invalidFormat&&!n.userInvalidated&&(!n.meridiem||n.meridiem&&t);j._strict&&(y=y&&n.charsLeftOver===0&&n.unusedTokens.length===0&&n.bigHour===void 0);if(Object.isFrozen==null||!Object.isFrozen(j))j._isValid=y;else return y}return j._isValid}function qa(j){var n=S(NaN);return j!=null?J(X(n),j):X(n).userInvalidated=!0,n}var ka=f.momentProperties=[],ta=!1;function va(j,n){var t,y,C;A(n._isAMomentObject)||(j._isAMomentObject=n._isAMomentObject),A(n._i)||(j._i=n._i),A(n._f)||(j._f=n._f),A(n._l)||(j._l=n._l),A(n._strict)||(j._strict=n._strict),A(n._tzm)||(j._tzm=n._tzm),A(n._isUTC)||(j._isUTC=n._isUTC),A(n._offset)||(j._offset=n._offset),A(n._pf)||(j._pf=X(n)),A(n._locale)||(j._locale=n._locale);if(ka.length>0)for(t=0;t<ka.length;t++)y=ka[t],C=n[y],A(C)||(j[y]=C);return j}function na(j){va(this,j),this._d=new Date(j._d!=null?j._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),ta===!1&&(ta=!0,f.updateOffset(this),ta=!1)}function O(j){return j instanceof na||j!=null&&j._isAMomentObject!=null}function R(j){f.suppressDeprecationWarnings===!1&&typeof console!=="undefined"&&console.warn&&console.warn("Deprecation warning: "+j)}function x(j,n){var t=!0;return J(function(){f.deprecationHandler!=null&&f.deprecationHandler(null,j);if(t){var y=[],C,V,fa;for(V=0;V<arguments.length;V++){C="";if(typeof arguments[V]==="object"){C+=`
[`+V+"] ";for(fa in arguments[0])u(arguments[0],fa)&&(C+=fa+": "+arguments[0][fa]+", ");C=C.slice(0,-2)}else C=arguments[V];y.push(C)}R(j+`
Arguments: `+Array.prototype.slice.call(y).join("")+`
`+new Error().stack),t=!1}return n.apply(this,arguments)},n)}var G={};function F(j,n){f.deprecationHandler!=null&&f.deprecationHandler(j,n),G[j]||(R(n),G[j]=!0)}f.suppressDeprecationWarnings=!1,f.deprecationHandler=null;function K(j){return typeof Function!=="undefined"&&j instanceof Function||Object.prototype.toString.call(j)==="[object Function]"}function U(j){var n,t;for(t in j)u(j,t)&&(n=j[t],K(n)?this[t]=n:this["_"+t]=n);this._config=j,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function L(j,n){var t=J({},j),y;for(y in n)u(n,y)&&(q(j[y])&&q(n[y])?(t[y]={},J(t[y],j[y]),J(t[y],n[y])):n[y]!=null?t[y]=n[y]:delete t[y]);for(y in j)u(j,y)&&!u(n,y)&&q(j[y])&&(t[y]=J({},t[y]));return t}function da(j){j!=null&&this.set(j)}var ca;Object.keys?ca=Object.keys:ca=function(j){var n,t=[];for(n in j)u(j,n)&&t.push(n);return t};var Ca={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function _(j,n,t){var y=this._calendar[j]||this._calendar.sameElse;return K(y)?y.call(n,t):y}function xa(j,n,t){var y=""+Math.abs(j),C=n-y.length,V=j>=0;return(V?t?"+":"":"-")+Math.pow(10,Math.max(0,C)).toString().substr(1)+y}var ra=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ea=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,oa={},ya={};function ma(j,n,t,y){var C=y;typeof y==="string"&&(C=function(){return this[y]()}),j&&(ya[j]=C),n&&(ya[n[0]]=function(){return xa(C.apply(this,arguments),n[1],n[2])}),t&&(ya[t]=function(){return this.localeData().ordinal(C.apply(this,arguments),j)})}function ib(j){return j.match(/\[[\s\S]/)?j.replace(/^\[|\]$/g,""):j.replace(/\\/g,"")}function kb(j){var n=j.match(ra),t,y;for(t=0,y=n.length;t<y;t++)ya[n[t]]?n[t]=ya[n[t]]:n[t]=ib(n[t]);return function(C){var V="",fa;for(fa=0;fa<y;fa++)V+=K(n[fa])?n[fa].call(C,j):n[fa];return V}}function lb(j,n){return j.isValid()?(n=Da(n,j.localeData()),oa[n]=oa[n]||kb(n),oa[n](j)):j.localeData().invalidDate()}function Da(j,n){var t=5;function y(C){return n.longDateFormat(C)||C}for(ea.lastIndex=0;t>=0&&ea.test(j);)j=j.replace(ea,y),ea.lastIndex=0,t-=1;return j}var Ma={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function eb(j){var n=this._longDateFormat[j],t=this._longDateFormat[j.toUpperCase()];return n||!t?n:(this._longDateFormat[j]=t.match(ra).map(function(y){return y==="MMMM"||y==="MM"||y==="DD"||y==="dddd"?y.slice(1):y}).join(""),this._longDateFormat[j])}var jb="Invalid date";function pa(){return this._invalidDate}var za="%d",Ra=/\d{1,2}/;function ua(j){return this._ordinal.replace("%d",j)}var Ga={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function hb(j,n,t,y){var C=this._relativeTime[t];return K(C)?C(j,n,t,y):C.replace(/%d/i,j)}function pb(j,n){var t=this._relativeTime[j>0?"future":"past"];return K(t)?t(n):t.replace(/%s/i,n)}var Ea={};function Ja(j,n){var t=j.toLowerCase();Ea[t]=Ea[t+"s"]=Ea[n]=j}function Za(j){return typeof j==="string"?Ea[j]||Ea[j.toLowerCase()]:void 0}function Zb(j){var n={},t,y;for(y in j)u(j,y)&&(t=Za(y),t&&(n[t]=j[y]));return n}var _a={};function qb(j,n){_a[j]=n}function Ba(j){var n=[],t;for(t in j)u(j,t)&&n.push({unit:t,priority:_a[t]});return n.sort(function(y,C){return y.priority-C.priority}),n}function Ua(j){return j%4===0&&j%100!==0||j%400===0}function W(j){return j<0?Math.ceil(j)||0:Math.floor(j)}function N(j){var n=+j,t=0;return n!==0&&isFinite(n)&&(t=W(n)),t}function Y(j,n){return function(t){return t!=null?($(this,j,t),f.updateOffset(this,n),this):ba(this,j)}}function ba(j,n){return j.isValid()?j._d["get"+(j._isUTC?"UTC":"")+n]():NaN}function $(j,n,t){j.isValid()&&!isNaN(t)&&(n==="FullYear"&&Ua(j.year())&&j.month()===1&&j.date()===29?(t=N(t),j._d["set"+(j._isUTC?"UTC":"")+n](t,j.month(),gf(t,j.month()))):j._d["set"+(j._isUTC?"UTC":"")+n](t))}function ha(j){return j=Za(j),K(this[j])?this[j]():this}function Sa(j,n){if(typeof j==="object"){j=Zb(j);var t=Ba(j),y;for(y=0;y<t.length;y++)this[t[y].unit](j[t[y].unit])}else{j=Za(j);if(K(this[j]))return this[j](n)}return this}var rb=/\d/,$a=/\d\d/,nb=/\d{3}/,Rb=/\d{4}/,Ib=/[+-]?\d{6}/,Oa=/\d\d?/,zd=/\d\d\d\d?/,$f=/\d\d\d\d\d\d?/,ag=/\d{1,3}/,Jh=/\d{1,4}/,B=/[+-]?\d{1,6}/,ce=/\d+/,bg=/[+-]?\d+/,Fp=/Z|[+-]\d\d:?\d\d/gi,cg=/Z|[+-]\d\d(?::?\d\d)?/gi,Gp=/[+-]?\d+(\.\d{1,3})?/,ef=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,de;de={};function sa(j,n,t){de[j]=K(n)?n:function(y,C){return y&&t?t:n}}function Kh(j,n){return u(de,j)?de[j](n._strict,n._locale):new RegExp(Lh(j))}function Lh(j){return _b(j.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(n,t,y,C,V){return t||y||C||V}))}function _b(j){return j.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var fd={};function mb(j,n){var t,y=n;for(typeof j==="string"&&(j=[j]),E(n)&&(y=function(C,V){V[n]=N(C)}),t=0;t<j.length;t++)fd[j[t]]=y}function ff(j,n){mb(j,function(t,y,C,V){C._w=C._w||{},n(t,C._w,C,V)})}function uk(j,n,t){n!=null&&u(fd,j)&&fd[j](n,t._a,t,j)}var Ob=0,Eb=1,Jb=2,Fb=3,uc=4,Tc=5,Ad=6,vk=7,wk=8;function Hp(j,n){return(j%n+n)%n}var Cb;Array.prototype.indexOf?Cb=Array.prototype.indexOf:Cb=function(j){var n;for(n=0;n<this.length;++n)if(this[n]===j)return n;return-1};function gf(j,n){if(isNaN(j)||isNaN(n))return NaN;var t=Hp(n,12);return j+=(n-t)/12,t===1?Ua(j)?29:28:31-t%7%2}ma("M",["MM",2],"Mo",function(){return this.month()+1}),ma("MMM",0,0,function(j){return this.localeData().monthsShort(this,j)}),ma("MMMM",0,0,function(j){return this.localeData().months(this,j)}),Ja("month","M"),qb("month",8),sa("M",Oa),sa("MM",Oa,$a),sa("MMM",function(j,n){return n.monthsShortRegex(j)}),sa("MMMM",function(j,n){return n.monthsRegex(j)}),mb(["M","MM"],function(j,n){n[Eb]=N(j)-1}),mb(["MMM","MMMM"],function(j,n,t,y){var C=t._locale.monthsParse(j,y,t._strict);C!=null?n[Eb]=C:X(t).invalidMonth=j});var xk="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),yk="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),zk=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ak=ef,dg=ef;function Bk(j,n){return j?l(this._months)?this._months[j.month()]:this._months[(this._months.isFormat||zk).test(n)?"format":"standalone"][j.month()]:l(this._months)?this._months:this._months.standalone}function Ck(j,n){return j?l(this._monthsShort)?this._monthsShort[j.month()]:this._monthsShort[zk.test(n)?"format":"standalone"][j.month()]:l(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Ip(j,n,t){var y,C,V,fa=j.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],y=0;y<12;++y)V=S([2e3,y]),this._shortMonthsParse[y]=this.monthsShort(V,"").toLocaleLowerCase(),this._longMonthsParse[y]=this.months(V,"").toLocaleLowerCase();return t?n==="MMM"?(C=Cb.call(this._shortMonthsParse,fa),C!==-1?C:null):(C=Cb.call(this._longMonthsParse,fa),C!==-1?C:null):n==="MMM"?(C=Cb.call(this._shortMonthsParse,fa),C!==-1?C:(C=Cb.call(this._longMonthsParse,fa),C!==-1?C:null)):(C=Cb.call(this._longMonthsParse,fa),C!==-1?C:(C=Cb.call(this._shortMonthsParse,fa),C!==-1?C:null))}function Jp(j,n,t){var y,C,V;if(this._monthsParseExact)return Ip.call(this,j,n,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),y=0;y<12;y++){C=S([2e3,y]),t&&!this._longMonthsParse[y]&&(this._longMonthsParse[y]=new RegExp("^"+this.months(C,"").replace(".","")+"$","i"),this._shortMonthsParse[y]=new RegExp("^"+this.monthsShort(C,"").replace(".","")+"$","i")),!t&&!this._monthsParse[y]&&(V="^"+this.months(C,"")+"|^"+this.monthsShort(C,""),this._monthsParse[y]=new RegExp(V.replace(".",""),"i"));if(t&&n==="MMMM"&&this._longMonthsParse[y].test(j))return y;{if(t&&n==="MMM"&&this._shortMonthsParse[y].test(j))return y;if(!t&&this._monthsParse[y].test(j))return y}}}function Dk(j,n){var t;if(!j.isValid())return j;if(typeof n==="string")if(/^\d+$/.test(n))n=N(n);else{n=j.localeData().monthsParse(n);if(!E(n))return j}return t=Math.min(j.date(),gf(j.year(),n)),j._d["set"+(j._isUTC?"UTC":"")+"Month"](n,t),j}function ee(j){return j!=null?(Dk(this,j),f.updateOffset(this,!0),this):ba(this,"Month")}function Kp(){return gf(this.year(),this.month())}function dc(j){return this._monthsParseExact?(u(this,"_monthsRegex")||Ek.call(this),j?this._monthsShortStrictRegex:this._monthsShortRegex):(u(this,"_monthsShortRegex")||(this._monthsShortRegex=Ak),this._monthsShortStrictRegex&&j?this._monthsShortStrictRegex:this._monthsShortRegex)}function Lp(j){return this._monthsParseExact?(u(this,"_monthsRegex")||Ek.call(this),j?this._monthsStrictRegex:this._monthsRegex):(u(this,"_monthsRegex")||(this._monthsRegex=dg),this._monthsStrictRegex&&j?this._monthsStrictRegex:this._monthsRegex)}function Ek(){function j(fa,Ia){return Ia.length-fa.length}var n=[],t=[],y=[],C,V;for(C=0;C<12;C++)V=S([2e3,C]),n.push(this.monthsShort(V,"")),t.push(this.months(V,"")),y.push(this.months(V,"")),y.push(this.monthsShort(V,""));for(n.sort(j),t.sort(j),y.sort(j),C=0;C<12;C++)n[C]=_b(n[C]),t[C]=_b(t[C]);for(C=0;C<24;C++)y[C]=_b(y[C]);this._monthsRegex=new RegExp("^("+y.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}ma("Y",0,0,function(){var j=this.year();return j<=9999?xa(j,4):"+"+j}),ma(0,["YY",2],0,function(){return this.year()%100}),ma(0,["YYYY",4],0,"year"),ma(0,["YYYYY",5],0,"year"),ma(0,["YYYYYY",6,!0],0,"year"),Ja("year","y"),qb("year",1),sa("Y",bg),sa("YY",Oa,$a),sa("YYYY",Jh,Rb),sa("YYYYY",B,Ib),sa("YYYYYY",B,Ib),mb(["YYYYY","YYYYYY"],Ob),mb("YYYY",function(j,n){n[Ob]=j.length===2?f.parseTwoDigitYear(j):N(j)}),mb("YY",function(j,n){n[Ob]=f.parseTwoDigitYear(j)}),mb("Y",function(j,n){n[Ob]=parseInt(j,10)});function hf(j){return Ua(j)?366:365}f.parseTwoDigitYear=function(j){return N(j)+(N(j)>68?1900:2e3)};var Fk=Y("FullYear",!0);function jf(){return Ua(this.year())}function fe(j,n,t,y,C,V,fa){var Ia;return j<100&&j>=0?(Ia=new Date(j+400,n,t,y,C,V,fa),isFinite(Ia.getFullYear())&&Ia.setFullYear(j)):Ia=new Date(j,n,t,y,C,V,fa),Ia}function kf(j){var n,t;return j<100&&j>=0?(t=Array.prototype.slice.call(arguments),t[0]=j+400,n=new Date(Date.UTC.apply(null,t)),isFinite(n.getUTCFullYear())&&n.setUTCFullYear(j)):n=new Date(Date.UTC.apply(null,arguments)),n}function eg(j,n,t){var y=7+n-t,C=(7+kf(j,0,y).getUTCDay()-n)%7;return-C+y-1}function Gk(j,n,t,y,C){var V=(7+t-y)%7,fa=eg(j,y,C),Ia=1+7*(n-1)+V+fa,ab,ub;return Ia<=0?(ab=j-1,ub=hf(ab)+Ia):Ia>hf(j)?(ab=j+1,ub=Ia-hf(j)):(ab=j,ub=Ia),{year:ab,dayOfYear:ub}}function ge(j,n,t){var y=eg(j.year(),n,t),C=Math.floor((j.dayOfYear()-y-1)/7)+1,V,fa;return C<1?(fa=j.year()-1,V=C+vc(fa,n,t)):C>vc(j.year(),n,t)?(V=C-vc(j.year(),n,t),fa=j.year()+1):(fa=j.year(),V=C),{week:V,year:fa}}function vc(j,n,t){var y=eg(j,n,t),C=eg(j+1,n,t);return(hf(j)-y+C)/7}ma("w",["ww",2],"wo","week"),ma("W",["WW",2],"Wo","isoWeek"),Ja("week","w"),Ja("isoWeek","W"),qb("week",5),qb("isoWeek",5),sa("w",Oa),sa("ww",Oa,$a),sa("W",Oa),sa("WW",Oa,$a),ff(["w","ww","W","WW"],function(j,n,t,y){n[y.substr(0,1)]=N(j)});function Mp(j){return ge(j,this._week.dow,this._week.doy).week}var Np={dow:0,doy:6};function fg(){return this._week.dow}function Bd(){return this._week.doy}function Uc(j){var n=this.localeData().week(this);return j==null?n:this.add((j-n)*7,"d")}function Cd(j){var n=ge(this,1,4).week;return j==null?n:this.add((j-n)*7,"d")}ma("d",0,"do","day"),ma("dd",0,0,function(j){return this.localeData().weekdaysMin(this,j)}),ma("ddd",0,0,function(j){return this.localeData().weekdaysShort(this,j)}),ma("dddd",0,0,function(j){return this.localeData().weekdays(this,j)}),ma("e",0,0,"weekday"),ma("E",0,0,"isoWeekday"),Ja("day","d"),Ja("weekday","e"),Ja("isoWeekday","E"),qb("day",11),qb("weekday",11),qb("isoWeekday",11),sa("d",Oa),sa("e",Oa),sa("E",Oa),sa("dd",function(j,n){return n.weekdaysMinRegex(j)}),sa("ddd",function(j,n){return n.weekdaysShortRegex(j)}),sa("dddd",function(j,n){return n.weekdaysRegex(j)}),ff(["dd","ddd","dddd"],function(j,n,t,y){var C=t._locale.weekdaysParse(j,y,t._strict);C!=null?n.d=C:X(t).invalidWeekday=j}),ff(["d","e","E"],function(j,n,t,y){n[y]=N(j)});function Hk(j,n){return typeof j!=="string"?j:isNaN(j)?(j=n.weekdaysParse(j),typeof j==="number"?j:null):parseInt(j,10)}function Op(j,n){return typeof j==="string"?n.weekdaysParse(j)%7||7:isNaN(j)?null:j}function wc(j,n){return j.slice(n,7).concat(j.slice(0,n))}var Pp="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),gg="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ik="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Qp=ef,Rp=ef,Jk=ef;function Sp(j,n){var t=l(this._weekdays)?this._weekdays:this._weekdays[j&&j!==!0&&this._weekdays.isFormat.test(n)?"format":"standalone"];return j===!0?wc(t,this._week.dow):j?t[j.day()]:t}function Tp(j){return j===!0?wc(this._weekdaysShort,this._week.dow):j?this._weekdaysShort[j.day()]:this._weekdaysShort}function Up(j){return j===!0?wc(this._weekdaysMin,this._week.dow):j?this._weekdaysMin[j.day()]:this._weekdaysMin}function Dd(j,n,t){var y,C,V,fa=j.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],y=0;y<7;++y)V=S([2e3,1]).day(y),this._minWeekdaysParse[y]=this.weekdaysMin(V,"").toLocaleLowerCase(),this._shortWeekdaysParse[y]=this.weekdaysShort(V,"").toLocaleLowerCase(),this._weekdaysParse[y]=this.weekdays(V,"").toLocaleLowerCase();return t?n==="dddd"?(C=Cb.call(this._weekdaysParse,fa),C!==-1?C:null):n==="ddd"?(C=Cb.call(this._shortWeekdaysParse,fa),C!==-1?C:null):(C=Cb.call(this._minWeekdaysParse,fa),C!==-1?C:null):n==="dddd"?(C=Cb.call(this._weekdaysParse,fa),C!==-1?C:(C=Cb.call(this._shortWeekdaysParse,fa),C!==-1?C:(C=Cb.call(this._minWeekdaysParse,fa),C!==-1?C:null))):n==="ddd"?(C=Cb.call(this._shortWeekdaysParse,fa),C!==-1?C:(C=Cb.call(this._weekdaysParse,fa),C!==-1?C:(C=Cb.call(this._minWeekdaysParse,fa),C!==-1?C:null))):(C=Cb.call(this._minWeekdaysParse,fa),C!==-1?C:(C=Cb.call(this._weekdaysParse,fa),C!==-1?C:(C=Cb.call(this._shortWeekdaysParse,fa),C!==-1?C:null)))}function Vp(j,n,t){var y,C,V;if(this._weekdaysParseExact)return Dd.call(this,j,n,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),y=0;y<7;y++){C=S([2e3,1]).day(y),t&&!this._fullWeekdaysParse[y]&&(this._fullWeekdaysParse[y]=new RegExp("^"+this.weekdays(C,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[y]=new RegExp("^"+this.weekdaysShort(C,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[y]=new RegExp("^"+this.weekdaysMin(C,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[y]||(V="^"+this.weekdays(C,"")+"|^"+this.weekdaysShort(C,"")+"|^"+this.weekdaysMin(C,""),this._weekdaysParse[y]=new RegExp(V.replace(".",""),"i"));if(t&&n==="dddd"&&this._fullWeekdaysParse[y].test(j))return y;{if(t&&n==="ddd"&&this._shortWeekdaysParse[y].test(j))return y;{if(t&&n==="dd"&&this._minWeekdaysParse[y].test(j))return y;if(!t&&this._weekdaysParse[y].test(j))return y}}}}function Wp(j){if(!this.isValid())return j!=null?this:NaN;var n=this._isUTC?this._d.getUTCDay():this._d.getDay();return j!=null?(j=Hk(j,this.localeData()),this.add(j-n,"d")):n}function Kk(j){if(!this.isValid())return j!=null?this:NaN;var n=(this.day()+7-this.localeData()._week.dow)%7;return j==null?n:this.add(j-n,"d")}function Ed(j){if(!this.isValid())return j!=null?this:NaN;if(j!=null){var n=Op(j,this.localeData());return this.day(this.day()%7?n:n-7)}else return this.day()||7}function lf(j){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||mf.call(this),j?this._weekdaysStrictRegex:this._weekdaysRegex):(u(this,"_weekdaysRegex")||(this._weekdaysRegex=Qp),this._weekdaysStrictRegex&&j?this._weekdaysStrictRegex:this._weekdaysRegex)}function Mh(j){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||mf.call(this),j?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(u(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Rp),this._weekdaysShortStrictRegex&&j?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Nh(j){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||mf.call(this),j?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(u(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Jk),this._weekdaysMinStrictRegex&&j?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function mf(){function j(od,Ld){return Ld.length-od.length}var n=[],t=[],y=[],C=[],V,fa,Ia,ab,ub;for(V=0;V<7;V++)fa=S([2e3,1]).day(V),Ia=_b(this.weekdaysMin(fa,"")),ab=_b(this.weekdaysShort(fa,"")),ub=_b(this.weekdays(fa,"")),n.push(Ia),t.push(ab),y.push(ub),C.push(Ia),C.push(ab),C.push(ub);n.sort(j),t.sort(j),y.sort(j),C.sort(j),this._weekdaysRegex=new RegExp("^("+C.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+y.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+n.join("|")+")","i")}function nf(){return this.hours()%12||12}function he(){return this.hours()||24}ma("H",["HH",2],0,"hour"),ma("h",["hh",2],0,nf),ma("k",["kk",2],0,he),ma("hmm",0,0,function(){return""+nf.apply(this)+xa(this.minutes(),2)}),ma("hmmss",0,0,function(){return""+nf.apply(this)+xa(this.minutes(),2)+xa(this.seconds(),2)}),ma("Hmm",0,0,function(){return""+this.hours()+xa(this.minutes(),2)}),ma("Hmmss",0,0,function(){return""+this.hours()+xa(this.minutes(),2)+xa(this.seconds(),2)});function hg(j,n){ma(j,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),n)})}hg("a",!0),hg("A",!1),Ja("hour","h"),qb("hour",13);function ie(j,n){return n._meridiemParse}sa("a",ie),sa("A",ie),sa("H",Oa),sa("h",Oa),sa("k",Oa),sa("HH",Oa,$a),sa("hh",Oa,$a),sa("kk",Oa,$a),sa("hmm",zd),sa("hmmss",$f),sa("Hmm",zd),sa("Hmmss",$f),mb(["H","HH"],Fb),mb(["k","kk"],function(j,n,t){var y=N(j);n[Fb]=y===24?0:y}),mb(["a","A"],function(j,n,t){t._isPm=t._locale.isPM(j),t._meridiem=j}),mb(["h","hh"],function(j,n,t){n[Fb]=N(j),X(t).bigHour=!0}),mb("hmm",function(j,n,t){var y=j.length-2;n[Fb]=N(j.substr(0,y)),n[uc]=N(j.substr(y)),X(t).bigHour=!0}),mb("hmmss",function(j,n,t){var y=j.length-4,C=j.length-2;n[Fb]=N(j.substr(0,y)),n[uc]=N(j.substr(y,2)),n[Tc]=N(j.substr(C)),X(t).bigHour=!0}),mb("Hmm",function(j,n,t){var y=j.length-2;n[Fb]=N(j.substr(0,y)),n[uc]=N(j.substr(y))}),mb("Hmmss",function(j,n,t){var y=j.length-4,C=j.length-2;n[Fb]=N(j.substr(0,y)),n[uc]=N(j.substr(y,2)),n[Tc]=N(j.substr(C))});function ig(j){return(j+"").toLowerCase().charAt(0)==="p"}var Xp=/[ap]\.?m?\.?/i,Yp=Y("Hours",!0);function Zp(j,n,t){return j>11?t?"pm":"PM":t?"am":"AM"}var Oh={calendar:Ca,longDateFormat:Ma,invalidDate:jb,ordinal:za,dayOfMonthOrdinalParse:Ra,relativeTime:Ga,months:xk,monthsShort:yk,week:Np,weekdays:Pp,weekdaysMin:Ik,weekdaysShort:gg,meridiemParse:Xp},tb={},of={},pf;function jg(j,n){var t,y=Math.min(j.length,n.length);for(t=0;t<y;t+=1)if(j[t]!==n[t])return t;return y}function Ph(j){return j?j.toLowerCase().replace("_","-"):j}function rc(j){for(var n=0,t,y,C,V;n<j.length;){for(V=Ph(j[n]).split("-"),t=V.length,y=Ph(j[n+1]),y=y?y.split("-"):null;t>0;){C=kg(V.slice(0,t).join("-"));if(C)return C;if(y&&y.length>=t&&jg(V,y)>=t-1)break;t--}n++}return pf}function kg(j){var n=null,t;if(tb[j]===void 0&&typeof b!=="undefined"&&b&&b.exports)try{n=pf._abbr,t=require,t("./locale/"+j),gd(n)}catch(y){tb[j]=null}return tb[j]}function gd(j,n){var t;return j&&(A(n)?t=wb(j):t=Qh(j,n),t?pf=t:typeof console!=="undefined"&&console.warn&&console.warn("Locale "+j+" not found. Did you forget to load it?")),pf._abbr}function Qh(j,n){if(n!==null){var t,y=Oh;n.abbr=j;if(tb[j]!=null)F("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),y=tb[j]._config;else if(n.parentLocale!=null)if(tb[n.parentLocale]!=null)y=tb[n.parentLocale]._config;else{t=kg(n.parentLocale);if(t!=null)y=t._config;else return of[n.parentLocale]||(of[n.parentLocale]=[]),of[n.parentLocale].push({name:j,config:n}),null}return tb[j]=new da(L(y,n)),of[j]&&of[j].forEach(function(C){Qh(C.name,C.config)}),gd(j),tb[j]}else return delete tb[j],null}function _p(j,n){if(n!=null){var t,y,C=Oh;tb[j]!=null&&tb[j].parentLocale!=null?tb[j].set(L(tb[j]._config,n)):(y=kg(j),y!=null&&(C=y._config),n=L(C,n),y==null&&(n.abbr=j),t=new da(n),t.parentLocale=tb[j],tb[j]=t),gd(j)}else tb[j]!=null&&(tb[j].parentLocale!=null?(tb[j]=tb[j].parentLocale,j===gd()&&gd(j)):tb[j]!=null&&delete tb[j]);return tb[j]}function wb(j){var n;j&&j._locale&&j._locale._abbr&&(j=j._locale._abbr);if(!j)return pf;if(!l(j)){n=kg(j);if(n)return n;j=[j]}return rc(j)}function Rh(){return ca(tb)}function qf(j){var n,t=j._a;return t&&X(j).overflow===-2&&(n=t[Eb]<0||t[Eb]>11?Eb:t[Jb]<1||t[Jb]>gf(t[Ob],t[Eb])?Jb:t[Fb]<0||t[Fb]>24||t[Fb]===24&&(t[uc]!==0||t[Tc]!==0||t[Ad]!==0)?Fb:t[uc]<0||t[uc]>59?uc:t[Tc]<0||t[Tc]>59?Tc:t[Ad]<0||t[Ad]>999?Ad:-1,X(j)._overflowDayOfYear&&(n<Ob||n>Jb)&&(n=Jb),X(j)._overflowWeeks&&n===-1&&(n=vk),X(j)._overflowWeekday&&n===-1&&(n=wk),X(j).overflow=n),j}var Lk=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,$p=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Mk=/Z|[+-]\d\d(?::?\d\d)?/,lg=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],mg=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aq=/^\/?Date\((-?\d+)/i,bq=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Nk={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function je(j){var n,t,y=j._i,C=Lk.exec(y)||$p.exec(y),V,fa,Ia,ab;if(C){for(X(j).iso=!0,n=0,t=lg.length;n<t;n++)if(lg[n][1].exec(C[1])){fa=lg[n][0],V=lg[n][2]!==!1;break}if(fa==null){j._isValid=!1;return}if(C[3]){for(n=0,t=mg.length;n<t;n++)if(mg[n][1].exec(C[3])){Ia=(C[2]||" ")+mg[n][0];break}if(Ia==null){j._isValid=!1;return}}if(!V&&Ia!=null){j._isValid=!1;return}if(C[4])if(Mk.exec(C[4]))ab="Z";else{j._isValid=!1;return}j._f=fa+(Ia||"")+(ab||""),ng(j)}else j._isValid=!1}function Sh(j,n,t,y,C,V){var fa=[Th(j),yk.indexOf(n),parseInt(t,10),parseInt(y,10),parseInt(C,10)];return V&&fa.push(parseInt(V,10)),fa}function Th(j){var n=parseInt(j,10);return n<=49?2e3+n:n<=999?1900+n:n}function cq(j){return j.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function dq(j,n,t){if(j){var y=gg.indexOf(j),C=new Date(n[0],n[1],n[2]).getDay();if(y!==C)return X(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function rf(j,n,t){if(j)return Nk[j];{if(n)return 0;{var y=parseInt(t,10),C=y%100,V=(y-C)/100;return V*60+C}}}function Ok(j){var n=bq.exec(cq(j._i)),t;if(n){t=Sh(n[4],n[3],n[2],n[5],n[6],n[7]);if(!dq(n[1],t,j))return;j._a=t,j._tzm=rf(n[8],n[9],n[10]),j._d=kf.apply(null,j._a),j._d.setUTCMinutes(j._d.getUTCMinutes()-j._tzm),X(j).rfc2822=!0}else j._isValid=!1}function eq(j){var n=aq.exec(j._i);if(n!==null){j._d=new Date(+n[1]);return}je(j);if(j._isValid===!1)delete j._isValid;else return;Ok(j);if(j._isValid===!1)delete j._isValid;else return;j._strict?j._isValid=!1:f.createFromInputFallback(j)}f.createFromInputFallback=x("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(j){j._d=new Date(j._i+(j._useUTC?" UTC":""))});function ke(j,n,t){return j!=null?j:n!=null?n:t}function fq(j){var n=new Date(f.now());return j._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function Uh(j){var n,t,y=[],C,V,fa;if(j._d)return;for(C=fq(j),j._w&&j._a[Jb]==null&&j._a[Eb]==null&&gq(j),j._dayOfYear!=null&&(fa=ke(j._a[Ob],C[Ob]),(j._dayOfYear>hf(fa)||j._dayOfYear===0)&&(X(j)._overflowDayOfYear=!0),t=kf(fa,0,j._dayOfYear),j._a[Eb]=t.getUTCMonth(),j._a[Jb]=t.getUTCDate()),n=0;n<3&&j._a[n]==null;++n)j._a[n]=y[n]=C[n];for(;n<7;n++)j._a[n]=y[n]=j._a[n]==null?n===2?1:0:j._a[n];j._a[Fb]===24&&j._a[uc]===0&&j._a[Tc]===0&&j._a[Ad]===0&&(j._nextDay=!0,j._a[Fb]=0),j._d=(j._useUTC?kf:fe).apply(null,y),V=j._useUTC?j._d.getUTCDay():j._d.getDay(),j._tzm!=null&&j._d.setUTCMinutes(j._d.getUTCMinutes()-j._tzm),j._nextDay&&(j._a[Fb]=24),j._w&&typeof j._w.d!=="undefined"&&j._w.d!==V&&(X(j).weekdayMismatch=!0)}function gq(j){var n,t,y,C,V,fa,Ia,ab,ub;n=j._w,n.GG!=null||n.W!=null||n.E!=null?(V=1,fa=4,t=ke(n.GG,j._a[Ob],ge(bb(),1,4).year),y=ke(n.W,1),C=ke(n.E,1),(C<1||C>7)&&(ab=!0)):(V=j._locale._week.dow,fa=j._locale._week.doy,ub=ge(bb(),V,fa),t=ke(n.gg,j._a[Ob],ub.year),y=ke(n.w,ub.week),n.d!=null?(C=n.d,(C<0||C>6)&&(ab=!0)):n.e!=null?(C=n.e+V,(n.e<0||n.e>6)&&(ab=!0)):C=V),y<1||y>vc(t,V,fa)?X(j)._overflowWeeks=!0:ab!=null?X(j)._overflowWeekday=!0:(Ia=Gk(t,y,C,V,fa),j._a[Ob]=Ia.year,j._dayOfYear=Ia.dayOfYear)}f.ISO_8601=function(){},f.RFC_2822=function(){};function ng(j){if(j._f===f.ISO_8601){je(j);return}if(j._f===f.RFC_2822){Ok(j);return}j._a=[],X(j).empty=!0;var n=""+j._i,t,y,C,V,fa,Ia=n.length,ab=0,ub;for(C=Da(j._f,j._locale).match(ra)||[],t=0;t<C.length;t++)V=C[t],y=(n.match(Kh(V,j))||[])[0],y&&(fa=n.substr(0,n.indexOf(y)),fa.length>0&&X(j).unusedInput.push(fa),n=n.slice(n.indexOf(y)+y.length),ab+=y.length),ya[V]?(y?X(j).empty=!1:X(j).unusedTokens.push(V),uk(V,y,j)):j._strict&&!y&&X(j).unusedTokens.push(V);X(j).charsLeftOver=Ia-ab,n.length>0&&X(j).unusedInput.push(n),j._a[Fb]<=12&&X(j).bigHour===!0&&j._a[Fb]>0&&(X(j).bigHour=void 0),X(j).parsedDateParts=j._a.slice(0),X(j).meridiem=j._meridiem,j._a[Fb]=hq(j._locale,j._a[Fb],j._meridiem),ub=X(j).era,ub!==null&&(j._a[Ob]=j._locale.erasConvertYear(ub,j._a[Ob])),Uh(j),qf(j)}function hq(j,n,t){var y;return t==null?n:j.meridiemHour!=null?j.meridiemHour(n,t):j.isPM!=null?(y=j.isPM(t),y&&n<12&&(n+=12),!y&&n===12&&(n=0),n):n}function le(j){var n,t,y,C,V,fa,Ia=!1;if(j._f.length===0){X(j).invalidFormat=!0,j._d=new Date(NaN);return}for(C=0;C<j._f.length;C++)V=0,fa=!1,n=va({},j),j._useUTC!=null&&(n._useUTC=j._useUTC),n._f=j._f[C],ng(n),ja(n)&&(fa=!0),V+=X(n).charsLeftOver,V+=X(n).unusedTokens.length*10,X(n).score=V,Ia?V<y&&(y=V,t=n):(y==null||V<y||fa)&&(y=V,t=n,fa&&(Ia=!0));J(j,t||n)}function ob(j){if(j._d)return;var n=Zb(j._i),t=n.day===void 0?n.date:n.day;j._a=Q([n.year,n.month,t,n.hour,n.minute,n.second,n.millisecond],function(y){return y&&parseInt(y,10)}),Uh(j)}function sf(j){var n=new na(qf(Hc(j)));return n._nextDay&&(n.add(1,"d"),n._nextDay=void 0),n}function Hc(j){var n=j._i,t=j._f;return j._locale=j._locale||wb(j._l),n===null||t===void 0&&n===""?qa({nullInput:!0}):(typeof n==="string"&&(j._i=n=j._locale.preparse(n)),O(n)?new na(qf(n)):(H(n)?j._d=n:l(t)?le(j):t?ng(j):Vh(j),ja(j)||(j._d=null),j))}function Vh(j){var n=j._i;A(n)?j._d=new Date(f.now()):H(n)?j._d=new Date(n.valueOf()):typeof n==="string"?eq(j):l(n)?(j._a=Q(n.slice(0),function(t){return parseInt(t,10)}),Uh(j)):q(n)?ob(j):E(n)?j._d=new Date(n):f.createFromInputFallback(j)}function Wh(j,n,t,y,C){var V={};return(n===!0||n===!1)&&(y=n,n=void 0),(t===!0||t===!1)&&(y=t,t=void 0),(q(j)&&v(j)||l(j)&&j.length===0)&&(j=void 0),V._isAMomentObject=!0,V._useUTC=V._isUTC=C,V._l=t,V._i=j,V._f=n,V._strict=y,sf(V)}function bb(j,n,t,y){return Wh(j,n,t,y,!1)}var Vc=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var j=bb.apply(null,arguments);return this.isValid()&&j.isValid()?j<this?this:j:qa()}),iq=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var j=bb.apply(null,arguments);return this.isValid()&&j.isValid()?j>this?this:j:qa()});function Xh(j,n){var t,y;n.length===1&&l(n[0])&&(n=n[0]);if(!n.length)return bb();for(t=n[0],y=1;y<n.length;++y)(!n[y].isValid()||n[y][j](t))&&(t=n[y]);return t}function jq(){var j=[].slice.call(arguments,0);return Xh("isBefore",j)}function kq(){var j=[].slice.call(arguments,0);return Xh("isAfter",j)}var lq=function(){return Date.now?Date.now():+new Date()},hd=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Pk(j){var n,t=!1,y;for(n in j)if(u(j,n)&&!(Cb.call(hd,n)!==-1&&(j[n]==null||!isNaN(j[n]))))return!1;for(y=0;y<hd.length;++y)if(j[hd[y]]){if(t)return!1;parseFloat(j[hd[y]])!==N(j[hd[y]])&&(t=!0)}return!0}function mq(){return this._isValid}function nq(){return xc(NaN)}function me(j){var n=Zb(j),t=n.year||0,y=n.quarter||0,C=n.month||0,V=n.week||n.isoWeek||0,fa=n.day||0,Ia=n.hour||0,ab=n.minute||0,ub=n.second||0,od=n.millisecond||0;this._isValid=Pk(n),this._milliseconds=+od+ub*1e3+ab*6e4+Ia*1e3*60*60,this._days=+fa+V*7,this._months=+C+y*3+t*12,this._data={},this._locale=wb(),this._bubble()}function ne(j){return j instanceof me}function og(j){return j<0?Math.round(-1*j)*-1:Math.round(j)}function Yh(j,n,t){var y=Math.min(j.length,n.length),C=Math.abs(j.length-n.length),V=0,fa;for(fa=0;fa<y;fa++)(t&&j[fa]!==n[fa]||!t&&N(j[fa])!==N(n[fa]))&&V++;return V+C}function Qk(j,n){ma(j,0,0,function(){var t=this.utcOffset(),y="+";return t<0&&(t=-t,y="-"),y+xa(~~(t/60),2)+n+xa(~~t%60,2)})}Qk("Z",":"),Qk("ZZ",""),sa("Z",cg),sa("ZZ",cg),mb(["Z","ZZ"],function(j,n,t){t._useUTC=!0,t._tzm=pg(cg,j)});var oq=/([\+\-]|\d\d)/gi;function pg(j,n){var t=(n||"").match(j),y,C,V;return t===null?null:(y=t[t.length-1]||[],C=(y+"").match(oq)||["-",0,0],V=+(C[1]*60)+N(C[2]),V===0?0:C[0]==="+"?V:-V)}function qg(j,n){var t,y;return n._isUTC?(t=n.clone(),y=(O(j)||H(j)?j.valueOf():bb(j).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+y),f.updateOffset(t,!1),t):bb(j).local()}function rg(j){return-Math.round(j._d.getTimezoneOffset())}f.updateOffset=function(){};function id(j,n,t){var y=this._offset||0,C;if(!this.isValid())return j!=null?this:NaN;if(j!=null){if(typeof j==="string"){j=pg(cg,j);if(j===null)return this}else Math.abs(j)<16&&!t&&(j=j*60);return!this._isUTC&&n&&(C=rg(this)),this._offset=j,this._isUTC=!0,C!=null&&this.add(C,"m"),y!==j&&(!n||this._changeInProgress?_h(this,xc(j-y,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,f.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?y:rg(this)}function Ta(j,n){return j!=null?(typeof j!=="string"&&(j=-j),this.utcOffset(j,n),this):-this.utcOffset()}function pq(j){return this.utcOffset(0,j)}function Fd(j){return this._isUTC&&(this.utcOffset(0,j),this._isUTC=!1,j&&this.subtract(rg(this),"m")),this}function sg(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i==="string"){var j=pg(Fp,this._i);j!=null?this.utcOffset(j):this.utcOffset(0,!0)}return this}function qq(j){return this.isValid()?(j=j?bb(j).utcOffset():0,(this.utcOffset()-j)%60===0):!1}function Zh(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function tf(){if(!A(this._isDSTShifted))return this._isDSTShifted;var j={},n;return va(j,this),j=Hc(j),j._a?(n=j._isUTC?S(j._a):bb(j._a),this._isDSTShifted=this.isValid()&&Yh(j._a,n.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Gd(){return this.isValid()?!this._isUTC:!1}function uf(){return this.isValid()?this._isUTC:!1}function jd(){return this.isValid()?this._isUTC&&this._offset===0:!1}var oe=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,rq=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function xc(j,n){var t=j,y=null,C,V,fa;return ne(j)?t={ms:j._milliseconds,d:j._days,M:j._months}:E(j)||!isNaN(+j)?(t={},n?t[n]=+j:t.milliseconds=+j):(y=oe.exec(j))?(C=y[1]==="-"?-1:1,t={y:0,d:N(y[Jb])*C,h:N(y[Fb])*C,m:N(y[uc])*C,s:N(y[Tc])*C,ms:N(og(y[Ad]*1e3))*C}):(y=rq.exec(j))?(C=y[1]==="-"?-1:1,t={y:Hd(y[2],C),M:Hd(y[3],C),w:Hd(y[4],C),d:Hd(y[5],C),h:Hd(y[6],C),m:Hd(y[7],C),s:Hd(y[8],C)}):t==null?t={}:typeof t==="object"&&("from"in t||"to"in t)&&(fa=vf(bb(t.from),bb(t.to)),t={},t.ms=fa.milliseconds,t.M=fa.months),V=new me(t),ne(j)&&u(j,"_locale")&&(V._locale=j._locale),ne(j)&&u(j,"_isValid")&&(V._isValid=j._isValid),V}xc.fn=me.prototype,xc.invalid=nq;function Hd(j,n){var t=j&&parseFloat(j.replace(",","."));return(isNaN(t)?0:t)*n}function Rk(j,n){var t={};return t.months=n.month()-j.month()+(n.year()-j.year())*12,j.clone().add(t.months,"M").isAfter(n)&&--t.months,t.milliseconds=+n-+j.clone().add(t.months,"M"),t}function vf(j,n){var t;return j.isValid()&&n.isValid()?(n=qg(n,j),j.isBefore(n)?t=Rk(j,n):(t=Rk(n,j),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function tg(j,n){return function(t,y){var C,V;return y!==null&&!isNaN(+y)&&(F(n,"moment()."+n+"(period, number) is deprecated. Please use moment()."+n+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),V=t,t=y,y=V),C=xc(t,y),_h(this,C,j),this}}function _h(j,n,t,y){var C=n._milliseconds,V=og(n._days),fa=og(n._months);if(!j.isValid())return;y=y==null?!0:y,fa&&Dk(j,ba(j,"Month")+fa*t),V&&$(j,"Date",ba(j,"Date")+V*t),C&&j._d.setTime(j._d.valueOf()+C*t),y&&f.updateOffset(j,V||fa)}var $h=tg(1,"add"),ai=tg(-1,"subtract");function Sk(j){return typeof j==="string"||j instanceof String}function sq(j){return O(j)||H(j)||Sk(j)||E(j)||uq(j)||tq(j)||j===null||j===void 0}function tq(j){var n=q(j)&&!v(j),t=!1,y=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],C,V;for(C=0;C<y.length;C+=1)V=y[C],t=t||u(j,V);return n&&t}function uq(j){var n=l(j),t=!1;return n&&(t=j.filter(function(y){return!E(y)&&Sk(j)}).length===0),n&&t}function ug(j){var n=q(j)&&!v(j),t=!1,y=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],C,V;for(C=0;C<y.length;C+=1)V=y[C],t=t||u(j,V);return n&&t}function bi(j,n){var t=j.diff(n,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function ec(j,n){arguments.length===1&&(arguments[0]?sq(arguments[0])?(j=arguments[0],n=void 0):ug(arguments[0])&&(n=arguments[0],j=void 0):(j=void 0,n=void 0));var t=j||bb(),y=qg(t,this).startOf("day"),C=f.calendarFormat(this,y)||"sameElse",V=n&&(K(n[C])?n[C].call(this,t):n[C]);return this.format(V||this.localeData().calendar(C,this,bb(t)))}function ci(){return new na(this)}function vq(j,n){var t=O(j)?j:bb(j);return this.isValid()&&t.isValid()?(n=Za(n)||"millisecond",n==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(n).valueOf()):!1}function Tk(j,n){var t=O(j)?j:bb(j);return this.isValid()&&t.isValid()?(n=Za(n)||"millisecond",n==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(n).valueOf()<t.valueOf()):!1}function wq(j,n,t,y){var C=O(j)?j:bb(j),V=O(n)?n:bb(n);return this.isValid()&&C.isValid()&&V.isValid()?(y=y||"()",(y[0]==="("?this.isAfter(C,t):!this.isBefore(C,t))&&(y[1]===")"?this.isBefore(V,t):!this.isAfter(V,t))):!1}function xq(j,n){var t=O(j)?j:bb(j),y;return this.isValid()&&t.isValid()?(n=Za(n)||"millisecond",n==="millisecond"?this.valueOf()===t.valueOf():(y=t.valueOf(),this.clone().startOf(n).valueOf()<=y&&y<=this.clone().endOf(n).valueOf())):!1}function Id(j,n){return this.isSame(j,n)||this.isAfter(j,n)}function yq(j,n){return this.isSame(j,n)||this.isBefore(j,n)}function vg(j,n,t){var y,C,V;if(!this.isValid())return NaN;y=qg(j,this);if(!y.isValid())return NaN;C=(y.utcOffset()-this.utcOffset())*6e4,n=Za(n);switch(n){case"year":V=wg(this,y)/12;break;case"month":V=wg(this,y);break;case"quarter":V=wg(this,y)/3;break;case"second":V=(this-y)/1e3;break;case"minute":V=(this-y)/6e4;break;case"hour":V=(this-y)/36e5;break;case"day":V=(this-y-C)/864e5;break;case"week":V=(this-y-C)/6048e5;break;default:V=this-y}return t?V:W(V)}function wg(j,n){if(j.date()<n.date())return-wg(n,j);var t=(n.year()-j.year())*12+(n.month()-j.month()),y=j.clone().add(t,"months"),C,V;return n-y<0?(C=j.clone().add(t-1,"months"),V=(n-y)/(y-C)):(C=j.clone().add(t+1,"months"),V=(n-y)/(C-y)),-(t+V)||0}f.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",f.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function zq(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Aq(j){if(!this.isValid())return null;var n=j!==!0,t=n?this.clone().utc():this;return t.year()<0||t.year()>9999?lb(t,n?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):K(Date.prototype.toISOString)?n?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",lb(t,"Z")):lb(t,n?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Bq(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var j="moment",n="",t,y,C,V;return this.isLocal()||(j=this.utcOffset()===0?"moment.utc":"moment.parseZone",n="Z"),t="["+j+'("]',y=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",C="-MM-DD[T]HH:mm:ss.SSS",V=n+'[")]',this.format(t+y+C+V)}function Cq(j){j||(j=this.isUtc()?f.defaultFormatUtc:f.defaultFormat);var n=lb(this,j);return this.localeData().postformat(n)}function Dq(j,n){return this.isValid()&&(O(j)&&j.isValid()||bb(j).isValid())?xc({to:this,from:j}).locale(this.locale()).humanize(!n):this.localeData().invalidDate()}function Uk(j){return this.from(bb(),j)}function Eq(j,n){return this.isValid()&&(O(j)&&j.isValid()||bb(j).isValid())?xc({from:this,to:j}).locale(this.locale()).humanize(!n):this.localeData().invalidDate()}function di(j){return this.to(bb(),j)}function $b(j){var n;return j===void 0?this._locale._abbr:(n=wb(j),n!=null&&(this._locale=n),this)}var Vk=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(j){return j===void 0?this.localeData():this.locale(j)});function Wk(){return this._locale}var Jd=1e3,Kd=60*Jd,xg=60*Kd,wf=(365*400+97)*24*xg;function kd(j,n){return(j%n+n)%n}function ei(j,n,t){return j<100&&j>=0?new Date(j+400,n,t)-wf:new Date(j,n,t).valueOf()}function Xk(j,n,t){return j<100&&j>=0?Date.UTC(j+400,n,t)-wf:Date.UTC(j,n,t)}function fi(j){var n,t;j=Za(j);if(j===void 0||j==="millisecond"||!this.isValid())return this;t=this._isUTC?Xk:ei;switch(j){case"year":n=t(this.year(),0,1);break;case"quarter":n=t(this.year(),this.month()-this.month()%3,1);break;case"month":n=t(this.year(),this.month(),1);break;case"week":n=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":n=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":n=t(this.year(),this.month(),this.date());break;case"hour":n=this._d.valueOf(),n-=kd(n+(this._isUTC?0:this.utcOffset()*Kd),xg);break;case"minute":n=this._d.valueOf(),n-=kd(n,Kd);break;case"second":n=this._d.valueOf(),n-=kd(n,Jd);break}return this._d.setTime(n),f.updateOffset(this,!0),this}function Fq(j){var n,t;j=Za(j);if(j===void 0||j==="millisecond"||!this.isValid())return this;t=this._isUTC?Xk:ei;switch(j){case"year":n=t(this.year()+1,0,1)-1;break;case"quarter":n=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":n=t(this.year(),this.month()+1,1)-1;break;case"week":n=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":n=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":n=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":n=this._d.valueOf(),n+=xg-kd(n+(this._isUTC?0:this.utcOffset()*Kd),xg)-1;break;case"minute":n=this._d.valueOf(),n+=Kd-kd(n,Kd)-1;break;case"second":n=this._d.valueOf(),n+=Jd-kd(n,Jd)-1;break}return this._d.setTime(n),f.updateOffset(this,!0),this}function Yk(){return this._d.valueOf()-(this._offset||0)*6e4}function Gq(){return Math.floor(this.valueOf()/1e3)}function Hq(){return new Date(this.valueOf())}function Iq(){var j=this;return[j.year(),j.month(),j.date(),j.hour(),j.minute(),j.second(),j.millisecond()]}function Jq(){var j=this;return{years:j.year(),months:j.month(),date:j.date(),hours:j.hours(),minutes:j.minutes(),seconds:j.seconds(),milliseconds:j.milliseconds()}}function Kq(){return this.isValid()?this.toISOString():null}function Lq(){return ja(this)}function yg(){return J({},X(this))}function Zk(){return X(this).overflow}function Mq(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ma("N",0,0,"eraAbbr"),ma("NN",0,0,"eraAbbr"),ma("NNN",0,0,"eraAbbr"),ma("NNNN",0,0,"eraName"),ma("NNNNN",0,0,"eraNarrow"),ma("y",["y",1],"yo","eraYear"),ma("y",["yy",2],0,"eraYear"),ma("y",["yyy",3],0,"eraYear"),ma("y",["yyyy",4],0,"eraYear"),sa("N",Ag),sa("NN",Ag),sa("NNN",Ag),sa("NNNN",Pq),sa("NNNNN",Qq),mb(["N","NN","NNN","NNNN","NNNNN"],function(j,n,t,y){var C=t._locale.erasParse(j,y,t._strict);C?X(t).era=C:X(t).invalidEra=j}),sa("y",ce),sa("yy",ce),sa("yyy",ce),sa("yyyy",ce),sa("yo",pe),mb(["y","yy","yyy","yyyy"],Ob),mb(["yo"],function(j,n,t,y){var C;t._locale._eraYearOrdinalRegex&&(C=j.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?n[Ob]=t._locale.eraYearOrdinalParse(j,C):n[Ob]=parseInt(j,10)});function gi(j,n){var t,y,C,V=this._eras||wb("en")._eras;for(t=0,y=V.length;t<y;++t){switch(typeof V[t].since){case"string":C=f(V[t].since).startOf("day"),V[t].since=C.valueOf();break}switch(typeof V[t].until){case"undefined":V[t].until=Infinity;break;case"string":C=f(V[t].until).startOf("day").valueOf(),V[t].until=C.valueOf();break}}return V}function _k(j,n,t){var y,C,V=this.eras(),fa,Ia,ab;for(j=j.toUpperCase(),y=0,C=V.length;y<C;++y){fa=V[y].name.toUpperCase(),Ia=V[y].abbr.toUpperCase(),ab=V[y].narrow.toUpperCase();if(t)switch(n){case"N":case"NN":case"NNN":if(Ia===j)return V[y];break;case"NNNN":if(fa===j)return V[y];break;case"NNNNN":if(ab===j)return V[y];break}else if([fa,Ia,ab].indexOf(j)>=0)return V[y]}}function Nq(j,n){var t=j.since<=j.until?1:-1;return n===void 0?f(j.since).year():f(j.since).year()+(n-j.offset)*t}function $k(){var j,n,t,y=this.localeData().eras();for(j=0,n=y.length;j<n;++j){t=this.clone().startOf("day").valueOf();if(y[j].since<=t&&t<=y[j].until)return y[j].name;if(y[j].until<=t&&t<=y[j].since)return y[j].name}return""}function hi(){var j,n,t,y=this.localeData().eras();for(j=0,n=y.length;j<n;++j){t=this.clone().startOf("day").valueOf();if(y[j].since<=t&&t<=y[j].until)return y[j].narrow;if(y[j].until<=t&&t<=y[j].since)return y[j].narrow}return""}function zg(){var j,n,t,y=this.localeData().eras();for(j=0,n=y.length;j<n;++j){t=this.clone().startOf("day").valueOf();if(y[j].since<=t&&t<=y[j].until)return y[j].abbr;if(y[j].until<=t&&t<=y[j].since)return y[j].abbr}return""}function fc(){var j,n,t,y,C=this.localeData().eras();for(j=0,n=C.length;j<n;++j){t=C[j].since<=C[j].until?1:-1,y=this.clone().startOf("day").valueOf();if(C[j].since<=y&&y<=C[j].until||C[j].until<=y&&y<=C[j].since)return(this.year()-f(C[j].since).year())*t+C[j].offset}return this.year()}function al(j){return u(this,"_erasNameRegex")||xf.call(this),j?this._erasNameRegex:this._erasRegex}function Oq(j){return u(this,"_erasAbbrRegex")||xf.call(this),j?this._erasAbbrRegex:this._erasRegex}function bl(j){return u(this,"_erasNarrowRegex")||xf.call(this),j?this._erasNarrowRegex:this._erasRegex}function Ag(j,n){return n.erasAbbrRegex(j)}function Pq(j,n){return n.erasNameRegex(j)}function Qq(j,n){return n.erasNarrowRegex(j)}function pe(j,n){return n._eraYearOrdinalRegex||ce}function xf(){var j=[],n=[],t=[],y=[],C,V,fa=this.eras();for(C=0,V=fa.length;C<V;++C)n.push(_b(fa[C].name)),j.push(_b(fa[C].abbr)),t.push(_b(fa[C].narrow)),y.push(_b(fa[C].name)),y.push(_b(fa[C].abbr)),y.push(_b(fa[C].narrow));this._erasRegex=new RegExp("^("+y.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+n.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+j.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}ma(0,["gg",2],0,function(){return this.weekYear()%100}),ma(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Ic(j,n){ma(0,[j,j.length],0,n)}Ic("gggg","weekYear"),Ic("ggggg","weekYear"),Ic("GGGG","isoWeekYear"),Ic("GGGGG","isoWeekYear"),Ja("weekYear","gg"),Ja("isoWeekYear","GG"),qb("weekYear",1),qb("isoWeekYear",1),sa("G",bg),sa("g",bg),sa("GG",Oa,$a),sa("gg",Oa,$a),sa("GGGG",Jh,Rb),sa("gggg",Jh,Rb),sa("GGGGG",B,Ib),sa("ggggg",B,Ib),ff(["gggg","ggggg","GGGG","GGGGG"],function(j,n,t,y){n[y.substr(0,2)]=N(j)}),ff(["gg","GG"],function(j,n,t,y){n[y]=f.parseTwoDigitYear(j)});function cl(j){return ii.call(this,j,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Rq(j){return ii.call(this,j,this.isoWeek(),this.isoWeekday(),1,4)}function Sq(){return vc(this.year(),1,4)}function Tq(){return vc(this.isoWeekYear(),1,4)}function Uq(){var j=this.localeData()._week;return vc(this.year(),j.dow,j.doy)}function Vq(){var j=this.localeData()._week;return vc(this.weekYear(),j.dow,j.doy)}function ii(j,n,t,y,C){var V;return j==null?ge(this,y,C).year:(V=vc(j,y,C),n>V&&(n=V),Wq.call(this,j,n,t,y,C))}function Wq(j,n,t,y,C){var V=Gk(j,n,t,y,C),fa=kf(V.year,0,V.dayOfYear);return this.year(fa.getUTCFullYear()),this.month(fa.getUTCMonth()),this.date(fa.getUTCDate()),this}ma("Q",0,"Qo","quarter"),Ja("quarter","Q"),qb("quarter",7),sa("Q",rb),mb("Q",function(j,n){n[Eb]=(N(j)-1)*3});function dl(j){return j==null?Math.ceil((this.month()+1)/3):this.month((j-1)*3+this.month()%3)}ma("D",["DD",2],"Do","date"),Ja("date","D"),qb("date",9),sa("D",Oa),sa("DD",Oa,$a),sa("Do",function(j,n){return j?n._dayOfMonthOrdinalParse||n._ordinalParse:n._dayOfMonthOrdinalParseLenient}),mb(["D","DD"],Jb),mb("Do",function(j,n){n[Jb]=N(j.match(Oa)[0])});var el=Y("Date",!0);ma("DDD",["DDDD",3],"DDDo","dayOfYear"),Ja("dayOfYear","DDD"),qb("dayOfYear",4),sa("DDD",ag),sa("DDDD",nb),mb(["DDD","DDDD"],function(j,n,t){t._dayOfYear=N(j)});function Xq(j){var n=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return j==null?n:this.add(j-n,"d")}ma("m",["mm",2],0,"minute"),Ja("minute","m"),qb("minute",14),sa("m",Oa),sa("mm",Oa,$a),mb(["m","mm"],uc);var Yq=Y("Minutes",!1);ma("s",["ss",2],0,"second"),Ja("second","s"),qb("second",15),sa("s",Oa),sa("ss",Oa,$a),mb(["s","ss"],Tc);var Zq=Y("Seconds",!1);ma("S",0,0,function(){return~~(this.millisecond()/100)}),ma(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),ma(0,["SSS",3],0,"millisecond"),ma(0,["SSSS",4],0,function(){return this.millisecond()*10}),ma(0,["SSSSS",5],0,function(){return this.millisecond()*100}),ma(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),ma(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),ma(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),ma(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),Ja("millisecond","ms"),qb("millisecond",16),sa("S",ag,rb),sa("SS",ag,$a),sa("SSS",ag,nb);var ld,fl;for(ld="SSSS";ld.length<=9;ld+="S")sa(ld,ce);function _q(j,n){n[Ad]=N(("0."+j)*1e3)}for(ld="S";ld.length<=9;ld+="S")mb(ld,_q);fl=Y("Milliseconds",!1),ma("z",0,0,"zoneAbbr"),ma("zz",0,0,"zoneName");function $q(){return this._isUTC?"UTC":""}function ar(){return this._isUTC?"Coordinated Universal Time":""}var la=na.prototype;la.add=$h,la.calendar=ec,la.clone=ci,la.diff=vg,la.endOf=Fq,la.format=Cq,la.from=Dq,la.fromNow=Uk,la.to=Eq,la.toNow=di,la.get=ha,la.invalidAt=Zk,la.isAfter=vq,la.isBefore=Tk,la.isBetween=wq,la.isSame=xq,la.isSameOrAfter=Id,la.isSameOrBefore=yq,la.isValid=Lq,la.lang=Vk,la.locale=$b,la.localeData=Wk,la.max=iq,la.min=Vc,la.parsingFlags=yg,la.set=Sa,la.startOf=fi,la.subtract=ai,la.toArray=Iq,la.toObject=Jq,la.toDate=Hq,la.toISOString=Aq,la.inspect=Bq,typeof Symbol!=="undefined"&&Symbol.for!=null&&(la[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),la.toJSON=Kq,la.toString=zq,la.unix=Gq,la.valueOf=Yk,la.creationData=Mq,la.eraName=$k,la.eraNarrow=hi,la.eraAbbr=zg,la.eraYear=fc,la.year=Fk,la.isLeapYear=jf,la.weekYear=cl,la.isoWeekYear=Rq,la.quarter=la.quarters=dl,la.month=ee,la.daysInMonth=Kp,la.week=la.weeks=Uc,la.isoWeek=la.isoWeeks=Cd,la.weeksInYear=Uq,la.weeksInWeekYear=Vq,la.isoWeeksInYear=Sq,la.isoWeeksInISOWeekYear=Tq,la.date=el,la.day=la.days=Wp,la.weekday=Kk,la.isoWeekday=Ed,la.dayOfYear=Xq,la.hour=la.hours=Yp,la.minute=la.minutes=Yq,la.second=la.seconds=Zq,la.millisecond=la.milliseconds=fl,la.utcOffset=id,la.utc=pq,la.local=Fd,la.parseZone=sg,la.hasAlignedHourOffset=qq,la.isDST=Zh,la.isLocal=Gd,la.isUtcOffset=uf,la.isUtc=jd,la.isUTC=jd,la.zoneAbbr=$q,la.zoneName=ar,la.dates=x("dates accessor is deprecated. Use date instead.",el),la.months=x("months accessor is deprecated. Use month instead",ee),la.years=x("years accessor is deprecated. Use year instead",Fk),la.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Ta),la.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",tf);function gl(j){return bb(j*1e3)}function hl(){return bb.apply(null,arguments).parseZone()}function il(j){return j}var fb=da.prototype;fb.calendar=_,fb.longDateFormat=eb,fb.invalidDate=pa,fb.ordinal=ua,fb.preparse=il,fb.postformat=il,fb.relativeTime=hb,fb.pastFuture=pb,fb.set=U,fb.eras=gi,fb.erasParse=_k,fb.erasConvertYear=Nq,fb.erasAbbrRegex=Oq,fb.erasNameRegex=al,fb.erasNarrowRegex=bl,fb.months=Bk,fb.monthsShort=Ck,fb.monthsParse=Jp,fb.monthsRegex=Lp,fb.monthsShortRegex=dc,fb.week=Mp,fb.firstDayOfYear=Bd,fb.firstDayOfWeek=fg,fb.weekdays=Sp,fb.weekdaysMin=Up,fb.weekdaysShort=Tp,fb.weekdaysParse=Vp,fb.weekdaysRegex=lf,fb.weekdaysShortRegex=Mh,fb.weekdaysMinRegex=Nh,fb.isPM=ig,fb.meridiem=Zp;function Bg(j,n,t,y){var C=wb(),V=S().set(y,n);return C[t](V,j)}function Wc(j,n,t){E(j)&&(n=j,j=void 0),j=j||"";if(n!=null)return Bg(j,n,t,"month");var y,C=[];for(y=0;y<12;y++)C[y]=Bg(j,y,t,"month");return C}function Jc(j,n,t,y){typeof j==="boolean"?(E(n)&&(t=n,n=void 0),n=n||""):(n=j,t=n,j=!1,E(n)&&(t=n,n=void 0),n=n||"");var C=wb(),V=j?C._week.dow:0,fa,Ia=[];if(t!=null)return Bg(n,(t+V)%7,y,"day");for(fa=0;fa<7;fa++)Ia[fa]=Bg(n,(fa+V)%7,y,"day");return Ia}function ji(j,n){return Wc(j,n,"months")}function jl(j,n){return Wc(j,n,"monthsShort")}function kl(j,n,t){return Jc(j,n,t,"weekdays")}function br(j,n,t){return Jc(j,n,t,"weekdaysShort")}function Xc(j,n,t){return Jc(j,n,t,"weekdaysMin")}gd("en",{eras:[{since:"0001-01-01",until:Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(j){var n=j%10,t=N(j%100/10)===1?"th":n===1?"st":n===2?"nd":n===3?"rd":"th";return j+t}}),f.lang=x("moment.lang is deprecated. Use moment.locale instead.",gd),f.langData=x("moment.langData is deprecated. Use moment.localeData instead.",wb);var Kc=Math.abs;function ll(){var j=this._data;return this._milliseconds=Kc(this._milliseconds),this._days=Kc(this._days),this._months=Kc(this._months),j.milliseconds=Kc(j.milliseconds),j.seconds=Kc(j.seconds),j.minutes=Kc(j.minutes),j.hours=Kc(j.hours),j.months=Kc(j.months),j.years=Kc(j.years),this}function ml(j,n,t,y){var C=xc(n,t);return j._milliseconds+=y*C._milliseconds,j._days+=y*C._days,j._months+=y*C._months,j._bubble()}function md(j,n){return ml(this,j,n,1)}function cr(j,n){return ml(this,j,n,-1)}function nl(j){return j<0?Math.floor(j):Math.ceil(j)}function dr(){var j=this._milliseconds,n=this._days,t=this._months,y=this._data,C,V,fa,Ia,ab;return j>=0&&n>=0&&t>=0||j<=0&&n<=0&&t<=0||(j+=nl(li(t)+n)*864e5,n=0,t=0),y.milliseconds=j%1e3,C=W(j/1e3),y.seconds=C%60,V=W(C/60),y.minutes=V%60,fa=W(V/60),y.hours=fa%24,n+=W(fa/24),ab=W(ki(n)),t+=ab,n-=nl(li(ab)),Ia=W(t/12),t%=12,y.days=n,y.months=t,y.years=Ia,this}function ki(j){return j*4800/146097}function li(j){return j*146097/4800}function c(j){if(!this.isValid())return NaN;var n,t,y=this._milliseconds;j=Za(j);if(j==="month"||j==="quarter"||j==="year"){n=this._days+y/864e5,t=this._months+ki(n);switch(j){case"month":return t;case"quarter":return t/3;case"year":return t/12}}else{n=this._days+Math.round(li(this._months));switch(j){case"week":return n/7+y/6048e5;case"day":return n+y/864e5;case"hour":return n*24+y/36e5;case"minute":return n*1440+y/6e4;case"second":return n*86400+y/1e3;case"millisecond":return Math.floor(n*864e5)+y;default:throw new Error("Unknown unit "+j)}}}function e(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+N(this._months/12)*31536e6:NaN}function g(j){return function(){return this.as(j)}}var h=g("ms"),k=g("s"),m=g("m"),o=g("h"),r=g("d"),p=g("w"),s=g("M"),w=g("Q"),z=g("y");function D(){return xc(this)}function M(j){return j=Za(j),this.isValid()?this[j+"s"]():NaN}function P(j){return function(){return this.isValid()?this._data[j]:NaN}}var T=P("milliseconds"),Z=P("seconds"),ia=P("minutes"),wa=P("hours"),Aa=P("days"),Pa=P("months"),Na=P("years");function gb(){return W(this.days()/7)}var Qa=Math.round,db={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function sb(j,n,t,y,C){return C.relativeTime(n||1,!!t,j,y)}function Pb(j,n,t,y){var C=xc(j).abs(),V=Qa(C.as("s")),fa=Qa(C.as("m")),Ia=Qa(C.as("h")),ab=Qa(C.as("d")),ub=Qa(C.as("M")),od=Qa(C.as("w")),Ld=Qa(C.as("y")),re=V<=t.ss&&["s",V]||V<t.s&&["ss",V]||fa<=1&&["m"]||fa<t.m&&["mm",fa]||Ia<=1&&["h"]||Ia<t.h&&["hh",Ia]||ab<=1&&["d"]||ab<t.d&&["dd",ab];return t.w!=null&&(re=re||od<=1&&["w"]||od<t.w&&["ww",od]),re=re||ub<=1&&["M"]||ub<t.M&&["MM",ub]||Ld<=1&&["y"]||["yy",Ld],re[2]=n,re[3]=+j>0,re[4]=y,sb.apply(null,re)}function Kb(j){return j===void 0?Qa:typeof j==="function"?(Qa=j,!0):!1}function Gb(j,n){return db[j]===void 0?!1:n===void 0?db[j]:(db[j]=n,j==="s"&&(db.ss=n-1),!0)}function Sb(j,n){if(!this.isValid())return this.localeData().invalidDate();var t=!1,y=db,C,V;return typeof j==="object"&&(n=j,j=!1),typeof j==="boolean"&&(t=j),typeof n==="object"&&(y=Object.assign({},db,n),n.s!=null&&n.ss==null&&(y.ss=n.s-1)),C=this.localeData(),V=Pb(this,!t,y,C),t&&(V=C.pastFuture(+this,V)),C.postformat(V)}var nd=Math.abs;function yc(j){return(j>0)-(j<0)||+j}function qe(){if(!this.isValid())return this.localeData().invalidDate();var j=nd(this._milliseconds)/1e3,n=nd(this._days),t=nd(this._months),y,C,V,fa,Ia=this.asSeconds(),ab,ub,od,Ld;return Ia?(y=W(j/60),C=W(y/60),j%=60,y%=60,V=W(t/12),t%=12,fa=j?j.toFixed(3).replace(/\.?0+$/,""):"",ab=Ia<0?"-":"",ub=yc(this._months)!==yc(Ia)?"-":"",od=yc(this._days)!==yc(Ia)?"-":"",Ld=yc(this._milliseconds)!==yc(Ia)?"-":"",ab+"P"+(V?ub+V+"Y":"")+(t?ub+t+"M":"")+(n?od+n+"D":"")+(C||y||j?"T":"")+(C?Ld+C+"H":"")+(y?Ld+y+"M":"")+(j?Ld+fa+"S":"")):"P0D"}var cb=me.prototype;cb.isValid=mq,cb.abs=ll,cb.add=md,cb.subtract=cr,cb.as=c,cb.asMilliseconds=h,cb.asSeconds=k,cb.asMinutes=m,cb.asHours=o,cb.asDays=r,cb.asWeeks=p,cb.asMonths=s,cb.asQuarters=w,cb.asYears=z,cb.valueOf=e,cb._bubble=dr,cb.clone=D,cb.get=M,cb.milliseconds=T,cb.seconds=Z,cb.minutes=ia,cb.hours=wa,cb.days=Aa,cb.weeks=gb,cb.months=Pa,cb.years=Na,cb.humanize=Sb,cb.toISOString=qe,cb.toString=qe,cb.toJSON=qe,cb.locale=$b,cb.localeData=Wk,cb.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",qe),cb.lang=Vk,ma("X",0,0,"unix"),ma("x",0,0,"valueOf"),sa("x",bg),sa("X",Gp),mb("X",function(j,n,t){t._d=new Date(parseFloat(j)*1e3)}),mb("x",function(j,n,t){t._d=new Date(N(j))});return f.version="2.29.1",i(bb),f.fn=la,f.min=jq,f.max=kq,f.now=lq,f.utc=S,f.unix=gl,f.months=ji,f.isDate=H,f.locale=gd,f.invalid=qa,f.duration=xc,f.isMoment=O,f.weekdays=kl,f.parseZone=hl,f.localeData=wb,f.isDuration=ne,f.monthsShort=jl,f.weekdaysMin=Xc,f.defineLocale=Qh,f.updateLocale=_p,f.locales=Rh,f.weekdaysShort=br,f.normalizeUnits=Za,f.relativeTimeRounding=Kb,f.relativeTimeThreshold=Gb,f.calendarFormat=bi,f.prototype=la,f.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},f})});var Zr=Gc((a,b)=>{(function(d,f){typeof a==="object"&&typeof b!=="undefined"?b.exports=f(function(){try{return _r()}catch(i){}}()):typeof define==="function"&&define.amd?define(["require"],function(i){return f(function(){try{return i("moment")}catch(l){}}())}):(d=d||self,d.Chart=f(d.moment))})(a,function(d){"use strict";d=d&&d.hasOwnProperty("default")?d.default:d;function f(c,e){return e={exports:{}},c(e,e.exports),e.exports}function i(c){return c&&c.default||c}var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},q=f(function(c){var e={};for(var g in l)l.hasOwnProperty(g)&&(e[l[g]]=g);var h=c.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var k in h)if(h.hasOwnProperty(k)){if(!("channels"in h[k]))throw new Error("missing channels property: "+k);if(!("labels"in h[k]))throw new Error("missing channel labels property: "+k);if(h[k].labels.length!==h[k].channels)throw new Error("channel and label counts mismatch: "+k);var m=h[k].channels,o=h[k].labels;delete h[k].channels,delete h[k].labels,Object.defineProperty(h[k],"channels",{value:m}),Object.defineProperty(h[k],"labels",{value:o})}h.rgb.hsl=function(p){var s=p[0]/255,w=p[1]/255,z=p[2]/255,D=Math.min(s,w,z),M=Math.max(s,w,z),P=M-D,T,Z,ia;return M===D?T=0:s===M?T=(w-z)/P:w===M?T=2+(z-s)/P:z===M&&(T=4+(s-w)/P),T=Math.min(T*60,360),T<0&&(T+=360),ia=(D+M)/2,M===D?Z=0:ia<=.5?Z=P/(M+D):Z=P/(2-M-D),[T,Z*100,ia*100]},h.rgb.hsv=function(p){var s,w,z,D,M,P=p[0]/255,T=p[1]/255,Z=p[2]/255,ia=Math.max(P,T,Z),wa=ia-Math.min(P,T,Z),Aa=function(Pa){return(ia-Pa)/6/wa+1/2};return wa===0?D=M=0:(M=wa/ia,s=Aa(P),w=Aa(T),z=Aa(Z),P===ia?D=z-w:T===ia?D=1/3+s-z:Z===ia&&(D=2/3+w-s),D<0?D+=1:D>1&&(D-=1)),[D*360,M*100,ia*100]},h.rgb.hwb=function(p){var s=p[0],w=p[1],z=p[2],D=h.rgb.hsl(p)[0],M=1/255*Math.min(s,Math.min(w,z));return z=1-1/255*Math.max(s,Math.max(w,z)),[D,M*100,z*100]},h.rgb.cmyk=function(p){var s=p[0]/255,w=p[1]/255,z=p[2]/255,D,M,P,T;return T=Math.min(1-s,1-w,1-z),D=(1-s-T)/(1-T)||0,M=(1-w-T)/(1-T)||0,P=(1-z-T)/(1-T)||0,[D*100,M*100,P*100,T*100]};function r(p,s){return Math.pow(p[0]-s[0],2)+Math.pow(p[1]-s[1],2)+Math.pow(p[2]-s[2],2)}h.rgb.keyword=function(p){var s=e[p];if(s)return s;var w=Infinity,z;for(var D in l)if(l.hasOwnProperty(D)){var M=l[D],P=r(p,M);P<w&&(w=P,z=D)}return z},h.keyword.rgb=function(p){return l[p]},h.rgb.xyz=function(p){var s=p[0]/255,w=p[1]/255,z=p[2]/255;s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,w=w>.04045?Math.pow((w+.055)/1.055,2.4):w/12.92,z=z>.04045?Math.pow((z+.055)/1.055,2.4):z/12.92;var D=s*.4124+w*.3576+z*.1805,M=s*.2126+w*.7152+z*.0722,P=s*.0193+w*.1192+z*.9505;return[D*100,M*100,P*100]},h.rgb.lab=function(p){var s=h.rgb.xyz(p),w=s[0],z=s[1],D=s[2],M,P,T;return w/=95.047,z/=100,D/=108.883,w=w>.008856?Math.pow(w,1/3):7.787*w+16/116,z=z>.008856?Math.pow(z,1/3):7.787*z+16/116,D=D>.008856?Math.pow(D,1/3):7.787*D+16/116,M=116*z-16,P=500*(w-z),T=200*(z-D),[M,P,T]},h.hsl.rgb=function(p){var s=p[0]/360,w=p[1]/100,z=p[2]/100,D,M,P,T,Z;if(w===0)return Z=z*255,[Z,Z,Z];z<.5?M=z*(1+w):M=z+w-z*w,D=2*z-M,T=[0,0,0];for(var ia=0;ia<3;ia++)P=s+1/3*-(ia-1),P<0&&P++,P>1&&P--,6*P<1?Z=D+(M-D)*6*P:2*P<1?Z=M:3*P<2?Z=D+(M-D)*(2/3-P)*6:Z=D,T[ia]=Z*255;return T},h.hsl.hsv=function(p){var s=p[0],w=p[1]/100,z=p[2]/100,D=w,M=Math.max(z,.01),P,T;return z*=2,w*=z<=1?z:2-z,D*=M<=1?M:2-M,T=(z+w)/2,P=z===0?2*D/(M+D):2*w/(z+w),[s,P*100,T*100]},h.hsv.rgb=function(p){var s=p[0]/60,w=p[1]/100,z=p[2]/100,D=Math.floor(s)%6,M=s-Math.floor(s),P=255*z*(1-w),T=255*z*(1-w*M),Z=255*z*(1-w*(1-M));z*=255;switch(D){case 0:return[z,Z,P];case 1:return[T,z,P];case 2:return[P,z,Z];case 3:return[P,T,z];case 4:return[Z,P,z];case 5:return[z,P,T]}},h.hsv.hsl=function(p){var s=p[0],w=p[1]/100,z=p[2]/100,D=Math.max(z,.01),M,P,T;return T=(2-w)*z,M=(2-w)*D,P=w*D,P/=M<=1?M:2-M,P=P||0,T/=2,[s,P*100,T*100]},h.hwb.rgb=function(p){var s=p[0]/360,w=p[1]/100,z=p[2]/100,D=w+z,M,P,T,Z;D>1&&(w/=D,z/=D),M=Math.floor(6*s),P=1-z,T=6*s-M,(M&1)!==0&&(T=1-T),Z=w+T*(P-w);var ia,wa,Aa;switch(M){default:case 6:case 0:ia=P,wa=Z,Aa=w;break;case 1:ia=Z,wa=P,Aa=w;break;case 2:ia=w,wa=P,Aa=Z;break;case 3:ia=w,wa=Z,Aa=P;break;case 4:ia=Z,wa=w,Aa=P;break;case 5:ia=P,wa=w,Aa=Z;break}return[ia*255,wa*255,Aa*255]},h.cmyk.rgb=function(p){var s=p[0]/100,w=p[1]/100,z=p[2]/100,D=p[3]/100,M,P,T;return M=1-Math.min(1,s*(1-D)+D),P=1-Math.min(1,w*(1-D)+D),T=1-Math.min(1,z*(1-D)+D),[M*255,P*255,T*255]},h.xyz.rgb=function(p){var s=p[0]/100,w=p[1]/100,z=p[2]/100,D,M,P;return D=s*3.2406+w*-1.5372+z*-.4986,M=s*-.9689+w*1.8758+z*.0415,P=s*.0557+w*-.204+z*1.057,D=D>.0031308?1.055*Math.pow(D,1/2.4)-.055:D*12.92,M=M>.0031308?1.055*Math.pow(M,1/2.4)-.055:M*12.92,P=P>.0031308?1.055*Math.pow(P,1/2.4)-.055:P*12.92,D=Math.min(Math.max(0,D),1),M=Math.min(Math.max(0,M),1),P=Math.min(Math.max(0,P),1),[D*255,M*255,P*255]},h.xyz.lab=function(p){var s=p[0],w=p[1],z=p[2],D,M,P;return s/=95.047,w/=100,z/=108.883,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,w=w>.008856?Math.pow(w,1/3):7.787*w+16/116,z=z>.008856?Math.pow(z,1/3):7.787*z+16/116,D=116*w-16,M=500*(s-w),P=200*(w-z),[D,M,P]},h.lab.xyz=function(p){var s=p[0],w=p[1],z=p[2],D,M,P;M=(s+16)/116,D=w/500+M,P=M-z/200;var T=Math.pow(M,3),Z=Math.pow(D,3),ia=Math.pow(P,3);return M=T>.008856?T:(M-16/116)/7.787,D=Z>.008856?Z:(D-16/116)/7.787,P=ia>.008856?ia:(P-16/116)/7.787,D*=95.047,M*=100,P*=108.883,[D,M,P]},h.lab.lch=function(p){var s=p[0],w=p[1],z=p[2],D,M,P;return D=Math.atan2(z,w),M=D*360/2/Math.PI,M<0&&(M+=360),P=Math.sqrt(w*w+z*z),[s,P,M]},h.lch.lab=function(p){var s=p[0],w=p[1],z=p[2],D,M,P;return P=z/360*2*Math.PI,D=w*Math.cos(P),M=w*Math.sin(P),[s,D,M]},h.rgb.ansi16=function(p){var s=p[0],w=p[1],z=p[2],D=1 in arguments?arguments[1]:h.rgb.hsv(p)[2];D=Math.round(D/50);if(D===0)return 30;var M=30+(Math.round(z/255)<<2|Math.round(w/255)<<1|Math.round(s/255));return D===2&&(M+=60),M},h.hsv.ansi16=function(p){return h.rgb.ansi16(h.hsv.rgb(p),p[2])},h.rgb.ansi256=function(p){var s=p[0],w=p[1],z=p[2];if(s===w&&w===z)return s<8?16:s>248?231:Math.round((s-8)/247*24)+232;var D=16+36*Math.round(s/255*5)+6*Math.round(w/255*5)+Math.round(z/255*5);return D},h.ansi16.rgb=function(p){var s=p%10;if(s===0||s===7)return p>50&&(s+=3.5),s=s/10.5*255,[s,s,s];var w=(~~(p>50)+1)*.5,z=(s&1)*w*255,D=(s>>1&1)*w*255,M=(s>>2&1)*w*255;return[z,D,M]},h.ansi256.rgb=function(p){if(p>=232){var s=(p-232)*10+8;return[s,s,s]}p-=16;var w,z=Math.floor(p/36)/5*255,D=Math.floor((w=p%36)/6)/5*255,M=w%6/5*255;return[z,D,M]},h.rgb.hex=function(p){var s=((Math.round(p[0])&255)<<16)+((Math.round(p[1])&255)<<8)+(Math.round(p[2])&255),w=s.toString(16).toUpperCase();return"000000".substring(w.length)+w},h.hex.rgb=function(p){var s=p.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!s)return[0,0,0];var w=s[0];s[0].length===3&&(w=w.split("").map(function(T){return T+T}).join(""));var z=parseInt(w,16),D=z>>16&255,M=z>>8&255,P=z&255;return[D,M,P]},h.rgb.hcg=function(p){var s=p[0]/255,w=p[1]/255,z=p[2]/255,D=Math.max(Math.max(s,w),z),M=Math.min(Math.min(s,w),z),P=D-M,T,Z;return P<1?T=M/(1-P):T=0,P<=0?Z=0:D===s?Z=(w-z)/P%6:D===w?Z=2+(z-s)/P:Z=4+(s-w)/P+4,Z/=6,Z%=1,[Z*360,P*100,T*100]},h.hsl.hcg=function(p){var s=p[1]/100,w=p[2]/100,z=1,D=0;return w<.5?z=2*s*w:z=2*s*(1-w),z<1&&(D=(w-.5*z)/(1-z)),[p[0],z*100,D*100]},h.hsv.hcg=function(p){var s=p[1]/100,w=p[2]/100,z=s*w,D=0;return z<1&&(D=(w-z)/(1-z)),[p[0],z*100,D*100]},h.hcg.rgb=function(p){var s=p[0]/360,w=p[1]/100,z=p[2]/100;if(w===0)return[z*255,z*255,z*255];var D=[0,0,0],M=s%1*6,P=M%1,T=1-P,Z=0;switch(Math.floor(M)){case 0:D[0]=1,D[1]=P,D[2]=0;break;case 1:D[0]=T,D[1]=1,D[2]=0;break;case 2:D[0]=0,D[1]=1,D[2]=P;break;case 3:D[0]=0,D[1]=T,D[2]=1;break;case 4:D[0]=P,D[1]=0,D[2]=1;break;default:D[0]=1,D[1]=0,D[2]=T}return Z=(1-w)*z,[(w*D[0]+Z)*255,(w*D[1]+Z)*255,(w*D[2]+Z)*255]},h.hcg.hsv=function(p){var s=p[1]/100,w=p[2]/100,z=s+w*(1-s),D=0;return z>0&&(D=s/z),[p[0],D*100,z*100]},h.hcg.hsl=function(p){var s=p[1]/100,w=p[2]/100,z=w*(1-s)+.5*s,D=0;return z>0&&z<.5?D=s/(2*z):z>=.5&&z<1&&(D=s/(2*(1-z))),[p[0],D*100,z*100]},h.hcg.hwb=function(p){var s=p[1]/100,w=p[2]/100,z=s+w*(1-s);return[p[0],(z-s)*100,(1-z)*100]},h.hwb.hcg=function(p){var s=p[1]/100,w=p[2]/100,z=1-w,D=z-s,M=0;return D<1&&(M=(z-D)/(1-D)),[p[0],D*100,M*100]},h.apple.rgb=function(p){return[p[0]/65535*255,p[1]/65535*255,p[2]/65535*255]},h.rgb.apple=function(p){return[p[0]/255*65535,p[1]/255*65535,p[2]/255*65535]},h.gray.rgb=function(p){return[p[0]/100*255,p[0]/100*255,p[0]/100*255]},h.gray.hsl=h.gray.hsv=function(p){return[0,0,p[0]]},h.gray.hwb=function(p){return[0,100,p[0]]},h.gray.cmyk=function(p){return[0,0,0,p[0]]},h.gray.lab=function(p){return[p[0],0,0]},h.gray.hex=function(p){var s=Math.round(p[0]/100*255)&255,w=(s<<16)+(s<<8)+s,z=w.toString(16).toUpperCase();return"000000".substring(z.length)+z},h.rgb.gray=function(p){var s=(p[0]+p[1]+p[2])/3;return[s/255*100]}}),u=q.rgb,v=q.hsl,A=q.hsv,E=q.hwb,H=q.cmyk,Q=q.xyz,J=q.lab,S=q.lch,aa=q.hex,X=q.keyword,ga=q.ansi16,ja=q.ansi256,qa=q.hcg,ka=q.apple,ta=q.gray;function va(){for(var c={},e=Object.keys(q),g=e.length,h=0;h<g;h++)c[e[h]]={distance:-1,parent:null};return c}function na(c){var e=va(),g=[c];for(e[c].distance=0;g.length;)for(var h=g.pop(),k=Object.keys(q[h]),m=k.length,o=0;o<m;o++){var r=k[o],p=e[r];p.distance===-1&&(p.distance=e[h].distance+1,p.parent=h,g.unshift(r))}return e}function O(c,e){return function(g){return e(c(g))}}function R(c,e){for(var g=[e[c].parent,c],h=q[e[c].parent][c],k=e[c].parent;e[k].parent;)g.unshift(e[k].parent),h=O(q[e[k].parent][k],h),k=e[k].parent;return h.conversion=g,h}var x=function(c){for(var e=na(c),g={},h=Object.keys(e),k=h.length,m=0;m<k;m++){var o=h[m],r=e[o];if(r.parent===null)continue;g[o]=R(o,e)}return g},G={},F=Object.keys(q);function K(c){var e=function(g){return g===void 0||g===null?g:(arguments.length>1&&(g=Array.prototype.slice.call(arguments)),c(g))};return"conversion"in c&&(e.conversion=c.conversion),e}function U(c){var e=function(g){if(g===void 0||g===null)return g;arguments.length>1&&(g=Array.prototype.slice.call(arguments));var h=c(g);if(typeof h==="object")for(var k=h.length,m=0;m<k;m++)h[m]=Math.round(h[m]);return h};return"conversion"in c&&(e.conversion=c.conversion),e}F.forEach(function(c){G[c]={},Object.defineProperty(G[c],"channels",{value:q[c].channels}),Object.defineProperty(G[c],"labels",{value:q[c].labels});var e=x(c),g=Object.keys(e);g.forEach(function(h){var k=e[h];G[c][h]=U(k),G[c][h].raw=K(k)})});var L=G,da={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ca={getRgba:Ca,getHsla:_,getRgb:ra,getHsl:ea,getHwb:xa,getAlpha:oa,hexString:ya,rgbString:ma,rgbaString:ib,percentString:kb,percentaString:lb,hslString:Da,hslaString:Ma,hwbString:eb,keyword:jb};function Ca(c){if(!c)return;var e=/^#([a-fA-F0-9]{3,4})$/i,g=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,h=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,k=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,m=/(\w+)/,o=[0,0,0],r=1,p=c.match(e),s="";if(p){p=p[1],s=p[3];for(var w=0;w<o.length;w++)o[w]=parseInt(p[w]+p[w],16);s&&(r=Math.round(parseInt(s+s,16)/255*100)/100)}else if(p=c.match(g)){s=p[2],p=p[1];for(var w=0;w<o.length;w++)o[w]=parseInt(p.slice(w*2,w*2+2),16);s&&(r=Math.round(parseInt(s,16)/255*100)/100)}else if(p=c.match(h)){for(var w=0;w<o.length;w++)o[w]=parseInt(p[w+1]);r=parseFloat(p[4])}else if(p=c.match(k)){for(var w=0;w<o.length;w++)o[w]=Math.round(parseFloat(p[w+1])*2.55);r=parseFloat(p[4])}else if(p=c.match(m)){if(p[1]=="transparent")return[0,0,0,0];o=da[p[1]];if(!o)return}for(var w=0;w<o.length;w++)o[w]=pa(o[w],0,255);return!r&&r!=0?r=1:r=pa(r,0,1),o[3]=r,o}function _(c){if(!c)return;var e=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,g=c.match(e);if(g){var h=parseFloat(g[4]),k=pa(parseInt(g[1]),0,360),m=pa(parseFloat(g[2]),0,100),o=pa(parseFloat(g[3]),0,100),r=pa(isNaN(h)?1:h,0,1);return[k,m,o,r]}}function xa(c){if(!c)return;var e=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,g=c.match(e);if(g){var h=parseFloat(g[4]),k=pa(parseInt(g[1]),0,360),m=pa(parseFloat(g[2]),0,100),o=pa(parseFloat(g[3]),0,100),r=pa(isNaN(h)?1:h,0,1);return[k,m,o,r]}}function ra(c){var e=Ca(c);return e&&e.slice(0,3)}function ea(c){var e=_(c);return e&&e.slice(0,3)}function oa(c){var e=Ca(c);if(e)return e[3];{if(e=_(c))return e[3];if(e=xa(c))return e[3]}}function ya(c,e){var e=e!==void 0&&c.length===3?e:c[3];return"#"+za(c[0])+za(c[1])+za(c[2])+(e>=0&&e<1?za(Math.round(e*255)):"")}function ma(c,e){return e<1||c[3]&&c[3]<1?ib(c,e):"rgb("+c[0]+", "+c[1]+", "+c[2]+")"}function ib(c,e){return e===void 0&&(e=c[3]!==void 0?c[3]:1),"rgba("+c[0]+", "+c[1]+", "+c[2]+", "+e+")"}function kb(c,e){if(e<1||c[3]&&c[3]<1)return lb(c,e);var g=Math.round(c[0]/255*100),h=Math.round(c[1]/255*100),k=Math.round(c[2]/255*100);return"rgb("+g+"%, "+h+"%, "+k+"%)"}function lb(c,e){var g=Math.round(c[0]/255*100),h=Math.round(c[1]/255*100),k=Math.round(c[2]/255*100);return"rgba("+g+"%, "+h+"%, "+k+"%, "+(e||c[3]||1)+")"}function Da(c,e){return e<1||c[3]&&c[3]<1?Ma(c,e):"hsl("+c[0]+", "+c[1]+"%, "+c[2]+"%)"}function Ma(c,e){return e===void 0&&(e=c[3]!==void 0?c[3]:1),"hsla("+c[0]+", "+c[1]+"%, "+c[2]+"%, "+e+")"}function eb(c,e){return e===void 0&&(e=c[3]!==void 0?c[3]:1),"hwb("+c[0]+", "+c[1]+"%, "+c[2]+"%"+(e!==void 0&&e!==1?", "+e:"")+")"}function jb(c){return Ra[c.slice(0,3)]}function pa(c,e,g){return Math.min(Math.max(e,c),g)}function za(c){var e=c.toString(16).toUpperCase();return e.length<2?"0"+e:e}var Ra={};for(var ua in da)Ra[da[ua]]=ua;var Ga=function(c){if(c instanceof Ga)return c;if(!(this instanceof Ga))return new Ga(c);this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var e;typeof c==="string"?(e=ca.getRgba(c),e?this.setValues("rgb",e):(e=ca.getHsla(c))?this.setValues("hsl",e):(e=ca.getHwb(c))&&this.setValues("hwb",e)):typeof c==="object"&&(e=c,e.r!==void 0||e.red!==void 0?this.setValues("rgb",e):e.l!==void 0||e.lightness!==void 0?this.setValues("hsl",e):e.v!==void 0||e.value!==void 0?this.setValues("hsv",e):e.w!==void 0||e.whiteness!==void 0?this.setValues("hwb",e):(e.c!==void 0||e.cyan!==void 0)&&this.setValues("cmyk",e))};Ga.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var c=this.values;return c.alpha!==1?c.hwb.concat([c.alpha]):c.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var c=this.values;return c.rgb.concat([c.alpha])},hslaArray:function(){var c=this.values;return c.hsl.concat([c.alpha])},alpha:function(c){return c===void 0?this.values.alpha:(this.setValues("alpha",c),this)},red:function(c){return this.setChannel("rgb",0,c)},green:function(c){return this.setChannel("rgb",1,c)},blue:function(c){return this.setChannel("rgb",2,c)},hue:function(c){return c&&(c%=360,c=c<0?360+c:c),this.setChannel("hsl",0,c)},saturation:function(c){return this.setChannel("hsl",1,c)},lightness:function(c){return this.setChannel("hsl",2,c)},saturationv:function(c){return this.setChannel("hsv",1,c)},whiteness:function(c){return this.setChannel("hwb",1,c)},blackness:function(c){return this.setChannel("hwb",2,c)},value:function(c){return this.setChannel("hsv",2,c)},cyan:function(c){return this.setChannel("cmyk",0,c)},magenta:function(c){return this.setChannel("cmyk",1,c)},yellow:function(c){return this.setChannel("cmyk",2,c)},black:function(c){return this.setChannel("cmyk",3,c)},hexString:function(){return ca.hexString(this.values.rgb)},rgbString:function(){return ca.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return ca.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return ca.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return ca.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return ca.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return ca.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return ca.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var c=this.values.rgb;return c[0]<<16|c[1]<<8|c[2]},luminosity:function(){for(var c=this.values.rgb,e=[],g=0;g<c.length;g++){var h=c[g]/255;e[g]=h<=.03928?h/12.92:Math.pow((h+.055)/1.055,2.4)}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(c){var e=this.luminosity(),g=c.luminosity();return e>g?(e+.05)/(g+.05):(g+.05)/(e+.05)},level:function(c){var e=this.contrast(c);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var c=this.values.rgb,e=(c[0]*299+c[1]*587+c[2]*114)/1e3;return e<128},light:function(){return!this.dark()},negate:function(){for(var c=[],e=0;e<3;e++)c[e]=255-this.values.rgb[e];return this.setValues("rgb",c),this},lighten:function(c){var e=this.values.hsl;return e[2]+=e[2]*c,this.setValues("hsl",e),this},darken:function(c){var e=this.values.hsl;return e[2]-=e[2]*c,this.setValues("hsl",e),this},saturate:function(c){var e=this.values.hsl;return e[1]+=e[1]*c,this.setValues("hsl",e),this},desaturate:function(c){var e=this.values.hsl;return e[1]-=e[1]*c,this.setValues("hsl",e),this},whiten:function(c){var e=this.values.hwb;return e[1]+=e[1]*c,this.setValues("hwb",e),this},blacken:function(c){var e=this.values.hwb;return e[2]+=e[2]*c,this.setValues("hwb",e),this},greyscale:function(){var c=this.values.rgb,e=c[0]*.3+c[1]*.59+c[2]*.11;return this.setValues("rgb",[e,e,e]),this},clearer:function(c){var e=this.values.alpha;return this.setValues("alpha",e-e*c),this},opaquer:function(c){var e=this.values.alpha;return this.setValues("alpha",e+e*c),this},rotate:function(c){var e=this.values.hsl,g=(e[0]+c)%360;return e[0]=g<0?360+g:g,this.setValues("hsl",e),this},mix:function(c,e){var g=this,h=c,k=e===void 0?.5:e,m=2*k-1,o=g.alpha()-h.alpha(),r=((m*o===-1?m:(m+o)/(1+m*o))+1)/2,p=1-r;return this.rgb(r*g.red()+p*h.red(),r*g.green()+p*h.green(),r*g.blue()+p*h.blue()).alpha(g.alpha()*k+h.alpha()*(1-k))},toJSON:function(){return this.rgb()},clone:function(){var c=new Ga(),e=this.values,g=c.values,h,k;for(var m in e)e.hasOwnProperty(m)&&(h=e[m],k={}.toString.call(h),k==="[object Array]"?g[m]=h.slice(0):k==="[object Number]"?g[m]=h:console.error("unexpected color value:",h));return c}},Ga.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},Ga.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},Ga.prototype.getValues=function(c){for(var e=this.values,g={},h=0;h<c.length;h++)g[c.charAt(h)]=e[c][h];return e.alpha!==1&&(g.a=e.alpha),g},Ga.prototype.setValues=function(c,e){var g=this.values,h=this.spaces,k=this.maxes,m=1,o;this.valid=!0;if(c==="alpha")m=e;else if(e.length)g[c]=e.slice(0,c.length),m=e[c.length];else if(e[c.charAt(0)]!==void 0){for(o=0;o<c.length;o++)g[c][o]=e[c.charAt(o)];m=e.a}else if(e[h[c][0]]!==void 0){var r=h[c];for(o=0;o<c.length;o++)g[c][o]=e[r[o]];m=e.alpha}g.alpha=Math.max(0,Math.min(1,m===void 0?g.alpha:m));if(c==="alpha")return!1;var p;for(o=0;o<c.length;o++)p=Math.max(0,Math.min(k[c][o],g[c][o])),g[c][o]=Math.round(p);for(var s in h)s!==c&&(g[s]=L[c][s](g[c]));return!0},Ga.prototype.setSpace=function(c,e){var g=e[0];return g===void 0?this.getValues(c):(typeof g==="number"&&(g=Array.prototype.slice.call(e)),this.setValues(c,g),this)},Ga.prototype.setChannel=function(c,e,g){var h=this.values[c];return g===void 0?h[e]:g===h[e]?this:(h[e]=g,this.setValues(c,h),this)},typeof window!=="undefined"&&(window.Color=Ga);var hb=Ga;function pb(c){return["__proto__","prototype","constructor"].indexOf(c)===-1}var Ea={noop:function(){},uid:function(){var c=0;return function(){return c++}}(),isNullOrUndef:function(c){return c===null||typeof c==="undefined"},isArray:function(c){if(Array.isArray&&Array.isArray(c))return!0;var e=Object.prototype.toString.call(c);return e.substr(0,7)==="[object"&&e.substr(-6)==="Array]"?!0:!1},isObject:function(c){return c!==null&&Object.prototype.toString.call(c)==="[object Object]"},isFinite:function(c){return(typeof c==="number"||c instanceof Number)&&isFinite(c)},valueOrDefault:function(c,e){return typeof c==="undefined"?e:c},valueAtIndexOrDefault:function(c,e,g){return Ea.valueOrDefault(Ea.isArray(c)?c[e]:c,g)},callback:function(c,e,g){if(c&&typeof c.call==="function")return c.apply(g,e)},each:function(c,e,g,h){var k,m,o;if(Ea.isArray(c)){m=c.length;if(h)for(k=m-1;k>=0;k--)e.call(g,c[k],k);else for(k=0;k<m;k++)e.call(g,c[k],k)}else if(Ea.isObject(c))for(o=Object.keys(c),m=o.length,k=0;k<m;k++)e.call(g,c[o[k]],o[k])},arrayEquals:function(c,e){var g,h,k,m;if(!c||!e||c.length!==e.length)return!1;for(g=0,h=c.length;g<h;++g){k=c[g],m=e[g];if(k instanceof Array&&m instanceof Array){if(!Ea.arrayEquals(k,m))return!1}else if(k!==m)return!1}return!0},clone:function(c){if(Ea.isArray(c))return c.map(Ea.clone);if(Ea.isObject(c)){for(var e=Object.create(c),g=Object.keys(c),h=g.length,k=0;k<h;++k)e[g[k]]=Ea.clone(c[g[k]]);return e}return c},_merger:function(c,e,g,h){if(!pb(c))return;var k=e[c],m=g[c];Ea.isObject(k)&&Ea.isObject(m)?Ea.merge(k,m,h):e[c]=Ea.clone(m)},_mergerIf:function(c,e,g){if(!pb(c))return;var h=e[c],k=g[c];Ea.isObject(h)&&Ea.isObject(k)?Ea.mergeIf(h,k):e.hasOwnProperty(c)||(e[c]=Ea.clone(k))},merge:function(c,e,g){var h=Ea.isArray(e)?e:[e],k=h.length,m,o,r,p,s;if(!Ea.isObject(c))return c;for(g=g||{},m=g.merger||Ea._merger,o=0;o<k;++o){e=h[o];if(!Ea.isObject(e))continue;for(r=Object.keys(e),s=0,p=r.length;s<p;++s)m(r[s],c,e,g)}return c},mergeIf:function(c,e){return Ea.merge(c,e,{merger:Ea._mergerIf})},extend:Object.assign||function(c){return Ea.merge(c,[].slice.call(arguments,1),{merger:function(e,g,h){g[e]=h[e]}})},inherits:function(c){var e=this,g=c&&c.hasOwnProperty("constructor")?c.constructor:function(){return e.apply(this,arguments)},h=function(){this.constructor=g};return h.prototype=e.prototype,g.prototype=new h(),g.extend=Ea.inherits,c&&Ea.extend(g.prototype,c),g.__super__=e.prototype,g},_deprecated:function(c,e,g,h){e!==void 0&&console.warn(c+': "'+g+'" is deprecated. Please use "'+h+'" instead')}},Ja=Ea;Ea.callCallback=Ea.callback,Ea.indexOf=function(c,e,g){return Array.prototype.indexOf.call(c,e,g)},Ea.getValueOrDefault=Ea.valueOrDefault,Ea.getValueAtIndexOrDefault=Ea.valueAtIndexOrDefault;var Za={linear:function(c){return c},easeInQuad:function(c){return c*c},easeOutQuad:function(c){return-c*(c-2)},easeInOutQuad:function(c){return(c/=.5)<1?.5*c*c:-.5*(--c*(c-2)-1)},easeInCubic:function(c){return c*c*c},easeOutCubic:function(c){return(c=c-1)*c*c+1},easeInOutCubic:function(c){return(c/=.5)<1?.5*c*c*c:.5*((c-=2)*c*c+2)},easeInQuart:function(c){return c*c*c*c},easeOutQuart:function(c){return-((c=c-1)*c*c*c-1)},easeInOutQuart:function(c){return(c/=.5)<1?.5*c*c*c*c:-.5*((c-=2)*c*c*c-2)},easeInQuint:function(c){return c*c*c*c*c},easeOutQuint:function(c){return(c=c-1)*c*c*c*c+1},easeInOutQuint:function(c){return(c/=.5)<1?.5*c*c*c*c*c:.5*((c-=2)*c*c*c*c+2)},easeInSine:function(c){return-Math.cos(c*(Math.PI/2))+1},easeOutSine:function(c){return Math.sin(c*(Math.PI/2))},easeInOutSine:function(c){return-.5*(Math.cos(Math.PI*c)-1)},easeInExpo:function(c){return c===0?0:Math.pow(2,10*(c-1))},easeOutExpo:function(c){return c===1?1:-Math.pow(2,-10*c)+1},easeInOutExpo:function(c){return c===0?0:c===1?1:(c/=.5)<1?.5*Math.pow(2,10*(c-1)):.5*(-Math.pow(2,-10*--c)+2)},easeInCirc:function(c){return c>=1?c:-(Math.sqrt(1-c*c)-1)},easeOutCirc:function(c){return Math.sqrt(1-(c=c-1)*c)},easeInOutCirc:function(c){return(c/=.5)<1?-.5*(Math.sqrt(1-c*c)-1):.5*(Math.sqrt(1-(c-=2)*c)+1)},easeInElastic:function(c){var e=1.70158,g=0,h=1;return c===0?0:c===1?1:(g||(g=.3),h<1?(h=1,e=g/4):e=g/(2*Math.PI)*Math.asin(1/h),-(h*Math.pow(2,10*(c-=1))*Math.sin((c-e)*(2*Math.PI)/g)))},easeOutElastic:function(c){var e=1.70158,g=0,h=1;return c===0?0:c===1?1:(g||(g=.3),h<1?(h=1,e=g/4):e=g/(2*Math.PI)*Math.asin(1/h),h*Math.pow(2,-10*c)*Math.sin((c-e)*(2*Math.PI)/g)+1)},easeInOutElastic:function(c){var e=1.70158,g=0,h=1;return c===0?0:(c/=.5)===2?1:(g||(g=.45),h<1?(h=1,e=g/4):e=g/(2*Math.PI)*Math.asin(1/h),c<1?-.5*(h*Math.pow(2,10*(c-=1))*Math.sin((c-e)*(2*Math.PI)/g)):h*Math.pow(2,-10*(c-=1))*Math.sin((c-e)*(2*Math.PI)/g)*.5+1)},easeInBack:function(c){var e=1.70158;return c*c*((e+1)*c-e)},easeOutBack:function(c){var e=1.70158;return(c=c-1)*c*((e+1)*c+e)+1},easeInOutBack:function(c){var e=1.70158;return(c/=.5)<1?.5*(c*c*(((e*=1.525)+1)*c-e)):.5*((c-=2)*c*(((e*=1.525)+1)*c+e)+2)},easeInBounce:function(c){return 1-Za.easeOutBounce(1-c)},easeOutBounce:function(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+.9375:7.5625*(c-=2.625/2.75)*c+.984375},easeInOutBounce:function(c){return c<.5?Za.easeInBounce(c*2)*.5:Za.easeOutBounce(c*2-1)*.5+.5}},Zb={effects:Za};Ja.easingEffects=Za;var _a=Math.PI,qb=_a/180,Ba=_a*2,Ua=_a/2,W=_a/4,N=_a*2/3,Y={clear:function(c){c.ctx.clearRect(0,0,c.width,c.height)},roundedRect:function(c,e,g,h,k,m){if(m){var o=Math.min(m,k/2,h/2),r=e+o,p=g+o,s=e+h-o,w=g+k-o;c.moveTo(e,p),r<s&&p<w?(c.arc(r,p,o,-_a,-Ua),c.arc(s,p,o,-Ua,0),c.arc(s,w,o,0,Ua),c.arc(r,w,o,Ua,_a)):r<s?(c.moveTo(r,g),c.arc(s,p,o,-Ua,Ua),c.arc(r,p,o,Ua,_a+Ua)):p<w?(c.arc(r,p,o,-_a,0),c.arc(r,w,o,0,_a)):c.arc(r,p,o,-_a,_a),c.closePath(),c.moveTo(e,g)}else c.rect(e,g,h,k)},drawPoint:function(c,e,g,h,k,m){var o,r,p,s,w,z=(m||0)*qb;if(e&&typeof e==="object"){o=e.toString();if(o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]"){c.save(),c.translate(h,k),c.rotate(z),c.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),c.restore();return}}if(isNaN(g)||g<=0)return;c.beginPath();switch(e){default:c.arc(h,k,g,0,Ba),c.closePath();break;case"triangle":c.moveTo(h+Math.sin(z)*g,k-Math.cos(z)*g),z+=N,c.lineTo(h+Math.sin(z)*g,k-Math.cos(z)*g),z+=N,c.lineTo(h+Math.sin(z)*g,k-Math.cos(z)*g),c.closePath();break;case"rectRounded":w=g*.516,s=g-w,r=Math.cos(z+W)*s,p=Math.sin(z+W)*s,c.arc(h-r,k-p,w,z-_a,z-Ua),c.arc(h+p,k-r,w,z-Ua,z),c.arc(h+r,k+p,w,z,z+Ua),c.arc(h-p,k+r,w,z+Ua,z+_a),c.closePath();break;case"rect":if(!m){s=Math.SQRT1_2*g,c.rect(h-s,k-s,2*s,2*s);break}z+=W;case"rectRot":r=Math.cos(z)*g,p=Math.sin(z)*g,c.moveTo(h-r,k-p),c.lineTo(h+p,k-r),c.lineTo(h+r,k+p),c.lineTo(h-p,k+r),c.closePath();break;case"crossRot":z+=W;case"cross":r=Math.cos(z)*g,p=Math.sin(z)*g,c.moveTo(h-r,k-p),c.lineTo(h+r,k+p),c.moveTo(h+p,k-r),c.lineTo(h-p,k+r);break;case"star":r=Math.cos(z)*g,p=Math.sin(z)*g,c.moveTo(h-r,k-p),c.lineTo(h+r,k+p),c.moveTo(h+p,k-r),c.lineTo(h-p,k+r),z+=W,r=Math.cos(z)*g,p=Math.sin(z)*g,c.moveTo(h-r,k-p),c.lineTo(h+r,k+p),c.moveTo(h+p,k-r),c.lineTo(h-p,k+r);break;case"line":r=Math.cos(z)*g,p=Math.sin(z)*g,c.moveTo(h-r,k-p),c.lineTo(h+r,k+p);break;case"dash":c.moveTo(h,k),c.lineTo(h+Math.cos(z)*g,k+Math.sin(z)*g);break}c.fill(),c.stroke()},_isPointInArea:function(c,e){var g=1e-6;return c.x>e.left-g&&c.x<e.right+g&&c.y>e.top-g&&c.y<e.bottom+g},clipArea:function(c,e){c.save(),c.beginPath(),c.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),c.clip()},unclipArea:function(c){c.restore()},lineTo:function(c,e,g,h){var k=g.steppedLine;if(k){if(k==="middle"){var m=(e.x+g.x)/2;c.lineTo(m,h?g.y:e.y),c.lineTo(m,h?e.y:g.y)}else k==="after"&&!h||k!=="after"&&h?c.lineTo(e.x,g.y):c.lineTo(g.x,e.y);c.lineTo(g.x,g.y);return}if(!g.tension){c.lineTo(g.x,g.y);return}c.bezierCurveTo(h?e.controlPointPreviousX:e.controlPointNextX,h?e.controlPointPreviousY:e.controlPointNextY,h?g.controlPointNextX:g.controlPointPreviousX,h?g.controlPointNextY:g.controlPointPreviousY,g.x,g.y)}},ba=Y;Ja.clear=Y.clear,Ja.drawRoundedRectangle=function(c){c.beginPath(),Y.roundedRect.apply(Y,arguments)};var $={_set:function(c,e){return Ja.merge(this[c]||(this[c]={}),e)}};$._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var ha=$,Sa=Ja.valueOrDefault;function rb(c){return!c||Ja.isNullOrUndef(c.size)||Ja.isNullOrUndef(c.family)?null:(c.style?c.style+" ":"")+(c.weight?c.weight+" ":"")+c.size+"px "+c.family}var $a={toLineHeight:function(c,e){var g=(""+c).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!g||g[1]==="normal")return e*1.2;c=+g[2];switch(g[3]){case"px":return c;case"%":c/=100;break}return e*c},toPadding:function(c){var e,g,h,k;return Ja.isObject(c)?(e=+c.top||0,g=+c.right||0,h=+c.bottom||0,k=+c.left||0):e=g=h=k=+c||0,{top:e,right:g,bottom:h,left:k,height:e+h,width:k+g}},_parseFont:function(c){var e=ha.global,g=Sa(c.fontSize,e.defaultFontSize),h={family:Sa(c.fontFamily,e.defaultFontFamily),lineHeight:Ja.options.toLineHeight(Sa(c.lineHeight,e.defaultLineHeight),g),size:g,style:Sa(c.fontStyle,e.defaultFontStyle),weight:null,string:""};return h.string=rb(h),h},resolve:function(c,e,g,h){var k=!0,m,o,r;for(m=0,o=c.length;m<o;++m){r=c[m];if(r===void 0)continue;e!==void 0&&typeof r==="function"&&(r=r(e),k=!1),g!==void 0&&Ja.isArray(r)&&(r=r[g],k=!1);if(r!==void 0)return h&&!k&&(h.cacheable=!1),r}}},nb={_factorize:function(c){var e=[],g=Math.sqrt(c),h;for(h=1;h<g;h++)c%h===0&&(e.push(h),e.push(c/h));return g===(g|0)&&e.push(g),e.sort(function(k,m){return k-m}).pop(),e},log10:Math.log10||function(c){var e=Math.log(c)*Math.LOG10E,g=Math.round(e),h=c===Math.pow(10,g);return h?g:e}},Rb=nb;Ja.log10=nb.log10;var Ib=function(c,e){return{x:function(g){return c+c+e-g},setWidth:function(g){e=g},textAlign:function(g){return g==="center"?g:g==="right"?"left":"right"},xPlus:function(g,h){return g-h},leftForLtr:function(g,h){return g-h}}},Oa=function(){return{x:function(c){return c},setWidth:function(c){},textAlign:function(c){return c},xPlus:function(c,e){return c+e},leftForLtr:function(c,e){return c}}},zd=function(c,e,g){return c?Ib(e,g):Oa()},$f=function(c,e){var g,h;(e==="ltr"||e==="rtl")&&(g=c.canvas.style,h=[g.getPropertyValue("direction"),g.getPropertyPriority("direction")],g.setProperty("direction",e,"important"),c.prevTextDirection=h)},ag=function(c){var e=c.prevTextDirection;e!==void 0&&(delete c.prevTextDirection,c.canvas.style.setProperty("direction",e[0],e[1]))},Jh={getRtlAdapter:zd,overrideTextDirection:$f,restoreTextDirection:ag},B=Ja,ce=Zb,bg=ba,Fp=$a,cg=Rb,Gp=Jh;B.easing=ce,B.canvas=bg,B.options=Fp,B.math=cg,B.rtl=Gp;function ef(c,e,g,h){var k=Object.keys(g),m,o,r,p,s,w,z,D,M;for(m=0,o=k.length;m<o;++m){r=k[m],w=g[r],e.hasOwnProperty(r)||(e[r]=w),p=e[r];if(p===w||r[0]==="_")continue;c.hasOwnProperty(r)||(c[r]=p),s=c[r],z=typeof w;if(z===typeof s){if(z==="string"){D=hb(s);if(D.valid){M=hb(w);if(M.valid){e[r]=M.mix(D,h).rgbString();continue}}}else if(B.isFinite(s)&&B.isFinite(w)){e[r]=s+(w-s)*h;continue}}e[r]=w}}var de=function(c){B.extend(this,c),this.initialize.apply(this,arguments)};B.extend(de.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var c=this;return c._view||(c._view=B.extend({},c._model)),c._start={},c},transition:function(c){var e=this,g=e._model,h=e._start,k=e._view;return!g||c===1?(e._view=B.extend({},g),e._start=null,e):(k||(k=e._view={}),h||(h=e._start={}),ef(h,k,g,c),e)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return B.isNumber(this._model.x)&&B.isNumber(this._model.y)}}),de.extend=B.inherits;var sa=de,Kh=sa.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),Lh=Kh;Object.defineProperty(Kh.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(Kh.prototype,"chartInstance",{get:function(){return this.chart},set:function(c){this.chart=c}}),ha._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:B.noop,onComplete:B.noop}});var _b={animations:[],request:null,addAnimation:function(c,e,g,h){var k=this.animations,m,o;for(e.chart=c,e.startTime=Date.now(),e.duration=g,h||(c.animating=!0),m=0,o=k.length;m<o;++m)if(k[m].chart===c){k[m]=e;return}k.push(e),k.length===1&&this.requestAnimationFrame()},cancelAnimation:function(c){var e=B.findIndex(this.animations,function(g){return g.chart===c});e!==-1&&(this.animations.splice(e,1),c.animating=!1)},requestAnimationFrame:function(){var c=this;c.request===null&&(c.request=B.requestAnimFrame.call(window,function(){c.request=null,c.startDigest()}))},startDigest:function(){var c=this;c.advance(),c.animations.length>0&&c.requestAnimationFrame()},advance:function(){for(var c=this.animations,e,g,h,k,m=0;m<c.length;)e=c[m],g=e.chart,h=e.numSteps,k=Math.floor((Date.now()-e.startTime)/e.duration*h)+1,e.currentStep=Math.min(k,h),B.callback(e.render,[g,e],g),B.callback(e.onAnimationProgress,[e],g),e.currentStep>=h?(B.callback(e.onAnimationComplete,[e],g),g.animating=!1,c.splice(m,1)):++m}},fd=B.options.resolve,mb=["push","pop","shift","splice","unshift"];function ff(c,e){if(c._chartjs){c._chartjs.listeners.push(e);return}Object.defineProperty(c,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),mb.forEach(function(g){var h="onData"+g.charAt(0).toUpperCase()+g.slice(1),k=c[g];Object.defineProperty(c,g,{configurable:!0,enumerable:!1,value:function(){var m=Array.prototype.slice.call(arguments),o=k.apply(this,m);return B.each(c._chartjs.listeners,function(r){typeof r[h]==="function"&&r[h].apply(r,m)}),o}})})}function uk(c,e){var g=c._chartjs;if(!g)return;var h=g.listeners,k=h.indexOf(e);k!==-1&&h.splice(k,1);if(h.length>0)return;mb.forEach(function(m){delete c[m]}),delete c._chartjs}var Ob=function(c,e){this.initialize(c,e)};B.extend(Ob.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(c,e){var g=this;g.chart=c,g.index=e,g.linkScales(),g.addElements(),g._type=g.getMeta().type},updateIndex:function(c){this.index=c},linkScales:function(){var c=this,e=c.getMeta(),g=c.chart,h=g.scales,k=c.getDataset(),m=g.options.scales;(e.xAxisID===null||!(e.xAxisID in h)||k.xAxisID)&&(e.xAxisID=k.xAxisID||m.xAxes[0].id),(e.yAxisID===null||!(e.yAxisID in h)||k.yAxisID)&&(e.yAxisID=k.yAxisID||m.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(c){return this.chart.scales[c]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&uk(this._data,this)},createMetaDataset:function(){var c=this,e=c.datasetElementType;return e&&new e({_chart:c.chart,_datasetIndex:c.index})},createMetaData:function(c){var e=this,g=e.dataElementType;return g&&new g({_chart:e.chart,_datasetIndex:e.index,_index:c})},addElements:function(){var c=this,e=c.getMeta(),g=c.getDataset().data||[],h=e.data,k,m;for(k=0,m=g.length;k<m;++k)h[k]=h[k]||c.createMetaData(k);e.dataset=e.dataset||c.createMetaDataset()},addElementAndReset:function(c){var e=this.createMetaData(c);this.getMeta().data.splice(c,0,e),this.updateElement(e,c,!0)},buildOrUpdateElements:function(){var c=this,e=c.getDataset(),g=e.data||(e.data=[]);c._data!==g&&(c._data&&uk(c._data,c),g&&Object.isExtensible(g)&&ff(g,c),c._data=g),c.resyncElements()},_configure:function(){var c=this;c._config=B.merge(Object.create(null),[c.chart.options.datasets[c._type],c.getDataset()],{merger:function(e,g,h){e!=="_meta"&&e!=="data"&&B._merger(e,g,h)}})},_update:function(c){var e=this;e._configure(),e._cachedDataOpts=null,e.update(c)},update:B.noop,transition:function(c){for(var e=this.getMeta(),g=e.data||[],h=g.length,k=0;k<h;++k)g[k].transition(c);e.dataset&&e.dataset.transition(c)},draw:function(){var c=this.getMeta(),e=c.data||[],g=e.length,h=0;for(c.dataset&&c.dataset.draw();h<g;++h)e[h].draw()},getStyle:function(c){var e=this,g=e.getMeta(),h=g.dataset,k;return e._configure(),h&&c===void 0?k=e._resolveDatasetElementOptions(h||{}):(c=c||0,k=e._resolveDataElementOptions(g.data[c]||{},c)),(k.fill===!1||k.fill===null)&&(k.backgroundColor=k.borderColor),k},_resolveDatasetElementOptions:function(c,e){var g=this,h=g.chart,k=g._config,m=c.custom||{},o=h.options.elements[g.datasetElementType.prototype._type]||{},r=g._datasetElementOptions,p={},s,w,z,D,M={chart:h,dataset:g.getDataset(),datasetIndex:g.index,hover:e};for(s=0,w=r.length;s<w;++s)z=r[s],D=e?"hover"+z.charAt(0).toUpperCase()+z.slice(1):z,p[z]=fd([m[D],k[D],o[D]],M);return p},_resolveDataElementOptions:function(c,e){var g=this,h=c&&c.custom,k=g._cachedDataOpts;if(k&&!h)return k;var m=g.chart,o=g._config,r=m.options.elements[g.dataElementType.prototype._type]||{},p=g._dataElementOptions,s={},w={chart:m,dataIndex:e,dataset:g.getDataset(),datasetIndex:g.index},z={cacheable:!h},D,M,P,T;h=h||{};if(B.isArray(p))for(M=0,P=p.length;M<P;++M)T=p[M],s[T]=fd([h[T],o[T],r[T]],w,e,z);else for(D=Object.keys(p),M=0,P=D.length;M<P;++M)T=D[M],s[T]=fd([h[T],o[p[T]],o[T],r[T]],w,e,z);return z.cacheable&&(g._cachedDataOpts=Object.freeze(s)),s},removeHoverStyle:function(c){B.merge(c._model,c.$previousStyle||{}),delete c.$previousStyle},setHoverStyle:function(c){var e=this.chart.data.datasets[c._datasetIndex],g=c._index,h=c.custom||{},k=c._model,m=B.getHoverColor;c.$previousStyle={backgroundColor:k.backgroundColor,borderColor:k.borderColor,borderWidth:k.borderWidth},k.backgroundColor=fd([h.hoverBackgroundColor,e.hoverBackgroundColor,m(k.backgroundColor)],void 0,g),k.borderColor=fd([h.hoverBorderColor,e.hoverBorderColor,m(k.borderColor)],void 0,g),k.borderWidth=fd([h.hoverBorderWidth,e.hoverBorderWidth,k.borderWidth],void 0,g)},_removeDatasetHoverStyle:function(){var c=this.getMeta().dataset;c&&this.removeHoverStyle(c)},_setDatasetHoverStyle:function(){var c=this.getMeta().dataset,e={},g,h,k,m,o,r;if(!c)return;for(r=c._model,o=this._resolveDatasetElementOptions(c,!0),m=Object.keys(o),g=0,h=m.length;g<h;++g)k=m[g],e[k]=r[k],r[k]=o[k];c.$previousStyle=e},resyncElements:function(){var c=this,e=c.getMeta(),g=c.getDataset().data,h=e.data.length,k=g.length;k<h?e.data.splice(k,h-k):k>h&&c.insertElements(h,k-h)},insertElements:function(c,e){for(var g=0;g<e;++g)this.addElementAndReset(c+g)},onDataPush:function(){var c=arguments.length;this.insertElements(this.getDataset().data.length-c,c)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(c,e){this.getMeta().data.splice(c,e),this.insertElements(c,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),Ob.extend=B.inherits;var Eb=Ob,Jb=Math.PI*2;ha._set("global",{elements:{arc:{backgroundColor:ha.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});function Fb(c,e){var g=e.startAngle,h=e.endAngle,k=e.pixelMargin,m=k/e.outerRadius,o=e.x,r=e.y;c.beginPath(),c.arc(o,r,e.outerRadius,g-m,h+m),e.innerRadius>k?(m=k/e.innerRadius,c.arc(o,r,e.innerRadius-k,h+m,g-m,!0)):c.arc(o,r,k,h+Math.PI/2,g-Math.PI/2),c.closePath(),c.clip()}function uc(c,e,g,h){var k=g.endAngle,m;for(h&&(g.endAngle=g.startAngle+Jb,Fb(c,g),g.endAngle=k,g.endAngle===g.startAngle&&g.fullCircles&&(g.endAngle+=Jb,g.fullCircles--)),c.beginPath(),c.arc(g.x,g.y,g.innerRadius,g.startAngle+Jb,g.startAngle,!0),m=0;m<g.fullCircles;++m)c.stroke();for(c.beginPath(),c.arc(g.x,g.y,e.outerRadius,g.startAngle,g.startAngle+Jb),m=0;m<g.fullCircles;++m)c.stroke()}function Tc(c,e,g){var h=e.borderAlign==="inner";h?(c.lineWidth=e.borderWidth*2,c.lineJoin="round"):(c.lineWidth=e.borderWidth,c.lineJoin="bevel"),g.fullCircles&&uc(c,e,g,h),h&&Fb(c,g),c.beginPath(),c.arc(g.x,g.y,e.outerRadius,g.startAngle,g.endAngle),c.arc(g.x,g.y,g.innerRadius,g.endAngle,g.startAngle,!0),c.closePath(),c.stroke()}var Ad=sa.extend({_type:"arc",inLabelRange:function(c){var e=this._view;return e?Math.pow(c-e.x,2)<Math.pow(e.radius+e.hoverRadius,2):!1},inRange:function(c,e){var g=this._view;if(g){for(var h=B.getAngleFromPoint(g,{x:c,y:e}),k=h.angle,m=h.distance,o=g.startAngle,r=g.endAngle;r<o;)r+=Jb;for(;k>r;)k-=Jb;for(;k<o;)k+=Jb;var p=k>=o&&k<=r,s=m>=g.innerRadius&&m<=g.outerRadius;return p&&s}return!1},getCenterPoint:function(){var c=this._view,e=(c.startAngle+c.endAngle)/2,g=(c.innerRadius+c.outerRadius)/2;return{x:c.x+Math.cos(e)*g,y:c.y+Math.sin(e)*g}},getArea:function(){var c=this._view;return Math.PI*((c.endAngle-c.startAngle)/(2*Math.PI))*(Math.pow(c.outerRadius,2)-Math.pow(c.innerRadius,2))},tooltipPosition:function(){var c=this._view,e=c.startAngle+(c.endAngle-c.startAngle)/2,g=(c.outerRadius-c.innerRadius)/2+c.innerRadius;return{x:c.x+Math.cos(e)*g,y:c.y+Math.sin(e)*g}},draw:function(){var c=this._chart.ctx,e=this._view,g=e.borderAlign==="inner"?.33:0,h={x:e.x,y:e.y,innerRadius:e.innerRadius,outerRadius:Math.max(e.outerRadius-g,0),pixelMargin:g,startAngle:e.startAngle,endAngle:e.endAngle,fullCircles:Math.floor(e.circumference/Jb)},k;c.save(),c.fillStyle=e.backgroundColor,c.strokeStyle=e.borderColor;if(h.fullCircles){for(h.endAngle=h.startAngle+Jb,c.beginPath(),c.arc(h.x,h.y,h.outerRadius,h.startAngle,h.endAngle),c.arc(h.x,h.y,h.innerRadius,h.endAngle,h.startAngle,!0),c.closePath(),k=0;k<h.fullCircles;++k)c.fill();h.endAngle=h.startAngle+e.circumference%Jb}c.beginPath(),c.arc(h.x,h.y,h.outerRadius,h.startAngle,h.endAngle),c.arc(h.x,h.y,h.innerRadius,h.endAngle,h.startAngle,!0),c.closePath(),c.fill(),e.borderWidth&&Tc(c,e,h),c.restore()}}),vk=B.valueOrDefault,wk=ha.global.defaultColor;ha._set("global",{elements:{line:{tension:.4,backgroundColor:wk,borderWidth:3,borderColor:wk,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var Hp=sa.extend({_type:"line",draw:function(){var c=this,e=c._view,g=c._chart.ctx,h=e.spanGaps,k=c._children.slice(),m=ha.global,o=m.elements.line,r=-1,p=c._loop,s,w,z;if(!k.length)return;if(c._loop){for(s=0;s<k.length;++s){w=B.previousItem(k,s);if(!k[s]._view.skip&&w._view.skip){k=k.slice(s).concat(k.slice(0,s)),p=h;break}}p&&k.push(k[0])}for(g.save(),g.lineCap=e.borderCapStyle||o.borderCapStyle,g.setLineDash&&g.setLineDash(e.borderDash||o.borderDash),g.lineDashOffset=vk(e.borderDashOffset,o.borderDashOffset),g.lineJoin=e.borderJoinStyle||o.borderJoinStyle,g.lineWidth=vk(e.borderWidth,o.borderWidth),g.strokeStyle=e.borderColor||m.defaultColor,g.beginPath(),z=k[0]._view,z.skip||(g.moveTo(z.x,z.y),r=0),s=1;s<k.length;++s)z=k[s]._view,w=r===-1?B.previousItem(k,s):k[r],z.skip||(r!==s-1&&!h||r===-1?g.moveTo(z.x,z.y):B.canvas.lineTo(g,w._view,z),r=s);p&&g.closePath(),g.stroke(),g.restore()}}),Cb=B.valueOrDefault,gf=ha.global.defaultColor;ha._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:gf,borderColor:gf,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});function xk(c){var e=this._view;return e?Math.abs(c-e.x)<e.radius+e.hitRadius:!1}function yk(c){var e=this._view;return e?Math.abs(c-e.y)<e.radius+e.hitRadius:!1}var zk=sa.extend({_type:"point",inRange:function(c,e){var g=this._view;return g?Math.pow(c-g.x,2)+Math.pow(e-g.y,2)<Math.pow(g.hitRadius+g.radius,2):!1},inLabelRange:xk,inXRange:xk,inYRange:yk,getCenterPoint:function(){var c=this._view;return{x:c.x,y:c.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var c=this._view;return{x:c.x,y:c.y,padding:c.radius+c.borderWidth}},draw:function(c){var e=this._view,g=this._chart.ctx,h=e.pointStyle,k=e.rotation,m=e.radius,o=e.x,r=e.y,p=ha.global,s=p.defaultColor;if(e.skip)return;(c===void 0||B.canvas._isPointInArea(e,c))&&(g.strokeStyle=e.borderColor||s,g.lineWidth=Cb(e.borderWidth,p.elements.point.borderWidth),g.fillStyle=e.backgroundColor||s,B.canvas.drawPoint(g,h,m,o,r,k))}}),Ak=ha.global.defaultColor;ha._set("global",{elements:{rectangle:{backgroundColor:Ak,borderColor:Ak,borderSkipped:"bottom",borderWidth:0}}});function dg(c){return c&&c.width!==void 0}function Bk(c){var e,g,h,k,m;return dg(c)?(m=c.width/2,e=c.x-m,g=c.x+m,h=Math.min(c.y,c.base),k=Math.max(c.y,c.base)):(m=c.height/2,e=Math.min(c.x,c.base),g=Math.max(c.x,c.base),h=c.y-m,k=c.y+m),{left:e,top:h,right:g,bottom:k}}function Ck(c,e,g){return c===e?g:c===g?e:c}function Ip(c){var e=c.borderSkipped,g={};return e?(c.horizontal?c.base>c.x&&(e=Ck(e,"left","right")):c.base<c.y&&(e=Ck(e,"bottom","top")),g[e]=!0,g):g}function Jp(c,e,g){var h=c.borderWidth,k=Ip(c),m,o,r,p;return B.isObject(h)?(m=+h.top||0,o=+h.right||0,r=+h.bottom||0,p=+h.left||0):m=o=r=p=+h||0,{t:k.top||m<0?0:m>g?g:m,r:k.right||o<0?0:o>e?e:o,b:k.bottom||r<0?0:r>g?g:r,l:k.left||p<0?0:p>e?e:p}}function Dk(c){var e=Bk(c),g=e.right-e.left,h=e.bottom-e.top,k=Jp(c,g/2,h/2);return{outer:{x:e.left,y:e.top,w:g,h},inner:{x:e.left+k.l,y:e.top+k.t,w:g-k.l-k.r,h:h-k.t-k.b}}}function ee(c,e,g){var h=e===null,k=g===null,m=!c||h&&k?!1:Bk(c);return m&&(h||e>=m.left&&e<=m.right)&&(k||g>=m.top&&g<=m.bottom)}var Kp=sa.extend({_type:"rectangle",draw:function(){var c=this._chart.ctx,e=this._view,g=Dk(e),h=g.outer,k=g.inner;c.fillStyle=e.backgroundColor,c.fillRect(h.x,h.y,h.w,h.h);if(h.w===k.w&&h.h===k.h)return;c.save(),c.beginPath(),c.rect(h.x,h.y,h.w,h.h),c.clip(),c.fillStyle=e.borderColor,c.rect(k.x,k.y,k.w,k.h),c.fill("evenodd"),c.restore()},height:function(){var c=this._view;return c.base-c.y},inRange:function(c,e){return ee(this._view,c,e)},inLabelRange:function(c,e){var g=this._view;return dg(g)?ee(g,c,null):ee(g,null,e)},inXRange:function(c){return ee(this._view,c,null)},inYRange:function(c){return ee(this._view,null,c)},getCenterPoint:function(){var c=this._view,e,g;return dg(c)?(e=c.x,g=(c.y+c.base)/2):(e=(c.x+c.base)/2,g=c.y),{x:e,y:g}},getArea:function(){var c=this._view;return dg(c)?c.width*Math.abs(c.y-c.base):c.height*Math.abs(c.x-c.base)},tooltipPosition:function(){var c=this._view;return{x:c.x,y:c.y}}}),dc={},Lp=Ad,Ek=Hp,hf=zk,Fk=Kp;dc.Arc=Lp,dc.Line=Ek,dc.Point=hf,dc.Rectangle=Fk;var jf=B._deprecated,fe=B.valueOrDefault;ha._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),ha._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});function kf(c,e){var g=c._length,h,k,m,o;for(m=1,o=e.length;m<o;++m)g=Math.min(g,Math.abs(e[m]-e[m-1]));for(m=0,o=c.getTicks().length;m<o;++m)k=c.getPixelForTick(m),g=m>0?Math.min(g,Math.abs(k-h)):g,h=k;return g}function eg(c,e,g){var h=g.barThickness,k=e.stackCount,m=e.pixels[c],o=B.isNullOrUndef(h)?kf(e.scale,e.pixels):-1,r,p;return B.isNullOrUndef(h)?(r=o*g.categoryPercentage,p=g.barPercentage):(r=h*k,p=1),{chunk:r/k,ratio:p,start:m-r/2}}function Gk(c,e,g){var h=e.pixels,k=h[c],m=c>0?h[c-1]:null,o=c<h.length-1?h[c+1]:null,r=g.categoryPercentage,p,s;return m===null&&(m=k-(o===null?e.end-e.start:o-k)),o===null&&(o=k+k-m),p=k-(k-Math.min(m,o))/2*r,s=Math.abs(o-m)/2*r,{chunk:s/e.stackCount,ratio:g.barPercentage,start:p}}var ge=Eb.extend({dataElementType:dc.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var c=this,e,g;Eb.prototype.initialize.apply(c,arguments),e=c.getMeta(),e.stack=c.getDataset().stack,e.bar=!0,g=c._getIndexScale().options,jf("bar chart",g.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),jf("bar chart",g.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),jf("bar chart",g.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),jf("bar chart",c._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),jf("bar chart",g.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(c){var e=this,g=e.getMeta().data,h,k;for(e._ruler=e.getRuler(),h=0,k=g.length;h<k;++h)e.updateElement(g[h],h,c)},updateElement:function(c,e,g){var h=this,k=h.getMeta(),m=h.getDataset(),o=h._resolveDataElementOptions(c,e);c._xScale=h.getScaleForId(k.xAxisID),c._yScale=h.getScaleForId(k.yAxisID),c._datasetIndex=h.index,c._index=e,c._model={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderSkipped:o.borderSkipped,borderWidth:o.borderWidth,datasetLabel:m.label,label:h.chart.data.labels[e]},B.isArray(m.data[e])&&(c._model.borderSkipped=null),h._updateElementGeometry(c,e,g,o),c.pivot()},_updateElementGeometry:function(c,e,g,h){var k=this,m=c._model,o=k._getValueScale(),r=o.getBasePixel(),p=o.isHorizontal(),s=k._ruler||k.getRuler(),w=k.calculateBarValuePixels(k.index,e,h),z=k.calculateBarIndexPixels(k.index,e,s,h);m.horizontal=p,m.base=g?r:w.base,m.x=p?g?r:w.head:z.center,m.y=p?z.center:g?r:w.head,m.height=p?z.size:void 0,m.width=p?void 0:z.size},_getStacks:function(c){var e=this,g=e._getIndexScale(),h=g._getMatchingVisibleMetas(e._type),k=g.options.stacked,m=h.length,o=[],r,p;for(r=0;r<m;++r){p=h[r],(k===!1||o.indexOf(p.stack)===-1||k===void 0&&p.stack===void 0)&&o.push(p.stack);if(p.index===c)break}return o},getStackCount:function(){return this._getStacks().length},getStackIndex:function(c,e){var g=this._getStacks(c),h=e!==void 0?g.indexOf(e):-1;return h===-1?g.length-1:h},getRuler:function(){var c=this,e=c._getIndexScale(),g=[],h,k;for(h=0,k=c.getMeta().data.length;h<k;++h)g.push(e.getPixelForValue(null,h,c.index));return{pixels:g,start:e._startPixel,end:e._endPixel,stackCount:c.getStackCount(),scale:e}},calculateBarValuePixels:function(c,e,g){var h=this,k=h.chart,m=h._getValueScale(),o=m.isHorizontal(),r=k.data.datasets,p=m._getMatchingVisibleMetas(h._type),s=m._parseValue(r[c].data[e]),w=g.minBarLength,z=m.options.stacked,D=h.getMeta().stack,M=s.start===void 0?0:s.max>=0&&s.min>=0?s.min:s.max,P=s.start===void 0?s.end:s.max>=0&&s.min>=0?s.max-s.min:s.min-s.max,T=p.length,Z,ia,wa,Aa,Pa,Na,gb;if(z||z===void 0&&D!==void 0)for(Z=0;Z<T;++Z){ia=p[Z];if(ia.index===c)break;ia.stack===D&&(gb=m._parseValue(r[ia.index].data[e]),wa=gb.start===void 0?gb.end:gb.min>=0&&gb.max>=0?gb.max:gb.min,(s.min<0&&wa<0||s.max>=0&&wa>0)&&(M+=wa))}return Aa=m.getPixelForValue(M),Pa=m.getPixelForValue(M+P),Na=Pa-Aa,w!==void 0&&Math.abs(Na)<w&&(Na=w,P>=0&&!o||P<0&&o?Pa=Aa-w:Pa=Aa+w),{size:Na,base:Aa,head:Pa,center:Pa+Na/2}},calculateBarIndexPixels:function(c,e,g,h){var k=this,m=h.barThickness==="flex"?Gk(e,g,h):eg(e,g,h),o=k.getStackIndex(c,k.getMeta().stack),r=m.start+m.chunk*o+m.chunk/2,p=Math.min(fe(h.maxBarThickness,Infinity),m.chunk*m.ratio);return{base:r-p/2,head:r+p/2,center:r,size:p}},draw:function(){var c=this,e=c.chart,g=c._getValueScale(),h=c.getMeta().data,k=c.getDataset(),m=h.length,o=0;for(B.canvas.clipArea(e.ctx,e.chartArea);o<m;++o){var r=g._parseValue(k.data[o]);!isNaN(r.min)&&!isNaN(r.max)&&h[o].draw()}B.canvas.unclipArea(e.ctx)},_resolveDataElementOptions:function(){var c=this,e=B.extend({},Eb.prototype._resolveDataElementOptions.apply(c,arguments)),g=c._getIndexScale().options,h=c._getValueScale().options;return e.barPercentage=fe(g.barPercentage,e.barPercentage),e.barThickness=fe(g.barThickness,e.barThickness),e.categoryPercentage=fe(g.categoryPercentage,e.categoryPercentage),e.maxBarThickness=fe(g.maxBarThickness,e.maxBarThickness),e.minBarLength=fe(h.minBarLength,e.minBarLength),e}}),vc=B.valueOrDefault,Mp=B.options.resolve;ha._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(c,e){var g=e.datasets[c.datasetIndex].label||"",h=e.datasets[c.datasetIndex].data[c.index];return g+": ("+c.xLabel+", "+c.yLabel+", "+h.r+")"}}}});var Np=Eb.extend({dataElementType:dc.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(c){var e=this,g=e.getMeta(),h=g.data;B.each(h,function(k,m){e.updateElement(k,m,c)})},updateElement:function(c,e,g){var h=this,k=h.getMeta(),m=c.custom||{},o=h.getScaleForId(k.xAxisID),r=h.getScaleForId(k.yAxisID),p=h._resolveDataElementOptions(c,e),s=h.getDataset().data[e],w=h.index,z=g?o.getPixelForDecimal(.5):o.getPixelForValue(typeof s==="object"?s:NaN,e,w),D=g?r.getBasePixel():r.getPixelForValue(s,e,w);c._xScale=o,c._yScale=r,c._options=p,c._datasetIndex=w,c._index=e,c._model={backgroundColor:p.backgroundColor,borderColor:p.borderColor,borderWidth:p.borderWidth,hitRadius:p.hitRadius,pointStyle:p.pointStyle,rotation:p.rotation,radius:g?0:p.radius,skip:m.skip||isNaN(z)||isNaN(D),x:z,y:D},c.pivot()},setHoverStyle:function(c){var e=c._model,g=c._options,h=B.getHoverColor;c.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=vc(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=vc(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=vc(g.hoverBorderWidth,g.borderWidth),e.radius=g.radius+g.hoverRadius},_resolveDataElementOptions:function(c,e){var g=this,h=g.chart,k=g.getDataset(),m=c.custom||{},o=k.data[e]||{},r=Eb.prototype._resolveDataElementOptions.apply(g,arguments),p={chart:h,dataIndex:e,dataset:k,datasetIndex:g.index};return g._cachedDataOpts===r&&(r=B.extend({},r)),r.radius=Mp([m.radius,o.r,g._config.radius,h.options.elements.point.radius],p,e),r}}),fg=B.valueOrDefault,Bd=Math.PI,Uc=Bd*2,Cd=Bd/2;ha._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(c){var e=document.createElement("ul"),g=c.data,h=g.datasets,k=g.labels,m,o,r,p;e.setAttribute("class",c.id+"-legend");if(h.length)for(m=0,o=h[0].data.length;m<o;++m)r=e.appendChild(document.createElement("li")),p=r.appendChild(document.createElement("span")),p.style.backgroundColor=h[0].backgroundColor[m],k[m]&&r.appendChild(document.createTextNode(k[m]));return e.outerHTML},legend:{labels:{generateLabels:function(c){var e=c.data;return e.labels.length&&e.datasets.length?e.labels.map(function(g,h){var k=c.getDatasetMeta(0),m=k.controller.getStyle(h);return{text:g,fillStyle:m.backgroundColor,strokeStyle:m.borderColor,lineWidth:m.borderWidth,hidden:isNaN(e.datasets[0].data[h])||k.data[h].hidden,index:h}}):[]}},onClick:function(c,e){var g=e.index,h=this.chart,k,m,o;for(k=0,m=(h.data.datasets||[]).length;k<m;++k)o=h.getDatasetMeta(k),o.data[g]&&(o.data[g].hidden=!o.data[g].hidden);h.update()}},cutoutPercentage:50,rotation:-Cd,circumference:Uc,tooltips:{callbacks:{title:function(){return""},label:function(c,e){var g=e.labels[c.index],h=": "+e.datasets[c.datasetIndex].data[c.index];return B.isArray(g)?(g=g.slice(),g[0]+=h):g+=h,g}}}});var Hk=Eb.extend({dataElementType:dc.Arc,linkScales:B.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(c){for(var e=0,g=0;g<c;++g)this.chart.isDatasetVisible(g)&&++e;return e},update:function(c){var e=this,g=e.chart,h=g.chartArea,k=g.options,m=1,o=1,r=0,p=0,s=e.getMeta(),w=s.data,z=k.cutoutPercentage/100||0,D=k.circumference,M=e._getRingWeight(e.index),P,T,Z,ia;if(D<Uc){var wa=k.rotation%Uc;wa+=wa>=Bd?-Uc:wa<-Bd?Uc:0;var Aa=wa+D,Pa=Math.cos(wa),Na=Math.sin(wa),gb=Math.cos(Aa),Qa=Math.sin(Aa),db=wa<=0&&Aa>=0||Aa>=Uc,sb=wa<=Cd&&Aa>=Cd||Aa>=Uc+Cd,Pb=wa===-Bd||Aa>=Bd,Kb=wa<=-Cd&&Aa>=-Cd||Aa>=Bd+Cd,Gb=Pb?-1:Math.min(Pa,Pa*z,gb,gb*z),Sb=Kb?-1:Math.min(Na,Na*z,Qa,Qa*z),nd=db?1:Math.max(Pa,Pa*z,gb,gb*z),yc=sb?1:Math.max(Na,Na*z,Qa,Qa*z);m=(nd-Gb)/2,o=(yc-Sb)/2,r=-(nd+Gb)/2,p=-(yc+Sb)/2}for(Z=0,ia=w.length;Z<ia;++Z)w[Z]._options=e._resolveDataElementOptions(w[Z],Z);for(g.borderWidth=e.getMaxBorderWidth(),P=(h.right-h.left-g.borderWidth)/m,T=(h.bottom-h.top-g.borderWidth)/o,g.outerRadius=Math.max(Math.min(P,T)/2,0),g.innerRadius=Math.max(g.outerRadius*z,0),g.radiusLength=(g.outerRadius-g.innerRadius)/(e._getVisibleDatasetWeightTotal()||1),g.offsetX=r*g.outerRadius,g.offsetY=p*g.outerRadius,s.total=e.calculateTotal(),e.outerRadius=g.outerRadius-g.radiusLength*e._getRingWeightOffset(e.index),e.innerRadius=Math.max(e.outerRadius-g.radiusLength*M,0),Z=0,ia=w.length;Z<ia;++Z)e.updateElement(w[Z],Z,c)},updateElement:function(c,e,g){var h=this,k=h.chart,m=k.chartArea,o=k.options,r=o.animation,p=(m.left+m.right)/2,s=(m.top+m.bottom)/2,w=o.rotation,z=o.rotation,D=h.getDataset(),M=g&&r.animateRotate?0:c.hidden?0:h.calculateCircumference(D.data[e])*(o.circumference/Uc),P=g&&r.animateScale?0:h.innerRadius,T=g&&r.animateScale?0:h.outerRadius,Z=c._options||{};B.extend(c,{_datasetIndex:h.index,_index:e,_model:{backgroundColor:Z.backgroundColor,borderColor:Z.borderColor,borderWidth:Z.borderWidth,borderAlign:Z.borderAlign,x:p+k.offsetX,y:s+k.offsetY,startAngle:w,endAngle:z,circumference:M,outerRadius:T,innerRadius:P,label:B.valueAtIndexOrDefault(D.label,e,k.data.labels[e])}});var ia=c._model;(!g||!r.animateRotate)&&(e===0?ia.startAngle=o.rotation:ia.startAngle=h.getMeta().data[e-1]._model.endAngle,ia.endAngle=ia.startAngle+ia.circumference),c.pivot()},calculateTotal:function(){var c=this.getDataset(),e=this.getMeta(),g=0,h;return B.each(e.data,function(k,m){h=c.data[m],!isNaN(h)&&!k.hidden&&(g+=Math.abs(h))}),g},calculateCircumference:function(c){var e=this.getMeta().total;return e>0&&!isNaN(c)?Uc*(Math.abs(c)/e):0},getMaxBorderWidth:function(c){var e=this,g=0,h=e.chart,k,m,o,r,p,s,w,z;if(!c){for(k=0,m=h.data.datasets.length;k<m;++k)if(h.isDatasetVisible(k)){o=h.getDatasetMeta(k),c=o.data,k!==e.index&&(p=o.controller);break}}if(!c)return 0;for(k=0,m=c.length;k<m;++k)r=c[k],p?(p._configure(),s=p._resolveDataElementOptions(r,k)):s=r._options,s.borderAlign!=="inner"&&(w=s.borderWidth,z=s.hoverBorderWidth,g=w>g?w:g,g=z>g?z:g);return g},setHoverStyle:function(c){var e=c._model,g=c._options,h=B.getHoverColor;c.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=fg(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=fg(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=fg(g.hoverBorderWidth,g.borderWidth)},_getRingWeightOffset:function(c){for(var e=0,g=0;g<c;++g)this.chart.isDatasetVisible(g)&&(e+=this._getRingWeight(g));return e},_getRingWeight:function(c){return Math.max(fg(this.chart.data.datasets[c].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});ha._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),ha._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var Op=ge.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),wc=B.valueOrDefault,Pp=B.options.resolve,gg=B.canvas._isPointInArea;ha._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});function Ik(c,e){var g=c&&c.options.ticks||{},h=g.reverse,k=g.min===void 0?e:0,m=g.max===void 0?e:0;return{start:h?m:k,end:h?k:m}}function Qp(c,e,g){var h=g/2,k=Ik(c,h),m=Ik(e,h);return{top:m.end,right:k.end,bottom:m.start,left:k.start}}function Rp(c){var e,g,h,k;return B.isObject(c)?(e=c.top,g=c.right,h=c.bottom,k=c.left):e=g=h=k=c,{top:e,right:g,bottom:h,left:k}}var Jk=Eb.extend({datasetElementType:dc.Line,dataElementType:dc.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(c){var e=this,g=e.getMeta(),h=g.dataset,k=g.data||[],m=e.chart.options,o=e._config,r=e._showLine=wc(o.showLine,m.showLines),p,s;for(e._xScale=e.getScaleForId(g.xAxisID),e._yScale=e.getScaleForId(g.yAxisID),r&&(o.tension!==void 0&&o.lineTension===void 0&&(o.lineTension=o.tension),h._scale=e._yScale,h._datasetIndex=e.index,h._children=k,h._model=e._resolveDatasetElementOptions(h),h.pivot()),p=0,s=k.length;p<s;++p)e.updateElement(k[p],p,c);for(r&&h._model.tension!==0&&e.updateBezierControlPoints(),p=0,s=k.length;p<s;++p)k[p].pivot()},updateElement:function(c,e,g){var h=this,k=h.getMeta(),m=c.custom||{},o=h.getDataset(),r=h.index,p=o.data[e],s=h._xScale,w=h._yScale,z=k.dataset._model,D,M,P=h._resolveDataElementOptions(c,e);D=s.getPixelForValue(typeof p==="object"?p:NaN,e,r),M=g?w.getBasePixel():h.calculatePointY(p,e,r),c._xScale=s,c._yScale=w,c._options=P,c._datasetIndex=r,c._index=e,c._model={x:D,y:M,skip:m.skip||isNaN(D)||isNaN(M),radius:P.radius,pointStyle:P.pointStyle,rotation:P.rotation,backgroundColor:P.backgroundColor,borderColor:P.borderColor,borderWidth:P.borderWidth,tension:wc(m.tension,z?z.tension:0),steppedLine:z?z.steppedLine:!1,hitRadius:P.hitRadius}},_resolveDatasetElementOptions:function(c){var e=this,g=e._config,h=c.custom||{},k=e.chart.options,m=k.elements.line,o=Eb.prototype._resolveDatasetElementOptions.apply(e,arguments);return o.spanGaps=wc(g.spanGaps,k.spanGaps),o.tension=wc(g.lineTension,m.tension),o.steppedLine=Pp([h.steppedLine,g.steppedLine,m.stepped]),o.clip=Rp(wc(g.clip,Qp(e._xScale,e._yScale,o.borderWidth))),o},calculatePointY:function(c,e,g){var h=this,k=h.chart,m=h._yScale,o=0,r=0,p,s,w,z,D,M,P;if(m.options.stacked){for(D=+m.getRightValue(c),M=k._getSortedVisibleDatasetMetas(),P=M.length,p=0;p<P;++p){w=M[p];if(w.index===g)break;s=k.data.datasets[w.index],w.type==="line"&&w.yAxisID===m.id&&(z=+m.getRightValue(s.data[e]),z<0?r+=z||0:o+=z||0)}return D<0?m.getPixelForValue(r+D):m.getPixelForValue(o+D)}return m.getPixelForValue(c)},updateBezierControlPoints:function(){var c=this,e=c.chart,g=c.getMeta(),h=g.dataset._model,k=e.chartArea,m=g.data||[],o,r,p,s;h.spanGaps&&(m=m.filter(function(z){return!z._model.skip}));function w(z,D,M){return Math.max(Math.min(z,M),D)}if(h.cubicInterpolationMode==="monotone")B.splineCurveMonotone(m);else for(o=0,r=m.length;o<r;++o)p=m[o]._model,s=B.splineCurve(B.previousItem(m,o)._model,p,B.nextItem(m,o)._model,h.tension),p.controlPointPreviousX=s.previous.x,p.controlPointPreviousY=s.previous.y,p.controlPointNextX=s.next.x,p.controlPointNextY=s.next.y;if(e.options.elements.line.capBezierPoints)for(o=0,r=m.length;o<r;++o)p=m[o]._model,gg(p,k)&&(o>0&&gg(m[o-1]._model,k)&&(p.controlPointPreviousX=w(p.controlPointPreviousX,k.left,k.right),p.controlPointPreviousY=w(p.controlPointPreviousY,k.top,k.bottom)),o<m.length-1&&gg(m[o+1]._model,k)&&(p.controlPointNextX=w(p.controlPointNextX,k.left,k.right),p.controlPointNextY=w(p.controlPointNextY,k.top,k.bottom)))},draw:function(){var c=this,e=c.chart,g=c.getMeta(),h=g.data||[],k=e.chartArea,m=e.canvas,o=0,r=h.length,p;for(c._showLine&&(p=g.dataset._model.clip,B.canvas.clipArea(e.ctx,{left:p.left===!1?0:k.left-p.left,right:p.right===!1?m.width:k.right+p.right,top:p.top===!1?0:k.top-p.top,bottom:p.bottom===!1?m.height:k.bottom+p.bottom}),g.dataset.draw(),B.canvas.unclipArea(e.ctx));o<r;++o)h[o].draw(k)},setHoverStyle:function(c){var e=c._model,g=c._options,h=B.getHoverColor;c.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=wc(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=wc(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=wc(g.hoverBorderWidth,g.borderWidth),e.radius=wc(g.hoverRadius,g.radius)}}),Sp=B.options.resolve;ha._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(c){var e=document.createElement("ul"),g=c.data,h=g.datasets,k=g.labels,m,o,r,p;e.setAttribute("class",c.id+"-legend");if(h.length)for(m=0,o=h[0].data.length;m<o;++m)r=e.appendChild(document.createElement("li")),p=r.appendChild(document.createElement("span")),p.style.backgroundColor=h[0].backgroundColor[m],k[m]&&r.appendChild(document.createTextNode(k[m]));return e.outerHTML},legend:{labels:{generateLabels:function(c){var e=c.data;return e.labels.length&&e.datasets.length?e.labels.map(function(g,h){var k=c.getDatasetMeta(0),m=k.controller.getStyle(h);return{text:g,fillStyle:m.backgroundColor,strokeStyle:m.borderColor,lineWidth:m.borderWidth,hidden:isNaN(e.datasets[0].data[h])||k.data[h].hidden,index:h}}):[]}},onClick:function(c,e){var g=e.index,h=this.chart,k,m,o;for(k=0,m=(h.data.datasets||[]).length;k<m;++k)o=h.getDatasetMeta(k),o.data[g].hidden=!o.data[g].hidden;h.update()}},tooltips:{callbacks:{title:function(){return""},label:function(c,e){return e.labels[c.index]+": "+c.yLabel}}}});var Tp=Eb.extend({dataElementType:dc.Arc,linkScales:B.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(c){var e=this,g=e.getDataset(),h=e.getMeta(),k=e.chart.options.startAngle||0,m=e._starts=[],o=e._angles=[],r=h.data,p,s,w;for(e._updateRadius(),h.count=e.countVisibleElements(),p=0,s=g.data.length;p<s;p++)m[p]=k,w=e._computeAngle(p),o[p]=w,k+=w;for(p=0,s=r.length;p<s;++p)r[p]._options=e._resolveDataElementOptions(r[p],p),e.updateElement(r[p],p,c)},_updateRadius:function(){var c=this,e=c.chart,g=e.chartArea,h=e.options,k=Math.min(g.right-g.left,g.bottom-g.top);e.outerRadius=Math.max(k/2,0),e.innerRadius=Math.max(h.cutoutPercentage?e.outerRadius/100*h.cutoutPercentage:1,0),e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount(),c.outerRadius=e.outerRadius-e.radiusLength*c.index,c.innerRadius=c.outerRadius-e.radiusLength},updateElement:function(c,e,g){var h=this,k=h.chart,m=h.getDataset(),o=k.options,r=o.animation,p=k.scale,s=k.data.labels,w=p.xCenter,z=p.yCenter,D=o.startAngle,M=c.hidden?0:p.getDistanceFromCenterForValue(m.data[e]),P=h._starts[e],T=P+(c.hidden?0:h._angles[e]),Z=r.animateScale?0:p.getDistanceFromCenterForValue(m.data[e]),ia=c._options||{};B.extend(c,{_datasetIndex:h.index,_index:e,_scale:p,_model:{backgroundColor:ia.backgroundColor,borderColor:ia.borderColor,borderWidth:ia.borderWidth,borderAlign:ia.borderAlign,x:w,y:z,innerRadius:0,outerRadius:g?Z:M,startAngle:g&&r.animateRotate?D:P,endAngle:g&&r.animateRotate?D:T,label:B.valueAtIndexOrDefault(s,e,s[e])}}),c.pivot()},countVisibleElements:function(){var c=this.getDataset(),e=this.getMeta(),g=0;return B.each(e.data,function(h,k){!isNaN(c.data[k])&&!h.hidden&&g++}),g},setHoverStyle:function(c){var e=c._model,g=c._options,h=B.getHoverColor,k=B.valueOrDefault;c.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=k(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=k(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=k(g.hoverBorderWidth,g.borderWidth)},_computeAngle:function(c){var e=this,g=this.getMeta().count,h=e.getDataset(),k=e.getMeta();if(isNaN(h.data[c])||k.data[c].hidden)return 0;var m={chart:e.chart,dataIndex:c,dataset:h,datasetIndex:e.index};return Sp([e.chart.options.elements.arc.angle,2*Math.PI/g],m,c)}});ha._set("pie",B.clone(ha.doughnut)),ha._set("pie",{cutoutPercentage:0});var Up=Hk,Dd=B.valueOrDefault;ha._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var Vp=Eb.extend({datasetElementType:dc.Line,dataElementType:dc.Point,linkScales:B.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(c){var e=this,g=e.getMeta(),h=g.dataset,k=g.data||[],m=e.chart.scale,o=e._config,r,p;for(o.tension!==void 0&&o.lineTension===void 0&&(o.lineTension=o.tension),h._scale=m,h._datasetIndex=e.index,h._children=k,h._loop=!0,h._model=e._resolveDatasetElementOptions(h),h.pivot(),r=0,p=k.length;r<p;++r)e.updateElement(k[r],r,c);for(e.updateBezierControlPoints(),r=0,p=k.length;r<p;++r)k[r].pivot()},updateElement:function(c,e,g){var h=this,k=c.custom||{},m=h.getDataset(),o=h.chart.scale,r=o.getPointPositionForValue(e,m.data[e]),p=h._resolveDataElementOptions(c,e),s=h.getMeta().dataset._model,w=g?o.xCenter:r.x,z=g?o.yCenter:r.y;c._scale=o,c._options=p,c._datasetIndex=h.index,c._index=e,c._model={x:w,y:z,skip:k.skip||isNaN(w)||isNaN(z),radius:p.radius,pointStyle:p.pointStyle,rotation:p.rotation,backgroundColor:p.backgroundColor,borderColor:p.borderColor,borderWidth:p.borderWidth,tension:Dd(k.tension,s?s.tension:0),hitRadius:p.hitRadius}},_resolveDatasetElementOptions:function(){var c=this,e=c._config,g=c.chart.options,h=Eb.prototype._resolveDatasetElementOptions.apply(c,arguments);return h.spanGaps=Dd(e.spanGaps,g.spanGaps),h.tension=Dd(e.lineTension,g.elements.line.tension),h},updateBezierControlPoints:function(){var c=this,e=c.getMeta(),g=c.chart.chartArea,h=e.data||[],k,m,o,r;e.dataset._model.spanGaps&&(h=h.filter(function(s){return!s._model.skip}));function p(s,w,z){return Math.max(Math.min(s,z),w)}for(k=0,m=h.length;k<m;++k)o=h[k]._model,r=B.splineCurve(B.previousItem(h,k,!0)._model,o,B.nextItem(h,k,!0)._model,o.tension),o.controlPointPreviousX=p(r.previous.x,g.left,g.right),o.controlPointPreviousY=p(r.previous.y,g.top,g.bottom),o.controlPointNextX=p(r.next.x,g.left,g.right),o.controlPointNextY=p(r.next.y,g.top,g.bottom)},setHoverStyle:function(c){var e=c._model,g=c._options,h=B.getHoverColor;c.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Dd(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=Dd(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=Dd(g.hoverBorderWidth,g.borderWidth),e.radius=Dd(g.hoverRadius,g.radius)}});ha._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(c){return"("+c.xLabel+", "+c.yLabel+")"}}}}),ha._set("global",{datasets:{scatter:{showLine:!1}}});var Wp=Jk,Kk={bar:ge,bubble:Np,doughnut:Hk,horizontalBar:Op,line:Jk,polarArea:Tp,pie:Up,radar:Vp,scatter:Wp};function Ed(c,e){return c.native?{x:c.x,y:c.y}:B.getRelativePosition(c,e)}function lf(c,e){var g=c._getSortedVisibleDatasetMetas(),h,k,m,o,r,p;for(k=0,o=g.length;k<o;++k)for(h=g[k].data,m=0,r=h.length;m<r;++m)p=h[m],p._view.skip||e(p)}function Mh(c,e){var g=[];return lf(c,function(h){h.inRange(e.x,e.y)&&g.push(h)}),g}function Nh(c,e,g,h){var k=Number.POSITIVE_INFINITY,m=[];return lf(c,function(o){if(g&&!o.inRange(e.x,e.y))return;var r=o.getCenterPoint(),p=h(e,r);p<k?(m=[o],k=p):p===k&&m.push(o)}),m}function mf(c){var e=c.indexOf("x")!==-1,g=c.indexOf("y")!==-1;return function(h,k){var m=e?Math.abs(h.x-k.x):0,o=g?Math.abs(h.y-k.y):0;return Math.sqrt(Math.pow(m,2)+Math.pow(o,2))}}function nf(c,e,g){var h=Ed(e,c);g.axis=g.axis||"x";var k=mf(g.axis),m=g.intersect?Mh(c,h):Nh(c,h,!1,k),o=[];return m.length?(c._getSortedVisibleDatasetMetas().forEach(function(r){var p=r.data[m[0]._index];p&&!p._view.skip&&o.push(p)}),o):[]}var he={modes:{single:function(c,e){var g=Ed(e,c),h=[];return lf(c,function(k){if(k.inRange(g.x,g.y))return h.push(k),h}),h.slice(0,1)},label:nf,index:nf,dataset:function(c,e,g){var h=Ed(e,c);g.axis=g.axis||"xy";var k=mf(g.axis),m=g.intersect?Mh(c,h):Nh(c,h,!1,k);return m.length>0&&(m=c.getDatasetMeta(m[0]._datasetIndex).data),m},"x-axis":function(c,e){return nf(c,e,{intersect:!1})},point:function(c,e){var g=Ed(e,c);return Mh(c,g)},nearest:function(c,e,g){var h=Ed(e,c);g.axis=g.axis||"xy";var k=mf(g.axis);return Nh(c,h,g.intersect,k)},x:function(c,e,g){var h=Ed(e,c),k=[],m=!1;return lf(c,function(o){o.inXRange(h.x)&&k.push(o),o.inRange(h.x,h.y)&&(m=!0)}),g.intersect&&!m&&(k=[]),k},y:function(c,e,g){var h=Ed(e,c),k=[],m=!1;return lf(c,function(o){o.inYRange(h.y)&&k.push(o),o.inRange(h.x,h.y)&&(m=!0)}),g.intersect&&!m&&(k=[]),k}}},hg=B.extend;function ie(c,e){return B.where(c,function(g){return g.pos===e})}function ig(c,e){return c.sort(function(g,h){var k=e?h:g,m=e?g:h;return k.weight===m.weight?k.index-m.index:k.weight-m.weight})}function Xp(c){var e=[],g,h,k;for(g=0,h=(c||[]).length;g<h;++g)k=c[g],e.push({index:g,box:k,pos:k.position,horizontal:k.isHorizontal(),weight:k.weight});return e}function Yp(c,e){var g,h,k;for(g=0,h=c.length;g<h;++g)k=c[g],k.width=k.horizontal?k.box.fullWidth&&e.availableWidth:e.vBoxMaxWidth,k.height=k.horizontal&&e.hBoxMaxHeight}function Zp(c){var e=Xp(c),g=ig(ie(e,"left"),!0),h=ig(ie(e,"right")),k=ig(ie(e,"top"),!0),m=ig(ie(e,"bottom"));return{leftAndTop:g.concat(k),rightAndBottom:h.concat(m),chartArea:ie(e,"chartArea"),vertical:g.concat(h),horizontal:k.concat(m)}}function Oh(c,e,g,h){return Math.max(c[g],e[g])+Math.max(c[h],e[h])}function tb(c,e,g){var h=g.box,k=c.maxPadding,m,o;g.size&&(c[g.pos]-=g.size),g.size=g.horizontal?h.height:h.width,c[g.pos]+=g.size;if(h.getPadding){var r=h.getPadding();k.top=Math.max(k.top,r.top),k.left=Math.max(k.left,r.left),k.bottom=Math.max(k.bottom,r.bottom),k.right=Math.max(k.right,r.right)}m=e.outerWidth-Oh(k,c,"left","right"),o=e.outerHeight-Oh(k,c,"top","bottom");if(m!==c.w||o!==c.h){c.w=m,c.h=o;var p=g.horizontal?[m,c.w]:[o,c.h];return p[0]!==p[1]&&(!isNaN(p[0])||!isNaN(p[1]))}}function of(c){var e=c.maxPadding;function g(h){var k=Math.max(e[h]-c[h],0);return c[h]+=k,k}c.y+=g("top"),c.x+=g("left"),g("right"),g("bottom")}function pf(c,e){var g=e.maxPadding;function h(k){var m={left:0,top:0,right:0,bottom:0};return k.forEach(function(o){m[o]=Math.max(e[o],g[o])}),m}return c?h(["left","right"]):h(["top","bottom"])}function jg(c,e,g){var h=[],k,m,o,r,p,s;for(k=0,m=c.length;k<m;++k)o=c[k],r=o.box,r.update(o.width||e.w,o.height||e.h,pf(o.horizontal,e)),tb(e,g,o)&&(s=!0,h.length&&(p=!0)),r.fullWidth||h.push(o);return p?jg(h,e,g)||s:s}function Ph(c,e,g){var h=g.padding,k=e.x,m=e.y,o,r,p,s;for(o=0,r=c.length;o<r;++o)p=c[o],s=p.box,p.horizontal?(s.left=s.fullWidth?h.left:e.left,s.right=s.fullWidth?g.outerWidth-h.right:e.left+e.w,s.top=m,s.bottom=m+s.height,s.width=s.right-s.left,m=s.bottom):(s.left=k,s.right=k+s.width,s.top=e.top,s.bottom=e.top+e.h,s.height=s.bottom-s.top,k=s.right);e.x=k,e.y=m}ha._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var rc={defaults:{},addBox:function(c,e){c.boxes||(c.boxes=[]),e.fullWidth=e.fullWidth||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw:function(){e.draw.apply(e,arguments)}}]},c.boxes.push(e)},removeBox:function(c,e){var g=c.boxes?c.boxes.indexOf(e):-1;g!==-1&&c.boxes.splice(g,1)},configure:function(c,e,g){for(var h=["fullWidth","position","weight"],k=h.length,m=0,o;m<k;++m)o=h[m],g.hasOwnProperty(o)&&(e[o]=g[o])},update:function(c,e,g){if(!c)return;var h=c.options.layout||{},k=B.options.toPadding(h.padding),m=e-k.width,o=g-k.height,r=Zp(c.boxes),p=r.vertical,s=r.horizontal,w=Object.freeze({outerWidth:e,outerHeight:g,padding:k,availableWidth:m,vBoxMaxWidth:m/2/p.length,hBoxMaxHeight:o/2}),z=hg({maxPadding:hg({},k),w:m,h:o,x:k.left,y:k.top},k);Yp(p.concat(s),w),jg(p,z,w),jg(s,z,w)&&jg(p,z,w),of(z),Ph(r.leftAndTop,z,w),z.x+=z.w,z.y+=z.h,Ph(r.rightAndBottom,z,w),c.chartArea={left:z.left,top:z.top,right:z.left+z.w,bottom:z.top+z.h},B.each(r.chartArea,function(D){var M=D.box;hg(M,c.chartArea),M.update(z.w,z.h)})}},kg={acquireContext:function(c){return c&&c.canvas&&(c=c.canvas),c&&c.getContext("2d")||null}},gd=`/*\r
 * DOM element rendering detection\r
 * https://davidwalsh.name/detect-node-insertion\r
 */\r
@keyframes chartjs-render-animation {\r
	from { opacity: 0.99; }\r
	to { opacity: 1; }\r
}\r
\r
.chartjs-render-monitor {\r
	animation: chartjs-render-animation 0.001s;\r
}\r
\r
/*\r
 * DOM element resizing detection\r
 * https://github.com/marcj/css-element-queries\r
 */\r
.chartjs-size-monitor,\r
.chartjs-size-monitor-expand,\r
.chartjs-size-monitor-shrink {\r
	position: absolute;\r
	direction: ltr;\r
	left: 0;\r
	top: 0;\r
	right: 0;\r
	bottom: 0;\r
	overflow: hidden;\r
	pointer-events: none;\r
	visibility: hidden;\r
	z-index: -1;\r
}\r
\r
.chartjs-size-monitor-expand > div {\r
	position: absolute;\r
	width: 1000000px;\r
	height: 1000000px;\r
	left: 0;\r
	top: 0;\r
}\r
\r
.chartjs-size-monitor-shrink > div {\r
	position: absolute;\r
	width: 200%;\r
	height: 200%;\r
	left: 0;\r
	top: 0;\r
}\r
`,Qh=Object.freeze({__proto__:null,default:gd}),_p=i(Qh),wb="$chartjs",Rh="chartjs-",qf=Rh+"size-monitor",Lk=Rh+"render-monitor",$p=Rh+"render-animation",Mk=["animationstart","webkitAnimationStart"],lg={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function mg(c,e){var g=B.getStyle(c,e),h=g&&g.match(/^(\d+)(\.\d+)?px$/);return h?Number(h[1]):void 0}function aq(c,e){var g=c.style,h=c.getAttribute("height"),k=c.getAttribute("width");c[wb]={initial:{height:h,width:k,style:{display:g.display,height:g.height,width:g.width}}},g.display=g.display||"block";if(k===null||k===""){var m=mg(c,"width");m!==void 0&&(c.width=m)}if(h===null||h==="")if(c.style.height==="")c.height=c.width/(e.options.aspectRatio||2);else{var o=mg(c,"height");m!==void 0&&(c.height=o)}return c}var bq=function(){var c=!1;try{var e=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("e",null,e)}catch(g){}return c}(),Nk=bq?{passive:!0}:!1;function je(c,e,g){c.addEventListener(e,g,Nk)}function Sh(c,e,g){c.removeEventListener(e,g,Nk)}function Th(c,e,g,h,k){return{type:c,chart:e,native:k||null,x:g!==void 0?g:null,y:h!==void 0?h:null}}function cq(c,e){var g=lg[c.type]||c.type,h=B.getRelativePosition(c,e);return Th(g,e,h.x,h.y,c)}function dq(c,e){var g=!1,h=[];return function(){h=Array.prototype.slice.call(arguments),e=e||this,g||(g=!0,B.requestAnimFrame.call(window,function(){g=!1,c.apply(e,h)}))}}function rf(c){var e=document.createElement("div");return e.className=c||"",e}function Ok(c){var e=1e6,g=rf(qf),h=rf(qf+"-expand"),k=rf(qf+"-shrink");h.appendChild(rf()),k.appendChild(rf()),g.appendChild(h),g.appendChild(k),g._reset=function(){h.scrollLeft=e,h.scrollTop=e,k.scrollLeft=e,k.scrollTop=e};var m=function(){g._reset(),c()};return je(h,"scroll",m.bind(h,"expand")),je(k,"scroll",m.bind(k,"shrink")),g}function eq(c,e){var g=c[wb]||(c[wb]={}),h=g.renderProxy=function(k){k.animationName===$p&&e()};B.each(Mk,function(k){je(c,k,h)}),g.reflow=!!c.offsetParent,c.classList.add(Lk)}function ke(c){var e=c[wb]||{},g=e.renderProxy;g&&(B.each(Mk,function(h){Sh(c,h,g)}),delete e.renderProxy),c.classList.remove(Lk)}function fq(c,e,g){var h=c[wb]||(c[wb]={}),k=h.resizer=Ok(dq(function(){if(h.resizer){var m=g.options.maintainAspectRatio&&c.parentNode,o=m?m.clientWidth:0;e(Th("resize",g)),m&&m.clientWidth<o&&g.canvas&&e(Th("resize",g))}}));eq(c,function(){if(h.resizer){var m=c.parentNode;m&&m!==k.parentNode&&m.insertBefore(k,m.firstChild),k._reset()}})}function Uh(c){var e=c[wb]||{},g=e.resizer;delete e.resizer,ke(c),g&&g.parentNode&&g.parentNode.removeChild(g)}function gq(c,e){var g=c[wb]||(c[wb]={});if(!g.containsStyles){g.containsStyles=!0,e=`/* Chart.js */
`+e;var h=document.createElement("style");h.setAttribute("type","text/css"),h.appendChild(document.createTextNode(e)),c.appendChild(h)}}var ng={disableCSSInjection:!1,_enabled:typeof window!=="undefined"&&typeof document!=="undefined",_ensureLoaded:function(c){if(!this.disableCSSInjection){var e=c.getRootNode?c.getRootNode():document,g=e.host?e:document.head;gq(g,_p)}},acquireContext:function(c,e){typeof c==="string"?c=document.getElementById(c):c.length&&(c=c[0]),c&&c.canvas&&(c=c.canvas);var g=c&&c.getContext&&c.getContext("2d");return g&&g.canvas===c?(this._ensureLoaded(c),aq(c,e),g):null},releaseContext:function(c){var e=c.canvas;if(!e[wb])return;var g=e[wb].initial;["height","width"].forEach(function(h){var k=g[h];B.isNullOrUndef(k)?e.removeAttribute(h):e.setAttribute(h,k)}),B.each(g.style||{},function(h,k){e.style[k]=h}),e.width=e.width,delete e[wb]},addEventListener:function(c,e,g){var h=c.canvas;if(e==="resize"){fq(h,g,c);return}var k=g[wb]||(g[wb]={}),m=k.proxies||(k.proxies={}),o=m[c.id+"_"+e]=function(r){g(cq(r,c))};je(h,e,o)},removeEventListener:function(c,e,g){var h=c.canvas;if(e==="resize"){Uh(h);return}var k=g[wb]||{},m=k.proxies||{},o=m[c.id+"_"+e];if(!o)return;Sh(h,e,o)}};B.addEvent=je,B.removeEvent=Sh;var hq=ng._enabled?ng:kg,le=B.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},hq);ha._set("global",{plugins:{}});var ob={_plugins:[],_cacheId:0,register:function(c){var e=this._plugins;[].concat(c).forEach(function(g){e.indexOf(g)===-1&&e.push(g)}),this._cacheId++},unregister:function(c){var e=this._plugins;[].concat(c).forEach(function(g){var h=e.indexOf(g);h!==-1&&e.splice(h,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(c,e,g){var h=this.descriptors(c),k=h.length,m,o,r,p,s;for(m=0;m<k;++m){o=h[m],r=o.plugin,s=r[e];if(typeof s==="function"){p=[c].concat(g||[]),p.push(o.options);if(s.apply(r,p)===!1)return!1}}return!0},descriptors:function(c){var e=c.$plugins||(c.$plugins={});if(e.id===this._cacheId)return e.descriptors;var g=[],h=[],k=c&&c.config||{},m=k.options&&k.options.plugins||{};return this._plugins.concat(k.plugins||[]).forEach(function(o){var r=g.indexOf(o);if(r!==-1)return;var p=o.id,s=m[p];if(s===!1)return;s===!0&&(s=B.clone(ha.global.plugins[p])),g.push(o),h.push({plugin:o,options:s||{}})}),e.descriptors=h,e.id=this._cacheId,h},_invalidate:function(c){delete c.$plugins}},sf={constructors:{},defaults:{},registerScaleType:function(c,e,g){this.constructors[c]=e,this.defaults[c]=B.clone(g)},getScaleConstructor:function(c){return this.constructors.hasOwnProperty(c)?this.constructors[c]:void 0},getScaleDefaults:function(c){return this.defaults.hasOwnProperty(c)?B.merge(Object.create(null),[ha.scale,this.defaults[c]]):{}},updateScaleDefaults:function(c,e){var g=this;g.defaults.hasOwnProperty(c)&&(g.defaults[c]=B.extend(g.defaults[c],e))},addScalesToLayout:function(c){B.each(c.scales,function(e){e.fullWidth=e.options.fullWidth,e.position=e.options.position,e.weight=e.options.weight,rc.addBox(c,e)})}},Hc=B.valueOrDefault,Vh=B.rtl.getRtlAdapter;ha._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:B.noop,title:function(c,e){var g="",h=e.labels,k=h?h.length:0;if(c.length>0){var m=c[0];m.label?g=m.label:m.xLabel?g=m.xLabel:k>0&&m.index<k&&(g=h[m.index])}return g},afterTitle:B.noop,beforeBody:B.noop,beforeLabel:B.noop,label:function(c,e){var g=e.datasets[c.datasetIndex].label||"";return g&&(g+=": "),B.isNullOrUndef(c.value)?g+=c.yLabel:g+=c.value,g},labelColor:function(c,e){var g=e.getDatasetMeta(c.datasetIndex),h=g.data[c.index],k=h._view;return{borderColor:k.borderColor,backgroundColor:k.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:B.noop,afterBody:B.noop,beforeFooter:B.noop,footer:B.noop,afterFooter:B.noop}}});var Wh={average:function(c){if(!c.length)return!1;var e,g,h=0,k=0,m=0;for(e=0,g=c.length;e<g;++e){var o=c[e];if(o&&o.hasValue()){var r=o.tooltipPosition();h+=r.x,k+=r.y,++m}}return{x:h/m,y:k/m}},nearest:function(c,e){var g=e.x,h=e.y,k=Number.POSITIVE_INFINITY,m,o,r;for(m=0,o=c.length;m<o;++m){var p=c[m];if(p&&p.hasValue()){var s=p.getCenterPoint(),w=B.distanceBetweenPoints(e,s);w<k&&(k=w,r=p)}}if(r){var z=r.tooltipPosition();g=z.x,h=z.y}return{x:g,y:h}}};function bb(c,e){return e&&(B.isArray(e)?Array.prototype.push.apply(c,e):c.push(e)),c}function Vc(c){return(typeof c==="string"||c instanceof String)&&c.indexOf(`
`)>-1?c.split(`
`):c}function iq(c){var e=c._xScale,g=c._yScale||c._scale,h=c._index,k=c._datasetIndex,m=c._chart.getDatasetMeta(k).controller,o=m._getIndexScale(),r=m._getValueScale();return{xLabel:e?e.getLabelForIndex(h,k):"",yLabel:g?g.getLabelForIndex(h,k):"",label:o?""+o.getLabelForIndex(h,k):"",value:r?""+r.getLabelForIndex(h,k):"",index:h,datasetIndex:k,x:c._model.x,y:c._model.y}}function Xh(c){var e=ha.global;return{xPadding:c.xPadding,yPadding:c.yPadding,xAlign:c.xAlign,yAlign:c.yAlign,rtl:c.rtl,textDirection:c.textDirection,bodyFontColor:c.bodyFontColor,_bodyFontFamily:Hc(c.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:Hc(c.bodyFontStyle,e.defaultFontStyle),_bodyAlign:c.bodyAlign,bodyFontSize:Hc(c.bodyFontSize,e.defaultFontSize),bodySpacing:c.bodySpacing,titleFontColor:c.titleFontColor,_titleFontFamily:Hc(c.titleFontFamily,e.defaultFontFamily),_titleFontStyle:Hc(c.titleFontStyle,e.defaultFontStyle),titleFontSize:Hc(c.titleFontSize,e.defaultFontSize),_titleAlign:c.titleAlign,titleSpacing:c.titleSpacing,titleMarginBottom:c.titleMarginBottom,footerFontColor:c.footerFontColor,_footerFontFamily:Hc(c.footerFontFamily,e.defaultFontFamily),_footerFontStyle:Hc(c.footerFontStyle,e.defaultFontStyle),footerFontSize:Hc(c.footerFontSize,e.defaultFontSize),_footerAlign:c.footerAlign,footerSpacing:c.footerSpacing,footerMarginTop:c.footerMarginTop,caretSize:c.caretSize,cornerRadius:c.cornerRadius,backgroundColor:c.backgroundColor,opacity:0,legendColorBackground:c.multiKeyBackground,displayColors:c.displayColors,borderColor:c.borderColor,borderWidth:c.borderWidth}}function jq(c,e){var g=c._chart.ctx,h=e.yPadding*2,k=0,m=e.body,o=m.reduce(function(P,T){return P+T.before.length+T.lines.length+T.after.length},0);o+=e.beforeBody.length+e.afterBody.length;var r=e.title.length,p=e.footer.length,s=e.titleFontSize,w=e.bodyFontSize,z=e.footerFontSize;h+=r*s,h+=r?(r-1)*e.titleSpacing:0,h+=r?e.titleMarginBottom:0,h+=o*w,h+=o?(o-1)*e.bodySpacing:0,h+=p?e.footerMarginTop:0,h+=p*z,h+=p?(p-1)*e.footerSpacing:0;var D=0,M=function(P){k=Math.max(k,g.measureText(P).width+D)};return g.font=B.fontString(s,e._titleFontStyle,e._titleFontFamily),B.each(e.title,M),g.font=B.fontString(w,e._bodyFontStyle,e._bodyFontFamily),B.each(e.beforeBody.concat(e.afterBody),M),D=e.displayColors?w+2:0,B.each(m,function(P){B.each(P.before,M),B.each(P.lines,M),B.each(P.after,M)}),D=0,g.font=B.fontString(z,e._footerFontStyle,e._footerFontFamily),B.each(e.footer,M),k+=2*e.xPadding,{width:k,height:h}}function kq(c,e){var g=c._model,h=c._chart,k=c._chart.chartArea,m="center",o="center";g.y<e.height?o="top":g.y>h.height-e.height&&(o="bottom");var r,p,s,w,z,D=(k.left+k.right)/2,M=(k.top+k.bottom)/2;o==="center"?(r=function(T){return T<=D},p=function(T){return T>D}):(r=function(T){return T<=e.width/2},p=function(T){return T>=h.width-e.width/2}),s=function(T){return T+e.width+g.caretSize+g.caretPadding>h.width},w=function(T){return T-e.width-g.caretSize-g.caretPadding<0},z=function(T){return T<=M?"top":"bottom"},r(g.x)?(m="left",s(g.x)&&(m="center",o=z(g.y))):p(g.x)&&(m="right",w(g.x)&&(m="center",o=z(g.y)));var P=c._options;return{xAlign:P.xAlign?P.xAlign:m,yAlign:P.yAlign?P.yAlign:o}}function lq(c,e,g,h){var k=c.x,m=c.y,o=c.caretSize,r=c.caretPadding,p=c.cornerRadius,s=g.xAlign,w=g.yAlign,z=o+r,D=p+r;return s==="right"?k-=e.width:s==="center"&&(k-=e.width/2,k+e.width>h.width&&(k=h.width-e.width),k<0&&(k=0)),w==="top"?m+=z:w==="bottom"?m-=e.height+z:m-=e.height/2,w==="center"?s==="left"?k+=z:s==="right"&&(k-=z):s==="left"?k-=D:s==="right"&&(k+=D),{x:k,y:m}}function hd(c,e){return e==="center"?c.x+c.width/2:e==="right"?c.x+c.width-c.xPadding:c.x+c.xPadding}function Pk(c){return bb([],Vc(c))}var mq=sa.extend({initialize:function(){this._model=Xh(this._options),this._lastActive=[]},getTitle:function(){var c=this,e=c._options,g=e.callbacks,h=g.beforeTitle.apply(c,arguments),k=g.title.apply(c,arguments),m=g.afterTitle.apply(c,arguments),o=[];return o=bb(o,Vc(h)),o=bb(o,Vc(k)),o=bb(o,Vc(m)),o},getBeforeBody:function(){return Pk(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(c,e){var g=this,h=g._options.callbacks,k=[];return B.each(c,function(m){var o={before:[],lines:[],after:[]};bb(o.before,Vc(h.beforeLabel.call(g,m,e))),bb(o.lines,h.label.call(g,m,e)),bb(o.after,Vc(h.afterLabel.call(g,m,e))),k.push(o)}),k},getAfterBody:function(){return Pk(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var c=this,e=c._options.callbacks,g=e.beforeFooter.apply(c,arguments),h=e.footer.apply(c,arguments),k=e.afterFooter.apply(c,arguments),m=[];return m=bb(m,Vc(g)),m=bb(m,Vc(h)),m=bb(m,Vc(k)),m},update:function(c){var e=this,g=e._options,h=e._model,k=e._model=Xh(g),m=e._active,o=e._data,r={xAlign:h.xAlign,yAlign:h.yAlign},p={x:h.x,y:h.y},s={width:h.width,height:h.height},w={x:h.caretX,y:h.caretY},z,D;if(m.length){k.opacity=1;var M=[],P=[];w=Wh[g.position].call(e,m,e._eventPosition);var T=[];for(z=0,D=m.length;z<D;++z)T.push(iq(m[z]));g.filter&&(T=T.filter(function(Z){return g.filter(Z,o)})),g.itemSort&&(T=T.sort(function(Z,ia){return g.itemSort(Z,ia,o)})),B.each(T,function(Z){M.push(g.callbacks.labelColor.call(e,Z,e._chart)),P.push(g.callbacks.labelTextColor.call(e,Z,e._chart))}),k.title=e.getTitle(T,o),k.beforeBody=e.getBeforeBody(T,o),k.body=e.getBody(T,o),k.afterBody=e.getAfterBody(T,o),k.footer=e.getFooter(T,o),k.x=w.x,k.y=w.y,k.caretPadding=g.caretPadding,k.labelColors=M,k.labelTextColors=P,k.dataPoints=T,s=jq(this,k),r=kq(this,s),p=lq(k,s,r,e._chart)}else k.opacity=0;return k.xAlign=r.xAlign,k.yAlign=r.yAlign,k.x=p.x,k.y=p.y,k.width=s.width,k.height=s.height,k.caretX=w.x,k.caretY=w.y,e._model=k,c&&g.custom&&g.custom.call(e,k),e},drawCaret:function(c,e){var g=this._chart.ctx,h=this._view,k=this.getCaretPosition(c,e,h);g.lineTo(k.x1,k.y1),g.lineTo(k.x2,k.y2),g.lineTo(k.x3,k.y3)},getCaretPosition:function(c,e,g){var h,k,m,o,r,p,s=g.caretSize,w=g.cornerRadius,z=g.xAlign,D=g.yAlign,M=c.x,P=c.y,T=e.width,Z=e.height;if(D==="center")r=P+Z/2,z==="left"?(h=M,k=h-s,m=h,o=r+s,p=r-s):(h=M+T,k=h+s,m=h,o=r-s,p=r+s);else{z==="left"?(k=M+w+s,h=k-s,m=k+s):z==="right"?(k=M+T-w-s,h=k-s,m=k+s):(k=g.caretX,h=k-s,m=k+s);if(D==="top")o=P,r=o-s,p=o;else{o=P+Z,r=o+s,p=o;var ia=m;m=h,h=ia}}return{x1:h,x2:k,x3:m,y1:o,y2:r,y3:p}},drawTitle:function(c,e,g){var h=e.title,k=h.length,m,o,r;if(k){var p=Vh(e.rtl,e.x,e.width);for(c.x=hd(e,e._titleAlign),g.textAlign=p.textAlign(e._titleAlign),g.textBaseline="middle",m=e.titleFontSize,o=e.titleSpacing,g.fillStyle=e.titleFontColor,g.font=B.fontString(m,e._titleFontStyle,e._titleFontFamily),r=0;r<k;++r)g.fillText(h[r],p.x(c.x),c.y+m/2),c.y+=m+o,r+1===k&&(c.y+=e.titleMarginBottom-o)}},drawBody:function(c,e,g){var h=e.bodyFontSize,k=e.bodySpacing,m=e._bodyAlign,o=e.body,r=e.displayColors,p=0,s=r?hd(e,"left"):0,w=Vh(e.rtl,e.x,e.width),z=function(gb){g.fillText(gb,w.x(c.x+p),c.y+h/2),c.y+=h+k},D,M,P,T,Z,ia,wa,Aa,Pa=w.textAlign(m);for(g.textAlign=m,g.textBaseline="middle",g.font=B.fontString(h,e._bodyFontStyle,e._bodyFontFamily),c.x=hd(e,Pa),g.fillStyle=e.bodyFontColor,B.each(e.beforeBody,z),p=r&&Pa!=="right"?m==="center"?h/2+1:h+2:0,Z=0,wa=o.length;Z<wa;++Z){for(D=o[Z],M=e.labelTextColors[Z],P=e.labelColors[Z],g.fillStyle=M,B.each(D.before,z),T=D.lines,ia=0,Aa=T.length;ia<Aa;++ia){if(r){var Na=w.x(s);g.fillStyle=e.legendColorBackground,g.fillRect(w.leftForLtr(Na,h),c.y,h,h),g.lineWidth=1,g.strokeStyle=P.borderColor,g.strokeRect(w.leftForLtr(Na,h),c.y,h,h),g.fillStyle=P.backgroundColor,g.fillRect(w.leftForLtr(w.xPlus(Na,1),h-2),c.y+1,h-2,h-2),g.fillStyle=M}z(T[ia])}B.each(D.after,z)}p=0,B.each(e.afterBody,z),c.y-=k},drawFooter:function(c,e,g){var h=e.footer,k=h.length,m,o;if(k){var r=Vh(e.rtl,e.x,e.width);for(c.x=hd(e,e._footerAlign),c.y+=e.footerMarginTop,g.textAlign=r.textAlign(e._footerAlign),g.textBaseline="middle",m=e.footerFontSize,g.fillStyle=e.footerFontColor,g.font=B.fontString(m,e._footerFontStyle,e._footerFontFamily),o=0;o<k;++o)g.fillText(h[o],r.x(c.x),c.y+m/2),c.y+=m+e.footerSpacing}},drawBackground:function(c,e,g,h){g.fillStyle=e.backgroundColor,g.strokeStyle=e.borderColor,g.lineWidth=e.borderWidth;var k=e.xAlign,m=e.yAlign,o=c.x,r=c.y,p=h.width,s=h.height,w=e.cornerRadius;g.beginPath(),g.moveTo(o+w,r),m==="top"&&this.drawCaret(c,h),g.lineTo(o+p-w,r),g.quadraticCurveTo(o+p,r,o+p,r+w),m==="center"&&k==="right"&&this.drawCaret(c,h),g.lineTo(o+p,r+s-w),g.quadraticCurveTo(o+p,r+s,o+p-w,r+s),m==="bottom"&&this.drawCaret(c,h),g.lineTo(o+w,r+s),g.quadraticCurveTo(o,r+s,o,r+s-w),m==="center"&&k==="left"&&this.drawCaret(c,h),g.lineTo(o,r+w),g.quadraticCurveTo(o,r,o+w,r),g.closePath(),g.fill(),e.borderWidth>0&&g.stroke()},draw:function(){var c=this._chart.ctx,e=this._view;if(e.opacity===0)return;var g={width:e.width,height:e.height},h={x:e.x,y:e.y},k=Math.abs(e.opacity<.001)?0:e.opacity,m=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;this._options.enabled&&m&&(c.save(),c.globalAlpha=k,this.drawBackground(h,e,c,g),h.y+=e.yPadding,B.rtl.overrideTextDirection(c,e.textDirection),this.drawTitle(h,e,c),this.drawBody(h,e,c),this.drawFooter(h,e,c),B.rtl.restoreTextDirection(c,e.textDirection),c.restore())},handleEvent:function(c){var e=this,g=e._options,h=!1;return e._lastActive=e._lastActive||[],c.type==="mouseout"?e._active=[]:(e._active=e._chart.getElementsAtEventForMode(c,g.mode,g),g.reverse&&e._active.reverse()),h=!B.arrayEquals(e._active,e._lastActive),h&&(e._lastActive=e._active,(g.enabled||g.custom)&&(e._eventPosition={x:c.x,y:c.y},e.update(!0),e.pivot())),h}}),nq=Wh,me=mq;me.positioners=nq;var ne=B.valueOrDefault;ha._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});function og(){return B.merge(Object.create(null),[].slice.call(arguments),{merger:function(c,e,g,h){if(c==="xAxes"||c==="yAxes"){var k=g[c].length,m,o,r;for(e[c]||(e[c]=[]),m=0;m<k;++m)r=g[c][m],o=ne(r.type,c==="xAxes"?"category":"linear"),m>=e[c].length&&e[c].push({}),!e[c][m].type||r.type&&r.type!==e[c][m].type?B.merge(e[c][m],[sf.getScaleDefaults(o),r]):B.merge(e[c][m],r)}else B._merger(c,e,g,h)}})}function Yh(){return B.merge(Object.create(null),[].slice.call(arguments),{merger:function(c,e,g,h){var k=e[c]||Object.create(null),m=g[c];c==="scales"?e[c]=og(k,m):c==="scale"?e[c]=B.merge(k,[sf.getScaleDefaults(m.type),m]):B._merger(c,e,g,h)}})}function Qk(c){c=c||Object.create(null);var e=c.data=c.data||{};return e.datasets=e.datasets||[],e.labels=e.labels||[],c.options=Yh(ha.global,ha[c.type],c.options||{}),c}function oq(c){var e=c.options;B.each(c.scales,function(g){rc.removeBox(c,g)}),e=Yh(ha.global,ha[c.config.type],e),c.options=c.config.options=e,c.ensureScalesHaveIDs(),c.buildOrUpdateScales(),c.tooltip._options=e.tooltips,c.tooltip.initialize()}function pg(c,e,g){var h,k=function(m){return m.id===h};do h=e+g++;while(B.findIndex(c,k)>=0);return h}function qg(c){return c==="top"||c==="bottom"}function rg(c,e){return function(g,h){return g[c]===h[c]?g[e]-h[e]:g[c]-h[c]}}var id=function(c,e){return this.construct(c,e),this};B.extend(id.prototype,{construct:function(c,e){var g=this;e=Qk(e);var h=le.acquireContext(c,e),k=h&&h.canvas,m=k&&k.height,o=k&&k.width;g.id=B.uid(),g.ctx=h,g.canvas=k,g.config=e,g.width=o,g.height=m,g.aspectRatio=m?o/m:null,g.options=e.options,g._bufferedRender=!1,g._layers=[],g.chart=g,g.controller=g,id.instances[g.id]=g,Object.defineProperty(g,"data",{get:function(){return g.config.data},set:function(r){g.config.data=r}});if(!h||!k){console.error("Failed to create chart: can't acquire context from the given item");return}g.initialize(),g.update()},initialize:function(){var c=this;return ob.notify(c,"beforeInit"),B.retinaScale(c,c.options.devicePixelRatio),c.bindEvents(),c.options.responsive&&c.resize(!0),c.initToolTip(),ob.notify(c,"afterInit"),c},clear:function(){return B.canvas.clear(this),this},stop:function(){return _b.cancelAnimation(this),this},resize:function(c){var e=this,g=e.options,h=e.canvas,k=g.maintainAspectRatio&&e.aspectRatio||null,m=Math.max(0,Math.floor(B.getMaximumWidth(h))),o=Math.max(0,Math.floor(k?m/k:B.getMaximumHeight(h)));if(e.width===m&&e.height===o)return;h.width=e.width=m,h.height=e.height=o,h.style.width=m+"px",h.style.height=o+"px",B.retinaScale(e,g.devicePixelRatio);if(!c){var r={width:m,height:o};ob.notify(e,"resize",[r]),g.onResize&&g.onResize(e,r),e.stop(),e.update({duration:g.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var c=this.options,e=c.scales||{},g=c.scale;B.each(e.xAxes,function(h,k){h.id||(h.id=pg(e.xAxes,"x-axis-",k))}),B.each(e.yAxes,function(h,k){h.id||(h.id=pg(e.yAxes,"y-axis-",k))}),g&&(g.id=g.id||"scale")},buildOrUpdateScales:function(){var c=this,e=c.options,g=c.scales||{},h=[],k=Object.keys(g).reduce(function(m,o){return m[o]=!1,m},{});e.scales&&(h=h.concat((e.scales.xAxes||[]).map(function(m){return{options:m,dtype:"category",dposition:"bottom"}}),(e.scales.yAxes||[]).map(function(m){return{options:m,dtype:"linear",dposition:"left"}}))),e.scale&&h.push({options:e.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),B.each(h,function(m){var o=m.options,r=o.id,p=ne(o.type,m.dtype);qg(o.position)!==qg(m.dposition)&&(o.position=m.dposition),k[r]=!0;var s=null;if(r in g&&g[r].type===p)s=g[r],s.options=o,s.ctx=c.ctx,s.chart=c;else{var w=sf.getScaleConstructor(p);if(!w)return;s=new w({id:r,type:p,options:o,ctx:c.ctx,chart:c}),g[s.id]=s}s.mergeTicksOptions(),m.isDefault&&(c.scale=s)}),B.each(k,function(m,o){m||delete g[o]}),c.scales=g,sf.addScalesToLayout(this)},buildOrUpdateControllers:function(){var c=this,e=[],g=c.data.datasets,h,k;for(h=0,k=g.length;h<k;h++){var m=g[h],o=c.getDatasetMeta(h),r=m.type||c.config.type;o.type&&o.type!==r&&(c.destroyDatasetMeta(h),o=c.getDatasetMeta(h)),o.type=r,o.order=m.order||0,o.index=h;if(o.controller)o.controller.updateIndex(h),o.controller.linkScales();else{var p=Kk[o.type];if(p===void 0)throw new Error('"'+o.type+'" is not a chart type.');o.controller=new p(c,h),e.push(o.controller)}}return e},resetElements:function(){var c=this;B.each(c.data.datasets,function(e,g){c.getDatasetMeta(g).controller.reset()},c)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(c){var e=this,g,h;(!c||typeof c!=="object")&&(c={duration:c,lazy:arguments[1]}),oq(e),ob._invalidate(e);if(ob.notify(e,"beforeUpdate")===!1)return;e.tooltip._data=e.data;var k=e.buildOrUpdateControllers();for(g=0,h=e.data.datasets.length;g<h;g++)e.getDatasetMeta(g).controller.buildOrUpdateElements();e.updateLayout(),e.options.animation&&e.options.animation.duration&&B.each(k,function(m){m.reset()}),e.updateDatasets(),e.tooltip.initialize(),e.lastActive=[],ob.notify(e,"afterUpdate"),e._layers.sort(rg("z","_idx")),e._bufferedRender?e._bufferedRequest={duration:c.duration,easing:c.easing,lazy:c.lazy}:e.render(c)},updateLayout:function(){var c=this;if(ob.notify(c,"beforeLayout")===!1)return;rc.update(this,this.width,this.height),c._layers=[],B.each(c.boxes,function(e){e._configure&&e._configure(),c._layers.push.apply(c._layers,e._layers())},c),c._layers.forEach(function(e,g){e._idx=g}),ob.notify(c,"afterScaleUpdate"),ob.notify(c,"afterLayout")},updateDatasets:function(){var c=this;if(ob.notify(c,"beforeDatasetsUpdate")===!1)return;for(var e=0,g=c.data.datasets.length;e<g;++e)c.updateDataset(e);ob.notify(c,"afterDatasetsUpdate")},updateDataset:function(c){var e=this,g=e.getDatasetMeta(c),h={meta:g,index:c};if(ob.notify(e,"beforeDatasetUpdate",[h])===!1)return;g.controller._update(),ob.notify(e,"afterDatasetUpdate",[h])},render:function(c){var e=this;(!c||typeof c!=="object")&&(c={duration:c,lazy:arguments[1]});var g=e.options.animation,h=ne(c.duration,g&&g.duration),k=c.lazy;if(ob.notify(e,"beforeRender")===!1)return;var m=function(r){ob.notify(e,"afterRender"),B.callback(g&&g.onComplete,[r],e)};if(g&&h){var o=new Lh({numSteps:h/16.66,easing:c.easing||g.easing,render:function(r,p){var s=B.easing.effects[p.easing],w=p.currentStep,z=w/p.numSteps;r.draw(s(z),z,w)},onAnimationProgress:g.onProgress,onAnimationComplete:m});_b.addAnimation(e,o,h,k)}else e.draw(),m(new Lh({numSteps:0,chart:e}));return e},draw:function(c){var e=this,g,h;e.clear(),B.isNullOrUndef(c)&&(c=1),e.transition(c);if(e.width<=0||e.height<=0)return;if(ob.notify(e,"beforeDraw",[c])===!1)return;for(h=e._layers,g=0;g<h.length&&h[g].z<=0;++g)h[g].draw(e.chartArea);for(e.drawDatasets(c);g<h.length;++g)h[g].draw(e.chartArea);e._drawTooltip(c),ob.notify(e,"afterDraw",[c])},transition:function(c){for(var e=this,g=0,h=(e.data.datasets||[]).length;g<h;++g)e.isDatasetVisible(g)&&e.getDatasetMeta(g).controller.transition(c);e.tooltip.transition(c)},_getSortedDatasetMetas:function(c){var e=this,g=e.data.datasets||[],h=[],k,m;for(k=0,m=g.length;k<m;++k)(!c||e.isDatasetVisible(k))&&h.push(e.getDatasetMeta(k));return h.sort(rg("order","index")),h},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(c){var e=this,g,h;if(ob.notify(e,"beforeDatasetsDraw",[c])===!1)return;for(g=e._getSortedVisibleDatasetMetas(),h=g.length-1;h>=0;--h)e.drawDataset(g[h],c);ob.notify(e,"afterDatasetsDraw",[c])},drawDataset:function(c,e){var g=this,h={meta:c,index:c.index,easingValue:e};if(ob.notify(g,"beforeDatasetDraw",[h])===!1)return;c.controller.draw(e),ob.notify(g,"afterDatasetDraw",[h])},_drawTooltip:function(c){var e=this,g=e.tooltip,h={tooltip:g,easingValue:c};if(ob.notify(e,"beforeTooltipDraw",[h])===!1)return;g.draw(),ob.notify(e,"afterTooltipDraw",[h])},getElementAtEvent:function(c){return he.modes.single(this,c)},getElementsAtEvent:function(c){return he.modes.label(this,c,{intersect:!0})},getElementsAtXAxis:function(c){return he.modes["x-axis"](this,c,{intersect:!0})},getElementsAtEventForMode:function(c,e,g){var h=he.modes[e];return typeof h==="function"?h(this,c,g):[]},getDatasetAtEvent:function(c){return he.modes.dataset(this,c,{intersect:!0})},getDatasetMeta:function(c){var e=this,g=e.data.datasets[c];g._meta||(g._meta={});var h=g._meta[e.id];return h||(h=g._meta[e.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:g.order||0,index:c}),h},getVisibleDatasetCount:function(){for(var c=0,e=0,g=this.data.datasets.length;e<g;++e)this.isDatasetVisible(e)&&c++;return c},isDatasetVisible:function(c){var e=this.getDatasetMeta(c);return typeof e.hidden==="boolean"?!e.hidden:!this.data.datasets[c].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(c){var e=this.id,g=this.data.datasets[c],h=g._meta&&g._meta[e];h&&(h.controller.destroy(),delete g._meta[e])},destroy:function(){var c=this,e=c.canvas,g,h;for(c.stop(),g=0,h=c.data.datasets.length;g<h;++g)c.destroyDatasetMeta(g);e&&(c.unbindEvents(),B.canvas.clear(c),le.releaseContext(c.ctx),c.canvas=null,c.ctx=null),ob.notify(c,"destroy"),delete id.instances[c.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var c=this;c.tooltip=new me({_chart:c,_chartInstance:c,_data:c.data,_options:c.options.tooltips},c)},bindEvents:function(){var c=this,e=c._listeners={},g=function(){c.eventHandler.apply(c,arguments)};B.each(c.options.events,function(h){le.addEventListener(c,h,g),e[h]=g}),c.options.responsive&&(g=function(){c.resize()},le.addEventListener(c,"resize",g),e.resize=g)},unbindEvents:function(){var c=this,e=c._listeners;if(!e)return;delete c._listeners,B.each(e,function(g,h){le.removeEventListener(c,h,g)})},updateHoverStyle:function(c,e,g){var h=g?"set":"remove",k,m,o;for(m=0,o=c.length;m<o;++m)k=c[m],k&&this.getDatasetMeta(k._datasetIndex).controller[h+"HoverStyle"](k);e==="dataset"&&this.getDatasetMeta(c[0]._datasetIndex).controller["_"+h+"DatasetHoverStyle"]()},eventHandler:function(c){var e=this,g=e.tooltip;if(ob.notify(e,"beforeEvent",[c])===!1)return;e._bufferedRender=!0,e._bufferedRequest=null;var h=e.handleEvent(c);g&&(h=g._start?g.handleEvent(c):h|g.handleEvent(c)),ob.notify(e,"afterEvent",[c]);var k=e._bufferedRequest;return k?e.render(k):h&&!e.animating&&(e.stop(),e.render({duration:e.options.hover.animationDuration,lazy:!0})),e._bufferedRender=!1,e._bufferedRequest=null,e},handleEvent:function(c){var e=this,g=e.options||{},h=g.hover,k=!1;return e.lastActive=e.lastActive||[],c.type==="mouseout"?e.active=[]:e.active=e.getElementsAtEventForMode(c,h.mode,h),B.callback(g.onHover||g.hover.onHover,[c.native,e.active],e),(c.type==="mouseup"||c.type==="click")&&(g.onClick&&g.onClick.call(e,c.native,e.active)),e.lastActive.length&&e.updateHoverStyle(e.lastActive,h.mode,!1),e.active.length&&h.mode&&e.updateHoverStyle(e.active,h.mode,!0),k=!B.arrayEquals(e.active,e.lastActive),e.lastActive=e.active,k}}),id.instances={};var Ta=id;id.Controller=id,id.types={},B.configMerge=Yh,B.scaleMerge=og;var pq=function(){B.where=function(h,k){if(B.isArray(h)&&Array.prototype.filter)return h.filter(k);var m=[];return B.each(h,function(o){k(o)&&m.push(o)}),m},B.findIndex=Array.prototype.findIndex?function(h,k,m){return h.findIndex(k,m)}:function(h,k,m){m=m===void 0?h:m;for(var o=0,r=h.length;o<r;++o)if(k.call(m,h[o],o,h))return o;return-1},B.findNextWhere=function(h,k,m){B.isNullOrUndef(m)&&(m=-1);for(var o=m+1;o<h.length;o++){var r=h[o];if(k(r))return r}},B.findPreviousWhere=function(h,k,m){B.isNullOrUndef(m)&&(m=h.length);for(var o=m-1;o>=0;o--){var r=h[o];if(k(r))return r}},B.isNumber=function(h){return!isNaN(parseFloat(h))&&isFinite(h)},B.almostEquals=function(h,k,m){return Math.abs(h-k)<m},B.almostWhole=function(h,k){var m=Math.round(h);return m-k<=h&&m+k>=h},B.max=function(h){return h.reduce(function(k,m){return isNaN(m)?k:Math.max(k,m)},Number.NEGATIVE_INFINITY)},B.min=function(h){return h.reduce(function(k,m){return isNaN(m)?k:Math.min(k,m)},Number.POSITIVE_INFINITY)},B.sign=Math.sign?function(h){return Math.sign(h)}:function(h){return h=+h,h===0||isNaN(h)?h:h>0?1:-1},B.toRadians=function(h){return h*(Math.PI/180)},B.toDegrees=function(h){return h*(180/Math.PI)},B._decimalPlaces=function(h){if(!B.isFinite(h))return;for(var k=1,m=0;Math.round(h*k)/k!==h;)k*=10,m++;return m},B.getAngleFromPoint=function(h,k){var m=k.x-h.x,o=k.y-h.y,r=Math.sqrt(m*m+o*o),p=Math.atan2(o,m);return p<-.5*Math.PI&&(p+=2*Math.PI),{angle:p,distance:r}},B.distanceBetweenPoints=function(h,k){return Math.sqrt(Math.pow(k.x-h.x,2)+Math.pow(k.y-h.y,2))},B.aliasPixel=function(h){return h%2===0?0:.5},B._alignPixel=function(h,k,m){var o=h.currentDevicePixelRatio,r=m/2;return Math.round((k-r)*o)/o+r},B.splineCurve=function(h,k,m,o){var r=h.skip?k:h,p=k,s=m.skip?k:m,w=Math.sqrt(Math.pow(p.x-r.x,2)+Math.pow(p.y-r.y,2)),z=Math.sqrt(Math.pow(s.x-p.x,2)+Math.pow(s.y-p.y,2)),D=w/(w+z),M=z/(w+z);D=isNaN(D)?0:D,M=isNaN(M)?0:M;var P=o*D,T=o*M;return{previous:{x:p.x-P*(s.x-r.x),y:p.y-P*(s.y-r.y)},next:{x:p.x+T*(s.x-r.x),y:p.y+T*(s.y-r.y)}}},B.EPSILON=Number.EPSILON||1e-14,B.splineCurveMonotone=function(h){var k=(h||[]).map(function(Z){return{model:Z._model,deltaK:0,mK:0}}),m=k.length,o,r,p,s;for(o=0;o<m;++o){p=k[o];if(p.model.skip)continue;r=o>0?k[o-1]:null,s=o<m-1?k[o+1]:null;if(s&&!s.model.skip){var w=s.model.x-p.model.x;p.deltaK=w!==0?(s.model.y-p.model.y)/w:0}!r||r.model.skip?p.mK=p.deltaK:!s||s.model.skip?p.mK=r.deltaK:this.sign(r.deltaK)!==this.sign(p.deltaK)?p.mK=0:p.mK=(r.deltaK+p.deltaK)/2}var z,D,M,P;for(o=0;o<m-1;++o){p=k[o],s=k[o+1];if(p.model.skip||s.model.skip)continue;if(B.almostEquals(p.deltaK,0,this.EPSILON)){p.mK=s.mK=0;continue}z=p.mK/p.deltaK,D=s.mK/p.deltaK,P=Math.pow(z,2)+Math.pow(D,2);if(P<=9)continue;M=3/Math.sqrt(P),p.mK=z*M*p.deltaK,s.mK=D*M*p.deltaK}var T;for(o=0;o<m;++o){p=k[o];if(p.model.skip)continue;r=o>0?k[o-1]:null,s=o<m-1?k[o+1]:null,r&&!r.model.skip&&(T=(p.model.x-r.model.x)/3,p.model.controlPointPreviousX=p.model.x-T,p.model.controlPointPreviousY=p.model.y-T*p.mK),s&&!s.model.skip&&(T=(s.model.x-p.model.x)/3,p.model.controlPointNextX=p.model.x+T,p.model.controlPointNextY=p.model.y+T*p.mK)}},B.nextItem=function(h,k,m){return m?k>=h.length-1?h[0]:h[k+1]:k>=h.length-1?h[h.length-1]:h[k+1]},B.previousItem=function(h,k,m){return m?k<=0?h[h.length-1]:h[k-1]:k<=0?h[0]:h[k-1]},B.niceNum=function(h,k){var m=Math.floor(B.log10(h)),o=h/Math.pow(10,m),r;return k?o<1.5?r=1:o<3?r=2:o<7?r=5:r=10:o<=1?r=1:o<=2?r=2:o<=5?r=5:r=10,r*Math.pow(10,m)},B.requestAnimFrame=function(){return typeof window==="undefined"?function(h){h()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(h){return window.setTimeout(h,1e3/60)}}(),B.getRelativePosition=function(h,k){var m,o,r=h.originalEvent||h,p=h.target||h.srcElement,s=p.getBoundingClientRect(),w=r.touches;w&&w.length>0?(m=w[0].clientX,o=w[0].clientY):(m=r.clientX,o=r.clientY);var z=parseFloat(B.getStyle(p,"padding-left")),D=parseFloat(B.getStyle(p,"padding-top")),M=parseFloat(B.getStyle(p,"padding-right")),P=parseFloat(B.getStyle(p,"padding-bottom")),T=s.right-s.left-z-M,Z=s.bottom-s.top-D-P;return m=Math.round((m-s.left-z)/T*p.width/k.currentDevicePixelRatio),o=Math.round((o-s.top-D)/Z*p.height/k.currentDevicePixelRatio),{x:m,y:o}};function c(h,k,m){var o;return typeof h==="string"?(o=parseInt(h,10),h.indexOf("%")!==-1&&(o=o/100*k.parentNode[m])):o=h,o}function e(h){return h!==void 0&&h!==null&&h!=="none"}function g(h,k,m){var o=document.defaultView,r=B._getParentNode(h),p=o.getComputedStyle(h)[k],s=o.getComputedStyle(r)[k],w=e(p),z=e(s),D=Number.POSITIVE_INFINITY;return w||z?Math.min(w?c(p,h,m):D,z?c(s,r,m):D):"none"}B.getConstraintWidth=function(h){return g(h,"max-width","clientWidth")},B.getConstraintHeight=function(h){return g(h,"max-height","clientHeight")},B._calculatePadding=function(h,k,m){return k=B.getStyle(h,k),k.indexOf("%")>-1?m*parseInt(k,10)/100:parseInt(k,10)},B._getParentNode=function(h){var k=h.parentNode;return k&&k.toString()==="[object ShadowRoot]"&&(k=k.host),k},B.getMaximumWidth=function(h){var k=B._getParentNode(h);if(!k)return h.clientWidth;var m=k.clientWidth,o=B._calculatePadding(k,"padding-left",m),r=B._calculatePadding(k,"padding-right",m),p=m-o-r,s=B.getConstraintWidth(h);return isNaN(s)?p:Math.min(p,s)},B.getMaximumHeight=function(h){var k=B._getParentNode(h);if(!k)return h.clientHeight;var m=k.clientHeight,o=B._calculatePadding(k,"padding-top",m),r=B._calculatePadding(k,"padding-bottom",m),p=m-o-r,s=B.getConstraintHeight(h);return isNaN(s)?p:Math.min(p,s)},B.getStyle=function(h,k){return h.currentStyle?h.currentStyle[k]:document.defaultView.getComputedStyle(h,null).getPropertyValue(k)},B.retinaScale=function(h,k){var m=h.currentDevicePixelRatio=k||typeof window!=="undefined"&&window.devicePixelRatio||1;if(m===1)return;var o=h.canvas,r=h.height,p=h.width;o.height=r*m,o.width=p*m,h.ctx.scale(m,m),!o.style.height&&!o.style.width&&(o.style.height=r+"px",o.style.width=p+"px")},B.fontString=function(h,k,m){return k+" "+h+"px "+m},B.longestText=function(h,k,m,o){o=o||{};var r=o.data=o.data||{},p=o.garbageCollect=o.garbageCollect||[];o.font!==k&&(r=o.data={},p=o.garbageCollect=[],o.font=k),h.font=k;var s=0,w=m.length,z,D,M,P,T;for(z=0;z<w;z++){P=m[z];if(P!==void 0&&P!==null&&B.isArray(P)!==!0)s=B.measureText(h,r,p,s,P);else if(B.isArray(P))for(D=0,M=P.length;D<M;D++)T=P[D],T!==void 0&&T!==null&&!B.isArray(T)&&(s=B.measureText(h,r,p,s,T))}var Z=p.length/2;if(Z>m.length){for(z=0;z<Z;z++)delete r[p[z]];p.splice(0,Z)}return s},B.measureText=function(h,k,m,o,r){var p=k[r];return p||(p=k[r]=h.measureText(r).width,m.push(r)),p>o&&(o=p),o},B.numberOfLabelLines=function(h){var k=1;return B.each(h,function(m){B.isArray(m)&&(m.length>k&&(k=m.length))}),k},B.color=hb?function(h){return h instanceof CanvasGradient&&(h=ha.global.defaultColor),hb(h)}:function(h){return console.error("Color.js not found!"),h},B.getHoverColor=function(h){return h instanceof CanvasPattern||h instanceof CanvasGradient?h:B.color(h).saturate(.5).darken(.1).rgbString()}};function Fd(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function sg(c){this.options=c||{}}B.extend(sg.prototype,{formats:Fd,parse:Fd,format:Fd,add:Fd,diff:Fd,startOf:Fd,endOf:Fd,_create:function(c){return c}}),sg.override=function(c){B.extend(sg.prototype,c)};var qq=sg,Zh={_date:qq},tf={formatters:{values:function(c){return B.isArray(c)?c:""+c},linear:function(c,e,g){var h=g.length>3?g[2]-g[1]:g[1]-g[0];Math.abs(h)>1&&(c!==Math.floor(c)&&(h=c-Math.floor(c)));var k=B.log10(Math.abs(h)),m="";if(c!==0){var o=Math.max(Math.abs(g[0]),Math.abs(g[g.length-1]));if(o<1e-4){var r=B.log10(Math.abs(c)),p=Math.floor(r)-Math.floor(k);p=Math.max(Math.min(p,20),0),m=c.toExponential(p)}else{var s=-1*Math.floor(k);s=Math.max(Math.min(s,20),0),m=c.toFixed(s)}}else m="0";return m},logarithmic:function(c,e,g){var h=c/Math.pow(10,Math.floor(B.log10(c)));return c===0?"0":h===1||h===2||h===5||e===0||e===g.length-1?c.toExponential():""}}},Gd=B.isArray,uf=B.isNullOrUndef,jd=B.valueOrDefault,oe=B.valueAtIndexOrDefault;ha._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:tf.formatters.values,minor:{},major:{}}});function rq(c,e){for(var g=[],h=c.length/e,k=0,m=c.length;k<m;k+=h)g.push(c[Math.floor(k)]);return g}function xc(c,e,g){var h=c.getTicks().length,k=Math.min(e,h-1),m=c.getPixelForTick(k),o=c._startPixel,r=c._endPixel,p=1e-6,s;if(g){h===1?s=Math.max(m-o,r-m):e===0?s=(c.getPixelForTick(1)-m)/2:s=(m-c.getPixelForTick(k-1))/2,m+=k<e?s:-s;if(m<o-p||m>r+p)return}return m}function Hd(c,e){B.each(c,function(g){var h=g.gc,k=h.length/2,m;if(k>e){for(m=0;m<k;++m)delete g.data[h[m]];h.splice(0,k)}})}function Rk(c,e,g,h){var k=g.length,m=[],o=[],r=[],p=0,s=0,w,z,D,M,P,T,Z,ia,wa,Aa,Pa,Na,gb;for(w=0;w<k;++w){M=g[w].label,P=g[w].major?e.major:e.minor,c.font=T=P.string,Z=h[T]=h[T]||{data:{},gc:[]},ia=P.lineHeight,wa=Aa=0;if(!uf(M)&&!Gd(M))wa=B.measureText(c,Z.data,Z.gc,wa,M),Aa=ia;else if(Gd(M))for(z=0,D=M.length;z<D;++z)Pa=M[z],!uf(Pa)&&!Gd(Pa)&&(wa=B.measureText(c,Z.data,Z.gc,wa,Pa),Aa+=ia);m.push(wa),o.push(Aa),r.push(ia/2),p=Math.max(wa,p),s=Math.max(Aa,s)}Hd(h,k),Na=m.indexOf(p),gb=o.indexOf(s);function Qa(db){return{width:m[db]||0,height:o[db]||0,offset:r[db]||0}}return{first:Qa(0),last:Qa(k-1),widest:Qa(Na),highest:Qa(gb)}}function vf(c){return c.drawTicks?c.tickMarkLength:0}function tg(c){var e,g;return c.display?(e=B.options._parseFont(c),g=B.options.toPadding(c.padding),e.lineHeight+g.height):0}function _h(c,e){return B.extend(B.options._parseFont({fontFamily:jd(e.fontFamily,c.fontFamily),fontSize:jd(e.fontSize,c.fontSize),fontStyle:jd(e.fontStyle,c.fontStyle),lineHeight:jd(e.lineHeight,c.lineHeight)}),{color:B.options.resolve([e.fontColor,c.fontColor,ha.global.defaultFontColor])})}function $h(c){var e=_h(c,c.minor),g=c.major.enabled?_h(c,c.major):e;return{minor:e,major:g}}function ai(c){var e=[],g,h,k;for(h=0,k=c.length;h<k;++h)g=c[h],typeof g._index!=="undefined"&&e.push(g);return e}function Sk(c){var e=c.length,g,h;if(e<2)return!1;for(h=c[0],g=1;g<e;++g)if(c[g]-c[g-1]!==h)return!1;return h}function sq(c,e,g,h){var k=Sk(c),m=(e.length-1)/h,o,r,p,s;if(!k)return Math.max(m,1);for(o=B.math._factorize(k),p=0,s=o.length-1;p<s;p++){r=o[p];if(r>m)return r}return Math.max(m,1)}function tq(c){var e=[],g,h;for(g=0,h=c.length;g<h;g++)c[g].major&&e.push(g);return e}function uq(c,e,g){var h=0,k=e[0],m,o;for(g=Math.ceil(g),m=0;m<c.length;m++)o=c[m],m===k?(o._index=m,h++,k=e[h*g]):delete o.label}function ug(c,e,g,h){var k=jd(g,0),m=Math.min(jd(h,c.length),c.length),o=0,r,p,s,w;for(e=Math.ceil(e),h&&(r=h-g,e=r/Math.floor(r/e)),w=k;w<0;)o++,w=Math.round(k+o*e);for(p=Math.max(k,0);p<m;p++)s=c[p],p===w?(s._index=p,o++,w=Math.round(k+o*e)):delete s.label}var bi=sa.extend({zeroLineIndex:0,getPadding:function(){var c=this;return{left:c.paddingLeft||0,top:c.paddingTop||0,right:c.paddingRight||0,bottom:c.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var c=this.chart.data;return this.options.labels||(this.isHorizontal()?c.xLabels:c.yLabels)||c.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){B.callback(this.options.beforeUpdate,[this])},update:function(c,e,g){var h=this,k=h.options.ticks,m=k.sampleSize,o,r,p,s,w;h.beforeUpdate(),h.maxWidth=c,h.maxHeight=e,h.margins=B.extend({left:0,right:0,top:0,bottom:0},g),h._ticks=null,h.ticks=null,h._labelSizes=null,h._maxLabelLines=0,h.longestLabelWidth=0,h.longestTextCache=h.longestTextCache||{},h._gridLineItems=null,h._labelItems=null,h.beforeSetDimensions(),h.setDimensions(),h.afterSetDimensions(),h.beforeDataLimits(),h.determineDataLimits(),h.afterDataLimits(),h.beforeBuildTicks(),s=h.buildTicks()||[],s=h.afterBuildTicks(s)||s;if((!s||!s.length)&&h.ticks)for(s=[],o=0,r=h.ticks.length;o<r;++o)s.push({value:h.ticks[o],major:!1});return h._ticks=s,w=m<s.length,p=h._convertTicksToLabels(w?rq(s,m):s),h._configure(),h.beforeCalculateTickRotation(),h.calculateTickRotation(),h.afterCalculateTickRotation(),h.beforeFit(),h.fit(),h.afterFit(),h._ticksToDraw=k.display&&(k.autoSkip||k.source==="auto")?h._autoSkip(s):s,w&&(p=h._convertTicksToLabels(h._ticksToDraw)),h.ticks=p,h.afterUpdate(),h.minSize},_configure:function(){var c=this,e=c.options.ticks.reverse,g,h;c.isHorizontal()?(g=c.left,h=c.right):(g=c.top,h=c.bottom,e=!e),c._startPixel=g,c._endPixel=h,c._reversePixels=e,c._length=h-g},afterUpdate:function(){B.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){B.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var c=this;c.isHorizontal()?(c.width=c.maxWidth,c.left=0,c.right=c.width):(c.height=c.maxHeight,c.top=0,c.bottom=c.height),c.paddingLeft=0,c.paddingTop=0,c.paddingRight=0,c.paddingBottom=0},afterSetDimensions:function(){B.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){B.callback(this.options.beforeDataLimits,[this])},determineDataLimits:B.noop,afterDataLimits:function(){B.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){B.callback(this.options.beforeBuildTicks,[this])},buildTicks:B.noop,afterBuildTicks:function(c){var e=this;return Gd(c)&&c.length?B.callback(e.options.afterBuildTicks,[e,c]):(e.ticks=B.callback(e.options.afterBuildTicks,[e,e.ticks])||e.ticks,c)},beforeTickToLabelConversion:function(){B.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var c=this,e=c.options.ticks;c.ticks=c.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){B.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){B.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var c=this,e=c.options,g=e.ticks,h=c.getTicks().length,k=g.minRotation||0,m=g.maxRotation,o=k,r,p,s,w,z,D,M;if(!c._isVisible()||!g.display||k>=m||h<=1||!c.isHorizontal()){c.labelRotation=k;return}r=c._getLabelSizes(),p=r.widest.width,s=r.highest.height-r.highest.offset,w=Math.min(c.maxWidth,c.chart.width-p),z=e.offset?c.maxWidth/h:w/(h-1),p+6>z&&(z=w/(h-(e.offset?.5:1)),D=c.maxHeight-vf(e.gridLines)-g.padding-tg(e.scaleLabel),M=Math.sqrt(p*p+s*s),o=B.toDegrees(Math.min(Math.asin(Math.min((r.highest.height+6)/z,1)),Math.asin(Math.min(D/M,1))-Math.asin(s/M))),o=Math.max(k,Math.min(m,o))),c.labelRotation=o},afterCalculateTickRotation:function(){B.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){B.callback(this.options.beforeFit,[this])},fit:function(){var c=this,e=c.minSize={width:0,height:0},g=c.chart,h=c.options,k=h.ticks,m=h.scaleLabel,o=h.gridLines,r=c._isVisible(),p=h.position==="bottom",s=c.isHorizontal();s?e.width=c.maxWidth:r&&(e.width=vf(o)+tg(m)),s?r&&(e.height=vf(o)+tg(m)):e.height=c.maxHeight;if(k.display&&r){var w=$h(k),z=c._getLabelSizes(),D=z.first,M=z.last,P=z.widest,T=z.highest,Z=w.minor.lineHeight*.4,ia=k.padding;if(s){var wa=c.labelRotation!==0,Aa=B.toRadians(c.labelRotation),Pa=Math.cos(Aa),Na=Math.sin(Aa),gb=Na*P.width+Pa*(T.height-(wa?T.offset:0))+(wa?0:Z);e.height=Math.min(c.maxHeight,e.height+gb+ia);var Qa=c.getPixelForTick(0)-c.left,db=c.right-c.getPixelForTick(c.getTicks().length-1),sb,Pb;wa?(sb=p?Pa*D.width+Na*D.offset:Na*(D.height-D.offset),Pb=p?Na*(M.height-M.offset):Pa*M.width+Na*M.offset):(sb=D.width/2,Pb=M.width/2),c.paddingLeft=Math.max((sb-Qa)*c.width/(c.width-Qa),0)+3,c.paddingRight=Math.max((Pb-db)*c.width/(c.width-db),0)+3}else{var Kb=k.mirror?0:P.width+ia+Z;e.width=Math.min(c.maxWidth,e.width+Kb),c.paddingTop=D.height/2,c.paddingBottom=M.height/2}}c.handleMargins(),s?(c.width=c._length=g.width-c.margins.left-c.margins.right,c.height=e.height):(c.width=e.width,c.height=c._length=g.height-c.margins.top-c.margins.bottom)},handleMargins:function(){var c=this;c.margins&&(c.margins.left=Math.max(c.paddingLeft,c.margins.left),c.margins.top=Math.max(c.paddingTop,c.margins.top),c.margins.right=Math.max(c.paddingRight,c.margins.right),c.margins.bottom=Math.max(c.paddingBottom,c.margins.bottom))},afterFit:function(){B.callback(this.options.afterFit,[this])},isHorizontal:function(){var c=this.options.position;return c==="top"||c==="bottom"},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(c){if(uf(c))return NaN;if((typeof c==="number"||c instanceof Number)&&!isFinite(c))return NaN;if(c){if(this.isHorizontal()){if(c.x!==void 0)return this.getRightValue(c.x)}else if(c.y!==void 0)return this.getRightValue(c.y)}return c},_convertTicksToLabels:function(c){var e=this,g,h,k;for(e.ticks=c.map(function(m){return m.value}),e.beforeTickToLabelConversion(),g=e.convertTicksToLabels(c)||e.ticks,e.afterTickToLabelConversion(),h=0,k=c.length;h<k;++h)c[h].label=g[h];return g},_getLabelSizes:function(){var c=this,e=c._labelSizes;return e||(c._labelSizes=e=Rk(c.ctx,$h(c.options.ticks),c.getTicks(),c.longestTextCache),c.longestLabelWidth=e.widest.width),e},_parseValue:function(c){var e,g,h,k;return Gd(c)?(e=+this.getRightValue(c[0]),g=+this.getRightValue(c[1]),h=Math.min(e,g),k=Math.max(e,g)):(c=+this.getRightValue(c),e=void 0,g=c,h=c,k=c),{min:h,max:k,start:e,end:g}},_getScaleLabel:function(c){var e=this._parseValue(c);return e.start!==void 0?"["+e.start+", "+e.end+"]":+this.getRightValue(c)},getLabelForIndex:B.noop,getPixelForValue:B.noop,getValueForPixel:B.noop,getPixelForTick:function(c){var e=this,g=e.options.offset,h=e._ticks.length,k=1/Math.max(h-(g?0:1),1);return c<0||c>h-1?null:e.getPixelForDecimal(c*k+(g?k/2:0))},getPixelForDecimal:function(c){var e=this;return e._reversePixels&&(c=1-c),e._startPixel+c*e._length},getDecimalForPixel:function(c){var e=(c-this._startPixel)/this._length;return this._reversePixels?1-e:e},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var c=this,e=c.min,g=c.max;return c.beginAtZero?0:e<0&&g<0?g:e>0&&g>0?e:0},_autoSkip:function(c){var e=this,g=e.options.ticks,h=e._length,k=g.maxTicksLimit||h/e._tickSize()+1,m=g.major.enabled?tq(c):[],o=m.length,r=m[0],p=m[o-1],s,w,z,D;if(o>k)return uq(c,m,o/k),ai(c);z=sq(m,c,h,k);if(o>0){for(s=0,w=o-1;s<w;s++)ug(c,z,m[s],m[s+1]);return D=o>1?(p-r)/(o-1):null,ug(c,z,B.isNullOrUndef(D)?0:r-D,r),ug(c,z,p,B.isNullOrUndef(D)?c.length:p+D),ai(c)}return ug(c,z),ai(c)},_tickSize:function(){var c=this,e=c.options.ticks,g=B.toRadians(c.labelRotation),h=Math.abs(Math.cos(g)),k=Math.abs(Math.sin(g)),m=c._getLabelSizes(),o=e.autoSkipPadding||0,r=m?m.widest.width+o:0,p=m?m.highest.height+o:0;return c.isHorizontal()?p*h>r*k?r/h:p/k:p*k<r*h?p/h:r/k},_isVisible:function(){var c=this,e=c.chart,g=c.options.display,h,k,m;if(g!=="auto")return!!g;for(h=0,k=e.data.datasets.length;h<k;++h)if(e.isDatasetVisible(h)){m=e.getDatasetMeta(h);if(m.xAxisID===c.id||m.yAxisID===c.id)return!0}return!1},_computeGridLineItems:function(c){var e=this,g=e.chart,h=e.options,k=h.gridLines,m=h.position,o=k.offsetGridLines,r=e.isHorizontal(),p=e._ticksToDraw,s=p.length+(o?1:0),w=vf(k),z=[],D=k.drawBorder?oe(k.lineWidth,0,0):0,M=D/2,P=B._alignPixel,T=function(cb){return P(g,cb,D)},Z,ia,wa,Aa,Pa,Na,gb,Qa,db,sb,Pb,Kb,Gb,Sb,nd,yc,qe;for(m==="top"?(Z=T(e.bottom),gb=e.bottom-w,db=Z-M,Pb=T(c.top)+M,Gb=c.bottom):m==="bottom"?(Z=T(e.top),Pb=c.top,Gb=T(c.bottom)-M,gb=Z+M,db=e.top+w):m==="left"?(Z=T(e.right),Na=e.right-w,Qa=Z-M,sb=T(c.left)+M,Kb=c.right):(Z=T(e.left),sb=c.left,Kb=T(c.right)-M,Na=Z+M,Qa=e.left+w),ia=0;ia<s;++ia){wa=p[ia]||{};if(uf(wa.label)&&ia<p.length)continue;ia===e.zeroLineIndex&&h.offset===o?(Sb=k.zeroLineWidth,nd=k.zeroLineColor,yc=k.zeroLineBorderDash||[],qe=k.zeroLineBorderDashOffset||0):(Sb=oe(k.lineWidth,ia,1),nd=oe(k.color,ia,"rgba(0,0,0,0.1)"),yc=k.borderDash||[],qe=k.borderDashOffset||0),Aa=xc(e,wa._index||ia,o);if(Aa===void 0)continue;Pa=P(g,Aa,Sb),r?Na=Qa=sb=Kb=Pa:gb=db=Pb=Gb=Pa,z.push({tx1:Na,ty1:gb,tx2:Qa,ty2:db,x1:sb,y1:Pb,x2:Kb,y2:Gb,width:Sb,color:nd,borderDash:yc,borderDashOffset:qe})}return z.ticksLength=s,z.borderValue=Z,z},_computeLabelItems:function(){var c=this,e=c.options,g=e.ticks,h=e.position,k=g.mirror,m=c.isHorizontal(),o=c._ticksToDraw,r=$h(g),p=g.padding,s=vf(e.gridLines),w=-B.toRadians(c.labelRotation),z=[],D,M,P,T,Z,ia,wa,Aa,Pa,Na,gb,Qa;for(h==="top"?(ia=c.bottom-s-p,wa=w?"left":"center"):h==="bottom"?(ia=c.top+s+p,wa=w?"right":"center"):h==="left"?(Z=c.right-(k?0:s)-p,wa=k?"left":"right"):(Z=c.left+(k?0:s)+p,wa=k?"right":"left"),D=0,M=o.length;D<M;++D){P=o[D],T=P.label;if(uf(T))continue;Aa=c.getPixelForTick(P._index||D)+g.labelOffset,Pa=P.major?r.major:r.minor,Na=Pa.lineHeight,gb=Gd(T)?T.length:1,m?(Z=Aa,Qa=h==="top"?((w?1:.5)-gb)*Na:(w?0:.5)*Na):(ia=Aa,Qa=(1-gb)*Na/2),z.push({x:Z,y:ia,rotation:w,label:T,font:Pa,textOffset:Qa,textAlign:wa})}return z},_drawGrid:function(c){var e=this,g=e.options.gridLines;if(!g.display)return;var h=e.ctx,k=e.chart,m=B._alignPixel,o=g.drawBorder?oe(g.lineWidth,0,0):0,r=e._gridLineItems||(e._gridLineItems=e._computeGridLineItems(c)),p,s,w,z,D;for(w=0,z=r.length;w<z;++w)D=r[w],p=D.width,s=D.color,p&&s&&(h.save(),h.lineWidth=p,h.strokeStyle=s,h.setLineDash&&(h.setLineDash(D.borderDash),h.lineDashOffset=D.borderDashOffset),h.beginPath(),g.drawTicks&&(h.moveTo(D.tx1,D.ty1),h.lineTo(D.tx2,D.ty2)),g.drawOnChartArea&&(h.moveTo(D.x1,D.y1),h.lineTo(D.x2,D.y2)),h.stroke(),h.restore());if(o){var M=o,P=oe(g.lineWidth,r.ticksLength-1,1),T=r.borderValue,Z,ia,wa,Aa;e.isHorizontal()?(Z=m(k,e.left,M)-M/2,ia=m(k,e.right,P)+P/2,wa=Aa=T):(wa=m(k,e.top,M)-M/2,Aa=m(k,e.bottom,P)+P/2,Z=ia=T),h.lineWidth=o,h.strokeStyle=oe(g.color,0),h.beginPath(),h.moveTo(Z,wa),h.lineTo(ia,Aa),h.stroke()}},_drawLabels:function(){var c=this,e=c.options.ticks;if(!e.display)return;var g=c.ctx,h=c._labelItems||(c._labelItems=c._computeLabelItems()),k,m,o,r,p,s,w,z;for(k=0,o=h.length;k<o;++k){p=h[k],s=p.font,g.save(),g.translate(p.x,p.y),g.rotate(p.rotation),g.font=s.string,g.fillStyle=s.color,g.textBaseline="middle",g.textAlign=p.textAlign,w=p.label,z=p.textOffset;if(Gd(w))for(m=0,r=w.length;m<r;++m)g.fillText(""+w[m],0,z),z+=s.lineHeight;else g.fillText(w,0,z);g.restore()}},_drawTitle:function(){var c=this,e=c.ctx,g=c.options,h=g.scaleLabel;if(!h.display)return;var k=jd(h.fontColor,ha.global.defaultFontColor),m=B.options._parseFont(h),o=B.options.toPadding(h.padding),r=m.lineHeight/2,p=g.position,s=0,w,z;if(c.isHorizontal())w=c.left+c.width/2,z=p==="bottom"?c.bottom-r-o.bottom:c.top+r+o.top;else{var D=p==="left";w=D?c.left+r+o.top:c.right-r-o.top,z=c.top+c.height/2,s=D?-.5*Math.PI:.5*Math.PI}e.save(),e.translate(w,z),e.rotate(s),e.textAlign="center",e.textBaseline="middle",e.fillStyle=k,e.font=m.string,e.fillText(h.labelString,0,0),e.restore()},draw:function(c){var e=this;if(!e._isVisible())return;e._drawGrid(c),e._drawTitle(),e._drawLabels()},_layers:function(){var c=this,e=c.options,g=e.ticks&&e.ticks.z||0,h=e.gridLines&&e.gridLines.z||0;return!c._isVisible()||g===h||c.draw!==c._draw?[{z:g,draw:function(){c.draw.apply(c,arguments)}}]:[{z:h,draw:function(){c._drawGrid.apply(c,arguments),c._drawTitle.apply(c,arguments)}},{z:g,draw:function(){c._drawLabels.apply(c,arguments)}}]},_getMatchingVisibleMetas:function(c){var e=this,g=e.isHorizontal();return e.chart._getSortedVisibleDatasetMetas().filter(function(h){return(!c||h.type===c)&&(g?h.xAxisID===e.id:h.yAxisID===e.id)})}});bi.prototype._draw=bi.prototype.draw;var ec=bi,ci=B.isNullOrUndef,vq={position:"bottom"},Tk=ec.extend({determineDataLimits:function(){var c=this,e=c._getLabels(),g=c.options.ticks,h=g.min,k=g.max,m=0,o=e.length-1,r;h!==void 0&&(r=e.indexOf(h),r>=0&&(m=r)),k!==void 0&&(r=e.indexOf(k),r>=0&&(o=r)),c.minIndex=m,c.maxIndex=o,c.min=e[m],c.max=e[o]},buildTicks:function(){var c=this,e=c._getLabels(),g=c.minIndex,h=c.maxIndex;c.ticks=g===0&&h===e.length-1?e:e.slice(g,h+1)},getLabelForIndex:function(c,e){var g=this,h=g.chart;return h.getDatasetMeta(e).controller._getValueScaleId()===g.id?g.getRightValue(h.data.datasets[e].data[c]):g._getLabels()[c]},_configure:function(){var c=this,e=c.options.offset,g=c.ticks;ec.prototype._configure.call(c),c.isHorizontal()||(c._reversePixels=!c._reversePixels);if(!g)return;c._startValue=c.minIndex-(e?.5:0),c._valueRange=Math.max(g.length-(e?0:1),1)},getPixelForValue:function(c,e,g){var h=this,k,m,o;return!ci(e)&&!ci(g)&&(c=h.chart.data.datasets[g].data[e]),ci(c)||(k=h.isHorizontal()?c.x:c.y),(k!==void 0||c!==void 0&&isNaN(e))&&(m=h._getLabels(),c=B.valueOrDefault(k,c),o=m.indexOf(c),e=o!==-1?o:e,isNaN(e)&&(e=c)),h.getPixelForDecimal((e-h._startValue)/h._valueRange)},getPixelForTick:function(c){var e=this.ticks;return c<0||c>e.length-1?null:this.getPixelForValue(e[c],c+this.minIndex)},getValueForPixel:function(c){var e=this,g=Math.round(e._startValue+e.getDecimalForPixel(c)*e._valueRange);return Math.min(Math.max(g,0),e.ticks.length-1)},getBasePixel:function(){return this.bottom}}),wq=vq;Tk._defaults=wq;var xq=B.noop,Id=B.isNullOrUndef;function yq(c,e){var g=[],h=1e-14,k=c.stepSize,m=k||1,o=c.maxTicks-1,r=c.min,p=c.max,s=c.precision,w=e.min,z=e.max,D=B.niceNum((z-w)/o/m)*m,M,P,T,Z;if(D<h&&Id(r)&&Id(p))return[w,z];Z=Math.ceil(z/D)-Math.floor(w/D),Z>o&&(D=B.niceNum(Z*D/o/m)*m),k||Id(s)?M=Math.pow(10,B._decimalPlaces(D)):(M=Math.pow(10,s),D=Math.ceil(D*M)/M),P=Math.floor(w/D)*D,T=Math.ceil(z/D)*D,k&&(!Id(r)&&B.almostWhole(r/D,D/1e3)&&(P=r),!Id(p)&&B.almostWhole(p/D,D/1e3)&&(T=p)),Z=(T-P)/D,B.almostEquals(Z,Math.round(Z),D/1e3)?Z=Math.round(Z):Z=Math.ceil(Z),P=Math.round(P*M)/M,T=Math.round(T*M)/M,g.push(Id(r)?P:r);for(var ia=1;ia<Z;++ia)g.push(Math.round((P+ia*D)*M)/M);return g.push(Id(p)?T:p),g}var vg=ec.extend({getRightValue:function(c){return typeof c==="string"?+c:ec.prototype.getRightValue.call(this,c)},handleTickRangeOptions:function(){var c=this,e=c.options,g=e.ticks;if(g.beginAtZero){var h=B.sign(c.min),k=B.sign(c.max);h<0&&k<0?c.max=0:h>0&&k>0&&(c.min=0)}var m=g.min!==void 0||g.suggestedMin!==void 0,o=g.max!==void 0||g.suggestedMax!==void 0;g.min!==void 0?c.min=g.min:g.suggestedMin!==void 0&&(c.min===null?c.min=g.suggestedMin:c.min=Math.min(c.min,g.suggestedMin)),g.max!==void 0?c.max=g.max:g.suggestedMax!==void 0&&(c.max===null?c.max=g.suggestedMax:c.max=Math.max(c.max,g.suggestedMax)),m!==o&&(c.min>=c.max&&(m?c.max=c.min+1:c.min=c.max-1)),c.min===c.max&&(c.max++,g.beginAtZero||c.min--)},getTickLimit:function(){var c=this,e=c.options.ticks,g=e.stepSize,h=e.maxTicksLimit,k;return g?k=Math.ceil(c.max/g)-Math.floor(c.min/g)+1:(k=c._computeTickLimit(),h=h||11),h&&(k=Math.min(h,k)),k},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:xq,buildTicks:function(){var c=this,e=c.options,g=e.ticks,h=c.getTickLimit();h=Math.max(2,h);var k={maxTicks:h,min:g.min,max:g.max,precision:g.precision,stepSize:B.valueOrDefault(g.fixedStepSize,g.stepSize)},m=c.ticks=yq(k,c);c.handleDirectionalChanges(),c.max=B.max(m),c.min=B.min(m),g.reverse?(m.reverse(),c.start=c.max,c.end=c.min):(c.start=c.min,c.end=c.max)},convertTicksToLabels:function(){var c=this;c.ticksAsNumbers=c.ticks.slice(),c.zeroLineIndex=c.ticks.indexOf(0),ec.prototype.convertTicksToLabels.call(c)},_configure:function(){var c=this,e=c.getTicks(),g=c.min,h=c.max,k;ec.prototype._configure.call(c),c.options.offset&&e.length&&(k=(h-g)/Math.max(e.length-1,1)/2,g-=k,h+=k),c._startValue=g,c._endValue=h,c._valueRange=h-g}}),wg={position:"left",ticks:{callback:tf.formatters.linear}},zq=0,Aq=1;function Bq(c,e,g){var h=[g.type,e===void 0&&g.stack===void 0?g.index:"",g.stack].join(".");return c[h]===void 0&&(c[h]={pos:[],neg:[]}),c[h]}function Cq(c,e,g,h){var k=c.options,m=k.stacked,o=Bq(e,m,g),r=o.pos,p=o.neg,s=h.length,w,z;for(w=0;w<s;++w){z=c._parseValue(h[w]);if(isNaN(z.min)||isNaN(z.max)||g.data[w].hidden)continue;r[w]=r[w]||0,p[w]=p[w]||0,k.relativePoints?r[w]=100:z.min<0||z.max<0?p[w]+=z.min:r[w]+=z.max}}function Dq(c,e,g){var h=g.length,k,m;for(k=0;k<h;++k){m=c._parseValue(g[k]);if(isNaN(m.min)||isNaN(m.max)||e.data[k].hidden)continue;c.min=Math.min(c.min,m.min),c.max=Math.max(c.max,m.max)}}var Uk=vg.extend({determineDataLimits:function(){var c=this,e=c.options,g=c.chart,h=g.data.datasets,k=c._getMatchingVisibleMetas(),m=e.stacked,o={},r=k.length,p,s,w,z;c.min=Number.POSITIVE_INFINITY,c.max=Number.NEGATIVE_INFINITY;if(m===void 0)for(p=0;!m&&p<r;++p)s=k[p],m=s.stack!==void 0;for(p=0;p<r;++p)s=k[p],w=h[s.index].data,m?Cq(c,o,s,w):Dq(c,s,w);B.each(o,function(D){z=D.pos.concat(D.neg),c.min=Math.min(c.min,B.min(z)),c.max=Math.max(c.max,B.max(z))}),c.min=B.isFinite(c.min)&&!isNaN(c.min)?c.min:zq,c.max=B.isFinite(c.max)&&!isNaN(c.max)?c.max:Aq,c.handleTickRangeOptions()},_computeTickLimit:function(){var c=this,e;return c.isHorizontal()?Math.ceil(c.width/40):(e=B.options._parseFont(c.options.ticks),Math.ceil(c.height/e.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(c,e){return this._getScaleLabel(this.chart.data.datasets[e].data[c])},getPixelForValue:function(c){var e=this;return e.getPixelForDecimal((+e.getRightValue(c)-e._startValue)/e._valueRange)},getValueForPixel:function(c){return this._startValue+this.getDecimalForPixel(c)*this._valueRange},getPixelForTick:function(c){var e=this.ticksAsNumbers;return c<0||c>e.length-1?null:this.getPixelForValue(e[c])}}),Eq=wg;Uk._defaults=Eq;var di=B.valueOrDefault,$b=B.math.log10;function Vk(c,e){var g=[],h=di(c.min,Math.pow(10,Math.floor($b(e.min)))),k=Math.floor($b(e.max)),m=Math.ceil(e.max/Math.pow(10,k)),o,r;h===0?(o=Math.floor($b(e.minNotZero)),r=Math.floor(e.minNotZero/Math.pow(10,o)),g.push(h),h=r*Math.pow(10,o)):(o=Math.floor($b(h)),r=Math.floor(h/Math.pow(10,o)));var p=o<0?Math.pow(10,Math.abs(o)):1;do g.push(h),++r,r===10&&(r=1,++o,p=o>=0?1:p),h=Math.round(r*Math.pow(10,o)*p)/p;while(o<k||o===k&&r<m);var s=di(c.max,h);return g.push(s),g}var Wk={position:"left",ticks:{callback:tf.formatters.logarithmic}};function Jd(c,e){return B.isFinite(c)&&c>=0?c:e}var Kd=ec.extend({determineDataLimits:function(){var c=this,e=c.options,g=c.chart,h=g.data.datasets,k=c.isHorizontal();function m(Z){return k?Z.xAxisID===c.id:Z.yAxisID===c.id}var o,r,p,s,w,z;c.min=Number.POSITIVE_INFINITY,c.max=Number.NEGATIVE_INFINITY,c.minNotZero=Number.POSITIVE_INFINITY;var D=e.stacked;if(D===void 0)for(o=0;o<h.length;o++){r=g.getDatasetMeta(o);if(g.isDatasetVisible(o)&&m(r)&&r.stack!==void 0){D=!0;break}}if(e.stacked||D){var M={};for(o=0;o<h.length;o++){r=g.getDatasetMeta(o);var P=[r.type,e.stacked===void 0&&r.stack===void 0?o:"",r.stack].join(".");if(g.isDatasetVisible(o)&&m(r))for(M[P]===void 0&&(M[P]=[]),s=h[o].data,w=0,z=s.length;w<z;w++){var T=M[P];p=c._parseValue(s[w]);if(isNaN(p.min)||isNaN(p.max)||r.data[w].hidden||p.min<0||p.max<0)continue;T[w]=T[w]||0,T[w]+=p.max}}B.each(M,function(Z){if(Z.length>0){var ia=B.min(Z),wa=B.max(Z);c.min=Math.min(c.min,ia),c.max=Math.max(c.max,wa)}})}else for(o=0;o<h.length;o++){r=g.getDatasetMeta(o);if(g.isDatasetVisible(o)&&m(r))for(s=h[o].data,w=0,z=s.length;w<z;w++){p=c._parseValue(s[w]);if(isNaN(p.min)||isNaN(p.max)||r.data[w].hidden||p.min<0||p.max<0)continue;c.min=Math.min(p.min,c.min),c.max=Math.max(p.max,c.max),p.min!==0&&(c.minNotZero=Math.min(p.min,c.minNotZero))}}c.min=B.isFinite(c.min)?c.min:null,c.max=B.isFinite(c.max)?c.max:null,c.minNotZero=B.isFinite(c.minNotZero)?c.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var c=this,e=c.options.ticks,g=1,h=10;c.min=Jd(e.min,c.min),c.max=Jd(e.max,c.max),c.min===c.max&&(c.min!==0&&c.min!==null?(c.min=Math.pow(10,Math.floor($b(c.min))-1),c.max=Math.pow(10,Math.floor($b(c.max))+1)):(c.min=g,c.max=h)),c.min===null&&(c.min=Math.pow(10,Math.floor($b(c.max))-1)),c.max===null&&(c.max=c.min!==0?Math.pow(10,Math.floor($b(c.min))+1):h),c.minNotZero===null&&(c.min>0?c.minNotZero=c.min:c.max<1?c.minNotZero=Math.pow(10,Math.floor($b(c.max))):c.minNotZero=g)},buildTicks:function(){var c=this,e=c.options.ticks,g=!c.isHorizontal(),h={min:Jd(e.min),max:Jd(e.max)},k=c.ticks=Vk(h,c);c.max=B.max(k),c.min=B.min(k),e.reverse?(g=!g,c.start=c.max,c.end=c.min):(c.start=c.min,c.end=c.max),g&&k.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),ec.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(c,e){return this._getScaleLabel(this.chart.data.datasets[e].data[c])},getPixelForTick:function(c){var e=this.tickValues;return c<0||c>e.length-1?null:this.getPixelForValue(e[c])},_getFirstTickValue:function(c){var e=Math.floor($b(c)),g=Math.floor(c/Math.pow(10,e));return g*Math.pow(10,e)},_configure:function(){var c=this,e=c.min,g=0;ec.prototype._configure.call(c),e===0&&(e=c._getFirstTickValue(c.minNotZero),g=di(c.options.ticks.fontSize,ha.global.defaultFontSize)/c._length),c._startValue=$b(e),c._valueOffset=g,c._valueRange=($b(c.max)-$b(e))/(1-g)},getPixelForValue:function(c){var e=this,g=0;return c=+e.getRightValue(c),c>e.min&&c>0&&(g=($b(c)-e._startValue)/e._valueRange+e._valueOffset),e.getPixelForDecimal(g)},getValueForPixel:function(c){var e=this,g=e.getDecimalForPixel(c);return g===0&&e.min===0?0:Math.pow(10,e._startValue+(g-e._valueOffset)*e._valueRange)}}),xg=Wk;Kd._defaults=xg;var wf=B.valueOrDefault,kd=B.valueAtIndexOrDefault,ei=B.options.resolve,Xk={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:tf.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(c){return c}}};function fi(c){var e=c.ticks;return e.display&&c.display?wf(e.fontSize,ha.global.defaultFontSize)+e.backdropPaddingY*2:0}function Fq(c,e,g){return B.isArray(g)?{w:B.longestText(c,c.font,g),h:g.length*e}:{w:c.measureText(g).width,h:e}}function Yk(c,e,g,h,k){return c===h||c===k?{start:e-g/2,end:e+g/2}:c<h||c>k?{start:e-g,end:e}:{start:e,end:e+g}}function Gq(c){var e=B.options._parseFont(c.options.pointLabels),g={l:0,r:c.width,t:0,b:c.height-c.paddingTop},h={},k,m,o;c.ctx.font=e.string,c._pointLabelSizes=[];var r=c.chart.data.labels.length;for(k=0;k<r;k++){o=c.getPointPosition(k,c.drawingArea+5),m=Fq(c.ctx,e.lineHeight,c.pointLabels[k]),c._pointLabelSizes[k]=m;var p=c.getIndexAngle(k),s=B.toDegrees(p)%360,w=Yk(s,o.x,m.w,0,180),z=Yk(s,o.y,m.h,90,270);w.start<g.l&&(g.l=w.start,h.l=p),w.end>g.r&&(g.r=w.end,h.r=p),z.start<g.t&&(g.t=z.start,h.t=p),z.end>g.b&&(g.b=z.end,h.b=p)}c.setReductions(c.drawingArea,g,h)}function Hq(c){return c===0||c===180?"center":c<180?"left":"right"}function Iq(c,e,g,h){var k=g.y+h/2,m,o;if(B.isArray(e))for(m=0,o=e.length;m<o;++m)c.fillText(e[m],g.x,k),k+=h;else c.fillText(e,g.x,k)}function Jq(c,e,g){c===90||c===270?g.y-=e.h/2:(c>270||c<90)&&(g.y-=e.h)}function Kq(c){var e=c.ctx,g=c.options,h=g.pointLabels,k=fi(g),m=c.getDistanceFromCenterForValue(g.ticks.reverse?c.min:c.max),o=B.options._parseFont(h);e.save(),e.font=o.string,e.textBaseline="middle";for(var r=c.chart.data.labels.length-1;r>=0;r--){var p=r===0?k/2:0,s=c.getPointPosition(r,m+p+5),w=kd(h.fontColor,r,ha.global.defaultFontColor);e.fillStyle=w;var z=c.getIndexAngle(r),D=B.toDegrees(z);e.textAlign=Hq(D),Jq(D,c._pointLabelSizes[r],s),Iq(e,c.pointLabels[r],s,o.lineHeight)}e.restore()}function Lq(c,e,g,h){var k=c.ctx,m=e.circular,o=c.chart.data.labels.length,r=kd(e.color,h-1),p=kd(e.lineWidth,h-1),s;if(!m&&!o||!r||!p)return;k.save(),k.strokeStyle=r,k.lineWidth=p,k.setLineDash&&(k.setLineDash(e.borderDash||[]),k.lineDashOffset=e.borderDashOffset||0),k.beginPath();if(m)k.arc(c.xCenter,c.yCenter,g,0,Math.PI*2);else{s=c.getPointPosition(0,g),k.moveTo(s.x,s.y);for(var w=1;w<o;w++)s=c.getPointPosition(w,g),k.lineTo(s.x,s.y)}k.closePath(),k.stroke(),k.restore()}function yg(c){return B.isNumber(c)?c:0}var Zk=vg.extend({setDimensions:function(){var c=this;c.width=c.maxWidth,c.height=c.maxHeight,c.paddingTop=fi(c.options)/2,c.xCenter=Math.floor(c.width/2),c.yCenter=Math.floor((c.height-c.paddingTop)/2),c.drawingArea=Math.min(c.height-c.paddingTop,c.width)/2},determineDataLimits:function(){var c=this,e=c.chart,g=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;B.each(e.data.datasets,function(k,m){if(e.isDatasetVisible(m)){var o=e.getDatasetMeta(m);B.each(k.data,function(r,p){var s=+c.getRightValue(r);if(isNaN(s)||o.data[p].hidden)return;g=Math.min(s,g),h=Math.max(s,h)})}}),c.min=g===Number.POSITIVE_INFINITY?0:g,c.max=h===Number.NEGATIVE_INFINITY?0:h,c.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/fi(this.options))},convertTicksToLabels:function(){var c=this;vg.prototype.convertTicksToLabels.call(c),c.pointLabels=c.chart.data.labels.map(function(){var e=B.callback(c.options.pointLabels.callback,arguments,c);return e||e===0?e:""})},getLabelForIndex:function(c,e){return+this.getRightValue(this.chart.data.datasets[e].data[c])},fit:function(){var c=this,e=c.options;e.display&&e.pointLabels.display?Gq(c):c.setCenterPoint(0,0,0,0)},setReductions:function(c,e,g){var h=this,k=e.l/Math.sin(g.l),m=Math.max(e.r-h.width,0)/Math.sin(g.r),o=-e.t/Math.cos(g.t),r=-Math.max(e.b-(h.height-h.paddingTop),0)/Math.cos(g.b);k=yg(k),m=yg(m),o=yg(o),r=yg(r),h.drawingArea=Math.min(Math.floor(c-(k+m)/2),Math.floor(c-(o+r)/2)),h.setCenterPoint(k,m,o,r)},setCenterPoint:function(c,e,g,h){var k=this,m=k.width-e-k.drawingArea,o=c+k.drawingArea,r=g+k.drawingArea,p=k.height-k.paddingTop-h-k.drawingArea;k.xCenter=Math.floor((o+m)/2+k.left),k.yCenter=Math.floor((r+p)/2+k.top+k.paddingTop)},getIndexAngle:function(c){var e=this.chart,g=360/e.data.labels.length,h=e.options||{},k=h.startAngle||0,m=(c*g+k)%360;return(m<0?m+360:m)*Math.PI*2/360},getDistanceFromCenterForValue:function(c){var e=this;if(B.isNullOrUndef(c))return NaN;var g=e.drawingArea/(e.max-e.min);return e.options.ticks.reverse?(e.max-c)*g:(c-e.min)*g},getPointPosition:function(c,e){var g=this,h=g.getIndexAngle(c)-Math.PI/2;return{x:Math.cos(h)*e+g.xCenter,y:Math.sin(h)*e+g.yCenter}},getPointPositionForValue:function(c,e){return this.getPointPosition(c,this.getDistanceFromCenterForValue(e))},getBasePosition:function(c){var e=this,g=e.min,h=e.max;return e.getPointPositionForValue(c||0,e.beginAtZero?0:g<0&&h<0?h:g>0&&h>0?g:0)},_drawGrid:function(){var c=this,e=c.ctx,g=c.options,h=g.gridLines,k=g.angleLines,m=wf(k.lineWidth,h.lineWidth),o=wf(k.color,h.color),r,p,s;g.pointLabels.display&&Kq(c),h.display&&B.each(c.ticks,function(w,z){z!==0&&(p=c.getDistanceFromCenterForValue(c.ticksAsNumbers[z]),Lq(c,h,p,z))});if(k.display&&m&&o){for(e.save(),e.lineWidth=m,e.strokeStyle=o,e.setLineDash&&(e.setLineDash(ei([k.borderDash,h.borderDash,[]])),e.lineDashOffset=ei([k.borderDashOffset,h.borderDashOffset,0])),r=c.chart.data.labels.length-1;r>=0;r--)p=c.getDistanceFromCenterForValue(g.ticks.reverse?c.min:c.max),s=c.getPointPosition(r,p),e.beginPath(),e.moveTo(c.xCenter,c.yCenter),e.lineTo(s.x,s.y),e.stroke();e.restore()}},_drawLabels:function(){var c=this,e=c.ctx,g=c.options,h=g.ticks;if(!h.display)return;var k=c.getIndexAngle(0),m=B.options._parseFont(h),o=wf(h.fontColor,ha.global.defaultFontColor),r,p;e.save(),e.font=m.string,e.translate(c.xCenter,c.yCenter),e.rotate(k),e.textAlign="center",e.textBaseline="middle",B.each(c.ticks,function(s,w){if(w===0&&!h.reverse)return;r=c.getDistanceFromCenterForValue(c.ticksAsNumbers[w]),h.showLabelBackdrop&&(p=e.measureText(s).width,e.fillStyle=h.backdropColor,e.fillRect(-p/2-h.backdropPaddingX,-r-m.size/2-h.backdropPaddingY,p+h.backdropPaddingX*2,m.size+h.backdropPaddingY*2)),e.fillStyle=o,e.fillText(s,0,-r)}),e.restore()},_drawTitle:B.noop}),Mq=Xk;Zk._defaults=Mq;var gi=B._deprecated,_k=B.options.resolve,Nq=B.valueOrDefault,$k=Number.MIN_SAFE_INTEGER||-9007199254740991,hi=Number.MAX_SAFE_INTEGER||9007199254740991,zg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},fc=Object.keys(zg);function al(c,e){return c-e}function Oq(c){var e={},g=[],h,k,m;for(h=0,k=c.length;h<k;++h)m=c[h],e[m]||(e[m]=!0,g.push(m));return g}function bl(c){return B.valueOrDefault(c.time.min,c.ticks.min)}function Ag(c){return B.valueOrDefault(c.time.max,c.ticks.max)}function Pq(c,e,g,h){if(h==="linear"||!c.length)return[{time:e,pos:0},{time:g,pos:1}];var k=[],m=[e],o,r,p,s,w;for(o=0,r=c.length;o<r;++o)s=c[o],s>e&&s<g&&m.push(s);for(m.push(g),o=0,r=m.length;o<r;++o)w=m[o+1],p=m[o-1],s=m[o],(p===void 0||w===void 0||Math.round((w+p)/2)!==s)&&k.push({time:s,pos:o/(r-1)});return k}function Qq(c,e,g){for(var h=0,k=c.length-1,m,o,r;h>=0&&h<=k;){m=h+k>>1,o=c[m-1]||null,r=c[m];if(o)if(r[e]<g)h=m+1;else if(o[e]>g)k=m-1;else return{lo:o,hi:r};else return{lo:null,hi:r}}return{lo:r,hi:null}}function pe(c,e,g,h){var k=Qq(c,e,g),m=k.lo?k.hi?k.lo:c[c.length-2]:c[0],o=k.lo?k.hi?k.hi:c[c.length-1]:c[1],r=o[e]-m[e],p=r?(g-m[e])/r:0,s=(o[h]-m[h])*p;return m[h]+s}function xf(c,e){var g=c._adapter,h=c.options.time,k=h.parser,m=k||h.format,o=e;return typeof k==="function"&&(o=k(o)),B.isFinite(o)||(o=typeof m==="string"?g.parse(o,m):g.parse(o)),o!==null?+o:(!k&&typeof m==="function"&&(o=m(e),B.isFinite(o)||(o=g.parse(o))),o)}function Ic(c,e){if(B.isNullOrUndef(e))return null;var g=c.options.time,h=xf(c,c.getRightValue(e));return h===null?h:(g.round&&(h=+c._adapter.startOf(h,g.round)),h)}function cl(c,e,g,h){var k=fc.length,m,o,r;for(m=fc.indexOf(c);m<k-1;++m){o=zg[fc[m]],r=o.steps?o.steps:hi;if(o.common&&Math.ceil((g-e)/(r*o.size))<=h)return fc[m]}return fc[k-1]}function Rq(c,e,g,h,k){var m,o;for(m=fc.length-1;m>=fc.indexOf(g);m--){o=fc[m];if(zg[o].common&&c._adapter.diff(k,h,o)>=e-1)return o}return fc[g?fc.indexOf(g):0]}function Sq(c){for(var e=fc.indexOf(c)+1,g=fc.length;e<g;++e)if(zg[fc[e]].common)return fc[e]}function Tq(c,e,g,h){var k=c._adapter,m=c.options,o=m.time,r=o.unit||cl(o.minUnit,e,g,h),p=_k([o.stepSize,o.unitStepSize,1]),s=r==="week"?o.isoWeekday:!1,w=e,z=[],D;s&&(w=+k.startOf(w,"isoWeek",s)),w=+k.startOf(w,s?"day":r);if(k.diff(g,e,r)>1e5*p)throw e+" and "+g+" are too far apart with stepSize of "+p+" "+r;for(D=w;D<g;D=+k.add(D,p,r))z.push(D);return(D===g||m.bounds==="ticks")&&z.push(D),z}function Uq(c,e,g,h,k){var m=0,o=0,r,p;return k.offset&&e.length&&(r=pe(c,"time",e[0],"pos"),e.length===1?m=1-r:m=(pe(c,"time",e[1],"pos")-r)/2,p=pe(c,"time",e[e.length-1],"pos"),e.length===1?o=p:o=(p-pe(c,"time",e[e.length-2],"pos"))/2),{start:m,end:o,factor:1/(m+1+o)}}function Vq(c,e,g,h){var k=c._adapter,m=+k.startOf(e[0].value,h),o=e[e.length-1].value,r,p;for(r=m;r<=o;r=+k.add(r,1,h))p=g[r],p>=0&&(e[p].major=!0);return e}function ii(c,e,g){var h=[],k={},m=e.length,o,r;for(o=0;o<m;++o)r=e[o],k[r]=o,h.push({value:r,major:!1});return m===0||!g?h:Vq(c,h,k,g)}var Wq={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}},dl=ec.extend({initialize:function(){this.mergeTicksOptions(),ec.prototype.initialize.call(this)},update:function(){var c=this,e=c.options,g=e.time||(e.time={}),h=c._adapter=new Zh._date(e.adapters.date);return gi("time scale",g.format,"time.format","time.parser"),gi("time scale",g.min,"time.min","ticks.min"),gi("time scale",g.max,"time.max","ticks.max"),B.mergeIf(g.displayFormats,h.formats()),ec.prototype.update.apply(c,arguments)},getRightValue:function(c){return c&&c.t!==void 0&&(c=c.t),ec.prototype.getRightValue.call(this,c)},determineDataLimits:function(){var c=this,e=c.chart,g=c._adapter,h=c.options,k=h.time.unit||"day",m=hi,o=$k,r=[],p=[],s=[],w,z,D,M,P,T,Z,ia=c._getLabels();for(w=0,D=ia.length;w<D;++w)s.push(Ic(c,ia[w]));for(w=0,D=(e.data.datasets||[]).length;w<D;++w)if(e.isDatasetVisible(w)){P=e.data.datasets[w].data;if(B.isObject(P[0]))for(p[w]=[],z=0,M=P.length;z<M;++z)T=Ic(c,P[z]),r.push(T),p[w][z]=T;else p[w]=s.slice(0),Z||(r=r.concat(s),Z=!0)}else p[w]=[];s.length&&(m=Math.min(m,s[0]),o=Math.max(o,s[s.length-1])),r.length&&(r=D>1?Oq(r).sort(al):r.sort(al),m=Math.min(m,r[0]),o=Math.max(o,r[r.length-1])),m=Ic(c,bl(h))||m,o=Ic(c,Ag(h))||o,m=m===hi?+g.startOf(Date.now(),k):m,o=o===$k?+g.endOf(Date.now(),k)+1:o,c.min=Math.min(m,o),c.max=Math.max(m+1,o),c._table=[],c._timestamps={data:r,datasets:p,labels:s}},buildTicks:function(){var c=this,e=c.min,g=c.max,h=c.options,k=h.ticks,m=h.time,o=c._timestamps,r=[],p=c.getLabelCapacity(e),s=k.source,w=h.distribution,z,D,M;for(s==="data"||s==="auto"&&w==="series"?o=o.data:s==="labels"?o=o.labels:o=Tq(c,e,g,p),h.bounds==="ticks"&&o.length&&(e=o[0],g=o[o.length-1]),e=Ic(c,bl(h))||e,g=Ic(c,Ag(h))||g,z=0,D=o.length;z<D;++z)M=o[z],M>=e&&M<=g&&r.push(M);return c.min=e,c.max=g,c._unit=m.unit||(k.autoSkip?cl(m.minUnit,c.min,c.max,p):Rq(c,r.length,m.minUnit,c.min,c.max)),c._majorUnit=!k.major.enabled||c._unit==="year"?void 0:Sq(c._unit),c._table=Pq(c._timestamps.data,e,g,w),c._offsets=Uq(c._table,r,e,g,h),k.reverse&&r.reverse(),ii(c,r,c._majorUnit)},getLabelForIndex:function(c,e){var g=this,h=g._adapter,k=g.chart.data,m=g.options.time,o=k.labels&&c<k.labels.length?k.labels[c]:"",r=k.datasets[e].data[c];return B.isObject(r)&&(o=g.getRightValue(r)),m.tooltipFormat?h.format(xf(g,o),m.tooltipFormat):typeof o==="string"?o:h.format(xf(g,o),m.displayFormats.datetime)},tickFormatFunction:function(c,e,g,h){var k=this,m=k._adapter,o=k.options,r=o.time.displayFormats,p=r[k._unit],s=k._majorUnit,w=r[s],z=g[e],D=o.ticks,M=s&&w&&z&&z.major,P=m.format(c,h?h:M?w:p),T=M?D.major:D.minor,Z=_k([T.callback,T.userCallback,D.callback,D.userCallback]);return Z?Z(P,e,g):P},convertTicksToLabels:function(c){var e=[],g,h;for(g=0,h=c.length;g<h;++g)e.push(this.tickFormatFunction(c[g].value,g,c));return e},getPixelForOffset:function(c){var e=this,g=e._offsets,h=pe(e._table,"time",c,"pos");return e.getPixelForDecimal((g.start+h)*g.factor)},getPixelForValue:function(c,e,g){var h=this,k=null;e!==void 0&&g!==void 0&&(k=h._timestamps.datasets[g][e]),k===null&&(k=Ic(h,c));if(k!==null)return h.getPixelForOffset(k)},getPixelForTick:function(c){var e=this.getTicks();return c>=0&&c<e.length?this.getPixelForOffset(e[c].value):null},getValueForPixel:function(c){var e=this,g=e._offsets,h=e.getDecimalForPixel(c)/g.factor-g.end,k=pe(e._table,"pos",h,"time");return e._adapter._create(k)},_getLabelSize:function(c){var e=this,g=e.options.ticks,h=e.ctx.measureText(c).width,k=B.toRadians(e.isHorizontal()?g.maxRotation:g.minRotation),m=Math.cos(k),o=Math.sin(k),r=Nq(g.fontSize,ha.global.defaultFontSize);return{w:h*m+r*o,h:h*o+r*m}},getLabelWidth:function(c){return this._getLabelSize(c).w},getLabelCapacity:function(c){var e=this,g=e.options.time,h=g.displayFormats,k=h[g.unit]||h.millisecond,m=e.tickFormatFunction(c,0,ii(e,[c],e._majorUnit),k),o=e._getLabelSize(m),r=Math.floor(e.isHorizontal()?e.width/o.w:e.height/o.h);return e.options.offset&&r--,r>0?r:1}}),el=Wq;dl._defaults=el;var Xq={category:Tk,linear:Uk,logarithmic:Kd,radialLinear:Zk,time:dl},Yq={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Zh._date.override(typeof d==="function"?{_id:"moment",formats:function(){return Yq},parse:function(c,e){return typeof c==="string"&&typeof e==="string"?c=d(c,e):c instanceof d||(c=d(c)),c.isValid()?c.valueOf():null},format:function(c,e){return d(c).format(e)},add:function(c,e,g){return d(c).add(e,g).valueOf()},diff:function(c,e,g){return d(c).diff(d(e),g)},startOf:function(c,e,g){return c=d(c),e==="isoWeek"?c.isoWeekday(g).valueOf():c.startOf(e).valueOf()},endOf:function(c,e){return d(c).endOf(e).valueOf()},_create:function(c){return d(c)}}:{}),ha._set("global",{plugins:{filler:{propagate:!0}}});var Zq={dataset:function(c){var e=c.fill,g=c.chart,h=g.getDatasetMeta(e),k=h&&g.isDatasetVisible(e),m=k&&h.dataset._children||[],o=m.length||0;return o?function(r,p){return p<o&&m[p]._view||null}:null},boundary:function(c){var e=c.boundary,g=e?e.x:null,h=e?e.y:null;return B.isArray(e)?function(k,m){return e[m]}:function(k){return{x:g===null?k.x:g,y:h===null?k.y:h}}}};function ld(c,e,g){var h=c._model||{},k=h.fill,m;k===void 0&&(k=!!h.backgroundColor);if(k===!1||k===null)return!1;if(k===!0)return"origin";m=parseFloat(k,10);if(isFinite(m)&&Math.floor(m)===m)return(k[0]==="-"||k[0]==="+")&&(m=e+m),m===e||m<0||m>=g?!1:m;switch(k){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return k;default:return!1}}function fl(c){var e=c.el._model||{},g=c.el._scale||{},h=c.fill,k=null,m;if(isFinite(h))return null;h==="start"?k=e.scaleBottom===void 0?g.bottom:e.scaleBottom:h==="end"?k=e.scaleTop===void 0?g.top:e.scaleTop:e.scaleZero!==void 0?k=e.scaleZero:g.getBasePixel&&(k=g.getBasePixel());if(k!==void 0&&k!==null){if(k.x!==void 0&&k.y!==void 0)return k;if(B.isFinite(k))return m=g.isHorizontal(),{x:m?k:null,y:m?null:k}}return null}function _q(c){var e=c.el._scale,g=e.options,h=e.chart.data.labels.length,k=c.fill,m=[],o,r,p,s,w;if(!h)return null;for(o=g.ticks.reverse?e.max:e.min,r=g.ticks.reverse?e.min:e.max,p=e.getPointPositionForValue(0,o),s=0;s<h;++s)w=k==="start"||k==="end"?e.getPointPositionForValue(s,k==="start"?o:r):e.getBasePosition(s),g.gridLines.circular&&(w.cx=p.x,w.cy=p.y,w.angle=e.getIndexAngle(s)-Math.PI/2),m.push(w);return m}function $q(c){var e=c.el._scale||{};return e.getPointPositionForValue?_q(c):fl(c)}function ar(c,e,g){var h=c[e],k=h.fill,m=[e],o;if(!g)return k;for(;k!==!1&&m.indexOf(k)===-1;){if(!isFinite(k))return k;o=c[k];if(!o)return!1;if(o.visible)return k;m.push(k),k=o.fill}return!1}function la(c){var e=c.fill,g="dataset";return e===!1?null:(isFinite(e)||(g="boundary"),Zq[g](c))}function gl(c){return c&&!c.skip}function hl(c,e,g,h,k){var m,o,r,p;if(!h||!k)return;for(c.moveTo(e[0].x,e[0].y),m=1;m<h;++m)B.canvas.lineTo(c,e[m-1],e[m]);if(g[0].angle!==void 0){for(o=g[0].cx,r=g[0].cy,p=Math.sqrt(Math.pow(g[0].x-o,2)+Math.pow(g[0].y-r,2)),m=k-1;m>0;--m)c.arc(o,r,p,g[m].angle,g[m-1].angle,!0);return}for(c.lineTo(g[k-1].x,g[k-1].y),m=k-1;m>0;--m)B.canvas.lineTo(c,g[m],g[m-1],!0)}function il(c,e,g,h,k,m){var o=e.length,r=h.spanGaps,p=[],s=[],w=0,z=0,D,M,P,T,Z,ia,wa,Aa;for(c.beginPath(),D=0,M=o;D<M;++D)P=D%o,T=e[P]._view,Z=g(T,P,h),ia=gl(T),wa=gl(Z),m&&Aa===void 0&&ia&&(Aa=D+1,M=o+Aa),ia&&wa?(w=p.push(T),z=s.push(Z)):w&&z&&(r?(ia&&p.push(T),wa&&s.push(Z)):(hl(c,p,s,w,z),w=z=0,p=[],s=[]));hl(c,p,s,w,z),c.closePath(),c.fillStyle=k,c.fill()}var fb={id:"filler",afterDatasetsUpdate:function(c,e){var g=(c.data.datasets||[]).length,h=e.propagate,k=[],m,o,r,p;for(o=0;o<g;++o)m=c.getDatasetMeta(o),r=m.dataset,p=null,r&&r._model&&r instanceof dc.Line&&(p={visible:c.isDatasetVisible(o),fill:ld(r,o,g),chart:c,el:r}),m.$filler=p,k.push(p);for(o=0;o<g;++o){p=k[o];if(!p)continue;p.fill=ar(k,o,h),p.boundary=$q(p),p.mapper=la(p)}},beforeDatasetsDraw:function(c){var e=c._getSortedVisibleDatasetMetas(),g=c.ctx,h,k,m,o,r,p,s;for(k=e.length-1;k>=0;--k){h=e[k].$filler;if(!h||!h.visible)continue;m=h.el,o=m._view,r=m._children||[],p=h.mapper,s=o.backgroundColor||ha.global.defaultColor,p&&s&&r.length&&(B.canvas.clipArea(g,c.chartArea),il(g,r,p,o,s,m._loop),B.canvas.unclipArea(g))}}},Bg=B.rtl.getRtlAdapter,Wc=B.noop,Jc=B.valueOrDefault;ha._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(c,e){var g=e.datasetIndex,h=this.chart,k=h.getDatasetMeta(g);k.hidden=k.hidden===null?!h.data.datasets[g].hidden:null,h.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(c){var e=c.data.datasets,g=c.options.legend||{},h=g.labels&&g.labels.usePointStyle;return c._getSortedDatasetMetas().map(function(k){var m=k.controller.getStyle(h?0:void 0);return{text:e[k.index].label,fillStyle:m.backgroundColor,hidden:!c.isDatasetVisible(k.index),lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:m.borderWidth,strokeStyle:m.borderColor,pointStyle:m.pointStyle,rotation:m.rotation,datasetIndex:k.index}},this)}}},legendCallback:function(c){var e=document.createElement("ul"),g=c.data.datasets,h,k,m,o;for(e.setAttribute("class",c.id+"-legend"),h=0,k=g.length;h<k;h++)m=e.appendChild(document.createElement("li")),o=m.appendChild(document.createElement("span")),o.style.backgroundColor=g[h].backgroundColor,g[h].label&&m.appendChild(document.createTextNode(g[h].label));return e.outerHTML}});function ji(c,e){return c.usePointStyle&&c.boxWidth>e?e:c.boxWidth}var jl=sa.extend({initialize:function(c){var e=this;B.extend(e,c),e.legendHitBoxes=[],e._hoveredItem=null,e.doughnutMode=!1},beforeUpdate:Wc,update:function(c,e,g){var h=this;return h.beforeUpdate(),h.maxWidth=c,h.maxHeight=e,h.margins=g,h.beforeSetDimensions(),h.setDimensions(),h.afterSetDimensions(),h.beforeBuildLabels(),h.buildLabels(),h.afterBuildLabels(),h.beforeFit(),h.fit(),h.afterFit(),h.afterUpdate(),h.minSize},afterUpdate:Wc,beforeSetDimensions:Wc,setDimensions:function(){var c=this;c.isHorizontal()?(c.width=c.maxWidth,c.left=0,c.right=c.width):(c.height=c.maxHeight,c.top=0,c.bottom=c.height),c.paddingLeft=0,c.paddingTop=0,c.paddingRight=0,c.paddingBottom=0,c.minSize={width:0,height:0}},afterSetDimensions:Wc,beforeBuildLabels:Wc,buildLabels:function(){var c=this,e=c.options.labels||{},g=B.callback(e.generateLabels,[c.chart],c)||[];e.filter&&(g=g.filter(function(h){return e.filter(h,c.chart.data)})),c.options.reverse&&g.reverse(),c.legendItems=g},afterBuildLabels:Wc,beforeFit:Wc,fit:function(){var c=this,e=c.options,g=e.labels,h=e.display,k=c.ctx,m=B.options._parseFont(g),o=m.size,r=c.legendHitBoxes=[],p=c.minSize,s=c.isHorizontal();s?(p.width=c.maxWidth,p.height=h?10:0):(p.width=h?10:0,p.height=c.maxHeight);if(!h){c.width=p.width=c.height=p.height=0;return}k.font=m.string;if(s){var w=c.lineWidths=[0],z=0;k.textAlign="left",k.textBaseline="middle",B.each(c.legendItems,function(wa,Aa){var Pa=ji(g,o),Na=Pa+o/2+k.measureText(wa.text).width;(Aa===0||w[w.length-1]+Na+2*g.padding>p.width)&&(z+=o+g.padding,w[w.length-(Aa>0?0:1)]=0),r[Aa]={left:0,top:0,width:Na,height:o},w[w.length-1]+=Na+g.padding}),p.height+=z}else{var D=g.padding,M=c.columnWidths=[],P=c.columnHeights=[],T=g.padding,Z=0,ia=0;B.each(c.legendItems,function(wa,Aa){var Pa=ji(g,o),Na=Pa+o/2+k.measureText(wa.text).width;Aa>0&&ia+o+2*D>p.height&&(T+=Z+g.padding,M.push(Z),P.push(ia),Z=0,ia=0),Z=Math.max(Z,Na),ia+=o+D,r[Aa]={left:0,top:0,width:Na,height:o}}),T+=Z,M.push(Z),P.push(ia),p.width+=T}c.width=p.width,c.height=p.height},afterFit:Wc,isHorizontal:function(){return this.options.position==="top"||this.options.position==="bottom"},draw:function(){var c=this,e=c.options,g=e.labels,h=ha.global,k=h.defaultColor,m=h.elements.line,o=c.height,r=c.columnHeights,p=c.width,s=c.lineWidths;if(!e.display)return;var w=Bg(e.rtl,c.left,c.minSize.width),z=c.ctx,D=Jc(g.fontColor,h.defaultFontColor),M=B.options._parseFont(g),P=M.size,T;z.textAlign=w.textAlign("left"),z.textBaseline="middle",z.lineWidth=.5,z.strokeStyle=D,z.fillStyle=D,z.font=M.string;var Z=ji(g,P),ia=c.legendHitBoxes,wa=function(Qa,db,sb){if(isNaN(Z)||Z<=0)return;z.save();var Pb=Jc(sb.lineWidth,m.borderWidth);z.fillStyle=Jc(sb.fillStyle,k),z.lineCap=Jc(sb.lineCap,m.borderCapStyle),z.lineDashOffset=Jc(sb.lineDashOffset,m.borderDashOffset),z.lineJoin=Jc(sb.lineJoin,m.borderJoinStyle),z.lineWidth=Pb,z.strokeStyle=Jc(sb.strokeStyle,k),z.setLineDash&&z.setLineDash(Jc(sb.lineDash,m.borderDash));if(g&&g.usePointStyle){var Kb=Z*Math.SQRT2/2,Gb=w.xPlus(Qa,Z/2),Sb=db+P/2;B.canvas.drawPoint(z,sb.pointStyle,Kb,Gb,Sb,sb.rotation)}else z.fillRect(w.leftForLtr(Qa,Z),db,Z,P),Pb!==0&&z.strokeRect(w.leftForLtr(Qa,Z),db,Z,P);z.restore()},Aa=function(Qa,db,sb,Pb){var Kb=P/2,Gb=w.xPlus(Qa,Z+Kb),Sb=db+Kb;z.fillText(sb.text,Gb,Sb),sb.hidden&&(z.beginPath(),z.lineWidth=2,z.moveTo(Gb,Sb),z.lineTo(w.xPlus(Gb,Pb),Sb),z.stroke())},Pa=function(Qa,db){switch(e.align){case"start":return g.padding;case"end":return Qa-db;default:return(Qa-db+g.padding)/2}},Na=c.isHorizontal();Na?T={x:c.left+Pa(p,s[0]),y:c.top+g.padding,line:0}:T={x:c.left+g.padding,y:c.top+Pa(o,r[0]),line:0},B.rtl.overrideTextDirection(c.ctx,e.textDirection);var gb=P+g.padding;B.each(c.legendItems,function(Qa,db){var sb=z.measureText(Qa.text).width,Pb=Z+P/2+sb,Kb=T.x,Gb=T.y;w.setWidth(c.minSize.width),Na?db>0&&Kb+Pb+g.padding>c.left+c.minSize.width&&(Gb=T.y+=gb,T.line++,Kb=T.x=c.left+Pa(p,s[T.line])):db>0&&Gb+gb>c.top+c.minSize.height&&(Kb=T.x=Kb+c.columnWidths[T.line]+g.padding,T.line++,Gb=T.y=c.top+Pa(o,r[T.line]));var Sb=w.x(Kb);wa(Sb,Gb,Qa),ia[db].left=w.leftForLtr(Sb,ia[db].width),ia[db].top=Gb,Aa(Sb,Gb,Qa,sb),Na?T.x+=Pb+g.padding:T.y+=gb}),B.rtl.restoreTextDirection(c.ctx,e.textDirection)},_getLegendItemAt:function(c,e){var g=this,h,k,m;if(c>=g.left&&c<=g.right&&e>=g.top&&e<=g.bottom)for(m=g.legendHitBoxes,h=0;h<m.length;++h){k=m[h];if(c>=k.left&&c<=k.left+k.width&&e>=k.top&&e<=k.top+k.height)return g.legendItems[h]}return null},handleEvent:function(c){var e=this,g=e.options,h=c.type==="mouseup"?"click":c.type,k;if(h==="mousemove"){if(!g.onHover&&!g.onLeave)return}else if(h==="click"){if(!g.onClick)return}else return;k=e._getLegendItemAt(c.x,c.y),h==="click"?k&&g.onClick&&g.onClick.call(e,c.native,k):(g.onLeave&&k!==e._hoveredItem&&(e._hoveredItem&&g.onLeave.call(e,c.native,e._hoveredItem),e._hoveredItem=k),g.onHover&&k&&g.onHover.call(e,c.native,k))}});function kl(c,e){var g=new jl({ctx:c.ctx,options:e,chart:c});rc.configure(c,g,e),rc.addBox(c,g),c.legend=g}var br={id:"legend",_element:jl,beforeInit:function(c){var e=c.options.legend;e&&kl(c,e)},beforeUpdate:function(c){var e=c.options.legend,g=c.legend;e?(B.mergeIf(e,ha.global.legend),g?(rc.configure(c,g,e),g.options=e):kl(c,e)):g&&(rc.removeBox(c,g),delete c.legend)},afterEvent:function(c,e){var g=c.legend;g&&g.handleEvent(e)}},Xc=B.noop;ha._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Kc=sa.extend({initialize:function(c){var e=this;B.extend(e,c),e.legendHitBoxes=[]},beforeUpdate:Xc,update:function(c,e,g){var h=this;return h.beforeUpdate(),h.maxWidth=c,h.maxHeight=e,h.margins=g,h.beforeSetDimensions(),h.setDimensions(),h.afterSetDimensions(),h.beforeBuildLabels(),h.buildLabels(),h.afterBuildLabels(),h.beforeFit(),h.fit(),h.afterFit(),h.afterUpdate(),h.minSize},afterUpdate:Xc,beforeSetDimensions:Xc,setDimensions:function(){var c=this;c.isHorizontal()?(c.width=c.maxWidth,c.left=0,c.right=c.width):(c.height=c.maxHeight,c.top=0,c.bottom=c.height),c.paddingLeft=0,c.paddingTop=0,c.paddingRight=0,c.paddingBottom=0,c.minSize={width:0,height:0}},afterSetDimensions:Xc,beforeBuildLabels:Xc,buildLabels:Xc,afterBuildLabels:Xc,beforeFit:Xc,fit:function(){var c=this,e=c.options,g=c.minSize={},h=c.isHorizontal(),k,m;if(!e.display){c.width=g.width=c.height=g.height=0;return}k=B.isArray(e.text)?e.text.length:1,m=k*B.options._parseFont(e).lineHeight+e.padding*2,c.width=g.width=h?c.maxWidth:m,c.height=g.height=h?m:c.maxHeight},afterFit:Xc,isHorizontal:function(){var c=this.options.position;return c==="top"||c==="bottom"},draw:function(){var c=this,e=c.ctx,g=c.options;if(!g.display)return;var h=B.options._parseFont(g),k=h.lineHeight,m=k/2+g.padding,o=0,r=c.top,p=c.left,s=c.bottom,w=c.right,z,D,M;e.fillStyle=B.valueOrDefault(g.fontColor,ha.global.defaultFontColor),e.font=h.string,c.isHorizontal()?(D=p+(w-p)/2,M=r+m,z=w-p):(D=g.position==="left"?p+m:w-m,M=r+(s-r)/2,z=s-r,o=Math.PI*(g.position==="left"?-.5:.5)),e.save(),e.translate(D,M),e.rotate(o),e.textAlign="center",e.textBaseline="middle";var P=g.text;if(B.isArray(P))for(var T=0,Z=0;Z<P.length;++Z)e.fillText(P[Z],0,T,z),T+=k;else e.fillText(P,0,0,z);e.restore()}});function ll(c,e){var g=new Kc({ctx:c.ctx,options:e,chart:c});rc.configure(c,g,e),rc.addBox(c,g),c.titleBlock=g}var ml={id:"title",_element:Kc,beforeInit:function(c){var e=c.options.title;e&&ll(c,e)},beforeUpdate:function(c){var e=c.options.title,g=c.titleBlock;e?(B.mergeIf(e,ha.global.title),g?(rc.configure(c,g,e),g.options=e):ll(c,e)):g&&(rc.removeBox(c,g),delete c.titleBlock)}},md={},cr=fb,nl=br,dr=ml;md.filler=cr,md.legend=nl,md.title=dr,Ta.helpers=B,pq(),Ta._adapters=Zh,Ta.Animation=Lh,Ta.animationService=_b,Ta.controllers=Kk,Ta.DatasetController=Eb,Ta.defaults=ha,Ta.Element=sa,Ta.elements=dc,Ta.Interaction=he,Ta.layouts=rc,Ta.platform=le,Ta.plugins=ob,Ta.Scale=ec,Ta.scaleService=sf,Ta.Ticks=tf,Ta.Tooltip=me,Ta.helpers.each(Xq,function(c,e){Ta.scaleService.registerScaleType(e,c,c._defaults)});for(var ki in md)md.hasOwnProperty(ki)&&Ta.plugins.register(md[ki]);Ta.platform.initialize();var li=Ta;return typeof window!=="undefined"&&(window.Chart=Ta),Ta.Chart=Ta,Ta.Legend=md.legend._element,Ta.Title=md.title._element,Ta.pluginService=Ta.plugins,Ta.PluginBase=Ta.Element.extend({}),Ta.canvasHelpers=Ta.helpers.canvas,Ta.layoutService=Ta.layouts,Ta.LinearScaleBase=vg,Ta.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(c){Ta[c]=function(e,g){return new Ta(e,Ta.helpers.merge(g||{},{type:c.charAt(0).toLowerCase()+c.slice(1)}))}}),li})});var Rm=Gc((a,b)=>{!function(d,f){"function"==typeof define&&define.amd?define([],f):"object"==typeof b&&"undefined"!=typeof a?b.exports=f():d.Papa=f()}(a,function d(){"use strict";var f="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==f?f:{},i=!f.document&&!!f.postMessage,l=i&&/blob:/i.test((f.location||{}).protocol),q={},u=0,v={parse:function(O,R){var x=(R=R||{}).dynamicTyping||!1;na(x)&&(R.dynamicTypingFunction=x,x={});if(R.dynamicTyping=x,R.transform=!!na(R.transform)&&R.transform,R.worker&&v.WORKERS_SUPPORTED){var G=function(){if(!v.WORKERS_SUPPORTED)return!1;var K=(L=f.URL||f.webkitURL||null,da=d.toString(),v.BLOB_URL||(v.BLOB_URL=L.createObjectURL(new Blob(["(",da,")();"],{type:"text/javascript"})))),U=new f.Worker(K),L,da;return U.onmessage=ja,U.id=u++,q[U.id]=U}();return G.userStep=R.step,G.userChunk=R.chunk,G.userComplete=R.complete,G.userError=R.error,R.step=na(R.step),R.chunk=na(R.chunk),R.complete=na(R.complete),R.error=na(R.error),delete R.worker,void G.postMessage({input:O,config:R,workerId:G.id})}var F=null;return v.NODE_STREAM_INPUT,"string"==typeof O?F=R.download?new H(R):new J(R):!0===O.readable&&na(O.read)&&na(O.on)?F=new S(R):(f.File&&O instanceof File||O instanceof Object)&&(F=new Q(R)),F.stream(O)},unparse:function(O,R){var x=!1,G=!0,F=",",K=`\r
`,U='"',L=U+U,da=!1,ca=null,Ca=!1;!function(){if("object"!=typeof R)return;"string"!=typeof R.delimiter||v.BAD_DELIMITERS.filter(function(oa){return-1!==R.delimiter.indexOf(oa)}).length||(F=R.delimiter),("boolean"==typeof R.quotes||"function"==typeof R.quotes||Array.isArray(R.quotes))&&(x=R.quotes),"boolean"!=typeof R.skipEmptyLines&&"string"!=typeof R.skipEmptyLines||(da=R.skipEmptyLines),"string"==typeof R.newline&&(K=R.newline),"string"==typeof R.quoteChar&&(U=R.quoteChar),"boolean"==typeof R.header&&(G=R.header);if(Array.isArray(R.columns)){if(0===R.columns.length)throw new Error("Option columns is empty");ca=R.columns}void 0!==R.escapeChar&&(L=R.escapeChar+U),"boolean"==typeof R.escapeFormulae&&(Ca=R.escapeFormulae)}();var _=new RegExp(X(U),"g");"string"==typeof O&&(O=JSON.parse(O));if(Array.isArray(O)){if(!O.length||Array.isArray(O[0]))return ra(null,O,da);if("object"==typeof O[0])return ra(ca||xa(O[0]),O,da)}else if("object"==typeof O)return"string"==typeof O.data&&(O.data=JSON.parse(O.data)),Array.isArray(O.data)&&(O.fields||(O.fields=O.meta&&O.meta.fields),O.fields||(O.fields=Array.isArray(O.data[0])?O.fields:xa(O.data[0])),Array.isArray(O.data[0])||"object"==typeof O.data[0]||(O.data=[O.data])),ra(O.fields||[],O.data||[],da);throw new Error("Unable to serialize unrecognized input");function xa(oa){if("object"!=typeof oa)return[];var ya=[];for(var ma in oa)ya.push(ma);return ya}function ra(oa,ya,ma){var ib="";"string"==typeof oa&&(oa=JSON.parse(oa)),"string"==typeof ya&&(ya=JSON.parse(ya));var kb=Array.isArray(oa)&&0<oa.length,lb=!Array.isArray(ya[0]);if(kb&&G){for(var Da=0;Da<oa.length;Da++)0<Da&&(ib+=F),ib+=ea(oa[Da],Da);0<ya.length&&(ib+=K)}for(var Ma=0;Ma<ya.length;Ma++){var eb=kb?oa.length:ya[Ma].length,jb=!1,pa=kb?0===Object.keys(ya[Ma]).length:0===ya[Ma].length;if(ma&&!kb&&(jb="greedy"===ma?""===ya[Ma].join("").trim():1===ya[Ma].length&&0===ya[Ma][0].length),"greedy"===ma&&kb){for(var za=[],Ra=0;Ra<eb;Ra++){var ua=lb?oa[Ra]:Ra;za.push(ya[Ma][ua])}jb=""===za.join("").trim()}if(!jb){for(var Ga=0;Ga<eb;Ga++){0<Ga&&!pa&&(ib+=F);var hb=kb&&lb?oa[Ga]:Ga;ib+=ea(ya[Ma][hb],Ga)}Ma<ya.length-1&&(!ma||0<eb&&!pa)&&(ib+=K)}}return ib}function ea(oa,ya){if(null==oa)return"";if(oa.constructor===Date)return JSON.stringify(oa).slice(1,25);!0===Ca&&"string"==typeof oa&&null!==oa.match(/^[=+\-@].*$/)&&(oa="'"+oa);var ma=oa.toString().replace(_,L),ib="boolean"==typeof x&&x||"function"==typeof x&&x(oa,ya)||Array.isArray(x)&&x[ya]||function(kb,lb){for(var Da=0;Da<lb.length;Da++)if(-1<kb.indexOf(lb[Da]))return!0;return!1}(ma,v.BAD_DELIMITERS)||-1<ma.indexOf(F)||" "===ma.charAt(0)||" "===ma.charAt(ma.length-1);return ib?U+ma+U:ma}}};if(v.RECORD_SEP=String.fromCharCode(30),v.UNIT_SEP=String.fromCharCode(31),v.BYTE_ORDER_MARK="",v.BAD_DELIMITERS=["\r",`
`,'"',v.BYTE_ORDER_MARK],v.WORKERS_SUPPORTED=!i&&!!f.Worker,v.NODE_STREAM_INPUT=1,v.LocalChunkSize=10485760,v.RemoteChunkSize=5242880,v.DefaultDelimiter=",",v.Parser=ga,v.ParserHandle=aa,v.NetworkStreamer=H,v.FileStreamer=Q,v.StringStreamer=J,v.ReadableStreamStreamer=S,f.jQuery){var A=f.jQuery;A.fn.parse=function(O){var R=O.config||{},x=[];return this.each(function(K){if(!("INPUT"===A(this).prop("tagName").toUpperCase()&&"file"===A(this).attr("type").toLowerCase()&&f.FileReader)||!this.files||0===this.files.length)return!0;for(var U=0;U<this.files.length;U++)x.push({file:this.files[U],inputElem:this,instanceConfig:A.extend({},R)})}),G(),this;function G(){if(0!==x.length){var K,U,L,da,ca=x[0];if(na(O.before)){var Ca=O.before(ca.file,ca.inputElem);if("object"==typeof Ca){if("abort"===Ca.action)return K="AbortError",U=ca.file,L=ca.inputElem,da=Ca.reason,void(na(O.error)&&O.error({name:K},U,L,da));if("skip"===Ca.action)return void F();"object"==typeof Ca.config&&(ca.instanceConfig=A.extend(ca.instanceConfig,Ca.config))}else if("skip"===Ca)return void F()}var _=ca.instanceConfig.complete;ca.instanceConfig.complete=function(xa){na(_)&&_(xa,ca.file,ca.inputElem),F()},v.parse(ca.file,ca.instanceConfig)}else na(O.complete)&&O.complete()}function F(){x.splice(0,1),G()}}}function E(O){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(R){var x=ta(R);x.chunkSize=parseInt(x.chunkSize),R.step||R.chunk||(x.chunkSize=null),this._handle=new aa(x),(this._handle.streamer=this)._config=x}.call(this,O),this.parseChunk=function(R,x){if(this.isFirstChunk&&na(this._config.beforeFirstChunk)){var G=this._config.beforeFirstChunk(R);void 0!==G&&(R=G)}this.isFirstChunk=!1,this._halted=!1;var F=this._partialLine+R;this._partialLine="";var K=this._handle.parse(F,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var U=K.meta.cursor;this._finished||(this._partialLine=F.substring(U-this._baseIndex),this._baseIndex=U),K&&K.data&&(this._rowCount+=K.data.length);var L=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(l)f.postMessage({results:K,workerId:v.WORKER_ID,finished:L});else if(na(this._config.chunk)&&!x){if(this._config.chunk(K,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);K=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(K.data),this._completeResults.errors=this._completeResults.errors.concat(K.errors),this._completeResults.meta=K.meta),this._completed||!L||!na(this._config.complete)||K&&K.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),L||K&&K.meta.paused||this._nextChunk(),K}this._halted=!0},this._sendError=function(R){na(this._config.error)?this._config.error(R):l&&this._config.error&&f.postMessage({workerId:v.WORKER_ID,error:R,finished:!1})}}function H(O){var R;(O=O||{}).chunkSize||(O.chunkSize=v.RemoteChunkSize),E.call(this,O),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(x){this._input=x,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(R=new XMLHttpRequest(),this._config.withCredentials&&(R.withCredentials=this._config.withCredentials),i||(R.onload=va(this._chunkLoaded,this),R.onerror=va(this._chunkError,this)),R.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var x=this._config.downloadRequestHeaders;for(var G in x)R.setRequestHeader(G,x[G])}if(this._config.chunkSize){var F=this._start+this._config.chunkSize-1;R.setRequestHeader("Range","bytes="+this._start+"-"+F)}try{R.send(this._config.downloadRequestBody)}catch(K){this._chunkError(K.message)}i&&0===R.status&&this._chunkError()}},this._chunkLoaded=function(){4===R.readyState&&(R.status<200||400<=R.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:R.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(x){var G=x.getResponseHeader("Content-Range");return null===G?-1:parseInt(G.substring(G.lastIndexOf("/")+1))}(R),this.parseChunk(R.responseText)))},this._chunkError=function(x){var G=R.statusText||x;this._sendError(new Error(G))}}function Q(O){var R,x;(O=O||{}).chunkSize||(O.chunkSize=v.LocalChunkSize),E.call(this,O);var G="undefined"!=typeof FileReader;this.stream=function(F){this._input=F,x=F.slice||F.webkitSlice||F.mozSlice,G?((R=new FileReader()).onload=va(this._chunkLoaded,this),R.onerror=va(this._chunkError,this)):R=new FileReaderSync(),this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var F=this._input;if(this._config.chunkSize){var K=Math.min(this._start+this._config.chunkSize,this._input.size);F=x.call(F,this._start,K)}var U=R.readAsText(F,this._config.encoding);G||this._chunkLoaded({target:{result:U}})},this._chunkLoaded=function(F){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(F.target.result)},this._chunkError=function(){this._sendError(R.error)}}function J(O){var R;E.call(this,O=O||{}),this.stream=function(x){return R=x,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var x,G=this._config.chunkSize;return G?(x=R.substring(0,G),R=R.substring(G)):(x=R,R=""),this._finished=!R,this.parseChunk(x)}}}function S(O){E.call(this,O=O||{});var R=[],x=!0,G=!1;this.pause=function(){E.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){E.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(F){this._input=F,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){G&&1===R.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),R.length?this.parseChunk(R.shift()):x=!0},this._streamData=va(function(F){try{R.push("string"==typeof F?F:F.toString(this._config.encoding)),x&&(x=!1,this._checkIsFinished(),this.parseChunk(R.shift()))}catch(K){this._streamError(K)}},this),this._streamError=va(function(F){this._streamCleanUp(),this._sendError(F)},this),this._streamEnd=va(function(){this._streamCleanUp(),G=!0,this._streamData("")},this),this._streamCleanUp=va(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function aa(O){var R,x,G,F=Math.pow(2,53),K=-F,U=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,L=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,da=this,ca=0,Ca=0,_=!1,xa=!1,ra=[],ea={data:[],errors:[],meta:{}};if(na(O.step)){var oa=O.step;O.step=function(Da){if(ea=Da,ib())ma();else{if(ma(),0===ea.data.length)return;ca+=Da.data.length,O.preview&&ca>O.preview?x.abort():(ea.data=ea.data[0],oa(ea,da))}}}function ya(Da){return"greedy"===O.skipEmptyLines?""===Da.join("").trim():1===Da.length&&0===Da[0].length}function ma(){if(ea&&G&&(lb("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+v.DefaultDelimiter+"'"),G=!1),O.skipEmptyLines)for(var Da=0;Da<ea.data.length;Da++)ya(ea.data[Da])&&ea.data.splice(Da--,1);return ib()&&function(){if(!ea)return;function Ma(jb,pa){na(O.transformHeader)&&(jb=O.transformHeader(jb,pa)),ra.push(jb)}if(Array.isArray(ea.data[0])){for(var eb=0;ib()&&eb<ea.data.length;eb++)ea.data[eb].forEach(Ma);ea.data.splice(0,1)}else ea.data.forEach(Ma)}(),function(){if(!ea||!O.header&&!O.dynamicTyping&&!O.transform)return ea;function Ma(jb,pa){var za,Ra=O.header?{}:[];for(za=0;za<jb.length;za++){var ua=za,Ga=jb[za];O.header&&(ua=za>=ra.length?"__parsed_extra":ra[za]),O.transform&&(Ga=O.transform(Ga,ua)),Ga=kb(ua,Ga),"__parsed_extra"===ua?(Ra[ua]=Ra[ua]||[],Ra[ua].push(Ga)):Ra[ua]=Ga}return O.header&&(za>ra.length?lb("FieldMismatch","TooManyFields","Too many fields: expected "+ra.length+" fields but parsed "+za,Ca+pa):za<ra.length&&lb("FieldMismatch","TooFewFields","Too few fields: expected "+ra.length+" fields but parsed "+za,Ca+pa)),Ra}var eb=1;return!ea.data.length||Array.isArray(ea.data[0])?(ea.data=ea.data.map(Ma),eb=ea.data.length):ea.data=Ma(ea.data,0),O.header&&ea.meta&&(ea.meta.fields=ra),Ca+=eb,ea}()}function ib(){return O.header&&0===ra.length}function kb(Da,Ma){return eb=Da,O.dynamicTypingFunction&&void 0===O.dynamicTyping[eb]&&(O.dynamicTyping[eb]=O.dynamicTypingFunction(eb)),!0===(O.dynamicTyping[eb]||O.dynamicTyping)?"true"===Ma||"TRUE"===Ma||"false"!==Ma&&"FALSE"!==Ma&&(function(jb){if(U.test(jb)){var pa=parseFloat(jb);if(K<pa&&pa<F)return!0}return!1}(Ma)?parseFloat(Ma):L.test(Ma)?new Date(Ma):""===Ma?null:Ma):Ma;var eb}function lb(Da,Ma,eb,jb){var pa={type:Da,code:Ma,message:eb};void 0!==jb&&(pa.row=jb),ea.errors.push(pa)}this.parse=function(Da,Ma,eb){var jb=O.quoteChar||'"';if(O.newline||(O.newline=function(Ra,ua){Ra=Ra.substring(0,1048576);var Ga=new RegExp(X(ua)+"([^]*?)"+X(ua),"gm"),hb=(Ra=Ra.replace(Ga,"")).split("\r"),pb=Ra.split(`
`),Ea=1<pb.length&&pb[0].length<hb[0].length;if(1===hb.length||Ea)return`
`;for(var Ja=0,Za=0;Za<hb.length;Za++)`
`===hb[Za][0]&&Ja++;return Ja>=hb.length/2?`\r
`:"\r"}(Da,jb)),G=!1,O.delimiter)na(O.delimiter)&&(O.delimiter=O.delimiter(Da),ea.meta.delimiter=O.delimiter);else{var pa=function(Ra,ua,Ga,hb,pb){var Ea,Ja,Za,Zb;pb=pb||[",","	","|",";",v.RECORD_SEP,v.UNIT_SEP];for(var _a=0;_a<pb.length;_a++){var qb=pb[_a],Ba=0,Ua=0,W=0;Za=void 0;for(var N=new ga({comments:hb,delimiter:qb,newline:ua,preview:10}).parse(Ra),Y=0;Y<N.data.length;Y++)if(Ga&&ya(N.data[Y]))W++;else{var ba=N.data[Y].length;Ua+=ba,void 0!==Za?0<ba&&(Ba+=Math.abs(ba-Za),Za=ba):Za=ba}0<N.data.length&&(Ua/=N.data.length-W),(void 0===Ja||Ba<=Ja)&&(void 0===Zb||Zb<Ua)&&1.99<Ua&&(Ja=Ba,Ea=qb,Zb=Ua)}return{successful:!!(O.delimiter=Ea),bestDelimiter:Ea}}(Da,O.newline,O.skipEmptyLines,O.comments,O.delimitersToGuess);pa.successful?O.delimiter=pa.bestDelimiter:(G=!0,O.delimiter=v.DefaultDelimiter),ea.meta.delimiter=O.delimiter}var za=ta(O);return O.preview&&O.header&&za.preview++,R=Da,x=new ga(za),ea=x.parse(R,Ma,eb),ma(),_?{meta:{paused:!0}}:ea||{meta:{paused:!1}}},this.paused=function(){return _},this.pause=function(){_=!0,x.abort(),R=na(O.chunk)?"":R.substring(x.getCharIndex())},this.resume=function(){da.streamer._halted?(_=!1,da.streamer.parseChunk(R,!0)):setTimeout(da.resume,3)},this.aborted=function(){return xa},this.abort=function(){xa=!0,x.abort(),ea.meta.aborted=!0,na(O.complete)&&O.complete(ea),R=""}}function X(O){return O.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ga(O){var R,x=(O=O||{}).delimiter,G=O.newline,F=O.comments,K=O.step,U=O.preview,L=O.fastMode,da=R=void 0===O.quoteChar?'"':O.quoteChar;if(void 0!==O.escapeChar&&(da=O.escapeChar),("string"!=typeof x||-1<v.BAD_DELIMITERS.indexOf(x))&&(x=","),F===x)throw new Error("Comment character same as delimiter");!0===F?F="#":("string"!=typeof F||-1<v.BAD_DELIMITERS.indexOf(F))&&(F=!1),`
`!==G&&"\r"!==G&&`\r
`!==G&&(G=`
`);var ca=0,Ca=!1;this.parse=function(_,xa,ra){if("string"!=typeof _)throw new Error("Input must be a string");var ea=_.length,oa=x.length,ya=G.length,ma=F.length,ib=na(K),kb=[],lb=[],Da=[],Ma=ca=0;if(!_)return _a();if(L||!1!==L&&-1===_.indexOf(R)){for(var eb=_.split(G),jb=0;jb<eb.length;jb++){if(Da=eb[jb],ca+=Da.length,jb!==eb.length-1)ca+=G.length;else if(ra)return _a();if(!F||Da.substring(0,ma)!==F){if(ib){if(kb=[],Ea(Da.split(x)),qb(),Ca)return _a()}else Ea(Da.split(x));if(U&&U<=jb)return kb=kb.slice(0,U),_a(!0)}}return _a()}for(var pa=_.indexOf(x,ca),za=_.indexOf(G,ca),Ra=new RegExp(X(da)+X(R),"g"),ua=_.indexOf(R,ca);;)if(_[ca]!==R)if(F&&0===Da.length&&_.substring(ca,ca+ma)===F){if(-1===za)return _a();ca=za+ya,za=_.indexOf(G,ca),pa=_.indexOf(x,ca)}else{if(-1!==pa&&(pa<za||-1===za)){if(!(pa<ua)){Da.push(_.substring(ca,pa)),ca=pa+oa,pa=_.indexOf(x,ca);continue}var Ga=Ba(pa,ua,za);if(Ga&&void 0!==Ga.nextDelim){pa=Ga.nextDelim,ua=Ga.quoteSearch,Da.push(_.substring(ca,pa)),ca=pa+oa,pa=_.indexOf(x,ca);continue}}if(-1===za)break;if(Da.push(_.substring(ca,za)),Zb(za+ya),ib&&(qb(),Ca))return _a();if(U&&kb.length>=U)return _a(!0)}else for(ua=ca,ca++;;){if(-1===(ua=_.indexOf(R,ua+1)))return ra||lb.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:kb.length,index:ca}),Za();if(ua===ea-1)return Za(_.substring(ca,ua).replace(Ra,R));if(R!==da||_[ua+1]!==da){if(R===da||0===ua||_[ua-1]!==da){-1!==pa&&pa<ua+1&&(pa=_.indexOf(x,ua+1)),-1!==za&&za<ua+1&&(za=_.indexOf(G,ua+1));var hb=Ja(-1===za?pa:Math.min(pa,za));if(_[ua+1+hb]===x){Da.push(_.substring(ca,ua).replace(Ra,R)),_[ca=ua+1+hb+oa]!==R&&(ua=_.indexOf(R,ca)),pa=_.indexOf(x,ca),za=_.indexOf(G,ca);break}var pb=Ja(za);if(_.substring(ua+1+pb,ua+1+pb+ya)===G){if(Da.push(_.substring(ca,ua).replace(Ra,R)),Zb(ua+1+pb+ya),pa=_.indexOf(x,ca),ua=_.indexOf(R,ca),ib&&(qb(),Ca))return _a();if(U&&kb.length>=U)return _a(!0);break}lb.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:kb.length,index:ca}),ua++}}else ua++}return Za();function Ea(Ua){kb.push(Ua),Ma=ca}function Ja(Ua){var W=0;if(-1!==Ua){var N=_.substring(ua+1,Ua);N&&""===N.trim()&&(W=N.length)}return W}function Za(Ua){return ra||(void 0===Ua&&(Ua=_.substring(ca)),Da.push(Ua),ca=ea,Ea(Da),ib&&qb()),_a()}function Zb(Ua){ca=Ua,Ea(Da),Da=[],za=_.indexOf(G,ca)}function _a(Ua){return{data:kb,errors:lb,meta:{delimiter:x,linebreak:G,aborted:Ca,truncated:!!Ua,cursor:Ma+(xa||0)}}}function qb(){K(_a()),kb=[],lb=[]}function Ba(Ua,W,N){var Y={nextDelim:void 0,quoteSearch:void 0},ba=_.indexOf(R,W+1);if(W<Ua&&Ua<ba&&(ba<N||-1===N)){var $=_.indexOf(x,ba);if(-1===$)return Y;ba<$&&(ba=_.indexOf(R,ba+1)),Y=Ba($,ba,N)}else Y={nextDelim:Ua,quoteSearch:W};return Y}},this.abort=function(){Ca=!0},this.getCharIndex=function(){return ca}}function ja(O){var R=O.data,x=q[R.workerId],G=!1;if(R.error)x.userError(R.error,R.file);else if(R.results&&R.results.data){var F={abort:function(){G=!0,qa(R.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ka,resume:ka};if(na(x.userStep)){for(var K=0;K<R.results.data.length&&(x.userStep({data:R.results.data[K],errors:R.results.errors,meta:R.results.meta},F),!G);K++);delete R.results}else na(x.userChunk)&&(x.userChunk(R.results,F,R.file),delete R.results)}R.finished&&!G&&qa(R.workerId,R.results)}function qa(O,R){var x=q[O];na(x.userComplete)&&x.userComplete(R),x.terminate(),delete q[O]}function ka(){throw new Error("Not implemented.")}function ta(O){if("object"!=typeof O||null===O)return O;var R=Array.isArray(O)?[]:{};for(var x in O)R[x]=ta(O[x]);return R}function va(O,R){return function(){O.apply(R,arguments)}}function na(O){return"function"==typeof O}return l&&(f.onmessage=function(O){var R=O.data;void 0===v.WORKER_ID&&R&&(v.WORKER_ID=R.workerId);if("string"==typeof R.input)f.postMessage({workerId:v.WORKER_ID,results:v.parse(R.input,R.config),finished:!0});else if(f.File&&R.input instanceof File||R.input instanceof Object){var x=v.parse(R.input,R.config);x&&f.postMessage({workerId:v.WORKER_ID,results:x,finished:!0})}}),(H.prototype=Object.create(E.prototype)).constructor=H,(Q.prototype=Object.create(E.prototype)).constructor=Q,(J.prototype=Object.create(J.prototype)).constructor=J,(S.prototype=Object.create(E.prototype)).constructor=S,v})});var ir=Gc(O=>{be(O,{__assign:()=>d,__asyncDelegator:()=>ga,__asyncGenerator:()=>X,__asyncValues:()=>ja,__await:()=>aa,__awaiter:()=>u,__classPrivateFieldGet:()=>va,__classPrivateFieldSet:()=>na,__createBinding:()=>A,__decorate:()=>i,__exportStar:()=>E,__extends:()=>b,__generator:()=>v,__importDefault:()=>ta,__importStar:()=>ka,__makeTemplateObject:()=>qa,__metadata:()=>q,__param:()=>l,__read:()=>Q,__rest:()=>f,__spread:()=>J,__spreadArrays:()=>S,__values:()=>H});var a=function(x,G){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,K){F.__proto__=K}||function(F,K){for(var U in K)K.hasOwnProperty(U)&&(F[U]=K[U])},a(x,G)};function b(x,G){a(x,G);function F(){this.constructor=x}x.prototype=G===null?Object.create(G):(F.prototype=G.prototype,new F())}var d=function(){return d=Object.assign||function x(G){for(var F,K=1,U=arguments.length;K<U;K++){F=arguments[K];for(var L in F)Object.prototype.hasOwnProperty.call(F,L)&&(G[L]=F[L])}return G},d.apply(this,arguments)};function f(x,G){var F={};for(var K in x)Object.prototype.hasOwnProperty.call(x,K)&&G.indexOf(K)<0&&(F[K]=x[K]);if(x!=null&&typeof Object.getOwnPropertySymbols==="function")for(var U=0,K=Object.getOwnPropertySymbols(x);U<K.length;U++)G.indexOf(K[U])<0&&Object.prototype.propertyIsEnumerable.call(x,K[U])&&(F[K[U]]=x[K[U]]);return F}function i(x,G,F,K){var U=arguments.length,L=U<3?G:K===null?K=Object.getOwnPropertyDescriptor(G,F):K,da;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")L=Reflect.decorate(x,G,F,K);else for(var ca=x.length-1;ca>=0;ca--)(da=x[ca])&&(L=(U<3?da(L):U>3?da(G,F,L):da(G,F))||L);return U>3&&L&&Object.defineProperty(G,F,L),L}function l(x,G){return function(F,K){G(F,K,x)}}function q(x,G){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(x,G)}function u(x,G,F,K){function U(L){return L instanceof F?L:new F(function(da){da(L)})}return new(F||(F=Promise))(function(L,da){function ca(xa){try{_(K.next(xa))}catch(ra){da(ra)}}function Ca(xa){try{_(K.throw(xa))}catch(ra){da(ra)}}function _(xa){xa.done?L(xa.value):U(xa.value).then(ca,Ca)}_((K=K.apply(x,G||[])).next())})}function v(x,G){var F={label:0,sent:function(){if(L[0]&1)throw L[1];return L[1]},trys:[],ops:[]},K,U,L,da;return da={next:ca(0),throw:ca(1),return:ca(2)},typeof Symbol==="function"&&(da[Symbol.iterator]=function(){return this}),da;function ca(_){return function(xa){return Ca([_,xa])}}function Ca(_){if(K)throw new TypeError("Generator is already executing.");for(;F;)try{if(K=1,U&&(L=_[0]&2?U.return:_[0]?U.throw||((L=U.return)&&L.call(U),0):U.next)&&!(L=L.call(U,_[1])).done)return L;(U=0,L)&&(_=[_[0]&2,L.value]);switch(_[0]){case 0:case 1:L=_;break;case 4:return F.label++,{value:_[1],done:!1};case 5:F.label++,U=_[1],_=[0];continue;case 7:_=F.ops.pop(),F.trys.pop();continue;default:if(!(L=F.trys,L=L.length>0&&L[L.length-1])&&(_[0]===6||_[0]===2)){F=0;continue}if(_[0]===3&&(!L||_[1]>L[0]&&_[1]<L[3])){F.label=_[1];break}if(_[0]===6&&F.label<L[1]){F.label=L[1],L=_;break}if(L&&F.label<L[2]){F.label=L[2],F.ops.push(_);break}L[2]&&F.ops.pop(),F.trys.pop();continue}_=G.call(x,F)}catch(xa){_=[6,xa],U=0}finally{K=L=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}function A(x,G,F,K){K===void 0&&(K=F),x[K]=G[F]}function E(x,G){for(var F in x)F!=="default"&&!G.hasOwnProperty(F)&&(G[F]=x[F])}function H(x){var G=typeof Symbol==="function"&&Symbol.iterator,F=G&&x[G],K=0;if(F)return F.call(x);if(x&&typeof x.length==="number")return{next:function(){return x&&K>=x.length&&(x=void 0),{value:x&&x[K++],done:!x}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")}function Q(x,G){var F=typeof Symbol==="function"&&x[Symbol.iterator];if(!F)return x;var K=F.call(x),U,L=[],da;try{for(;(G===void 0||G-- >0)&&!(U=K.next()).done;)L.push(U.value)}catch(ca){da={error:ca}}finally{try{U&&!U.done&&(F=K.return)&&F.call(K)}finally{if(da)throw da.error}}return L}function J(){for(var x=[],G=0;G<arguments.length;G++)x=x.concat(Q(arguments[G]));return x}function S(){for(var x=0,G=0,F=arguments.length;G<F;G++)x+=arguments[G].length;for(var K=Array(x),U=0,G=0;G<F;G++)for(var L=arguments[G],da=0,ca=L.length;da<ca;da++,U++)K[U]=L[da];return K}function aa(x){return this instanceof aa?(this.v=x,this):new aa(x)}function X(x,G,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var K=F.apply(x,G||[]),U,L=[];return U={},da("next"),da("throw"),da("return"),U[Symbol.asyncIterator]=function(){return this},U;function da(ea){K[ea]&&(U[ea]=function(oa){return new Promise(function(ya,ma){L.push([ea,oa,ya,ma])>1||ca(ea,oa)})})}function ca(ea,oa){try{Ca(K[ea](oa))}catch(ya){ra(L[0][3],ya)}}function Ca(ea){ea.value instanceof aa?Promise.resolve(ea.value.v).then(_,xa):ra(L[0][2],ea)}function _(ea){ca("next",ea)}function xa(ea){ca("throw",ea)}function ra(ea,oa){(ea(oa),L.shift(),L.length)&&ca(L[0][0],L[0][1])}}function ga(x){var G,F;return G={},K("next"),K("throw",function(U){throw U}),K("return"),G[Symbol.iterator]=function(){return this},G;function K(U,L){G[U]=x[U]?function(da){return(F=!F)?{value:aa(x[U](da)),done:U==="return"}:L?L(da):da}:L}}function ja(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=x[Symbol.asyncIterator],F;return G?G.call(x):(x=typeof H==="function"?H(x):x[Symbol.iterator](),F={},K("next"),K("throw"),K("return"),F[Symbol.asyncIterator]=function(){return this},F);function K(L){F[L]=x[L]&&function(da){return new Promise(function(ca,Ca){da=x[L](da),U(ca,Ca,da.done,da.value)})}}function U(L,da,ca,Ca){Promise.resolve(Ca).then(function(_){L({value:_,done:ca})},da)}}function qa(x,G){return Object.defineProperty?Object.defineProperty(x,"raw",{value:G}):x.raw=G,x}function ka(x){if(x&&x.__esModule)return x;var G={};if(x!=null)for(var F in x)Object.hasOwnProperty.call(x,F)&&(G[F]=x[F]);return G.default=x,G}function ta(x){return x&&x.__esModule?x:{default:x}}function va(x,G){if(!G.has(x))throw new TypeError("attempted to get private field on non-instance");return G.get(x)}function na(x,G,F){if(!G.has(x))throw new TypeError("attempted to set private field on non-instance");return G.set(x,F),F}});var mr=Gc(O=>{be(O,{__assign:()=>d,__asyncDelegator:()=>ga,__asyncGenerator:()=>X,__asyncValues:()=>ja,__await:()=>aa,__awaiter:()=>u,__classPrivateFieldGet:()=>va,__classPrivateFieldSet:()=>na,__createBinding:()=>A,__decorate:()=>i,__exportStar:()=>E,__extends:()=>b,__generator:()=>v,__importDefault:()=>ta,__importStar:()=>ka,__makeTemplateObject:()=>qa,__metadata:()=>q,__param:()=>l,__read:()=>Q,__rest:()=>f,__spread:()=>J,__spreadArrays:()=>S,__values:()=>H});var a=function(x,G){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,K){F.__proto__=K}||function(F,K){for(var U in K)K.hasOwnProperty(U)&&(F[U]=K[U])},a(x,G)};function b(x,G){a(x,G);function F(){this.constructor=x}x.prototype=G===null?Object.create(G):(F.prototype=G.prototype,new F())}var d=function(){return d=Object.assign||function x(G){for(var F,K=1,U=arguments.length;K<U;K++){F=arguments[K];for(var L in F)Object.prototype.hasOwnProperty.call(F,L)&&(G[L]=F[L])}return G},d.apply(this,arguments)};function f(x,G){var F={};for(var K in x)Object.prototype.hasOwnProperty.call(x,K)&&G.indexOf(K)<0&&(F[K]=x[K]);if(x!=null&&typeof Object.getOwnPropertySymbols==="function")for(var U=0,K=Object.getOwnPropertySymbols(x);U<K.length;U++)G.indexOf(K[U])<0&&Object.prototype.propertyIsEnumerable.call(x,K[U])&&(F[K[U]]=x[K[U]]);return F}function i(x,G,F,K){var U=arguments.length,L=U<3?G:K===null?K=Object.getOwnPropertyDescriptor(G,F):K,da;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")L=Reflect.decorate(x,G,F,K);else for(var ca=x.length-1;ca>=0;ca--)(da=x[ca])&&(L=(U<3?da(L):U>3?da(G,F,L):da(G,F))||L);return U>3&&L&&Object.defineProperty(G,F,L),L}function l(x,G){return function(F,K){G(F,K,x)}}function q(x,G){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(x,G)}function u(x,G,F,K){function U(L){return L instanceof F?L:new F(function(da){da(L)})}return new(F||(F=Promise))(function(L,da){function ca(xa){try{_(K.next(xa))}catch(ra){da(ra)}}function Ca(xa){try{_(K.throw(xa))}catch(ra){da(ra)}}function _(xa){xa.done?L(xa.value):U(xa.value).then(ca,Ca)}_((K=K.apply(x,G||[])).next())})}function v(x,G){var F={label:0,sent:function(){if(L[0]&1)throw L[1];return L[1]},trys:[],ops:[]},K,U,L,da;return da={next:ca(0),throw:ca(1),return:ca(2)},typeof Symbol==="function"&&(da[Symbol.iterator]=function(){return this}),da;function ca(_){return function(xa){return Ca([_,xa])}}function Ca(_){if(K)throw new TypeError("Generator is already executing.");for(;F;)try{if(K=1,U&&(L=_[0]&2?U.return:_[0]?U.throw||((L=U.return)&&L.call(U),0):U.next)&&!(L=L.call(U,_[1])).done)return L;(U=0,L)&&(_=[_[0]&2,L.value]);switch(_[0]){case 0:case 1:L=_;break;case 4:return F.label++,{value:_[1],done:!1};case 5:F.label++,U=_[1],_=[0];continue;case 7:_=F.ops.pop(),F.trys.pop();continue;default:if(!(L=F.trys,L=L.length>0&&L[L.length-1])&&(_[0]===6||_[0]===2)){F=0;continue}if(_[0]===3&&(!L||_[1]>L[0]&&_[1]<L[3])){F.label=_[1];break}if(_[0]===6&&F.label<L[1]){F.label=L[1],L=_;break}if(L&&F.label<L[2]){F.label=L[2],F.ops.push(_);break}L[2]&&F.ops.pop(),F.trys.pop();continue}_=G.call(x,F)}catch(xa){_=[6,xa],U=0}finally{K=L=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}function A(x,G,F,K){K===void 0&&(K=F),x[K]=G[F]}function E(x,G){for(var F in x)F!=="default"&&!G.hasOwnProperty(F)&&(G[F]=x[F])}function H(x){var G=typeof Symbol==="function"&&Symbol.iterator,F=G&&x[G],K=0;if(F)return F.call(x);if(x&&typeof x.length==="number")return{next:function(){return x&&K>=x.length&&(x=void 0),{value:x&&x[K++],done:!x}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")}function Q(x,G){var F=typeof Symbol==="function"&&x[Symbol.iterator];if(!F)return x;var K=F.call(x),U,L=[],da;try{for(;(G===void 0||G-- >0)&&!(U=K.next()).done;)L.push(U.value)}catch(ca){da={error:ca}}finally{try{U&&!U.done&&(F=K.return)&&F.call(K)}finally{if(da)throw da.error}}return L}function J(){for(var x=[],G=0;G<arguments.length;G++)x=x.concat(Q(arguments[G]));return x}function S(){for(var x=0,G=0,F=arguments.length;G<F;G++)x+=arguments[G].length;for(var K=Array(x),U=0,G=0;G<F;G++)for(var L=arguments[G],da=0,ca=L.length;da<ca;da++,U++)K[U]=L[da];return K}function aa(x){return this instanceof aa?(this.v=x,this):new aa(x)}function X(x,G,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var K=F.apply(x,G||[]),U,L=[];return U={},da("next"),da("throw"),da("return"),U[Symbol.asyncIterator]=function(){return this},U;function da(ea){K[ea]&&(U[ea]=function(oa){return new Promise(function(ya,ma){L.push([ea,oa,ya,ma])>1||ca(ea,oa)})})}function ca(ea,oa){try{Ca(K[ea](oa))}catch(ya){ra(L[0][3],ya)}}function Ca(ea){ea.value instanceof aa?Promise.resolve(ea.value.v).then(_,xa):ra(L[0][2],ea)}function _(ea){ca("next",ea)}function xa(ea){ca("throw",ea)}function ra(ea,oa){(ea(oa),L.shift(),L.length)&&ca(L[0][0],L[0][1])}}function ga(x){var G,F;return G={},K("next"),K("throw",function(U){throw U}),K("return"),G[Symbol.iterator]=function(){return this},G;function K(U,L){G[U]=x[U]?function(da){return(F=!F)?{value:aa(x[U](da)),done:U==="return"}:L?L(da):da}:L}}function ja(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=x[Symbol.asyncIterator],F;return G?G.call(x):(x=typeof H==="function"?H(x):x[Symbol.iterator](),F={},K("next"),K("throw"),K("return"),F[Symbol.asyncIterator]=function(){return this},F);function K(L){F[L]=x[L]&&function(da){return new Promise(function(ca,Ca){da=x[L](da),U(ca,Ca,da.done,da.value)})}}function U(L,da,ca,Ca){Promise.resolve(Ca).then(function(_){L({value:_,done:ca})},da)}}function qa(x,G){return Object.defineProperty?Object.defineProperty(x,"raw",{value:G}):x.raw=G,x}function ka(x){if(x&&x.__esModule)return x;var G={};if(x!=null)for(var F in x)Object.hasOwnProperty.call(x,F)&&(G[F]=x[F]);return G.default=x,G}function ta(x){return x&&x.__esModule?x:{default:x}}function va(x,G){if(!G.has(x))throw new TypeError("attempted to get private field on non-instance");return G.get(x)}function na(x,G,F){if(!G.has(x))throw new TypeError("attempted to set private field on non-instance");return G.set(x,F),F}});var tl=Gc(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});var a=mr();var b={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var d=function(W,N){if(!W)throw f(N)},f=function(W){return new Error("Firebase Database ("+b.SDK_VERSION+") INTERNAL ASSERT FAILED: "+W)};var i=function(W){for(var N=[],Y=0,ba=0;ba<W.length;ba++){var $=W.charCodeAt(ba);$<128?N[Y++]=$:$<2048?(N[Y++]=$>>6|192,N[Y++]=$&63|128):($&64512)===55296&&ba+1<W.length&&(W.charCodeAt(ba+1)&64512)===56320?($=65536+(($&1023)<<10)+(W.charCodeAt(++ba)&1023),N[Y++]=$>>18|240,N[Y++]=$>>12&63|128,N[Y++]=$>>6&63|128,N[Y++]=$&63|128):(N[Y++]=$>>12|224,N[Y++]=$>>6&63|128,N[Y++]=$&63|128)}return N},l=function(W){for(var N=[],Y=0,ba=0;Y<W.length;){var $=W[Y++];if($<128)N[ba++]=String.fromCharCode($);else if($>191&&$<224){var ha=W[Y++];N[ba++]=String.fromCharCode(($&31)<<6|ha&63)}else if($>239&&$<365){var ha=W[Y++],Sa=W[Y++],rb=W[Y++],$a=(($&7)<<18|(ha&63)<<12|(Sa&63)<<6|rb&63)-65536;N[ba++]=String.fromCharCode(55296+($a>>10)),N[ba++]=String.fromCharCode(56320+($a&1023))}else{var ha=W[Y++],Sa=W[Y++];N[ba++]=String.fromCharCode(($&15)<<12|(ha&63)<<6|Sa&63)}}return N.join("")},q={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob==="function",encodeByteArray:function(W,N){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var Y=N?this.byteToCharMapWebSafe_:this.byteToCharMap_,ba=[],$=0;$<W.length;$+=3){var ha=W[$],Sa=$+1<W.length,rb=Sa?W[$+1]:0,$a=$+2<W.length,nb=$a?W[$+2]:0,Rb=ha>>2,Ib=(ha&3)<<4|rb>>4,Oa=(rb&15)<<2|nb>>6,zd=nb&63;$a||(zd=64,Sa||(Oa=64)),ba.push(Y[Rb],Y[Ib],Y[Oa],Y[zd])}return ba.join("")},encodeString:function(W,N){return this.HAS_NATIVE_SUPPORT&&!N?btoa(W):this.encodeByteArray(i(W),N)},decodeString:function(W,N){return this.HAS_NATIVE_SUPPORT&&!N?atob(W):l(this.decodeStringToByteArray(W,N))},decodeStringToByteArray:function(W,N){this.init_();for(var Y=N?this.charToByteMapWebSafe_:this.charToByteMap_,ba=[],$=0;$<W.length;){var ha=Y[W.charAt($++)],Sa=$<W.length,rb=Sa?Y[W.charAt($)]:0;++$;var $a=$<W.length,nb=$a?Y[W.charAt($)]:64;++$;var Rb=$<W.length,Ib=Rb?Y[W.charAt($)]:64;++$;if(ha==null||rb==null||nb==null||Ib==null)throw Error();var Oa=ha<<2|rb>>4;ba.push(Oa);if(nb!==64){var zd=rb<<4&240|nb>>2;ba.push(zd);if(Ib!==64){var $f=nb<<6&192|Ib;ba.push($f)}}}return ba},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},u=function(W){var N=i(W);return q.encodeByteArray(N,!0)},v=function(W){try{return q.decodeString(W,!0)}catch(N){console.error("base64Decode failed: ",N)}return null};function A(W){return E(void 0,W)}function E(W,N){if(!(N instanceof Object))return N;switch(N.constructor){case Date:var Y=N;return new Date(Y.getTime());case Object:W===void 0&&(W={});break;case Array:W=[];break;default:return N}for(var ba in N){if(!N.hasOwnProperty(ba))continue;W[ba]=E(W[ba],N[ba])}return W}var H=function(){function W(){var N=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(Y,ba){N.resolve=Y,N.reject=ba})}return W.prototype.wrapCallback=function(N){var Y=this;return function(ba,$){ba?Y.reject(ba):Y.resolve($),typeof N==="function"&&(Y.promise.catch(function(){}),N.length===1?N(ba):N(ba,$))}},W}();function Q(){return typeof navigator!=="undefined"&&typeof navigator.userAgent==="string"?navigator.userAgent:""}function J(){return typeof window!=="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Q())}function S(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(W){return!1}}function aa(){return typeof self==="object"&&self.self===self}function X(){var W=typeof chrome==="object"?chrome.runtime:typeof browser==="object"?browser.runtime:void 0;return typeof W==="object"&&W.id!==void 0}function ga(){return typeof navigator==="object"&&navigator.product==="ReactNative"}function ja(){return Q().indexOf("Electron/")>=0}function qa(){var W=Q();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function ka(){return Q().indexOf("MSAppHost/")>=0}function ta(){return b.NODE_CLIENT===!0||b.NODE_ADMIN===!0}function va(){return!S()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function na(){return"indexedDB"in self&&indexedDB!=null}function O(){return new Promise(function(W,N){try{var Y=!0,ba="validate-browser-context-for-indexeddb-analytics-module",$=window.indexedDB.open(ba);$.onsuccess=function(){$.result.close(),Y||window.indexedDB.deleteDatabase(ba),W(!0)},$.onupgradeneeded=function(){Y=!1},$.onerror=function(){var ha;N(((ha=$.error)===null||ha===void 0?void 0:ha.message)||"")}}catch(ha){N(ha)}})}function R(){return!navigator||!navigator.cookieEnabled?!1:!0}var x="FirebaseError",G=function(W){a.__extends(N,W);function N(Y,ba){var $=W.call(this,ba)||this;return $.code=Y,$.name=x,Object.setPrototypeOf($,N.prototype),Error.captureStackTrace&&Error.captureStackTrace($,F.prototype.create),$}return N}(Error),F=function(){function W(N,Y,ba){this.service=N,this.serviceName=Y,this.errors=ba}return W.prototype.create=function(N){for(var Y=[],ba=1;ba<arguments.length;ba++)Y[ba-1]=arguments[ba];for(var $=Y[0]||{},ha=this.service+"/"+N,Sa=this.errors[N],rb=Sa?K(Sa,$):"Error",$a=this.serviceName+": "+rb+" ("+ha+").",nb=new G(ha,$a),Rb=0,Ib=Object.keys($);Rb<Ib.length;Rb++){var Oa=Ib[Rb];Oa.slice(-1)!=="_"&&(Oa in nb&&console.warn('Overwriting FirebaseError base field "'+Oa+'" can cause unexpected behavior.'),nb[Oa]=$[Oa])}return nb},W}();function K(W,N){return W.replace(U,function(Y,ba){var $=N[ba];return $!=null?String($):"<"+ba+"?>"})}var U=/\{\$([^}]+)}/g;function L(W){return JSON.parse(W)}function da(W){return JSON.stringify(W)}var ca=function(W){var N={},Y={},ba={},$="";try{var ha=W.split(".");N=L(v(ha[0])||""),Y=L(v(ha[1])||""),$=ha[2],ba=Y.d||{},delete Y.d}catch(Sa){}return{header:N,claims:Y,data:ba,signature:$}},Ca=function(W){var N=ca(W).claims,Y=Math.floor(new Date().getTime()/1e3),ba=0,$=0;return typeof N==="object"&&(N.hasOwnProperty("nbf")?ba=N.nbf:N.hasOwnProperty("iat")&&(ba=N.iat),N.hasOwnProperty("exp")?$=N.exp:$=ba+86400),!!Y&&!!ba&&!!$&&Y>=ba&&Y<=$},_=function(W){var N=ca(W).claims;return typeof N==="object"&&N.hasOwnProperty("iat")?N.iat:null},xa=function(W){var N=ca(W),Y=N.claims;return!!Y&&typeof Y==="object"&&Y.hasOwnProperty("iat")},ra=function(W){var N=ca(W).claims;return typeof N==="object"&&N.admin===!0};function ea(W,N){return Object.prototype.hasOwnProperty.call(W,N)}function oa(W,N){return Object.prototype.hasOwnProperty.call(W,N)?W[N]:void 0}function ya(W){for(var N in W)if(Object.prototype.hasOwnProperty.call(W,N))return!1;return!0}function ma(W,N,Y){var ba={};for(var $ in W)Object.prototype.hasOwnProperty.call(W,$)&&(ba[$]=N.call(Y,W[$],$,W));return ba}function ib(W){for(var N=[],Y=function($a,nb){Array.isArray(nb)?nb.forEach(function(Rb){N.push(encodeURIComponent($a)+"="+encodeURIComponent(Rb))}):N.push(encodeURIComponent($a)+"="+encodeURIComponent(nb))},ba=0,$=Object.entries(W);ba<$.length;ba++){var ha=$[ba],Sa=ha[0],rb=ha[1];Y(Sa,rb)}return N.length?"&"+N.join("&"):""}function kb(W){var N={},Y=W.replace(/^\?/,"").split("&");return Y.forEach(function(ba){if(ba){var $=ba.split("=");N[$[0]]=$[1]}}),N}var lb=function(){function W(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var N=1;N<this.blockSize;++N)this.pad_[N]=0;this.reset()}return W.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},W.prototype.compress_=function(N,Y){Y||(Y=0);var ba=this.W_;if(typeof N==="string")for(var $=0;$<16;$++)ba[$]=N.charCodeAt(Y)<<24|N.charCodeAt(Y+1)<<16|N.charCodeAt(Y+2)<<8|N.charCodeAt(Y+3),Y+=4;else for(var $=0;$<16;$++)ba[$]=N[Y]<<24|N[Y+1]<<16|N[Y+2]<<8|N[Y+3],Y+=4;for(var $=16;$<80;$++){var ha=ba[$-3]^ba[$-8]^ba[$-14]^ba[$-16];ba[$]=(ha<<1|ha>>>31)&4294967295}for(var Sa=this.chain_[0],rb=this.chain_[1],$a=this.chain_[2],nb=this.chain_[3],Rb=this.chain_[4],Ib,Oa,$=0;$<80;$++){$<40?$<20?(Ib=nb^rb&($a^nb),Oa=1518500249):(Ib=rb^$a^nb,Oa=1859775393):$<60?(Ib=rb&$a|nb&(rb|$a),Oa=2400959708):(Ib=rb^$a^nb,Oa=3395469782);var ha=(Sa<<5|Sa>>>27)+Ib+Rb+Oa+ba[$]&4294967295;Rb=nb,nb=$a,$a=(rb<<30|rb>>>2)&4294967295,rb=Sa,Sa=ha}this.chain_[0]=this.chain_[0]+Sa&4294967295,this.chain_[1]=this.chain_[1]+rb&4294967295,this.chain_[2]=this.chain_[2]+$a&4294967295,this.chain_[3]=this.chain_[3]+nb&4294967295,this.chain_[4]=this.chain_[4]+Rb&4294967295},W.prototype.update=function(N,Y){if(N==null)return;Y===void 0&&(Y=N.length);for(var ba=Y-this.blockSize,$=0,ha=this.buf_,Sa=this.inbuf_;$<Y;){if(Sa===0)for(;$<=ba;)this.compress_(N,$),$+=this.blockSize;if(typeof N==="string")for(;$<Y;){ha[Sa]=N.charCodeAt($),++Sa,++$;if(Sa===this.blockSize){this.compress_(ha),Sa=0;break}}else for(;$<Y;){ha[Sa]=N[$],++Sa,++$;if(Sa===this.blockSize){this.compress_(ha),Sa=0;break}}}this.inbuf_=Sa,this.total_+=Y},W.prototype.digest=function(){var N=[],Y=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var ba=this.blockSize-1;ba>=56;ba--)this.buf_[ba]=Y&255,Y/=256;this.compress_(this.buf_);for(var $=0,ba=0;ba<5;ba++)for(var ha=24;ha>=0;ha-=8)N[$]=this.chain_[ba]>>ha&255,++$;return N},W}();function Da(W,N){var Y=new Ma(W,N);return Y.subscribe.bind(Y)}var Ma=function(){function W(N,Y){var ba=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(function(){N(ba)}).catch(function($){ba.error($)})}return W.prototype.next=function(N){this.forEachObserver(function(Y){Y.next(N)})},W.prototype.error=function(N){this.forEachObserver(function(Y){Y.error(N)}),this.close(N)},W.prototype.complete=function(){this.forEachObserver(function(N){N.complete()}),this.close()},W.prototype.subscribe=function(N,Y,ba){var $=this,ha;if(N===void 0&&Y===void 0&&ba===void 0)throw new Error("Missing Observer.");jb(N,["next","error","complete"])?ha=N:ha={next:N,error:Y,complete:ba},ha.next===void 0&&(ha.next=pa),ha.error===void 0&&(ha.error=pa),ha.complete===void 0&&(ha.complete=pa);var Sa=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{$.finalError?ha.error($.finalError):ha.complete()}catch(rb){}return}),this.observers.push(ha),Sa},W.prototype.unsubscribeOne=function(N){if(this.observers===void 0||this.observers[N]===void 0)return;delete this.observers[N],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this)},W.prototype.forEachObserver=function(N){if(this.finalized)return;for(var Y=0;Y<this.observers.length;Y++)this.sendOne(Y,N)},W.prototype.sendOne=function(N,Y){var ba=this;this.task.then(function(){if(ba.observers!==void 0&&ba.observers[N]!==void 0)try{Y(ba.observers[N])}catch($){typeof console!=="undefined"&&console.error&&console.error($)}})},W.prototype.close=function(N){var Y=this;if(this.finalized)return;this.finalized=!0,N!==void 0&&(this.finalError=N),this.task.then(function(){Y.observers=void 0,Y.onNoObservers=void 0})},W}();function eb(W,N){return function(){for(var Y=[],ba=0;ba<arguments.length;ba++)Y[ba]=arguments[ba];Promise.resolve(!0).then(function(){W.apply(void 0,Y)}).catch(function($){N&&N($)})}}function jb(W,N){if(typeof W!=="object"||W===null)return!1;for(var Y=0,ba=N;Y<ba.length;Y++){var $=ba[Y];if($ in W&&typeof W[$]==="function")return!0}return!1}function pa(){}var za=function(W,N,Y,ba){var $;ba<N?$="at least "+N:ba>Y&&($=Y===0?"none":"no more than "+Y);if($){var ha=W+" failed: Was called with "+ba+(ba===1?" argument.":" arguments.")+" Expects "+$+".";throw new Error(ha)}};function Ra(W,N,Y){var ba="";switch(N){case 1:ba=Y?"first":"First";break;case 2:ba=Y?"second":"Second";break;case 3:ba=Y?"third":"Third";break;case 4:ba=Y?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var $=W+" failed: ";return $+=ba+" argument ",$}function ua(W,N,Y,ba){if(ba&&!Y)return;if(typeof Y!=="string")throw new Error(Ra(W,N,ba)+"must be a valid firebase namespace.")}function Ga(W,N,Y,ba){if(ba&&!Y)return;if(typeof Y!=="function")throw new Error(Ra(W,N,ba)+"must be a valid function.")}function hb(W,N,Y,ba){if(ba&&!Y)return;if(typeof Y!=="object"||Y===null)throw new Error(Ra(W,N,ba)+"must be a valid context object.")}var pb=function(W){for(var N=[],Y=0,ba=0;ba<W.length;ba++){var $=W.charCodeAt(ba);if($>=55296&&$<=56319){var ha=$-55296;ba++,d(ba<W.length,"Surrogate pair missing trail surrogate.");var Sa=W.charCodeAt(ba)-56320;$=65536+(ha<<10)+Sa}$<128?N[Y++]=$:$<2048?(N[Y++]=$>>6|192,N[Y++]=$&63|128):$<65536?(N[Y++]=$>>12|224,N[Y++]=$>>6&63|128,N[Y++]=$&63|128):(N[Y++]=$>>18|240,N[Y++]=$>>12&63|128,N[Y++]=$>>6&63|128,N[Y++]=$&63|128)}return N},Ea=function(W){for(var N=0,Y=0;Y<W.length;Y++){var ba=W.charCodeAt(Y);ba<128?N++:ba<2048?N+=2:ba>=55296&&ba<=56319?(N+=4,Y++):N+=3}return N};var Ja=1e3,Za=2,Zb=4*60*60*1e3,_a=.5;function qb(W,N,Y){N===void 0&&(N=Ja),Y===void 0&&(Y=Za);var ba=N*Math.pow(Y,W),$=Math.round(_a*ba*(Math.random()-.5)*2);return Math.min(Zb,ba+$)}Ba.CONSTANTS=b;Ba.Deferred=H;Ba.ErrorFactory=F;Ba.FirebaseError=G;Ba.MAX_VALUE_MILLIS=Zb;Ba.RANDOM_FACTOR=_a;Ba.Sha1=lb;Ba.areCookiesEnabled=R;Ba.assert=d;Ba.assertionError=f;Ba.async=eb;Ba.base64=q;Ba.base64Decode=v;Ba.base64Encode=u;Ba.calculateBackoffMillis=qb;Ba.contains=ea;Ba.createSubscribe=Da;Ba.decode=ca;Ba.deepCopy=A;Ba.deepExtend=E;Ba.errorPrefix=Ra;Ba.getUA=Q;Ba.isAdmin=ra;Ba.isBrowser=aa;Ba.isBrowserExtension=X;Ba.isElectron=ja;Ba.isEmpty=ya;Ba.isIE=qa;Ba.isIndexedDBAvailable=na;Ba.isMobileCordova=J;Ba.isNode=S;Ba.isNodeSdk=ta;Ba.isReactNative=ga;Ba.isSafari=va;Ba.isUWP=ka;Ba.isValidFormat=xa;Ba.isValidTimestamp=Ca;Ba.issuedAtTime=_;Ba.jsonEval=L;Ba.map=ma;Ba.querystring=ib;Ba.querystringDecode=kb;Ba.safeGet=oa;Ba.stringLength=Ea;Ba.stringToByteArray=pb;Ba.stringify=da;Ba.validateArgCount=za;Ba.validateCallback=Ga;Ba.validateContextObject=hb;Ba.validateIndexedDBOpenable=O;Ba.validateNamespace=ua});var kr=Gc(O=>{be(O,{__assign:()=>d,__asyncDelegator:()=>ga,__asyncGenerator:()=>X,__asyncValues:()=>ja,__await:()=>aa,__awaiter:()=>u,__classPrivateFieldGet:()=>va,__classPrivateFieldSet:()=>na,__createBinding:()=>A,__decorate:()=>i,__exportStar:()=>E,__extends:()=>b,__generator:()=>v,__importDefault:()=>ta,__importStar:()=>ka,__makeTemplateObject:()=>qa,__metadata:()=>q,__param:()=>l,__read:()=>Q,__rest:()=>f,__spread:()=>J,__spreadArrays:()=>S,__values:()=>H});var a=function(x,G){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,K){F.__proto__=K}||function(F,K){for(var U in K)K.hasOwnProperty(U)&&(F[U]=K[U])},a(x,G)};function b(x,G){a(x,G);function F(){this.constructor=x}x.prototype=G===null?Object.create(G):(F.prototype=G.prototype,new F())}var d=function(){return d=Object.assign||function x(G){for(var F,K=1,U=arguments.length;K<U;K++){F=arguments[K];for(var L in F)Object.prototype.hasOwnProperty.call(F,L)&&(G[L]=F[L])}return G},d.apply(this,arguments)};function f(x,G){var F={};for(var K in x)Object.prototype.hasOwnProperty.call(x,K)&&G.indexOf(K)<0&&(F[K]=x[K]);if(x!=null&&typeof Object.getOwnPropertySymbols==="function")for(var U=0,K=Object.getOwnPropertySymbols(x);U<K.length;U++)G.indexOf(K[U])<0&&Object.prototype.propertyIsEnumerable.call(x,K[U])&&(F[K[U]]=x[K[U]]);return F}function i(x,G,F,K){var U=arguments.length,L=U<3?G:K===null?K=Object.getOwnPropertyDescriptor(G,F):K,da;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")L=Reflect.decorate(x,G,F,K);else for(var ca=x.length-1;ca>=0;ca--)(da=x[ca])&&(L=(U<3?da(L):U>3?da(G,F,L):da(G,F))||L);return U>3&&L&&Object.defineProperty(G,F,L),L}function l(x,G){return function(F,K){G(F,K,x)}}function q(x,G){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(x,G)}function u(x,G,F,K){function U(L){return L instanceof F?L:new F(function(da){da(L)})}return new(F||(F=Promise))(function(L,da){function ca(xa){try{_(K.next(xa))}catch(ra){da(ra)}}function Ca(xa){try{_(K.throw(xa))}catch(ra){da(ra)}}function _(xa){xa.done?L(xa.value):U(xa.value).then(ca,Ca)}_((K=K.apply(x,G||[])).next())})}function v(x,G){var F={label:0,sent:function(){if(L[0]&1)throw L[1];return L[1]},trys:[],ops:[]},K,U,L,da;return da={next:ca(0),throw:ca(1),return:ca(2)},typeof Symbol==="function"&&(da[Symbol.iterator]=function(){return this}),da;function ca(_){return function(xa){return Ca([_,xa])}}function Ca(_){if(K)throw new TypeError("Generator is already executing.");for(;F;)try{if(K=1,U&&(L=_[0]&2?U.return:_[0]?U.throw||((L=U.return)&&L.call(U),0):U.next)&&!(L=L.call(U,_[1])).done)return L;(U=0,L)&&(_=[_[0]&2,L.value]);switch(_[0]){case 0:case 1:L=_;break;case 4:return F.label++,{value:_[1],done:!1};case 5:F.label++,U=_[1],_=[0];continue;case 7:_=F.ops.pop(),F.trys.pop();continue;default:if(!(L=F.trys,L=L.length>0&&L[L.length-1])&&(_[0]===6||_[0]===2)){F=0;continue}if(_[0]===3&&(!L||_[1]>L[0]&&_[1]<L[3])){F.label=_[1];break}if(_[0]===6&&F.label<L[1]){F.label=L[1],L=_;break}if(L&&F.label<L[2]){F.label=L[2],F.ops.push(_);break}L[2]&&F.ops.pop(),F.trys.pop();continue}_=G.call(x,F)}catch(xa){_=[6,xa],U=0}finally{K=L=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}function A(x,G,F,K){K===void 0&&(K=F),x[K]=G[F]}function E(x,G){for(var F in x)F!=="default"&&!G.hasOwnProperty(F)&&(G[F]=x[F])}function H(x){var G=typeof Symbol==="function"&&Symbol.iterator,F=G&&x[G],K=0;if(F)return F.call(x);if(x&&typeof x.length==="number")return{next:function(){return x&&K>=x.length&&(x=void 0),{value:x&&x[K++],done:!x}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")}function Q(x,G){var F=typeof Symbol==="function"&&x[Symbol.iterator];if(!F)return x;var K=F.call(x),U,L=[],da;try{for(;(G===void 0||G-- >0)&&!(U=K.next()).done;)L.push(U.value)}catch(ca){da={error:ca}}finally{try{U&&!U.done&&(F=K.return)&&F.call(K)}finally{if(da)throw da.error}}return L}function J(){for(var x=[],G=0;G<arguments.length;G++)x=x.concat(Q(arguments[G]));return x}function S(){for(var x=0,G=0,F=arguments.length;G<F;G++)x+=arguments[G].length;for(var K=Array(x),U=0,G=0;G<F;G++)for(var L=arguments[G],da=0,ca=L.length;da<ca;da++,U++)K[U]=L[da];return K}function aa(x){return this instanceof aa?(this.v=x,this):new aa(x)}function X(x,G,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var K=F.apply(x,G||[]),U,L=[];return U={},da("next"),da("throw"),da("return"),U[Symbol.asyncIterator]=function(){return this},U;function da(ea){K[ea]&&(U[ea]=function(oa){return new Promise(function(ya,ma){L.push([ea,oa,ya,ma])>1||ca(ea,oa)})})}function ca(ea,oa){try{Ca(K[ea](oa))}catch(ya){ra(L[0][3],ya)}}function Ca(ea){ea.value instanceof aa?Promise.resolve(ea.value.v).then(_,xa):ra(L[0][2],ea)}function _(ea){ca("next",ea)}function xa(ea){ca("throw",ea)}function ra(ea,oa){(ea(oa),L.shift(),L.length)&&ca(L[0][0],L[0][1])}}function ga(x){var G,F;return G={},K("next"),K("throw",function(U){throw U}),K("return"),G[Symbol.iterator]=function(){return this},G;function K(U,L){G[U]=x[U]?function(da){return(F=!F)?{value:aa(x[U](da)),done:U==="return"}:L?L(da):da}:L}}function ja(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=x[Symbol.asyncIterator],F;return G?G.call(x):(x=typeof H==="function"?H(x):x[Symbol.iterator](),F={},K("next"),K("throw"),K("return"),F[Symbol.asyncIterator]=function(){return this},F);function K(L){F[L]=x[L]&&function(da){return new Promise(function(ca,Ca){da=x[L](da),U(ca,Ca,da.done,da.value)})}}function U(L,da,ca,Ca){Promise.resolve(Ca).then(function(_){L({value:_,done:ca})},da)}}function qa(x,G){return Object.defineProperty?Object.defineProperty(x,"raw",{value:G}):x.raw=G,x}function ka(x){if(x&&x.__esModule)return x;var G={};if(x!=null)for(var F in x)Object.hasOwnProperty.call(x,F)&&(G[F]=x[F]);return G.default=x,G}function ta(x){return x&&x.__esModule?x:{default:x}}function va(x,G){if(!G.has(x))throw new TypeError("attempted to get private field on non-instance");return G.get(x)}function na(x,G,F){if(!G.has(x))throw new TypeError("attempted to set private field on non-instance");return G.set(x,F),F}});var jr=Gc(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});var a=kr(),b=tl(),d=function(){function E(H,Q,J){this.name=H,this.instanceFactory=Q,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return E.prototype.setInstantiationMode=function(H){return this.instantiationMode=H,this},E.prototype.setMultipleInstances=function(H){return this.multipleInstances=H,this},E.prototype.setServiceProps=function(H){return this.serviceProps=H,this},E}();var f="[DEFAULT]";var i=function(){function E(H,Q){this.name=H,this.container=Q,this.component=null,this.instances=new Map(),this.instancesDeferred=new Map()}return E.prototype.get=function(H){H===void 0&&(H=f);var Q=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(Q)){var J=new b.Deferred();this.instancesDeferred.set(Q,J);try{var S=this.getOrInitializeService(Q);S&&J.resolve(S)}catch(aa){}}return this.instancesDeferred.get(Q).promise},E.prototype.getImmediate=function(H){var Q=a.__assign({identifier:f,optional:!1},H),J=Q.identifier,S=Q.optional,aa=this.normalizeInstanceIdentifier(J);try{var X=this.getOrInitializeService(aa);if(!X){if(S)return null;throw Error("Service "+this.name+" is not available")}return X}catch(ga){if(S)return null;throw ga}},E.prototype.getComponent=function(){return this.component},E.prototype.setComponent=function(H){var Q,J;if(H.name!==this.name)throw Error("Mismatching Component "+H.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");this.component=H;if(q(H))try{this.getOrInitializeService(f)}catch(ta){}try{for(var S=a.__values(this.instancesDeferred.entries()),aa=S.next();!aa.done;aa=S.next()){var X=a.__read(aa.value,2),ga=X[0],ja=X[1],qa=this.normalizeInstanceIdentifier(ga);try{var ka=this.getOrInitializeService(qa);ja.resolve(ka)}catch(ta){}}}catch(ta){Q={error:ta}}finally{try{aa&&!aa.done&&(J=S.return)&&J.call(S)}finally{if(Q)throw Q.error}}},E.prototype.clearInstance=function(H){H===void 0&&(H=f),this.instancesDeferred.delete(H),this.instances.delete(H)},E.prototype.delete=function(){return a.__awaiter(this,void 0,void 0,function(){var H;return a.__generator(this,function(Q){switch(Q.label){case 0:return H=Array.from(this.instances.values()),[4,Promise.all(a.__spread(H.filter(function(J){return"INTERNAL"in J}).map(function(J){return J.INTERNAL.delete()}),H.filter(function(J){return"_delete"in J}).map(function(J){return J._delete()})))];case 1:return Q.sent(),[2]}})})},E.prototype.isComponentSet=function(){return this.component!=null},E.prototype.getOrInitializeService=function(H){var Q=this.instances.get(H);return!Q&&this.component&&(Q=this.component.instanceFactory(this.container,l(H)),this.instances.set(H,Q)),Q||null},E.prototype.normalizeInstanceIdentifier=function(H){return this.component?this.component.multipleInstances?H:f:H},E}();function l(E){return E===f?void 0:E}function q(E){return E.instantiationMode==="EAGER"}var u=function(){function E(H){this.name=H,this.providers=new Map()}return E.prototype.addComponent=function(H){var Q=this.getProvider(H.name);if(Q.isComponentSet())throw new Error("Component "+H.name+" has already been registered with "+this.name);Q.setComponent(H)},E.prototype.addOrOverwriteComponent=function(H){var Q=this.getProvider(H.name);Q.isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)},E.prototype.getProvider=function(H){if(this.providers.has(H))return this.providers.get(H);var Q=new i(H,this);return this.providers.set(H,Q),Q},E.prototype.getProviders=function(){return Array.from(this.providers.values())},E}();v.Component=d;v.ComponentContainer=u;v.Provider=i});var lr=Gc(H=>{be(H,{LogLevel:()=>f,Logger:()=>v,setLogLevel:()=>A,setUserLogHandler:()=>E});function a(){for(var J=0,S=0,aa=arguments.length;S<aa;S++)J+=arguments[S].length;for(var X=Array(J),ga=0,S=0;S<aa;S++)for(var ja=arguments[S],qa=0,ka=ja.length;qa<ka;qa++,ga++)X[ga]=ja[qa];return X}var b,d=[],f;(function(J){J[J.DEBUG=0]="DEBUG",J[J.VERBOSE=1]="VERBOSE",J[J.INFO=2]="INFO",J[J.WARN=3]="WARN",J[J.ERROR=4]="ERROR",J[J.SILENT=5]="SILENT"})(f||(f={}));var i={debug:f.DEBUG,verbose:f.VERBOSE,info:f.INFO,warn:f.WARN,error:f.ERROR,silent:f.SILENT},l=f.INFO,q=(b={},b[f.DEBUG]="log",b[f.VERBOSE]="log",b[f.INFO]="info",b[f.WARN]="warn",b[f.ERROR]="error",b),u=function(J,S){for(var aa=[],X=2;X<arguments.length;X++)aa[X-2]=arguments[X];if(S<J.logLevel)return;var ga=new Date().toISOString(),ja=q[S];if(ja)console[ja].apply(console,a(["["+ga+"]  "+J.name+":"],aa));else throw new Error("Attempted to log a message with an invalid logType (value: "+S+")")},v=function(){function J(S){this.name=S,this._logLevel=l,this._logHandler=u,this._userLogHandler=null,d.push(this)}return Object.defineProperty(J.prototype,"logLevel",{get:function(){return this._logLevel},set:function(S){if(!(S in f))throw new TypeError('Invalid value "'+S+'" assigned to `logLevel`');this._logLevel=S},enumerable:!1,configurable:!0}),J.prototype.setLogLevel=function(S){this._logLevel=typeof S==="string"?i[S]:S},Object.defineProperty(J.prototype,"logHandler",{get:function(){return this._logHandler},set:function(S){if(typeof S!=="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=S},enumerable:!1,configurable:!0}),Object.defineProperty(J.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(S){this._userLogHandler=S},enumerable:!1,configurable:!0}),J.prototype.debug=function(){for(var S=[],aa=0;aa<arguments.length;aa++)S[aa]=arguments[aa];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.DEBUG],S)),this._logHandler.apply(this,a([this,f.DEBUG],S))},J.prototype.log=function(){for(var S=[],aa=0;aa<arguments.length;aa++)S[aa]=arguments[aa];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.VERBOSE],S)),this._logHandler.apply(this,a([this,f.VERBOSE],S))},J.prototype.info=function(){for(var S=[],aa=0;aa<arguments.length;aa++)S[aa]=arguments[aa];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.INFO],S)),this._logHandler.apply(this,a([this,f.INFO],S))},J.prototype.warn=function(){for(var S=[],aa=0;aa<arguments.length;aa++)S[aa]=arguments[aa];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.WARN],S)),this._logHandler.apply(this,a([this,f.WARN],S))},J.prototype.error=function(){for(var S=[],aa=0;aa<arguments.length;aa++)S[aa]=arguments[aa];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.ERROR],S)),this._logHandler.apply(this,a([this,f.ERROR],S))},J}();function A(J){d.forEach(function(S){S.setLogLevel(J)})}function E(J,S){for(var aa=function(qa){var ka=null;S&&S.level&&(ka=i[S.level]),J===null?qa.userLogHandler=null:qa.userLogHandler=function(ta,va){for(var na=[],O=2;O<arguments.length;O++)na[O-2]=arguments[O];var R=na.map(function(x){if(x==null)return null;{if(typeof x==="string")return x;{if(typeof x==="number"||typeof x==="boolean")return x.toString();{if(x instanceof Error)return x.message;try{return JSON.stringify(x)}catch(G){return null}}}}}).filter(function(x){return x}).join(" ");va>=(ka!==null&&ka!==void 0?ka:ta.logLevel)&&J({level:f[va].toLowerCase(),message:R,args:na,type:ta.name})}},X=0,ga=d;X<ga.length;X++){var ja=ga[X];aa(ja)}}});var hr=Gc(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});var a=ir(),b=tl(),d=jr(),f=lr();var i,l=(i={},i["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",i),q=new b.ErrorFactory("app","Firebase",l),u="@firebase/app",v="0.6.11",A="@firebase/analytics",E="@firebase/auth",H="@firebase/database",Q="@firebase/functions",J="@firebase/installations",S="@firebase/messaging",aa="@firebase/performance",X="@firebase/remote-config",ga="@firebase/storage",ja="@firebase/firestore",qa="firebase-wrapper";var ka,ta="[DEFAULT]",va=(ka={},ka[u]="fire-core",ka[A]="fire-analytics",ka[E]="fire-auth",ka[H]="fire-rtdb",ka[Q]="fire-fn",ka[J]="fire-iid",ka[S]="fire-fcm",ka[aa]="fire-perf",ka[X]="fire-rc",ka[ga]="fire-gcs",ka[ja]="fire-fst",ka["fire-js"]="fire-js",ka[qa]="fire-js-all",ka);var na=new f.Logger("@firebase/app");var O=function(){function ra(ea,oa,ya){var ma,ib,kb=this;this.firebase_=ya,this.isDeleted_=!1,this.name_=oa.name,this.automaticDataCollectionEnabled_=oa.automaticDataCollectionEnabled||!1,this.options_=b.deepCopy(ea),this.container=new d.ComponentContainer(oa.name),this._addComponent(new d.Component("app",function(){return kb},"PUBLIC"));try{for(var lb=a.__values(this.firebase_.INTERNAL.components.values()),Da=lb.next();!Da.done;Da=lb.next()){var Ma=Da.value;this._addComponent(Ma)}}catch(eb){ma={error:eb}}finally{try{Da&&!Da.done&&(ib=lb.return)&&ib.call(lb)}finally{if(ma)throw ma.error}}}return Object.defineProperty(ra.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(ea){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=ea},enumerable:!1,configurable:!0}),Object.defineProperty(ra.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(ra.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),ra.prototype.delete=function(){var ea=this;return new Promise(function(oa){ea.checkDestroyed_(),oa()}).then(function(){return ea.firebase_.INTERNAL.removeApp(ea.name_),Promise.all(ea.container.getProviders().map(function(oa){return oa.delete()}))}).then(function(){ea.isDeleted_=!0})},ra.prototype._getService=function(ea,oa){return oa===void 0&&(oa=ta),this.checkDestroyed_(),this.container.getProvider(ea).getImmediate({identifier:oa})},ra.prototype._removeServiceInstance=function(ea,oa){oa===void 0&&(oa=ta),this.container.getProvider(ea).clearInstance(oa)},ra.prototype._addComponent=function(ea){try{this.container.addComponent(ea)}catch(oa){na.debug("Component "+ea.name+" failed to register with FirebaseApp "+this.name,oa)}},ra.prototype._addOrOverwriteComponent=function(ea){this.container.addOrOverwriteComponent(ea)},ra.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw q.create("app-deleted",{appName:this.name_})},ra}();O.prototype.name&&O.prototype.options||O.prototype.delete||console.log("dc");var R="7.20.0";function x(ra){var ea={},oa=new Map(),ya={__esModule:!0,initializeApp:kb,app:ib,registerVersion:Ma,setLogLevel:f.setLogLevel,onLog:eb,apps:null,SDK_VERSION:R,INTERNAL:{registerComponent:Da,removeApp:ma,components:oa,useAsService:jb}};ya.default=ya,Object.defineProperty(ya,"apps",{get:lb});function ma(pa){delete ea[pa]}function ib(pa){pa=pa||ta;if(!b.contains(ea,pa))throw q.create("no-app",{appName:pa});return ea[pa]}ib.App=ra;function kb(pa,za){za===void 0&&(za={});if(typeof za!=="object"||za===null){var Ra=za;za={name:Ra}}var ua=za;ua.name===void 0&&(ua.name=ta);var Ga=ua.name;if(typeof Ga!=="string"||!Ga)throw q.create("bad-app-name",{appName:String(Ga)});if(b.contains(ea,Ga))throw q.create("duplicate-app",{appName:Ga});var hb=new ra(pa,ua,ya);return ea[Ga]=hb,hb}function lb(){return Object.keys(ea).map(function(pa){return ea[pa]})}function Da(pa){var za,Ra,ua=pa.name;if(oa.has(ua))return na.debug("There were multiple attempts to register component "+ua+"."),pa.type==="PUBLIC"?ya[ua]:null;oa.set(ua,pa);if(pa.type==="PUBLIC"){var Ga=function(Ja){Ja===void 0&&(Ja=ib());if(typeof Ja[ua]!=="function")throw q.create("invalid-app-argument",{appName:ua});return Ja[ua]()};pa.serviceProps!==void 0&&b.deepExtend(Ga,pa.serviceProps),ya[ua]=Ga,ra.prototype[ua]=function(){for(var Ja=[],Za=0;Za<arguments.length;Za++)Ja[Za]=arguments[Za];var Zb=this._getService.bind(this,ua);return Zb.apply(this,pa.multipleInstances?Ja:[])}}try{for(var hb=a.__values(Object.keys(ea)),pb=hb.next();!pb.done;pb=hb.next()){var Ea=pb.value;ea[Ea]._addComponent(pa)}}catch(Ja){za={error:Ja}}finally{try{pb&&!pb.done&&(Ra=hb.return)&&Ra.call(hb)}finally{if(za)throw za.error}}return pa.type==="PUBLIC"?ya[ua]:null}function Ma(pa,za,Ra){var ua,Ga=(ua=va[pa])!==null&&ua!==void 0?ua:pa;Ra&&(Ga+="-"+Ra);var hb=Ga.match(/\s|\//),pb=za.match(/\s|\//);if(hb||pb){var Ea=['Unable to register library "'+Ga+'" with version "'+za+'":'];hb&&Ea.push('library name "'+Ga+'" contains illegal characters (whitespace or "/")'),hb&&pb&&Ea.push("and"),pb&&Ea.push('version name "'+za+'" contains illegal characters (whitespace or "/")'),na.warn(Ea.join(" "));return}Da(new d.Component(Ga+"-version",function(){return{library:Ga,version:za}},"VERSION"))}function eb(pa,za){if(pa!==null&&typeof pa!=="function")throw q.create("invalid-log-argument",{appName:name});f.setUserLogHandler(pa,za)}function jb(pa,za){if(za==="serverAuth")return null;var Ra=za;return Ra}return ya}function G(){var ra=x(O);ra.INTERNAL=a.__assign(a.__assign({},ra.INTERNAL),{createFirebaseNamespace:G,extendNamespace:ea,createSubscribe:b.createSubscribe,ErrorFactory:b.ErrorFactory,deepExtend:b.deepExtend});function ea(oa){b.deepExtend(ra,oa)}return ra}var F=G();var K=function(){function ra(ea){this.container=ea}return ra.prototype.getPlatformInfoString=function(){var ea=this.container.getProviders();return ea.map(function(oa){if(U(oa)){var ya=oa.getImmediate();return ya.library+"/"+ya.version}else return null}).filter(function(oa){return oa}).join(" ")},ra}();function U(ra){var ea=ra.getComponent();return(ea===null||ea===void 0?void 0:ea.type)==="VERSION"}function L(ra,ea){ra.INTERNAL.registerComponent(new d.Component("platform-logger",function(oa){return new K(oa)},"PRIVATE")),ra.registerVersion(u,v,ea),ra.registerVersion("fire-js","")}if(b.isBrowser()&&self.firebase!==void 0){na.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var da=self.firebase.SDK_VERSION;da&&da.indexOf("LITE")>=0&&na.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var ca=F.initializeApp;F.initializeApp=function(){for(var ra=[],ea=0;ea<arguments.length;ea++)ra[ea]=arguments[ea];return b.isNode()&&na.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/rollup-plugin-node-resolve
      `),ca.apply(void 0,ra)};var Ca=F;L(Ca);_.default=Ca;_.firebase=Ca});var jc=Gc((l,q)=>{"use strict";var a=hr();function b(u){return u&&typeof u==="object"&&"default"in u?u:{default:u}}var d=b(a),f="firebase",i="7.24.0";d.default.registerVersion(f,i,"app");q.exports=d.default});var vx=Gc((b,d)=>{var a=function(){function f(A,E){if(!u[A]){u[A]={};for(var H=0;H<A.length;H++)u[A][A.charAt(H)]=H}return u[A][E]}var i=String.fromCharCode,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",u={},v={compressToBase64:function(A){if(null==A)return"";var E=v._compress(A,6,function(H){return l.charAt(H)});switch(E.length%4){default:case 0:return E;case 1:return E+"===";case 2:return E+"==";case 3:return E+"="}},decompressFromBase64:function(A){return null==A?"":""==A?null:v._decompress(A.length,32,function(E){return f(l,A.charAt(E))})},compressToUTF16:function(A){return null==A?"":v._compress(A,15,function(E){return i(E+32)})+" "},decompressFromUTF16:function(A){return null==A?"":""==A?null:v._decompress(A.length,16384,function(E){return A.charCodeAt(E)-32})},compressToUint8Array:function(A){for(var E=v.compress(A),H=new Uint8Array(2*E.length),Q=0,J=E.length;J>Q;Q++){var S=E.charCodeAt(Q);H[2*Q]=S>>>8,H[2*Q+1]=S%256}return H},decompressFromUint8Array:function(A){if(null===A||void 0===A)return v.decompress(A);for(var E=new Array(A.length/2),H=0,Q=E.length;Q>H;H++)E[H]=256*A[2*H]+A[2*H+1];var J=[];return E.forEach(function(S){J.push(i(S))}),v.decompress(J.join(""))},compressToEncodedURIComponent:function(A){return null==A?"":v._compress(A,6,function(E){return q.charAt(E)})},decompressFromEncodedURIComponent:function(A){return null==A?"":""==A?null:(A=A.replace(/ /g,"+"),v._decompress(A.length,32,function(E){return f(q,A.charAt(E))}))},compress:function(A){return v._compress(A,16,function(E){return i(E)})},_compress:function(A,E,H){if(null==A)return"";var Q,J,S,aa={},X={},ga="",ja="",qa="",ka=2,ta=3,va=2,na=[],O=0,R=0;for(S=0;S<A.length;S+=1)if(ga=A.charAt(S),Object.prototype.hasOwnProperty.call(aa,ga)||(aa[ga]=ta++,X[ga]=!0),ja=qa+ga,Object.prototype.hasOwnProperty.call(aa,ja))qa=ja;else{if(Object.prototype.hasOwnProperty.call(X,qa)){if(qa.charCodeAt(0)<256){for(Q=0;va>Q;Q++)O<<=1,R==E-1?(R=0,na.push(H(O)),O=0):R++;for(J=qa.charCodeAt(0),Q=0;8>Q;Q++)O=O<<1|1&J,R==E-1?(R=0,na.push(H(O)),O=0):R++,J>>=1}else{for(J=1,Q=0;va>Q;Q++)O=O<<1|J,R==E-1?(R=0,na.push(H(O)),O=0):R++,J=0;for(J=qa.charCodeAt(0),Q=0;16>Q;Q++)O=O<<1|1&J,R==E-1?(R=0,na.push(H(O)),O=0):R++,J>>=1}ka--,0==ka&&(ka=Math.pow(2,va),va++),delete X[qa]}else for(J=aa[qa],Q=0;va>Q;Q++)O=O<<1|1&J,R==E-1?(R=0,na.push(H(O)),O=0):R++,J>>=1;ka--,0==ka&&(ka=Math.pow(2,va),va++),aa[ja]=ta++,qa=String(ga)}if(""!==qa){if(Object.prototype.hasOwnProperty.call(X,qa)){if(qa.charCodeAt(0)<256){for(Q=0;va>Q;Q++)O<<=1,R==E-1?(R=0,na.push(H(O)),O=0):R++;for(J=qa.charCodeAt(0),Q=0;8>Q;Q++)O=O<<1|1&J,R==E-1?(R=0,na.push(H(O)),O=0):R++,J>>=1}else{for(J=1,Q=0;va>Q;Q++)O=O<<1|J,R==E-1?(R=0,na.push(H(O)),O=0):R++,J=0;for(J=qa.charCodeAt(0),Q=0;16>Q;Q++)O=O<<1|1&J,R==E-1?(R=0,na.push(H(O)),O=0):R++,J>>=1}ka--,0==ka&&(ka=Math.pow(2,va),va++),delete X[qa]}else for(J=aa[qa],Q=0;va>Q;Q++)O=O<<1|1&J,R==E-1?(R=0,na.push(H(O)),O=0):R++,J>>=1;ka--,0==ka&&(ka=Math.pow(2,va),va++)}for(J=2,Q=0;va>Q;Q++)O=O<<1|1&J,R==E-1?(R=0,na.push(H(O)),O=0):R++,J>>=1;for(;;){if(O<<=1,R==E-1){na.push(H(O));break}R++}return na.join("")},decompress:function(A){return null==A?"":""==A?null:v._decompress(A.length,32768,function(E){return A.charCodeAt(E)})},_decompress:function(A,E,H){var Q,J,S,aa,X,ga,ja,qa,ka=[],ta=4,va=4,na=3,O="",R=[],x={val:H(0),position:E,index:1};for(J=0;3>J;J+=1)ka[J]=J;for(aa=0,ga=Math.pow(2,2),ja=1;ja!=ga;)X=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),aa|=(X>0?1:0)*ja,ja<<=1;switch(Q=aa){case 0:for(aa=0,ga=Math.pow(2,8),ja=1;ja!=ga;)X=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),aa|=(X>0?1:0)*ja,ja<<=1;qa=i(aa);break;case 1:for(aa=0,ga=Math.pow(2,16),ja=1;ja!=ga;)X=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),aa|=(X>0?1:0)*ja,ja<<=1;qa=i(aa);break;case 2:return""}for(ka[3]=qa,S=qa,R.push(qa);;){if(x.index>A)return"";for(aa=0,ga=Math.pow(2,na),ja=1;ja!=ga;)X=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),aa|=(X>0?1:0)*ja,ja<<=1;switch(qa=aa){case 0:for(aa=0,ga=Math.pow(2,8),ja=1;ja!=ga;)X=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),aa|=(X>0?1:0)*ja,ja<<=1;ka[va++]=i(aa),qa=va-1,ta--;break;case 1:for(aa=0,ga=Math.pow(2,16),ja=1;ja!=ga;)X=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),aa|=(X>0?1:0)*ja,ja<<=1;ka[va++]=i(aa),qa=va-1,ta--;break;case 2:return R.join("")}if(0==ta&&(ta=Math.pow(2,na),na++),ka[qa])O=ka[qa];else{if(qa!==va)return null;O=S+S.charAt(0)}R.push(O),ka[va++]=S+O.charAt(0),ta--,S=O,0==ta&&(ta=Math.pow(2,na),na++)}}};return v}();"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof d&&null!=d&&(d.exports=a)});const La={AUTO:"Auto",BACKGROUND_COLOR:"BackgroundColor",BANNER:"Banner",BATCH_SIZE:"BatchSize",CANVAS_CONTEXT:"CanvasContext",CANVAS:"Canvas",DEFAULT_ORIGIN:"DefaultOrigin",GLOBAL_VAR:"GlobalVar",MAX_TEXTURES:"MaxTextures",PARENT:"Parent",RENDERER:"Renderer",SCENES:"Scenes",SIZE:"Size",WEBGL_CONTEXT:"WebGLContext",WEBGL:"WebGL"};const Ka=new Map();function qi(a){Ka.set(La.BACKGROUND_COLOR,a)}function ol(a){return()=>{qi(a)}}function ri(a="",b="",d="",f="#fff",i="linear-gradient(#3e0081 40%, #00bcc3)"){Ka.set(La.BANNER,{title:a,version:b,url:d,color:f,background:i})}function Dl(a){Ka.set(La.BATCH_SIZE,a)}function Md(){return Ka.get(La.SIZE).height}function Nd(){return Ka.get(La.SIZE).resolution}function Od(){return Ka.get(La.SIZE).width}function Eg(a=800,b=600,d=1){d===0&&(d=window.devicePixelRatio),Ka.set(La.SIZE,{width:a,height:b,resolution:d})}function oi(a=800,b=600,d=1){return()=>{Eg(a,b,d)}}const bm=[],Df={add:(a,b)=>{bm.push({texture:a,glConfig:b})},get:()=>bm,clear:()=>{bm.length=0}};function El(){return Ka.get(La.BACKGROUND_COLOR)}function ti(a){Ka.set(La.RENDERER,a)}function si(a=.5,b=a){Ka.set(La.DEFAULT_ORIGIN,{x:a,y:b})}function zf(a){Ka.set(La.MAX_TEXTURES,a)}function Gg(a){let b;return a&&(typeof a==="string"?b=document.getElementById(a):typeof a==="object"&&a.nodeType===1&&(b=a)),b||(b=document.body),b}function Hl(a){a&&Ka.set(La.PARENT,Gg(a))}function mi(a){return()=>{Hl(a)}}function Jl(a){Ka.set(La.SCENES,[].concat(a))}function ni(a){return()=>{Jl(a)}}function Ei(a,b,d){return a.width<=0||a.height<=0?!1:a.x<=b&&a.x+a.width>=b&&a.y<=d&&a.y+a.height>=d}class Nb{constructor(a=0,b=0,d=0,f=0){this.set(a,b,d,f)}set(a=0,b=0,d=0,f=0){return this.x=a,this.y=b,this.width=d,this.height=f,this}contains(a,b){return Ei(this,a,b)}set right(a){a<=this.x?this.width=0:this.width=a-this.x}get right(){return this.x+this.width}set bottom(a){a<=this.y?this.height=0:this.height=a-this.y}get bottom(){return this.y+this.height}}function qm(a,b=0,d=0,f=0,i=0){const l=new Nb(b,d,f,i);return a.viewportStack.push(l),l}let I;const Fr={get:()=>I,set:a=>{I=a}};function Ee(a,b){if(!b){b=a.currentViewport;if(!b)return}const d=I.getParameter(I.VIEWPORT);(d[0]!==b.x||d[1]!==b.y||d[2]!==b.width||d[3]!==b.height)&&I.viewport(b.x,b.y,b.width,b.height)}function sm(a,b=0,d=0,f=0,i=0){const l=qm(a,b,d,f,i);Ee(a,l),a.currentViewport=l}function Ce(a,b=!0,d){d||(d=a.currentFramebuffer);const{framebuffer:f,viewport:i}=d;I.bindFramebuffer(I.FRAMEBUFFER,f),b&&(I.clearColor(0,0,0,0),I.clear(I.COLOR_BUFFER_BIT|I.DEPTH_BUFFER_BIT)),i&&sm(a,i.x,i.y,i.width,i.height)}function wm(a){const b=a.viewportStack;b.length>1&&b.pop(),a.currentViewport=b[b.length-1],Ee(a)}function ze(a){const b=a.framebufferStack;b.length>1&&(a.currentFramebuffer.viewport&&wm(a),b.pop()),a.currentFramebuffer=b[b.length-1],Ce(a,!1)}function nm(a,b,d){const f={framebuffer:b,viewport:d};return a.framebufferStack.push(f),f}function Bf(a,b,d=!0,f){const i=nm(a,b,f);Ce(a,d,i),a.currentFramebuffer=i}function vm(a){const b=a.count;if(b===0)return;const d=a.currentVertexBuffer,f=a.currentShader,i=f.shader.renderToFramebuffer;i&&Bf(a,f.shader.framebuffer,!0);if(b===d.batchSize){const l=d.isDynamic?I.DYNAMIC_DRAW:I.STATIC_DRAW;I.bufferData(I.ARRAY_BUFFER,d.data,l)}else{const l=d.indexed?b*d.entryElementSize:b*d.vertexElementSize,q=d.vertexViewF32.subarray(0,l);I.bufferSubData(I.ARRAY_BUFFER,0,q)}d.indexed?I.drawElements(I.TRIANGLES,b*d.entryIndexSize,I.UNSIGNED_SHORT,0):I.drawArrays(I.TRIANGLES,0,b),i&&ze(a)}function Wb(a,b){b&&(a.count=b);const d=a.count;return d===0?!1:(vm(a),a.prevCount=d,a.count=0,a.flushTotal++,!0)}function cm(a){Wb(a)}function Hr(a,b=[]){const d=a>>16&255,f=a>>8&255,i=a&255,l=a>16777215?a>>>24:255;return b[0]=d/255,b[1]=f/255,b[2]=i/255,b[3]=l/255,b}function vr(){return Ka.get(La.WEBGL_CONTEXT)}function Ji(a){const{parent:b,flipY:d,unpackPremultiplyAlpha:f,minFilter:i,magFilter:l,wrapS:q,wrapT:u,generateMipmap:v,isPOT:A}=a,E=b.image;let H=b.width,Q=b.height;const J=I.createTexture();return I.activeTexture(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,J),I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,d),I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,f),E?(I.texImage2D(I.TEXTURE_2D,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,E),H=E.width,Q=E.height):I.texImage2D(I.TEXTURE_2D,0,I.RGBA,H,Q,0,I.RGBA,I.UNSIGNED_BYTE,null),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,i),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,l),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,q),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,u),v&&A&&I.generateMipmap(I.TEXTURE_2D),a.texture=J,J}function sd(a){I&&I.isFramebuffer(a)&&I.deleteFramebuffer(a)}function Ug(a){I.isTexture(a)&&I.deleteTexture(a)}function Br(a,b){return a<1||b<1?!1:(a&a-1)===0&&(b&b-1)===0}function Pr(a,b=!0){I.activeTexture(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,a);const d=b?I.LINEAR:I.NEAREST;I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,d),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,d)}function Qr(a){const b=a.parent.image,d=b.width,f=b.height;return d>0&&f>0&&(I.activeTexture(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,a.texture),I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,a.flipY),I.texImage2D(I.TEXTURE_2D,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,b)),a.texture}class Cf{constructor(a,b={}){this.index=0,this.indexCounter=-1,this.dirtyIndex=!0,this.unpackPremultiplyAlpha=!0,this.flipY=!1,this.isPOT=!1,this.generateMipmap=!1,this.parent=a,this.isPOT=Br(a.width,a.height);const{texture:d=null,framebuffer:f=null,depthbuffer:i=null,unpackPremultiplyAlpha:l=!0,minFilter:q=this.isPOT?I.LINEAR_MIPMAP_LINEAR:I.LINEAR,magFilter:u=I.LINEAR,wrapS:v=I.CLAMP_TO_EDGE,wrapT:A=I.CLAMP_TO_EDGE,generateMipmap:E=this.isPOT,flipY:H=!1}=b;this.minFilter=q,this.magFilter=u,this.wrapS=v,this.wrapT=A,this.generateMipmap=E,this.flipY=H,this.unpackPremultiplyAlpha=l,f&&(this.framebuffer=f),i&&(this.depthbuffer=i),d?this.texture=d:Ji(this)}setFilter(a){this.texture&&Pr(this.texture,a)}create(){const a=this.texture;return a&&Ug(a),Ji(this)}update(){const a=this.texture;return a?Qr(this):Ji(this)}setIndex(a){this.dirtyIndex=a!==this.index,this.index=a}destroy(){Ug(this.texture),sd(this.framebuffer),this.parent=null,this.texture=null,this.framebuffer=null}}function dm(){const a=Df.get();a.forEach(b=>{const{texture:d,glConfig:f}=b;d.binding||(d.binding=new Cf(d,f))}),Df.clear()}function Fg(){return Ka.get(La.MAX_TEXTURES)}const by=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function cy(a){let b="";for(let d=0;d<a;++d)d>0&&(b+=`
else `),d<a-1&&(b+=`if(test == ${d}.0){}`);return b}function tm(a){const b=I.createShader(I.FRAGMENT_SHADER);for(;;){const d=by.replace(/%forloop%/gi,cy(a));I.shaderSource(b,d),I.compileShader(b);if(!I.getShaderParameter(b,I.COMPILE_STATUS))a=a/2|0;else break}return a}function um(a){let b=tm(I.getParameter(I.MAX_TEXTURE_IMAGE_UNITS));const d=Fg();d===0||d>0&&d>b?zf(b):d>0&&d<b&&(b=Math.max(8,d));const f=a.tempTextures;f.length&&f.forEach(l=>{I.deleteTexture(l)});const i=[];for(let l=0;l<b;l++){const q=I.createTexture();I.activeTexture(I.TEXTURE0+l),I.bindTexture(I.TEXTURE_2D,q),I.texImage2D(I.TEXTURE_2D,0,I.RGBA,1,1,0,I.RGBA,I.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),f[l]=q,i.push(l)}a.maxTextures=b,a.textureIndex=i,a.currentActiveTexture=1}function tr(){return Ka.get(La.BATCH_SIZE)}function Qg(a){I.isBuffer(a)&&I.deleteBuffer(a)}class Jr{constructor(a={}){this.indexed=!1,this.isDynamic=!1,this.count=0,this.offset=0;const{batchSize:b=1,dataSize:d=4,isDynamic:f=!0,elementsPerEntry:i=4,vertexElementSize:l=6}=a;this.batchSize=b,this.dataSize=d,this.vertexElementSize=l,this.isDynamic=f,this.elementsPerEntry=i,this.vertexByteSize=l*d,this.entryByteSize=this.vertexByteSize*i,this.bufferByteSize=b*this.entryByteSize,this.create()}resize(a){this.batchSize=a,this.bufferByteSize=a*this.entryByteSize,this.vertexBuffer&&Qg(this.vertexBuffer),this.create()}create(){const a=new ArrayBuffer(this.bufferByteSize);this.data=a,this.vertexViewF32=new Float32Array(a),this.vertexViewU32=new Uint32Array(a),this.vertexBuffer=I.createBuffer(),I.bindBuffer(I.ARRAY_BUFFER,this.vertexBuffer);const b=this.isDynamic?I.DYNAMIC_DRAW:I.STATIC_DRAW;I.bufferData(I.ARRAY_BUFFER,a,b),I.bindBuffer(I.ARRAY_BUFFER,null)}add(a){this.count+=a,this.offset+=this.vertexElementSize*a}reset(){this.count=0,this.offset=0}canContain(a){return this.count+a<=this.batchSize}free(){return Math.max(0,1-this.count/this.batchSize)}bind(){I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,null),I.bindBuffer(I.ARRAY_BUFFER,this.vertexBuffer)}destroy(){Qg(this.vertexBuffer),this.data=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexBuffer=null}}class hm extends Jr{constructor(a={}){super(a);const{indexSize:b=4,entryIndexSize:d=6,indexLayout:f=null}=a;this.indexed=!0,this.indexSize=b,this.entryIndexSize=d,this.entryElementSize=this.vertexElementSize*this.elementsPerEntry;const i=[];if(f){this.indexLayout=f;for(let l=0;l<this.batchSize*b;l+=b)for(let q=0;q<f.length;q++)i.push(l+f[q])}this.create(),this.createIndexBuffer(i)}createIndexBuffer(a){this.index=new Uint16Array(a),this.indexBuffer=I.createBuffer(),I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,this.indexBuffer),I.bufferData(I.ELEMENT_ARRAY_BUFFER,this.index,I.STATIC_DRAW),I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,null),a=[]}bind(){I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,this.indexBuffer),I.bindBuffer(I.ARRAY_BUFFER,this.vertexBuffer)}destroy(){super.destroy(),Qg(this.indexBuffer),this.index=null,this.indexLayout=null,this.indexBuffer=null}}const Yr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hy=new Uint8Array(256);for(let a=0;a<Yr.length;a++)hy[Yr.charCodeAt(a)]=a;function Ae(){}class Wa{constructor(a){const b=new Float32Array(16);this.data=b,this.onChange=Ae,a?Array.isArray(a)?this.fromArray(a):this.fromArray(a.data):(b[0]=1,b[5]=1,b[10]=1,b[15]=1)}set(a,b,d,f,i,l,q,u,v,A,E,H,Q,J,S,aa){const X=this.data;return X[0]=a,X[1]=b,X[2]=d,X[3]=f,X[4]=i,X[5]=l,X[6]=q,X[7]=u,X[8]=v,X[9]=A,X[10]=E,X[11]=H,X[12]=Q,X[13]=J,X[14]=S,X[15]=aa,this.onChange(this),this}toArray(a=[],b=0){const d=this.data;for(let f=0;f<16;f++)a[b+f]=d[f];return a}fromArray(a,b=0){const d=this.data;for(let f=0;f<16;f++)d[f]=a[b+f];return this.onChange(this),this}toString(){return"[ mat4="+this.data.join(", ")+" ]"}destroy(){this.onChange=Ae,this.data=null}}function am(a,b,d,f,i,l,q=new Wa()){const u=1/(a-b),v=1/(d-f),A=1/(i-l);return q.set(-2*u,0,0,0,0,-2*v,0,0,0,0,2*A,0,(a+b)*u,(f+d)*v,(l+i)*A,1)}function Dm(a,b){const d=new Map(),f={size:1,type:I.FLOAT,normalized:!1,stride:0,offset:0},i=I.getProgramParameter(a,I.ACTIVE_ATTRIBUTES);for(let l=0;l<i;l++){const q=I.getActiveAttrib(a,l);if(!q)break;const u=q.name,v=I.getAttribLocation(a,u);I.enableVertexAttribArray(v);const A=b.hasOwnProperty(u)?b[u]:{},{size:E=f.size,type:H=f.type,normalized:Q=f.normalized,stride:J=f.stride,offset:S=f.offset}=A;d.set(u,{index:v,size:E,type:H,normalized:Q,stride:J,offset:S})}return d}function Tg(...a){a.forEach(b=>{I.deleteShader(b)})}function Em(...a){const b=I.createProgram();a.forEach(f=>{I.attachShader(b,f)}),I.linkProgram(b);const d=I.getProgramParameter(b,I.LINK_STATUS);if(!d){const f=I.getProgramInfoLog(b);return console.error(`Error linking program: ${f}`),I.deleteProgram(b),Tg(...a),null}return b}function Ii(a,b){const d=I.createShader(b);I.shaderSource(d,a),I.compileShader(d);const f=I.getShaderParameter(d,I.COMPILE_STATUS);if(!f){const i=I.getShaderInfoLog(d),l=a.split(`
`).map((q,u)=>`${u}: ${q}`);return console.error(`Error compiling shader: ${i}`,l.join(`
`)),I.deleteShader(d),null}return d}function Fm(a,b,d=!1){switch(a.type){case I.INT:case I.BOOL:return d?f=>{I.uniform1iv(b,f)}:f=>{I.uniform1i(b,f)};case I.INT_VEC2:case I.BOOL_VEC2:return f=>{I.uniform2iv(b,f)};case I.INT_VEC3:case I.BOOL_VEC3:return f=>{I.uniform3iv(b,f)};case I.INT_VEC4:case I.BOOL_VEC4:return f=>{I.uniform4iv(b,f)};case I.FLOAT:return d?f=>{I.uniform1fv(b,f)}:f=>{I.uniform1f(b,f)};case I.FLOAT_VEC2:return f=>{I.uniform2fv(b,f)};case I.FLOAT_VEC3:return f=>{I.uniform3fv(b,f)};case I.FLOAT_VEC4:return f=>{I.uniform4fv(b,f)};case I.FLOAT_MAT2:return f=>{I.uniformMatrix2fv(b,!1,f)};case I.FLOAT_MAT3:return f=>{I.uniformMatrix3fv(b,!1,f)};case I.FLOAT_MAT4:return f=>{I.uniformMatrix4fv(b,!1,f)};case I.SAMPLER_2D:case I.SAMPLER_CUBE:return a.size>1?f=>{I.uniform1iv(b,f)}:f=>{I.uniform1i(b,f)}}}function Gm(a){const b=new Map(),d=I.getProgramParameter(a,I.ACTIVE_UNIFORMS);for(let f=0;f<d;f++){const i=I.getActiveUniform(a,f);let l=i.name;if(l.startsWith("gl_")||l.startsWith("webgl_"))continue;const q=I.getUniformLocation(a,i.name);if(q){let u=!1;l.substr(-3)==="[0]"&&(l=l.substr(0,l.length-3),u=i.size>1),b.set(l,Fm(i,q,u))}}return b}const Gr=5121,Fi=5126;const Ge={aVertexPosition:{size:2,type:Fi,normalized:!1,offset:0},aTextureCoord:{size:2,type:Fi,normalized:!1,offset:8},aTextureId:{size:1,type:Fi,normalized:!1,offset:16},aTintColor:{size:4,type:Gr,normalized:!0,offset:20}};const Hm={uProjectionMatrix:new Float32Array(),uCameraMatrix:new Float32Array(),uTexture:0};function Lr(a,b,d){I.bindFramebuffer(I.FRAMEBUFFER,a);const f=I.createRenderbuffer();return I.bindRenderbuffer(I.RENDERBUFFER,f),I.renderbufferStorage(I.RENDERBUFFER,I.DEPTH_COMPONENT16,b,d),I.framebufferRenderbuffer(I.FRAMEBUFFER,I.DEPTH_ATTACHMENT,I.RENDERBUFFER,f),I.bindFramebuffer(I.FRAMEBUFFER,null),f}function Bi(a,b){b||(b=I.COLOR_ATTACHMENT0);const d=I.createFramebuffer();return I.bindFramebuffer(I.FRAMEBUFFER,d),I.framebufferTexture2D(I.FRAMEBUFFER,b,I.TEXTURE_2D,a,0),I.bindFramebuffer(I.FRAMEBUFFER,null),d}const Nr=`#define SHADER_NAME SINGLE_QUAD_FRAG

precision highp float;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vTintColor;

uniform sampler2D uTexture;

void main (void)
{
    vec4 color = texture2D(uTexture, vTextureCoord);

    gl_FragColor = color * vec4(vTintColor.bgr * vTintColor.a, vTintColor.a);
}`;const Or=`#define SHADER_NAME SINGLE_QUAD_VERT

precision highp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute float aTextureId;
attribute vec4 aTintColor;

uniform mat4 uProjectionMatrix;
uniform mat4 uCameraMatrix;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vTintColor;

void main (void)
{
    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vTintColor = aTintColor;

    gl_Position = uProjectionMatrix * uCameraMatrix * vec4(aVertexPosition, 0.0, 1.0);
}`;class Jm{constructor(a,b,d,f,i,l){this.trimmed=!1,this.texture=a,this.key=b,this.x=d,this.y=f,this.width=i,this.height=l,this.sourceSizeWidth=i,this.sourceSizeHeight=l,this.updateUVs()}setPivot(a,b){this.pivot={x:a,y:b}}setSize(a,b){this.width=a,this.height=b,this.sourceSizeWidth=a,this.sourceSizeHeight=b,this.updateUVs()}setSourceSize(a,b){this.sourceSizeWidth=a,this.sourceSizeHeight=b}setTrim(a,b,d,f,i,l){this.trimmed=!0,this.sourceSizeWidth=a,this.sourceSizeHeight=b,this.spriteSourceSizeX=d,this.spriteSourceSizeY=f,this.spriteSourceSizeWidth=i,this.spriteSourceSizeHeight=l}getExtent(a,b){const d=this.sourceSizeWidth,f=this.sourceSizeHeight;let i,l,q,u;return this.trimmed?(i=this.spriteSourceSizeX-a*d,l=i+this.spriteSourceSizeWidth,q=this.spriteSourceSizeY-b*f,u=q+this.spriteSourceSizeHeight):(i=-a*d,l=i+d,q=-b*f,u=q+f),{left:i,right:l,top:q,bottom:u}}copyToExtent(a){const b=a.transform,d=b.origin.x,f=b.origin.y,i=this.sourceSizeWidth,l=this.sourceSizeHeight;let q,u,v,A;return this.trimmed?(q=this.spriteSourceSizeX-d*i,u=this.spriteSourceSizeY-f*l,v=this.spriteSourceSizeWidth,A=this.spriteSourceSizeHeight):(q=-d*i,u=-f*l,v=i,A=l),b.setExtent(q,u,v,A),this}copyToVertices(a,b=0){const{u0:d,u1:f,v0:i,v1:l}=this;return a[b+0].setUV(d,i),a[b+1].setUV(d,l),a[b+2].setUV(f,l),a[b+3].setUV(f,i),this}updateUVs(){const{x:a,y:b,width:d,height:f}=this,i=this.texture.width,l=this.texture.height;this.u0=a/i,this.v0=b/l,this.u1=(a+d)/i,this.v1=(b+f)/l}}class ac{constructor(a,b,d,f){this.key="",a&&(b=a.width,d=a.height),this.image=a,this.width=b,this.height=d,this.frames=new Map(),this.data={},this.addFrame("__BASE",0,0,b,d),Df.add(this,f)}addFrame(a,b,d,f,i){if(this.frames.has(a))return null;const l=new Jm(this,a,b,d,f,i);return this.frames.set(a,l),(!this.firstFrame||this.firstFrame.key==="__BASE")&&(this.firstFrame=l),l}getFrame(a){if(!a)return this.firstFrame;a instanceof Jm&&(a=a.key);let b=this.frames.get(a);return b||(console.warn(`Frame missing: ${a}`),b=this.firstFrame),b}setSize(a,b){this.width=a,this.height=b;const d=this.frames.get("__BASE");d.setSize(a,b)}destroy(){this.binding&&this.binding.destroy(),this.frames.clear(),this.data=null,this.image=null,this.firstFrame=null}}class Im{constructor(a){this.renderToFramebuffer=!1,this.renderToDepthbuffer=!1,a&&this.fromConfig(a)}fromConfig(a){const{attributes:b=Ge,fragmentShader:d=Nr,height:f=Md(),renderToFramebuffer:i=!1,renderToDepthbuffer:l=!1,resolution:q=Nd(),vertexShader:u=Or,width:v=Od(),uniforms:A=Hm}=a;this.create(d,u,A,b);if(i){this.renderToFramebuffer=!0;const E=new ac(null,v*q,f*q),H=new Cf(E);E.binding=H,H.framebuffer=Bi(H.texture),l&&(this.renderToDepthbuffer=!0,H.depthbuffer=Lr(H.framebuffer,E.width,E.height)),this.texture=E,this.framebuffer=H.framebuffer}}create(a,b,d,f){const i=Ii(a,I.FRAGMENT_SHADER),l=Ii(b,I.VERTEX_SHADER);if(!i||!l)return;const q=Em(i,l);if(!q)return;const u=I.getParameter(I.CURRENT_PROGRAM);I.useProgram(q),this.program=q,this.uniformSetters=Gm(q),this.uniforms=new Map();for(const[v,A]of Object.entries(d))this.uniforms.set(v,A);this.attributes=Dm(q,f),I.useProgram(u)}updateUniforms(a){}bind(a){return this.updateUniforms(a),this.setUniforms(a)}setUniform(a,b){const d=this.uniforms;if(d.has(a)){d.set(a,b);const f=this.uniformSetters.get(a);f(b)}}setUniforms(a){if(!this.program)return!1;I.useProgram(this.program);const b=this.uniforms;for(const[d,f]of this.uniformSetters.entries())f(b.get(d));return!0}setAttributes(a){if(this.program){const b=a.currentVertexBuffer.vertexByteSize;this.attributes.forEach(d=>{I.vertexAttribPointer(d.index,d.size,d.type,d.normalized,b,d.offset)})}}destroy(){Tg(this.program),Ug(this.texture),sd(this.framebuffer),this.uniforms.clear(),this.uniformSetters.clear(),this.attributes.clear(),this.program=null,this.texture=null,this.framebuffer=null}}class Fe extends Im{constructor(a={}){const b=a;b.attributes=b.attributes?b.attributes:Ge,super(b)}bind(a){const b=this.uniforms;return b.set("uProjectionMatrix",a.projectionMatrix.data),b.set("uCameraMatrix",a.cameraMatrix.data),super.bind(a)}}class dy extends Fe{constructor(a={}){const b=a;b.attributes=b.attributes?b.attributes:Ge,b.renderToFramebuffer=!0,super(b)}bind(a){const b=a.renderer;return this.uniforms.set("uTime",performance.now()),this.uniforms.set("uResolution",[b.width,b.height]),super.bind(a)}}const Mr=`#define SHADER_NAME MULTI_QUAD_FRAG

precision highp float;

varying vec2 vTextureCoord;
varying float vTextureId;
varying vec4 vTintColor;

uniform sampler2D uTexture[%count%];

void main (void)
{
    vec4 color;

    %forloop%

    gl_FragColor = color * vec4(vTintColor.bgr * vTintColor.a, vTintColor.a);
}`;class xm extends Fe{constructor(a={}){a.fragmentShader||(a.fragmentShader=Mr),super(a)}create(a,b,d,f){const i=Fg();let l="";for(let q=1;q<i;q++)q>1&&(l+=`
	else `),q<i-1&&(l+=`if (vTextureId < ${q}.5)`),l+=`
	{`,l+=`
		color = texture2D(uTexture[${q}], vTextureCoord);`,l+=`
	}`;a=a.replace(/%count%/gi,`${i}`),a=a.replace(/%forloop%/gi,l),super.create(a,b,d,f)}bind(a){return this.uniforms.set("uTexture",a.textureIndex),super.bind(a)}}function ym(a,b,d,f){const i={enable:b,sfactor:d,dfactor:f};a.blendModeStack[0]=i,a.currentBlendMode=i,a.defaultBlendMode=i}function zm(a,b=null,d){const f={framebuffer:b,viewport:d};a.framebufferStack[0]=f,a.currentFramebuffer=f,a.defaultFramebuffer=f}function Am(a,b,d){const f={shader:b,textureID:d};a.shaderStack[0]=f,a.currentShader=f,a.defaultShader=f}function Bm(a,b){a.vertexBufferStack[0]=b,a.currentVertexBuffer=b,a.defaultVertexBuffer=b}function Cm(a,b=0,d=0,f=0,i=0){const l=new Nb(b,d,f,i);a.viewportStack[0]=l,a.currentViewport=l,a.defaultViewport=l}let qr,rr=0,sr=0;const Mb={get:()=>qr,set:a=>{qr=a},getFrame:()=>rr,setFrame:a=>{rr=a},getElapsed:()=>sr,setElapsed:a=>{sr=a}};function yf(a=new Wa()){return a.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}class te{constructor(a=1,b=0,d=0,f=1,i=0,l=0){this.set(a,b,d,f,i,l)}set(a=1,b=0,d=0,f=1,i=0,l=0){return this.a=a,this.b=b,this.c=d,this.d=f,this.tx=i,this.ty=l,this}identity(){return this.set()}toArray(){const{a,b,c:d,d:f,tx:i,ty:l}=this;return[a,b,d,f,i,l]}fromArray(a){return this.set(a[0],a[1],a[2],a[3],a[4],a[5])}}class Yc{constructor(a,b=0,d=0){this._x=b,this._y=d,this.onChange=a}destroy(){this.onChange=Ae}set(a=0,b=0){return this._x=a,this._y=b,this.onChange&&this.onChange(this),this}get x(){return this._x}set x(a){const b=this._x;this._x=a,b!==a&&this.onChange(this)}get y(){return this._y}set y(a){const b=this._y;this._y=a,b!==a&&this.onChange(this)}toArray(a=[],b=0){const{x:d,y:f}=this;return a[b]=d,a[b+1]=f,a}fromArray(a,b=0){return this.set(a[b],a[b+1])}toString(){const{x:a,y:b}=this;return`{ x=${a}, y=${b} }`}}const Pg={PI2:Math.PI*2,HALF_PI:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};function $l(a,b,d){const f=d-b;return b+((a-b)%f+f)%f}function Bl(a){return $l(a,-Math.PI,Math.PI)}class Cl{constructor(){this._rotation=0,this.type="Camera",this.dirtyRender=!0;const a=Mb.get();this.renderer=a.renderer,this.matrix=yf(),this.bounds=new Nb(),this.worldTransform=new te(),this.position=new Yc(()=>this.updateTransform(),0,0),this.scale=new Yc(()=>this.updateTransform(),1,1),this.origin=new Yc(()=>this.updateTransform(),.5,.5),this.reset()}updateTransform(){const a=this.matrix.data,b=this.position.x,d=this.position.y,f=this.scale.x,i=this.scale.y,l=-b+this.width*this.origin.x,q=-d+this.height*this.origin.y,u=Math.sin(this.rotation),v=Math.cos(this.rotation),A=u+u,E=u*A,H=v*A,Q=(1-E)*f,J=H*f,S=-H*i,aa=(1-E)*i;a[0]=Q,a[1]=J,a[4]=S,a[5]=aa,a[12]=b+l-(Q*l+S*q),a[13]=d+q-(J*l+aa*q),this.worldTransform.set(v*f,u*f,-u*i,v*i,-b,-d);const X=this.width*(1/f),ga=this.height*(1/i);this.bounds.set(l-X/2,q-ga/2,X,ga),this.dirtyRender=!0}reset(){const a=this.renderer.width,b=this.renderer.height;this.width=a,this.height=b,this.bounds.set(0,0,a,b)}set rotation(a){a!==this._rotation&&(this._rotation=Bl(a),this.updateTransform())}get rotation(){return this._rotation}destroy(){this.position.destroy(),this.scale.destroy(),this.origin.destroy(),this.world=null,this.worldTransform=null,this.renderer=null,this.matrix=null,this.bounds=null}}class Dg{constructor(){this.type="StaticCamera",this.dirtyRender=!0;const a=Mb.get();this.renderer=a.renderer,this.matrix=yf(),this.bounds=new Nb(),this.worldTransform=new te(),this.reset()}reset(){const a=this.renderer;if(a){const b=a.width,d=a.height;this.width=b,this.height=d}this.bounds.set(0,0,this.width,this.height)}destroy(){this.world=null,this.worldTransform=null,this.renderer=null,this.matrix=null,this.bounds=null}}class em{constructor(a){this.count=0,this.prevCount=0,this.flushTotal=0,this.maxTextures=0,this.currentActiveTexture=0,this.startActiveTexture=0,this.tempTextures=[],this.textureIndex=[],this.framebufferStack=[],this.currentFramebuffer=null,this.defaultFramebuffer=null,this.vertexBufferStack=[],this.currentVertexBuffer=null,this.defaultVertexBuffer=null,this.shaderStack=[],this.currentShader=null,this.defaultShader=null,this.viewportStack=[],this.currentViewport=null,this.defaultViewport=null,this.blendModeStack=[],this.currentBlendMode=null,this.defaultBlendMode=null,this.renderer=a,this.projectionMatrix=new Wa(),this.reset()}reset(){const a=this.renderer.gl,b=[0,1,2,2,3,0];this.quadShader=new Fe(),this.quadBuffer=new hm({isDynamic:!1,indexLayout:b}),this.quadCamera=new Dg(),um(this),zm(this),ym(this,!0,a.ONE,a.ONE_MINUS_SRC_ALPHA),Bm(this,new hm({batchSize:tr(),indexLayout:b})),Am(this,new xm())}resize(a,b){am(0,a,b,0,-1e3,1e3,this.projectionMatrix),this.quadCamera.reset(),Cm(this,0,0,a,b)}}function om(a,b,d){const f={shader:b,textureID:d};return a.shaderStack.push(f),f}function pm(a,b){return a.vertexBufferStack.push(b),b}function Be(a,b){b||(b=a.currentShader);const d=b.shader.bind(a,b.textureID);d&&b.shader.setAttributes(a)}function rm(a,b){a.current2DCamera=b,a.cameraMatrix=b.matrix,Be(a)}function Sg(a,b){b||(b=a.currentBlendMode),b.enable?(I.enable(I.BLEND),I.blendFunc(b.sfactor,b.dfactor)):I.disable(I.BLEND)}function jm(a,b=0){const d=a.binding;d.setIndex(b),I.activeTexture(I.TEXTURE0+b),I.bindTexture(I.TEXTURE_2D,d.texture)}function De(a,b){b||(b=a.currentVertexBuffer);const d=b.indexed?b.indexBuffer:null;I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,d),I.bindBuffer(I.ARRAY_BUFFER,b.vertexBuffer)}function Gi(a){const b=a.vertexBufferStack;b.length>1&&b.pop(),a.currentVertexBuffer=b[b.length-1],De(a)}function Hi(a,b){const d=pm(a,b);De(a,d),a.currentVertexBuffer=d}function Rg(a,b=0){const d=a.currentVertexBuffer;a.count+b>=d.batchSize&&Wb(a);const f=d.indexed?a.count*d.entryElementSize:a.count*d.vertexElementSize;return a.count+=b,{buffer:d,F32:d.vertexViewF32,U32:d.vertexViewU32,offset:f}}function km(a){const b=a.shaderStack;b.length>1&&b.pop(),a.currentShader=b[b.length-1],Be(a)}function lm(a,b,d){const f=om(a,b,d);Be(a,f),a.currentShader=f}function im(a,b){const d=b.binding,f=a.currentActiveTexture;return d.indexCounter<a.startActiveTexture&&(d.indexCounter=a.startActiveTexture,f<a.maxTextures?(d.setIndex(f),I.activeTexture(I.TEXTURE0+f),I.bindTexture(I.TEXTURE_2D,d.texture),a.currentActiveTexture++):(Wb(a),a.startActiveTexture++,d.indexCounter=a.startActiveTexture,d.setIndex(1),I.activeTexture(I.TEXTURE1),I.bindTexture(I.TEXTURE_2D,d.texture),a.currentActiveTexture=2)),d.index}function fm(a){a.current2DCamera=a.quadCamera,a.cameraMatrix=a.quadCamera.matrix,a.count=0,a.flushTotal=0,Ce(a,!1,a.defaultFramebuffer),Sg(a,a.defaultBlendMode),Ee(a,a.defaultViewport),De(a,a.defaultVertexBuffer)}function mm(a,b=0){I.activeTexture(I.TEXTURE0+b),I.bindTexture(I.TEXTURE_2D,a.tempTextures[b]),b>0&&a.startActiveTexture++}let Ir;const gm={get:()=>Ir,set:a=>{Ir=a}};class ur{constructor(){this.clearColor=[0,0,0,1],this.clearBeforeRender=!0,this.optimizeRedraw=!1,this.autoResize=!0,this.contextLost=!1,this.width=Od(),this.height=Md(),this.resolution=Nd(),this.setBackgroundColor(El());const a=document.createElement("canvas");a.addEventListener("webglcontextlost",b=>this.onContextLost(b),!1),a.addEventListener("webglcontextrestored",()=>this.onContextRestored(),!1),this.canvas=a,this.initContext(),gm.set(this),this.renderPass=new em(this),this.resize(this.width,this.height,this.resolution)}initContext(){const a=this.canvas.getContext("webgl",vr());Fr.set(a),this.gl=a,a.disable(a.DEPTH_TEST),a.disable(a.CULL_FACE)}resize(a,b,d=1){const f=a*d,i=b*d;this.width=f,this.height=i,this.resolution=d;const l=this.canvas;l.width=f,l.height=i,this.autoResize&&(l.style.width=a.toString()+"px",l.style.height=b.toString()+"px"),this.renderPass.resize(f,i)}onContextLost(a){a.preventDefault(),this.contextLost=!0}onContextRestored(){this.contextLost=!1,this.initContext()}setBackgroundColor(a){return Hr(a,this.clearColor),this}reset(){}render(a){if(this.contextLost)return;const b=this.gl,d=this.renderPass;dm();if(this.optimizeRedraw&&a.numDirtyFrames===0&&a.numDirtyCameras===0)return;if(this.clearBeforeRender){const i=this.clearColor;b.clearColor(i[0],i[1],i[2],i[3]),b.clear(b.COLOR_BUFFER_BIT)}const f=a.worldData;fm(d);for(let i=0;i<f.length;i++){const{world:l}=f[i];l.renderGL(d),l.postRenderGL(d)}cm(d)}destroy(){gm.set(void 0)}}function pl(){return()=>{ti(ur)}}function ul(a,b){const d=Gg(b);return d.appendChild(a),a}function vl(a){const b=document.readyState;if(b==="complete"||b==="interactive"){a();return}const d=()=>{document.removeEventListener("deviceready",d,!0),document.removeEventListener("DOMContentLoaded",d,!0),window.removeEventListener("load",d,!0),a()};document.body?window.hasOwnProperty("cordova")?document.addEventListener("deviceready",d,!0):(document.addEventListener("DOMContentLoaded",d,!0),window.addEventListener("load",d,!0)):window.setTimeout(d,20)}function Lb(a,b,...d){if(a.events.size===0||!a.events.has(b))return!1;const f=a.events.get(b);for(const i of f)i.callback.apply(i.context,d),i.once&&f.delete(i);return f.size===0&&a.events.delete(b),!0}class wl{constructor(){this.events=new Map()}}class Jg{constructor(a,b,d=!1){this.callback=a,this.context=b,this.once=d}}function qd(a,b,d,f,i){const l=a.events,q=l.get(b);if(!d)l.delete(b);else if(d instanceof Jg)q.delete(d);else{const u=!f,v=i!==void 0;for(const A of q)A.callback===d&&(u&&A.context===f)&&(v&&A.once===i)&&q.delete(A)}return q.size===0&&l.delete(b),a}function sc(a,b,d,f=a,i=!1){if(typeof d!=="function")throw new TypeError("Listener not a function");const l=new Jg(d,f,i),q=a.events.get(b);return q?q.add(l):a.events.set(b,new Set([l])),l}function xe(a,b,d,f=a){return sc(a,b,d,f,!0)}function xl(){const{title:a,version:b,url:d,color:f,background:i}=Ka.get(La.BANNER);if(a!==""){const l=b!==""?a+" "+b:a;console.log(`%c${l}%c ${d}`,`padding: 4px 16px; color: ${f}; background: ${i}`,"")}}function yl(){return Ka.get(La.GLOBAL_VAR)}function zl(){return Ka.get(La.PARENT)}function Al(){return Ka.get(La.RENDERER)}function Rr(){return{gameFrame:0,numTotalFrames:0,numDirtyFrames:0,numDirtyCameras:0,worldData:[]}}function Il(){return Ka.get(La.SCENES)}function Ur(a,b=0){a.gameFrame=b,a.numTotalFrames=0,a.numDirtyFrames=0,a.numDirtyCameras=0,a.worldData.length=0}let Vr;const Ki={get:()=>Vr,set:a=>{Vr=a}};class nr{constructor(){this.scenes=new Map(),this.sceneIndex=0,this.flush=!1,this.renderResult=Rr(),this.game=Mb.get(),Ki.set(this),xe(this.game,"boot",()=>this.boot())}boot(){Il().forEach(a=>new a())}update(a,b){for(const d of this.scenes.values())Lb(d,"update",a,b)}render(a){const b=this.renderResult;Ur(b,a);for(const d of this.scenes.values())Lb(d,"render",b);return this.flush&&(b.numDirtyFrames++,this.flush=!1),b}}function or(){qi(0),Dl(4096),ri("Phaser","4.0.0","https://phaser4.io"),zf(0),si(.5,.5),Eg(800,600,1)}function Ef(a,b){const d=document.createElement("canvas");return d.width=a,d.height=b,d.getContext("2d")}let Wr;const Tb={get:()=>Wr,set:a=>{Wr=a}};class pr{constructor(){this.textures=new Map(),this.createDefaultTextures(),Tb.set(this)}createDefaultTextures(){this.add("__BLANK",new ac(Ef(32,32).canvas));const a=Ef(32,32);a.strokeStyle="#0f0",a.moveTo(0,0),a.lineTo(32,32),a.stroke(),a.strokeRect(.5,.5,31,31),this.add("__MISSING",new ac(a.canvas));const b=Ef(32,32);b.fillStyle="#fff",b.fillRect(0,0,32,32),this.add("__WHITE",new ac(b.canvas))}get(a){const b=this.textures;return b.has(a)?b.get(a):b.get("__MISSING")}has(a){return this.textures.has(a)}add(a,b,d){let f;const i=this.textures;return i.has(a)||(b instanceof ac?f=b:f=new ac(b,0,0,d),f.key=a,i.set(a,f)),f}}class er extends wl{constructor(...a){super();this.VERSION="4.0.0-beta1",this.isBooted=!1,this.isPaused=!1,this.willUpdate=!0,this.willRender=!0,this.lastTick=0,this.elapsed=0,this.frame=0,Mb.set(this),or(),vl(()=>this.boot(a))}boot(a){a.forEach(i=>i());const b=Al();this.renderer=new b(),this.textureManager=new pr(),this.sceneManager=new nr();const d=zl();d&&ul(this.renderer.canvas,d);const f=yl();f&&window&&(window[f]=this),this.isBooted=!0,xl(),Lb(this,"boot"),this.lastTick=performance.now(),this.step(this.lastTick)}pause(){this.isPaused=!0}resume(){this.isPaused=!1,this.lastTick=performance.now()}step(a){const b=a-this.lastTick;this.lastTick=a,this.elapsed+=b,this.isPaused||(this.willUpdate&&(this.sceneManager.update(b,a),Lb(this,"update",b,a)),this.willRender&&this.renderer.render(this.sceneManager.render(this.frame))),this.frame++,Mb.setFrame(this.frame),Mb.setElapsed(this.elapsed),requestAnimationFrame(d=>this.step(d))}destroy(){}}function Sr(a,b,d){return Object.prototype.hasOwnProperty.call(a,b)?a[b]:d}function Tr(a,b={}){const d=Ki.get(),f=d.scenes.size,i=d.sceneIndex,l=f===0;typeof b==="string"?a.key=b:(b||!b&&l)&&(a.key=Sr(b,"key","scene"+i.toString())),d.scenes.has(a.key)?console.warn("Scene key already in use: "+a.key):(d.scenes.set(a.key,a),d.flush=!0,d.sceneIndex++)}class pi{constructor(a){this.game=Mb.get(),this.events=new Map(),Tr(this,a)}}function ve(a){const b=[a],d=[];for(;b.length>0;){const f=b.shift();d.push(f);const i=f.numChildren;if(i>0)for(let l=i-1;l>=0;l--)b.unshift(f.children[l])}return d.shift(),d}function pd(a,b){return a.children.indexOf(b)}function ui(a,b){const d=a.children;let f;if(b>=0&&b<d.length){const i=d.splice(b,1);i[0]&&(f=i[0],f.parent=null)}return f}function we(a,b){const d=pd(a,b);return d>-1&&ui(a,d),b}const vi="addedtoworld";const Kg="destroy";const Yl="postupdate";const wi="removedfromworld";const Zl="update";function Ol(a,...b){return b.forEach(d=>{d.world&&(Lb(d.world,wi,d,d.world),Lb(d,wi,d,d.world)),d.world=a,Lb(a,vi,d,a),Lb(d,vi,d,a)}),b}function ue(a,...b){b.forEach(f=>{f.parent&&we(f.parent,f),f.parent=a});const d=a.world;return d&&Ol(d,...ve(a)),b}function se(a,b){return a.children.push(b),ue(a,b),b.transform.updateWorld(),b}function Kl(a,...b){return b.forEach(d=>{se(a,d)}),b}const Ha={CLEAR:0,TRANSFORM:1,UPDATE:2,CHILD_CACHE:4,POST_RENDER:8,COLORS:16,BOUNDS:32,TEXTURE:64,FRAME:128,ALPHA:256,CHILD:512,DEFAULT:1+2+16+32,USER1:536870912,USER2:1073741824,USER3:2147483648,USER4:4294967296};function Hg(a,b=0,d){const f=a.children;d===void 0&&(d=f.length);const i=d-b;if(i>0&&i<=d){const l=f.splice(b,i);return l.forEach(q=>{q.parent=null}),l}else return[]}function Ll(a,b=0,d){const f=Hg(a,b,d);f.forEach(i=>{i.destroy()})}function Ig(a,...b){return b.forEach(d=>{we(a,d)}),b}function Nl(a,b,d=0,f){const i=Hg(a,d,f);return ue(b,...i),i.forEach(l=>{l.transform.updateWorld()}),i}const Nm="worldrender";const Om="worldshutdown";function Li(a,b){b.numRendered++,b.numRenderable++,a.node.dirtyFrame>=b.gameFrame&&b.dirtyFrame++,a.children.forEach(d=>{d.children.length>0&&Li(d,b)})}function Qm(a){if(a.node.isDirty(Ha.CHILD_CACHE))return!0;const b=[a];for(;b.length>0;){const d=b.pop();if(d.node.isDirty(Ha.TRANSFORM))return!0;const f=d.children.length;if(f>0)for(let i=0;i<f;i++)b.push(d.children[i])}return b.length=0,!1}function Pm(a,b){a.forEach(d=>{b||Qm(d)?d.node.setDirty(Ha.CHILD_CACHE):d.children.length=0})}function Mi(a,b,d=[]){for(let f=0;f<b.numChildren;f++){const i=b.children[f];if(i.isRenderable()){const l=[],q={node:i,children:l};d.push(q),i.willRenderChildren&&i.numChildren>0&&(i.willCacheChildren&&a.push(q),Mi(a,i,l))}}return d}function Lm(a){const b=[],d=[],f=Mi(b,a,d),i=a.renderData;b.length>0&&Pm(b,a.camera.dirtyRender),f.forEach(l=>{l.children.length>0?Li(l,i):(i.numRendered++,i.numRenderable++,l.node.dirtyFrame>=i.gameFrame&&i.dirtyFrame++)}),a.renderList=f,a.forceRefresh&&(i.dirtyFrame++,a.forceRefresh=!1)}function Lg(a){const{a:b,b:d,c:f,d:i,tx:l,ty:q}=a.world,{x:u,y:v,right:A,bottom:E}=a.extent,H=u*b+v*f+l,Q=u*d+v*i+q,J=u*b+E*f+l,S=u*d+E*i+q,aa=A*b+E*f+l,X=A*d+E*i+q,ga=A*b+v*f+l,ja=A*d+v*i+q;return{x0:H,y0:Q,x1:J,y1:S,x2:aa,y2:X,x3:ga,y3:ja}}class Pl{constructor(a){this.fixed=!1,this.includeChildren=!0,this.visibleOnly=!0,this.entity=a,this.area=new Nb()}set(a,b,d,f){this.area.set(a,b,d,f)}get(){return this.entity.isDirty(Ha.BOUNDS)&&!this.fixed&&this.update(),this.area}updateLocal(){const{x0:a,y0:b,x1:d,y1:f,x2:i,y2:l,x3:q,y3:u}=Lg(this.entity.transform),v=Math.min(a,d,i,q),A=Math.min(b,f,l,u),E=Math.max(a,d,i,q),H=Math.max(b,f,l,u);return this.area.set(v,A,E-v,H-A)}update(){const a=this.updateLocal();this.entity.clearDirty(Ha.BOUNDS);if(!this.includeChildren||!this.entity.numChildren)return a;const b=this.visibleOnly,d=this.entity.children;let f=a.x,i=a.y,l=a.right,q=a.bottom;for(let u=0;u<d.length;u++){const v=d[u];if(!v||b&&!v.visible)continue;const A=v.bounds.get();A.x<f&&(f=A.x),A.y<i&&(i=A.y),A.right>l&&(l=A.right),A.bottom>q&&(q=A.bottom)}return a.set(f,i,l-f,q-i)}destroy(){this.entity=null,this.area=null}}class Ql{constructor(a){this.enabled=!1,this.enabledChildren=!0,this.entity=a}destroy(){this.entity=null,this.hitArea=null}}function yi(a,b,d,f,i,l,q=0,u=1,v=1,A=0,E=0){const H=Math.cos(q+E)*u,Q=Math.sin(q+E)*u,J=-Math.sin(q-A)*v,S=Math.cos(q-A)*v,aa=a*H+d*J+i,X=a*Q+d*S+l,ga=a*H+f*J+i,ja=a*Q+f*S+l,qa=b*H+f*J+i,ka=b*Q+f*S+l,ta=b*H+d*J+i,va=b*Q+d*S+l;return{x0:aa,y0:X,x1:ga,y1:ja,x2:qa,y2:ka,x3:ta,y3:va}}function wr(a){a.forEach(b=>{b.packColor()})}function Sl(a){const b=a.vertices,{x0:d,y0:f,x1:i,y1:l,x2:q,y2:u,x3:v,y3:A}=Lg(a.transform);return b[0].setPosition(d,f),b[1].setPosition(i,l),b[2].setPosition(q,u),b[3].setPosition(v,A),a}function ye(a){return a.isDirty(Ha.COLORS)&&(wr(a.vertices),a.clearDirty(Ha.COLORS)),a.isDirty(Ha.TRANSFORM)&&(Sl(a),a.clearDirty(Ha.TRANSFORM)),a}function Fl(){return Ka.get(La.DEFAULT_ORIGIN).x}function Gl(){return Ka.get(La.DEFAULT_ORIGIN).y}class Fa{constructor(a=0,b=0){this.set(a,b)}set(a=0,b=0){return this.x=a,this.y=b,this}toArray(a=[],b=0){const{x:d,y:f}=this;return a[b]=d,a[b+1]=f,a}fromArray(a,b=0){return this.set(a[b],a[b+1])}toString(){const{x:a,y:b}=this;return`{ x=${a}, y=${b} }`}}function Di(a,b,d){return Math.max(b,Math.min(d,a))}function sl(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function Wl(a,b=new Fa()){return b.set(a.width,a.height)}function Tl(a){const b=a.local,d=a.position.x,f=a.position.y,i=a.rotation,l=a.scale.x,q=a.scale.y,u=a.skew.x,v=a.skew.y;b.set(Math.cos(i+v)*l,Math.sin(i+v)*l,-Math.sin(i-u)*q,Math.cos(i-u)*q,d,f)}function Vl(a,b){const{a:d,b:f,c:i,d:l,tx:q,ty:u}=a;return b.set(d,f,i,l,q,u)}function Ul(a){const b=a.parent,d=a.transform,f=d.local,i=d.world;if(!b)Vl(f,i);else if(d.passthru)Vl(b.transform.world,i);else{const{a:l,b:q,c:u,d:v,tx:A,ty:E}=f,{a:H,b:Q,c:J,d:S,tx:aa,ty:X}=b.transform.world;i.set(l*H+q*J,l*Q+q*S,u*H+v*J,u*Q+v*S,A*H+E*J+aa,A*Q+E*S+X)}}class Rl{constructor(a,b=0,d=0){this.passthru=!1,this._rotation=0,this.entity=a,this.local=new te(),this.world=new te();const f=()=>this.update(),i=()=>this.updateExtent();this.position=new Yc(f,b,d),this.scale=new Yc(f,1,1),this.skew=new Yc(f),this.origin=new Yc(i,Fl(),Gl()),this.extent=new Nb()}update(){this.updateLocal(),this.updateWorld()}updateLocal(){this.entity.setDirty(Ha.TRANSFORM,Ha.BOUNDS),Tl(this)}updateWorld(){const a=this.entity;a.setDirty(Ha.TRANSFORM,Ha.BOUNDS),Ul(a),a.numChildren&&this.updateChildren()}updateChildren(){const a=this.entity.children;for(let b=0;b<a.length;b++){const d=a[b];d.transform.updateWorld()}}globalToLocal(a,b,d=new Fa()){const{a:f,b:i,c:l,d:q,tx:u,ty:v}=this.world,A=1/(f*q+l*-i);return d.x=q*A*a+-l*A*b+(v*l-u*q)*A,d.y=f*A*b+-i*A*a+(-v*f+u*i)*A,d}localToGlobal(a,b,d=new Fa()){const{a:f,b:i,c:l,d:q,tx:u,ty:v}=this.world;return d.x=f*a+l*b+u,d.y=i*a+q*b+v,d}setExtent(a,b,d,f){this.extent.set(a,b,d,f),this.entity.setDirty(Ha.TRANSFORM,Ha.BOUNDS)}updateExtent(a,b){const d=this.extent,f=this.entity;a!==void 0&&(d.width=a),b!==void 0&&(d.height=b),d.x=-this.origin.x*d.width,d.y=-this.origin.y*d.height,f.setDirty(Ha.TRANSFORM,Ha.BOUNDS)}set rotation(a){a!==this._rotation&&(this._rotation=a,this.update())}get rotation(){return this._rotation}destroy(){this.position.destroy(),this.scale.destroy(),this.skew.destroy(),this.origin.destroy(),this.entity=null,this.local=null,this.world=null,this.position=null,this.scale=null,this.skew=null,this.origin=null,this.extent=null}}function xi(a,b){const d=(b*255|0)&255;return(d<<24|a)>>>0}class Nc{constructor(a=0,b=0,d=0){this.x=0,this.y=0,this.z=0,this.u=0,this.v=0,this.texture=0,this.tint=16777215,this.alpha=1,this.color=4294967295,this.x=a,this.y=b,this.z=d}setPosition(a,b,d=0){return this.x=a,this.y=b,this.z=d,this}setUV(a,b){return this.u=a,this.v=b,this}setColor(a,b=1){return this.tint=a,this.alpha=b,this.packColor(),this}setAlpha(a){return this.alpha=a,this}setTint(a){return this.tint=a,this}packColor(){this.color=xi(this.tint,this.alpha)}}function zi(a,b,d){const{F32:f,U32:i,offset:l}=Rg(d,1),q=im(d,a);let u=l;b.forEach(v=>{f[u+0]=v.x,f[u+1]=v.y,f[u+2]=v.u,f[u+3]=v.v,f[u+4]=q,i[u+5]=v.color,u+=6})}class Mc{constructor(a=0,b=0){this.type="GameObject",this.name="",this.willUpdate=!0,this.willUpdateChildren=!0,this.willRender=!0,this.willRenderChildren=!0,this.willCacheChildren=!1,this.dirty=0,this.dirtyFrame=0,this.visible=!0,this.children=[],this.vertices=[],this.events=new Map(),this.transform=new Rl(this,a,b),this.bounds=new Pl(this),this.input=new Ql(this),this.dirty=Ha.DEFAULT,this.transform.update()}isRenderable(){return this.visible&&this.willRender}isDirty(a){return(this.dirty&a)!==0}clearDirty(a){return this.isDirty(a)&&(this.dirty^=a),this}setDirty(a,b){return this.isDirty(a)||(this.dirty^=a,this.dirtyFrame=Mb.getFrame()),this.isDirty(b)||(this.dirty^=b),this}update(a,b){if(this.willUpdateChildren){const d=this.children;for(let f=0;f<d.length;f++){const i=d[f];i&&i.willUpdate&&i.update(a,b)}}this.postUpdate(a,b)}postUpdate(a,b){}renderGL(a){}renderCanvas(a){}postRenderGL(a){}postRenderCanvas(a){}get numChildren(){return this.children.length}getBounds(){return this.bounds.get()}destroy(a){a?Nl(this,a):Ll(this),Lb(this,Kg,this),this.transform.destroy(),this.bounds.destroy(),this.input.destroy(),this.events.clear(),this.world=null,this.parent=null,this.children=null,this.vertices=[]}}class rd extends Mc{constructor(a=0,b=0){super(a,b);this._alpha=1,this.type="Container"}setSize(a,b=a){return this.transform.updateExtent(a,b),this}getSize(a=new Fa()){return Wl(this.transform.extent,a)}setPosition(a,b){return this.transform.position.set(a,b),this}getPosition(a=new Fa()){const b=this.transform.position;return a.set(b.x,b.y)}setOrigin(a,b=a){return this.transform.origin.set(a,b),this}getOrigin(a=new Fa()){const b=this.transform.origin;return a.set(b.x,b.y)}setSkew(a,b=a){return this.transform.skew.set(a,b),this}getSkew(a=new Fa()){const b=this.transform.skew;return a.set(b.x,b.y)}setScale(a,b=a){return this.transform.scale.set(a,b),this}getScale(a=new Fa()){const b=this.transform.scale;return a.set(b.x,b.y)}setRotation(a){return this.transform.rotation=a,this}getRotation(){return this.transform.rotation}set width(a){this.transform.updateExtent(a)}get width(){return this.transform.extent.width}set height(a){this.transform.updateExtent(void 0,a)}get height(){return this.transform.extent.height}set x(a){this.transform.position.x=a}get x(){return this.transform.position.x}set y(a){this.transform.position.y=a}get y(){return this.transform.position.y}set originX(a){this.transform.origin.x=a}get originX(){return this.transform.origin.x}set originY(a){this.transform.origin.y=a}get originY(){return this.transform.origin.y}set skewX(a){this.transform.skew.x=a}get skewX(){return this.transform.skew.x}set skewY(a){this.transform.skew.y=a}get skewY(){return this.transform.skew.y}set scaleX(a){this.transform.scale.x=a}get scaleX(){return this.transform.scale.x}set scaleY(a){this.transform.scale.y=a}get scaleY(){return this.transform.scale.y}set rotation(a){this.transform.rotation=a}get rotation(){return this.transform.rotation}get alpha(){return this._alpha}set alpha(a){a!==this._alpha&&(this._alpha=a,this.vertices.forEach(b=>{b.setAlpha(a)}),this.setDirty(Ha.COLORS))}}function Ai(a,b,d,f){if(!a)return;const i=f.ctx,{a:l,b:q,c:u,d:v,tx:A,ty:E}=d.world,{x:H,y:Q}=d.extent;i.save(),i.setTransform(l,q,u,v,A,E),i.globalAlpha=b,i.drawImage(a.texture.image,a.x,a.y,a.width,a.height,H,Q,a.width,a.height),i.restore()}function Ci(a,b,...d){const f=a.getFrame(b),i=f.pivot;return d.forEach(l=>{if(!l||f===l.frame)return;l.frame=f,l.hasTexture=!0,i&&l.setOrigin(i.x,i.y),f.copyToExtent(l),f.copyToVertices(l.vertices)}),d}function xr(a,b,...d){if(!a)d.forEach(f=>{f.texture=null,f.frame=null,f.hasTexture=!1});else{let f;a instanceof ac?f=a:f=Tb.get().get(a),f?(d.forEach(i=>{i.texture=f}),Ci(f,b,...d)):console.warn(`Invalid Texture key: ${a}`)}return d}class Lc extends rd{constructor(a,b,d,f){super(a,b);this.hasTexture=!1,this._tint=16777215,this.type="Sprite",this.vertices=[new Nc(),new Nc(),new Nc(),new Nc()],this.setTexture(d,f)}setTexture(a,b){return xr(a,b,this),this}setFrame(a){return Ci(this.texture,a,this),this}isRenderable(){return this.visible&&this.willRender&&this.hasTexture&&this.alpha>0}renderGL(a){ye(this),zi(this.texture,this.vertices,a)}renderCanvas(a){ye(this),Ai(this.frame,this.alpha,this.transform,a)}get tint(){return this._tint}set tint(a){a!==this._tint&&(this._tint=a,this.vertices.forEach(b=>{b.setTint(a)}),this.setDirty(Ha.COLORS))}destroy(a){super.destroy(a),this.texture=null,this.frame=null,this.hasTexture=!1}}class Gx extends Lc{constructor(a,b,d,f){super(a,b,d,f);this.type="AnimatedSprite",this.anims=new Map(),this.animData={currentAnim:"",currentFrames:[],frameIndex:0,animSpeed:0,nextFrameTime:0,repeatCount:0,isPlaying:!1,yoyo:!1,pendingStart:!1,playingForward:!0,delay:0,repeatDelay:0,onStart:null,onRepeat:null,onComplete:null}}stop(){const a=this.animData;a.isPlaying=!1,a.currentAnim="",a.onComplete&&a.onComplete(this,a.currentAnim)}nextFrame(){const a=this.animData;a.frameIndex++;if(a.frameIndex===a.currentFrames.length)if(a.yoyo)a.frameIndex--,a.playingForward=!1;else if(a.repeatCount===-1||a.repeatCount>0)a.frameIndex=0,a.repeatCount!==-1&&a.repeatCount--,a.onRepeat&&a.onRepeat(this,a.currentAnim),a.nextFrameTime+=a.repeatDelay;else return a.frameIndex--,this.stop();this.setFrame(a.currentFrames[a.frameIndex]),a.nextFrameTime+=a.animSpeed}prevFrame(){const a=this.animData;a.frameIndex--;if(a.frameIndex===-1)if(a.repeatCount===-1||a.repeatCount>0)a.frameIndex=0,a.playingForward=!0,a.repeatCount!==-1&&a.repeatCount--,a.onRepeat&&a.onRepeat(this,a.currentAnim),a.nextFrameTime+=a.repeatDelay;else return a.frameIndex=0,this.stop();this.setFrame(a.currentFrames[a.frameIndex]),a.nextFrameTime+=a.animSpeed}update(a,b){super.update(a,b);const d=this.animData;if(!d.isPlaying)return;d.nextFrameTime-=a*1e3,d.nextFrameTime=Math.max(d.nextFrameTime,0),d.nextFrameTime===0&&(d.pendingStart?(d.onStart&&d.onStart(this,d.currentAnim),d.pendingStart=!1,d.nextFrameTime=d.animSpeed):d.playingForward?this.nextFrame():this.prevFrame())}get isPlaying(){return this.animData.isPlaying}get isPlayingForward(){return this.animData.isPlaying&&this.animData.playingForward}get currentAnimation(){return this.animData.currentAnim}destroy(a){super.destroy(a),this.anims.clear(),this.animData=null}}function Kr(a,b,d,f,i,l,q,u,v,A=0,E=4294967295){const{F32:H,U32:Q,offset:J}=Rg(a,1);H[J+0]=b,H[J+1]=d,H[J+2]=l,H[J+3]=v,H[J+4]=A,Q[J+5]=E,H[J+6]=b,H[J+7]=d+i,H[J+8]=l,H[J+9]=q,H[J+10]=A,Q[J+11]=E,H[J+12]=b+f,H[J+13]=d+i,H[J+14]=u,H[J+15]=q,H[J+16]=A,Q[J+17]=E,H[J+18]=b+f,H[J+19]=d,H[J+20]=u,H[J+21]=v,H[J+22]=A,Q[J+23]=E}function Af(a,b,d){d||(d=a.quadShader);const{u0:f,v0:i,u1:l,v1:q}=b.firstFrame;jm(b,0),Hi(a,a.quadBuffer),lm(a,d,0),Kr(a,0,0,b.width,b.height,f,i,l,q,0),Wb(a),Gi(a),km(a),mm(a)}class Mg extends Mc{constructor(){super();this.type="Layer",this.transform.passthru=!0,this.willRender=!1}}class Xl extends Mg{constructor(){super();this.type="RenderLayer",this.willRender=!0,this.willRenderChildren=!0,this.willCacheChildren=!0,this.setDirty(Ha.CHILD_CACHE);const a=Od(),b=Md(),d=Nd(),f=new ac(null,a*d,b*d),i=new Cf(f);f.binding=i,i.framebuffer=Bi(i.texture),this.texture=f,this.framebuffer=i.framebuffer}renderGL(a){this.numChildren>0&&(Wb(a),!this.willCacheChildren||this.isDirty(Ha.CHILD_CACHE)?(Bf(a,this.framebuffer,!0),this.clearDirty(Ha.CHILD_CACHE)):(Bf(a,this.framebuffer,!1),this.postRenderGL(a)))}postRenderGL(a){Wb(a),ze(a),Af(a,this.texture),this.clearDirty(Ha.TRANSFORM)}}class Lx extends Xl{constructor(...a){super();this.shaders=[],this.type="EffectLayer",Array.isArray(a)&&(this.shaders=a)}postRenderGL(a){const b=this.shaders,d=this.texture;Wb(a),ze(a);if(b.length===0)Af(a,d);else{let f=d;for(let i=0;i<b.length;i++){const l=b[i];Af(a,f,l),f=l.texture}Af(a,f)}this.clearDirty(Ha.TRANSFORM)}}class Mx extends rd{constructor(a,b,d=64,f=64,i=16777215){super(a,b);this._color=16777215,this.type="Rectangle",this.vertices=[new Nc(),new Nc(),new Nc(),new Nc()],this.color=i,this.setWhiteTexture(),this.setSize(d,f)}setWhiteTexture(){this.texture=Tb.get().get("__WHITE"),this.frame=this.texture.getFrame(),this.frame.copyToExtent(this),this.frame.copyToVertices(this.vertices)}setColor(a){return this.color=a,this}isRenderable(){return this.visible&&this.willRender&&this.alpha>0}renderGL(a){ye(this),zi(this.texture,this.vertices,a)}renderCanvas(a){ye(this),Ai(this.frame,this.alpha,this.transform,a)}get color(){return this._color}set color(a){a!==this._color&&(this._color=a,this.vertices.forEach(b=>{b.setTint(a)}),this.setDirty(Ha.COLORS))}destroy(a){super.destroy(a),this.texture=null,this.frame=null}}function yr(a,b){}class Nx extends Mg{constructor(a,b){super();this.glTextureIndex=0,this.hasTexture=!1,this.type="SpriteBatch",this.willRender=!0,this.setTexture(b),this.setMaxSize(a)}resetBuffers(){let a=[];for(let b=0;b<this.maxSize*4;b+=4)a.push(b+0,b+1,b+2,b+2,b+3,b+0);this.data=new ArrayBuffer(this.maxSize*96),this.index=new Uint16Array(a),this.vertexViewF32=new Float32Array(this.data),this.vertexViewU32=new Uint32Array(this.data),I&&(sd(this.vertexBuffer),sd(this.indexBuffer),this.vertexBuffer=I.createBuffer(),this.indexBuffer=I.createBuffer(),I.bindBuffer(I.ARRAY_BUFFER,this.vertexBuffer),I.bufferData(I.ARRAY_BUFFER,this.data,I.STATIC_DRAW),I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,this.indexBuffer),I.bufferData(I.ELEMENT_ARRAY_BUFFER,this.index,I.STATIC_DRAW),I.bindBuffer(I.ARRAY_BUFFER,null)),a=[],this.count=0}setMaxSize(a){return this.maxSize=Di(a,0,65535),this.resetBuffers(),this}setTexture(a){let b;return a instanceof ac?b=a:b=Tb.get().get(a),b?(this.texture=b,this.hasTexture=!0,this.glTextureIndex=-1):console.warn(`Invalid Texture key: ${a}`),this}isRenderable(){return this.visible&&this.willRender&&this.hasTexture&&this.count>0}clear(){return this.count=0,this}addToBatch(a,b,d,f,i,l,q,u,v,A){if(this.count>=this.maxSize)return console.warn("SpriteBatch full"),this;const{u0:E,u1:H,v0:Q,v1:J}=a,S=this.vertexViewF32,aa=this.vertexViewU32,X=this.count*24,ga=this.texture.binding?this.texture.binding.index:0;return S[X+0]=d,S[X+1]=f,S[X+2]=E,S[X+3]=Q,S[X+4]=ga,aa[X+5]=b,S[X+6]=i,S[X+7]=l,S[X+8]=E,S[X+9]=J,S[X+10]=ga,aa[X+11]=b,S[X+12]=q,S[X+13]=u,S[X+14]=H,S[X+15]=J,S[X+16]=ga,aa[X+17]=b,S[X+18]=v,S[X+19]=A,S[X+20]=H,S[X+21]=Q,S[X+22]=ga,aa[X+23]=b,this.setDirty(Ha.TRANSFORM),this.count++,this}add(a){const{frame:b=null,x:d=0,y:f=0,rotation:i=0,scaleX:l=1,scaleY:q=1,skewX:u=0,skewY:v=0,originX:A=0,originY:E=0,alpha:H=1,tint:Q=16777215}=a,J=this.texture.getFrame(b),{left:S,right:aa,top:X,bottom:ga}=J.getExtent(A,E),{x0:ja,y0:qa,x1:ka,y1:ta,x2:va,y2:na,x3:O,y3:R}=yi(S,aa,X,ga,d,f,i,l,q,u,v),x=xi(Q,H);return this.addToBatch(J,x,ja,qa,ka,ta,va,na,O,R)}addXY(a,b,d){const f=this.texture.getFrame(d),{left:i,right:l,top:q,bottom:u}=f.getExtent(0,0),{x0:v,y0:A,x1:E,y1:H,x2:Q,y2:J,x3:S,y3:aa}=yi(i,l,q,u,a,b);return this.addToBatch(f,4294967295,v,A,E,H,Q,J,S,aa)}updateTextureIndex(){const a=this.texture.binding.index;if(a===this.glTextureIndex)return;const b=this.vertexViewF32;this.glTextureIndex=a;for(let d=0;d<this.count;d++)b[d*24+4]=a,b[d*24+10]=a,b[d*24+16]=a,b[d*24+22]=a}renderGL(a){yr(this,a)}destroy(){super.destroy(),sd(this.vertexBuffer),sd(this.indexBuffer),this.data=null,this.vertexViewF32=null,this.vertexViewU32=null,this.index=null,this.texture=null,this.hasTexture=!1}}function Pd(a=32,b=32){const d=Ef(a,b);return new ac(d.canvas)}class Ox extends Lc{constructor(a,b,d="",f,i){super(a,b,Pd());this.splitRegExp=/(?:\r\n|\r|\n)/,this.padding={left:0,right:0,top:0,bottom:0},this.verticalAlign="ascent",this.lineSpacing=0,this.font="16px monospace",this.fillStyle="#fff",this.strokeStyle="",this.backgroundStyle="",this.cornerRadius=0,this.textAlign="left",this.textBaseline="alphabetic",this.lineWidth=0,this.lineDash=[],this.antialias=!1,this.type="Text";const l=Mb.get();this.resolution=l.renderer.resolution,this.canvas=this.texture.image,this.context=this.canvas.getContext("2d"),f&&(this.font=f),i&&(this.fillStyle=i),this.setText(d)}syncContext(a,b){this.preRenderCallback&&this.preRenderCallback(a,b),b.font=this.font,b.textBaseline=this.textBaseline,b.textAlign=this.textAlign,b.fillStyle=this.fillStyle,b.strokeStyle=this.strokeStyle,b.lineWidth=this.lineWidth,b.lineCap="round",b.lineJoin="round",b.setLineDash(this.lineDash),b.imageSmoothingEnabled=this.antialias}updateText(){const a=this.canvas,b=this.context,d=this.resolution,f=this._text.split(this.splitRegExp),i=this.padding,l=this.fillStyle,q=this.strokeStyle,u=this.lineWidth,v=this.lineSpacing,A=u>0?u/2:0;b.clearRect(0,0,a.width,a.height),this.syncContext(a,b),b.textAlign="start";let E=0,H=0,Q=0;const J=[],S=this.verticalAlign==="ascent",aa=b.measureText("|Mq"),X=Math.ceil(Math.abs(aa.actualBoundingBoxAscent)+Math.abs(aa.actualBoundingBoxDescent))+u;for(let x=0;x<f.length;x++){const G=b.measureText(f[x]),F=G.actualBoundingBoxLeft,K=G.actualBoundingBoxRight;let U=G.actualBoundingBoxAscent,L=G.actualBoundingBoxDescent;(!U&&!L||f[x]==="")&&(U=X,L=0);const da=Math.ceil(Math.abs(F)+Math.abs(K))+u,ca=Math.ceil(Math.abs(U)+Math.abs(L))+u;S?(Q+=U+A,x>0&&(Q+=v+A),H=Q+L+A):(Q=H+(ca-L-A),H+=ca,x<f.length-1&&(H+=v)),E=Math.max(E,da),J.push({lineWidth:da,lineHeight:ca,ascent:U,descent:L,left:F,right:K,y:Q})}E+=i.left+i.right,H+=i.top+i.bottom;const ga=this.fixedWidth?this.fixedWidth:E,ja=this.fixedHeight?this.fixedHeight:H,qa=Math.ceil(ga*d),ka=Math.ceil(ja*d);(a.width!==qa||a.height!==ka)&&(a.width=qa,a.height=ka,this.texture.setSize(ga,ja),this.setSize(ga,ja)),b.save(),b.scale(d,d),this.syncContext(a,b);const ta=this.backgroundStyle;if(ta){b.save(),b.fillStyle=ta,b.strokeStyle=ta;const x=this.cornerRadius,G=x>0?x/2:0;x&&(b.lineWidth=x,b.strokeRect(G,G,ga-x,ja-x)),b.fillRect(G,G,ga-x,ja-x),b.restore()}const va=this.textAlign,na=va==="center",O=va==="right"||va==="end",R=(ja-H)/2+i.top;for(let x=0;x<f.length;x++){const G=f[x],F=J[x];let K=i.left+F.left+A;const U=R+F.y;na?K=ga/2:O&&(K=ga-A),q&&b.strokeText(G,K,U),l&&b.fillText(G,K,U)}return b.restore(),this.texture.binding&&this.texture.binding.update(),this.setDirty(Ha.TEXTURE),this}get text(){return this._text}set text(a){this.setText(a)}setText(a=""){return Array.isArray(a)&&(a=a.join(`
`)),a!==this._text&&(this._text=a.toString(),this.updateText()),this}destroy(a){this.texture.destroy(),this.fillStyle=null,this.strokeStyle=null,this.backgroundStyle=null,this.canvas=null,this.context=null,super.destroy(a)}}function Ar(a,b){return a.a===b.a&&a.b===b.b&&a.c===b.c&&a.d===b.d&&a.tx===b.tx&&a.ty===b.ty}function Mm(a,b){a.numDirtyFrames+=b.dirtyFrame,a.numTotalFrames+=b.numRendered,b.camera.dirtyRender&&a.numDirtyCameras++,a.worldData.push(b)}function Vg(a,b){a.gameFrame=b,a.dirtyFrame=0,a.numRendered=0,a.numRenderable=0}class He extends Mc{constructor(a){super();this.forceRefresh=!1,this.is3D=!1,this.type="BaseWorld",this.scene=a,this.world=this,this.events=new Map(),this.renderList=[],this._updateListener=sc(a,"update",(b,d)=>this.update(b,d)),this._renderListener=sc(a,"render",b=>this.render(b)),this._shutdownListener=sc(a,"shutdown",()=>this.shutdown()),xe(a,"destroy",()=>this.destroy())}update(a,b){if(!this.willUpdate)return;Lb(this,Zl,a,b,this),super.update(a,b)}postUpdate(a,b){Lb(this,Yl,a,b,this)}render(a){const b=this.renderData;Vg(b,a.gameFrame);if(!this.willRender||!this.visible)return;Lm(this),Lb(this,Nm,b,this),Mm(a,b),this.camera.dirtyRender=!1}renderGL(a){const b=a.current2DCamera,d=this.camera;(!b||!Ar(d.worldTransform,b.worldTransform))&&Wb(a),rm(a,d),this.renderList.forEach(f=>{f.children.length>0?this.renderNode(f,a):f.node.renderGL(a)})}renderNode(a,b){a.node.renderGL(b),a.children.forEach(d=>{d.children.length>0?this.renderNode(d,b):d.node.renderGL(b)}),a.node.postRenderGL(b)}postRenderGL(a){}shutdown(){const a=this.scene;qd(a,"update",this._updateListener),qd(a,"render",this._renderListener),qd(a,"shutdown",this._shutdownListener),Ig(this),Lb(this,Om,this),Vg(this.renderData,0),this.camera&&this.camera.reset()}destroy(a){super.destroy(a),Lb(this,Kg,this),Vg(this.renderData,0),this.camera&&this.camera.destroy(),this.events.clear(),this.camera=null,this.renderData=null,this.events=null}}function Wg(a,b){return{world:a,camera:b,gameFrame:0,dirtyFrame:0,numRendered:0,numRenderable:0}}class ql extends He{constructor(a){super(a);this.type="StaticWorld",this.camera=new Dg(),this.renderData=Wg(this,this.camera)}}class ky extends He{constructor(a){super(a);this.enableCameraCull=!0,this.type="World",this.camera=new Cl(),this.renderData=Wg(this,this.camera)}}function fr(a,...b){return b.forEach(d=>{d.tint=a}),b}function yd(a,b,d,f=1){let i;if(typeof a==="string"){let u=Tb.get();u.has(a)||u.add(a,Pd()),i=u.get(a)}else i=a;let l=i.image,q=l.getContext("2d");return d?b.call(d,l,q):b(l,q),i.setSize(l.width/f,l.height/f),i.binding&&i.binding.update(),i}var Fh;(function(a){a[a.left=1]="left",a[a.right=2]="right",a[a.both=3]="both"})(Fh||(Fh={}));function ox(a,b=0,d=" ",f=1){a=a.toString();let i=0;if(b+1>=a.length)switch(f){case 1:a=new Array(b+1-a.length).join(d)+a;break;case 3:i=b-a.length;let l=Math.ceil(i/2),q=i-l;a=new Array(q+1).join(d)+a+new Array(l+1).join(d);break;default:a=a+new Array(b+1-a.length).join(d);break}return a}function ic(a,b,d){switch(typeof a){case"number":return`#${ox(Math.floor(a).toString(16),6,"0",Fh.left)}`;case"function":return a(b,d);default:return a}}function Rj(a,b,d,f,i,l,q,u,v,A,E=!0){b.beginPath(),b.rect(d,f,i,l);if(q!==void 0){if(A!==void 0){let H;E?H=b.createLinearGradient(0,0,i,0):H=b.createLinearGradient(0,0,0,l),H.addColorStop(0,q),H.addColorStop(1,A),q=H}b.fillStyle=q,b.fill()}u!==void 0&&(b.strokeStyle=u,b.lineWidth=v,b.stroke())}function rl(a,{width:b=32,height:d=b,fillStyle:f,fillColor2:i,isHorizontalGradient:l=!0,strokeStyle:q,lineWidth:u=2}={}){return yd(a,function(v,A){v.width=Math.ceil(b),v.height=Math.ceil(d),q||(u=0);const E=u/2,H=E,Q=E;b-=u,d-=u,Rj(v,A,H,Q,b,d,ic(f,v,A),ic(q,v,A),u,ic(i,v,A),l)})}class jx{constructor(a=0,b=a,d=0,f=d,i=0){this._width=0;this._height=0;this.cornerRadius={tl:Fc(0),tr:Fc(0),bl:Fc(0),br:Fc(0)};this.setTo(a,b,d,f,i)}setTo(a=0,b=a,d=0,f=d,i=0){return this.setPosition(a,b),this.setRadius(i),this.setSize(d,f),this}setPosition(a=0,b=a){return this.x=a,this.y=b,this}setRadius(a=0){let b=this.cornerRadius;if(typeof a==="number"){const d=a,f=a;b.tl=Fc(void 0,d,f),b.tr=Fc(void 0,d,f),b.bl=Fc(void 0,d,f),b.br=Fc(void 0,d,f)}else{const d=a.x??0,f=a.y??0;b.tl=Fc(a.tl,d,f),b.tr=Fc(a.tr,d,f),b.bl=Fc(a.bl,d,f),b.br=Fc(a.br,d,f)}return this}setSize(a=0,b=a){return this.width=a,this.height=b,this}get minWidth(){let a=this.cornerRadius;return Math.max(a.tl.x+a.tr.x,a.bl.x+a.br.x)}get minHeight(){let a=this.cornerRadius;return Math.max(a.tl.y+a.bl.y,a.tr.y+a.br.y)}get width(){return this._width}set width(a){a==null&&(a=0),this._width=Math.max(a,this.minWidth)}get height(){return this._height}set height(a){a==null&&(a=0),this._height=Math.max(a,this.minHeight)}get radius(){let a=this.cornerRadius,b=Math.max(a.tl.x,a.tl.y,a.tr.x,a.tr.y,a.bl.x,a.bl.y,a.br.x,a.br.y);return b}}function Fc(a,b,d){return a===void 0?{x:b,y:d}:typeof a==="number"?{x:a,y:a}:a}const JA=Math.PI/180;function Td(a){return a*JA}const kx=Td(0),lx=Td(90),mx=Td(180),nx=Td(270);function Qj(a,b,d,f,i,l,q){const u=new jx(b,d,f,i,l),v=u.minWidth,A=u.minHeight,E=f>=v?1:f/v,H=i>=A?1:i/A,Q=u.cornerRadius;let J,S,aa,X,ga;a.save(),a.beginPath(),a.translate(b,d),J=Q.br,S=J.x*E,aa=J.y*H,X=f-S,ga=i-aa,S>0&&aa>0?qk(a,X,ga,S,aa,kx,lx,q):(a.moveTo(f,ga),a.lineTo(f,i),a.lineTo(X,i)),J=Q.bl,S=J.x*E,aa=J.y*H,X=S,ga=i-aa,a.lineTo(S,i),S>0&&aa>0?qk(a,X,ga,S,aa,lx,mx,q):(a.lineTo(0,i),a.lineTo(0,ga)),J=Q.tl,S=J.x*E,aa=J.y*H,X=S,ga=aa,a.lineTo(0,ga),S>0&&aa>0?qk(a,X,ga,S,aa,mx,nx,q):(a.lineTo(0,0),a.lineTo(X,0)),J=Q.tr,S=J.x*E,aa=J.y*H,X=f-S,ga=aa,a.lineTo(X,0),S>0&&aa>0?qk(a,X,ga,S,aa,nx,kx,q):(a.lineTo(f,0),a.lineTo(f,ga)),a.closePath(),a.restore()}var qk=function(a,b,d,f,i,l,q,u){if(u===void 0)a.ellipse(b,d,f,i,0,l,q);else{u+=1;let v=(q-l)/u;for(let A=0;A<=u;A++){const E=l+v*A,H=b+f*Math.cos(E),Q=d+i*Math.sin(E);a.lineTo(H,Q)}}};function rh(a,b,d,f,i,l,q,u,v,A,E,H=!0,Q){Qj(b,d,f,i,l,q,Q);if(u!==void 0){if(E!==void 0){let J;H?J=b.createLinearGradient(0,0,i,0):J=b.createLinearGradient(0,0,0,l),J.addColorStop(0,u),J.addColorStop(1,E),u=J}b.fillStyle=u,b.fill()}v!==void 0&&(b.strokeStyle=v,b.lineWidth=A,b.stroke())}var cx;(function(a){a[a.right=0]="right",a[a.down=1]="down",a[a.left=2]="left",a[a.up=3]="up"})(cx||(cx={}));var tp;(function(a){a[a.IDLE=0]="IDLE",a[a.UPDATING=1]="UPDATING"})(tp||(tp={}));function Nj(a,b,d){const f=Math.ceil(b*a.resolution),i=Math.ceil(d*a.resolution),l=a.canvas;if(l.width===f&&l.height===i){Oj(a);return}l.width=f,l.height=i,a.texture.setSize(b,d),a.setSize(b,d),a.updateTexture()}function Oj(a){a.context.clearRect(0,0,a.canvas.width,a.canvas.height),a.updateTexture()}function Fo(a,b="#fff"){let d=a.context;d.fillStyle=b,d.fillRect(0,0,a.canvas.width,a.canvas.height),a.updateTexture()}function Pj(a,b,d){const f=new Image();f.onload=function(){const i=a.resolution,l=f.width/i,q=f.height/i;Nj(a,l,q),a.context.drawImage(f,0,0),a.updateTexture(),d&&d(),f.onload=null,f.src="",f.remove()},f.src=b}function Go(a,b){return new Promise(function(d,f){Pj(a,b,d)})}function Ho(a,b,d){return a.canvas.toDataURL(b,d)}function Io(a,b,d,f=[0,0,0,0]){const i=a.context.getImageData(b,d,1,1).data;return f[0]=i[0],f[1]=i[1],f[2]=i[2],f[3]=i[3],f}function Jo(a,b,d,f,i,l,q){q===void 0&&(q=f!==0||i!==0||l!==0?255:0);const u=a.context.createImageData(1,1);u.data[0]=f,u.data[1]=i,u.data[2]=l,u.data[3]=q,a.context.putImageData(u,b,d),a.updateTexture()}class Dc extends Lc{constructor(a=0,b=0,d=32,f=32){super(a,b,Pd());this.type="rexCanvas";const i=Mb.get();this.resolution=i.renderer.resolution,this.canvas=this.texture.image,this.context=this.canvas.getContext("2d"),this.resize(d,f)}updateTexture(){return this.texture.binding&&this.texture.binding.update(),this.setDirty(Ha.TEXTURE),this}destroy(a){this.texture.destroy(),this.canvas=null,this.context=null,super.destroy(a)}resize(a,b){return Nj(this,a,b),this}clear(){return Oj(this),this}}function Tu(a,b){b.width!==a.width&&(b.width=a.width),b.height!==a.height&&(b.height=a.height);let d=b.getContext("2d");return d.drawImage(a.texture.image,a.x,a.y,a.width,a.height),b}function Ko(a,b,d=0,f=0,i=a.width,l=a.height){const q=a.resolution,u=a.canvas,v=Math.ceil(i*q),A=Math.ceil(l*q);yd(b,function(E,H){E.width!==v&&(E.width=v),E.height!==A&&(E.height=A),H.clearRect(0,0,v,A),H.drawImage(u,d,f,v,A)},void 0,a.resolution)}function Lo(a,b,d){const f=Tb.get();if(!f.has(b))return;Tu(f.get(b).getFrame(d),a.canvas);const i=a.canvas.width,l=a.canvas.height,q=a.resolution,u=i/q,v=l/q;a.texture.setSize(u,v),a.setSize(u,v),a.updateTexture()}class Mo extends Dc{fill(a="#fff"){return Fo(this,a),this}getCanvas(){return this.canvas}getContext(){return this.context}getDataURL(a,b){return Ho(this,a,b)}getPixel(a,b,d=[0,0,0,0]){return Io(this,a,b,d)}generateTexture(a,b=0,d=0,f=this.width,i=this.height){return Ko(this,a,b,d,f,i),this}loadFromURL(a,b){return Pj(this,a,b),this}loadFromURLPromise(a){return Go(this,a)}loadTexture(a,b){return Lo(this,a,b),this}setPixel(a,b,d,f,i,l){return Jo(this,a,b,d,f,i,l),this}}const Gqa=Yb(Zr());function Uu(a,b){const d=new Gqa.Chart(a.context,Sz(a,b));return d}function Sz(a,b={}){b.hasOwnProperty("options")||(b.options={});const d=b.options;d.responsive=!1,d.maintainAspectRatio=!1,d.hasOwnProperty("devicePixelRatio")||(d.devicePixelRatio=1);let f=!1;d.hasOwnProperty("animation")?d.animation===!1&&(f=!0,d.animation={}):d.animation={};const i=d.animation;f&&(i.duration=0);const l=i.onProgress;i.onProgress=function(u){l&&l(u),a.updateTexture()};const q=i.onComplete;return i.onComplete=function(u){q&&q(u),a.updateTexture()},b}function Vu(a,b,d){a.height=b,a.width=d,a.aspectRatio=a.height?a.width/a.height:null,a.update()}function Wf(a,b){if(typeof b==="string"){const d=a.data.datasets;for(let f=0,i=d.length;f<i;f++){const l=d[f];if(l.label===b)return l}}else return a.data.datasets[b];return null}function Wu(a,b,d){const f=Wf(a,b);if(!f)return;if(typeof d==="string"){const i=a.data.labels;d=i.indexOf(d);if(d===-1)return}return f.data[d]}function Xu(a,b,d,f){const i=Wf(a,b);if(!i)return;if(typeof d==="string"){const l=a.data.labels;d=l.indexOf(d);if(d===-1)return}i.data[d]=f}class oh extends Dc{constructor(a=0,b=0,d=1,f=1,i={}){super(a,b,d,f);this.type="rexChart";this.setChart(i)}destroy(a){this.chart&&(this.chart.destroy(),this.chart=null),super.destroy(a)}setChart(a={}){return this.chart&&this.chart.destroy(),this.chart=Uu(this,a),this}resize(a=this.width,b=this.height){return a===this.width&&b===this.height?this:(super.resize(a,b),this.chart&&Vu(this.chart,this.canvas.width,this.canvas.height),this)}getChartDataset(a){let b;return this.chart&&(b=Wf(this.chart,a)),b}getChartData(a,b){let d;return this.chart&&(d=Wu(this.chart,a,b)),d}setChartData(a,b,d){return this.chart&&Xu(this.chart,a,b,d),this}updateChart(){return this.chart&&this.chart.update(),this}}var _c;(function(a){a[a.circle=0]="circle",a[a.ellipse=1]="ellipse",a[a.roundRectangle=2]="roundRectangle"})(_c||(_c={}));function No(a,b,d,f=_c.circle){let i,l,q,u;typeof f==="object"?{maskType:i,backgroundStyle:l,radius:q,iteration:u}=f:i=f,typeof i==="string"&&(i=_c[i]);const v=a.canvas,A=a.context,E=Tb.get();if(!E.has(b))return;const H=E.get(b).getFrame(d),Q=H.width,J=H.height;v.width!==Q&&(v.width=Q),v.height!==J&&(v.height=J),A.clearRect(0,0,Q,J),l&&(A.fillStyle=l,A.fillRect(0,0,Q,J)),A.beginPath();switch(i){case _c.roundRectangle:Qj(A,0,0,Q,J,q,u);break;default:const S=Math.floor(Q/2),aa=Math.floor(J/2);i===_c.circle?A.arc(S,aa,Math.min(S,aa),0,2*Math.PI):A.ellipse(S,aa,S,aa,0,0,2*Math.PI);break}A.clip(),A.drawImage(H.texture.image,H.x,H.y,H.width,H.height),a.texture.setSize(Q,J),a.setSize(Q,J),a.updateTexture()}class ph extends Dc{constructor(a,b,d,f,i=_c.circle){super(a,b);this.type="rexMaskedImage";No(this,d,f,i)}maskImage(a,b,d=_c.circle){return No(this,a,b,d),this}}class qh extends Dc{constructor({x:a=0,y:b=0,width:d=1,height:f=1,fillStyle:i,fillColor2:l,isHorizontalGradient:q=!0,strokeStyle:u,lineWidth:v=2}={}){super(a,b);this.type="rexCanvasRoundRectangle";this.setFillStyle(i,l,q),this.setStrokeStyle(u,v),this.resize(d,f)}setFillStyle(a,b,d=!0){return this.fillStyle=a,this.fillColor2=b,this.isHorizontalGradient=d,this}setStrokeStyle(a,b){return this.strokeStyle=a,this.lineWidth=b,this}resize(a,b){return super.resize(a,b),this.refresh(),this}refresh(){let a=this.lineWidth;this.strokeStyle||(a=0);const b=a/2,d=b,f=b,i=this.width-a,l=this.height-a;return Rj(this.canvas,this.context,d,f,i,l,ic(this.fillStyle,this.canvas,this.context),ic(this.strokeStyle,this.canvas,this.context),a,ic(this.fillColor2,this.canvas,this.context),this.isHorizontalGradient),this}}class sh extends Dc{constructor({x:a=0,y:b=0,width:d=1,height:f=1,radius:i=0,iteration:l,fillStyle:q,fillColor2:u,isHorizontalGradient:v=!0,strokeStyle:A,lineWidth:E=2}={}){super(a,b);this.type="rexCanvasRoundRectangle";this.setRadius(i),this.setIteration(l),this.setFillStyle(q,u,v),this.setStrokeStyle(A,E),this.resize(d,f)}setRadius(a){return this.radius=a,this}setIteration(a){return this.iteration=a,this}setFillStyle(a,b,d=!0){return this.fillStyle=a,this.fillColor2=b,this.isHorizontalGradient=d,this}setStrokeStyle(a,b){return this.strokeStyle=a,this.lineWidth=b,this}resize(a,b){return super.resize(a,b),this.refresh(),this}refresh(){let a=this.lineWidth;this.strokeStyle||(a=0);const b=a/2,d=b,f=b,i=this.width-a,l=this.height-a;return rh(this.canvas,this.context,d,f,i,l,this.radius,ic(this.fillStyle,this.canvas,this.context),ic(this.strokeStyle,this.canvas,this.context),a,ic(this.fillColor2,this.canvas,this.context),this.isHorizontalGradient,this.iteration),this}}function pc(a,b){Array.isArray(b)?Kl(a,...b):se(a,b)}function Vb(a,b,d=!0){if(Array.isArray(b)){Ig(a,...b);for(let f=0,i=b.length;f<i;f++)b[f].destroy()}else{const f=b;we(a,f),d&&f.destroy()}}function $c(a,b=!0){const d=a.children;for(let f=0,i=d.length;f<i;f++){const l=d[f];l.parent=null,b&&l.destroy()}d.length=0}class Oo extends rd{constructor(){super(...arguments);this.type="rexContainer"}add(a){return pc(this,a),this}remove(a,b=!0){return Vb(this,a,b),this}clear(a=!0){return $c(this,a),this}}function Xe(a){return a.x+(0-a.originX)*a.width}function Ze(a){return a.x+(.5-a.originX)*a.width}function Ye(a){return a.x+(1-a.originX)*a.width}function _e(a){return a.y+(0-a.originY)*a.height}function af(a){return a.y+(.5-a.originY)*a.height}function $e(a){return a.y+(1-a.originY)*a.height}function vh(a,b){a.x+=b-Xe(a)}function xh(a,b){a.x+=b-Ze(a)}function wh(a,b){a.x+=b-Ye(a)}function yh(a,b){a.y+=b-_e(a)}function Ah(a,b){a.y+=b-af(a)}function zh(a,b){a.y+=b-$e(a)}function Po(a,b){return b===void 0?a:a[b]}function Qo(a,b,d){if(typeof b==="string")a[b]=d;else if(typeof b==="number")a.left=b,a.right=b,a.top=b,a.bottom=b;else{let f,i,l,q;({left:f=0,right:i=0,top:l=0,bottom:q=0}=b),a.left=f,a.right=i,a.top=l,a.bottom=q}}function Yu(a){let b;return a instanceof Va?b=Math.max(a.minWidth,a.childrenWidth):a.hasOwnProperty("minWidth")?b=a.minWidth:b=a.width,b}function Zu(a){let b;return a instanceof Va?b=Math.max(a.minHeight,a.childrenHeight):a.hasOwnProperty("minHeight")?b=a.minHeight:b=a.height,b}function _u(a,b,d,f){if(a.ignoreLayout)return this;var i=!b;i&&a.preLayout(),d=a.resolveWidth(d),i&&(a.resolveChildrenWidth(d),a.runWidthWrap(d)),f=a.resolveHeight(f),a.resize(d,f),a.layoutChildren(),a.layoutBackgrounds(),a.postLayout()}function Xf(a,b){const d=Math.max(a.childrenWidth,a.minWidth);return b===void 0?b=d:d>b,b}function Yf(a,b){const d=Math.max(a.childrenHeight,a.minHeight);return b===void 0?b=d:d>b,b}function $u(a,b){for(const d in a.sizerChildren){const f=a.sizerChildren[d];if(f&&f instanceof Va&&!f.ignoreLayout){let i=a.getExpandedChildWidth(f,b);i=f.resolveWidth(i),f.resolveChildrenWidth(i)}}}function Sj(a,b){for(let d in a.sizerChildren){let f=a.sizerChildren[d];if(!f||f instanceof Va&&f.ignoreLayout)continue;let i=a.getExpandedChildWidth(f,b);i===void 0&&(i=a.resolveWidth()),f.runWidthWrap&&f.runWidthWrap(i)}}function We(a){a._childrenWidth=void 0,a._childrenHeight=void 0;const b=a.getChildrenSizers();for(var d=0,f=b.length;d<f;d++){const i=b[d];if(i.ignoreLayout)continue;We(i)}}function $d(a,b,d){if(!a||b===void 0&&d===void 0)return;a.resize?(b===void 0&&(b=a.width),d===void 0&&(d=a.height),a.resize(b,d)):(b!==void 0&&(a.width=b),d!==void 0&&(a.height=d))}var xb;(function(a){a[a.left_top=0]="left_top",a[a.top_left=0]="top_left",a[a.center_top=1]="center_top",a[a.top_center=1]="top_center",a[a.right_top=2]="right_top",a[a.top_right=2]="top_right",a[a.left_center=3]="left_center",a[a.center_left=3]="center_left",a[a.center=4]="center",a[a.center_center=4]="center_center",a[a.right_center=5]="right_center",a[a.center_right=5]="center_right",a[a.left_bottom=6]="left_bottom",a[a.bottom_left=6]="bottom_left",a[a.center_bottom=7]="center_bottom",a[a.bottom_center=7]="bottom_center",a[a.right_bottom=8]="right_bottom",a[a.bottom_right=8]="bottom_right"})(xb||(xb={}));function pw(a,b,d=xb.center,f=0,i=0){const l=d%3;switch(l){case 0:vh(a,Xe(b));break;case 1:xh(a,Ze(b));break;default:wh(a,Ye(b));break}const q=Math.floor(d/3);switch(q){case 0:yh(a,_e(b));break;case 1:Ah(a,af(b));break;default:zh(a,$e(b));break}a.x-=f,a.y-=i}class Xz{constructor(){this.x=0;this.y=0;this.width=0;this.height=0;this.originX=0;this.originY=0}setTo(a=0,b=0,d=0,f=0){return this.x=a,this.y=b,this.width=d,this.height=f,this}alignIn(a,b=xb.center,d=0,f=0){return pw(a,this,b,d,f),this}}const bd=new Xz();function av(a){if(a.backgroundChildren===void 0)return;const b=a.left,d=a.top,f=a.width,i=a.height,l=a.backgroundChildren;for(let q=0,u=l.length;q<u;q++){const v=l[q],A=v.rexSizer;if(A.hidden)continue;const E=A.padding,H=b+E.left,Q=d+E.top,J=f-E.left-E.right,S=i-E.top-E.bottom;$d(v,J,S),bd.setTo(H,Q,J,S).alignIn(v)}}function bv(a,b,d,f){}function cv(a,b){pc(a,b)}function dv(a){return a.hasOwnProperty("rexSizer")||(a.rexSizer={}),a.rexSizer}function ad(a=0,b={left:0,right:0,top:0,bottom:0}){if(typeof a==="number")b.left=a,b.right=a,b.top=a,b.bottom=a;else{let d,f,i,l;({left:d=0,right:f=0,top:i=0,bottom:l=0}=a),b.left=d,b.right=f,b.top=i,b.bottom=l}return b}function ev(a,b,{padding:d=0,childKey:f}={}){a.backgroundChildren===void 0&&(a.backgroundChildren=[]),pc(a,b),a.backgroundChildren.push(b);const i=a.getSizerState(b);i.padding=ad(d),f!==void 0&&a.addChildrenMap(f,b)}function fv(a,b){return a.backgroundChildren===void 0?!1:a.backgroundChildren.includes(b)}function gv(a,b,d){a.childrenMap===void 0&&(a.childrenMap={}),a.childrenMap[b]=d}function kv(a,b,d=!1){if(d){const f=[a];for(;f.length;){a=f.shift();for(let i=0,l=a.children.length;i<l;i++){const q=a.children[i];if(q.name===b)return q;f.push(q)}}}else for(let f=0,i=a.children.length;f<i;f++){const l=a.children[f];if(l.name===b)return l}return null}function Ro(a,b,d){typeof b==="string"&&(b=b.split("."));if(b.length===0)return null;let f=b.shift(),i=null;if(f.charAt(0)==="#")f=f.substring(1),i=kv(a,f,d);else if(!f.includes("["))a.childrenMap&&(i=a.childrenMap[f]);else{const l=f.match(Uz);if(l!=null){if(a.childrenMap){let q=a.childrenMap[l[1]];q&&(i=q[l[2]])}}}return b.length===0?i:i&&i.childrenMap?Ro(i,b,d):null}const Uz=/(\S+)\[(\d+)\]/i;function Bh(a){let b=a.parent;for(;b;){if(b instanceof Va)return b;b=b.parent}return null}function hv(a,b){return Bh(b)===a}function iv(a,b){return a.backgroundChildren?a.backgroundChildren.includes(b):!1}function jv(a){let b,d=Bh(a);for(;d;)b=d,d=Bh(d);return b}class Va extends Oo{constructor({x:a=0,y:b=0,width:d=0,height:f=0,space:i=0,name:l=""}={}){super(a,b);this.type="rexBaseSizer";this.space={left:0,right:0,top:0,bottom:0};this.rexSizer={};this.needLayout=!0;this.setMinSize(d,f),this.setInnerPadding(i),this.name=l}destroy(a){this.sizerChildren=null,this.backgroundChildren=null,super.destroy(a)}get ignoreLayout(){return this.rexSizer.hidden||!this.needLayout}get left(){return Xe(this)}set left(a){vh(this,a)}alignLeft(a){return this.left=a,this}get right(){return Ye(this)}set right(a){wh(this,a)}alignRight(a){return this.right=a,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get centerX(){return Ze(this)}set centerX(a){xh(this,a)}alignCenterX(a){return this.centerX=a,this}get top(){return _e(this)}set top(a){yh(this,a)}alignTop(a){return this.top=a,this}get bottom(){return $e(this)}set bottom(a){zh(this,a)}alignBottom(a){return this.bottom=a,this}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get centerY(){return af(this)}set centerY(a){Ah(this,a)}alignCenterY(a){return this.centerY=a,this}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}setMinSize(a,b){return this.setMinWidth(a).setMinHeight(b),this}setMinWidth(a=0){return this.minWidth=a,this}setMinHeight(a=0){return this.minHeight=a,this}getChildWidth(a){return Yu(a)}getChildHeight(a){return Zu(a)}getChildrenWidth(){return 0}getChildrenHeight(){return 0}getExpandedChildWidth(a,b){return b}getExpandedChildHeight(a,b){return b}getChildrenSizers(a=[]){return a}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}resize(a=this.width,b=this.height){return this.setSize(a,b),this}getSizerState(a){return dv(a)}layout(){const a=this.x,b=this.y;return this.setPosition(0,0).runLayout().setPosition(a,b),this}getInnerPadding(a){return Po(this.space,a)}setInnerPadding(a,b){return Qo(this.space,a,b),this}getOutterPadding(a){return Po(this.getSizerState(this).padding,a)}setOutterPadding(a,b){return Qo(this.getSizerState(this).padding,a,b),this}runLayout(a,b,d){return _u(this,a,b,d),this}preLayout(a,b,d){return We(this),this}resolveWidth(a){return Xf(this,a)}resolveHeight(a){return Yf(this,a)}resolveChildrenWidth(a){$u(this,a)}runWidthWrap(a){Sj(this,a)}layoutChildren(){}layoutBackgrounds(){return av(this),this}postLayout(a,b,d){return bv(this,a,b,d),this}pin(a){return cv(this,a),this}addBackground(a,b){return ev(this,a,b),this}isBackground(a){return fv(this,a)}addChildrenMap(a,b){return gv(this,a,b),this}getElement(a,b=!1){return Ro(this,a,b)}isChild(a){return hv(this,a)}isBackgroundChild(a){return iv(this,a)}getTopmostParentSizer(a=this){return jv(a)}}var Ec;(function(a){a[a.left=0]="left",a[a.top=0]="top",a[a.right=1]="right",a[a.bottom=1]="bottom",a[a.center=2]="center",a[a.justify=3]="justify",a[a["justify-left"]=3]="justify-left",a[a["justify-top"]=3]="justify-top",a[a["justify-right"]=4]="justify-right",a[a["justify-bottom"]=4]="justify-bottom",a[a["justify-center"]=5]="justify-center"})(Ec||(Ec={}));function lv(a,b=a.sizerChildren){let d=0;for(let f=0,i=b.length;f<i;f++){const l=b[f];if(l===`
`)continue;const q=a.getChildWidth(l);d=Math.max(q,d)}return d}function mv(a,b=a.sizerChildren){let d=0;for(let f=0,i=b.length;f<i;f++){const l=b[f];if(l===`
`)continue;const q=a.getChildHeight(l);d=Math.max(q,d)}return d}function nv(a,b=[]){const d=a.sizerChildren;for(var f=0,i=d.length;f<i;f++){const l=d[f];if(l===`
`)continue;l instanceof Va&&b.push(l)}return b}var Bb;(function(a){a[a.x=0]="x",a[a.h=0]="h",a[a.horizontal=0]="horizontal",a[a["left-to-right"]=0]="left-to-right",a[a.y=1]="y",a[a.v=1]="v",a[a.vertical=1]="vertical",a[a["top-to-bottom"]=1]="top-to-bottom"})(Bb||(Bb={}));function ov(a){if(a.rexSizer.hidden)return 0;let b;return a.orientation===Bb.x?b=a.maxChildWidth:b=0,b+a.space.left+a.space.right}function pv(a){if(a.rexSizer.hidden)return 0;let b;return a.orientation===Bb.x?b=0:b=a.maxChildHeight,b+a.space.top+a.space.bottom}function qv(a){a._maxChildWidth=void 0,a._maxChildHeight=void 0,We(a)}function yv(a,b,d){d===void 0?d={lines:[],width:0,height:0}:(d.lines.length=0,d.width=0,d.height=0);const f=d.lines,i=a.sizerChildren;let l=0,q;for(let u=0,v=i.length;u<v;u++){let A=i[u],E,H;if(A===`
`)A=void 0,E=0,H=!0;else{if(A.rexSizer.hidden)continue;A instanceof Va&&A.layout(),E=Vz(A),H=l<E}H&&(q&&(q.width=b-(l+a.space.item),d.width=Math.max(d.width,q.width),d.height+=q.height+a.space.line),q={children:[],width:0,height:0},f.push(q),l=b),l-=E+a.space.item;if(A){q.children.push(A);const Q=Wz(A);q.height=Math.max(q.height,Q)}}return q&&(q.width=b-(l+a.space.item),d.width=Math.max(d.width,q.width),d.height+=q.height),d}function Vz(a){const b=a.rexSizer.padding;return a.width+b.left+b.right}function Wz(a){const b=a.rexSizer.padding;return a.height+b.top+b.bottom}function rv(a,b){const d=b-a.space.left-a.space.right;a.widthWrapResult=yv(a,d,a.widthWrapResult),Sj(a,b)}function sv(a){const b=this.innerWidth,d=a.innerLeft,f=a.innerTop;let i=d,l=f;const q=a.widthWrapResult.lines;for(let A=0,E=q.length;A<E;A++){const H=q[A],Q=H.children;a.rtl&&Q.reverse();const J=b-H.width;let S=0;switch(a.align){case Ec.left:break;case Ec.right:i+=J;break;case Ec.center:i+=J/2;break;case Ec["justify-left"]:S=So(b,J,Q.length);break;case Ec["justify-right"]:S=So(b,J,Q.length),S===0&&(i+=J);break;case Ec["justify-center"]:S=So(b,J,Q.length),S===0&&(i+=J/2);break}for(var u=0,v=Q.length;u<v;u++){const aa=Q[u],X=aa.rexSizer,ga=X.padding;let ja,qa,ka,ta;ja=i+ga.left,u>0&&(ja+=a.space.item),qa=l+ga.top,ka=aa.width,ta=aa.height,i=ja+ka+ga.right+S,bd.setTo(ja,qa,ka,ta).alignIn(aa,xb.center)}i=d,l+=H.height+a.space.line}}function So(a,b,d){return b/a<=.25?b/(d-1):0}function tv(a,b,{padding:d=0,childKey:f,index:i}={}){pc(a,b);const l=a.getSizerState(b);l.padding=ad(d),i===void 0||i>=a.sizerChildren.length?a.sizerChildren.push(b):a.sizerChildren.splice(i,0,b),f!==void 0&&a.addChildrenMap(f,b)}function uv(a){a.sizerChildren.push(`
`)}function jh(a,b){if(b>=a.length)return;let d=a.length-1,f=a[b];for(let i=b;i<d;i++)a[i]=a[i+1];return a.length=d,f}function cd(a,b,d,f=a){if(!Array.isArray(b)){const l=a.indexOf(b);return l!==-1?(jh(a,l),d&&d.call(f,b),b):null}let i=b.length-1;for(;i>=0;){const l=b[i],q=a.indexOf(l);q!==-1?(jh(a,q),d&&d.call(f,l)):b.pop(),i--}return b}function vv(a,b,d=!0){Vb(a,b,d);const f=cd(a.sizerChildren,b);!f&&a.backgroundChildren&&cd(a.backgroundChildren,b)}function wv(a,b=!0){const d=a.sizerChildren;for(let f=0,i=d.length;f<i;f++){const l=d[f];if(l===`
`)continue;Vb(a,l,b)}a.sizerChildren.length=0}function xv(a,b=!0){$c(a,b),a.sizerChildren.length=0,a.backgroundChildren&&(a.backgroundChildren.length=0)}class Tj extends Va{constructor({space:a={item:0,line:0},align:b=Ec.left,rtl:d=!1}={}){super(arguments[0]);this.type="rexFixedWidthSizer";this.sizerChildren=[];this.setItemSpacing(a.item),this.setLineSpacing(a.line),this.setAlign(b),this.setRTL(d)}setItemSpacing(a=0){return this.space.item=a,this}setLineSpacing(a=0){return this.space.line=a,this}setAlign(a){return typeof a==="string"&&(a=Ec[a]),this.align=a,this}setRTL(a=!0){return this.rtl=a,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=lv(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=mv(this)),this._maxChildHeight}getChildrenSizers(a=[]){return nv(this,a)}getChildrenWidth(){return ov(this)}getChildrenHeight(){return pv(this)}preLayout(){return qv(this),this}runWidthWrap(a){rv(this,a)}layoutChildren(){sv(this)}add(a,b){return tv(this,a,b),this}addNewLine(){return uv(this),this}remove(a,b=!0){return vv(this,a,b),this}removeAll(a=!0){return wv(this,a),this}clear(a=!0){return xv(this,a),this}}function dd(a,b,d=0,f=a.length-1){for(let i=d;i<=f;i++)a[i]=b;return a}function zv(a,{column:b=0,row:d=0,columnProportions:f=0,rowProportions:i=0,space:l}={}){a.columnCount=b,a.rowCount=d,a.sizerChildren.length=b*d,dd(a.sizerChildren,null),a.columnProportions.length=b;if(typeof f==="number")dd(a.columnProportions,f);else for(let v=0;v<b;v++)a.columnProportions[v]=f[v]??0;a.rowProportions.length=d;if(typeof i==="number")dd(a.rowProportions,i);else for(let v=0;v<d;v++)a.rowProportions[v]=i[v]??0;a.columnWidth.length=b,a.rowHeight.length=d,a.space.column=[],a.space.column.length=b-1;const q=l.column??0;if(typeof q==="number")dd(a.space.column,q);else for(let v=0,A=a.space.column.length;v<A;v++)a.space.column[v]=q[v]??0;a.space.row=[],a.space.row.length=d-1;const u=l.row??0;if(typeof u==="number")dd(a.space.row,u);else for(let v=0,A=a.space.row.length;v<A;v++)a.space.row[v]=u[v]??0}function Av(a,b=[]){const d=a.sizerChildren;for(var f=0,i=d.length;f<i;f++){const l=d[f];l&&l instanceof Va&&b.push(l)}return b}function Wj(...a){return Array.prototype.reduce.call(a,IA,0)}function IA(a,b){return a+b}function Bv(a){if(a.rexSizer.hidden)return 0;let b=0;const d=a.sizerChildren;for(let f=0;f<a.columnCount;f++){const i=a.columnProportions[f];let l=0;if(i===0){for(let q=0;q<a.rowCount;q++){const u=d[q*a.columnCount+f];if(!u)continue;if(u.rexSizer.hidden)continue;const v=u.rexSizer.padding,A=a.getChildWidth(u)+v.left+v.right;l=Math.max(l,A)}b+=l}a.columnWidth[f]=l}return b+Wj(a.space.left,...a.space.column,a.space.right)}function Cv(a){if(a.rexSizer.hidden)return 0;let b=0;const d=a.sizerChildren;for(let i=0;i<a.rowCount;i++){const l=a.rowProportions[i];let q=0;if(l===0){for(var f=0;f<a.columnCount;f++){const u=d[i*a.columnCount+f];if(!u)continue;if(u.rexSizer.hidden)continue;const v=u.rexSizer.padding,A=a.getChildHeight(u)+v.top+v.bottom;q=Math.max(q,A)}b+=q}a.rowHeight[i]=q}return b+Wj(a.space.top,...a.space.row,a.space.bottom)}function Dv(a,b){let d;const f=a.rexSizer;if(f.expand){const i=f.padding;d=b-i.left-i.right}return d}function Ev(a,b){let d;const f=a.rexSizer;if(f.expand){const i=f.padding;d=b-i.top-i.bottom}return d}function Fv(a,b){b=Xf(a,b);if(a.proportionWidthLength===void 0){const d=a.totalColumnProportions;if(d>0){const f=b-a.childrenWidth;f>=0&&(a.proportionWidthLength=f/d)}else a.proportionWidthLength=0}return b}function Gv(a,b){b=Yf(a,b);if(a.proportionHeightLength===void 0){const d=a.totalRowProportions;if(d>0){const f=b-a.childrenHeight;f>=0&&(a.proportionHeightLength=f/d)}else a.proportionHeightLength=0}return b}function Zf(a,b){const d=a.columnProportions[b],f=d===0?a.columnWidth[b]:d*a.proportionWidthLength;return f}function Hv(a,b){for(const d in a.sizerChildren){const f=a.sizerChildren[d];if(!f)continue;const i=Zf(a,parseInt(d)%a.columnCount);if(f instanceof Va){let l=a.getExpandedChildWidth(f,i);l=f.resolveWidth(l),f.resolveChildrenWidth(l)}}}function Iv(a,b){for(const d in this.sizerChildren){const f=this.sizerChildren[d];if(!f)continue;const i=Zf(a,parseInt(d)%a.columnCount);let l=a.getExpandedChildWidth(f,i);l===void 0&&(l=a.resolveWidth()),f.runWidthWrap&&f.runWidthWrap(l)}}function ae(a,b,d){return a.sizerChildren[d*a.columnCount+b]}function Jv(a){const b=a.innerLeft,d=a.innerTop,f=a.space.column,i=a.space.row;let l=b,q=d;for(let v=0;v<a.rowCount;v++){const A=a.rowProportions[v],E=A===0?a.rowHeight[v]:A*a.proportionHeightLength;l=b;for(var u=0;u<a.columnCount;u++){const H=a.columnProportions[u],Q=H===0?a.columnWidth[u]:H*a.proportionWidthLength,J=ae(a,u,v);if(!J||J.rexSizer.hidden){l+=Q+f[u];continue}const S=a.getExpandedChildWidth(J,Q),aa=a.getExpandedChildHeight(J,E);J instanceof Va?J.runLayout(a,S,aa):$d(J,S,aa);const X=J.rexSizer,ga=X.padding,ja=l+ga.left,qa=Q-ga.left-ga.right,ka=q+ga.top,ta=E-ga.top-ga.bottom;bd.setTo(ja,ka,qa,ta).alignIn(J,X.align),l+=Q+f[u]}q+=E+i[v]}}function Kv(a,b){const d=a.rowProportions[b],f=d===0?a.rowHeight[b]:d*a.proportionHeightLength;return f}function Sv(a,b,d,f,i){if(typeof a==="number"&&typeof b==="number"){let l=b*f+a;if(!d[l])return l}else if(b===void 0&&typeof a==="number")for(let l=0;l<i;l++){let q=l*f+a;if(!d[q])return q}else if(a===void 0&&typeof b==="number")for(let l=0;l<f;l++){let q=b*f+l;if(!d[q])return q}else if(b===!0)for(let l=0;l<f;l++)for(let q=0;q<i;q++){let u=q*f+l;if(!d[u])return u}else for(let l=0,q=d.length;l<q;l++)if(!d[l])return l;return null}function Lv(a,b,{column:d,row:f,align:i=xb.center,padding:l=0,expand:q=!0,childKey:u}={}){const v=Sv(d,f,a.sizerChildren,a.columnCount,a.rowCount);if(v===null)return;pc(a,b),typeof i==="string"&&(i=xb[i]);const A=a.getSizerState(b);A.align=i,A.padding=ad(l),A.expand=q,a.sizerChildren[v]=b,u!==void 0&&a.addChildrenMap(u,b)}function Uj(a,b,d=!0){Vb(a,b,d);const f=a.sizerChildren.indexOf(b);f>=0?a.sizerChildren[f]=null:a.backgroundChildren&&cd(a.backgroundChildren,b)}function Mv(a,b,d,f=!0){const i=ae(a,b,d);i&&Uj(a,i,f)}function Nv(a,b=!0){Vb(a,a.sizerChildren,b),dd(a.sizerChildren,null)}function Ov(a,b=!0){$c(a,b),dd(a.sizerChildren,null),a.backgroundChildren&&(a.backgroundChildren.length=0)}function Pv(a,b,d){if(!b)return null;const f=a.sizerChildren.indexOf(b);return f===-1?null:(d===void 0&&(d={x:0,y:0}),d.x=f%a.columnCount,d.y=Math.floor(f/a.columnCount),d)}function Qv(a,b,d){for(let f=0,i=a.rowCount;f<i;f++)for(let l=0,q=a.columnCount;l<q;l++){if(ae(a,l,f))continue;let u;d?u=b.call(d,l,f,a):u=b(l,f,a);if(u)return}}function Rv(a){const b=a.sizerChildren;let d=0;for(let f=0,i=b.length;f<i;f++)b[f]||d++;return d}class Vj extends Va{constructor(a={}){super(a);this.type="rexGridSizer";this.sizerChildren=[];this.columnProportions=[];this.rowProportions=[];this.columnWidth=[];this.rowHeight=[];zv(this,a)}setColumnProportion(a,b){return a<this.columnProportions.length&&(this.columnProportions[a]=b),this}setRowProportion(a,b){return a<this.rowProportions.length&&(this.rowProportions[a]=b),this}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=this.columnProportions.reduce((a,b)=>a+b)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=this.rowProportions.reduce((a,b)=>a+b)),this._totalRowProportions}getChildrenSizers(a=[]){return Av(this,a)}getChildrenWidth(){return Bv(this)}getChildrenHeight(){return Cv(this)}getExpandedChildWidth(a,b){return Dv(a,b)}getExpandedChildHeight(a,b){return Ev(a,b)}preLayout(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,super.preLayout(),this}resolveWidth(a){return Fv(this,a)}resolveHeight(a){return Gv(this,a)}resolveChildrenWidth(a){Hv(this,a)}runWidthWrap(a){Iv(this,a)}layoutChildren(){return Jv(this),this}add(a,b){return Lv(this,a,b),this}remove(a,b=!0){return Uj(this,a,b),this}removeAt(a,b,d=!0){return Mv(this,a,b,d),this}removeAll(a=!0){return Nv(this,a),this}clear(a=!0){return Ov(this,a),this}getChildAt(a,b){return ae(this,a,b)}childToGridIndex(a,b){return Pv(this,a,b)}getColumnWidth(a){return Zf(this,a)}getRowHeight(a){return Kv(this,a)}forEachEmptyGrid(a,b){return Qv(this,a,b),this}get gridCount(){return this.sizerChildren.length}get emptyGridCount(){return Rv(this)}}function bw(a,b=[]){const d=a.sizerChildren;for(var f=0,i=d.length;f<i;f++){const l=d[f];l instanceof Va&&b.push(l)}return b}function cw(a){const b=a.sizerChildren;let d=0;for(let f=0,i=b.length;f<i;f++){const l=b[f];if(l.rexSizer.hidden)continue;const q=l.rexSizer,u=q.proportion;u>0&&(d+=u)}return d}class $j extends rd{}function ak(a){return a instanceof $j}function dw(a,b=!0){if(a.rexSizer.hidden)return 0;b===void 0&&(b=!0);const d=a.sizerChildren;let f=0;if(a.orientation===Bb.x)for(var i=0,l=d.length;i<l;i++){const q=d[i],u=q.rexSizer;if(u.hidden)continue;const v=u.padding;let A;u.proportion===0||b&&!ak(q)&&u.proportion>0?A=a.getChildWidth(q):A=0,A+=v.left+v.right,i>0&&(A+=a.space.item),f+=A}else for(var i=0,l=d.length;i<l;i++){const q=d[i];if(!q.hasOwnProperty("rexSizer"))continue;const u=q.rexSizer;if(u.hidden)continue;const v=u.padding,A=a.getChildWidth(q)+v.left+v.right;f=Math.max(A,f)}return f+a.space.left+a.space.right}function ew(a,b=!0){if(a.rexSizer.hidden)return 0;const d=a.sizerChildren;let f=0;if(a.orientation===Bb.x)for(var i=0,l=d.length;i<l;i++){const q=d[i],u=q.rexSizer;if(u.hidden)continue;const v=u.padding,A=a.getChildHeight(q)+v.top+v.bottom;f=Math.max(A,f)}else for(var i=0,l=d.length;i<l;i++){const q=d[i];if(!q.hasOwnProperty("rexSizer"))continue;const u=q.rexSizer;if(u.hidden)continue;const v=u.padding;let A;u.proportion===0||b&&!ak(q)&&u.proportion>0?A=a.getChildHeight(q):A=0,A+=v.top+v.bottom,i>0&&(A+=a.space.item),f+=A}return f+a.space.top+a.space.bottom}function fw(a,b,d=a.width){let f;const i=b.rexSizer,l=i.padding;if(a.orientation===Bb.x)i.proportion>0&&a.proportionLength>0&&(f=i.proportion*a.proportionLength);else if(i.expand){const q=d-a.space.left-a.space.right;f=q-l.left-l.right}return f}function gw(a,b,d=a.height){let f;const i=b.rexSizer,l=i.padding;if(a.orientation===Bb.x){if(i.expand){const q=d-a.space.top-a.space.bottom;f=q-l.top-l.bottom}}else i.proportion>0&&a.proportionLength>0&&(f=i.proportion*a.proportionLength);return f}function hw(a){a._childrenProportion=void 0,We(a)}function iw(a,b){b=Xf(a,b);if(a.proportionLength===void 0&&a.orientation===0){var d=b-a.childrenWidth;d>0?(d=b-a.getChildrenWidth(!1),a.proportionLength=d/a.childrenProportion):(a.proportionLength=0,d<0)}return b}function jw(a,b){b=Yf(a,b);if(a.proportionLength===void 0&&a.orientation===1){var d=b-a.childrenHeight;d>0?(d=b-a.getChildrenHeight(!1),a.proportionLength=d/a.childrenProportion):(a.proportionLength=0,d<0)}return b}function kw(a){const b=a.sizerChildren,d=a.innerLeft,f=a.innerTop,i=a.innerWidth,l=a.innerHeight;let q=d,u=f;for(let v=0,A=b.length;v<A;v++){const E=b[v];if(E.rexSizer.hidden)continue;const H=E.rexSizer,Q=H.padding;let J=a.getExpandedChildWidth(E),S=a.getExpandedChildHeight(E);E instanceof Va?E.runLayout(a,J,S):$d(E,J,S),J===void 0&&(J=E.width),S===void 0&&(S=E.height);let aa,X,ga,ja;a.orientation===Bb.x?(aa=q+Q.left,H.proportion===0||a.proportionLength===0?ga=J:ga=H.proportion*a.proportionLength,X=u+Q.top,ja=l-Q.top-Q.bottom):(aa=q+Q.left,ga=i-Q.left-Q.right,X=u+Q.top,H.proportion===0||a.proportionLength===0?ja=S:ja=H.proportion*a.proportionLength),bd.setTo(aa,X,ga,ja).alignIn(E,H.align),a.orientation===Bb.x?q+=ga+Q.left+Q.right+a.space.item:u+=ja+Q.top+Q.bottom+a.space.item}}function _j(a,b,{proportion:d=0,align:f=xb.center,padding:i=0,expand:l=!1,childKey:q,index:u}={}){pc(a,b),typeof f==="string"&&(f=xb[f]);const v=a.getSizerState(b);v.proportion=d,v.align=f,v.padding=ad(i),v.expand=l,u===void 0||u>=a.sizerChildren.length?a.sizerChildren.push(b):a.sizerChildren.splice(u,0,b),q!==void 0&&a.addChildrenMap(q,b)}function lw(a,b=1){const d=new $j();_j(a,d,{proportion:b})}function mw(a,b,d=!0){Vb(a,b,d);const f=cd(a.sizerChildren,b);!f&&a.backgroundChildren&&cd(a.backgroundChildren,b)}function nw(a,b=!0){Vb(a,a.sizerChildren,b),a.sizerChildren.length=0}function ow(a,b=!0){$c(a,b),a.sizerChildren.length=0,a.backgroundChildren&&(a.backgroundChildren.length=0)}class _f extends Va{constructor({space:a={item:0},orientation:b=Bb.x}={}){super(arguments[0]);this.type="rexSizer";this.sizerChildren=[];this.setOrientation(b),this.setItemSpacing(a.item)}setOrientation(a){return typeof a==="string"&&(a=Bb[a]),this.orientation=a,this}setItemSpacing(a=0){return this.space.item=a,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=cw(this)),this._childrenProportion}getChildrenSizers(a=[]){return bw(this,a)}getChildrenWidth(a=!0){return dw(this,a)}getChildrenHeight(a=!0){return ew(this,a)}getExpandedChildWidth(a,b){return fw(this,a,b)}getExpandedChildHeight(a,b){return gw(this,a,b)}preLayout(){return hw(this),this}resolveWidth(a){return iw(this,a)}resolveHeight(a){return jw(this,a)}layoutChildren(){return kw(this),this}add(a,b){return _j(this,a,b),this}addSpace(a=1){return lw(this,a),this}remove(a,b=!0){return mw(this,a,b),this}removeAll(a=!0){return nw(this,a),this}clear(a=!0){return ow(this,a),this}}class Xj extends _f{constructor({background:a,icon:b,text:d,expandTextWidth:f=!1,expandTextHeight:i=!1,action:l,align:q,space:u={}}={}){super(arguments[0]);this.type="rexLabel";a&&this.addBackground(a),(q==="right"||q==="bottom"||q==="center")&&this.addSpace();if(b){let v;const A=u.icon??0;this.orientation===Bb.x?(d||l)&&(v={right:A}):(d||l)&&(v={bottom:A}),this.add(b,{padding:v})}if(d){let v,A,E;const H=u.text??0;this.orientation===Bb.x?(v=f?1:0,l&&(A={right:H}),E=i):(v=i?1:0,l&&(A={bottom:H}),E=f),this.add(d,{proportion:v,align:xb.center,padding:A,expand:E})}l&&this.add(l),q==="center"&&this.addSpace(),this.addChildrenMap("background",a),this.addChildrenMap("icon",b),this.addChildrenMap("text",d),this.addChildrenMap("action",l)}get text(){const a=this.childrenMap.text;if(a===void 0)return"";let b;return a.text?(b=a.text,typeof b!=="string"&&(b=b.join(`
`))):b="",b}set text(a){const b=this.childrenMap.text;b!==void 0&&(b.text=a)}setText(a){return typeof a!=="string"&&(a=a.join(`
`)),this.text=a,this}appendText(a){return typeof a!=="string"&&(a=a.join(`
`)),this.text+=a,this}}function Tv(a,b=[]){for(const[d,f]of a.sizerChildren)f instanceof Va&&b.push(f);return b}function Uv(a){if(a.rexSizer.hidden)return 0;let b=0;for(const[d,f]of a.sizerChildren){const i=f.rexSizer.padding,l=a.getChildWidth(f)+i.left+i.right;b=Math.max(l,b)}return b+a.space.left+a.space.right}function Vv(a){if(a.rexSizer.hidden)return 0;let b=0;for(const[d,f]of a.sizerChildren){const i=f.rexSizer.padding,l=a.getChildHeight(f)+i.top+i.bottom;b=Math.max(l,b)}return b+a.space.top+a.space.bottom}function Wv(a,b){let d;const f=b.rexSizer;if(f.expandWidth){const i=f.padding;d=a.innerWidth-i.left-i.right}return d}function Xv(a,b){let d;const f=b.rexSizer;if(f.expandHeight){const i=f.padding;d=a.innerHeight-i.top-i.bottom}return d}function Yv(a){const b=a.innerLeft,d=a.innerTop,f=a.innerWidth,i=a.innerHeight;for(let[l,q]of a.sizerChildren){const u=q.rexSizer,v=u.padding;if(q instanceof Va)q.runLayout(a,a.getExpandedChildWidth(q),a.getExpandedChildHeight(q));else{let J,S;u.expandWidth&&(J=f-v.left-v.right),u.expandHeight&&(S=i-v.top-v.bottom),$d(q,J,S)}const A=b+v.left,E=f-v.left-v.right,H=d+v.top,Q=i-v.top-v.bottom;bd.setTo(A,H,E,Q).alignIn(q,u.align)}}function Zv(a,b,{key:d=Date.now(),padding:f=0,align:i=xb.center,expand:l=!0}={}){pc(a,b),typeof i==="string"&&(i=xb[i]);const q=a.getSizerState(b);q.key=d,q.align=i,q.padding=ad(f);if(typeof l==="boolean")q.expandWidth=l,q.expandHeight=l;else{let{width:u=!1,height:v=!1}=l;q.expandWidth=u,q.expandHeight=v}a.sizerChildren.has(d)&&a.sizerChildren.get(d).destroy(),a.sizerChildren.set(d,b)}function Zj(a,b){if(b instanceof Mc)if(b.parent===a&&b.hasOwnProperty("rexSizer")){const d=b.rexSizer;return d.key}else return null;else{const d=b;return a.sizerChildren.has(d)?d:null}}function _v(a,b,d=!0){Vb(a,b,d);const f=Zj(a,b);f?a.sizerChildren.delete(f):cd(a.backgroundChildren,b)}function $v(a,b=!0){Vb(a,Array.from(a.sizerChildren.values()),b),a.sizerChildren.clear()}function aw(a,b=!0){$c(a,b),a.sizerChildren.clear(),a.backgroundChildren&&(a.backgroundChildren.length=0)}class Yj extends Va{constructor(a={}){super(a);this.type="rexOverlapSizer";this.sizerChildren=new Map()}getChildrenSizers(a=[]){return Tv(this,a)}getChildrenWidth(){return Uv(this)}getChildrenHeight(){return Vv(this)}getExpandedChildWidth(a,b){return Wv(this,a)}getExpandedChildHeight(a,b){return Xv(this,a)}layoutChildren(){return Yv(this),this}add(a,b){return Zv(this,a,b),this}getChildKey(a){return Zj(this,a)}remove(a,b=!0){return _v(this,a,b),this}removeAll(a=!0){return $v(this,a),this}clear(a=!0){return aw(this,a),this}}var Xb;(function(a){a[a.none=0]="none",a[a.word=1]="word",a[a.char=2]="char"})(Xb||(Xb={}));var Hb;(function(a){a[a.none=0]="none",a[a.raw=1]="raw",a[a.wrapped=2]="wrapped"})(Hb||(Hb={}));const ep=/(?:\r\n|\r|\n)/;function Gw(a,b,d,f,i,l=0){i<=0&&(f=0);let q=[];if(!a||!a.length)return q;let u=a.split(ep),v=u.length-1;a.slice(-1)===`
`&&(u.length-=1);let A;for(let E=0,H=u.length;E<H;E++){let Q=u[E],J=E===v?0:1;if(f===0){q.push(Ih(Q,b(Q,d),J));continue}E===0?A=i-l:A=i;if(Q.length<=100){let ja=b(Q,d);if(ja<=A){q.push(Ih(Q,ja,J));continue}}let S;f===1?S=Q.split(" "):S=Q;let aa="",X="",ga=0;for(let ja=0,qa=S.length;ja<qa;ja++){let ka=S[ja];f===1?(aa+=ka,ja<qa-1&&(aa+=" ")):aa+=ka;let ta=b(aa,d);ta>A&&(ja===0?q.push(Ih("",0,2)):(q.push(Ih(X,ga,2)),aa=ka,f===1&&(ja<qa-1&&(aa+=" ")),ta=b(aa,d)),A=i),X=aa,ga=ta}q.push(Ih(X,ga,J))}return q}let Ih=function(a,b,d){return{text:a,width:b,newLineMode:d}};var Ch;(function(a){a[a.left=0]="left",a[a.center=1]="center",a[a.right=2]="right"})(Ch||(Ch={}));var Dh;(function(a){a[a.top=0]="top",a[a.center=1]="center",a[a.bottom=2]="bottom"})(Dh||(Dh={}));class bf{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(a){return this.items.push(a),this}pushMultiple(a){return this.items.push.apply(this.items,a),a.length=0,this}clear(){return this.items.length=0,this}}class gp{constructor(){this.pens=[]}destroy(){this.pens.length=0}addPen(a){return this.pens.push(a),this}get firstPen(){return this.pens[0]}get lastPen(){return this.pens[this.pens.length-1]}hasPen(){return this.pens.length>0}get pensCount(){return this.pens.length}get startIndex(){let a=this.pens[0];return a?a.startIndex:0}get width(){let a=this.lastPen;return a?a.lastX:0}}function sk(a){if(Array.isArray(a))a.length=0;else for(let b in a)delete a[b]}function cf(a,b=Array.isArray(a)?[]:{}){sk(b);if(Array.isArray(a)){b.length=a.length;for(let d=0,f=a.length;d<f;d++)b[d]=a[d]}else for(let d in a)b[d]=a[d];return b}class hp{constructor(){this.text="";this.x=0;this.y=0;this.width=0;this.height=0;this.ascent=0;this.descent=0;this.prop={};this.newLineMode=Hb.none;this.startIndex=0}set(a="",b=0,d=0,f=0,i=0,l=0,q=0,u={},v=Hb.none,A=0){return this.text=a,this.x=b,this.y=d,this.width=f,this.height=i,this.ascent=l,this.descent=q,this.prop=u,this.newLineMode=v,this.startIndex=A,this}clone(){let a=new hp();return a.set(this.text,this.x,this.y,this.width,this.height,this.ascent,this.descent,cf(this.prop),this.newLineMode,this.startIndex),a}get plainText(){return this.newLineMode===Hb.raw?`${this.text}
`:this.text}get wrapText(){return this.newLineMode!==Hb.none?`${this.text}
`:this.text}get plainTextLength(){let a=this.text.length;return this.newLineMode===Hb.raw&&(a+=1),a}get endIndex(){return this.startIndex+this.plainTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}}class Eh{constructor({penPool:a}){this.pens=[];this.lines=[];this.pens=[],this.lines=[],this.penPool=a}destroy(){this.freePens()}freePens(){return this.penPool.pushMultiple(this.pens),this.lines.forEach(a=>{a.destroy()}),this.lines.length=0,this.maxLineWidth=0,this.totalLineHeight=0,this}addTextPen(a,b,d,f,i,l,q,u,v=Hb.none){let A=this.penPool.pop();return A==null&&(A=new hp()),A.set(a,b,d,f,i,l,q,u,v),this.addPen(A),this}addImagePen(a,b,d,f,i){return this.addTextPen("",a,b,d,f,f,0,i,Hb.none),this}addNewLinePen(a){let b=this.lastPen;return b&&b.newLineMode===Hb.none&&(b.newLineMode=a),this}addPen(a){let b=this.lastPen;b==null?a.startIndex=0:a.startIndex=b.endIndex,this.pens.push(a);let d=this.lastLine;return d==null&&(d=new gp(),this.lines.push(d)),d.addPen(a),a.newLineMode!==Hb.none&&(d=new gp(),this.lines.push(d)),this}clone(a){a==null&&(a=new Eh({penPool:this.penPool})),a.freePens();const b=this.pens;for(let i=0,l=b.length;i<l;i++)a.addPen(b[i].clone());const d=this.lines,f=a.lines;for(let i=0,l=d.length;i<l;i++){const q=d[i],u=f[i];u.y=q.y,u.height=q.height}return a}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(a){if(a>=this.lines.length)return this.getLineEndIndex(a);{let b=this.lines[a];if(!b)return 0;let d=b.firstPen;return d?d.startIndex:0}}getLineEndIndex(a){let b=this.lines.length;a>=b&&(a=b-1);for(let d=a;d>=0;d--){let f=this.lines[d];if(f&&f.hasPen())return f.lastPen.endIndex}return 0}getLineWidth(a){let b=this.lines[a];return b?b.width:0}getLineHeights(a=[]){return this.lines.forEach(function(b){a.push(b.height)}),a}get lineCount(){return this.lines.length}get plainText(){let a=[],b=this.pens;for(let d=0,f=b.length;d<f;d++)a.push(b[d].plainText);return a.join()}get plainTextLength(){let a=0;for(let b=0,d=this.pens.length;b<d;b++)a+=this.pens[b].plainTextLength;return a}getSliceTagText(a,b,d=0,f,i=!1){if(f===void 0){let A=this.lastPen;if(!A)return"";f=A.endIndex}let l=[],q;for(var u=0,v=this.pens.length;u<v;u++){let A=this.pens[u],E=A.endIndex;if(E<=d)continue;let H=i?A.wrapText:A.plainText,Q=A.prop,J=A.startIndex,S=J>=d&&E<=f;S||(H=H.substring(d-J,f-J)),b?l.push(a.call(b,H,Q,q)):l.push(a(H,Q,q)),q=Q;if(E>=f)break}return l.join()}}function Dw(a,b,d){let f=cf(a,d);for(let i in b)f.hasOwnProperty(i)&&(f[i]=b[i]);return f}function gk(a,b,d={key:b}){d=Dw(dA,d);let f=Tb.get(),i=f.get(d.key);if(!i)return;let l=i.getFrame(d.frame);if(!l)return;let q=d.width,u=d.height;(q===void 0||u===void 0)&&(q===void 0&&u===void 0?(d.width=l.width,d.height=l.height):q===void 0?d.width=l.width*(u/l.height):u===void 0&&(d.height=l.height*(q/l.width))),a.images.set(b,d)}const dA={key:void 0,frame:void 0,width:void 0,height:void 0,y:0,left:0,right:0,top:0,bottom:0};class zw{constructor(){this.images=new Map()}destroy(){this.images.clear()}add(a,b){if(typeof a==="string")gk(this,a,b);else if(Array.isArray(a)){let d=a;for(let f=0,i=d.length;f<i;f++)gk(this,d[f])}else{let d=a;for(a in d)gk(this,a,d[a])}return this}remove(a){return this.images.delete(a),this}get(a){return this.images.get(a)}getOuterWidth(a){let b=this.images.get(a);return b?b.width+b.left+b.right:0}getOuterHeight(a){let b=this.images.get(a);return b?b.height+b.top+b.bottom:0}getFrame(a){let b=this.images.get(a);if(!b)return;let d=Tb.get(),f=d.get(b.key);if(!f)return;let i=f.getFrame(b.frame);return i}hasTexture(a){return!!this.getFrame(a)}}function ek(a,b){a.font=b.font}function fk(a,b){a.textBaseline="alphabetic",a.textAlign="start",a.fillStyle=b.fillStyle,a.strokeStyle=b.strokeStyle,a.lineWidth=b.strokeThickness,a.lineCap="round",a.lineJoin="round",a.imageSmoothingEnabled=b.antialias}function fp(a,b,d){d?(a.shadowColor=b.shadowColor,a.shadowBlur=b.shadowBlur,a.shadowOffsetX=b.shadowOffsetX,a.shadowOffsetY=b.shadowOffsetY):(a.shadowColor="#000",a.shadowBlur=0,a.shadowOffsetX=0,a.shadowOffsetY=0)}function Ew(a,b){return b.measureText(a).width}function Fw(a,b,d=0){let f=b.measureText(a),i=f.actualBoundingBoxAscent,l=f.actualBoundingBoxDescent;return(!i&&!l||a==="")&&(i=d,l=0),kk.ascent=i,kk.descent=l,kk.height=Math.ceil(Math.abs(i)+Math.abs(l)),kk}let kk={ascent:0,descent:0,height:0};function Aw(a,b,d,f,i){a.freePens();if(b==="")return a;let l=d.canvas,q=d.context,u=d.parent,v=d.parser.splitText(b),A,E,H=0;for(var Q=0,J=v.length;Q<J;Q++){let ja=d.parser.tagTextToProp(v[Q],A),qa=ja.text;A=ja.prop;if(A.img){let ka,ta;d.imageManager?(ka=d.imageManager.getOuterWidth(A.img),ta=d.imageManager.getOuterHeight(A.img)):(ka=0,ta=0),i>0&&f!==Xb.none&&(i<H+ka&&(a.addNewLinePen(Hb.wrapped),H=0)),a.addImagePen(H,0,ka,ta,cf(A)),H+=ka}else if(qa!==""){q.save();let ka=d.parser.propToStyle(u,A);ek(q,ka),fk(q,ka);let ta=ka.strokeThickness,va=ta/2;E=Gw(qa,Ew,q,f,i,H);let na=Fw("|Mq",q);for(let O=0,R=E.length;O<R;O++){const x=E[O],G=na.height+ta,F=na.ascent+va,K=na.descent+va;a.addTextPen(x.text,H,0,x.width,G,F,K,cf(A),x.newLineMode),x.newLineMode!==Hb.none?H=0:H+=x.width}q.restore()}}let S=a.lines,aa=d.parent.lineSpacing,X=0,ga=0;for(let ja=0,qa=S.length;ja<qa;ja++){const ka=S[ja],ta=ka.pens,va=ta.length;let na=0,O=0;for(let G=0;G<va;G++){const F=ta[G];na=Math.max(na,F.ascent),O=Math.max(O,F.descent)}const R=na+O,x=ga+na;for(let G=0;G<va;G++)ta[G].y+=x;ka.y=x,ka.height=R,X=Math.max(X,ka.width),ga+=R+aa}return a.maxLineWidth=X,a.totalLineHeight=ga-aa,a}class cA extends Nb{constructor(a,b,d,f,i){super(a,b,d,f);this.name=i}}class Cw{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return this.hitAreas.length=0,this}add(a,b,d,f,i){let l=new cA(b,d,f,i,a);return this.hitAreas.push(l),this}getFirstHitArea(a,b){for(let d=0,f=this.hitAreas.length;d<f;d++){let i=this.hitAreas[d];if(i.contains(a,b))return i}return null}}function Bw(a,b,d,f,i,l=0,q=0,u=a.penManager){a.hitAreaManager&&a.hitAreaManager.clear();let v=u.totalLineHeight;if(v===0)return;const A=f<a.textWidth||i<a.textHeight;let E=a.context;E.save();let H=a.parent;Zz(a,H),_z(a,H),A&&(E.beginPath(),E.rect(b,d,f,i),E.clip());let Q=H.align%3,J=Math.floor(H.align/3),S=d-q;switch(J){case Dh.center:S+=(i-v)/2;break;case Dh.bottom:S+=i-v-2;break}let aa=u.lines,X=S;const ga=b+i;for(let ja=0,qa=aa.length;ja<qa;ja++){let ka=aa[ja];if(X>ga)break;const ta=X+ka.height;if(ta<d){X=ta;continue}let va=ka.width;if(va===0){X=ta;continue}let na=b-l;switch(Q){case Ch.center:na+=(f-va)/2;break;case Ch.right:na+=f-va;break}let O=ka.pens;for(let R=0,x=O.length;R<x;R++)Yz(a,O[R],na,S);X=ta}E.restore()}function Yz(a,b,d,f){d+=b.x,f+=b.y+(b.prop.y||0);let i=a.canvas,l=a.context,q=a.parent;l.save();let u=a.parser.propToStyle(q,b.prop);ek(l,u),fk(l,u),u.underlineThickness>0&&b.width>0&&$z(a,d,f,b.width,u),b.isTextPen&&aA(a,d,f,b.text,u),b.isImagePen&&bA(a,d,f,b.prop.img,u),l.restore(),b.hasAreaMarker&&b.width>0&&(a.hitAreaManager||(a.hitAreaManager=new Cw()),a.hitAreaManager.add(b.prop.area,d,f,b.width,b.height))}function Zz(a,b){let d=a.canvas,f=a.context;f.clearRect(0,0,d.width,d.height)}function _z(a,b){let d=a.canvas,f=a.context;f.clearRect(0,0,d.width,d.height);const i=b.backgroundFillStyle,l=b.backgroundStrokeStyle;if(i||l){const q=b.backgroundStrokeThickness,u=q/2,v=b.cornerRadius,A=b.cornerIteration,E=u,H=u,Q=d.width-q,J=d.height-q;rh(d,f,E,H,Q,J,v,i,l,q,b.backgroundFillColor2,b.backgroundIsHorizontalGradient,A)}else f.clearRect(0,0,d.width,d.height)}function $z(a,b,d,f,i){d+=i.underlineOffsetY-i.underlineThickness/2;let l=a.context,q=l.lineCap;l.lineCap="butt",l.beginPath(),l.strokeStyle=i.underlineStyle,l.lineWidth=i.underlineThickness,l.moveTo(b,d),l.lineTo(b+f,d),l.stroke(),l.lineCap=q}function aA(a,b,d,f,i){let l=a.context;i.strokeStyle&&i.strokeStyle!=="none"&&i.strokeThickness>0&&(fp(l,i,i.shadowStroke),l.strokeText(f,b,d)),i.fillStyle&&i.fillStyle!=="none"&&(fp(l,i,i.shadowFill),l.fillText(f,b,d))}function bA(a,b,d,f,i){let l=a.imageManager;if(!l)return;let q=l.get(f),u=l.getFrame(f);b+=q.left,d+=q.y-q.height;let v=a.context;v.drawImage(u.texture.image,u.x,u.y,u.width,u.height,b,d,q.width,q.height)}class qw{constructor({canvas:a,context:b,parent:d,parser:f,penPool:i=new bf()}){this.textScrollX=0;this.textScrollY=0;this.canvas=a,this.context=b,this.parser=f,this.parent=d,this.penPool=i,this.penManager=new Eh({penPool:i})}destroy(){this.parser.destroy(),this.canvas=null,this.context=null,this.parser=null,this.parent=null,this.penManager&&(this.penManager.destroy(),this.penManager=null),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=null),this.imageManager&&(this.imageManager.destroy(),this.imageManager=null),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=null)}get textWidth(){return this.penManager.maxLineWidth}get textHeight(){return this.penManager.totalLineHeight}updatePenManager(a,b,d,f=this.penManager){return Aw(f,a,this,b,d)}draw(a,b,d,f,i=0,l=0){return Bw(this,a,b,d,f,i,l,this.penManager),this}get lines(){return this.penManager.lines}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=new Eh({penPool:this.penPool})),this._tmpPenManager}getPlainText(a,b,d){let f;return a==null?f=this.penManager.plainText:f=this.parser.splitText(a,!0).join(""),(b!=null||d!=null)&&(b==null&&(b=0),d==null&&(d=f.length),f=f.substring(b,d)),f}getPenManager(a,b){return a===void 0?this.clonePenManager(b,this.penManager):(b===void 0&&(b=new Eh({penPool:this.penPool})),this.updatePenManager(a,this.parent.wrapMode,this.parent.wrapWidth,b),b)}getText(a,b,d,f){if(a==null)return this.penManager.getSliceTagText(this.parser.propToTagText,this.parser,b,d,f);let i=this.tmpPenManager;return this.updatePenManager(a,this.parent.wrapMode,this.parent.wrapWidth,i),i.getSliceTagText(this.parser.propToTagText,this.parser,b,d,f)}clonePenManager(a,b=this.penManager){return b.clone(a)}getLastPen(a=this.penManager){return a.lastPen}addImageInfo(a,b){return this.imageManager===void 0&&(this.imageManager=new zw()),this.imageManager.add(a,b),this}}function Uo(a,b=!0,d=!0){let f=a.canvasText;b&&f.updatePenManager(a.text,a.wrapMode,a.wrapWidth);if(d){let i=a.padding,l,q,u,v;a.fixedWidth===0?(l=f.textWidth,u=l+i.left+i.right):(u=a.fixedWidth,l=u-i.left-i.right,l>f.textWidth&&(l=f.textWidth)),a.fixedHeight===0?(q=f.textHeight,v=q+i.top+i.bottom):(v=a.fixedHeight,q=v-i.top-i.bottom,q>f.textHeight&&(q=f.textHeight));let A=a.resolution,E=Math.ceil(u*A),H=Math.ceil(v*A),Q=a.canvas;(Q.width!==E||Q.height!==H)&&(Q.width=E,Q.height=H,a.texture.setSize(u,v),a.setSize(u,v));let J=a.context;J.save(),J.scale(A,A),f.draw(i.left,i.top,l,q,0,a.textScrollY),J.restore(),a.texture.binding&&a.texture.binding.update(),a.setDirty(Ha.TEXTURE)}}function bk(a,b=0,d=0){a.fixedWidth=b,a.fixedHeight=d,dk(a)}function Vo(a,b,d,f,i){const l=a.padding;if(typeof b==="number")l.left=b,l.right=d===void 0?b:d,l.top=f===void 0?b:f,l.bottom=i===void 0?b:i;else{let q=b;l.left=q.left??0,l.right=q.right??0,l.top=q.top??0,l.bottom=q.bottom??0}dk(a)}function dk(a){const b=a.fixedWidth;if(a.wrapMode!==Xb.none){const d=a.padding,f=b-d.left-d.right;a.wrapWidth=Math.max(f,0)}else a.wrapWidth=0}function rw(a,b,d=!1){d?a.textScrollYPercentage=b:a.textScrollY=b}function Wo(a,b){typeof b==="string"&&(b=xb[b]),a.align=b}function Xo(a,b=0){a.lineSpacing=b}function Yo(a,b,d,f=0,i=0,l,q=!0,u){d||(f=0),a.backgroundFillStyle=b,a.backgroundFillColor2=l,a.backgroundIsHorizontalGradient=q,a.backgroundStrokeStyle=d,a.backgroundStrokeThickness=f,a.cornerRadius=i,a.cornerIteration=u}function sw(a,b,d){b&&Zo(a,b),d&&_o(a,d)}function Zo(a,b){a.fontFamily=b}function _o(a,b){typeof b==="number"&&(b=`${b}px`),a.fontSize=b}function $o(a,b){a.fillStyle=b}function ap(a,b,d=2){a.strokeStyle=b,a.strokeThickness=d}function bp(a,b="#000",d=5,f=0,i=0,l=!1,q=!1){a.shadowColor=b,a.shadowBlur=d,a.shadowOffsetX=f,a.shadowOffsetY=i,a.shadowFill=l,a.shadowStroke=q}function cp(a,b,d){typeof b==="string"&&(b=Xb[b]),a.wrapMode=b,d===void 0?dk(a):a.wrapWidth=d}function dp(a,b,d=2,f=0){a.underlineStyle=b,a.underlineThickness=d,a.underlineOffsetY=f}function To(a,b,d){a.canvasText.addImageInfo(b,d)}function tw(a,b,d,f){return b=a.canvasText.getText(b,d,f,!0),b.split(ep)}function uw(a,b,d,f){return a.canvasText.getPlainText(b,d,f)}function vw(a,b,d,f){return a.canvasText.getText(b,d,f,!1)}function ww(a,b,d,f){return a.canvasText.getText(b,d,f,!1)}function xw(a,b){return a.canvasText.clonePenManager(b)}function yw(a,b,d){return a.canvasText.getPenManager(b,d)}class ck extends Lc{constructor(a,b,d="",{width:f=0,height:i=0,padding:l,wrapMode:q=Xb.none,backgroundFillStyle:u,backgroundFillColor2:v,backgroundIsHorizontalGradient:A,backgroundStrokeStyle:E,backgroundStrokeThickness:H,cornerRadius:Q=0,cornerIteration:J,align:S=xb.top_left,lineSpacing:aa=0,fontFamily:X="monospace",fontSize:ga="16px",fillStyle:ja="#fff",strokeStyle:qa,strokeThickness:ka=1,shadowColor:ta="#000",shadowBlur:va=4,shadowOffsetX:na=0,shadowOffsetY:O=0,shadowFill:R=!1,shadowStroke:x=!1,underlineStyle:G="#fff",underlineThickness:F=1,underlineOffsetY:K=0,images:U}={},L){super(a,b,Pd());this.antialias=!1;this.fontFamily="monospace";this.fontSize="16px";this.fillStyle="#fff";this.strokeThickness=1;this.shadowStroke=!1;this.shadowFill=!1;this.shadowColor="#000";this.shadowBlur=4;this.shadowOffsetX=0;this.shadowOffsetY=0;this.underlineStyle="#fff";this.underlineThickness=1;this.underlineOffsetY=0;this.align=xb.top_left;this.lineSpacing=0;this.wrapMode=Xb.none;this.wrapWidth=0;this.fixedWidth=0;this.fixedHeight=0;this.padding={left:0,right:0,top:0,bottom:0};this._textScrollY=0;this.type="rexText";const da=Mb.get();this.resolution=da.renderer.resolution,this.canvas=this.texture.image,this.context=this.canvas.getContext("2d"),this.canvasText=new qw({canvas:this.canvas,context:this.context,parent:this,parser:L}),bk(this,f,i),l&&Vo(this,l),cp(this,q),Wo(this,S),Xo(this,aa),Yo(this,u,E,H,Q,v,A,J),Zo(this,X),_o(this,ga),$o(this,ja),qa&&ap(this,qa,ka),bp(this,ta,va,na,O,R,x),dp(this,G,F,K),U&&To(this,U),this.setText(d)}destroy(a){this.canvasText.destroy(),this.texture.destroy(),this.canvas=null,this.context=null,super.destroy(a)}updateText(a=!0,b=!0){return Uo(this,a,b),this}get text(){return this._text}set text(a){this.setText(a)}setText(a="",b=!0){return Array.isArray(a)&&(a=a.join(`
`)),a!==this._text&&(this._text=a.toString(),b&&this.updateText()),this}setBackgroundStyle(a,b,d=2,f=0,i,l=!0){return Yo(this,a,b,d,f,i,l),this}setFixedSize(a,b){return bk(this,a,b),this}setPadding(a,b,d,f){return Vo(this,a,b,d,f),this}setTextScrollY(a,b=!1){return rw(this,a,b),this}setAlign(a){return Wo(this,a),this}setLineSpacing(a=0){return Xo(this,a),this}setFont(a,b){return sw(this,a,b),this}setFillStyle(a){return $o(this,a),this}setStrokeStyle(a,b=2){return ap(this,a,b),this}setShadow(a="#000",b=5,d=0,f=0,i=!1,l=!1){return bp(this,a,b,d,f,i,l),this}resize(a,b){return bk(this,a,b),Uo(this),this}setWrapMode(a,b=0){return cp(this,a,b),this}setUnderline(a,b=2,d=0){return dp(this,a,b,d),this}addImageInfo(a,b){return To(this,a,b),this}getWrappedText(a,b,d){return tw(this,a,b,d)}getPlainText(a,b,d){return uw(this,a,b,d)}getText(a,b,d){return vw(this,a,b,d)}getSubString(a,b,d){return ww(this,a,b,d)}clonePenManager(a){return xw(this,a)}getPenManager(a,b){return yw(this,a,b)}get textScrollY(){return this._textScrollY}set textScrollY(a){this._textScrollY=a}get textScrollYPercentage(){return this._textScrollY/(this.totalTextHeight-this.displayTextHeight)}set textScrollYPercentage(a){const b=this.displayTextHeight,d=this.totalTextHeight;d<=b?this._textScrollY=0:this._textScrollY=(d-b)*a}get totalTextHeight(){return this.canvasText.textHeight}get displayTextHeight(){const a=this.padding;return this.height-a.top-a.bottom}}class hk{destroy(){}}const ik={text:null,prop:null},jk={font:void 0,fontFamily:void 0,fontStyle:void 0,fontSize:void 0,fillStyle:void 0,strokeStyle:void 0,strokeThickness:void 0,shadowColor:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,shadowBlur:void 0,shadowStroke:void 0,shadowFill:void 0,underlineStyle:void 0,underlineThickness:void 0,underlineOffsetY:void 0,image:void 0};class Hw extends hk{splitText(a,b=!1){const d=[];let f=0;for(;;){const l=ip.exec(a);if(!l)break;const q=l[0],u=ip.lastIndex-q.length;f<u&&d.push(a.substring(f,u)),b||d.push(q),f=ip.lastIndex}const i=a.length;return f<i&&d.push(a.substring(f,i)),d}tagTextToProp(a,b){let d,f;b==null&&(b={}),b.img&&yb(b,Sc,"img"),gA.test(a)?(yb(b,qc,"b",!0),d=""):hA.test(a)?(yb(b,Sc,"b"),d=""):iA.test(a)?(yb(b,qc,"i",!0),d=""):jA.test(a)?(yb(b,Sc,"i"),d=""):Iw.test(a)?(f=a.match(Iw),yb(b,qc,"size",f[1]+"px"),d=""):kA.test(a)?(yb(b,Sc,"size"),d=""):Jw.test(a)?(f=a.match(Jw),yb(b,qc,"color",f[1]),d=""):lA.test(a)?(yb(b,Sc,"color"),d=""):Kw.test(a)?(f=a.match(Kw),yb(b,qc,"u",!0),d=""):Lw.test(a)?(f=a.match(Lw),yb(b,qc,"u",f[1]),d=""):mA.test(a)?(yb(b,Sc,"u"),d=""):nA.test(a)?(yb(b,qc,"shadow",!0),d=""):Mw.test(a)?(f=a.match(Mw),yb(b,qc,"shadow",f[1]),d=""):oA.test(a)?(yb(b,Sc,"shadow"),d=""):pA.test(a)?(yb(b,qc,"stroke",!0),d=""):Nw.test(a)?(f=a.match(Nw),yb(b,qc,"stroke",f[1]),d=""):qA.test(a)?(yb(b,Sc,"stroke"),d=""):Ow.test(a)?(f=a.match(Ow),yb(b,qc,"y",parseFloat(f[1])),d=""):rA.test(a)?(yb(b,Sc,"y"),d=""):Pw.test(a)?(f=a.match(Pw),yb(b,qc,"img",f[1]),d=""):sA.test(a)?(yb(b,Sc,"img"),d=""):Qw.test(a)?(f=a.match(Qw),yb(b,qc,"area",f[1]),d=""):tA.test(a)?(yb(b,Sc,"area"),d=""):d=a;const i=ik;return i.text=d,i.prop=b,i}propToStyle(a,b){const d=jk;return b.hasOwnProperty("img")?d.image=b.img:(d.image=null,d.fontFamily=a.fontFamily,d.fontSize=b.size??a.fontSize,d.fontStyle=eA(b.b,b.i),d.font=`${d.fontStyle} ${d.fontSize} ${d.fontFamily}`,d.fillStyle=b.color??a.fillStyle,b.hasOwnProperty("stroke")?b.stroke===!0?(d.strokeStyle=a.strokeStyle,d.strokeThickness=a.strokeThickness):(d.strokeStyle=b.stroke,d.strokeThickness=a.strokeThickness):(d.strokeStyle=a.strokeStyle,d.strokeThickness=0)),b.hasOwnProperty("shadow")?b.shadow===!0?(d.shadowColor=a.shadowColor,d.shadowOffsetX=a.shadowOffsetX,d.shadowOffsetY=a.shadowOffsetY,d.shadowBlur=a.shadowBlur,d.shadowStroke=!0,d.shadowFill=!0):(d.shadowColor=b.shadow,d.shadowOffsetX=a.shadowOffsetX,d.shadowOffsetY=a.shadowOffsetY,d.shadowBlur=a.shadowBlur,d.shadowStroke=!0,d.shadowFill=!0):(d.shadowColor="#000",d.shadowOffsetX=0,d.shadowOffsetY=0,d.shadowBlur=0,d.shadowStroke=!1,d.shadowFill=!1),b.hasOwnProperty("u")?b.u===!0?(d.underlineStyle=a.underlineStyle,d.underlineThickness=a.underlineThickness,d.underlineOffsetY=a.underlineOffsetY):(d.underlineStyle=b.u,d.underlineThickness=a.underlineThickness,d.underlineOffsetY=a.underlineOffsetY):(d.underlineStyle="#000",d.underlineThickness=0,d.underlineOffsetY=0),d}propToTagText(a,b,d){d==null&&(d=fA);let f=[];for(const l in d)b.hasOwnProperty(l)||f.push(`[/${l}]`);for(const l in b){var i=b[l];if(d[l]===i)continue;switch(l){case"size":const q=b.size.replace("px","");f.push(`[size=${q}]`);break;case"color":case"img":case"area":case"y":f.push(`[${l}=${i}]`);break;case"stroke":case"u":i===!0?f.push(`[${l}]`):f.push(`[${l}=${i}]`);break;default:f.push(`[${l}]`);break}}return f.push(a),f.join("")}}const yb=function(a,b,d,f){return b===qc?a[d]=f:a.hasOwnProperty(d)&&delete a[d],a};var eA=function(a,b){return a&&b?"bold italic":a?"bold":b?"italic":""};const fA={};var ip=/\[b\]|\[\/b\]|\[i\]|\[\/i\]|\[size=(\d+)\]|\[\/size\]|\[color=([a-z]+|#[0-9abcdef]+)\]|\[\/color\]|\[u\]|\[u=([a-z]+|#[0-9abcdef]+)\]|\[\/u\]|\[shadow\]|\[\/shadow\]|\[stroke\]|\[stroke=([a-z]+|#[0-9abcdef]+)\]|\[\/stroke\]|\[img=([^\]]+)\]|\[\/img\]|\[area=([^\]]+)\]|\[\/area\]|\[y=([-.0-9]+)\]|\[\/y\]/ig,gA=/\[b\]/i,hA=/\[\/b\]/i,iA=/\[i\]/i,jA=/\[\/i\]/i,Iw=/\[size=(\d+)\]/i,kA=/\[\/size\]/i,Jw=/\[color=([a-z]+|#[0-9abcdef]+)\]/i,lA=/\[\/color\]/i,Kw=/\[u\]/i,Lw=/\[u=([a-z]+|#[0-9abcdef]+)\]/i,mA=/\[\/u\]/i,nA=/\[shadow\]/i,Mw=/\[shadow=([a-z]+|#[0-9abcdef]+)\]/i,oA=/\[\/shadow\]/i,pA=/\[stroke\]/i,Nw=/\[stroke=([a-z]+|#[0-9abcdef]+)\]/i,qA=/\[\/stroke\]/i,Ow=/\[y=([-.0-9]+)\]/i,rA=/\[\/y\]/i,Pw=/\[img=([^\]]+)\]/i,sA=/\[\/img\]/i,Qw=/\[area=([^\]]+)\]/i,tA=/\[\/area\]/i;const Sc=!1,qc=!0;class th extends ck{constructor(a,b,d="",f){super(a,b,d,f,new Hw());this.type="rexBBcodeText"}}class Rw extends hk{constructor(a){super();this.tags=new Map();if(a)for(const b in a)this.addTag(b,a[b])}destroy(){this.tags.clear()}addTag(a,b){return this.tags.set(a,b),this}isTextTag(a){const b=this.tags.get(a);return b?b.img==null:!1}splitText(a,b=!1){const d=[];let f=0;for(;;){const l=jp.exec(a);if(!l)break;const q=l[0],u=jp.lastIndex-q.length;f<u&&d.push(a.substring(f,u));if(!b)d.push(q);else if(Tw.test(q)){const v=q.match(Uw);d.push(v[2])}else if(Vw.test(q)){const v=q.match(Ww);d.push(v[2])}f=jp.lastIndex}const i=a.length;return f<i&&d.push(a.substring(f,i)),d}tagTextToProp(a,b){let d,f;if(Tw.test(a)){const l=a.match(Uw);if(l!=null){const q=l[1],u=this.tags;f=u.get(q)??{},f._class=q,d=l[2]}}else if(Vw.test(a)){const l=a.match(Ww);if(l!=null){const q=l[1];f=uA(q),f._style=q,d=l[2]}}d===void 0&&(d=a),f===void 0&&(f={});const i=ik;return i.text=d,i.prop=f,i}propToStyle(a,b){const d=jk;if(b.hasOwnProperty("img"))d.image=b.img;else{d.image=null,d.fontFamily=b.family??b.fontFamily??b["font-family"]??a.fontFamily;let f=b.size??b.fontSize??b["font-size"]??a.fontSize;typeof f==="number"&&(f=`${f}px`),d.fontSize=f,d.fontStyle=b.style??b.fontStyle??b["font-style"]??"",d.font=`${d.fontStyle} ${d.fontSize} ${d.fontFamily}`,d.fillStyle=b.color??b["font-color"]??a.fillStyle;if(b.hasOwnProperty("stroke")){const i=b.stroke;d.strokeStyle=i.color??a.strokeStyle,d.strokeThickness=i.thinkness??a.strokeThickness}else d.strokeStyle=a.strokeStyle,d.strokeThickness=a.strokeThickness}if(b.hasOwnProperty("shadow")){const f=b.shadow;d.shadowColor=f.color??a.shadowColor,d.shadowOffsetX=f.offsetX??a.shadowOffsetX,d.shadowOffsetY=f.offsetY??a.shadowOffsetY,d.shadowBlur=f.blur??a.shadowBlur,d.shadowStroke=!0,d.shadowFill=!0}else d.shadowColor=a.shadowColor,d.shadowOffsetX=a.shadowOffsetX,d.shadowOffsetY=a.shadowOffsetY,d.shadowBlur=a.shadowBlur,d.shadowStroke=a.shadowStroke,d.shadowFill=a.shadowFill;if(b.hasOwnProperty("u")||b.hasOwnProperty("underline")){const f=b.u??b.underline;d.underlineStyle=f.color??a.underlineStyle,d.underlineThickness=f.thinkness??a.underlineThickness,d.underlineOffsetY=f.offset??a.underlineOffsetY}else d.underlineStyle="#000",d.underlineThickness=0,d.underlineOffsetY=0;return d}propToTagText(a,b,d){if(b.hasOwnProperty("_class")){if(a===""){if(this.isTextTag(b._class))return""}return`<class=${b._class}>${a}</class>`}else if(b.hasOwnProperty("_style"))return`<style=${b._style}>${a}</style>`}}function uA(a){const b=a.split(";"),d={};for(var f=0,i=b.length;f<i;f++){const[l,q]=b[f].split(":");if(Sw(l)||Sw(q))continue;if(l==="stroke"){const u=q.split(" "),v={},A=u.length;A>=1&&(v.color=u[0]),A>=2&&(v.thinkness=parseInt(u[1].replace("px",""))),d.stroke=v}else if(l==="shadow"){const u=q.split(" "),v={},A=u.length;A>=1&&(v.color=u[0]),A>=2&&(v.offsetX=parseInt(u[1].replace("px",""))),A>=3&&(v.offsetY=parseInt(u[2].replace("px",""))),A>=4&&(v.blur=parseInt(u[3].replace("px",""))),d.shadow=v}else if(l==="u"||l==="underline"){const u=q.split(" "),v={},A=u.length;A>=1&&(v.color=u[0]),A>=2&&(v.thinkness=parseInt(u[1].replace("px",""))),A>=3&&(v.offset=parseInt(u[2].replace("px",""))),d[l]=v}else l==="y"?d.y=parseFloat(q):d[l]=q}return d}function Sw(a){return a=a.replace(vA,""),a.length===0}const jp=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,Tw=/<\s*class=/i,Uw=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,Vw=/<\s*style=/i,Ww=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,vA=/^\s+|\s+$/;class uh extends ck{constructor(a,b,d="",f){const i=f?f.tags:void 0;super(a,b,d,f,new Rw(i));this.type="rexTagText"}get parser(){return this.canvasText.parser}addTag(a,b){return this.parser.addTag(a,b),this}addTags(a){for(const b in a)this.parser.addTag(b,a[b]);return this}}const Cg={};be(Cg,{BBCodeText:()=>th,BaseSizer:()=>Va,Chart:()=>oh,FixedWidthSizer:()=>Tj,GridSizer:()=>Vj,Label:()=>Xj,MaskedImage:()=>ph,OverlapSizer:()=>Yj,RectangleCanvas:()=>qh,RoundRectangleCanvas:()=>sh,Sizer:()=>_f,TagText:()=>uh});function tc(a,b){return a===void 0||b===void 0?void 0:`${a}|${b}`}function at(a,b){let d=a.split("|");return b===void 0&&(b=jz),b.x=parseInt(d[0]),b.y=parseInt(d[1]),b}let jz={x:0,y:0};let tx=new bf();function is(){let a=tx.pop();return a===null&&(a=new Map()),a}function cj(a){tx.push(a)}function gs(a,b,d,f,i,l,q,u){if(d===l&&f===q&&i===u)return;let v=tc(d,f),A=tc(l,q);if(v){let E=b.get(v);E.delete(i);if(v===A){E.set(u,a);return}else E.size===0&&(cj(E),b.delete(v))}if(A){let E=b.get(A);E?E.set(u,a):(E=is(),E.set(u,a),b.set(A,E))}}function jn(a,b,d,f){let i=tc(b,d),l=a.get(i);l&&(f!==void 0?(l.delete(f),l.size===0&&(cj(l),a.delete(i))):(l.clear(),cj(l),a.delete(i)))}let ux=new bf();function hs(){let a=ux.pop();return a===null&&(a=new Set()),a}function hn(a){ux.push(a)}function bj(a,b,d,f){if(d===f)return;if(d!==void 0){let i=b.get(d);i&&(i.delete(a),i.size===0&&(hn(i),b.delete(d)))}if(f!==void 0){let i=b.get(f);i?i.add(a):(i=hs(),i.add(a),b.set(f,i))}}function Le(a,b,d){let f=a.get(b);f&&(f.delete(d),f.size===0&&(hn(f),a.delete(b)))}function bs(a,b,d,f,i){let l=a.chessToXYZ.get(b),q=l?l.x:void 0,u=l?l.y:void 0,v=l?l.y:void 0;l?(l.x=d,l.y=f,l.z=i):a.chessToXYZ.set(b,{x:d,y:f,z:i}),gs(b,a.XYToZMap,q,u,v,d,f,i),bj(b,a.XToChessSet,q,d),bj(b,a.YToChessSet,u,f),bj(b,a.ZToChessSet,v,i)}function Ke(a,b,d,f){let i=a.XYToZMap.get(tc(b,d));return i===void 0?null:f!==void 0?i.has(f)?i.get(f):null:i}function cs(a,b,d,f){if(f!==void 0){let i=Ke(a,b,d,f);if(i===void 0)return;a.chessToXYZ.delete(i),jn(a.XYToZMap,b,d,f),Le(a.XToChessSet,b,i),Le(a.YToChessSet,d,i),Le(a.ZToChessSet,f,i)}else{let i=Ke(a,b,d);if(i){for(const[l,q]of i)a.chessToXYZ.delete(q),Le(a.XToChessSet,b,q),Le(a.YToChessSet,d,q),Le(a.ZToChessSet,l,q);jn(a.XYToZMap,b,d)}}}function ds(a,b){return a.chessToXYZ.has(b)}function es(a,b,d,f){return Ke(a,b,d,f)!==null}function fs(a,b){return a.chessToXYZ.get(b)||null}function fn(a){let b=-Infinity;for(const[d,f]of a)b<d&&(b=d);return b}function gn(a){let b=Infinity;for(const[d,f]of a)b>d&&(b=d);return b}class Sm{constructor(){this.chessToXYZ=new Map();this.XYToZMap=new Map();this.XToChessSet=new Map();this.YToChessSet=new Map();this.ZToChessSet=new Map();this._xMax=void 0;this._xMin=void 0;this._yMax=void 0;this._yMin=void 0}destroy(){this.clear()}clear(){return this.chessToXYZ.clear(),this.XYToZMap.clear(),this.XToChessSet.clear(),this.YToChessSet.clear(),this.ZToChessSet.clear(),this.clearBounds(),this}clearBounds(){return this._xMax=void 0,this._xMin=void 0,this._yMax=void 0,this._yMin=void 0,this}addChess(a,b,d,f){return bs(this,a,b,d,f),this.clearBounds(),this}getChess(a,b,d){return Ke(this,a,b,d)}removeChess(a,b,d){return cs(this,a,b,d),this.clearBounds(),this}hasChess(a){return ds(this,a)}contains(a,b,d){return es(this,a,b,d)}getXYZ(a){return fs(this,a)}get xMax(){return this._xMax===void 0&&(this._xMax=fn(this.XToChessSet)),this._xMax}get xMin(){return this._xMin===void 0&&(this._xMin=gn(this.XToChessSet)),this._xMin}get yMax(){return this._yMax===void 0&&(this._yMax=fn(this.YToChessSet)),this._yMax}get yMin(){return this._yMin===void 0&&(this._yMin=gn(this.YToChessSet)),this._yMin}}function Oc(a,b=[]){let d=a.boardData.chessToXYZ;for(const[f,i]of d)b.push(f);return b}function rj(a){if(typeof a!=="object"||a.nodeType||a===a.window)return!1;try{if(a.constructor&&!{}.hasOwnProperty.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0}function ah(a){return rj(a)?!0:typeof a==="object"?a.isTileXYZ:!1}function Xa(a,b){let d=a.boardData.getXYZ(b);return d?d:ah(b)?b:null}function zb(a,b,d,f){return a.boardData.getChess(b,d,f)}class js{constructor(a){this.board=null;this.blocker=!1;this.parent=a,this.boot()}boot(){typeof this.parent==="object"&&this.parent.on&&this.parent.on("destroy",this.destroy,this)}destroy(){if(this.board){let a=this.tileXYZ;this.board.boardData.removeChess(a.x,a.y,a.z)}this.parent=void 0,this.board=null}setBoard(a){return this.board=a,this}get tileXYZ(){return this.board==null?null:this.board.boardData.getXYZ(this.parent)}setBlocker(a=!0){return this.blocker=a,this}setBlockEdge(a,b=!0){typeof this.blocker==="boolean"&&(this.blocker={});let d=this.blocker;if(typeof a==="object"){let f=a;for(let i in f)d[i]=f[i]}else d[a]=b;return this}getBlockEdge(a){return typeof this.blocker==="boolean"?!1:this.blocker.hasOwnProperty(a)?this.blocker[a]:!1}}function Ac(a){return a.hasOwnProperty("rexChess")||(a.rexChess=new js(a)),a.rexChess}function lc(a,b,d,f,i,l=!1,q=!1){if(b){let u=Xa(a,b);if(u)d=u.x,f=u.y,i=u.z;else return}else{b=zb(a,d,f,i);if(!b)return}q||a.boardData.removeChess(d,f,i),a._isBoard&&Ac(b).setBoard(null),l&&b.destroy&&b.destroy()}function Je(a,b){if(a.infinityMode)return;if(a.height===void 0||a.height<=b){a.height=b;return}let d=Oc(a);d.forEach(f=>{let i=Xa(a,f);i.y>b&&lc(a,f)}),a.height=b}function Ie(a,b){if(a.infinityMode)return;if(a.width===void 0||a.width<=b){a.width=b;return}let d=Oc(a);d.forEach(f=>{let i=Xa(a,f);i.x>b&&lc(a,f)}),a.width=b}class Ni{constructor({grid:a=void 0,wrap:b=!1,inifinity:d=!1,width:f=0,height:i=0}={}){this.boardData=new Sm(),this._isBoard=!0,this.setGrid(a),this.setWrapMode(b),this.setInfinityMode(d),this.setBoardSize(f,i)}destroy(){}setGrid(a){return this.grid=a,this}setWrapMode(a=!0){return this.wrapMode=a,this}setInfinityMode(a=!0){return this.infinityMode=a,this}setBoardSize(a=0,b=0){return Ie(this,a),Je(this,b),this}}function zc(a,b,d,f){let i;return a.infinityMode?i=!0:i=b>=0&&b<a.width&&d>=0&&d<a.height,i&&f!==void 0&&(i=a.boardData.contains(b,d,f)),i}function bc(a,b,d,f){return a.grid.getWorldXY(b,d,f)}function Kf(a,b,d,f){if(b===void 0){let i=Oc(a);for(let l=0,q=i.length;l<q;l++){let u=i[l],v=Xa(a,u);bc(a,v.x,v.y,u)}}else{if(d===void 0){let i=Xa(a,b);d=i.x,f=i.y}bc(a,d,f,b)}}function Qd(a,b,d,f,i,l=!0){if(!zc(a,d,f))return;let q=Xa(a,b);i===void 0&&(q?i=q.z:i=0);if(q&&q.x===d&&q.y===f&&q.z===i)return;let u=zb(a,d,f,i);u&&(lc(a,null,d,f,i),console.warn(`Chess at (${d},${f},${i}) has been removed because of overlapped`)),a.boardData.addChess(b,d,f,i),a._isBoard&&Ac(b).setBoard(a),l&&Kf(a,b,d,f)}function Pe(a,b,d,f){return Math.atan2(f-b,d-a)}function Rd(a,b,d){let f=Xa(a,b),i=Xa(a,d),l=bc(a,f.x,f.y,!0),q=l.x,u=l.y;l=bc(a,i.x,i.y,!0);let v=l.x,A=l.y;return Pe(q,u,v,A)}function td(a,b,d){let f=d-b;return b+((a-b)%f+f)%f}function Jf(a,b,d,f={x:0,y:0}){return f===!0&&(f=ry),a.wrapMode?b=td(b,0,a.width):!a.infinityMode&&(b<0||b>=a.width)&&(b=null),a.wrapMode?d=td(d,0,a.height):!a.infinityMode&&(d<0||d>=a.height)&&(d=null),f.x=b,f.y=d,f}let ry={x:0,y:0};function kc(a,b,d,f,i){let l=Xa(a,b);if(l===null)return null;typeof d==="string"&&(d.includes(",")?d=d.split(".").map(A=>parseInt(A,10)):d=parseInt(d));let q=typeof d==="number",u=typeof f==="number";if(q&&u){let A=a.grid.getTileXYAtDirection(l,d,f,i);return Jf(a,A.x,A.y,A),(A.x===null||A.y===null)&&(A=null),A}Array.isArray(i)||(i=[]),d===null&&(d=a.grid.allDirections);let v;if(q)if(Array.isArray(f))for(let A=0,E=f.length;A<E;A++)v=kc(a,l,d,f[A]),v!==null&&i.push(v);else{let A,E,H;({end:A=1,start:E=A>0?1:-1,step:H=A>=E?1:-1}=f);if(E===A)v=kc(a,l,d,A),v!==null&&i.push(v);else if(E<A)for(let Q=E;Q<=A;Q+=H)v=kc(a,l,d,Q),v!==null&&i.push(v);else for(let Q=E;Q>=A;Q+=H)v=kc(a,l,d,Q),v!==null&&i.push(v)}else for(let A=0,E=d.length;A<E;A++)u?(v=kc(a,l,d[A],f),v!==null&&i.push(v)):kc(a,l,d[A],f,i);return i}function Zc(a,b,d=null,f={x:0,y:0}){return kc(a,b,d,1,f)}function Gf(a,b,d){b===void 0&&(b=vy);let f=a.wrapMode,i=a.infinityMode;a.wrapMode=!1,a.infinityMode=!0;let l=Zc(a,b,d,!0);return a.wrapMode=f,a.infinityMode=i,Rd(a,b,l)}let vy={x:0,y:0};const KA=180/Math.PI;function Nf(a){return a*KA}function ns(a,b){let d=b-a;if(d===0)return 0;let f=Math.floor((d- -180)/360);return d-f*360}function Ff(a,b,d){d=Nf(d);let f=a.grid.allDirections,i=Infinity,l;for(let q=0,u=f.length;q<u;q++){let v=Nf(Gf(a,b,f[q])),A=Math.abs(ns(d,v));A<i&&(i=A,l=q)}return l}function If(a,b,d){if(b===null||d===null)return null;if(b.x===d.x&&b.y===d.y)return null;let f=a.grid.getNeighborTileDirection(b,d);if(a.wrapMode&&f===null){let i=Zc(a,b,null);for(let l=0,q=i.length;l<q;l++){let u=i[l];if(d.x===u.x&&d.y===u.y){f=l;break}}}return f}function Hf(a,b,d){let f=Xa(a,b),i=Xa(a,d);return If(a,f,i)}function Pi(a,b,d){return Hf(a,b,d)!==null}function Qi(a,b,d,f=!0){let i=Xa(a,b),l=Xa(a,d);return i===null||l===null?null:a.grid.directionBetween(i,l,f)}function Zg(a,b,d=1,f=[]){let i=a.grid.ringToTileXYArray(b,d);for(let l=0,q=i.length;l<q;l++){let u=i[l];zc(a,u.x,u.y)&&f.push(u)}return f}function Tm(a,b,d,f=!0,i=[]){for(let l=0;l<=d;l++){let q=f?l:d-l;Zg(a,b,q,i)}return i}function Pc(a,b,d,f,i={x:0,y:0}){return i===!0&&(i=ty),d===0&&f===0?(i.x=b.x,i.y=b.y):a.grid.offset(b,d,f,i),i}let ty={x:0,y:0};function Um(a,b){let d=Infinity,f=Infinity,i;for(let u=0,v=b.length;u<v;u++)i=b[u],d=Math.min(d,i.x),f=Math.min(f,i.y);if(d!==0||f!==0)for(let u=0,v=b.length;u<v;u++)i=b[u],Pc(a,i,-d,-f,i);let l=-Infinity,q=-Infinity;for(let u=0,v=b.length;u<v;u++)i=b[u],l=Math.max(l,i.x),q=Math.max(q,i.y);return Ie(a,l+1),Je(a,q+1),b}var Ne;(function(a){a[a["x+,y+"]=0]="x+,y+",a[a["x-,y+"]=1]="x-,y+",a[a["y+,x+"]=2]="y+,x+",a[a["y-,x+"]=3]="y-,x+"})(Ne||(Ne={}));function Ri(a,b,d,f=0){let i={x:0,y:0};switch(f){case 0:for(let l=0;l<a.height;l++)for(let q=0;q<a.width;q++)i.x=q,i.y=l,d?b.call(d,i,a):b(i,a);break;case 1:for(let l=0;l<a.height;l++)for(let q=a.width-1;q>=0;q--)i.x=q,i.y=l,d?b.call(d,i,a):b(i,a);break;case 2:for(let l=0;l<a.width;l++)for(let q=0;q<a.height;q++)i.x=l,i.y=q,d?b.call(d,i,a):b(i,a);break;case 3:for(let l=0;l<a.width;l++)for(let q=a.height-1;q>=0;q--)i.x=l,i.y=q,d?b.call(d,i,a):b(i,a)}}function Si(a,b,d,f){return a.grid.getDistance(b,d,f)}function Xg(a,b=0,d=[]){if(Array.isArray(b)){let f=b;for(let i=0;i<a.height;i++)for(let l=0;l<a.width;l++){let q=!0;for(let u=0,v=f.length;u<v;u++)if(zb(a,l,i,f[u])!==null){q=!1;break}q&&d.push({x:l,y:i})}}else for(let f=0;f<a.height;f++)for(let i=0;i<a.width;i++)zb(a,i,f,b)===null&&d.push({x:i,y:f});return d}function Yg(a,b,d,f){return a.grid.getGridPoints(b,d,f)}function mc(a,b,d,f=[]){let i=a.boardData.getChess(b,d);for(const[l,q]of i)f.push(q);return f}function Lf(a,b,d,f=[]){let i=d!=null,l,q;for(let u=0,v=b.length;u<v;u++)l=b[u],i?(q=zb(a,l.x,l.y,d),q!==null&&f.push(q)):mc(a,l.x,l.y,f);return f}function Ti(a,b,d,f,i){let l=Xa(a,b);if(l===null)return null;f==null&&(f=l.hasOwnProperty("z")?l.z:null);let q=Zc(a,l,d,!0);return q===null?null:Array.isArray(q)?(i===void 0&&(i=[]),Lf(a,q,f,i)):f==null?(i===void 0&&(i=[]),mc(a,q.x,q.y,i)):zb(a,q.x,q.y,f)}function Ui(a,b,d,f={x:0,y:0}){let i=Ff(a,b,d);return kc(a,b,i,1,f)}function Vi(a,b,d,f){return a.grid.getOppositeDirection(b,d,f)}function _g(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function Mf(a,b=0,d=a.length){let f=b+Math.floor(Math.random()*d);return a[f]===void 0?null:a[f]}function Vm(a,b=0,d={x:0,y:0}){d===!0&&(d=oy);let f=Math.floor(a.width*a.height*.3);for(let l=0;l<f;l++){let q=_g(0,a.width-1),u=_g(0,a.height-1);if(zb(a,q,u,b)===null)return d.x=q,d.y=u,d}let i=Xg(a,b);if(i.length===0)return null;{let l=Mf(i);return d.x=l.x,d.y=l.y,d}}let oy={x:0,y:0};function Wm(a,b,d,f){if(f===void 0){let i=mc(a,b,d);for(let l=0,q=i.length;l<q;l++){let u=Ac(i[l]).blocker;if(u===!0)return!0}return!1}else{let i=zb(a,b,d,f);if(i===null)return!1;let l=Ac(i).blocker;return l===!0}}function Xm(a,b){return a.boardData.chessToXYZ.has(b)}function Ym(a,b,d,f,i){if(f===void 0){let l=mc(a,b,d);for(let q=0,u=l.length;q<u;q++)if(as(Ac(l[q]).blocker,i))return!0;return!1}else{let l=zb(a,b,d,f);return l===null?!1:as(Ac(l).blocker,i)}}function as(a,b){return a===!1||a===!0?a:a[b]===!0}function ln(a){return a=a%qx,a>=0?a:a+qx}const qx=Math.PI*2;function os(a,b,d=1e-4){return Math.abs(a-b)<d}function Wi(a,b,d,f,i){let l=Xa(a,b),q=Xa(a,d),u=Rd(a,l,q);u=ln(u);let v=Math.abs(u-f);v=Math.min(v,wy-v);let A=i/2;return os(v,A)||v<A}const wy=Math.PI*2;function Xi(a,b,d,f,i){let l=Xa(a,b),q=Xa(a,d),u=a.grid.directions;a.grid.directions=a.grid.sides;let v=a.grid.directionBetween(l,q,!1);a.grid.directions=u;let A=Math.abs(v-f);return A=Math.min(A,a.grid.directions-A),A<=i/2}function gc(a,b,d,f={x:0,y:0}){return a.grid.getTileXY(b,d,f)}function Yi(a,b,d,f){if(a.infinityMode&&f===void 0)return!0;let i=gc(a,b,d,!0);return zc(a,i.x,i.y,f)}function ms(a,b,d,f){let i=a-d,l=b-f;return Math.sqrt(i*i+l*l)}function kn(a,b,d){return(b-a)*d+a}function Zm(a,b,d,f,i,l=[]){let q=ms(b,d,f,i),u=Math.min(a.grid.width,a.grid.height),v=Math.ceil(q/(u/4)),A;for(let E=0;E<=v;E++){let H=E/v,Q=kn(b,f,H),J=kn(d,i,H),S=gc(a,Q,J);if(!zc(a,S.x,S.y))continue;if(A&&A.x===S.x&&A.y===S.y)continue;l.push(S),A=S}return l}var Oe;(function(a){a[a.x=1]="x",a[a.horizontal=1]="horizontal",a[a.h=1]="h",a[a.y=2]="y",a[a.vertical=2]="vertical",a[a.v=2]="v",a[a.xy=3]="xy"})(Oe||(Oe={}));function _m(a,b,d,f=null,i={x:0,y:0}){return i===!0&&(i=sy),f!==null?Pc(a,b,-f.x,-f.y,i):(i.x=b.x,i.y=b.y),a.grid.mirror(i,d,i),f!==null&&Pc(a,i,f.x,f.y,i),i}let sy={x:0,y:0};function $m(a,b=!1,d=!1){let f=Oc(a);for(let i=0,l=f.length;i<l;i++)lc(a,f[i],void 0,void 0,void 0,b,d)}function an(a,b,d,f=null,i={x:0,y:0}){return i===!0&&(i=uy),f!==null?Pc(a,b,-f.x,-f.y,i):(i.x=b.x,i.y=b.y),a.grid.rotate(i,d,i),f!==null&&Pc(a,i,f.x,f.y,i),i}let uy={x:0,y:0};function bn(a,b,d){let f=Xa(a,b);if(f===null)return;Qd(a,b,f.x,f.y,d)}function $g(a,b,d){return Math.max(b,Math.min(d,a))}function cn(a,b,d,f=[]){let i=gc(a,b.left,b.top,!0),l=i.x-1,q=i.y-1,u=gc(a,b.right,b.bottom,!0),v=u.x+1,A=u.y+1;a.infinityMode||(l=$g(l,0,a.width-1),q=$g(q,0,a.height-1),v=$g(v,0,a.width-1),A=$g(A,0,a.height-1));for(let E=l;E<=v;E++)for(let H=q;H<=A;H++){let Q=bc(a,E,H,!0);d(b,Q.x,Q.y)&&f.push({x:E,y:H})}return f}function dn(a,b,d,f=!0){let i=Xa(a,b),l=Xa(a,d);if(i==null||l==null)return;lc(a,b),lc(a,d),Qd(a,b,l.x,l.y,l.z,f),Qd(a,d,i.x,i.y,i.z,f)}function Zi(a,b,d=[]){let f=a.boardData.ZToChessSet.get(b);if(f)for(const i of f)d.push(i);return d}function _i(a,b,d=[]){for(let f=0,i=b.length;f<i;f++){let l=b[f];d.push(bc(a,l.x,l.y))}return d}function $i(a,b,d,f={x:0,y:0}){return f===!0&&(f=xy),gc(a,b,d,f),bc(a,f.x,f.y,f),f}let xy={x:0,y:0};function aj(a,b,d,f,i){let l=gc(a,b,d,!0);return f!==void 0?zb(a,l.x,l.y,f):mc(a,l.x,l.y,i)}class Oi extends Ni{addChess(a,b,d,f,i=!0){return Qd(this,a,b,d,f,i),this}angleBetween(a,b){return Rd(this,a,b)}angleSnapToDirection(a,b){return Ff(this,a,b)}angleToward(a,b){return Gf(this,a,b)}areNeighbors(a,b){return Pi(this,a,b)}chessToTileXYZ(a){return Xa(this,a)}contains(a,b,d){return zc(this,a,b,d)}directionBetween(a,b,d=!0){return Qi(this,a,b,d)}filledRingToTileXYArray(a,b,d=!0,f=[]){return Tm(this,a,b,d,f)}fit(a){return Um(this,a)}forEachTileXY(a,b,d=0){return Ri(this,a,b,d),this}getAllChess(a=[]){return Oc(this,a)}getChessData(a){return Ac(a)}getDistance(a,b,d=!1){return Si(this,a,b,d)}getEmptyTileXYArray(a=0,b=[]){return Xg(this,a,b)}getGridPoints(a,b,d){return Yg(this,a,b,d)}getNeighborChess(a,b,d,f){return Ti(this,a,b,d,f)}getNeighborChessDirection(a,b){return Hf(this,a,b)}getNeighborTileDirection(a,b){return If(this,a,b)}getNeighborTileXY(a,b=null,d={x:0,y:0}){return Zc(this,a,b,d)}getNeighborTileXYAtAngle(a,b,d={x:0,y:0}){return Ui(this,a,b,d)}getOppositeDirection(a,b,d){return Vi(this,a,b,d)}getRandomEmptyTileXY(a=0,b={x:0,y:0}){return Vm(this,a,b)}getTileXYAtDirection(a,b,d,f){return kc(this,a,b,d,f)}getWrapTileXY(a,b,d={x:0,y:0}){return Jf(this,a,b,d)}gridAlign(a,b,d){return Kf(this,a,b,d),this}hasBlocker(a,b,d){return Wm(this,a,b,d)}hasChess(a){return Xm(this,a)}hasEdgeBlocker(a,b,d,f){return Ym(this,a,b,d,f)}isAngleInCone(a,b,d,f){return Wi(this,a,b,d,f)}isDirectionInCone(a,b,d,f){return Xi(this,a,b,d,f)}isOverlappingPoint(a,b,d){return Yi(this,a,b,d)}lineToTileXYArray(a,b,d,f,i=[]){return Zm(this,a,b,d,f,i)}mirror(a,b,d=null,f={x:0,y:0}){return _m(this,a,b,d,f)}offset(a,b,d,f){return Pc(this,a,b,d,f)}removeAllChess(a=!1,b=!1){return $m(this,a,b),this}removeChess(a,b,d,f,i=!1,l=!1){return lc(this,a,b,d,f,i,l),this}ringToTileXYArray(a,b=1,d=[]){return Zg(this,a,b,d)}rotate(a,b,d=null,f={x:0,y:0}){return an(this,a,b,d,f)}setBoardWidth(a=0){return Ie(this,a),this}setBoardHeight(a=0){return Je(this,a),this}setTileZ(a,b){return bn(this,a,b),this}shapeToTileXYArray(a,b,d=[]){return cn(this,a,b,d)}swapChess(a,b,d=!0){return dn(this,a,b,d),this}tileXYArrayToChessArray(a,b,d=[]){return Lf(this,a,b,d)}tileXYToChessArray(a,b,d=[]){return mc(this,a,b,d)}tileXYZToChess(a,b,d){return zb(this,a,b,d)}tileZToChessArray(a,b=[]){return Zi(this,a,b)}tileXYArrayToWorldXYArray(a,b=[]){return _i(this,a,b)}tileXYToWorldXY(a,b,d={x:0,y:0}){return bc(this,a,b,d)}worldXYSnapToGrid(a,b,d={x:0,y:0}){return $i(this,a,b,d)}worldXYToChess(a,b,d,f){return aj(this,a,b,d,f)}worldXYToTileXY(a,b,d){return gc(this,a,b,d)}}class $r extends Oi{}const Bc={};be(Bc,{ChessToTileXYZ:()=>Xa,Contains:()=>zc,DirectionBetween:()=>Qi,ForEachTileXY:()=>Ri,GetDistance:()=>Si,GetOppositeDirection:()=>Vi,GetTileXYAtDirection:()=>kc,GetWrapTileXY:()=>Jf,IsDirectionInCone:()=>Xi,TileXYArrayToChessArray:()=>Lf,TileXYToChessArray:()=>mc,TileXYZToChess:()=>zb,TileZToChessArray:()=>Zi});const Sd={};be(Sd,{AngleBetween:()=>Rd,AngleSnapToDirection:()=>Ff,AngleToward:()=>Gf,GetGridPoints:()=>Yg,GridAlign:()=>Kf,IsAngleInCone:()=>Wi,IsOverlappingPoint:()=>Yi,TileXYArrayToWorldXYArray:()=>_i,TileXYToWorldXY:()=>bc,WorldXYSnapToGrid:()=>$i,WorldXYToChess:()=>aj,WorldXYToTileXY:()=>gc});const Me={};be(Me,{AreNeighbors:()=>Pi,GetNeighborChess:()=>Ti,GetNeighborChessDirection:()=>Hf,GetNeighborTileDirection:()=>If,GetNeighborTileXY:()=>Zc,GetNeighborTileXYAtAngle:()=>Ui});var vb;(function(a){a[a.orthogonal=0]="orthogonal",a[a.isometric=1]="isometric"})(vb||(vb={}));var ud;(function(a){a[a["4dir"]=4]="4dir",a[a["8dir"]=8]="8dir"})(ud||(ud={}));class Ws{constructor({x:a=0,y:b=0,cellWidth:d=0,cellHeight:f=0,type:i=vb.orthogonal,dir:l=ud["4dir"]}={}){this.setOriginPosition(a,b),this.setCellSize(d,f),this.setType(i),this.setDirectionMode(l)}fromJSON({x:a=0,y:b=0,cellWidth:d=0,cellHeight:f=0,type:i=vb.orthogonal,dir:l=ud["4dir"]}={}){return this.setType(i),this.setDirectionMode(l),this.setOriginPosition(a,b),this.setCellSize(d,f),this}toJSON(){return{x:this.x,y:this.y,cellWidth:this.cellWidth,cellHeight:this.cellHeight,type:this.mode,dir:this.directions}}setOriginPosition(a=0,b=0){return this.x=a,this.y=b,this}get width(){return this._width}set width(a){this._width=a,this._halfWidth=a/2}get height(){return this._height}set height(a){this._height=a,this._halfHeight=a/2}setCellSize(a=0,b=0){return this.width=a,this.height=b,this}get cellWidth(){return this.width}set cellWidth(a){this.width=a}get cellHeight(){return this.height}set cellHeight(a){this.height=a}setType(a=vb.orthogonal){return typeof a==="string"&&(a=vb[a]),this.mode=a,this}setDirectionMode(a=ud["4dir"]){return typeof a==="string"&&(a=ud[a]),this.directions=a,this}}function Os(a,b,d,f=!0){let i;switch(a.mode){case vb.orthogonal:case vb.isometric:if(b.y===d.y)i=d.x>=b.x?0:2;else if(b.x===d.x)i=d.y>=b.y?1:3;else if(a.directions===ud["4dir"]){let l=Nf(Pe(b.x,b.y,d.x,d.y));l<0&&(l+=360),i=l/90,f&&(i=Math.round(i))}else{let l=d.x-b.x,q=d.y-b.y;if(l===q)i=l>0?4:6;else if(l===-q)i=l>0?7:5;else{let u=Nf(Math.atan2(q,l));u<0&&(u+=360);let v=u/45;f&&(v=Math.round(v)),v>=0&&v<1?i=v:v>=1&&v<2?i=v+3:v>=2&&v<3?i=v-1:v>=3&&v<4?i=v+2:v>=4&&v<5?i=v-2:v>=5&&v<6?i=v+1:v>=6&&v<7?i=v-3:i=v}}break}return i===a.directions&&(i=0),i}function mj(a,b){return td(b,0,a.directions)}function Ps(a,b,d,f=!1){let i=d.x-b.x,l=d.y-b.y,q;return f?q=Math.abs(i)+Math.abs(l):q=Math.sqrt(i*i+l*l),q}function ij(a,b=[]){if(!(b.length===a))if(b.length<a)for(let d=b.length;d<a;d++)b.push({x:0,y:0});else b.length=a;return b}function pj(a,b,d,f={x:0,y:0}){typeof b==="object"&&(d=b.y,b=b.x),f===!0&&(f=Sy);let i,l;switch(a.mode){case vb.orthogonal:i=b*a.width,l=d*a.height;break;case vb.isometric:i=(b-d)*a._halfWidth,l=(b+d)*a._halfHeight;break}return i+=a.x,l+=a.y,f.x=i,f.y=l,f}let Sy={x:0,y:0};function Qs(a,b=0,d=0,f=[]){if(typeof b==="object"){let v=b;d=v.y,b=v.x}f===!0&&(f=Oy),ij(4,f);let i,l;({x:i,y:l}=pj(a,b,d));let q=a._halfWidth,u=a._halfHeight;switch(a.mode){case vb.orthogonal:f[0].x=i+q,f[0].y=l-u,f[1].x=i+q,f[1].y=l+u,f[2].x=i-q,f[2].y=l+u,f[3].x=i-q,f[3].y=l-u;break;case vb.isometric:f[0].x=i+q,f[0].y=l,f[1].x=i,f[1].y=l+u,f[2].x=i-q,f[2].y=l,f[3].x=i,f[3].y=l-u;break}return f}let Oy=[];const Of=[[1,0],[0,1],[-1,0],[0,-1],[1,1],[-1,1],[-1,-1],[1,-1]],bh=Of;function Ls(a){let b={},d,f,i;for(let l in a)d=a[l],f=d[0],i=d[1],b.hasOwnProperty(f)||(b[f]={}),b[f][i]=parseInt(l);return b}const Ms=Ls(Of),Ns=Ls(bh);function Rs(a,b,d){let f;switch(a.mode){case vb.orthogonal:f=Ms;break;case vb.isometric:f=Ns;break}let i=d.x-b.x,l=d.y-b.y;if(f.hasOwnProperty(i)){let q=f[i];if(q.hasOwnProperty(l))return q[l]}return null}function qj(a,b,d,f,i={x:0,y:0}){i===!0&&(i=Ry);let l,q;switch(a.mode){case vb.orthogonal:l=Of[d][0],q=Of[d][1];break;case vb.isometric:l=bh[d][0],q=bh[d][1];break}return f===1?(i.x=b.x+l,i.y=b.y+q):(i.x=b.x+f*l,i.y=b.y+f*q),i}let Ry={x:0,y:0};function Ss(a,b,d,f={x:0,y:0}){return qj(a,b,d,1,f)}function Ts(a,b,d,f){return Py[f]}const Py={0:2,1:3,2:0,3:1,4:6,5:7,6:4,7:5};function Us(a,b,d,f={x:0,y:0}){typeof b==="object"&&(d=b.y,b=b.x),f===!0&&(f=Qy),b-=a.x,d-=a.y;let i=b/a.width,l=d/a.height;switch(a.mode){case vb.orthogonal:f.x=Math.round(i),f.y=Math.round(l);break;case vb.isometric:f.x=Math.round(+i+l),f.y=Math.round(-i+l);break}return f}let Qy={x:0,y:0};function Vs(a,b,d,f={x:0,y:0}){return typeof d==="string"&&(d=Oe[d]),f===!0&&(f=Ty),f.x=d&1?-b.x:b.x,f.y=d&2?-b.y:b.y,f}let Ty={x:0,y:0};function Qe(a,b,d,f,i={x:0,y:0}){i===!0&&(i=Uy);let l=b.x+d,q=b.y+f;return i.x=l,i.y=q,i}let Uy={x:0,y:0};function Xs(a,b,d,f=[]){let i,l;for(i=d,l=-d;l<=d;l++)f.push(Qe(a,b,i,l));for(l=d,i=d-1;i>=-d;i--)f.push(Qe(a,b,i,l));for(i=-d,l=d-1;l>=-d;l--)f.push(Qe(a,b,i,l));for(l=-d,i=-d+1;i<=d-1;i++)f.push(Qe(a,b,i,l));return f}function Ys(a,b,d,f={x:0,y:0}){f===!0&&(f=Zy),d=td(d,0,3);let i,l;switch(d){case 1:i=-b.y,l=b.x;break;case 2:i=-b.x,l=-b.y;break;case 3:i=b.y,l=-b.x;break;default:i=b.x,l=b.y;break}return f.x=i,f.y=l,f}let Zy={x:0,y:0};function nj(a){a._savedOriginX=a.x,a._savedOriginY=a.y}function oj(a){a.x=a._savedOriginX,a.y=a._savedOriginY}class Ks extends Ws{get sides(){return 4}get allDirections(){return this.directions===4?Vy:Wy}get halfDirections(){return this.directions===4?Xy:Yy}directionBetween(a,b,d=!0){return Os(this,a,b,d)}directionNormalize(a){return mj(this,a)}getDistance(a,b,d=!1){return Ps(this,a,b,d)}getGridPoints(a=0,b=0,d=[]){return Qs(this,a,b,d)}getNeighborTileDirection(a,b){return Rs(this,a,b)}getNeighborTileXY(a,b,d={x:0,y:0}){return Ss(this,a,b,d)}getOppositeDirection(a,b,d){return Ts(this,a,b,d)}getTileXY(a,b,d={x:0,y:0}){return Us(this,a,b,d)}getTileXYAtDirection(a,b,d,f={x:0,y:0}){return qj(this,a,b,d,f)}getWorldXY(a,b,d={x:0,y:0}){return pj(this,a,b,d)}mirror(a,b,d={x:0,y:0}){return Vs(this,a,b,d)}offset(a,b,d,f={x:0,y:0}){return Qe(this,a,b,d,f)}ringToTileXYArray(a,b,d=[]){return Xs(this,a,b,d)}rotate(a,b,d={x:0,y:0}){return Ys(this,a,b,d)}restoreOrigin(){return oj(this),this}saveOrigin(){return nj(this),this}}const Vy=[0,1,2,3],Wy=[0,1,2,3,4,5,6,7],Xy=[0,1],Yy=[0,1,4,5];var Ya;(function(a){a[a.ODD_R=0]="ODD_R",a[a.EVEN_R=1]="EVEN_R",a[a.ODD_Q=2]="ODD_Q",a[a.EVEN_Q=3]="EVEN_Q"})(Ya||(Ya={}));var Qc;(function(a){a[a.y=0]="y",a[a.flat=0]="flat",a[a.x=1]="x",a[a.pointy=1]="pointy"})(Qc||(Qc={}));var Vd;(function(a){a[a.even=0]="even",a[a.odd=1]="odd"})(Vd||(Vd={}));class Ds{constructor({x:a=0,y:b=0,radius:d=void 0,cellWidth:f=0,cellHeight:i=0,staggerAxis:l=Qc.x,staggerIndex:q=Vd.odd}={}){this.setType(l,q),this.setDirectionMode(),this.setOriginPosition(a,b),d!==void 0?this.setRadius(d):this.setCellSize(f,i)}fromJSON({x:a=0,y:b=0,radius:d=void 0,cellWidth:f=0,cellHeight:i=0,staggerAxis:l=Qc.x,staggerIndex:q=Vd.odd}={}){return this.setType(l,q),this.setDirectionMode(),this.setOriginPosition(a,b),d!==void 0?this.setRadius(d):this.setCellSize(f,i),this}toJSON(){return{x:this.x,y:this.y,radius:this.radius,cellWidth:this.cellWidth,cellHeight:this.cellHeight,staggerAxis:this.staggerAxis,staggerIndex:this.staggerIndex}}setOriginPosition(a,b){return this.x=a,this.y=b,this}get width(){return this._width}set width(a){this._width=a,this._halfWidth=a/2}get height(){return this._height}set height(a){this._height=a,this._halfHeight=a/2}setCellSize(a=0,b=0){return this.width=a,this.height=b,this.radius=void 0,this}get cellWidth(){return this.width}set cellWidth(a){this.width=a}get cellHeight(){return this.height}set cellHeight(a){this.height=a}setRadius(a=0){let b,d;return this.staggerAxis===Qc.y?(b=2*a,d=Js*a):(b=Js*a,d=2*a),this.setCellSize(b,d),this.radius=a,this}setDirectionMode(){return this.directions=6,this}setType(a=1,b=1){return typeof a==="string"&&(a=Qc[a]),typeof b==="string"&&(b=Vd[b]),this.staggerAxis=a,this.staggerIndex=b,a===Qc.y?this.mode=b===Vd.even?Ya.EVEN_Q:Ya.ODD_Q:this.mode=b===Vd.even?Ya.EVEN_R:Ya.ODD_R,this}}const Js=Math.sqrt(3);function nc(a,b,d,f={x:0,y:0,z:0}){f===!0&&(f=mn);switch(a){case Ya.ODD_R:f.x=b-(d-(d&1))/2,f.z=d;break;case Ya.EVEN_R:f.x=b-(d+(d&1))/2,f.z=d;break;case Ya.ODD_Q:f.x=b,f.z=d-(b-(b&1))/2;break;case Ya.EVEN_Q:f.x=b,f.z=d-(b+(b&1))/2;break}return f.y=-f.x-f.z,f}function rs(a,b,d,f={x:0,y:0,z:0}){typeof a!=="number"&&(f=a,a=f.x,b=f.y,d=f.z),f===!0&&(f=mn);let i=Math.round(a),l=Math.round(b),q=Math.round(d),u=Math.abs(i-a),v=Math.abs(l-b),A=Math.abs(q-d);return u>v&&u>A?i=-l-q:v>A?l=-i-q:q=-i-l,f.x=i,f.y=l,f.z=q,f}function Ub(a,b,d,f,i={x:0,y:0}){i===!0&&(i=zy);switch(a){case Ya.ODD_R:i.x=b+(f-(f&1))/2,i.y=f;break;case Ya.EVEN_R:i.x=b+(f+(f&1))/2,i.y=f;break;case Ya.ODD_Q:i.x=b,i.y=f+(b-(b&1))/2;break;case Ya.EVEN_Q:i.x=b,i.y=f+(b+(b&1))/2;break}return i}function ss(a,b,d={x:0,y:0,z:0}){return d===!0&&(d=mn),d.x=a,d.y=-a-b,d.z=b,d}let mn={x:0,y:0,z:0},zy={x:0,y:0};function us(a,b,d,f=!0){let i;nc(a.mode,b.x,b.y,ej),nc(a.mode,d.x,d.y,fj);let l=fj.x-ej.x,q=fj.y-ej.y,u=fj.z-ej.z;return u===0?i=l>0?0:3:l===0?i=u>0?1:4:q===0?i=u>0?2:5:l>0&&q<0&&u>0?i=0+u/-q:l<0&&q<0&&u>0?i=1+-q/u:l<0&&q>0&&u>0?i=2+q/-l:l<0&&q>0&&u<0?i=3+-u/q:l>0&&q>0&&u<0?i=4+l/-u:i=5+-q/l,f&&(i=Math.round(i)),i}let ej={x:0,y:0,z:0},fj={x:0,y:0,z:0};function vs(a,b,d,f=!1){nc(a.mode,b.x,b.y,gj),nc(a.mode,d.x,d.y,hj);let i=hj.x-gj.x,l=hj.y-gj.y,q=hj.z-gj.z;return(Math.abs(i)+Math.abs(l)+Math.abs(q))/2}let gj={x:0,y:0,z:0},hj={x:0,y:0,z:0};function jj(a,b,d,f={x:0,y:0}){typeof b==="object"&&(d=b.y,b=b.x),f===!0&&(f=Iy);let i=b*a.width,l=d*a.height;switch(a.mode){case Ya.ODD_R:d&1&&(i+=a._halfWidth),l*=.75;break;case Ya.EVEN_R:d&1&&(i-=a._halfWidth),l*=.75;break;case Ya.ODD_Q:i*=.75,b&1&&(l+=a._halfHeight);break;case Ya.EVEN_Q:i*=.75,b&1&&(l-=a._halfHeight);break}return i+=a.x,l+=a.y,f.x=i,f.y=l,f}let Iy={x:0,y:0};function ws(a,b=0,d=0,f=[]){if(typeof b==="object"){let q=b;d=q.y,b=q.x}f===!0&&(f=Ey),ij(6,f);let i,l;({x:i,y:l}=jj(a,b,d));if(a.radius!==void 0){let q=a.radius,u=a.staggerAxis===Qc.flat?0:-30;for(let v=0;v<6;v++){let A=60*v+u,E=Td(A);f[v].x=i+q*Math.cos(E),f[v].y=l+q*Math.sin(E)}}else{let q=a._halfWidth,u=q/2,v=a._halfHeight,A=v/2;a.staggerAxis===Qc.flat?(f[0].x=i+q,f[0].y=l,f[1].x=i+u,f[1].y=l+v,f[2].x=i-u,f[2].y=l+v,f[3].x=i-q,f[3].y=l,f[4].x=i-u,f[4].y=l-v,f[5].x=i+u,f[5].y=l-v):(f[0].x=i+q,f[0].y=l-A,f[1].x=i+q,f[1].y=l+A,f[2].x=i,f[2].y=l+v,f[3].x=i-q,f[3].y=l+A,f[4].x=i-q,f[4].y=l-A,f[5].x=i,f[5].y=l-v)}return f}let Ey=[];const Ay=[[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]],[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]]],By=[[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]],[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]]],Cy=[[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]],[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]]],Dy=[[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]],[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]]],Cc=[Ay,By,Cy,Dy];function Ud(a){let b={},d,f;for(let i in a)[d,f]=a[i],b.hasOwnProperty(d)||(b[d]={}),b[d][f]=parseInt(i);return b}const ts=[[Ud(Cc[0][0]),Ud(Cc[0][1])],[Ud(Cc[1][0]),Ud(Cc[1][1])],[Ud(Cc[2][0]),Ud(Cc[2][1])],[Ud(Cc[3][0]),Ud(Cc[3][1])]];function kj(a,b,d){let f;switch(a){case Ya.ODD_R:case Ya.EVEN_R:f=d&1;break;case Ya.ODD_Q:case Ya.EVEN_Q:f=b&1;break}return f}function xs(a,b,d){let f=a.mode,i=kj(f,b.x,b.y),l=ts[f][i],q=d.x-b.x,u=d.y-b.y;if(l.hasOwnProperty(q)){let v=l[q];if(v.hasOwnProperty(u))return v[u]}return null}function lj(a,b,d,f,i={x:0,y:0}){i===!0&&(i=Hy);let l=a.mode,q=b.x,u=b.y;if(f===1){let v=kj(l,q,u);i.x=q+Cc[l][v][d][0],i.y=u+Cc[l][v][d][1]}else if(f===0)i.x=q,i.y=u;else{let v=nc(l,q,u,!0),A,E,H;switch(d){case 1:A=v.x,E=v.y-f,H=v.z+f;break;case 2:A=v.x-f,E=v.y,H=v.z+f;break;case 3:A=v.x-f,E=v.y+f,H=v.z;break;case 4:A=v.x,E=v.y+f,H=v.z-f;break;case 5:A=v.x+f,E=v.y,H=v.z-f;break;default:A=v.x+f,E=v.y-f,H=v.z;break}Ub(l,A,E,H,i)}return i}let Hy={x:0,y:0};function ys(a,b,d,f={x:0,y:0}){return lj(a,b,d,1,f)}function zs(a,b,d,f){return(f+3)%6}const As=4/3,Bs=2/3;function Cs(a,b,d,f={x:0,y:0}){typeof b==="object"&&(d=b.y,b=b.x),f===!0&&(f=Gy),b-=a.x,d-=a.y;let i,l;switch(a.mode){case Ya.ODD_R:case Ya.EVEN_R:l=d*As/a.height,i=b/a.width-Bs*(d/a.height);break;case Ya.ODD_Q:case Ya.EVEN_Q:l=d/a.height-Bs*(b/a.width),i=b*As/a.width;break}let q=ss(i,l,Fy);return rs(q),Ub(a.mode,q.x,q.y,q.z,f),f}let Fy={x:0,y:0,z:0},Gy={x:0,y:0};function Es(a,b,d,f={x:0,y:0}){typeof d==="string"&&(d=Oe[d]),f===!0&&(f=Ly);let i=nc(a.mode,b.x,b.y,!0),l=a.mode===Ya.ODD_R||a.mode===Ya.EVEN_R,q,u,v;return d&1&&(l?(q=i.y,u=i.x,v=i.z):(q=-i.x,u=-i.z,v=-i.y),i.x=q,i.y=u,i.z=v),d&2&&(l?(q=-i.y,u=-i.x,v=-i.z):(q=i.x,u=i.z,v=i.y)),Ub(a.mode,q,u,v,f),f}let Ly={x:0,y:0};function Fs(a,b,d,f,i={x:0,y:0}){i===!0&&(i=My);let l=b.x+d,q=b.y+f;switch(a.mode){case Ya.ODD_R:(f&1)!==0&&((q&1)===0&&(l+=1));break;case Ya.EVEN_R:(f&1)!==0&&((q&1)===0&&(l-=1));break;case Ya.ODD_Q:(d&1)!==0&&((l&1)==0&&(q+=1));break;case Ya.EVEN_Q:(d&1)!==0&&((l&1)==0&&(q-=1));break}return i.x=l,i.y=q,i}let My={x:0,y:0};function Gs(a,b,d,f=[]){let i=nc(a.mode,b.x,b.y,!0),l=i.x,q=i.y,u=i.z,v,A,E;for(E=d,v=0;v>=-d;v--)A=-v-E,f.push(Ub(a.mode,l+v,q+A,u+E));for(v=-d,A=1;A<=d;A++)E=-v-A,f.push(Ub(a.mode,l+v,q+A,u+E));for(A=d,E=-1;E>=-d;E--)v=-A-E,f.push(Ub(a.mode,l+v,q+A,u+E));for(E=-d,v=1;v<=d;v++)A=-v-E,f.push(Ub(a.mode,l+v,q+A,u+E));for(v=d,A=-1;A>=-d;A--)E=-v-A,f.push(Ub(a.mode,l+v,q+A,u+E));for(A=-d,E=1;E<=d-1;E++)v=-A-E,f.push(Ub(a.mode,l+v,q+A,u+E));return f}function Hs(a,b,d,f={x:0,y:0}){f===!0&&(f=Ny),d=td(d,0,5);let i=nc(a.mode,b.x,b.y,!0),l,q,u;switch(d){case 1:l=-i.z,q=-i.x,u=-i.y;break;case 2:l=i.y,q=i.z,u=i.x;break;case 3:l=-i.x,q=-i.y,u=-i.z;break;case 4:l=i.z,q=i.x,u=i.y;break;case 5:l=-i.y,q=-i.z,u=-i.x;break;default:l=i.x,q=i.y,u=i.z;break}return Ub(a.mode,l,q,u,f),f}let Ny={x:0,y:0};class Is extends Ds{get sides(){return 6}get allDirections(){return Jy}get halfDirections(){return Ky}directionBetween(a,b,d=!0){return us(this,a,b,d)}directionNormalize(a){return mj(this,a)}getDistance(a,b,d=!1){return vs(this,a,b,d)}getGridPoints(a=0,b=0,d=[]){return ws(this,a,b,d)}getNeighborTileDirection(a,b){return xs(this,a,b)}getNeighborTileXY(a,b,d={x:0,y:0}){return ys(this,a,b,d)}getOppositeDirection(a,b,d){return zs(this,a,b,d)}getTileXY(a,b,d={x:0,y:0}){return Cs(this,a,b,d)}getTileXYAtDirection(a,b,d,f={x:0,y:0}){return lj(this,a,b,d,f)}getWorldXY(a,b,d={x:0,y:0}){return jj(this,a,b,d)}mirror(a,b,d={x:0,y:0}){return Es(this,a,b,d)}offset(a,b,d,f={x:0,y:0}){return Fs(this,a,b,d,f)}ringToTileXYArray(a,b,d=[]){return Gs(this,a,b,d)}rotate(a,b,d={x:0,y:0}){return Hs(this,a,b,d)}restoreOrigin(){return oj(this),this}saveOrigin(){return nj(this),this}}const Jy=[0,1,2,3,4,5],Ky=[0,1,2];var Qb;(function(a){a[a.random=0]="random",a[a.diagonal=1]="diagonal",a[a.straight=2]="straight",a[a.line=3]="line",a[a.astar=10]="astar",a[a["astar-random"]=11]="astar-random",a[a["astar-line"]=12]="astar-line"})(Qb||(Qb={}));const Re=null;class ex{constructor(a){this.content=[],this.scoreFunction=a}clear(){this.content.length=0}push(a){this.content.push(a),this.sinkDown(this.content.length-1)}pop(){let a=this.content[0],b=this.content.pop();return this.content.length>0&&(this.content[0]=b,this.bubbleUp(0)),a}remove(a){const b=this.content.indexOf(a);let d=this.content.pop();b!==this.content.length-1&&(this.content[b]=d,this.scoreFunction(d)<this.scoreFunction(a)?this.sinkDown(b):this.bubbleUp(b))}get size(){return this.content.length}rescoreElement(a){this.sinkDown(this.content.indexOf(a))}sinkDown(a){let b=this.content[a];for(;a>0;){let d=(a+1>>1)-1,f=this.content[d];if(this.scoreFunction(b)<this.scoreFunction(f))this.content[d]=b,this.content[a]=f,a=d;else break}}bubbleUp(a){let b=this.content.length,d=this.content[a],f=this.scoreFunction(d);for(;;){let i=a+1<<1,l=i-1,q=null,u;if(l<b){let v=this.content[l];u=this.scoreFunction(v),u<f&&(q=l)}if(i<b){let v=this.content[i],A=this.scoreFunction(v);A<(q===null?f:u)&&(q=i)}if(q!==null)this.content[a]=this.content[q],this.content[q]=d,a=q;else break}}}let LDa=new ex(a=>a.f);const pk=function(a,b,d=[]){let f=b;for(;f.prevNodes.length>0;)d.push(f),f=f.prevNodes[0];return d.reverse()};const hx=function(a,b,d=[]){let f=b;for(;f.prevNodes.length>0;)d.push(f),f.prevNodes.length===1?f=f.prevNodes[0]:f=Mf(f.prevNodes);return d.reverse()};const gx=function(a,b,d=[]){let f=b,i=b.angleTo(a);for(;f.prevNodes.length>0;){d.push(f);if(f.prevNodes.length===1)f=f.prevNodes[0];else{let l=Infinity;for(let q=1,u=f.prevNodes.length;q<u;q++){let v=f.prevNodes[q],A=Math.abs(b.angleTo(v)-i);A<l&&(l=A,f=v)}}}return d.reverse()};const fx=function(a,b,d=[]){let f=b,i;for(;f.prevNodes.length>0;){d.push(f);if(f.prevNodes.length===1||i===void 0){let l=f.prevNodes[0];i=l.logicDirTo(f),f=l}else{let l,q;for(let u=0,v=f.prevNodes.length;u<v;u++){l=f.prevNodes[u],q=l.logicDirTo(f);if(q!==i)break}i=q,f=l}}return d.reverse()};const ix=function(a,b,d=[]){let f=b,i;for(;f.prevNodes.length>0;){d.push(f);if(f.prevNodes.length===1||i===void 0){let l=f.prevNodes[0];i=l.logicDirTo(f),f=l}else{let l,q;for(let u=0,v=f.prevNodes.length;u<v;u++){l=f.prevNodes[u],q=l.logicDirTo(f);if(q===i)break}i=q,f=l}}return d.reverse()};let df={};df[Qb.astar]=pk;df[Qb["astar-line"]]=pk;df[Qb["astar-random"]]=pk;df[Qb.random]=hx;df[Qb.line]=gx;df[Qb.diagonal]=fx;df[Qb.straight]=ix;class $s{constructor(){this.prevNodes=[]}shutdown(){this.key=void 0,this.prevNodes.length=0}destroy(){this.shutdown()}reset(a){this.key=a,this.f=0,this.g=0,this.h=void 0,this.closerH=void 0,this.visited=!1,this.closed=!1}heuristic(a,b,d){if(b===null)return 0;let f,i=this.distanceTo(a)*this.manager.weight;switch(b){case Qb.astar:f=i;break;case Qb["astar-line"]:if(d!==void 0){let l=a.angleTo(d)-this.angleTo(d);f=i+Math.abs(l)}else f=i;case Qb["astar-random"]:f=i+Math.random();break;default:f=i;break}return f}getNextNodes(){return[]}getCost(a){return Re}distanceTo(a){return 0}angleTo(a){return 0}logicDirTo(a){return 0}getNode(a,b=!1){return this.manager.getNode(a,b)}}function Se(a){for(let b=a.length-1;b>0;b--){let d=Math.floor(Math.random()*(b+1)),f=a[b];a[b]=a[d],a[d]=f}return a}class iz extends $s{constructor(a){super();this.isTileXYZ=!0;this.pathFinder=a}reset(a){super.reset(a),this.key=a,at(a,this),this._px=void 0,this._py=void 0,this.cost=void 0}getNextNodes(){let a=Me.GetNeighborTileXY(this.board,this);this.pathFinder.shuffleNeighbors&&Se(a);let b=[];return a.forEach(d=>{let f=this.getNode(tc(d.x,d.y),!0);b.push(f)}),b}getCost(a){return this.pathFinder.cacheCost?this.cost===void 0&&(this.cost=this.pathFinder.getCost(this,a)):this.cost=this.pathFinder.getCost(this,a),this.cost}distanceTo(a){return Bc.GetDistance(this.board,this,a,!0)}angleTo(a){return Pe(this.worldX,this.wroldY,a.worldX,a.worldX)}logicDirTo(a){return Me.GetNeighborTileDirection(this.board,this,a)}get board(){return this.pathFinder.board}get worldX(){if(this._px===void 0){let a=Sd.TileXYToWorldXY(this.board,this.x,this.y,!0);this._px=a.x,this._py=a.y}return this._px}get wroldY(){if(this._py===void 0){let a=Sd.TileXYToWorldXY(this.board,this.x,this.y,!0);this._px=a.x,this._py=a.y}return this._py}}class dz{constructor(){this.data=[];this.visited=new Set()}push(a,b){if(Array.isArray(a)){let f=a;for(let i=0,l=f.length;i<l;i++)this.push(f[i]);return this}if(typeof a==="object"){let f=a;a=f.x,b=f.y}let d=`${a},${b}`;return this.visited.has(d)?this:(this.data.push({x:a,y:b}),this.visited.add(d),this)}pop(){return this.data.pop()}get length(){return this.data.length}clear(){return this.data.length=0,this.visited.clear(),this}}let cca=new dz();var dj;(function(a){a[a.direction=0]="direction",a[a.angle=1]="angle"})(dj||(dj={}));function yp(a,b){return a.events.delete(b),a}function xp(a,b,...d){if(a.events.size===0||!a.events.has(b))return!1;const f=a.events.get(b);let i=f.size;for(const l of f){l.callback.apply(l.context,d),l.once&&f.delete(l),i--;if(i===0)break}return f.size===0&&a.events.delete(b),!0}class Hh{constructor(a,b,d=!1){this.callback=a,this.context=b,this.once=d}}function Ap(a){return[...a.events.keys()]}function zp(a,b){const d=a.events.get(b);return d?d.size:0}function Bp(a,b){const d=[],f=a.events.get(b);return f.forEach(i=>{d.push(i.callback)}),d}function wp(a,b,d,f,i){const l=a.events,q=l.get(b);if(!d)l.delete(b);else if(d instanceof Hh)q.delete(d);else{const u=!f,v=i!==void 0;for(const A of q)A.callback===d&&(u&&A.context===f)&&(v&&A.once===i)&&q.delete(A)}return q.size===0&&l.delete(b),a}function Gh(a,b,d,f=a,i=!1){if(typeof d!=="function")throw new TypeError("Listener not a function");const l=new Hh(d,f,i),q=a.events.get(b);return q?q.add(l):a.events.set(b,new Set([l])),l}function vp(a,b,d,f=a){return Gh(a,b,d,f,!0)}function rk(a,b){b?a.events.delete(b):a.events.clear()}function px(a){return class extends a{constructor(){super(...arguments);this.events=null}setEventEmitter(b){return this.destroyEventEmitter(),this.privateEE=b===void 0,this.privateEE?this.events=new Map():b?this.events=b.events:this.events=null,this.lastEventInstance=null,this}getEventEmitter(){return this}clearEventEmitter(){return this.setEventEmitter(null),this}destroyEventEmitter(){return this.lastEventInstance=null,this.events&&this.privateEE&&(rk(this),this.events=null),this}on(b,d,f=this,i=!1){return this.lastEventInstance=null,this.events&&(this.lastEventInstance=Gh(this,b,d,f,i)),this}once(b,d,f=this){return this.lastEventInstance=null,this.events&&(this.lastEventInstance=vp(this,b,d,f)),this}off(b,d,f,i){return this.lastEventInstance=null,this.events&&wp(this,b,d,f,i),this}emit(b,...d){return this.lastEventInstance=null,this.events&&xp(this,b,...d),this}removeAllListeners(b){return this.lastEventInstance=null,this.events&&rk(this,b),this}clearEvent(b){return this.lastEventInstance=null,this.events&&yp(this,b),this}getListenerCount(b){return this.lastEventInstance=null,this.events?zp(this,b):0}getEventNames(){return this.lastEventInstance=null,this.events?Ap(this):[]}getListeners(b){return this.lastEventInstance=null,this.events?Bp(this,b):[]}}}const Db=px(class{});var ed;(function(a){a[a.no=0]="no",a[a.lazy=1]="lazy",a[a.always=2]="always"})(ed||(ed={}));const Ep="complete";class nk extends Db{constructor(a,{eventEmitter:b,tickingMode:d=ed.lazy}={}){super();this._isRunning=!1;this.tickingState=!1;this.parent=a,this.setEventEmitter(b),this.setTickingMode(d)}boot(){this.tickingMode===ed.always&&!this.tickingState&&this.startTicking()}shutdown(){this.destroyEventEmitter(),this.tickingState&&this.stopTicking()}setTickingMode(a){typeof a==="string"&&(a=ed[a]),this.tickingMode=a}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(a){if(this._isRunning===a)return;this._isRunning=a,this.tickingMode===ed.lazy&&a!=this.tickingState&&(a?this.startTicking():this.stopTicking())}start(){return this.isRunning=!0,this}pause(){return this.isRunning=!1,this}resume(){return this.isRunning=!0,this}stop(){return this.isRunning=!1,this}complete(a=Ep){this.isRunning=!1,this.emit(a,this.parent,this)}}class dx extends nk{constructor(a,{updater:b=a,isRunning:d=!1,timeScale:f=1,now:i=0,tickingMode:l=ed.lazy}={}){super(a,arguments[1]);this.updater=null;this.timeScale=1;this.now=0;this.parent=a,this.setUpdater(b),this.isRunning=d,this.timeScale=f,this.now=i,this.setTickingMode(l),this.boot()}resetFromJSON({isRunning:a=!1,timeScale:b=1,now:d=0,tickingMode:f=ed.lazy}={}){return this.isRunning=a,this.timeScale=b,this.now=d,this.setTickingMode(f),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}boot(){super.boot(),sc(this.parent,"destroy",this.destroy,this)}shutdown(){super.shutdown(),this.parent=void 0,this.updater=void 0}destroy(){this.shutdown()}setUpdater(a){return a instanceof Mc&&(a=a.world),a instanceof pi||a instanceof He?this.updater=a:this.updater=null,this}start(a=0){return this.now=a,super.start(),this}seek(a){return this.now=a,this}addDt(a){return a*=this.timeScale,this.now+=a,this}}class lk extends dx{startTicking(){this.update===null&&this.setUpdater(this.parent);if(this.update===null)return;super.startTicking(),this.updater&&sc(this.updater,"update",this.update,this)}stopTicking(){super.stopTicking(),this.updater&&qd(this.updater,"update",this.update,this)}update(a){return!this.isRunning||this.timeScale===0?this:(this.addDt(a),this)}}const BFa=Yb(Rm());const pn="receive";const dt={receive:pn};function et(a,b){(!a.sendToRef||a.sendToRef.key!==a.receiverID)&&(a.sendToRef=a.database.ref(a.rootPath).child(a.receiverID));if(b===void 0)return a.sendToRef.remove();let d={message:b,senderID:a.userID,stamp:a.stamp};return a.userName!==void 0&&(d.senderName=a.userName),a.skipFirst=!1,a.stamp=!a.stamp,a.sendToRef.set(d)}function ft(a){if(a.isReceiving&&a.receiverRef.key===a.receiverID)return;on(a),a.isReceiving=!0,a.skipFirst=!0,a.receiverRef=a.database.ref(a.rootPath).child(a.receiverID),a.receiverRef.on("value",ht,a),a.receiverRef.onDisconnect().remove()}function on(a){if(!a.isReceiving)return;a.isReceiving=!1,a.receiverRef.off("value",ht,a),a.receiverRef.remove(),a.receiverRef.onDisconnect().cancel()}function ht(a){if(this.skipFirst){this.skipFirst=!1;return}let b=a.val();if(b==null)return;delete b.stamp,this.history.add(b),this.emit(this.eventNames.receive,b)}class gt{constructor({maxLength:a=-1}={}){this.maxLength=a,this.records=[]}add(a){return this.maxLength===0?this:(this.records.push(a),this.maxLength>0&&this.records.length>this.maxLength&&this.records.shift(),this)}clear(){return this.records.length=0,this}changeUserName(a,b){return this.maxLength===0?this:(this.records.forEach(d=>{d.senderID===a&&(d.senderName=b)}),this)}}const mfa=Yb(jc());class Qf extends Db{constructor({eventEmitter:a,root:b="",senderID:d="",senderName:f,receiverID:i="",history:l=0,eventNames:q=dt}={}){super();this.setEventEmitter(a),this.eventNames=q,this.database=mfa.database(),this.setRootPath(b),this.skipFirst=!0,this.stamp=!1,this.userInfo={userID:"",userName:void 0},this.setSender(d,f),this.setReceiver(i),this.isReceiving=!1,l===!0?l=-1:l===!1&&(l=0),this.history=new gt({maxLength:l})}destroy(){this.stopReceiving().destroyEventEmitter()}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.rootPath=a,this.sendToRef=void 0,this.receiverRef=void 0,this}setSender(a,b){return typeof a==="string"?(this.userID=a,this.userName=b):this.userInfo=a,this}setReceiver(a){return this.receiverID=a,this}changeUserName(a,b){return a===this.userID&&(this.userName=b),this.history.changeUserName(a,b),this}getHistory(){return this.history.records}clearHistory(){return this.history.clear(),this}send(a){return et(this,a)}startReceiving(){return ft(this),this}stopReceiving(){return on(this),this}}const MA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function yj(a,b,d=MA){let f=b===void 0?a:_g(a,b),i="";for(let l=0;l<f;l++)i+=Mf(Array.from(d));return i}const yna=Yb(jc());var Ab;(function(a){a[a["1d"]=1]="1d",a[a["2d"]=2]="2d",a[a["3d"]=3]="3d"})(Ab||(Ab={}));const wn="init";const xn="update";const qn="addkey0";const rn="addkey1";const sn="addkey2";const yn="removekey0";const zn="removekey1";const An="removekey2";const tn="changekey0";const un="changekey1";const vn="changekey2";const it={init:wn,update:xn,addkey0:qn,removekey0:yn,changekey0:tn,addkey1:rn,removekey1:zn,changekey1:un,addkey2:sn,removekey2:An,changekey2:vn};function rx(a){return a==null||a===""||a.length===0}function LA(a,b,d={}){let f=a;if(!rx(b)){typeof b==="string"&&(b=b.split("."));let i;for(let l=0,q=b.length;l<q;l++){i=b[l];if(f[i]==null||typeof f[i]!=="object"){let u;l===q-1?u=d:u={},f[i]=u}f=f[i]}}return f}function sx(a,b,d){if(typeof a!=="object")return;if(rx(b)){if(d==null)return;typeof d==="object"&&(a=d)}else{typeof b==="string"&&(b=b.split("."));let f=b.pop(),i=LA(a,b);i[f]=d}return a}function Cp(a){if(typeof a!=="object"||a===null)return a;const b=Array.isArray(a)?[]:{};for(const d in a){const f=a[d];b[d]=Cp(f)}return b}class jt{constructor(){this.data={}}setValue(a,b){return a==null?this.clear():typeof a==="object"?this.data=a:sx(this.data,a,b),this}getValue(a){if(a==null)return this.data;{typeof a==="string"&&(a=a.split("."));let b=this.data;for(let d=0,f=a.length;d<f;d++){if(!Dp(b))return;b=b[a[d]]}return b}}cloneValue(a){return Cp(this.getValue(a))}removeKey(a){if(a==null)this.clear();else{typeof a==="string"&&(a=a.split("."));let b=a.pop(),d=this.data;for(let f=0,i=a.length;f<i;f++){if(!Dp(d))return this;d=d[a[f]]}Dp(d)&&delete d[b]}return this}clear(){return sk(this.data),this}incValue(a,b=1){let d=this.getValue(a);return typeof d!=="number"&&(d=0),this.setValue(a,d+b),this}mulValue(a,b){let d=this.getValue(a);return typeof d!=="number"&&(d=1),this.setValue(a,d*b),this}}function Dp(a){return a!=null&&typeof a==="object"}const Dga=Yb(jc());class Te extends Db{constructor({eventEmitter:a,parent:b,key:d,type:f,eventNames:i,table:l}={}){super();this.setEventEmitter(a),this.parent=b,this.children=new Map(),this.key=d,this.parent?this.fullKeyPath=tt(this.parent.fullKeyPath,this.key):this.fullKeyPath="",this.type=f,this.eventNames=i,this.table=l,this.database=Dga.database(),this.setRootPath()}destroy(){this.stopUpdate().clear().destroyEventEmitter()}setRootPath(a){if(a===void 0){let b=this.parent?this.parent.rootPath:"";a=`${b}/${this.key}`}this.rootPath=a,this.rootRef=a!==""?this.database.ref(a):void 0;for(const[b,d]of this.children)d instanceof Te&&d.setRootPath();return this}setData(a,b){if(arguments.length===0)this.clear();else if(typeof a=="string")this.setChildData(a,b);else{let d=a;for(const[f,i]of this.children)d.hasOwnProperty(f)||this.removeChild(f);for(let f in d)this.setChildData(f,d[f])}return this}clear(){this.table.removeKey(this.fullKeyPath);for(const[a,b]of this.children)this.removeChild(a);return this}get childClass(){return null}setChildData(a,b){const d=tt(this.fullKeyPath,a);this.table.setValue(d,b);if(!(typeof b!=="object")){if(this.children.has(a))this.children.get(a).setData(b);else if(this.childClass){let f=new this.childClass({parent:this,key:a,type:this.type,eventEmitter:this.eventEmitter,eventNames:this.eventNames,table:this.table});f.startUpdate(),this.children.set(a,f)}}return this}removeChild(a){return this.children.has(a)&&(this.children.get(a).destroy(),this.children.delete(a)),this}startUpdate(){return this}stopUpdate(){return this}}function tt(a,b){return a==null||a===""?b:b==null||b===""?a:`${a}.${b}`}class ch extends Te{startUpdate(){return this.rootRef.on("child_added",this.addCol,this),this.rootRef.on("child_removed",this.removeCol,this),this.rootRef.on("child_changed",this.changeColValue,this),this}stopUpdate(){return this.rootRef.off("child_added",this.addCol,this),this.rootRef.off("child_removed",this.removeCol,this),this.rootRef.off("child_changed",this.changeColValue,this),this}addCol(a){const b=a.key,d=a.val();this.setData(b,d);switch(this.type){case Ab["1d"]:this.emit(this.eventNames.addkey0,b,d);break;case Ab["2d"]:this.emit(this.eventNames.addkey1,this.key,b,d);break;default:this.emit(this.eventNames.addkey2,this.pageKey,this.key,b,d);break}this.emit(this.eventNames.update,this.table.data)}removeCol(a){const b=a.key;this.removeChild(b);switch(this.type){case Ab["1d"]:this.emit(this.eventNames.removekey0,b);break;case Ab["2d"]:this.emit(this.eventNames.removekey1,this.key,b);break;default:this.emit(this.eventNames.removekey2,this.pageKey,this.key,b);break}this.emit(this.eventNames.update,this.table.data)}changeColValue(a){const b=a.key,d=a.val();this.setData(b,d);switch(this.type){case Ab["1d"]:this.emit(this.eventNames.changekey0,b,d);break;case Ab["2d"]:this.emit(this.eventNames.changekey1,this.key,b,d);break;default:this.emit(this.eventNames.changekey2,this.pageKey,this.key,b,d);break}this.emit(this.eventNames.update,this.table.data)}get pageKey(){return this.parent.key}}class dh extends Te{startUpdate(){return this.rootRef.on("child_added",this.addRow,this),this.rootRef.on("child_removed",this.removeRow,this),this}stopUpdate(){return this.rootRef.off("child_added",this.addRow,this),this.rootRef.off("child_removed",this.removeRow,this),this}addRow(a){const b=a.key,d=a.val();this.setData(b,d);switch(this.type){case Ab["2d"]:this.emit(this.eventNames.addkey0,b,d);break;default:this.emit(this.eventNames.addkey1,this.key,b,d);break}}removeRow(a){const b=a.key;this.removeChild(b);switch(this.type){case Ab["2d"]:this.emit(this.eventNames.removekey0,b);break;default:this.emit(this.eventNames.removekey1,this.key,b);break}}get childClass(){return ch}}class Bn extends Te{startUpdate(){return this.rootRef.on("child_added",this.addPage,this),this.rootRef.on("child_removed",this.removePage,this),this}stopUpdate(){return this.rootRef.off("child_added",this.addPage,this),this.rootRef.off("child_removed",this.removePage,this),this}addPage(a){const b=a.key,d=a.val();this.setData(b,d),this.emit(this.eventNames.addkey0,b,d)}removePage(a){const b=a.key;this.removeChild(b),this.emit(this.eventNames.removekey0,b)}get childClass(){return dh}}const uj={};uj[Ab["1d"]]=ch;uj[Ab["2d"]]=dh;uj[Ab["3d"]]=Bn;function kt(a){return new uj[a.tableType]({type:a.tableType,eventEmitter:a.eventEmitter,eventNames:a.eventNames,table:a.table})}function lt(a){return a.updater.clear(),a.initialFlag=!1,a.rootRef.once("value").then(function(b){let d=b.val()??{};return a.table.setValue(d),a.emit(a.eventNames.init,d),a.initialFlag=!0,Promise.resolve(d)})}function cc(a,b,d,f){let i=a.rootRef;return i=b?i.child(b):i,i=d?i.child(d):i,i=f?i.child(f):i,i}function mt(a,...b){let d,f,i,l;switch(b.length){case 4:[d,f,i,l]=b;break;case 3:[d,f,l]=b;break;case 2:[d,l]=b;break;default:l=b[0];break}return cc(a,d,f,i).set(l)}function nt(a,...b){let d,f,i;switch(b.length){case 3:[d,f,i]=b;break;case 2:[d,f]=b;break;default:d=b[0];break}return cc(a,d,f,i).remove()}function ot(a,...b){let d,f,i,l;switch(b.length){case 4:[d,f,i,l]=b;break;case 3:[d,f,l]=b;break;case 2:[d,l]=b;break;default:l=b[0];break}return cc(a,d,f,i).transaction(function(q){return q===null&&(q=0),q+l})}function pt(a,...b){let d,f,i,l;switch(b.length){case 4:[d,f,i,l]=b;break;case 3:[d,f,l]=b;break;case 2:[d,l]=b;break;default:l=b[0];break}return cc(a,d,f,i).transaction(l)}function qt(a,b){return cc(a).update(b)}function rt(a,...b){let d,f,i;switch(b.length){case 3:[d,f,i]=b;break;case 2:[d,f]=b;break;case 1:d=b[0];break}return cc(a,d,f,i).onDisconnect().remove()}function st(a,...b){let d,f,i,l;switch(b.length){case 4:[d,f,i,l]=b;break;case 3:[d,f,l]=b;break;case 2:[d,l]=b;break;default:l=b[0];break}return cc(a,d,f,i).onDisconnect().set(l)}const Gfa=Yb(jc());class Rf extends Db{constructor({eventEmitter:a,root:b="",type:d=Ab["3d"],eventNames:f=it}={}){super();this.setEventEmitter(a),this.eventNames=f,this.database=Gfa.database(),this.table=new jt(),this.setTableType(d),this.setRootPath(b),this.initialFlag=!1}destroy(){this.updater.destroy(),this.destroyEventEmitter().stopUpdate()}setRootPath(a){return this.rootPath=a,this.rootRef=a!==""?this.database.ref(this.rootPath):null,this.updater.setRootPath(a),this}setTableType(a){return typeof a==="string"&&(a=Ab[a]),this.tableType=a,this.updater&&this.updater.destroy(),this.updater=kt(this),this}startUpdate(){return lt(this),this.updater.startUpdate(),this}stopUpdate(){return this.updater.stopUpdate(),this}clear(){return this.updater.clear(),this}getData(){return this.table.getValue(...arguments)}cloneData(){return this.table.cloneValue(...arguments)}getItemRef(a,b,d){return cc(this,a,b,d)}setData(...a){return mt(this,...a)}removeData(...a){return nt(this,...a)}incValue(...a){return ot(this,...a)}transaction(...a){return pt(this,...a)}updateData(a){return qt(this,a)}removeDataOnDisconnect(...a){return rt(this,...a)}setDataOnDisconnect(...a){return st(this,...a)}}const Ima=Yb(jc());var Ao;(function(a){a.d="d",a.w="w",a.m="m",a.y="y",a.a="a",a.day="d",a.week="w",a.month="m",a.year="y",a.all="a"})(Ao||(Ao={}));var mh;(function(a){a.d="tagD",a.w="tagW",a.m="tagM",a.y="tagY",a.a="tagA"})(mh||(mh={}));var nh;(function(a){a.d="scoreD",a.w="scoreW",a.m="scoreM",a.y="scoreY",a.a="scoreA"})(nh||(nh={}));var Au;(function(a){a.d="day",a.w="week",a.m="month",a.y="year",a.a="all"})(Au||(Au={}));function Eo({query:a,totalLines:b=Infinity,linesPerPage:d=1e3,startDocRef:f,startMode:i,forEachPageCallback:l,resolveCallback:q}){return Su({query:a,remainderLines:b,linesPerPage:d,startDocRef:f,startMode:i,forEachPageCallback:l,resolveCallback:q})}function Su(a){let b=a.query;a.startDocRef&&(b=b[a.startMode](a.startDocRef));let d=Math.min(a.remainderLines,a.linesPerPage);return a.remainderLines-=d,b.limit(d).get().then(function(f){let i=a.remainderLines===0||f.size<d,l=!1;a.forEachPageCallback&&(l=a.forEachPageCallback(f)||!1),i=i||l;if(i){let q;return a.resolveCallback&&(q=a.resolveCallback()),Promise.resolve(q)}else return a.startDocRef=f.docs[f.size-1],a.startMode="startAfter",Su(a)})}function hc(a,b=Infinity,d=0,f,i){let l=[],q=0;return Eo({query:a,totalLines:d+b,startDocRef:f,startMode:i,forEachPageCallback:function(u){let v,A=u.size,E=d-q;E<=0?v=u.docs:E<A&&(v=u.docs.slice(E,A)),v&&l.push(...v),q+=A},resolveCallback:function(){return l}})}const Npa=Yb(jc());function Ju(a,b,d=0){return hc(a.nextQuery,b,d,a.baselineDocRef,a.baselineMode).then(function(f){let i=f.length;return a.cacheItems=f,a.pageIndex=void 0,a.startItemIndex=d,a.endItemIndex=a.startItemIndex+i-1,a.isFullPage=b===void 0?!0:i===b,Promise.resolve(a.cacheItems)})}const lpa=Yb(jc());class Mj{constructor({query:a={next:void 0,previous:void 0},itemCount:b=100,baselineDoc:d,baselineMode:f="startAt"}={}){this.setQuery(a),this.setItemCount(b),this.setBaselineDoc(d,f),this.pageIndex=void 0,this.baselineDocRef=void 0,this.baselineMode="startAt",this.startItemIndex=void 0,this.endItemIndex=void 0,this.cacheItems=void 0,this.isFullPage=void 0}setQuery(a,b){if(a instanceof lpa.firestore.Query)this.nextQuery=a,this.prevQuery=b;else{var d=a;this.nextQuery=d.next,this.prevQuery=d.previous}return this.pageIndex=null,this.isFullPage=!0,this}setItemCount(a){return this.itemCount=a,this}setBaselineDoc(a,b){return a?(this.baselineDocRef=a.ref,this.baselineMode=b):this.baselineDocRef=void 0,this}load(a,b=0){return Ju(this,a,b)}loadFirstPage(){return this._loadFirstPage()}loadNextPage(){return this.pageIndex==null?this._loadFirstPage():this._loadNextPage()}loadPreviousPage(){return this.pageIndex==null||this.pageIndex===1?this._loadFirstPage():this._loadPreviousPage()}loadCurrentPage(){return this.pageIndex==null||this.pageIndex===0?this._loadFirstPage():this._loadCurrentPage()}}function Pu(a){return hc(a.nextQuery,a.itemCount,0,a.baselineDocRef,a.baselineMode).then(function(b){let d=b.length;return a.cacheItems=b,a.pageIndex=0,a.startItemIndex=0,a.endItemIndex=a.startItemIndex+d-1,a.isFullPage=d===a.itemCount,a.prevPageEndDocRef=null,a.currPageStartDocRef=b[0].ref,a.currPageEndDocRef=b[d-1].ref,Promise.resolve(a.cacheItems)})}function Ku(a){return hc(a.nextQuery,a.itemCount,0,a.baselineDocRef,a.baselineMode).then(function(b){let d=b.length;return a.cacheItems=b,a.pageIndex=0,a.startItemIndex=0,a.endItemIndex=a.startItemIndex+d-1,a.isFullPage=d===a.itemCount,Promise.resolve(a.cacheItems)})}function Qu(a){return hc(a.nextQuery,a.itemCount,0,a.currPageEndDocRef,"startAfter").then(function(b){let d=b.length;return a.cacheItems=b,a.pageIndex+=1,a.startItemIndex=a.endItemIndex+1,a.endItemIndex=a.startItemIndex+d-1,a.isFullPage=d===a.itemCount,a.prevPageEndDocRef=a.currPageEndDocRef,a.currPageStartDocRef=b[0].ref,a.currPageEndDocRef=b[d-1].ref,Promise.resolve(a.cacheItems)})}function Lu(a){let b=(a.pageIndex+1)*a.itemCount;return hc(a.nextQuery,a.itemCount,b,a.baselineDocRef,a.baselineMode).then(function(d){let f=d.length;return a.cacheItems=d,a.pageIndex+=1,a.startItemIndex=a.endItemIndex+1,a.endItemIndex=a.startItemIndex+f-1,a.isFullPage=f===a.itemCount,Promise.resolve(a.cacheItems)})}function Ru(a){return hc(a.prevQuery,a.itemCount+1,0,a.currPageStartDocRef,"startAfter").then(function(b){let d=b.length-1;return a.cacheItems=b,a.cacheItems.pop(),a.cacheItems.reverse(),a.pageIndex-=1,a.endItemIndex=a.startItemIndex-1,a.startItemIndex=a.endItemIndex-d+1,a.isFullPage=d===a.itemCount,a.prevPageEndDocRef=b[d].ref,a.currPageStartDocRef=b[d-1].ref,a.currPageEndDocRef=b[0].ref,Promise.resolve(a.cacheItems)})}function Mu(a){let b=(a.pageIndex-1)*a.itemCount;return hc(a.nextQuery,a.itemCount,b,a.baselineDocRef,a.baselineMode).then(function(d){let f=d.length;return a.cacheItems=d,a.pageIndex-=1,a.endItemIndex=a.startItemIndex-1,a.startItemIndex=a.endItemIndex-f+1,a.isFullPage=f===a.itemCount,Promise.resolve(a.cacheItems)})}function Ou(a){return hc(a.nextQuery,a.itemCount,0,a.prevPageEndDocRef,"startAfter").then(function(b){let d=b.length;return a.cacheItems=b,a.endItemIndex=a.startItemIndex+d-1,a.isFullPage=d===a.itemCount,a.currPageStartDocRef=b[0].ref,a.currPageEndDocRef=b[d-1].ref,Promise.resolve(a.cacheItems)})}function Nu(a){let b=a.pageIndex*a.itemCount;return hc(a.nextQuery,a.itemCount,b,a.baselineDocRef,a.baselineMode).then(function(d){let f=d.length;return a.cacheItems=d,a.endItemIndex=a.startItemIndex+f-1,a.isFullPage=f===a.itemCount,Promise.resolve(a.cacheItems)})}class Bo extends Mj{_loadFirstPage(){return Ku(this)}_loadNextPage(){return Lu(this)}_loadPreviousPage(){return Mu(this)}_loadCurrentPage(){return Nu(this)}}const loa=Yb(jc());class Lj extends Mj{_loadFirstPage(){return Pu(this)}_loadNextPage(){return Qu(this)}_loadPreviousPage(){return Ru(this)}_loadCurrentPage(){return Ou(this)}}const epa=Yb(jc());function Cu(a,b){let d={senderID:a.userID,message:b,timestamp:epa.firestore.FieldValue.serverTimestamp()};return a.userName!==void 0&&(d.senderName=a.userName),a.receiverID!==void 0&&(d.receiverID=a.receiverID),a.rootRef.add(d)}function Co(a,b=a.receiverID){let d=a.rootRef;return d=b!==void 0?d.where("receiverID","==",b):d,d}function Bu(a,b=a.receiverID){let d=Co(a,b),f=d.orderBy("timestamp"),i=d.orderBy("timestamp","desc");return{next:f,previous:i}}const Do="receive";function Du(a){let b=Co(a).orderBy("timestamp","desc").limit(1);a.unsubscribe=b.onSnapshot({includeMetadataChanges:!0},function(d){if(d.size>0){let f=d.docs[0];if(f.metadata.hasPendingWrites){a.skipFirst&&(a.skipFirst=!1);return}Hu(a,a.receiverID,f);if(a.skipFirst)a.skipFirst=!1;else{let i=Iu(f);a.cacheMessages.push(i),a.emit(Do,i)}}else a.skipFirst&&(a.skipFirst=!1)},function(d){debugger})}function Eu(a){a.unsubscribe&&a.unsubscribe(),a.resetQueryFlag=!0,a.cacheMessages.length=0}function Fu(a){return Hu(a),a.page.loadNextPage().then(function(b){let d=[];for(let f=0,i=b.length;f<i;f++)d.push(Iu(b[f]));return a.cacheMessages.splice(0,0,...d),Promise.resolve(d)})}function Hu(a,b=a.receiverID,d){if(!a.resetQueryFlag)return;a.resetQueryFlag=!1;let f=a.skipFirst?"startAt":"startAfter";a.page.setBaselineDoc(d,f).setQuery(Bu(a,b));return}function Iu(a){let b=a.data();return b.timestamp=b.timestamp.toDate(),b}const Xoa=Yb(jc());class Gu extends Db{constructor({eventEmitter:a,root:b="",senderID:d="",senderName:f="",receiverID:i,pageItemCount:l=100}={}){super();this.setEventEmitter(a),this.database=Xoa.firestore(),this.setRootPath(b),this.userInfo={userID:"",userName:void 0},this.setSender(d,f),this.setReceiver(i),this.skipFirst=!0,this.unsubscribe=void 0,this.page=new Lj(),this.setPageItemCount(l),this.resetQueryFlag=!0,this.cacheMessages=[]}destroy(){this.stopReceiving().destroyEventEmitter()}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.resetQueryFlag=this.resetQueryFlag||this.rootPath!==a,this.rootPath=a,this.rootRef=this.database.collection(a),this}setSender(a,b){return typeof a==="string"?(this.userID=a,this.userName=b):this.userInfo=a,this}setReceiver(a){return this.resetQueryFlag=this.resetQueryFlag||this.receiverID!==a,this.receiverID=a,this}setPageItemCount(a){return this.page.setItemCount(a),this}get hasPreviousMessage(){return this.page.isFullPage!==!1}send(a){return Cu(this,a)}startReceiving(){return Du(this),this}stopReceiving(){return Eu(this),this}loadPreviousMessages(){return Fu(this)}}const Fn="join";const Gn="leave";const In="init";const Hn="update";const En="changename";const Dn="change";const yt={join:Fn,leave:Gn,update:Hn,change:Dn,init:In,changename:En};var xd;(function(a){a[a.once=0]="once",a[a.child=1]="child",a[a.all=2]="all"})(xd||(xd={}));const ro="add";const to="remove";const so="change";const uo="update";const qu={add:ro,remove:to,update:uo,change:so};function Jj(a){a.items.length=0,a.itemID2Index.clear()}function ru(a){return a.items}function su(a,b){return a.itemID2Index.has(b)}function qo(a,b){return b==null?null:a.itemID2Index.get(b)}function tu(a,b){if(b==null)return null;let d=qo(a,b);return d==null?null:a.items[d]}function uu(a,b,d){a.items.forEach(b,d)}function _d(a){a.itemID2Index.clear();let b=a.items;for(var d=0,f=b.length;d<f;d++){let i=b[d][a.keyItemID];a.itemID2Index.set(i,d)}}function vo(a,b){let d=xo.call(this,a,b);_d(this),this.emit(this.eventNames.add,d),this.emit(this.eventNames.update,this.items)}function kh(a,b){let d=vu.call(this,a);_d(this);let f=xo.call(this,a,b);_d(this),this.emit(this.eventNames.change,f,d),this.emit(this.eventNames.update,this.items)}function wo(a){let b=vu.call(this,a);_d(this),this.emit(this.eventNames.remove,b),this.emit(this.eventNames.update,this.items)}function lh(a){Jj(this),a.forEach(function(b){xo.call(this,b,null,!0)}.bind(this)),_d(this),this.emit(this.eventNames.update,this.items)}function xo(a,b,d=!1){let f,i=this.getItemCallback,l=this.getItemCallbackScope;l?f=i.call(l,a):f=i(a);if(d)return this.items.push(f),f;if(b==null)this.items.unshift(f);else{let q=this.itemID2Index.get(b);q===this.items.length-1?this.items.push(f):this.items.splice(q+1,0,f)}return f}function vu(a){let b=this.itemID2Index.get(a.key),d=jh(this.items,b);return d}const yu={start(a,b){a.isUpdating=!1,b.once("value",lh,a)},stop(a){}};const xu={start(a,b){b.on("child_added",vo,a),b.on("child_removed",wo,a),b.on("child_moved",kh,a),b.on("child_changed",kh,a)},stop(a){a.query.off("child_added",vo,a),a.query.off("child_removed",wo,a),a.query.off("child_moved",kh,a),a.query.off("child_changed",kh,a)}};const wu={start(a,b){b.on("value",lh,a)},stop(a){a.query.off("value",lh,a)}};const ih={};ih[xd.all]=wu;ih[xd.child]=xu;ih[xd.once]=yu;class Ue extends Db{constructor({eventEmitter:a,itemIDKey:b="__itemID__",mode:d=xd.child,getItemCallback:f=Ez,getItemCallbackScope:i,query:l,eventNames:q=qu}={}){super();this.setEventEmitter(a),this.eventNames=q,this.isUpdating=!1,this.items=[],this.itemID2Index=new Map(),this.setItemIDKey(b),this.setMode(d),i===void 0&&(i=this),this.setGetitemCallback(f,i),this.setQuery(l)}destroy(){this.stopUpdate().clear()}setItemIDKey(a){return this.keyItemID=a,this}setMode(a){return typeof a==="string"&&(a=xd[a]),this.mode=a,this.updater=ih[a],this}setGetitemCallback(a,b){return this.getItemCallback=a,this.getItemCallbackScope=b,this}setQuery(a){return this.query=a,this}startUpdate(a){if(a)this.setQuery(a);else if(this.query)a=this.query;else return this;return this.stopUpdate().clear(),this.isUpdating=!0,this.updater.start(this,a),this}stopUpdate(){return!this.query||!this.isUpdating?this:(this.isUpdating=!1,this.updater.stop(this),this)}clear(){return Jj(this),this}getItems(){return ru(this)}hasItem(a){return su(this,a)}getItemIndexFromItemID(a){return qo(this,a)}getItemFromItemID(a){return tu(this,a)}forEach(a,b){return uu(this,a,b),this}updateItemID2Index(){return _d(this),this}}const Ez=function(a){let b=a.val();return b[this.keyItemID]=a.key,b};function Wd(a,b=a.userID){return a.userID2ItemID.has(b)}function vj(a,b=a.userID){if(!Wd(a,b))return null;let d=a.userID2ItemID.get(b);return a.rootRef.child(d)}function zt(a,b=a.userID){if(!Wd(a,b))return null;let d=a.userID2ItemID.get(b);return a.userList.getItemFromItemID(d)}function Cn(a){return a.userList.getItems()}function At(a){a.userList.clear()}function Bt(a,b,d){a.userList.forEach(b,d)}function Ct(a,b=a.userID){let d=a.userList.getItems()[0];return d&&d.userID===b}function Dt(a){return a.maxUsers===0?!1:a.userList.getItems().length>=a.maxUsers}function vt(a=0,b){return new Promise(function(d,f){setTimeout(function(){d(b)},a)})}function wt(a,b=a.userID,d=a.userName){if(Wd(a,b))return Promise.resolve();let f={userID:b,userName:d},i=a.maxUsers,l=a.database.ref(a.rootPath),q=l.push();return q.onDisconnect().remove().then(function(){return q.set(f)}).then(function(){return vt(0)}).then(function(){return i===0?(a.isInList=!0,Promise.resolve()):l.limitToFirst(i).once("value").then(function(u){return sz(u,b)?(a.isInList=!0,Promise.resolve()):(a.isInList=!1,q.remove().then(function(){return q.onDisconnect().cancel()}).then(function(){return Promise.reject()}))})})}function sz(a,b){let d=!1;return a.forEach(function(f){let i=f.val();if(i.userID===b)return d=!0,!0}),d}function xt(a,b=a.userID){if(!Wd(a,b))return Promise.resolve();let d=a.userID2ItemID.get(b),f=a.database.ref(a.rootPath).child(d);return f.remove()}function ut(a,b){return new Promise(function(d,f){let i=vj(a);if(i)return d(i);{let l=a.rootRef.orderByChild("userID").equalTo(a.userID);l.once("child_added").then(function(q){return d(q.ref)})}}).then(function(d){return d.child("userName").set(b)}).then(function(){return a.userName=b,Promise.resolve()})}const nha=Yb(jc());class Sf extends Db{constructor({eventEmitter:a,root:b="",userID:d="",userName:f="",maxUsers:i=0,eventNames:l=yt}={}){super();this.setEventEmitter(a),this.eventNames=l,this.database=nha.database(),this.setRootPath(b),this.userInfo={userID:"",userName:""},this.setUser(d,f),this.setMaxUsers(i),this.userList=new Ue({eventEmitter:this.eventEmitter,itemIDKey:"joinAt",eventNames:{add:l.join,remove:l.leave,update:l.update,change:l.change}}),this.isInList=!1,this.userID2ItemID=new Map(),this.userList.on(this.eventNames.join,function(q){this.userID2ItemID.set(q.userID,q.joinAt),q.userID===this.userInfo.userID&&this.emit(this.eventNames.init,Cn(this))},this).on(this.eventNames.leave,function(q){this.userID2ItemID.delete(q.userID),q.userID===this.userID&&(this.isInList=!1)},this).on(this.eventNames.change,function(q,u){let v=q.userID,A=q.userName,E=u.userName;A!==E&&this.emit(this.eventNames.changename,v,A,E)},this)}destroy(){this.stopUpdate().destroyEventEmitter().leave(),this.userList.destroy()}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.rootPath=a,this.rootRef=a!==""?this.database.ref(this.rootPath):void 0,this}setUser(a,b){return typeof a==="string"?(this.userID=a,this.userName=b):this.userInfo=a,this}setMaxUsers(a){return this.maxUsers=a,this}clear(){return At(this),this}forEach(a,b){return Bt(this,a,b),this}isFull(){return Dt(this)}isFirstUser(a=this.userID){return Ct(this,a)}getUser(a=this.userID){return zt(this,a)}getUsers(){return Cn(this)}getUserRef(a=this.userID){return vj(this,a)}contains(a=this.userID){return Wd(this,a)}join(a=this.userID,b=this.userName){return wt(this,a,b)}leave(a=this.userID){return xt(this,a)}changeUserName(a){return ut(this,a)}startUpdate(){let a=this.rootRef;return this.maxUsers>0&&(a=a.limitToFirst(this.maxUsers)),this.userList.startUpdate(a),this}stopUpdate(){return this.userList.stopUpdate(),this}}const Ve="room.join";const Yd="room.leave";const Yn="userlist.join";const Zn="userlist.leave";const $n="userlist.init";const _n="userlist.update";const fh="userlist.changename";const Jn="broadcast.receive";function Nn(a){return`tables.${a}.init`}function On(a){return`tables.${a}.update`}function Pn(a){return`tables.${a}.addkey0`}function Qn(a){return`tables.${a}.addkey1`}function Rn(a){return`tables.${a}.addkey2`}function Sn(a){return`tables.${a}.removekey0`}function Tn(a){return`tables.${a}.removekey1`}function Un(a){return`tables.${a}.removekey2`}function Vn(a){return`tables.${a}.changekey0`}function Wn(a){return`tables.${a}.changekey1`}function Xn(a){return`tables.${a}.changekey2`}const Kn="roomlist.add";const Ln="roomlist.remove";const Mn="roomlist.update";function Qt(a){const b=new Sf({eventEmitter:a.eventEmitter,eventNames:{join:Yn,leave:Zn,update:_n,change:"userlist.change",init:$n,changename:fh},userID:a.userInfo});return b.on("userlist.leave",function(d){d.userID===a.userID&&xz(a)}),a.on(Ve,function(){b.startUpdate()}).on(Yd,function(){b.stopUpdate().clear()}),b}function xz(a){a.emit(Yd),setTimeout(function(){a.roomID=void 0,a.roomName=void 0,a.doorState=void 0,a.leftRoomFlag=!1},0)}function Nt(a){const b=new Ue({eventEmitter:a.eventEmitter,itemIDKey:"roomID",eventNames:{update:Mn,add:Kn,remove:Ln,change:"roomlist.change"},mode:"once"});return b}function Xt(a){return a.split("|")[0]}function Wt(a){return a.split("|")[1]}function Tf(a,b=""){return`${a}|${b}`}function Rc(a,b){let d=a.rootRef;return b&&(d=d.child(b)),d}function gh(a,b,d){let f=Rc(a,"rooms");return b!==void 0&&(f=f.child(b),d!==void 0&&(f=f.child(d))),f}function Mt(a,b){return gh(a,b,"alive")}function Rt(a,b){return gh(a,b,"users")}function eh(a,b){let d=Rc(a,"room-filters");return b!==void 0&&(d=d.child(b)),d}function Uf(a,b){let d=Rc(a,"room-metadata");return b!==void 0&&(d=d.child(b)),d}function xj(a,b,d){let f=`${a.rootPath}/rooms/${b}`;return d&&(f+=`/${d}`),f}function Aj(a,b){return xj(a,b,"users")}function Ot(a,b,d){let f=xj(a,b,"tables");return d&&(f+=`/${d}`),f}function St(a,b,d="open"){let f=eh(a);return f=f.orderByChild("filter"),b===void 0?f=f.startAt(d).endAt(`${d}~`):f=f.equalTo(Tf(d,b)),f}function Jt(a,b){if(b)b===!0&&(b={history:!1});else return null;const d=new Qf({eventEmitter:a.eventEmitter,eventNames:{receive:Jn},receiverID:"boradcast",senderID:a.userInfo,history:b.history});return a.on(Ve,function(f){d.setRootPath(xj(a,f.roomID)).startReceiving()}).on(Yd,function(){d.stopReceiving()}).on(fh,function(f,i){d.changeUserName(f,i)}),d}function Pt(a,b){const d=new Map();return b?(b.forEach(f=>{d.set(f.key,wz(a,f))}),a.on(Ve,function(f){for(const[i,l]of d)l.setRootPath(Ot(a,f.roomID,i)).startUpdate()}).on(Yd,function(){for(const[f,i]of d)i.stopUpdate().clear()}),d):d}function wz(a,{key:b,type:d=Ab["1d"]}){const f=new Rf({eventEmitter:a.eventEmitter,type:d,eventNames:{init:Nn(b),update:On(b),addkey0:Pn(b),removekey0:Sn(b),changekey0:Vn(b),addkey1:Qn(b),removekey1:Tn(b),changekey1:Wn(b),addkey2:Rn(b),removekey2:Un(b),changekey2:Xn(b)}});return f}function oc(a,b=a.roomID,d=a.roomName){return{roomID:b,roomName:d}}function Ej(a,b){return b===void 0?a.roomID!==void 0:a.roomID===b}function _t(a){return a.userList.isFull()}function $t(a,b=a.userID){return a.userList.isFirstUser(b)}function au(a){return a.userList.getUsers()}function Bj(a,b,d,f){a.roomID=b,a.roomName=d,a.roomType=f,a.emit("room.join",oc(a))}function zj(a,b={}){return b.roomID==null&&(b.roomID=gh(a).push().key),uz(a,b.roomID).then(function(){return vz(a,b)})}function uz(a,b){return Mt(a,b).transaction(function(d){return d===null?!0:void 0})}function vz(a,{roomID:b,roomName:d="",roomType:f="",maxUsers:i=0,presisted:l=!1,door:q="open",join:u=!0,filterData:v}){let A=gh(a,b),E=eh(a,b),H=Uf(a,b);a.isRemoveRoomWhenLeft=!l,a.isRemoveRoomWhenLeft&&(A.onDisconnect().remove(),E.onDisconnect().remove(),H.onDisconnect().remove());const Q=Tf(q,f),J={},S={filter:Q,name:d};v&&(S.data=v),J[`room-filters/${b}`]=S;const aa={name:d,filter:Q,maxUsers:i,moderators:{}};return aa.moderators[a.userID]=a.userName,J[`room-metadata/${b}`]=aa,new Promise(function(X,ga){if(u){const ja=a.userList.setRootPath(Aj(a,b)).setMaxUsers(0).join();return a.userList.setMaxUsers(i),ja.then(X,ga)}else return X()}).then(function(){return Rc(a).update(J)}).then(function(){return a.isRoomCreator=!0,u&&Bj(a,b,d,f),Promise.resolve(oc(a))})}function Kt(a,{digits:b=10,candidates:d="0123456789",retry:f=1e3}){let i=arguments[1];return Lt(a,b,d,f,i)}function Lt(a,b,d,f,i){return i.roomID=yj(b,b,d),f<=0?Promise.reject(i):(f--,zj(a,i).catch(function(){return Lt(a,b,d,f,i)}))}function Fj(a,b=a.roomID){const d={};d[`room-filter/${b}`]=null,d[`room-metadata/${b}`]=null,d[`rooms/${b}`]=null;const f=oc(a);return Rc(a).update(d).then(function(){return Promise.resolve(f)})}function Vf(a){if(!Ej(a))return Promise.resolve(oc(a));a.leftRoomFlag=!0;if(a.isRemoveRoomWhenLeft)return Fj(a);{const b=oc(a);return a.userList.leave().then(function(){return Promise.resolve(b)})}}function Dj(a,{leftThenJoin:b=!0,roomID:d}){return b?Vf(a).then(function(){return Yt(a,d)}):Yt(a,d)}function Yt(a,b){return b==null?Promise.reject(oc(a,b,"")):(a.isRemoveRoomWhenLeft=!1,yz(a,b).then(function(d){return a.userList.setRootPath(Aj(a,b)).setMaxUsers(d.maxUsers).join().then(function(){return Promise.resolve(d)})}).then(function(d){return Bj(a,b,d.name,Wt(d.filter)),Promise.resolve(oc(a))}))}function yz(a,b){return Uf(a,b).once("value").then(function(d){let f=d.val();return zz(a,f)?Promise.resolve(f):Promise.reject()})}function zz(a,b){if(b==null)return!1;if(Xt(b.filter)==="closed")return!1;const d=a.userID;if(b.moderators[d])return!0;switch(b.permission){case"blocklist":const f=b.blocklist;return!(f&&f[d]);case"allowlist":const i=b.allowlist;return i&&i[d];default:return!0}}function Cj(a,b,d){return new Promise(function(f,i){a.roomList.once("roomlist.update",function(l){f(l)}).startUpdate(St(a,b,d))})}function Ut(a,{roomType:b="",leftThenJoin:d=!0}={}){return Cj(a,b,"open").then(function(f){if(f.length===0)return Promise.reject("No filtered room");Se(f);const i={leftThenJoin:d,roomID:""};return Vt(a,i,f)})}function Vt(a,b,d,f=0){return f===d.length?Promise.reject("Can't join any room"):(b.roomID=d[f].roomID,f++,Dj(a,b).catch(function(){return Vt(a,b,d,f)}))}function Zt(a,b){return a.userList.contains(b)?b===a.userID?Vf(a):a.userList.leave(b):Promise.resolve()}function Xd(a,b){return b===a.roomID?Promise.resolve(!0):Uf(a,b).once("value").then(function(d){const f=d.val()!==null;return Promise.resolve(f)})}function wj(a,b,d=a.roomID){return Xd(a,d).then(function(f){if(!f)return Promise.resolve();const i=Tf(b,a.roomType),l={};return l[`room-filters/${d}/filter`]=i,l[`room-metadata/${d}/filter`]=i,Rc(a).update(l)})}function Gt(a,b=a.roomID){return wj(a,"open",b)}function Ht(a,b=a.roomID){return wj(a,"closed",b)}function Et(a,b,d=a.roomID){return Xd(a,d).then(function(f){return f?eh(a,d).child("data").update(b):Promise.resolve()})}function It(a,b){return a.userList.changeUserName(b)}function Ft(a,b,d=a.roomID){return Xd(a,d).then(function(f){if(!f)return Promise.resolve();const i={};return i[`room-filters/${d}/name`]=b,i[`room-metadata/${d}/name`]=b,Rc(a).update(i)})}function Tt(a,b=a.roomID){return b===a.roomID?a.userList.getUsers():new Promise(function(d,f){const i=new Ue({itemIDKey:"joinAt",mode:"once"});i.once("update",function(l){d(l)}).startUpdate(Rt(a,b))})}const _ia=Yb(jc());class bu extends Db{constructor({eventEmitter:a,root:b="",userID:d="",userName:f="",broadcast:i=!0,tables:l=!1}={}){super();this.setEventEmitter(a),this.database=_ia.database(),this.setRootPath(b),this.userInfo={userID:"",userName:""},this.setUser(d,f),this.isRoomCreator=!1,this.roomID=void 0,this.roomName=void 0,this.roomType=void 0,this.doorState=void 0,this.leftRoomFlag=!1,this.isRemoveRoomWhenLeft=void 0,this.userList=Qt(this),this.roomList=Nt(this),this.broadcast=Jt(this,i),this.tables=Pt(this,l)}destroy(){var a=this;this.destroyEventEmitter().leaveRoom().then(function(){a.userList.destroy(),a.userList=void 0,a.roomList.destroy(),a.roomList=void 0,a.broadcast.destroy(),a.broadcast=void 0})}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.rootPath=a,this.rootRef=a!==""?this.database.ref(this.rootPath):void 0,this}getRoomInfo(a,b){return oc(this,a,b)}setUser(a,b){return typeof a==="string"?(this.userID=a,this.userName=b):this.userInfo=a,this}isInRoom(a){return Ej(this,a)}isFull(){return _t(this)}isFirstUser(a=this.userID){return $t(this,a)}getUsers(){return au(this)}get maxUsers(){return this.userList.maxUsers}getTable(a){return this.tables.get(a)}createRoom(a){return zj(this,a)}createRandomRoom(a={}){return Kt(this,a)}joinRoom(a){return Dj(this,a)}joinRandomRoom(a={}){return Ut(this,a)}leaveRoom(){return Vf(this)}removeRoom(a=this.roomID){return Fj(this,a)}kickUser(a){return Zt(this,a)}changeRoomState(a,b=this.roomID){return wj(this,a,b)}openRoom(a=this.roomID){return Gt(this,a)}closeRoom(a=this.roomID){return Ht(this,a)}changeUserName(a){return It(this,a)}changeFilterData(a,b=this.roomID){return Et(this,a,b)}changeRoomName(a,b,d=a.roomID){return Ft(this,b,d)}getUserList(a=this.roomID){return Tt(this,a)}getRoomList(a,b){return Cj(this,a,b)}HasRoom(a){return Xd(this,a)}}function iu(a,b){let d=a.rootPath;return b&&(d+=`/${b}`),d}function gu(a){return iu(a,"users")}function eu(a,b){return`${iu(a,"tables")}/${b}`}const wd="room.join";const Zd="room.leave";const no="userlist.join";const Gj="userlist.leave";const po="userlist.init";const oo="userlist.update";const hh="userlist.changename";const ao="broadcast.receive";function bo(a){return`tables.${a}.init`}function co(a){return`tables.${a}.update`}function eo(a){return`tables.${a}.addkey0`}function fo(a){return`tables.${a}.addkey1`}function go(a){return`tables.${a}.addkey2`}function ho(a){return`tables.${a}.removekey0`}function io(a){return`tables.${a}.removekey1`}function jo(a){return`tables.${a}.removekey2`}function ko(a){return`tables.${a}.changekey0`}function lo(a){return`tables.${a}.changekey1`}function mo(a){return`tables.${a}.changekey2`}function hu(a,b=0){const d=new Sf({eventEmitter:a.eventEmitter,eventNames:{join:no,leave:Gj,update:oo,change:"userlist.change",init:po,changename:hh},root:gu(a),userID:a.userInfo,maxUsers:b});return d.on(Gj,function(f){f.userID===a.userID&&Cz(a)}),a.on(wd,function(){d.startUpdate()}).on(Zd,function(){d.stopUpdate().clear()}),d}function Cz(a){a.emit(Zd),setTimeout(function(){a.leftRoomFlag=!1},0)}function du(a,b){if(b)b===!0&&(b={history:!1});else return null;const d=new Qf({eventEmitter:a.eventEmitter,eventNames:{receive:ao},receiverID:"broadcast",senderID:a.userInfo,history:b.history});return a.on(wd,function(){d.setRootPath(a.rootPath).startReceiving()}).on(Zd,function(){d.stopReceiving()}).on(hh,function(f,i){d.changeUserName(f,i)}),d}function fu(a,b){const d=new Map();return b?(b.forEach(f=>{d.set(f.key,Bz(a,f))}),a.on(wd,function(){for(const[f,i]of d)i.setRootPath(eu(a,f)).startUpdate()}).on(Zd,function(){for(const[f,i]of d)i.stopUpdate().clear()}),d):d}function Bz(a,{key:b,type:d=Ab["1d"]}){const f=new Rf({eventEmitter:a.eventEmitter,type:d,eventNames:{init:bo(b),update:co(b),addkey0:eo(b),removekey0:ho(b),changekey0:ko(b),addkey1:fo(b),removekey1:io(b),changekey1:lo(b),addkey2:go(b),removekey2:jo(b),changekey2:mo(b)}});return f}function Ij(a){return a.userList.isInList}function mu(a){return a.userList.isFull()}function nu(a,b=a.userID){return a.userList.isFirstUser(b)}function ou(a){return a.userList.getUsers()}function ku(a){return a.userList.join().then(function(){return a.emit(wd),Promise.resolve()})}function Hj(a){return Ij(a)?(a.leftRoomFlag=!0,a.userList.leave()):Promise.resolve()}function ju(a){return a.userList.getUsers()}function lu(a,b){return a.userList.contains(b)?b===a.userID?Hj(a):a.userList.leave(b):Promise.resolve()}function cu(a,b){return a.userList.changeUserName(b)}const Mka=Yb(jc());class pu extends Db{constructor({eventEmitter:a,root:b="",userID:d="",userName:f="",maxUsers:i=0,broadcast:l=!0,tables:q=!1}={}){const u=arguments[0];super();this.setEventEmitter(a),this.database=Mka.database(),this.setRootPath(b),this.userInfo={userID:"",userName:""},this.setUser(d,f),this.leftRoomFlag=!1,this.userList=hu(this,i),this.broadcast=du(this,l),this.tables=fu(this,q)}shutdown(){}destroy(){this.shutdown()}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.rootPath=a,this.rootRef=a!==""?this.database.ref(this.rootPath):void 0,this}setUser(a,b){return typeof a==="string"?(this.userID=a,this.userName=b):this.userInfo=a,this}isInRoom(){return Ij(this)}isFull(){return mu(this)}isFirstUser(a=this.userID){return nu(this,a)}getUsers(){return ou(this)}get maxUsers(){return this.userList.maxUsers}getTable(a){return this.tables.get(a)}joinRoom(){return ku(this)}leaveRoom(){return Hj(this)}getUserList(){return ju(this)}kickUser(a){return lu(this,a)}changeUserName(a){return cu(this,a)}}const op="statechange";function pp(a){return`exit_${a.toString()}`}function qp(a){return`enter_${a.toString()}`}class Xw extends Db{constructor({eventEmitter:a}={}){super();this._states=new Map();this.enable=!0;this.setEventEmitter(a)}destroy(){this.destroyEventEmitter()}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(a=!0){return this.enable=a,this}getState(a){return this._states.get(a)}addState(a){return this._states.set(a.name,a),this}addStates(a){for(let b=0,d=a.length;b<d;b++)this.addState(a[b]);return this}removeState(a){return this._states.delete(a),this}removeAllStates(){return this._states.clear(),this}set state(a){if(!this.enable||this._stateLock)return;if(this._state===a)return;this._prevState=this._state,this._state=a,this._stateLock=!0,this.emit(op,this);if(this._prevState!=null){const b=this.getState(this._prevState);b&&b.exit&&b.exit(this),this.emit(pp(this._prevState),this)}this._stateLock=!1;if(this._state!=null){const b=this.getState(this._state);b&&b.enter&&b.enter(this),this.emit(qp(this._state),this)}}get state(){return this._state}get prevState(){return this._prevState}get stateList(){return Array.from(this._states.keys())}start(a){return this._start=a,this._prevState=void 0,this._state=a,this}goto(a){return a!=null&&(this.state=a),this}next(){const a=this.getState(this.state);if(!a||!a.next)return this;let b;return typeof a.next==="string"?b=a.next:b=a.next(this),this.goto(b),this}update(a,b,d="update"){const f=this.getState(this.state);f&&f[d]&&f[d](this,a,b)}preupdate(a,b){this.update(b,a,"preupdate")}postupdate(a,b){this.update(b,a,"postupdate")}}var rp;(function(a){a[a.shuffle=0]="shuffle",a[a.random=1]="random"})(rp||(rp={}));const up="die";class Yw extends lk{constructor(a,{lifeTime:b=1e3,destroy:d=!0}={}){super(a,arguments[1]);this.setLifeTime(b),this.setDestroyMode(d)}resetFromJSON({lifeTime:a=1e3,destroy:b=!0}={}){return super.resetFromJSON(arguments[0]),this.setLifeTime(a),this.setDestroyMode(b),this}toJSON(){const a=super.toJSON();return a.lifeTime=this.lifeTime,a.destroy=this.destroyMode,a}setLifeTime(a){return this.lifeTime=a,this}addToLifeTime(a){return this.lifeTime+=a,this}setDestroyMode(a=!0){return this.destroyMode=a,this}get isAlive(){return this.now<this.lifeTime}get remainder(){let a=this.lifeTime-this.now;return a<0&&(a=0),a}update(a){return this.isRunning?(super.update(a),this.isAlive||(this.complete(up),this.destroyMode&&this.gameObject.destroy&&this.gameObject.destroy()),this):this}get gameObject(){return this.parent}}class mk{constructor(a,b,d,f,i){this.key=a,this.start=b,this.end=d,this.step=f,this.items=i,this._current=b}reset(){this._current=this.start}get isEnd(){return this.step>=0?this._current>=this.end:this._current<=this.end}get length(){return this.step>=0&&this.start>this.end||this.step<0&&this.start<this.end?0:Math.floor(this.end-this.start)+1}next(){return this.isEnd?this._current=this.start:this._current+=this.step,this}get current(){return this.items?this.items[this._current]:this._current}}class _w{constructor(){this.indexes=[];this.length=0;this.firstPass=!0;this.currentCount=0}reset(){for(let a=0,b=this.indexes.length;a<b;a++)this.indexes[a].reset();return this.firstPass=!0,this.currentCount=0,this}addNumberLoop(a,b,d,f=d>=b?1:-1){return this.indexes.push(new mk(a,b,d,f)),this.length=this._getLength(),this}addItemsLoop(a,b,d=!1){const f=b.length-1,i=d?f:0,l=d?0:f,q=d?-1:1;return this.indexes.push(new mk(a,i,l,q,b)),this.length=this._getLength(),this}addLoop({key:a,start:b,end:d,step:f,items:i}){return this.indexes.push(new mk(a,b,d,f,i)),this.length=this._getLength(),this}removeLoops(){return this.indexes.length=0,this.length=0,this}_getLength(){let a=this.indexes[0]?.length;for(let b=1,d=this.indexes.length;b<d;b++)a*=this.indexes[b].length;return a??0}get progress(){return this.currentCount/this.length}get isEnd(){for(let a=this.indexes.length-1;a>=0;a--)if(!this.indexes[a].isEnd)return!1;return!0}next(){for(let a=this.indexes.length-1;a>=0;a--){const b=this.indexes[a],d=b.isEnd;b.next();if(!d)break}return this}getCurrent(a={}){for(let b=this.indexes.length-1;b>=0;b--){const d=this.indexes[b];a[d.key]=d.current}return a}getNext(a={}){return this.firstPass?this.firstPass=!1:this.next(),this.getCurrent(a),this.currentCount++,a}}const kp="tickstart";const lp="tickend";const DA=1e3/60;class Zw extends nk{constructor(a,{callback:b,scope:d,deltaPercentage:f=1}={}){super(a,arguments[1]);this.deltaPercentage=1;this.loopIndexGenerator=new _w();this.currentIndexes={};this.scene=a,this.setCallback(b,d),this.setDeltaPercentage(f),this.boot()}boot(){super.boot(),xe(this.scene,"shutdown",this.destroy,this)}shutdown(){super.shutdown(),this.scene=void 0}destroy(){this.shutdown()}startTicking(){super.startTicking(),sc(this.scene,"update",this.preupdate,this)}stopTicking(){super.stopTicking(),this.scene&&qd(this.scene,"update",this.preupdate,this)}setCallback(a,b){return this.callback=a,this.scope=b,this}setDeltaPercentage(a){return this.deltaPercentage=a,this}addNumberLoop(a,b,d,f){return this.loopIndexGenerator.addNumberLoop(a,b,d,f),this}addItemsLoop(a,b,d=!1){return this.loopIndexGenerator.addItemsLoop(a,b,d),this}addLoop(a){return this.loopIndexGenerator.addLoop(a),this}get curTime(){return new Date().getTime()}get progress(){return this.loopIndexGenerator.progress}preupdate(){if(!this.callback)return;const a=this.curTime,b=DA*this.deltaPercentage;let d;this.emit(kp);do{if(this.loopIndexGenerator.isEnd){this.complete();return}this.currentIndexes=this.loopIndexGenerator.getNext(this.currentIndexes),this.scope?this.callback.call(this.scope,this.currentIndexes,this):this.callback(this.currentIndexes,this),d=this.curTime-a>=b}while(!d);this.emit(lp)}}const zFa=Yb(vx());var sp;(function(a){a[a.none=0]="none",a[a.base64=1]="base64",a[a.utf16=2]="utf16",a[a.uri=3]="uri"})(sp||(sp={}));let NA=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i;function Pf(a){let b;return a===""?b=null:NA.test(a)?b=parseFloat(a):a==="false"?b=!1:a==="true"?b=!0:b=a,b}const RAa=Yb(Rm());function $w(a,{delimiter:b=",",convert:d=!0,types:f={}}={}){const i=RAa.default.parse(a,{header:!0,delimiter:b}).data,l=f.question??"q",q=f.option??"",u=d===!0?Pf:d,v=[];let A,E;for(let H=0,Q=i.length;H<Q;H++){let J=i[H],S=J.type;delete J.type,S===l?(A=J,A.key===""&&delete A.key,bx(A,u),A.options=[],v.push(A)):S===q&&(A&&(E=J,E.key===""&&delete E.key,bx(E,u),A.options.push(E)))}return v}function bx(a,b){const d=a;if(!b)return d;for(const f in a)d[f]=b(a[f],f);return d}function np(a,b,d){typeof b==="string"&&(b=$w(b,d));if(Array.isArray(b))for(let f=0,i=b.length;f<i;f++)ax(a,b[f]);else ax(a,b)}function ax(a,b){const d=b.options;if(d)for(let f=0,i=d.length;f<i;f++){let l=d[f];l.hasOwnProperty("key")||(l.key=`_${f}`)}b.hasOwnProperty("key")||(b.key=`_${a.questions.size}`),a.questions.set(b.key,b)}class mp{constructor({questions:a}={}){this.questions=new Map();a&&np(this,a,arguments[0])}add(a,b){return np(this,a,b),this}remove(a){return this.questions.delete(a),this}removeAll(){return this.questions.clear(),this}has(a){return this.questions.has(a)}get(a){return this.questions.get(a)}getKeys(a=[]){const b=this.questions.keys();for(const d of b)a.push(d);return a}getOption(a,b){typeof a==="string"&&(a=this.get(a));if(!a)return null;const d=a.options;if(d)for(let f=0,i=d.length;f<i;f++){let l=d[f];if(l.key===b)return l}return null}}const ok="quest";class EA extends Db{constructor(a,{eventEmitter:b,shuffleQuestions:d=!1,shuffleOptions:f=!1}={}){super();this.questionKeys=[];this.setEventEmitter(b),rj(a)&&(a=new mp(a)),this.questionsManager=a,this.setShuffleQuestionsEnable(d),this.setShuffleOptionsEnable(f),this.init()}setShuffleQuestionsEnable(a=!0){return this.shuffleQuestionsEnable=a,this}setShuffleOptionsEnable(a=!0){return this.shuffleOptionsEnable=a,this}init(){return this.questionKeys.length=0,this.questionsManager.getKeys(this.questionKeys),this.shuffleQuestionsEnable&&Se(this.questionKeys),this.nextIndex=-1,this.nextKey=void 0,this}setNextKey(a){return a===void 0?(this.nextIndex++,this.nextKey=this.questionKeys[this.nextIndex]):this.questionsManager.has(a)&&(this.nextKey=a,this.nextIndex=this.questionKeys.indexOf(a)),this}setPrevKey(){return this.nextIndex--,this.nextKey=this.questionKeys[this.nextIndex],this}getQuestion(){const a=this.questionsManager.get(this.nextKey);if(a&&this.shuffleOptionsEnable){const b=a.options;b&&Se(b)}return a}getNextQuestion(a){return this.setNextKey(a).getQuestion()}getPrevQuestion(){return this.setPrevKey().getQuestion()}getOption(a,b){return b===void 0&&(b=a,a=this.getQuestion()),this.questionsManager.getOption(a,b)}next(a){const b=this.getNextQuestion(a);return b&&this.emit(ok,b,this,this.questionsManager),this}prev(){const a=this.getPrevQuestion();return a&&this.emit(ok,a,this,this.questionsManager),this}restart(a){return this.init(),this.next(a),this}get isLastQuestion(){return this.nextIndex===this.questionKeys.length-1}}var nn;(function(a){a[a.ascending=0]="ascending",a[a.descending=1]="descending",a[a.logical_ascending=2]="logical_ascending",a[a.logical_descending=3]="logical_descending"})(nn||(nn={}));class yx extends pi{constructor(){super();rl("icon",{width:32,height:32,fillStyle:"white"});const a=new Cg.GridSizer({width:600,height:600,column:10,row:10,columnProportions:1,rowProportions:1,space:{left:10,right:10,top:10,bottom:10,column:10,row:10}});a.addBackground(gr("icon",void 0,1644912)),a.forEachEmptyGrid(function(d,f,i){i.add(gr("icon",void 0,sl(0,16777216)),{column:d,row:f})}),a.layout().setPosition(400,300);const b=new ql(this);se(b,a)}}function gr(a,b,d){const f=new Lc(0,0,a,b);return d!==void 0&&fr(d,f),f}new er(pl(),oi(800,600),mi("game"),ol(2960685),ni(yx));})();
/* @license
Papa Parse
v5.3.0
https://github.com/mholt/PapaParse
License: MIT
*/
/*!
 * Chart.js v2.9.4
 * https://www.chartjs.org
 * (c) 2020 Chart.js Contributors
 * Released under the MIT License
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! moment.js
//! momentjs.com
//! version : 2.29.1
