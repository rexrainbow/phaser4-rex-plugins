(()=>{var Qj=Object.defineProperty,bw=Object.prototype.hasOwnProperty,Ec=(a,c)=>()=>(c||(c={exports:{}},a(c.exports,c)),c.exports),cw=a=>Qj(a,"__esModule",{value:!0}),_d=(a,c)=>{cw(a);for(var d in c)Qj(a,d,{get:c[d],enumerable:!0})},$y=(a,c)=>{cw(a);if(typeof c==="object"||typeof c==="function")for(let d in c)bw.call(c,d)&&!bw.call(a,d)&&d!=="default"&&Qj(a,d,{get:()=>c[d],enumerable:!0});return a},Rb=a=>a&&a.__esModule?a:$y(Qj({},"default",{value:a,enumerable:!0}),a);var Pq=Ec((a,c)=>{(function(d,f){typeof a==="object"&&typeof c!=="undefined"?c.exports=f():typeof define==="function"&&define.amd?define(f):d.moment=f()})(a,function(){"use strict";var d;function f(){return d.apply(null,arguments)}function i(j){d=j}function l(j){return j instanceof Array||Object.prototype.toString.call(j)==="[object Array]"}function q(j){return j!=null&&Object.prototype.toString.call(j)==="[object Object]"}function u(j,n){return Object.prototype.hasOwnProperty.call(j,n)}function v(j){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(j).length===0;{var n;for(n in j)if(u(j,n))return!1;return!0}}function A(j){return j===void 0}function E(j){return typeof j==="number"||Object.prototype.toString.call(j)==="[object Number]"}function H(j){return j instanceof Date||Object.prototype.toString.call(j)==="[object Date]"}function R(j,n){var t=[],y;for(y=0;y<j.length;++y)t.push(n(j[y],y));return t}function N(j,n){for(var t in n)u(n,t)&&(j[t]=n[t]);return u(n,"toString")&&(j.toString=n.toString),u(n,"valueOf")&&(j.valueOf=n.valueOf),j}function P(j,n,t,y){return sc(j,n,t,y,!0).utc()}function V(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Y(j){return j._pf==null&&(j._pf=V()),j._pf}var fa;Array.prototype.some?fa=Array.prototype.some:fa=function(j){var n=Object(this),t=n.length>>>0,y;for(y=0;y<t;y++)if(y in n&&j.call(this,n[y],y,n))return!0;return!1};function ga(j){if(j._isValid==null){var n=Y(j),t=fa.call(n.parsedDateParts,function(C){return C!=null}),y=!isNaN(j._d.getTime())&&n.overflow<0&&!n.empty&&!n.invalidEra&&!n.invalidMonth&&!n.invalidWeekday&&!n.weekdayMismatch&&!n.nullInput&&!n.invalidFormat&&!n.userInvalidated&&(!n.meridiem||n.meridiem&&t);j._strict&&(y=y&&n.charsLeftOver===0&&n.unusedTokens.length===0&&n.bigHour===void 0);if(Object.isFrozen==null||!Object.isFrozen(j))j._isValid=y;else return y}return j._isValid}function la(j){var n=P(NaN);return j!=null?N(Y(n),j):Y(n).userInvalidated=!0,n}var ia=f.momentProperties=[],oa=!1;function pa(j,n){var t,y,C;A(n._isAMomentObject)||(j._isAMomentObject=n._isAMomentObject),A(n._i)||(j._i=n._i),A(n._f)||(j._f=n._f),A(n._l)||(j._l=n._l),A(n._strict)||(j._strict=n._strict),A(n._tzm)||(j._tzm=n._tzm),A(n._isUTC)||(j._isUTC=n._isUTC),A(n._offset)||(j._offset=n._offset),A(n._pf)||(j._pf=Y(n)),A(n._locale)||(j._locale=n._locale);if(ia.length>0)for(t=0;t<ia.length;t++)y=ia[t],C=n[y],A(C)||(j[y]=C);return j}function ja(j){pa(this,j),this._d=new Date(j._d!=null?j._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),oa===!1&&(oa=!0,f.updateOffset(this),oa=!1)}function I(j){return j instanceof ja||j!=null&&j._isAMomentObject!=null}function O(j){f.suppressDeprecationWarnings===!1&&typeof console!=="undefined"&&console.warn&&console.warn("Deprecation warning: "+j)}function x(j,n){var t=!0;return N(function(){f.deprecationHandler!=null&&f.deprecationHandler(null,j);if(t){var y=[],C,W,ea;for(W=0;W<arguments.length;W++){C="";if(typeof arguments[W]==="object"){C+=`
[`+W+"] ";for(ea in arguments[0])u(arguments[0],ea)&&(C+=ea+": "+arguments[0][ea]+", ");C=C.slice(0,-2)}else C=arguments[W];y.push(C)}O(j+`
Arguments: `+Array.prototype.slice.call(y).join("")+`
`+new Error().stack),t=!1}return n.apply(this,arguments)},n)}var G={};function F(j,n){f.deprecationHandler!=null&&f.deprecationHandler(j,n),G[j]||(O(n),G[j]=!0)}f.suppressDeprecationWarnings=!1,f.deprecationHandler=null;function J(j){return typeof Function!=="undefined"&&j instanceof Function||Object.prototype.toString.call(j)==="[object Function]"}function U(j){var n,t;for(t in j)u(j,t)&&(n=j[t],J(n)?this[t]=n:this["_"+t]=n);this._config=j,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function K(j,n){var t=N({},j),y;for(y in n)u(n,y)&&(q(j[y])&&q(n[y])?(t[y]={},N(t[y],j[y]),N(t[y],n[y])):n[y]!=null?t[y]=n[y]:delete t[y]);for(y in j)u(j,y)&&!u(n,y)&&q(j[y])&&(t[y]=N({},t[y]));return t}function ca(j){j!=null&&this.set(j)}var ba;Object.keys?ba=Object.keys:ba=function(j){var n,t=[];for(n in j)u(j,n)&&t.push(n);return t};var Ba={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function $(j,n,t){var y=this._calendar[j]||this._calendar.sameElse;return J(y)?y.call(n,t):y}function va(j,n,t){var y=""+Math.abs(j),C=n-y.length,W=j>=0;return(W?t?"+":"":"-")+Math.pow(10,Math.max(0,C)).toString().substr(1)+y}var ra=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,da=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,na={},xa={};function ma(j,n,t,y){var C=y;typeof y==="string"&&(C=function(){return this[y]()}),j&&(xa[j]=C),n&&(xa[n[0]]=function(){return va(C.apply(this,arguments),n[1],n[2])}),t&&(xa[t]=function(){return this.localeData().ordinal(C.apply(this,arguments),j)})}function eb(j){return j.match(/\[[\s\S]/)?j.replace(/^\[|\]$/g,""):j.replace(/\\/g,"")}function gb(j){var n=j.match(ra),t,y;for(t=0,y=n.length;t<y;t++)xa[n[t]]?n[t]=xa[n[t]]:n[t]=eb(n[t]);return function(C){var W="",ea;for(ea=0;ea<y;ea++)W+=J(n[ea])?n[ea].call(C,j):n[ea];return W}}function hb(j,n){return j.isValid()?(n=Ca(n,j.localeData()),na[n]=na[n]||gb(n),na[n](j)):j.localeData().invalidDate()}function Ca(j,n){var t=5;function y(C){return n.longDateFormat(C)||C}for(da.lastIndex=0;t>=0&&da.test(j);)j=j.replace(da,y),da.lastIndex=0,t-=1;return j}var Ia={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Za(j){var n=this._longDateFormat[j],t=this._longDateFormat[j.toUpperCase()];return n||!t?n:(this._longDateFormat[j]=t.match(ra).map(function(y){return y==="MMMM"||y==="MM"||y==="DD"||y==="dddd"?y.slice(1):y}).join(""),this._longDateFormat[j])}var fb="Invalid date";function qa(){return this._invalidDate}var ya="%d",La=/\d{1,2}/;function ta(j){return this._ordinal.replace("%d",j)}var Ea={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function cb(j,n,t,y){var C=this._relativeTime[t];return J(C)?C(j,n,t,y):C.replace(/%d/i,j)}function Da(j,n){var t=this._relativeTime[j>0?"future":"past"];return J(t)?t(n):t.replace(/%s/i,n)}var Sa={};function Ja(j,n){var t=j.toLowerCase();Sa[t]=Sa[t+"s"]=Sa[n]=j}function Va(j){return typeof j==="string"?Sa[j]||Sa[j.toLowerCase()]:void 0}function jb(j){var n={},t,y;for(y in j)u(j,y)&&(t=Va(y),t&&(n[t]=j[y]));return n}var ub={};function ob(j,n){ub[j]=n}function sa(j){var n=[],t;for(t in j)u(j,t)&&n.push({unit:t,priority:ub[t]});return n.sort(function(y,C){return y.priority-C.priority}),n}function _a(j){return j%4===0&&j%100!==0||j%400===0}function X(j){return j<0?Math.ceil(j)||0:Math.floor(j)}function L(j){var n=+j,t=0;return n!==0&&isFinite(n)&&(t=X(n)),t}function _(j,n){return function(t){return t!=null?(S(this,j,t),f.updateOffset(this,n),this):aa(this,j)}}function aa(j,n){return j.isValid()?j._d["get"+(j._isUTC?"UTC":"")+n]():NaN}function S(j,n,t){j.isValid()&&!isNaN(t)&&(n==="FullYear"&&_a(j.year())&&j.month()===1&&j.date()===29?(t=L(t),j._d["set"+(j._isUTC?"UTC":"")+n](t,j.month(),Xe(t,j.month()))):j._d["set"+(j._isUTC?"UTC":"")+n](t))}function za(j){return j=Va(j),J(this[j])?this[j]():this}function Ra(j,n){if(typeof j==="object"){j=jb(j);var t=sa(j),y;for(y=0;y<t.length;y++)this[t[y].unit](j[t[y].unit])}else{j=Va(j);if(J(this[j]))return this[j](n)}return this}var pb=/\d/,Ta=/\d\d/,lb=/\d{3}/,Mb=/\d{4}/,Db=/[+-]?\d{6}/,Ka=/\d\d?/,td=/\d\d\d\d?/,Mf=/\d\d\d\d\d\d?/,Nf=/\d{1,3}/,B=/\d{1,4}/,Of=/[+-]?\d{1,6}/,$d=/\d+/,Pf=/[+-]?\d+/,io=/Z|[+-]\d\d:?\d\d/gi,Qf=/Z|[+-]\d\d(?::?\d\d)?/gi,jo=/[+-]?\d+(\.\d{1,3})?/,ud=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,dc;dc={};function ua(j,n,t){dc[j]=J(n)?n:function(y,C){return y&&t?t:n}}function jh(j,n){return u(dc,j)?dc[j](n._strict,n._locale):new RegExp(kh(j))}function kh(j){return Ib(j.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(n,t,y,C,W){return t||y||C||W}))}function Ib(j){return j.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Rf={};function kb(j,n){var t,y=n;for(typeof j==="string"&&(j=[j]),E(n)&&(y=function(C,W){W[n]=L(C)}),t=0;t<j.length;t++)Rf[j[t]]=y}function ae(j,n){kb(j,function(t,y,C,W){C._w=C._w||{},n(t,C._w,C,W)})}function lh(j,n,t){n!=null&&u(Rf,j)&&Rf[j](n,t._a,t,j)}var mb=0,Jb=1,pc=2,Eb=3,qc=4,Nc=5,cd=6,Rj=7,ko=8;function lo(j,n){return(j%n+n)%n}var vb;Array.prototype.indexOf?vb=Array.prototype.indexOf:vb=function(j){var n;for(n=0;n<this.length;++n)if(this[n]===j)return n;return-1};function Xe(j,n){if(isNaN(j)||isNaN(n))return NaN;var t=lo(n,12);return j+=(n-t)/12,t===1?_a(j)?29:28:31-t%7%2}ma("M",["MM",2],"Mo",function(){return this.month()+1}),ma("MMM",0,0,function(j){return this.localeData().monthsShort(this,j)}),ma("MMMM",0,0,function(j){return this.localeData().months(this,j)}),Ja("month","M"),ob("month",8),ua("M",Ka),ua("MM",Ka,Ta),ua("MMM",function(j,n){return n.monthsShortRegex(j)}),ua("MMMM",function(j,n){return n.monthsRegex(j)}),kb(["M","MM"],function(j,n){n[Jb]=L(j)-1}),kb(["MMM","MMMM"],function(j,n,t,y){var C=t._locale.monthsParse(j,y,t._strict);C!=null?n[Jb]=C:Y(t).invalidMonth=j});var mo="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Sj="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),mh=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Sf=ud,Tj=ud;function Uj(j,n){return j?l(this._months)?this._months[j.month()]:this._months[(this._months.isFormat||mh).test(n)?"format":"standalone"][j.month()]:l(this._months)?this._months:this._months.standalone}function no(j,n){return j?l(this._monthsShort)?this._monthsShort[j.month()]:this._monthsShort[mh.test(n)?"format":"standalone"][j.month()]:l(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function oo(j,n,t){var y,C,W,ea=j.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],y=0;y<12;++y)W=P([2e3,y]),this._shortMonthsParse[y]=this.monthsShort(W,"").toLocaleLowerCase(),this._longMonthsParse[y]=this.months(W,"").toLocaleLowerCase();return t?n==="MMM"?(C=vb.call(this._shortMonthsParse,ea),C!==-1?C:null):(C=vb.call(this._longMonthsParse,ea),C!==-1?C:null):n==="MMM"?(C=vb.call(this._shortMonthsParse,ea),C!==-1?C:(C=vb.call(this._longMonthsParse,ea),C!==-1?C:null)):(C=vb.call(this._longMonthsParse,ea),C!==-1?C:(C=vb.call(this._shortMonthsParse,ea),C!==-1?C:null))}function po(j,n,t){var y,C,W;if(this._monthsParseExact)return oo.call(this,j,n,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),y=0;y<12;y++){C=P([2e3,y]),t&&!this._longMonthsParse[y]&&(this._longMonthsParse[y]=new RegExp("^"+this.months(C,"").replace(".","")+"$","i"),this._shortMonthsParse[y]=new RegExp("^"+this.monthsShort(C,"").replace(".","")+"$","i")),!t&&!this._monthsParse[y]&&(W="^"+this.months(C,"")+"|^"+this.monthsShort(C,""),this._monthsParse[y]=new RegExp(W.replace(".",""),"i"));if(t&&n==="MMMM"&&this._longMonthsParse[y].test(j))return y;{if(t&&n==="MMM"&&this._shortMonthsParse[y].test(j))return y;if(!t&&this._monthsParse[y].test(j))return y}}}function be(j,n){var t;if(!j.isValid())return j;if(typeof n==="string")if(/^\d+$/.test(n))n=L(n);else{n=j.localeData().monthsParse(n);if(!E(n))return j}return t=Math.min(j.date(),Xe(j.year(),n)),j._d["set"+(j._isUTC?"UTC":"")+"Month"](n,t),j}function Vj(j){return j!=null?(be(this,j),f.updateOffset(this,!0),this):aa(this,"Month")}function Wb(){return Xe(this.year(),this.month())}function qo(j){return this._monthsParseExact?(u(this,"_monthsRegex")||Wj.call(this),j?this._monthsShortStrictRegex:this._monthsShortRegex):(u(this,"_monthsShortRegex")||(this._monthsShortRegex=Sf),this._monthsShortStrictRegex&&j?this._monthsShortStrictRegex:this._monthsShortRegex)}function ro(j){return this._monthsParseExact?(u(this,"_monthsRegex")||Wj.call(this),j?this._monthsStrictRegex:this._monthsRegex):(u(this,"_monthsRegex")||(this._monthsRegex=Tj),this._monthsStrictRegex&&j?this._monthsStrictRegex:this._monthsRegex)}function Wj(){function j(ea,Fa){return Fa.length-ea.length}var n=[],t=[],y=[],C,W;for(C=0;C<12;C++)W=P([2e3,C]),n.push(this.monthsShort(W,"")),t.push(this.months(W,"")),y.push(this.months(W,"")),y.push(this.monthsShort(W,""));for(n.sort(j),t.sort(j),y.sort(j),C=0;C<12;C++)n[C]=Ib(n[C]),t[C]=Ib(t[C]);for(C=0;C<24;C++)y[C]=Ib(y[C]);this._monthsRegex=new RegExp("^("+y.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}ma("Y",0,0,function(){var j=this.year();return j<=9999?va(j,4):"+"+j}),ma(0,["YY",2],0,function(){return this.year()%100}),ma(0,["YYYY",4],0,"year"),ma(0,["YYYYY",5],0,"year"),ma(0,["YYYYYY",6,!0],0,"year"),Ja("year","y"),ob("year",1),ua("Y",Pf),ua("YY",Ka,Ta),ua("YYYY",B,Mb),ua("YYYYY",Of,Db),ua("YYYYYY",Of,Db),kb(["YYYYY","YYYYYY"],mb),kb("YYYY",function(j,n){n[mb]=j.length===2?f.parseTwoDigitYear(j):L(j)}),kb("YY",function(j,n){n[mb]=f.parseTwoDigitYear(j)}),kb("Y",function(j,n){n[mb]=parseInt(j,10)});function Ye(j){return _a(j)?366:365}f.parseTwoDigitYear=function(j){return L(j)+(L(j)>68?1900:2e3)};var ce=_("FullYear",!0);function de(){return _a(this.year())}function so(j,n,t,y,C,W,ea){var Fa;return j<100&&j>=0?(Fa=new Date(j+400,n,t,y,C,W,ea),isFinite(Fa.getFullYear())&&Fa.setFullYear(j)):Fa=new Date(j,n,t,y,C,W,ea),Fa}function Ze(j){var n,t;return j<100&&j>=0?(t=Array.prototype.slice.call(arguments),t[0]=j+400,n=new Date(Date.UTC.apply(null,t)),isFinite(n.getUTCFullYear())&&n.setUTCFullYear(j)):n=new Date(Date.UTC.apply(null,arguments)),n}function Tf(j,n,t){var y=7+n-t,C=(7+Ze(j,0,y).getUTCDay()-n)%7;return-C+y-1}function nh(j,n,t,y,C){var W=(7+t-y)%7,ea=Tf(j,y,C),Fa=1+7*(n-1)+W+ea,Ua,rb;return Fa<=0?(Ua=j-1,rb=Ye(Ua)+Fa):Fa>Ye(j)?(Ua=j+1,rb=Fa-Ye(j)):(Ua=j,rb=Fa),{year:Ua,dayOfYear:rb}}function vd(j,n,t){var y=Tf(j.year(),n,t),C=Math.floor((j.dayOfYear()-y-1)/7)+1,W,ea;return C<1?(ea=j.year()-1,W=C+Oc(ea,n,t)):C>Oc(j.year(),n,t)?(W=C-Oc(j.year(),n,t),ea=j.year()+1):(ea=j.year(),W=C),{week:W,year:ea}}function Oc(j,n,t){var y=Tf(j,n,t),C=Tf(j+1,n,t);return(Ye(j)-y+C)/7}ma("w",["ww",2],"wo","week"),ma("W",["WW",2],"Wo","isoWeek"),Ja("week","w"),Ja("isoWeek","W"),ob("week",5),ob("isoWeek",5),ua("w",Ka),ua("ww",Ka,Ta),ua("W",Ka),ua("WW",Ka,Ta),ae(["w","ww","W","WW"],function(j,n,t,y){n[y.substr(0,1)]=L(j)});function to(j){return vd(j,this._week.dow,this._week.doy).week}var Uf={dow:0,doy:6};function wd(){return this._week.dow}function Pc(){return this._week.doy}function xd(j){var n=this.localeData().week(this);return j==null?n:this.add((j-n)*7,"d")}function Xj(j){var n=vd(this,1,4).week;return j==null?n:this.add((j-n)*7,"d")}ma("d",0,"do","day"),ma("dd",0,0,function(j){return this.localeData().weekdaysMin(this,j)}),ma("ddd",0,0,function(j){return this.localeData().weekdaysShort(this,j)}),ma("dddd",0,0,function(j){return this.localeData().weekdays(this,j)}),ma("e",0,0,"weekday"),ma("E",0,0,"isoWeekday"),Ja("day","d"),Ja("weekday","e"),Ja("isoWeekday","E"),ob("day",11),ob("weekday",11),ob("isoWeekday",11),ua("d",Ka),ua("e",Ka),ua("E",Ka),ua("dd",function(j,n){return n.weekdaysMinRegex(j)}),ua("ddd",function(j,n){return n.weekdaysShortRegex(j)}),ua("dddd",function(j,n){return n.weekdaysRegex(j)}),ae(["dd","ddd","dddd"],function(j,n,t,y){var C=t._locale.weekdaysParse(j,y,t._strict);C!=null?n.d=C:Y(t).invalidWeekday=j}),ae(["d","e","E"],function(j,n,t,y){n[y]=L(j)});function uo(j,n){return typeof j!=="string"?j:isNaN(j)?(j=n.weekdaysParse(j),typeof j==="number"?j:null):parseInt(j,10)}function Qc(j,n){return typeof j==="string"?n.weekdaysParse(j)%7||7:isNaN(j)?null:j}function oh(j,n){return j.slice(n,7).concat(j.slice(0,n))}var ph="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),qh="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),vo="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),wo=ud,Yj=ud,xo=ud;function yo(j,n){var t=l(this._weekdays)?this._weekdays:this._weekdays[j&&j!==!0&&this._weekdays.isFormat.test(n)?"format":"standalone"];return j===!0?oh(t,this._week.dow):j?t[j.day()]:t}function zo(j){return j===!0?oh(this._weekdaysShort,this._week.dow):j?this._weekdaysShort[j.day()]:this._weekdaysShort}function yd(j){return j===!0?oh(this._weekdaysMin,this._week.dow):j?this._weekdaysMin[j.day()]:this._weekdaysMin}function Ao(j,n,t){var y,C,W,ea=j.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],y=0;y<7;++y)W=P([2e3,1]).day(y),this._minWeekdaysParse[y]=this.weekdaysMin(W,"").toLocaleLowerCase(),this._shortWeekdaysParse[y]=this.weekdaysShort(W,"").toLocaleLowerCase(),this._weekdaysParse[y]=this.weekdays(W,"").toLocaleLowerCase();return t?n==="dddd"?(C=vb.call(this._weekdaysParse,ea),C!==-1?C:null):n==="ddd"?(C=vb.call(this._shortWeekdaysParse,ea),C!==-1?C:null):(C=vb.call(this._minWeekdaysParse,ea),C!==-1?C:null):n==="dddd"?(C=vb.call(this._weekdaysParse,ea),C!==-1?C:(C=vb.call(this._shortWeekdaysParse,ea),C!==-1?C:(C=vb.call(this._minWeekdaysParse,ea),C!==-1?C:null))):n==="ddd"?(C=vb.call(this._shortWeekdaysParse,ea),C!==-1?C:(C=vb.call(this._weekdaysParse,ea),C!==-1?C:(C=vb.call(this._minWeekdaysParse,ea),C!==-1?C:null))):(C=vb.call(this._minWeekdaysParse,ea),C!==-1?C:(C=vb.call(this._weekdaysParse,ea),C!==-1?C:(C=vb.call(this._shortWeekdaysParse,ea),C!==-1?C:null)))}function Bo(j,n,t){var y,C,W;if(this._weekdaysParseExact)return Ao.call(this,j,n,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),y=0;y<7;y++){C=P([2e3,1]).day(y),t&&!this._fullWeekdaysParse[y]&&(this._fullWeekdaysParse[y]=new RegExp("^"+this.weekdays(C,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[y]=new RegExp("^"+this.weekdaysShort(C,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[y]=new RegExp("^"+this.weekdaysMin(C,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[y]||(W="^"+this.weekdays(C,"")+"|^"+this.weekdaysShort(C,"")+"|^"+this.weekdaysMin(C,""),this._weekdaysParse[y]=new RegExp(W.replace(".",""),"i"));if(t&&n==="dddd"&&this._fullWeekdaysParse[y].test(j))return y;{if(t&&n==="ddd"&&this._shortWeekdaysParse[y].test(j))return y;{if(t&&n==="dd"&&this._minWeekdaysParse[y].test(j))return y;if(!t&&this._weekdaysParse[y].test(j))return y}}}}function Zj(j){if(!this.isValid())return j!=null?this:NaN;var n=this._isUTC?this._d.getUTCDay():this._d.getDay();return j!=null?(j=uo(j,this.localeData()),this.add(j-n,"d")):n}function zd(j){if(!this.isValid())return j!=null?this:NaN;var n=(this.day()+7-this.localeData()._week.dow)%7;return j==null?n:this.add(j-n,"d")}function _e(j){if(!this.isValid())return j!=null?this:NaN;if(j!=null){var n=Qc(j,this.localeData());return this.day(this.day()%7?n:n-7)}else return this.day()||7}function rh(j){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||$e.call(this),j?this._weekdaysStrictRegex:this._weekdaysRegex):(u(this,"_weekdaysRegex")||(this._weekdaysRegex=wo),this._weekdaysStrictRegex&&j?this._weekdaysStrictRegex:this._weekdaysRegex)}function sh(j){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||$e.call(this),j?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(u(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Yj),this._weekdaysShortStrictRegex&&j?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function th(j){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||$e.call(this),j?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(u(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=xo),this._weekdaysMinStrictRegex&&j?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function $e(){function j(jd,Id){return Id.length-jd.length}var n=[],t=[],y=[],C=[],W,ea,Fa,Ua,rb;for(W=0;W<7;W++)ea=P([2e3,1]).day(W),Fa=Ib(this.weekdaysMin(ea,"")),Ua=Ib(this.weekdaysShort(ea,"")),rb=Ib(this.weekdays(ea,"")),n.push(Fa),t.push(Ua),y.push(rb),C.push(Fa),C.push(Ua),C.push(rb);n.sort(j),t.sort(j),y.sort(j),C.sort(j),this._weekdaysRegex=new RegExp("^("+C.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+y.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+n.join("|")+")","i")}function dd(){return this.hours()%12||12}function uh(){return this.hours()||24}ma("H",["HH",2],0,"hour"),ma("h",["hh",2],0,dd),ma("k",["kk",2],0,uh),ma("hmm",0,0,function(){return""+dd.apply(this)+va(this.minutes(),2)}),ma("hmmss",0,0,function(){return""+dd.apply(this)+va(this.minutes(),2)+va(this.seconds(),2)}),ma("Hmm",0,0,function(){return""+this.hours()+va(this.minutes(),2)}),ma("Hmmss",0,0,function(){return""+this.hours()+va(this.minutes(),2)+va(this.seconds(),2)});function ee(j,n){ma(j,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),n)})}ee("a",!0),ee("A",!1),Ja("hour","h"),ob("hour",13);function af(j,n){return n._meridiemParse}ua("a",af),ua("A",af),ua("H",Ka),ua("h",Ka),ua("k",Ka),ua("HH",Ka,Ta),ua("hh",Ka,Ta),ua("kk",Ka,Ta),ua("hmm",td),ua("hmmss",Mf),ua("Hmm",td),ua("Hmmss",Mf),kb(["H","HH"],Eb),kb(["k","kk"],function(j,n,t){var y=L(j);n[Eb]=y===24?0:y}),kb(["a","A"],function(j,n,t){t._isPm=t._locale.isPM(j),t._meridiem=j}),kb(["h","hh"],function(j,n,t){n[Eb]=L(j),Y(t).bigHour=!0}),kb("hmm",function(j,n,t){var y=j.length-2;n[Eb]=L(j.substr(0,y)),n[qc]=L(j.substr(y)),Y(t).bigHour=!0}),kb("hmmss",function(j,n,t){var y=j.length-4,C=j.length-2;n[Eb]=L(j.substr(0,y)),n[qc]=L(j.substr(y,2)),n[Nc]=L(j.substr(C)),Y(t).bigHour=!0}),kb("Hmm",function(j,n,t){var y=j.length-2;n[Eb]=L(j.substr(0,y)),n[qc]=L(j.substr(y))}),kb("Hmmss",function(j,n,t){var y=j.length-4,C=j.length-2;n[Eb]=L(j.substr(0,y)),n[qc]=L(j.substr(y,2)),n[Nc]=L(j.substr(C))});function Co(j){return(j+"").toLowerCase().charAt(0)==="p"}var Do=/[ap]\.?m?\.?/i,Eo=_("Hours",!0);function _j(j,n,t){return j>11?t?"pm":"PM":t?"am":"AM"}var $j={calendar:Ba,longDateFormat:Ia,invalidDate:fb,ordinal:ya,dayOfMonthOrdinalParse:La,relativeTime:Ea,months:mo,monthsShort:Sj,week:Uf,weekdays:ph,weekdaysMin:vo,weekdaysShort:qh,meridiemParse:Do},qb={},bf={},ed;function ak(j,n){var t,y=Math.min(j.length,n.length);for(t=0;t<y;t+=1)if(j[t]!==n[t])return t;return y}function ec(j){return j?j.toLowerCase().replace("_","-"):j}function Fo(j){for(var n=0,t,y,C,W;n<j.length;){for(W=ec(j[n]).split("-"),t=W.length,y=ec(j[n+1]),y=y?y.split("-"):null;t>0;){C=Vf(W.slice(0,t).join("-"));if(C)return C;if(y&&y.length>=t&&ak(W,y)>=t-1)break;t--}n++}return ed}function Vf(j){var n=null,t;if(qb[j]===void 0&&typeof c!=="undefined"&&c&&c.exports)try{n=ed._abbr,t=require,t("./locale/"+j),fd(n)}catch(y){qb[j]=null}return qb[j]}function fd(j,n){var t;return j&&(A(n)?t=rc(j):t=vh(j,n),t?ed=t:typeof console!=="undefined"&&console.warn&&console.warn("Locale "+j+" not found. Did you forget to load it?")),ed._abbr}function vh(j,n){if(n!==null){var t,y=$j;n.abbr=j;if(qb[j]!=null)F("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),y=qb[j]._config;else if(n.parentLocale!=null)if(qb[n.parentLocale]!=null)y=qb[n.parentLocale]._config;else{t=Vf(n.parentLocale);if(t!=null)y=t._config;else return bf[n.parentLocale]||(bf[n.parentLocale]=[]),bf[n.parentLocale].push({name:j,config:n}),null}return qb[j]=new ca(K(y,n)),bf[j]&&bf[j].forEach(function(C){vh(C.name,C.config)}),fd(j),qb[j]}else return delete qb[j],null}function Sb(j,n){if(n!=null){var t,y,C=$j;qb[j]!=null&&qb[j].parentLocale!=null?qb[j].set(K(qb[j]._config,n)):(y=Vf(j),y!=null&&(C=y._config),n=K(C,n),y==null&&(n.abbr=j),t=new ca(n),t.parentLocale=qb[j],qb[j]=t),fd(j)}else qb[j]!=null&&(qb[j].parentLocale!=null?(qb[j]=qb[j].parentLocale,j===fd()&&fd(j)):qb[j]!=null&&delete qb[j]);return qb[j]}function rc(j){var n;j&&j._locale&&j._locale._abbr&&(j=j._locale._abbr);if(!j)return ed;if(!l(j)){n=Vf(j);if(n)return n;j=[j]}return Fo(j)}function wh(){return ba(qb)}function Wf(j){var n,t=j._a;return t&&Y(j).overflow===-2&&(n=t[Jb]<0||t[Jb]>11?Jb:t[pc]<1||t[pc]>Xe(t[mb],t[Jb])?pc:t[Eb]<0||t[Eb]>24||t[Eb]===24&&(t[qc]!==0||t[Nc]!==0||t[cd]!==0)?Eb:t[qc]<0||t[qc]>59?qc:t[Nc]<0||t[Nc]>59?Nc:t[cd]<0||t[cd]>999?cd:-1,Y(j)._overflowDayOfYear&&(n<mb||n>pc)&&(n=pc),Y(j)._overflowWeeks&&n===-1&&(n=Rj),Y(j)._overflowWeekday&&n===-1&&(n=ko),Y(j).overflow=n),j}var Go=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bk=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ho=/Z|[+-]\d\d(?::?\d\d)?/,cf=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],xh=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Io=/^\/?Date\((-?\d+)/i,ck=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,df={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Xf(j){var n,t,y=j._i,C=Go.exec(y)||bk.exec(y),W,ea,Fa,Ua;if(C){for(Y(j).iso=!0,n=0,t=cf.length;n<t;n++)if(cf[n][1].exec(C[1])){ea=cf[n][0],W=cf[n][2]!==!1;break}if(ea==null){j._isValid=!1;return}if(C[3]){for(n=0,t=xh.length;n<t;n++)if(xh[n][1].exec(C[3])){Fa=(C[2]||" ")+xh[n][0];break}if(Fa==null){j._isValid=!1;return}}if(!W&&Fa!=null){j._isValid=!1;return}if(C[4])if(Ho.exec(C[4]))Ua="Z";else{j._isValid=!1;return}j._f=ea+(Fa||"")+(Ua||""),Ah(j)}else j._isValid=!1}function yh(j,n,t,y,C,W){var ea=[Jo(j),Sj.indexOf(n),parseInt(t,10),parseInt(y,10),parseInt(C,10)];return W&&ea.push(parseInt(W,10)),ea}function Jo(j){var n=parseInt(j,10);return n<=49?2e3+n:n<=999?1900+n:n}function Ko(j){return j.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function ef(j,n,t){if(j){var y=qh.indexOf(j),C=new Date(n[0],n[1],n[2]).getDay();if(y!==C)return Y(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function Lo(j,n,t){if(j)return df[j];{if(n)return 0;{var y=parseInt(t,10),C=y%100,W=(y-C)/100;return W*60+C}}}function dk(j){var n=ck.exec(Ko(j._i)),t;if(n){t=yh(n[4],n[3],n[2],n[5],n[6],n[7]);if(!ef(n[1],t,j))return;j._a=t,j._tzm=Lo(n[8],n[9],n[10]),j._d=Ze.apply(null,j._a),j._d.setUTCMinutes(j._d.getUTCMinutes()-j._tzm),Y(j).rfc2822=!0}else j._isValid=!1}function Mo(j){var n=Io.exec(j._i);if(n!==null){j._d=new Date(+n[1]);return}Xf(j);if(j._isValid===!1)delete j._isValid;else return;dk(j);if(j._isValid===!1)delete j._isValid;else return;j._strict?j._isValid=!1:f.createFromInputFallback(j)}f.createFromInputFallback=x("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(j){j._d=new Date(j._i+(j._useUTC?" UTC":""))});function fe(j,n,t){return j!=null?j:n!=null?n:t}function No(j){var n=new Date(f.now());return j._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function zh(j){var n,t,y=[],C,W,ea;if(j._d)return;for(C=No(j),j._w&&j._a[pc]==null&&j._a[Jb]==null&&ek(j),j._dayOfYear!=null&&(ea=fe(j._a[mb],C[mb]),(j._dayOfYear>Ye(ea)||j._dayOfYear===0)&&(Y(j)._overflowDayOfYear=!0),t=Ze(ea,0,j._dayOfYear),j._a[Jb]=t.getUTCMonth(),j._a[pc]=t.getUTCDate()),n=0;n<3&&j._a[n]==null;++n)j._a[n]=y[n]=C[n];for(;n<7;n++)j._a[n]=y[n]=j._a[n]==null?n===2?1:0:j._a[n];j._a[Eb]===24&&j._a[qc]===0&&j._a[Nc]===0&&j._a[cd]===0&&(j._nextDay=!0,j._a[Eb]=0),j._d=(j._useUTC?Ze:so).apply(null,y),W=j._useUTC?j._d.getUTCDay():j._d.getDay(),j._tzm!=null&&j._d.setUTCMinutes(j._d.getUTCMinutes()-j._tzm),j._nextDay&&(j._a[Eb]=24),j._w&&typeof j._w.d!=="undefined"&&j._w.d!==W&&(Y(j).weekdayMismatch=!0)}function ek(j){var n,t,y,C,W,ea,Fa,Ua,rb;n=j._w,n.GG!=null||n.W!=null||n.E!=null?(W=1,ea=4,t=fe(n.GG,j._a[mb],vd(Wa(),1,4).year),y=fe(n.W,1),C=fe(n.E,1),(C<1||C>7)&&(Ua=!0)):(W=j._locale._week.dow,ea=j._locale._week.doy,rb=vd(Wa(),W,ea),t=fe(n.gg,j._a[mb],rb.year),y=fe(n.w,rb.week),n.d!=null?(C=n.d,(C<0||C>6)&&(Ua=!0)):n.e!=null?(C=n.e+W,(n.e<0||n.e>6)&&(Ua=!0)):C=W),y<1||y>Oc(t,W,ea)?Y(j)._overflowWeeks=!0:Ua!=null?Y(j)._overflowWeekday=!0:(Fa=nh(t,y,C,W,ea),j._a[mb]=Fa.year,j._dayOfYear=Fa.dayOfYear)}f.ISO_8601=function(){},f.RFC_2822=function(){};function Ah(j){if(j._f===f.ISO_8601){Xf(j);return}if(j._f===f.RFC_2822){dk(j);return}j._a=[],Y(j).empty=!0;var n=""+j._i,t,y,C,W,ea,Fa=n.length,Ua=0,rb;for(C=Ca(j._f,j._locale).match(ra)||[],t=0;t<C.length;t++)W=C[t],y=(n.match(jh(W,j))||[])[0],y&&(ea=n.substr(0,n.indexOf(y)),ea.length>0&&Y(j).unusedInput.push(ea),n=n.slice(n.indexOf(y)+y.length),Ua+=y.length),xa[W]?(y?Y(j).empty=!1:Y(j).unusedTokens.push(W),lh(W,y,j)):j._strict&&!y&&Y(j).unusedTokens.push(W);Y(j).charsLeftOver=Fa-Ua,n.length>0&&Y(j).unusedInput.push(n),j._a[Eb]<=12&&Y(j).bigHour===!0&&j._a[Eb]>0&&(Y(j).bigHour=void 0),Y(j).parsedDateParts=j._a.slice(0),Y(j).meridiem=j._meridiem,j._a[Eb]=ge(j._locale,j._a[Eb],j._meridiem),rb=Y(j).era,rb!==null&&(j._a[mb]=j._locale.erasConvertYear(rb,j._a[mb])),zh(j),Wf(j)}function ge(j,n,t){var y;return t==null?n:j.meridiemHour!=null?j.meridiemHour(n,t):j.isPM!=null?(y=j.isPM(t),y&&n<12&&(n+=12),!y&&n===12&&(n=0),n):n}function nb(j){var n,t,y,C,W,ea,Fa=!1;if(j._f.length===0){Y(j).invalidFormat=!0,j._d=new Date(NaN);return}for(C=0;C<j._f.length;C++)W=0,ea=!1,n=pa({},j),j._useUTC!=null&&(n._useUTC=j._useUTC),n._f=j._f[C],Ah(n),ga(n)&&(ea=!0),W+=Y(n).charsLeftOver,W+=Y(n).unusedTokens.length*10,Y(n).score=W,Fa?W<y&&(y=W,t=n):(y==null||W<y||ea)&&(y=W,t=n,ea&&(Fa=!0));N(j,t||n)}function ff(j){if(j._d)return;var n=jb(j._i),t=n.day===void 0?n.date:n.day;j._a=R([n.year,n.month,t,n.hour,n.minute,n.second,n.millisecond],function(y){return y&&parseInt(y,10)}),zh(j)}function Rc(j){var n=new ja(Wf(Yf(j)));return n._nextDay&&(n.add(1,"d"),n._nextDay=void 0),n}function Yf(j){var n=j._i,t=j._f;return j._locale=j._locale||rc(j._l),n===null||t===void 0&&n===""?la({nullInput:!0}):(typeof n==="string"&&(j._i=n=j._locale.preparse(n)),I(n)?new ja(Wf(n)):(H(n)?j._d=n:l(t)?nb(j):t?Ah(j):fk(j),ga(j)||(j._d=null),j))}function fk(j){var n=j._i;A(n)?j._d=new Date(f.now()):H(n)?j._d=new Date(n.valueOf()):typeof n==="string"?Mo(j):l(n)?(j._a=R(n.slice(0),function(t){return parseInt(t,10)}),zh(j)):q(n)?ff(j):E(n)?j._d=new Date(n):f.createFromInputFallback(j)}function sc(j,n,t,y,C){var W={};return(n===!0||n===!1)&&(y=n,n=void 0),(t===!0||t===!1)&&(y=t,t=void 0),(q(j)&&v(j)||l(j)&&j.length===0)&&(j=void 0),W._isAMomentObject=!0,W._useUTC=W._isUTC=C,W._l=t,W._i=j,W._f=n,W._strict=y,Rc(W)}function Wa(j,n,t,y){return sc(j,n,t,y,!1)}var Oo=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var j=Wa.apply(null,arguments);return this.isValid()&&j.isValid()?j<this?this:j:la()}),gk=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var j=Wa.apply(null,arguments);return this.isValid()&&j.isValid()?j>this?this:j:la()});function hk(j,n){var t,y;n.length===1&&l(n[0])&&(n=n[0]);if(!n.length)return Wa();for(t=n[0],y=1;y<n.length;++y)(!n[y].isValid()||n[y][j](t))&&(t=n[y]);return t}function Po(){var j=[].slice.call(arguments,0);return hk("isBefore",j)}function Qo(){var j=[].slice.call(arguments,0);return hk("isAfter",j)}var Zf=function(){return Date.now?Date.now():+new Date()},he=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ro(j){var n,t=!1,y;for(n in j)if(u(j,n)&&!(vb.call(he,n)!==-1&&(j[n]==null||!isNaN(j[n]))))return!1;for(y=0;y<he.length;++y)if(j[he[y]]){if(t)return!1;parseFloat(j[he[y]])!==L(j[he[y]])&&(t=!0)}return!0}function So(){return this._isValid}function Bh(){return tc(NaN)}function ie(j){var n=jb(j),t=n.year||0,y=n.quarter||0,C=n.month||0,W=n.week||n.isoWeek||0,ea=n.day||0,Fa=n.hour||0,Ua=n.minute||0,rb=n.second||0,jd=n.millisecond||0;this._isValid=Ro(n),this._milliseconds=+jd+rb*1e3+Ua*6e4+Fa*1e3*60*60,this._days=+ea+W*7,this._months=+C+y*3+t*12,this._data={},this._locale=rc(),this._bubble()}function gf(j){return j instanceof ie}function hf(j){return j<0?Math.round(-1*j)*-1:Math.round(j)}function To(j,n,t){var y=Math.min(j.length,n.length),C=Math.abs(j.length-n.length),W=0,ea;for(ea=0;ea<y;ea++)(t&&j[ea]!==n[ea]||!t&&L(j[ea])!==L(n[ea]))&&W++;return W+C}function ik(j,n){ma(j,0,0,function(){var t=this.utcOffset(),y="+";return t<0&&(t=-t,y="-"),y+va(~~(t/60),2)+n+va(~~t%60,2)})}ik("Z",":"),ik("ZZ",""),ua("Z",Qf),ua("ZZ",Qf),kb(["Z","ZZ"],function(j,n,t){t._useUTC=!0,t._tzm=_f(Qf,j)});var jk=/([\+\-]|\d\d)/gi;function _f(j,n){var t=(n||"").match(j),y,C,W;return t===null?null:(y=t[t.length-1]||[],C=(y+"").match(jk)||["-",0,0],W=+(C[1]*60)+L(C[2]),W===0?0:C[0]==="+"?W:-W)}function $f(j,n){var t,y;return n._isUTC?(t=n.clone(),y=(I(j)||H(j)?j.valueOf():Wa(j).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+y),f.updateOffset(t,!1),t):Wa(j).local()}function Fc(j){return-Math.round(j._d.getTimezoneOffset())}f.updateOffset=function(){};function Ma(j,n,t){var y=this._offset||0,C;if(!this.isValid())return j!=null?this:NaN;if(j!=null){if(typeof j==="string"){j=_f(Qf,j);if(j===null)return this}else Math.abs(j)<16&&!t&&(j=j*60);return!this._isUTC&&n&&(C=Fc(this)),this._offset=j,this._isUTC=!0,C!=null&&this.add(C,"m"),y!==j&&(!n||this._changeInProgress?bg(this,tc(j-y,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,f.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?y:Fc(this)}function Uo(j,n){return j!=null?(typeof j!=="string"&&(j=-j),this.utcOffset(j,n),this):-this.utcOffset()}function Ad(j){return this.utcOffset(0,j)}function ag(j){return this._isUTC&&(this.utcOffset(0,j),this._isUTC=!1,j&&this.subtract(Fc(this),"m")),this}function Vo(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i==="string"){var j=_f(io,this._i);j!=null?this.utcOffset(j):this.utcOffset(0,!0)}return this}function Ch(j){return this.isValid()?(j=j?Wa(j).utcOffset():0,(this.utcOffset()-j)%60===0):!1}function jf(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Bd(){if(!A(this._isDSTShifted))return this._isDSTShifted;var j={},n;return pa(j,this),j=Yf(j),j._a?(n=j._isUTC?P(j._a):Wa(j._a),this._isDSTShifted=this.isValid()&&To(j._a,n.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function kf(){return this.isValid()?!this._isUTC:!1}function Cd(){return this.isValid()?this._isUTC:!1}function Dd(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Wo=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Xo=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function tc(j,n){var t=j,y=null,C,W,ea;return gf(j)?t={ms:j._milliseconds,d:j._days,M:j._months}:E(j)||!isNaN(+j)?(t={},n?t[n]=+j:t.milliseconds=+j):(y=Wo.exec(j))?(C=y[1]==="-"?-1:1,t={y:0,d:L(y[pc])*C,h:L(y[Eb])*C,m:L(y[qc])*C,s:L(y[Nc])*C,ms:L(hf(y[cd]*1e3))*C}):(y=Xo.exec(j))?(C=y[1]==="-"?-1:1,t={y:Ed(y[2],C),M:Ed(y[3],C),w:Ed(y[4],C),d:Ed(y[5],C),h:Ed(y[6],C),m:Ed(y[7],C),s:Ed(y[8],C)}):t==null?t={}:typeof t==="object"&&("from"in t||"to"in t)&&(ea=Dh(Wa(t.from),Wa(t.to)),t={},t.ms=ea.milliseconds,t.M=ea.months),W=new ie(t),gf(j)&&u(j,"_locale")&&(W._locale=j._locale),gf(j)&&u(j,"_isValid")&&(W._isValid=j._isValid),W}tc.fn=ie.prototype,tc.invalid=Bh;function Ed(j,n){var t=j&&parseFloat(j.replace(",","."));return(isNaN(t)?0:t)*n}function je(j,n){var t={};return t.months=n.month()-j.month()+(n.year()-j.year())*12,j.clone().add(t.months,"M").isAfter(n)&&--t.months,t.milliseconds=+n-+j.clone().add(t.months,"M"),t}function Dh(j,n){var t;return j.isValid()&&n.isValid()?(n=$f(n,j),j.isBefore(n)?t=je(j,n):(t=je(n,j),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function Eh(j,n){return function(t,y){var C,W;return y!==null&&!isNaN(+y)&&(F(n,"moment()."+n+"(period, number) is deprecated. Please use moment()."+n+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),W=t,t=y,y=W),C=tc(t,y),bg(this,C,j),this}}function bg(j,n,t,y){var C=n._milliseconds,W=hf(n._days),ea=hf(n._months);if(!j.isValid())return;y=y==null?!0:y,ea&&be(j,aa(j,"Month")+ea*t),W&&S(j,"Date",aa(j,"Date")+W*t),C&&j._d.setTime(j._d.valueOf()+C*t),y&&f.updateOffset(j,W||ea)}var Fh=Eh(1,"add"),Yo=Eh(-1,"subtract");function kk(j){return typeof j==="string"||j instanceof String}function Zo(j){return I(j)||H(j)||kk(j)||E(j)||cg(j)||_o(j)||j===null||j===void 0}function _o(j){var n=q(j)&&!v(j),t=!1,y=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],C,W;for(C=0;C<y.length;C+=1)W=y[C],t=t||u(j,W);return n&&t}function cg(j){var n=l(j),t=!1;return n&&(t=j.filter(function(y){return!E(y)&&kk(j)}).length===0),n&&t}function Gh(j){var n=q(j)&&!v(j),t=!1,y=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],C,W;for(C=0;C<y.length;C+=1)W=y[C],t=t||u(j,W);return n&&t}function Xb(j,n){var t=j.diff(n,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function Hh(j,n){arguments.length===1&&(arguments[0]?Zo(arguments[0])?(j=arguments[0],n=void 0):Gh(arguments[0])&&(n=arguments[0],j=void 0):(j=void 0,n=void 0));var t=j||Wa(),y=$f(t,this).startOf("day"),C=f.calendarFormat(this,y)||"sameElse",W=n&&(J(n[C])?n[C].call(this,t):n[C]);return this.format(W||this.localeData().calendar(C,this,Wa(t)))}function $o(){return new ja(this)}function lk(j,n){var t=I(j)?j:Wa(j);return this.isValid()&&t.isValid()?(n=Va(n)||"millisecond",n==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(n).valueOf()):!1}function ap(j,n){var t=I(j)?j:Wa(j);return this.isValid()&&t.isValid()?(n=Va(n)||"millisecond",n==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(n).valueOf()<t.valueOf()):!1}function bp(j,n,t,y){var C=I(j)?j:Wa(j),W=I(n)?n:Wa(n);return this.isValid()&&C.isValid()&&W.isValid()?(y=y||"()",(y[0]==="("?this.isAfter(C,t):!this.isBefore(C,t))&&(y[1]===")"?this.isBefore(W,t):!this.isAfter(W,t))):!1}function Fd(j,n){var t=I(j)?j:Wa(j),y;return this.isValid()&&t.isValid()?(n=Va(n)||"millisecond",n==="millisecond"?this.valueOf()===t.valueOf():(y=t.valueOf(),this.clone().startOf(n).valueOf()<=y&&y<=this.clone().endOf(n).valueOf())):!1}function cp(j,n){return this.isSame(j,n)||this.isAfter(j,n)}function dg(j,n){return this.isSame(j,n)||this.isBefore(j,n)}function dp(j,n,t){var y,C,W;if(!this.isValid())return NaN;y=$f(j,this);if(!y.isValid())return NaN;C=(y.utcOffset()-this.utcOffset())*6e4,n=Va(n);switch(n){case"year":W=eg(this,y)/12;break;case"month":W=eg(this,y);break;case"quarter":W=eg(this,y)/3;break;case"second":W=(this-y)/1e3;break;case"minute":W=(this-y)/6e4;break;case"hour":W=(this-y)/36e5;break;case"day":W=(this-y-C)/864e5;break;case"week":W=(this-y-C)/6048e5;break;default:W=this-y}return t?W:X(W)}function eg(j,n){if(j.date()<n.date())return-eg(n,j);var t=(n.year()-j.year())*12+(n.month()-j.month()),y=j.clone().add(t,"months"),C,W;return n-y<0?(C=j.clone().add(t-1,"months"),W=(n-y)/(y-C)):(C=j.clone().add(t+1,"months"),W=(n-y)/(C-y)),-(t+W)||0}f.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",f.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function ep(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function fp(j){if(!this.isValid())return null;var n=j!==!0,t=n?this.clone().utc():this;return t.year()<0||t.year()>9999?hb(t,n?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):J(Date.prototype.toISOString)?n?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",hb(t,"Z")):hb(t,n?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function gp(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var j="moment",n="",t,y,C,W;return this.isLocal()||(j=this.utcOffset()===0?"moment.utc":"moment.parseZone",n="Z"),t="["+j+'("]',y=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",C="-MM-DD[T]HH:mm:ss.SSS",W=n+'[")]',this.format(t+y+C+W)}function hp(j){j||(j=this.isUtc()?f.defaultFormatUtc:f.defaultFormat);var n=hb(this,j);return this.localeData().postformat(n)}function mk(j,n){return this.isValid()&&(I(j)&&j.isValid()||Wa(j).isValid())?tc({to:this,from:j}).locale(this.locale()).humanize(!n):this.localeData().invalidDate()}function ip(j){return this.from(Wa(),j)}function Ih(j,n){return this.isValid()&&(I(j)&&j.isValid()||Wa(j).isValid())?tc({from:this,to:j}).locale(this.locale()).humanize(!n):this.localeData().invalidDate()}function Yb(j){return this.to(Wa(),j)}function nk(j){var n;return j===void 0?this._locale._abbr:(n=rc(j),n!=null&&(this._locale=n),this)}var ok=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(j){return j===void 0?this.localeData():this.locale(j)});function lf(){return this._locale}var mf=1e3,ke=60*mf,Gd=60*ke,fg=(365*400+97)*24*Gd;function Hd(j,n){return(j%n+n)%n}function pk(j,n,t){return j<100&&j>=0?new Date(j+400,n,t)-fg:new Date(j,n,t).valueOf()}function gg(j,n,t){return j<100&&j>=0?Date.UTC(j+400,n,t)-fg:Date.UTC(j,n,t)}function jp(j){var n,t;j=Va(j);if(j===void 0||j==="millisecond"||!this.isValid())return this;t=this._isUTC?gg:pk;switch(j){case"year":n=t(this.year(),0,1);break;case"quarter":n=t(this.year(),this.month()-this.month()%3,1);break;case"month":n=t(this.year(),this.month(),1);break;case"week":n=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":n=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":n=t(this.year(),this.month(),this.date());break;case"hour":n=this._d.valueOf(),n-=Hd(n+(this._isUTC?0:this.utcOffset()*ke),Gd);break;case"minute":n=this._d.valueOf(),n-=Hd(n,ke);break;case"second":n=this._d.valueOf(),n-=Hd(n,mf);break}return this._d.setTime(n),f.updateOffset(this,!0),this}function qk(j){var n,t;j=Va(j);if(j===void 0||j==="millisecond"||!this.isValid())return this;t=this._isUTC?gg:pk;switch(j){case"year":n=t(this.year()+1,0,1)-1;break;case"quarter":n=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":n=t(this.year(),this.month()+1,1)-1;break;case"week":n=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":n=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":n=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":n=this._d.valueOf(),n+=Gd-Hd(n+(this._isUTC?0:this.utcOffset()*ke),Gd)-1;break;case"minute":n=this._d.valueOf(),n+=ke-Hd(n,ke)-1;break;case"second":n=this._d.valueOf(),n+=mf-Hd(n,mf)-1;break}return this._d.setTime(n),f.updateOffset(this,!0),this}function kp(){return this._d.valueOf()-(this._offset||0)*6e4}function lp(){return Math.floor(this.valueOf()/1e3)}function mp(){return new Date(this.valueOf())}function np(){var j=this;return[j.year(),j.month(),j.date(),j.hour(),j.minute(),j.second(),j.millisecond()]}function op(){var j=this;return{years:j.year(),months:j.month(),date:j.date(),hours:j.hours(),minutes:j.minutes(),seconds:j.seconds(),milliseconds:j.milliseconds()}}function pp(){return this.isValid()?this.toISOString():null}function hg(){return ga(this)}function rk(){return N({},Y(this))}function qp(){return Y(this).overflow}function Jh(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ma("N",0,0,"eraAbbr"),ma("NN",0,0,"eraAbbr"),ma("NNN",0,0,"eraAbbr"),ma("NNNN",0,0,"eraName"),ma("NNNNN",0,0,"eraNarrow"),ma("y",["y",1],"yo","eraYear"),ma("y",["yy",2],0,"eraYear"),ma("y",["yyy",3],0,"eraYear"),ma("y",["yyyy",4],0,"eraYear"),ua("N",Lh),ua("NN",Lh),ua("NNN",Lh),ua("NNNN",tp),ua("NNNNN",le),kb(["N","NN","NNN","NNNN","NNNNN"],function(j,n,t,y){var C=t._locale.erasParse(j,y,t._strict);C?Y(t).era=C:Y(t).invalidEra=j}),ua("y",$d),ua("yy",$d),ua("yyy",$d),ua("yyyy",$d),ua("yo",Mh),kb(["y","yy","yyy","yyyy"],mb),kb(["yo"],function(j,n,t,y){var C;t._locale._eraYearOrdinalRegex&&(C=j.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?n[mb]=t._locale.eraYearOrdinalParse(j,C):n[mb]=parseInt(j,10)});function sk(j,n){var t,y,C,W=this._eras||rc("en")._eras;for(t=0,y=W.length;t<y;++t){switch(typeof W[t].since){case"string":C=f(W[t].since).startOf("day"),W[t].since=C.valueOf();break}switch(typeof W[t].until){case"undefined":W[t].until=Infinity;break;case"string":C=f(W[t].until).startOf("day").valueOf(),W[t].until=C.valueOf();break}}return W}function rp(j,n,t){var y,C,W=this.eras(),ea,Fa,Ua;for(j=j.toUpperCase(),y=0,C=W.length;y<C;++y){ea=W[y].name.toUpperCase(),Fa=W[y].abbr.toUpperCase(),Ua=W[y].narrow.toUpperCase();if(t)switch(n){case"N":case"NN":case"NNN":if(Fa===j)return W[y];break;case"NNNN":if(ea===j)return W[y];break;case"NNNNN":if(Ua===j)return W[y];break}else if([ea,Fa,Ua].indexOf(j)>=0)return W[y]}}function tk(j,n){var t=j.since<=j.until?1:-1;return n===void 0?f(j.since).year():f(j.since).year()+(n-j.offset)*t}function Kh(){var j,n,t,y=this.localeData().eras();for(j=0,n=y.length;j<n;++j){t=this.clone().startOf("day").valueOf();if(y[j].since<=t&&t<=y[j].until)return y[j].name;if(y[j].until<=t&&t<=y[j].since)return y[j].name}return""}function ig(){var j,n,t,y=this.localeData().eras();for(j=0,n=y.length;j<n;++j){t=this.clone().startOf("day").valueOf();if(y[j].since<=t&&t<=y[j].until)return y[j].narrow;if(y[j].until<=t&&t<=y[j].since)return y[j].narrow}return""}function Zb(){var j,n,t,y=this.localeData().eras();for(j=0,n=y.length;j<n;++j){t=this.clone().startOf("day").valueOf();if(y[j].since<=t&&t<=y[j].until)return y[j].abbr;if(y[j].until<=t&&t<=y[j].since)return y[j].abbr}return""}function uk(){var j,n,t,y,C=this.localeData().eras();for(j=0,n=C.length;j<n;++j){t=C[j].since<=C[j].until?1:-1,y=this.clone().startOf("day").valueOf();if(C[j].since<=y&&y<=C[j].until||C[j].until<=y&&y<=C[j].since)return(this.year()-f(C[j].since).year())*t+C[j].offset}return this.year()}function sp(j){return u(this,"_erasNameRegex")||Sc.call(this),j?this._erasNameRegex:this._erasRegex}function vk(j){return u(this,"_erasAbbrRegex")||Sc.call(this),j?this._erasAbbrRegex:this._erasRegex}function wk(j){return u(this,"_erasNarrowRegex")||Sc.call(this),j?this._erasNarrowRegex:this._erasRegex}function Lh(j,n){return n.erasAbbrRegex(j)}function tp(j,n){return n.erasNameRegex(j)}function le(j,n){return n.erasNarrowRegex(j)}function Mh(j,n){return n._eraYearOrdinalRegex||$d}function Sc(){var j=[],n=[],t=[],y=[],C,W,ea=this.eras();for(C=0,W=ea.length;C<W;++C)n.push(Ib(ea[C].name)),j.push(Ib(ea[C].abbr)),t.push(Ib(ea[C].narrow)),y.push(Ib(ea[C].name)),y.push(Ib(ea[C].abbr)),y.push(Ib(ea[C].narrow));this._erasRegex=new RegExp("^("+y.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+n.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+j.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}ma(0,["gg",2],0,function(){return this.weekYear()%100}),ma(0,["GG",2],0,function(){return this.isoWeekYear()%100});function nf(j,n){ma(0,[j,j.length],0,n)}nf("gggg","weekYear"),nf("ggggg","weekYear"),nf("GGGG","isoWeekYear"),nf("GGGGG","isoWeekYear"),Ja("weekYear","gg"),Ja("isoWeekYear","GG"),ob("weekYear",1),ob("isoWeekYear",1),ua("G",Pf),ua("g",Pf),ua("GG",Ka,Ta),ua("gg",Ka,Ta),ua("GGGG",B,Mb),ua("gggg",B,Mb),ua("GGGGG",Of,Db),ua("ggggg",Of,Db),ae(["gggg","ggggg","GGGG","GGGGG"],function(j,n,t,y){n[y.substr(0,2)]=L(j)}),ae(["gg","GG"],function(j,n,t,y){n[y]=f.parseTwoDigitYear(j)});function up(j){return yk.call(this,j,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function vp(j){return yk.call(this,j,this.isoWeek(),this.isoWeekday(),1,4)}function wp(){return Oc(this.year(),1,4)}function xp(){return Oc(this.isoWeekYear(),1,4)}function yp(){var j=this.localeData()._week;return Oc(this.year(),j.dow,j.doy)}function xk(){var j=this.localeData()._week;return Oc(this.weekYear(),j.dow,j.doy)}function yk(j,n,t,y,C){var W;return j==null?vd(this,y,C).year:(W=Oc(j,y,C),n>W&&(n=W),zk.call(this,j,n,t,y,C))}function zk(j,n,t,y,C){var W=nh(j,n,t,y,C),ea=Ze(W.year,0,W.dayOfYear);return this.year(ea.getUTCFullYear()),this.month(ea.getUTCMonth()),this.date(ea.getUTCDate()),this}ma("Q",0,"Qo","quarter"),Ja("quarter","Q"),ob("quarter",7),ua("Q",pb),kb("Q",function(j,n){n[Jb]=(L(j)-1)*3});function zp(j){return j==null?Math.ceil((this.month()+1)/3):this.month((j-1)*3+this.month()%3)}ma("D",["DD",2],"Do","date"),Ja("date","D"),ob("date",9),ua("D",Ka),ua("DD",Ka,Ta),ua("Do",function(j,n){return j?n._dayOfMonthOrdinalParse||n._ordinalParse:n._dayOfMonthOrdinalParseLenient}),kb(["D","DD"],pc),kb("Do",function(j,n){n[pc]=L(j.match(Ka)[0])});var Ak=_("Date",!0);ma("DDD",["DDDD",3],"DDDo","dayOfYear"),Ja("dayOfYear","DDD"),ob("dayOfYear",4),ua("DDD",Nf),ua("DDDD",lb),kb(["DDD","DDDD"],function(j,n,t){t._dayOfYear=L(j)});function Ap(j){var n=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return j==null?n:this.add(j-n,"d")}ma("m",["mm",2],0,"minute"),Ja("minute","m"),ob("minute",14),ua("m",Ka),ua("mm",Ka,Ta),kb(["m","mm"],qc);var Bp=_("Minutes",!1);ma("s",["ss",2],0,"second"),Ja("second","s"),ob("second",15),ua("s",Ka),ua("ss",Ka,Ta),kb(["s","ss"],Nc);var Cp=_("Seconds",!1);ma("S",0,0,function(){return~~(this.millisecond()/100)}),ma(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),ma(0,["SSS",3],0,"millisecond"),ma(0,["SSSS",4],0,function(){return this.millisecond()*10}),ma(0,["SSSSS",5],0,function(){return this.millisecond()*100}),ma(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),ma(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),ma(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),ma(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),Ja("millisecond","ms"),ob("millisecond",16),ua("S",Nf,pb),ua("SS",Nf,Ta),ua("SSS",Nf,lb);var gd,Bk;for(gd="SSSS";gd.length<=9;gd+="S")ua(gd,$d);function Dp(j,n){n[cd]=L(("0."+j)*1e3)}for(gd="S";gd.length<=9;gd+="S")kb(gd,Dp);Bk=_("Milliseconds",!1),ma("z",0,0,"zoneAbbr"),ma("zz",0,0,"zoneName");function Ep(){return this._isUTC?"UTC":""}function Fp(){return this._isUTC?"Coordinated Universal Time":""}var ka=ja.prototype;ka.add=Fh,ka.calendar=Hh,ka.clone=$o,ka.diff=dp,ka.endOf=qk,ka.format=hp,ka.from=mk,ka.fromNow=ip,ka.to=Ih,ka.toNow=Yb,ka.get=za,ka.invalidAt=qp,ka.isAfter=lk,ka.isBefore=ap,ka.isBetween=bp,ka.isSame=Fd,ka.isSameOrAfter=cp,ka.isSameOrBefore=dg,ka.isValid=hg,ka.lang=ok,ka.locale=nk,ka.localeData=lf,ka.max=gk,ka.min=Oo,ka.parsingFlags=rk,ka.set=Ra,ka.startOf=jp,ka.subtract=Yo,ka.toArray=np,ka.toObject=op,ka.toDate=mp,ka.toISOString=fp,ka.inspect=gp,typeof Symbol!=="undefined"&&Symbol.for!=null&&(ka[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ka.toJSON=pp,ka.toString=ep,ka.unix=lp,ka.valueOf=kp,ka.creationData=Jh,ka.eraName=Kh,ka.eraNarrow=ig,ka.eraAbbr=Zb,ka.eraYear=uk,ka.year=ce,ka.isLeapYear=de,ka.weekYear=up,ka.isoWeekYear=vp,ka.quarter=ka.quarters=zp,ka.month=Vj,ka.daysInMonth=Wb,ka.week=ka.weeks=xd,ka.isoWeek=ka.isoWeeks=Xj,ka.weeksInYear=yp,ka.weeksInWeekYear=xk,ka.isoWeeksInYear=wp,ka.isoWeeksInISOWeekYear=xp,ka.date=Ak,ka.day=ka.days=Zj,ka.weekday=zd,ka.isoWeekday=_e,ka.dayOfYear=Ap,ka.hour=ka.hours=Eo,ka.minute=ka.minutes=Bp,ka.second=ka.seconds=Cp,ka.millisecond=ka.milliseconds=Bk,ka.utcOffset=Ma,ka.utc=Ad,ka.local=ag,ka.parseZone=Vo,ka.hasAlignedHourOffset=Ch,ka.isDST=jf,ka.isLocal=kf,ka.isUtcOffset=Cd,ka.isUtc=Dd,ka.isUTC=Dd,ka.zoneAbbr=Ep,ka.zoneName=Fp,ka.dates=x("dates accessor is deprecated. Use date instead.",Ak),ka.months=x("months accessor is deprecated. Use month instead",Vj),ka.years=x("years accessor is deprecated. Use year instead",ce),ka.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Uo),ka.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Bd);function Ck(j){return Wa(j*1e3)}function Gp(){return Wa.apply(null,arguments).parseZone()}function Dk(j){return j}var $a=ca.prototype;$a.calendar=$,$a.longDateFormat=Za,$a.invalidDate=qa,$a.ordinal=ta,$a.preparse=Dk,$a.postformat=Dk,$a.relativeTime=cb,$a.pastFuture=Da,$a.set=U,$a.eras=sk,$a.erasParse=rp,$a.erasConvertYear=tk,$a.erasAbbrRegex=vk,$a.erasNameRegex=sp,$a.erasNarrowRegex=wk,$a.months=Uj,$a.monthsShort=no,$a.monthsParse=po,$a.monthsRegex=ro,$a.monthsShortRegex=qo,$a.week=to,$a.firstDayOfYear=Pc,$a.firstDayOfWeek=wd,$a.weekdays=yo,$a.weekdaysMin=yd,$a.weekdaysShort=zo,$a.weekdaysParse=Bo,$a.weekdaysRegex=rh,$a.weekdaysShortRegex=sh,$a.weekdaysMinRegex=th,$a.isPM=Co,$a.meridiem=_j;function uc(j,n,t,y){var C=rc(),W=P().set(y,n);return C[t](W,j)}function Tc(j,n,t){E(j)&&(n=j,j=void 0),j=j||"";if(n!=null)return uc(j,n,t,"month");var y,C=[];for(y=0;y<12;y++)C[y]=uc(j,y,t,"month");return C}function of(j,n,t,y){typeof j==="boolean"?(E(n)&&(t=n,n=void 0),n=n||""):(n=j,t=n,j=!1,E(n)&&(t=n,n=void 0),n=n||"");var C=rc(),W=j?C._week.dow:0,ea,Fa=[];if(t!=null)return uc(n,(t+W)%7,y,"day");for(ea=0;ea<7;ea++)Fa[ea]=uc(n,(ea+W)%7,y,"day");return Fa}function Ek(j,n){return Tc(j,n,"months")}function Fk(j,n){return Tc(j,n,"monthsShort")}function Hp(j,n,t){return of(j,n,t,"weekdays")}function Uc(j,n,t){return of(j,n,t,"weekdaysShort")}function Gk(j,n,t){return of(j,n,t,"weekdaysMin")}fd("en",{eras:[{since:"0001-01-01",until:Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(j){var n=j%10,t=L(j%100/10)===1?"th":n===1?"st":n===2?"nd":n===3?"rd":"th";return j+t}}),f.lang=x("moment.lang is deprecated. Use moment.locale instead.",fd),f.langData=x("moment.langData is deprecated. Use moment.localeData instead.",rc);var Gc=Math.abs;function Ip(){var j=this._data;return this._milliseconds=Gc(this._milliseconds),this._days=Gc(this._days),this._months=Gc(this._months),j.milliseconds=Gc(j.milliseconds),j.seconds=Gc(j.seconds),j.minutes=Gc(j.minutes),j.hours=Gc(j.hours),j.months=Gc(j.months),j.years=Gc(j.years),this}function Vc(j,n,t,y){var C=tc(n,t);return j._milliseconds+=y*C._milliseconds,j._days+=y*C._days,j._months+=y*C._months,j._bubble()}function Jp(j,n){return Vc(this,j,n,1)}function Kp(j,n){return Vc(this,j,n,-1)}function Hk(j){return j<0?Math.floor(j):Math.ceil(j)}function Ik(){var j=this._milliseconds,n=this._days,t=this._months,y=this._data,C,W,ea,Fa,Ua;return j>=0&&n>=0&&t>=0||j<=0&&n<=0&&t<=0||(j+=Hk(b(t)+n)*864e5,n=0,t=0),y.milliseconds=j%1e3,C=X(j/1e3),y.seconds=C%60,W=X(C/60),y.minutes=W%60,ea=X(W/60),y.hours=ea%24,n+=X(ea/24),Ua=X(Jk(n)),t+=Ua,n-=Hk(b(Ua)),Fa=X(t/12),t%=12,y.days=n,y.months=t,y.years=Fa,this}function Jk(j){return j*4800/146097}function b(j){return j*146097/4800}function e(j){if(!this.isValid())return NaN;var n,t,y=this._milliseconds;j=Va(j);if(j==="month"||j==="quarter"||j==="year"){n=this._days+y/864e5,t=this._months+Jk(n);switch(j){case"month":return t;case"quarter":return t/3;case"year":return t/12}}else{n=this._days+Math.round(b(this._months));switch(j){case"week":return n/7+y/6048e5;case"day":return n+y/864e5;case"hour":return n*24+y/36e5;case"minute":return n*1440+y/6e4;case"second":return n*86400+y/1e3;case"millisecond":return Math.floor(n*864e5)+y;default:throw new Error("Unknown unit "+j)}}}function g(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+L(this._months/12)*31536e6:NaN}function h(j){return function(){return this.as(j)}}var k=h("ms"),m=h("s"),o=h("m"),r=h("h"),p=h("d"),s=h("w"),w=h("M"),z=h("Q"),D=h("y");function M(){return tc(this)}function Q(j){return j=Va(j),this.isValid()?this[j+"s"]():NaN}function T(j){return function(){return this.isValid()?this._data[j]:NaN}}var Z=T("milliseconds"),ha=T("seconds"),wa=T("minutes"),Aa=T("hours"),Na=T("days"),Ha=T("months"),Xa=T("years");function ib(){return X(this.days()/7)}var ab=Math.round,db={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Kb(j,n,t,y,C){return C.relativeTime(n||1,!!t,j,y)}function Fb(j,n,t,y){var C=tc(j).abs(),W=ab(C.as("s")),ea=ab(C.as("m")),Fa=ab(C.as("h")),Ua=ab(C.as("d")),rb=ab(C.as("M")),jd=ab(C.as("w")),Id=ab(C.as("y")),ne=W<=t.ss&&["s",W]||W<t.s&&["ss",W]||ea<=1&&["m"]||ea<t.m&&["mm",ea]||Fa<=1&&["h"]||Fa<t.h&&["hh",Fa]||Ua<=1&&["d"]||Ua<t.d&&["dd",Ua];return t.w!=null&&(ne=ne||jd<=1&&["w"]||jd<t.w&&["ww",jd]),ne=ne||rb<=1&&["M"]||rb<t.M&&["MM",rb]||Id<=1&&["y"]||["yy",Id],ne[2]=n,ne[3]=+j>0,ne[4]=y,Kb.apply(null,ne)}function Bb(j){return j===void 0?ab:typeof j==="function"?(ab=j,!0):!1}function Nb(j,n){return db[j]===void 0?!1:n===void 0?db[j]:(db[j]=n,j==="s"&&(db.ss=n-1),!0)}function me(j,n){if(!this.isValid())return this.localeData().invalidDate();var t=!1,y=db,C,W;return typeof j==="object"&&(n=j,j=!1),typeof j==="boolean"&&(t=j),typeof n==="object"&&(y=Object.assign({},db,n),n.s!=null&&n.ss==null&&(y.ss=n.s-1)),C=this.localeData(),W=Fb(this,!t,y,C),t&&(W=C.pastFuture(+this,W)),C.postformat(W)}var hd=Math.abs;function id(j){return(j>0)-(j<0)||+j}function jg(){if(!this.isValid())return this.localeData().invalidDate();var j=hd(this._milliseconds)/1e3,n=hd(this._days),t=hd(this._months),y,C,W,ea,Fa=this.asSeconds(),Ua,rb,jd,Id;return Fa?(y=X(j/60),C=X(y/60),j%=60,y%=60,W=X(t/12),t%=12,ea=j?j.toFixed(3).replace(/\.?0+$/,""):"",Ua=Fa<0?"-":"",rb=id(this._months)!==id(Fa)?"-":"",jd=id(this._days)!==id(Fa)?"-":"",Id=id(this._milliseconds)!==id(Fa)?"-":"",Ua+"P"+(W?rb+W+"Y":"")+(t?rb+t+"M":"")+(n?jd+n+"D":"")+(C||y||j?"T":"")+(C?Id+C+"H":"")+(y?Id+y+"M":"")+(j?Id+ea+"S":"")):"P0D"}var bb=ie.prototype;bb.isValid=So,bb.abs=Ip,bb.add=Jp,bb.subtract=Kp,bb.as=e,bb.asMilliseconds=k,bb.asSeconds=m,bb.asMinutes=o,bb.asHours=r,bb.asDays=p,bb.asWeeks=s,bb.asMonths=w,bb.asQuarters=z,bb.asYears=D,bb.valueOf=g,bb._bubble=Ik,bb.clone=M,bb.get=Q,bb.milliseconds=Z,bb.seconds=ha,bb.minutes=wa,bb.hours=Aa,bb.days=Na,bb.weeks=ib,bb.months=Ha,bb.years=Xa,bb.humanize=me,bb.toISOString=jg,bb.toString=jg,bb.toJSON=jg,bb.locale=nk,bb.localeData=lf,bb.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",jg),bb.lang=ok,ma("X",0,0,"unix"),ma("x",0,0,"valueOf"),ua("x",Pf),ua("X",jo),kb("X",function(j,n,t){t._d=new Date(parseFloat(j)*1e3)}),kb("x",function(j,n,t){t._d=new Date(L(j))});return f.version="2.29.0",i(Wa),f.fn=ka,f.min=Po,f.max=Qo,f.now=Zf,f.utc=P,f.unix=Ck,f.months=Ek,f.isDate=H,f.locale=fd,f.invalid=la,f.duration=tc,f.isMoment=I,f.weekdays=Hp,f.parseZone=Gp,f.localeData=rc,f.isDuration=gf,f.monthsShort=Fk,f.weekdaysMin=Gk,f.defineLocale=vh,f.updateLocale=Sb,f.locales=wh,f.weekdaysShort=Uc,f.normalizeUnits=Va,f.relativeTimeRounding=Bb,f.relativeTimeThreshold=Nb,f.calendarFormat=Xb,f.prototype=ka,f.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},f})});var Oq=Ec((a,c)=>{(function(d,f){typeof a==="object"&&typeof c!=="undefined"?c.exports=f(function(){try{return Pq()}catch(i){}}()):typeof define==="function"&&define.amd?define(["require"],function(i){return f(function(){try{return i("moment")}catch(l){}}())}):(d=d||self,d.Chart=f(d.moment))})(a,function(d){"use strict";d=d&&d.hasOwnProperty("default")?d.default:d;function f(b,e){return e={exports:{}},b(e,e.exports),e.exports}function i(b){return b&&b.default||b}var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},q=f(function(b){var e={};for(var g in l)l.hasOwnProperty(g)&&(e[l[g]]=g);var h=b.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var k in h)if(h.hasOwnProperty(k)){if(!("channels"in h[k]))throw new Error("missing channels property: "+k);if(!("labels"in h[k]))throw new Error("missing channel labels property: "+k);if(h[k].labels.length!==h[k].channels)throw new Error("channel and label counts mismatch: "+k);var m=h[k].channels,o=h[k].labels;delete h[k].channels,delete h[k].labels,Object.defineProperty(h[k],"channels",{value:m}),Object.defineProperty(h[k],"labels",{value:o})}h.rgb.hsl=function(p){var s=p[0]/255,w=p[1]/255,z=p[2]/255,D=Math.min(s,w,z),M=Math.max(s,w,z),Q=M-D,T,Z,ha;return M===D?T=0:s===M?T=(w-z)/Q:w===M?T=2+(z-s)/Q:z===M&&(T=4+(s-w)/Q),T=Math.min(T*60,360),T<0&&(T+=360),ha=(D+M)/2,M===D?Z=0:ha<=.5?Z=Q/(M+D):Z=Q/(2-M-D),[T,Z*100,ha*100]},h.rgb.hsv=function(p){var s,w,z,D,M,Q=p[0]/255,T=p[1]/255,Z=p[2]/255,ha=Math.max(Q,T,Z),wa=ha-Math.min(Q,T,Z),Aa=function(Na){return(ha-Na)/6/wa+1/2};return wa===0?D=M=0:(M=wa/ha,s=Aa(Q),w=Aa(T),z=Aa(Z),Q===ha?D=z-w:T===ha?D=1/3+s-z:Z===ha&&(D=2/3+w-s),D<0?D+=1:D>1&&(D-=1)),[D*360,M*100,ha*100]},h.rgb.hwb=function(p){var s=p[0],w=p[1],z=p[2],D=h.rgb.hsl(p)[0],M=1/255*Math.min(s,Math.min(w,z));return z=1-1/255*Math.max(s,Math.max(w,z)),[D,M*100,z*100]},h.rgb.cmyk=function(p){var s=p[0]/255,w=p[1]/255,z=p[2]/255,D,M,Q,T;return T=Math.min(1-s,1-w,1-z),D=(1-s-T)/(1-T)||0,M=(1-w-T)/(1-T)||0,Q=(1-z-T)/(1-T)||0,[D*100,M*100,Q*100,T*100]};function r(p,s){return Math.pow(p[0]-s[0],2)+Math.pow(p[1]-s[1],2)+Math.pow(p[2]-s[2],2)}h.rgb.keyword=function(p){var s=e[p];if(s)return s;var w=Infinity,z;for(var D in l)if(l.hasOwnProperty(D)){var M=l[D],Q=r(p,M);Q<w&&(w=Q,z=D)}return z},h.keyword.rgb=function(p){return l[p]},h.rgb.xyz=function(p){var s=p[0]/255,w=p[1]/255,z=p[2]/255;s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,w=w>.04045?Math.pow((w+.055)/1.055,2.4):w/12.92,z=z>.04045?Math.pow((z+.055)/1.055,2.4):z/12.92;var D=s*.4124+w*.3576+z*.1805,M=s*.2126+w*.7152+z*.0722,Q=s*.0193+w*.1192+z*.9505;return[D*100,M*100,Q*100]},h.rgb.lab=function(p){var s=h.rgb.xyz(p),w=s[0],z=s[1],D=s[2],M,Q,T;return w/=95.047,z/=100,D/=108.883,w=w>.008856?Math.pow(w,1/3):7.787*w+16/116,z=z>.008856?Math.pow(z,1/3):7.787*z+16/116,D=D>.008856?Math.pow(D,1/3):7.787*D+16/116,M=116*z-16,Q=500*(w-z),T=200*(z-D),[M,Q,T]},h.hsl.rgb=function(p){var s=p[0]/360,w=p[1]/100,z=p[2]/100,D,M,Q,T,Z;if(w===0)return Z=z*255,[Z,Z,Z];z<.5?M=z*(1+w):M=z+w-z*w,D=2*z-M,T=[0,0,0];for(var ha=0;ha<3;ha++)Q=s+1/3*-(ha-1),Q<0&&Q++,Q>1&&Q--,6*Q<1?Z=D+(M-D)*6*Q:2*Q<1?Z=M:3*Q<2?Z=D+(M-D)*(2/3-Q)*6:Z=D,T[ha]=Z*255;return T},h.hsl.hsv=function(p){var s=p[0],w=p[1]/100,z=p[2]/100,D=w,M=Math.max(z,.01),Q,T;return z*=2,w*=z<=1?z:2-z,D*=M<=1?M:2-M,T=(z+w)/2,Q=z===0?2*D/(M+D):2*w/(z+w),[s,Q*100,T*100]},h.hsv.rgb=function(p){var s=p[0]/60,w=p[1]/100,z=p[2]/100,D=Math.floor(s)%6,M=s-Math.floor(s),Q=255*z*(1-w),T=255*z*(1-w*M),Z=255*z*(1-w*(1-M));z*=255;switch(D){case 0:return[z,Z,Q];case 1:return[T,z,Q];case 2:return[Q,z,Z];case 3:return[Q,T,z];case 4:return[Z,Q,z];case 5:return[z,Q,T]}},h.hsv.hsl=function(p){var s=p[0],w=p[1]/100,z=p[2]/100,D=Math.max(z,.01),M,Q,T;return T=(2-w)*z,M=(2-w)*D,Q=w*D,Q/=M<=1?M:2-M,Q=Q||0,T/=2,[s,Q*100,T*100]},h.hwb.rgb=function(p){var s=p[0]/360,w=p[1]/100,z=p[2]/100,D=w+z,M,Q,T,Z;D>1&&(w/=D,z/=D),M=Math.floor(6*s),Q=1-z,T=6*s-M,(M&1)!==0&&(T=1-T),Z=w+T*(Q-w);var ha,wa,Aa;switch(M){default:case 6:case 0:ha=Q,wa=Z,Aa=w;break;case 1:ha=Z,wa=Q,Aa=w;break;case 2:ha=w,wa=Q,Aa=Z;break;case 3:ha=w,wa=Z,Aa=Q;break;case 4:ha=Z,wa=w,Aa=Q;break;case 5:ha=Q,wa=w,Aa=Z;break}return[ha*255,wa*255,Aa*255]},h.cmyk.rgb=function(p){var s=p[0]/100,w=p[1]/100,z=p[2]/100,D=p[3]/100,M,Q,T;return M=1-Math.min(1,s*(1-D)+D),Q=1-Math.min(1,w*(1-D)+D),T=1-Math.min(1,z*(1-D)+D),[M*255,Q*255,T*255]},h.xyz.rgb=function(p){var s=p[0]/100,w=p[1]/100,z=p[2]/100,D,M,Q;return D=s*3.2406+w*-1.5372+z*-.4986,M=s*-.9689+w*1.8758+z*.0415,Q=s*.0557+w*-.204+z*1.057,D=D>.0031308?1.055*Math.pow(D,1/2.4)-.055:D*12.92,M=M>.0031308?1.055*Math.pow(M,1/2.4)-.055:M*12.92,Q=Q>.0031308?1.055*Math.pow(Q,1/2.4)-.055:Q*12.92,D=Math.min(Math.max(0,D),1),M=Math.min(Math.max(0,M),1),Q=Math.min(Math.max(0,Q),1),[D*255,M*255,Q*255]},h.xyz.lab=function(p){var s=p[0],w=p[1],z=p[2],D,M,Q;return s/=95.047,w/=100,z/=108.883,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,w=w>.008856?Math.pow(w,1/3):7.787*w+16/116,z=z>.008856?Math.pow(z,1/3):7.787*z+16/116,D=116*w-16,M=500*(s-w),Q=200*(w-z),[D,M,Q]},h.lab.xyz=function(p){var s=p[0],w=p[1],z=p[2],D,M,Q;M=(s+16)/116,D=w/500+M,Q=M-z/200;var T=Math.pow(M,3),Z=Math.pow(D,3),ha=Math.pow(Q,3);return M=T>.008856?T:(M-16/116)/7.787,D=Z>.008856?Z:(D-16/116)/7.787,Q=ha>.008856?ha:(Q-16/116)/7.787,D*=95.047,M*=100,Q*=108.883,[D,M,Q]},h.lab.lch=function(p){var s=p[0],w=p[1],z=p[2],D,M,Q;return D=Math.atan2(z,w),M=D*360/2/Math.PI,M<0&&(M+=360),Q=Math.sqrt(w*w+z*z),[s,Q,M]},h.lch.lab=function(p){var s=p[0],w=p[1],z=p[2],D,M,Q;return Q=z/360*2*Math.PI,D=w*Math.cos(Q),M=w*Math.sin(Q),[s,D,M]},h.rgb.ansi16=function(p){var s=p[0],w=p[1],z=p[2],D=1 in arguments?arguments[1]:h.rgb.hsv(p)[2];D=Math.round(D/50);if(D===0)return 30;var M=30+(Math.round(z/255)<<2|Math.round(w/255)<<1|Math.round(s/255));return D===2&&(M+=60),M},h.hsv.ansi16=function(p){return h.rgb.ansi16(h.hsv.rgb(p),p[2])},h.rgb.ansi256=function(p){var s=p[0],w=p[1],z=p[2];if(s===w&&w===z)return s<8?16:s>248?231:Math.round((s-8)/247*24)+232;var D=16+36*Math.round(s/255*5)+6*Math.round(w/255*5)+Math.round(z/255*5);return D},h.ansi16.rgb=function(p){var s=p%10;if(s===0||s===7)return p>50&&(s+=3.5),s=s/10.5*255,[s,s,s];var w=(~~(p>50)+1)*.5,z=(s&1)*w*255,D=(s>>1&1)*w*255,M=(s>>2&1)*w*255;return[z,D,M]},h.ansi256.rgb=function(p){if(p>=232){var s=(p-232)*10+8;return[s,s,s]}p-=16;var w,z=Math.floor(p/36)/5*255,D=Math.floor((w=p%36)/6)/5*255,M=w%6/5*255;return[z,D,M]},h.rgb.hex=function(p){var s=((Math.round(p[0])&255)<<16)+((Math.round(p[1])&255)<<8)+(Math.round(p[2])&255),w=s.toString(16).toUpperCase();return"000000".substring(w.length)+w},h.hex.rgb=function(p){var s=p.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!s)return[0,0,0];var w=s[0];s[0].length===3&&(w=w.split("").map(function(T){return T+T}).join(""));var z=parseInt(w,16),D=z>>16&255,M=z>>8&255,Q=z&255;return[D,M,Q]},h.rgb.hcg=function(p){var s=p[0]/255,w=p[1]/255,z=p[2]/255,D=Math.max(Math.max(s,w),z),M=Math.min(Math.min(s,w),z),Q=D-M,T,Z;return Q<1?T=M/(1-Q):T=0,Q<=0?Z=0:D===s?Z=(w-z)/Q%6:D===w?Z=2+(z-s)/Q:Z=4+(s-w)/Q+4,Z/=6,Z%=1,[Z*360,Q*100,T*100]},h.hsl.hcg=function(p){var s=p[1]/100,w=p[2]/100,z=1,D=0;return w<.5?z=2*s*w:z=2*s*(1-w),z<1&&(D=(w-.5*z)/(1-z)),[p[0],z*100,D*100]},h.hsv.hcg=function(p){var s=p[1]/100,w=p[2]/100,z=s*w,D=0;return z<1&&(D=(w-z)/(1-z)),[p[0],z*100,D*100]},h.hcg.rgb=function(p){var s=p[0]/360,w=p[1]/100,z=p[2]/100;if(w===0)return[z*255,z*255,z*255];var D=[0,0,0],M=s%1*6,Q=M%1,T=1-Q,Z=0;switch(Math.floor(M)){case 0:D[0]=1,D[1]=Q,D[2]=0;break;case 1:D[0]=T,D[1]=1,D[2]=0;break;case 2:D[0]=0,D[1]=1,D[2]=Q;break;case 3:D[0]=0,D[1]=T,D[2]=1;break;case 4:D[0]=Q,D[1]=0,D[2]=1;break;default:D[0]=1,D[1]=0,D[2]=T}return Z=(1-w)*z,[(w*D[0]+Z)*255,(w*D[1]+Z)*255,(w*D[2]+Z)*255]},h.hcg.hsv=function(p){var s=p[1]/100,w=p[2]/100,z=s+w*(1-s),D=0;return z>0&&(D=s/z),[p[0],D*100,z*100]},h.hcg.hsl=function(p){var s=p[1]/100,w=p[2]/100,z=w*(1-s)+.5*s,D=0;return z>0&&z<.5?D=s/(2*z):z>=.5&&z<1&&(D=s/(2*(1-z))),[p[0],D*100,z*100]},h.hcg.hwb=function(p){var s=p[1]/100,w=p[2]/100,z=s+w*(1-s);return[p[0],(z-s)*100,(1-z)*100]},h.hwb.hcg=function(p){var s=p[1]/100,w=p[2]/100,z=1-w,D=z-s,M=0;return D<1&&(M=(z-D)/(1-D)),[p[0],D*100,M*100]},h.apple.rgb=function(p){return[p[0]/65535*255,p[1]/65535*255,p[2]/65535*255]},h.rgb.apple=function(p){return[p[0]/255*65535,p[1]/255*65535,p[2]/255*65535]},h.gray.rgb=function(p){return[p[0]/100*255,p[0]/100*255,p[0]/100*255]},h.gray.hsl=h.gray.hsv=function(p){return[0,0,p[0]]},h.gray.hwb=function(p){return[0,100,p[0]]},h.gray.cmyk=function(p){return[0,0,0,p[0]]},h.gray.lab=function(p){return[p[0],0,0]},h.gray.hex=function(p){var s=Math.round(p[0]/100*255)&255,w=(s<<16)+(s<<8)+s,z=w.toString(16).toUpperCase();return"000000".substring(z.length)+z},h.rgb.gray=function(p){var s=(p[0]+p[1]+p[2])/3;return[s/255*100]}}),u=q.rgb,v=q.hsl,A=q.hsv,E=q.hwb,H=q.cmyk,R=q.xyz,N=q.lab,P=q.lch,V=q.hex,Y=q.keyword,fa=q.ansi16,ga=q.ansi256,la=q.hcg,ia=q.apple,oa=q.gray;function pa(){for(var b={},e=Object.keys(q),g=e.length,h=0;h<g;h++)b[e[h]]={distance:-1,parent:null};return b}function ja(b){var e=pa(),g=[b];for(e[b].distance=0;g.length;)for(var h=g.pop(),k=Object.keys(q[h]),m=k.length,o=0;o<m;o++){var r=k[o],p=e[r];p.distance===-1&&(p.distance=e[h].distance+1,p.parent=h,g.unshift(r))}return e}function I(b,e){return function(g){return e(b(g))}}function O(b,e){for(var g=[e[b].parent,b],h=q[e[b].parent][b],k=e[b].parent;e[k].parent;)g.unshift(e[k].parent),h=I(q[e[k].parent][k],h),k=e[k].parent;return h.conversion=g,h}var x=function(b){for(var e=ja(b),g={},h=Object.keys(e),k=h.length,m=0;m<k;m++){var o=h[m],r=e[o];if(r.parent===null)continue;g[o]=O(o,e)}return g},G={},F=Object.keys(q);function J(b){var e=function(g){return g===void 0||g===null?g:(arguments.length>1&&(g=Array.prototype.slice.call(arguments)),b(g))};return"conversion"in b&&(e.conversion=b.conversion),e}function U(b){var e=function(g){if(g===void 0||g===null)return g;arguments.length>1&&(g=Array.prototype.slice.call(arguments));var h=b(g);if(typeof h==="object")for(var k=h.length,m=0;m<k;m++)h[m]=Math.round(h[m]);return h};return"conversion"in b&&(e.conversion=b.conversion),e}F.forEach(function(b){G[b]={},Object.defineProperty(G[b],"channels",{value:q[b].channels}),Object.defineProperty(G[b],"labels",{value:q[b].labels});var e=x(b),g=Object.keys(e);g.forEach(function(h){var k=e[h];G[b][h]=U(k),G[b][h].raw=J(k)})});var K=G,ca={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ba={getRgba:Ba,getHsla:$,getRgb:ra,getHsl:da,getHwb:va,getAlpha:na,hexString:xa,rgbString:ma,rgbaString:eb,percentString:gb,percentaString:hb,hslString:Ca,hslaString:Ia,hwbString:Za,keyword:fb};function Ba(b){if(!b)return;var e=/^#([a-fA-F0-9]{3,4})$/i,g=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,h=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,k=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,m=/(\w+)/,o=[0,0,0],r=1,p=b.match(e),s="";if(p){p=p[1],s=p[3];for(var w=0;w<o.length;w++)o[w]=parseInt(p[w]+p[w],16);s&&(r=Math.round(parseInt(s+s,16)/255*100)/100)}else if(p=b.match(g)){s=p[2],p=p[1];for(var w=0;w<o.length;w++)o[w]=parseInt(p.slice(w*2,w*2+2),16);s&&(r=Math.round(parseInt(s,16)/255*100)/100)}else if(p=b.match(h)){for(var w=0;w<o.length;w++)o[w]=parseInt(p[w+1]);r=parseFloat(p[4])}else if(p=b.match(k)){for(var w=0;w<o.length;w++)o[w]=Math.round(parseFloat(p[w+1])*2.55);r=parseFloat(p[4])}else if(p=b.match(m)){if(p[1]=="transparent")return[0,0,0,0];o=ca[p[1]];if(!o)return}for(var w=0;w<o.length;w++)o[w]=qa(o[w],0,255);return!r&&r!=0?r=1:r=qa(r,0,1),o[3]=r,o}function $(b){if(!b)return;var e=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,g=b.match(e);if(g){var h=parseFloat(g[4]),k=qa(parseInt(g[1]),0,360),m=qa(parseFloat(g[2]),0,100),o=qa(parseFloat(g[3]),0,100),r=qa(isNaN(h)?1:h,0,1);return[k,m,o,r]}}function va(b){if(!b)return;var e=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,g=b.match(e);if(g){var h=parseFloat(g[4]),k=qa(parseInt(g[1]),0,360),m=qa(parseFloat(g[2]),0,100),o=qa(parseFloat(g[3]),0,100),r=qa(isNaN(h)?1:h,0,1);return[k,m,o,r]}}function ra(b){var e=Ba(b);return e&&e.slice(0,3)}function da(b){var e=$(b);return e&&e.slice(0,3)}function na(b){var e=Ba(b);if(e)return e[3];{if(e=$(b))return e[3];if(e=va(b))return e[3]}}function xa(b,e){var e=e!==void 0&&b.length===3?e:b[3];return"#"+ya(b[0])+ya(b[1])+ya(b[2])+(e>=0&&e<1?ya(Math.round(e*255)):"")}function ma(b,e){return e<1||b[3]&&b[3]<1?eb(b,e):"rgb("+b[0]+", "+b[1]+", "+b[2]+")"}function eb(b,e){return e===void 0&&(e=b[3]!==void 0?b[3]:1),"rgba("+b[0]+", "+b[1]+", "+b[2]+", "+e+")"}function gb(b,e){if(e<1||b[3]&&b[3]<1)return hb(b,e);var g=Math.round(b[0]/255*100),h=Math.round(b[1]/255*100),k=Math.round(b[2]/255*100);return"rgb("+g+"%, "+h+"%, "+k+"%)"}function hb(b,e){var g=Math.round(b[0]/255*100),h=Math.round(b[1]/255*100),k=Math.round(b[2]/255*100);return"rgba("+g+"%, "+h+"%, "+k+"%, "+(e||b[3]||1)+")"}function Ca(b,e){return e<1||b[3]&&b[3]<1?Ia(b,e):"hsl("+b[0]+", "+b[1]+"%, "+b[2]+"%)"}function Ia(b,e){return e===void 0&&(e=b[3]!==void 0?b[3]:1),"hsla("+b[0]+", "+b[1]+"%, "+b[2]+"%, "+e+")"}function Za(b,e){return e===void 0&&(e=b[3]!==void 0?b[3]:1),"hwb("+b[0]+", "+b[1]+"%, "+b[2]+"%"+(e!==void 0&&e!==1?", "+e:"")+")"}function fb(b){return La[b.slice(0,3)]}function qa(b,e,g){return Math.min(Math.max(e,b),g)}function ya(b){var e=b.toString(16).toUpperCase();return e.length<2?"0"+e:e}var La={};for(var ta in ca)La[ca[ta]]=ta;var Ea=function(b){if(b instanceof Ea)return b;if(!(this instanceof Ea))return new Ea(b);this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var e;typeof b==="string"?(e=ba.getRgba(b),e?this.setValues("rgb",e):(e=ba.getHsla(b))?this.setValues("hsl",e):(e=ba.getHwb(b))&&this.setValues("hwb",e)):typeof b==="object"&&(e=b,e.r!==void 0||e.red!==void 0?this.setValues("rgb",e):e.l!==void 0||e.lightness!==void 0?this.setValues("hsl",e):e.v!==void 0||e.value!==void 0?this.setValues("hsv",e):e.w!==void 0||e.whiteness!==void 0?this.setValues("hwb",e):(e.c!==void 0||e.cyan!==void 0)&&this.setValues("cmyk",e))};Ea.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var b=this.values;return b.alpha!==1?b.hwb.concat([b.alpha]):b.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var b=this.values;return b.rgb.concat([b.alpha])},hslaArray:function(){var b=this.values;return b.hsl.concat([b.alpha])},alpha:function(b){return b===void 0?this.values.alpha:(this.setValues("alpha",b),this)},red:function(b){return this.setChannel("rgb",0,b)},green:function(b){return this.setChannel("rgb",1,b)},blue:function(b){return this.setChannel("rgb",2,b)},hue:function(b){return b&&(b%=360,b=b<0?360+b:b),this.setChannel("hsl",0,b)},saturation:function(b){return this.setChannel("hsl",1,b)},lightness:function(b){return this.setChannel("hsl",2,b)},saturationv:function(b){return this.setChannel("hsv",1,b)},whiteness:function(b){return this.setChannel("hwb",1,b)},blackness:function(b){return this.setChannel("hwb",2,b)},value:function(b){return this.setChannel("hsv",2,b)},cyan:function(b){return this.setChannel("cmyk",0,b)},magenta:function(b){return this.setChannel("cmyk",1,b)},yellow:function(b){return this.setChannel("cmyk",2,b)},black:function(b){return this.setChannel("cmyk",3,b)},hexString:function(){return ba.hexString(this.values.rgb)},rgbString:function(){return ba.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return ba.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return ba.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return ba.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return ba.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return ba.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return ba.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var b=this.values.rgb;return b[0]<<16|b[1]<<8|b[2]},luminosity:function(){for(var b=this.values.rgb,e=[],g=0;g<b.length;g++){var h=b[g]/255;e[g]=h<=.03928?h/12.92:Math.pow((h+.055)/1.055,2.4)}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(b){var e=this.luminosity(),g=b.luminosity();return e>g?(e+.05)/(g+.05):(g+.05)/(e+.05)},level:function(b){var e=this.contrast(b);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var b=this.values.rgb,e=(b[0]*299+b[1]*587+b[2]*114)/1e3;return e<128},light:function(){return!this.dark()},negate:function(){for(var b=[],e=0;e<3;e++)b[e]=255-this.values.rgb[e];return this.setValues("rgb",b),this},lighten:function(b){var e=this.values.hsl;return e[2]+=e[2]*b,this.setValues("hsl",e),this},darken:function(b){var e=this.values.hsl;return e[2]-=e[2]*b,this.setValues("hsl",e),this},saturate:function(b){var e=this.values.hsl;return e[1]+=e[1]*b,this.setValues("hsl",e),this},desaturate:function(b){var e=this.values.hsl;return e[1]-=e[1]*b,this.setValues("hsl",e),this},whiten:function(b){var e=this.values.hwb;return e[1]+=e[1]*b,this.setValues("hwb",e),this},blacken:function(b){var e=this.values.hwb;return e[2]+=e[2]*b,this.setValues("hwb",e),this},greyscale:function(){var b=this.values.rgb,e=b[0]*.3+b[1]*.59+b[2]*.11;return this.setValues("rgb",[e,e,e]),this},clearer:function(b){var e=this.values.alpha;return this.setValues("alpha",e-e*b),this},opaquer:function(b){var e=this.values.alpha;return this.setValues("alpha",e+e*b),this},rotate:function(b){var e=this.values.hsl,g=(e[0]+b)%360;return e[0]=g<0?360+g:g,this.setValues("hsl",e),this},mix:function(b,e){var g=this,h=b,k=e===void 0?.5:e,m=2*k-1,o=g.alpha()-h.alpha(),r=((m*o===-1?m:(m+o)/(1+m*o))+1)/2,p=1-r;return this.rgb(r*g.red()+p*h.red(),r*g.green()+p*h.green(),r*g.blue()+p*h.blue()).alpha(g.alpha()*k+h.alpha()*(1-k))},toJSON:function(){return this.rgb()},clone:function(){var b=new Ea(),e=this.values,g=b.values,h,k;for(var m in e)e.hasOwnProperty(m)&&(h=e[m],k={}.toString.call(h),k==="[object Array]"?g[m]=h.slice(0):k==="[object Number]"?g[m]=h:console.error("unexpected color value:",h));return b}},Ea.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},Ea.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},Ea.prototype.getValues=function(b){for(var e=this.values,g={},h=0;h<b.length;h++)g[b.charAt(h)]=e[b][h];return e.alpha!==1&&(g.a=e.alpha),g},Ea.prototype.setValues=function(b,e){var g=this.values,h=this.spaces,k=this.maxes,m=1,o;this.valid=!0;if(b==="alpha")m=e;else if(e.length)g[b]=e.slice(0,b.length),m=e[b.length];else if(e[b.charAt(0)]!==void 0){for(o=0;o<b.length;o++)g[b][o]=e[b.charAt(o)];m=e.a}else if(e[h[b][0]]!==void 0){var r=h[b];for(o=0;o<b.length;o++)g[b][o]=e[r[o]];m=e.alpha}g.alpha=Math.max(0,Math.min(1,m===void 0?g.alpha:m));if(b==="alpha")return!1;var p;for(o=0;o<b.length;o++)p=Math.max(0,Math.min(k[b][o],g[b][o])),g[b][o]=Math.round(p);for(var s in h)s!==b&&(g[s]=K[b][s](g[b]));return!0},Ea.prototype.setSpace=function(b,e){var g=e[0];return g===void 0?this.getValues(b):(typeof g==="number"&&(g=Array.prototype.slice.call(e)),this.setValues(b,g),this)},Ea.prototype.setChannel=function(b,e,g){var h=this.values[b];return g===void 0?h[e]:g===h[e]?this:(h[e]=g,this.setValues(b,h),this)},typeof window!=="undefined"&&(window.Color=Ea);var cb=Ea,Da={noop:function(){},uid:function(){var b=0;return function(){return b++}}(),isNullOrUndef:function(b){return b===null||typeof b==="undefined"},isArray:function(b){if(Array.isArray&&Array.isArray(b))return!0;var e=Object.prototype.toString.call(b);return e.substr(0,7)==="[object"&&e.substr(-6)==="Array]"?!0:!1},isObject:function(b){return b!==null&&Object.prototype.toString.call(b)==="[object Object]"},isFinite:function(b){return(typeof b==="number"||b instanceof Number)&&isFinite(b)},valueOrDefault:function(b,e){return typeof b==="undefined"?e:b},valueAtIndexOrDefault:function(b,e,g){return Da.valueOrDefault(Da.isArray(b)?b[e]:b,g)},callback:function(b,e,g){if(b&&typeof b.call==="function")return b.apply(g,e)},each:function(b,e,g,h){var k,m,o;if(Da.isArray(b)){m=b.length;if(h)for(k=m-1;k>=0;k--)e.call(g,b[k],k);else for(k=0;k<m;k++)e.call(g,b[k],k)}else if(Da.isObject(b))for(o=Object.keys(b),m=o.length,k=0;k<m;k++)e.call(g,b[o[k]],o[k])},arrayEquals:function(b,e){var g,h,k,m;if(!b||!e||b.length!==e.length)return!1;for(g=0,h=b.length;g<h;++g){k=b[g],m=e[g];if(k instanceof Array&&m instanceof Array){if(!Da.arrayEquals(k,m))return!1}else if(k!==m)return!1}return!0},clone:function(b){if(Da.isArray(b))return b.map(Da.clone);if(Da.isObject(b)){for(var e={},g=Object.keys(b),h=g.length,k=0;k<h;++k)e[g[k]]=Da.clone(b[g[k]]);return e}return b},_merger:function(b,e,g,h){var k=e[b],m=g[b];Da.isObject(k)&&Da.isObject(m)?Da.merge(k,m,h):e[b]=Da.clone(m)},_mergerIf:function(b,e,g){var h=e[b],k=g[b];Da.isObject(h)&&Da.isObject(k)?Da.mergeIf(h,k):e.hasOwnProperty(b)||(e[b]=Da.clone(k))},merge:function(b,e,g){var h=Da.isArray(e)?e:[e],k=h.length,m,o,r,p,s;if(!Da.isObject(b))return b;for(g=g||{},m=g.merger||Da._merger,o=0;o<k;++o){e=h[o];if(!Da.isObject(e))continue;for(r=Object.keys(e),s=0,p=r.length;s<p;++s)m(r[s],b,e,g)}return b},mergeIf:function(b,e){return Da.merge(b,e,{merger:Da._mergerIf})},extend:Object.assign||function(b){return Da.merge(b,[].slice.call(arguments,1),{merger:function(e,g,h){g[e]=h[e]}})},inherits:function(b){var e=this,g=b&&b.hasOwnProperty("constructor")?b.constructor:function(){return e.apply(this,arguments)},h=function(){this.constructor=g};return h.prototype=e.prototype,g.prototype=new h(),g.extend=Da.inherits,b&&Da.extend(g.prototype,b),g.__super__=e.prototype,g},_deprecated:function(b,e,g,h){e!==void 0&&console.warn(b+': "'+g+'" is deprecated. Please use "'+h+'" instead')}},Sa=Da;Da.callCallback=Da.callback,Da.indexOf=function(b,e,g){return Array.prototype.indexOf.call(b,e,g)},Da.getValueOrDefault=Da.valueOrDefault,Da.getValueAtIndexOrDefault=Da.valueAtIndexOrDefault;var Ja={linear:function(b){return b},easeInQuad:function(b){return b*b},easeOutQuad:function(b){return-b*(b-2)},easeInOutQuad:function(b){return(b/=.5)<1?.5*b*b:-.5*(--b*(b-2)-1)},easeInCubic:function(b){return b*b*b},easeOutCubic:function(b){return(b=b-1)*b*b+1},easeInOutCubic:function(b){return(b/=.5)<1?.5*b*b*b:.5*((b-=2)*b*b+2)},easeInQuart:function(b){return b*b*b*b},easeOutQuart:function(b){return-((b=b-1)*b*b*b-1)},easeInOutQuart:function(b){return(b/=.5)<1?.5*b*b*b*b:-.5*((b-=2)*b*b*b-2)},easeInQuint:function(b){return b*b*b*b*b},easeOutQuint:function(b){return(b=b-1)*b*b*b*b+1},easeInOutQuint:function(b){return(b/=.5)<1?.5*b*b*b*b*b:.5*((b-=2)*b*b*b*b+2)},easeInSine:function(b){return-Math.cos(b*(Math.PI/2))+1},easeOutSine:function(b){return Math.sin(b*(Math.PI/2))},easeInOutSine:function(b){return-.5*(Math.cos(Math.PI*b)-1)},easeInExpo:function(b){return b===0?0:Math.pow(2,10*(b-1))},easeOutExpo:function(b){return b===1?1:-Math.pow(2,-10*b)+1},easeInOutExpo:function(b){return b===0?0:b===1?1:(b/=.5)<1?.5*Math.pow(2,10*(b-1)):.5*(-Math.pow(2,-10*--b)+2)},easeInCirc:function(b){return b>=1?b:-(Math.sqrt(1-b*b)-1)},easeOutCirc:function(b){return Math.sqrt(1-(b=b-1)*b)},easeInOutCirc:function(b){return(b/=.5)<1?-.5*(Math.sqrt(1-b*b)-1):.5*(Math.sqrt(1-(b-=2)*b)+1)},easeInElastic:function(b){var e=1.70158,g=0,h=1;return b===0?0:b===1?1:(g||(g=.3),h<1?(h=1,e=g/4):e=g/(2*Math.PI)*Math.asin(1/h),-(h*Math.pow(2,10*(b-=1))*Math.sin((b-e)*(2*Math.PI)/g)))},easeOutElastic:function(b){var e=1.70158,g=0,h=1;return b===0?0:b===1?1:(g||(g=.3),h<1?(h=1,e=g/4):e=g/(2*Math.PI)*Math.asin(1/h),h*Math.pow(2,-10*b)*Math.sin((b-e)*(2*Math.PI)/g)+1)},easeInOutElastic:function(b){var e=1.70158,g=0,h=1;return b===0?0:(b/=.5)===2?1:(g||(g=.45),h<1?(h=1,e=g/4):e=g/(2*Math.PI)*Math.asin(1/h),b<1?-.5*(h*Math.pow(2,10*(b-=1))*Math.sin((b-e)*(2*Math.PI)/g)):h*Math.pow(2,-10*(b-=1))*Math.sin((b-e)*(2*Math.PI)/g)*.5+1)},easeInBack:function(b){var e=1.70158;return b*b*((e+1)*b-e)},easeOutBack:function(b){var e=1.70158;return(b=b-1)*b*((e+1)*b+e)+1},easeInOutBack:function(b){var e=1.70158;return(b/=.5)<1?.5*(b*b*(((e*=1.525)+1)*b-e)):.5*((b-=2)*b*(((e*=1.525)+1)*b+e)+2)},easeInBounce:function(b){return 1-Ja.easeOutBounce(1-b)},easeOutBounce:function(b){return b<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+.9375:7.5625*(b-=2.625/2.75)*b+.984375},easeInOutBounce:function(b){return b<.5?Ja.easeInBounce(b*2)*.5:Ja.easeOutBounce(b*2-1)*.5+.5}},Va={effects:Ja};Sa.easingEffects=Ja;var jb=Math.PI,ub=jb/180,ob=jb*2,sa=jb/2,_a=jb/4,X=jb*2/3,L={clear:function(b){b.ctx.clearRect(0,0,b.width,b.height)},roundedRect:function(b,e,g,h,k,m){if(m){var o=Math.min(m,k/2,h/2),r=e+o,p=g+o,s=e+h-o,w=g+k-o;b.moveTo(e,p),r<s&&p<w?(b.arc(r,p,o,-jb,-sa),b.arc(s,p,o,-sa,0),b.arc(s,w,o,0,sa),b.arc(r,w,o,sa,jb)):r<s?(b.moveTo(r,g),b.arc(s,p,o,-sa,sa),b.arc(r,p,o,sa,jb+sa)):p<w?(b.arc(r,p,o,-jb,0),b.arc(r,w,o,0,jb)):b.arc(r,p,o,-jb,jb),b.closePath(),b.moveTo(e,g)}else b.rect(e,g,h,k)},drawPoint:function(b,e,g,h,k,m){var o,r,p,s,w,z=(m||0)*ub;if(e&&typeof e==="object"){o=e.toString();if(o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]"){b.save(),b.translate(h,k),b.rotate(z),b.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),b.restore();return}}if(isNaN(g)||g<=0)return;b.beginPath();switch(e){default:b.arc(h,k,g,0,ob),b.closePath();break;case"triangle":b.moveTo(h+Math.sin(z)*g,k-Math.cos(z)*g),z+=X,b.lineTo(h+Math.sin(z)*g,k-Math.cos(z)*g),z+=X,b.lineTo(h+Math.sin(z)*g,k-Math.cos(z)*g),b.closePath();break;case"rectRounded":w=g*.516,s=g-w,r=Math.cos(z+_a)*s,p=Math.sin(z+_a)*s,b.arc(h-r,k-p,w,z-jb,z-sa),b.arc(h+p,k-r,w,z-sa,z),b.arc(h+r,k+p,w,z,z+sa),b.arc(h-p,k+r,w,z+sa,z+jb),b.closePath();break;case"rect":if(!m){s=Math.SQRT1_2*g,b.rect(h-s,k-s,2*s,2*s);break}z+=_a;case"rectRot":r=Math.cos(z)*g,p=Math.sin(z)*g,b.moveTo(h-r,k-p),b.lineTo(h+p,k-r),b.lineTo(h+r,k+p),b.lineTo(h-p,k+r),b.closePath();break;case"crossRot":z+=_a;case"cross":r=Math.cos(z)*g,p=Math.sin(z)*g,b.moveTo(h-r,k-p),b.lineTo(h+r,k+p),b.moveTo(h+p,k-r),b.lineTo(h-p,k+r);break;case"star":r=Math.cos(z)*g,p=Math.sin(z)*g,b.moveTo(h-r,k-p),b.lineTo(h+r,k+p),b.moveTo(h+p,k-r),b.lineTo(h-p,k+r),z+=_a,r=Math.cos(z)*g,p=Math.sin(z)*g,b.moveTo(h-r,k-p),b.lineTo(h+r,k+p),b.moveTo(h+p,k-r),b.lineTo(h-p,k+r);break;case"line":r=Math.cos(z)*g,p=Math.sin(z)*g,b.moveTo(h-r,k-p),b.lineTo(h+r,k+p);break;case"dash":b.moveTo(h,k),b.lineTo(h+Math.cos(z)*g,k+Math.sin(z)*g);break}b.fill(),b.stroke()},_isPointInArea:function(b,e){var g=1e-6;return b.x>e.left-g&&b.x<e.right+g&&b.y>e.top-g&&b.y<e.bottom+g},clipArea:function(b,e){b.save(),b.beginPath(),b.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),b.clip()},unclipArea:function(b){b.restore()},lineTo:function(b,e,g,h){var k=g.steppedLine;if(k){if(k==="middle"){var m=(e.x+g.x)/2;b.lineTo(m,h?g.y:e.y),b.lineTo(m,h?e.y:g.y)}else k==="after"&&!h||k!=="after"&&h?b.lineTo(e.x,g.y):b.lineTo(g.x,e.y);b.lineTo(g.x,g.y);return}if(!g.tension){b.lineTo(g.x,g.y);return}b.bezierCurveTo(h?e.controlPointPreviousX:e.controlPointNextX,h?e.controlPointPreviousY:e.controlPointNextY,h?g.controlPointNextX:g.controlPointPreviousX,h?g.controlPointNextY:g.controlPointPreviousY,g.x,g.y)}},_=L;Sa.clear=L.clear,Sa.drawRoundedRectangle=function(b){b.beginPath(),L.roundedRect.apply(L,arguments)};var aa={_set:function(b,e){return Sa.merge(this[b]||(this[b]={}),e)}};aa._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var S=aa,za=Sa.valueOrDefault;function Ra(b){return!b||Sa.isNullOrUndef(b.size)||Sa.isNullOrUndef(b.family)?null:(b.style?b.style+" ":"")+(b.weight?b.weight+" ":"")+b.size+"px "+b.family}var pb={toLineHeight:function(b,e){var g=(""+b).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!g||g[1]==="normal")return e*1.2;b=+g[2];switch(g[3]){case"px":return b;case"%":b/=100;break}return e*b},toPadding:function(b){var e,g,h,k;return Sa.isObject(b)?(e=+b.top||0,g=+b.right||0,h=+b.bottom||0,k=+b.left||0):e=g=h=k=+b||0,{top:e,right:g,bottom:h,left:k,height:e+h,width:k+g}},_parseFont:function(b){var e=S.global,g=za(b.fontSize,e.defaultFontSize),h={family:za(b.fontFamily,e.defaultFontFamily),lineHeight:Sa.options.toLineHeight(za(b.lineHeight,e.defaultLineHeight),g),size:g,style:za(b.fontStyle,e.defaultFontStyle),weight:null,string:""};return h.string=Ra(h),h},resolve:function(b,e,g,h){var k=!0,m,o,r;for(m=0,o=b.length;m<o;++m){r=b[m];if(r===void 0)continue;e!==void 0&&typeof r==="function"&&(r=r(e),k=!1),g!==void 0&&Sa.isArray(r)&&(r=r[g],k=!1);if(r!==void 0)return h&&!k&&(h.cacheable=!1),r}}},Ta={_factorize:function(b){var e=[],g=Math.sqrt(b),h;for(h=1;h<g;h++)b%h===0&&(e.push(h),e.push(b/h));return g===(g|0)&&e.push(g),e.sort(function(k,m){return k-m}).pop(),e},log10:Math.log10||function(b){var e=Math.log(b)*Math.LOG10E,g=Math.round(e),h=b===Math.pow(10,g);return h?g:e}},lb=Ta;Sa.log10=Ta.log10;var Mb=function(b,e){return{x:function(g){return b+b+e-g},setWidth:function(g){e=g},textAlign:function(g){return g==="center"?g:g==="right"?"left":"right"},xPlus:function(g,h){return g-h},leftForLtr:function(g,h){return g-h}}},Db=function(){return{x:function(b){return b},setWidth:function(b){},textAlign:function(b){return b},xPlus:function(b,e){return b+e},leftForLtr:function(b,e){return b}}},Ka=function(b,e,g){return b?Mb(e,g):Db()},td=function(b,e){var g,h;(e==="ltr"||e==="rtl")&&(g=b.canvas.style,h=[g.getPropertyValue("direction"),g.getPropertyPriority("direction")],g.setProperty("direction",e,"important"),b.prevTextDirection=h)},Mf=function(b){var e=b.prevTextDirection;e!==void 0&&(delete b.prevTextDirection,b.canvas.style.setProperty("direction",e[0],e[1]))},Nf={getRtlAdapter:Ka,overrideTextDirection:td,restoreTextDirection:Mf},B=Sa,Of=Va,$d=_,Pf=pb,io=lb,Qf=Nf;B.easing=Of,B.canvas=$d,B.options=Pf,B.math=io,B.rtl=Qf;function jo(b,e,g,h){var k=Object.keys(g),m,o,r,p,s,w,z,D,M;for(m=0,o=k.length;m<o;++m){r=k[m],w=g[r],e.hasOwnProperty(r)||(e[r]=w),p=e[r];if(p===w||r[0]==="_")continue;b.hasOwnProperty(r)||(b[r]=p),s=b[r],z=typeof w;if(z===typeof s){if(z==="string"){D=cb(s);if(D.valid){M=cb(w);if(M.valid){e[r]=M.mix(D,h).rgbString();continue}}}else if(B.isFinite(s)&&B.isFinite(w)){e[r]=s+(w-s)*h;continue}}e[r]=w}}var ud=function(b){B.extend(this,b),this.initialize.apply(this,arguments)};B.extend(ud.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var b=this;return b._view||(b._view=B.extend({},b._model)),b._start={},b},transition:function(b){var e=this,g=e._model,h=e._start,k=e._view;return!g||b===1?(e._view=B.extend({},g),e._start=null,e):(k||(k=e._view={}),h||(h=e._start={}),jo(h,k,g,b),e)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return B.isNumber(this._model.x)&&B.isNumber(this._model.y)}}),ud.extend=B.inherits;var dc=ud,ua=dc.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),jh=ua;Object.defineProperty(ua.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(ua.prototype,"chartInstance",{get:function(){return this.chart},set:function(b){this.chart=b}}),S._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:B.noop,onComplete:B.noop}});var kh={animations:[],request:null,addAnimation:function(b,e,g,h){var k=this.animations,m,o;for(e.chart=b,e.startTime=Date.now(),e.duration=g,h||(b.animating=!0),m=0,o=k.length;m<o;++m)if(k[m].chart===b){k[m]=e;return}k.push(e),k.length===1&&this.requestAnimationFrame()},cancelAnimation:function(b){var e=B.findIndex(this.animations,function(g){return g.chart===b});e!==-1&&(this.animations.splice(e,1),b.animating=!1)},requestAnimationFrame:function(){var b=this;b.request===null&&(b.request=B.requestAnimFrame.call(window,function(){b.request=null,b.startDigest()}))},startDigest:function(){var b=this;b.advance(),b.animations.length>0&&b.requestAnimationFrame()},advance:function(){for(var b=this.animations,e,g,h,k,m=0;m<b.length;)e=b[m],g=e.chart,h=e.numSteps,k=Math.floor((Date.now()-e.startTime)/e.duration*h)+1,e.currentStep=Math.min(k,h),B.callback(e.render,[g,e],g),B.callback(e.onAnimationProgress,[e],g),e.currentStep>=h?(B.callback(e.onAnimationComplete,[e],g),g.animating=!1,b.splice(m,1)):++m}},Ib=B.options.resolve,Rf=["push","pop","shift","splice","unshift"];function kb(b,e){if(b._chartjs){b._chartjs.listeners.push(e);return}Object.defineProperty(b,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Rf.forEach(function(g){var h="onData"+g.charAt(0).toUpperCase()+g.slice(1),k=b[g];Object.defineProperty(b,g,{configurable:!0,enumerable:!1,value:function(){var m=Array.prototype.slice.call(arguments),o=k.apply(this,m);return B.each(b._chartjs.listeners,function(r){typeof r[h]==="function"&&r[h].apply(r,m)}),o}})})}function ae(b,e){var g=b._chartjs;if(!g)return;var h=g.listeners,k=h.indexOf(e);k!==-1&&h.splice(k,1);if(h.length>0)return;Rf.forEach(function(m){delete b[m]}),delete b._chartjs}var lh=function(b,e){this.initialize(b,e)};B.extend(lh.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(b,e){var g=this;g.chart=b,g.index=e,g.linkScales(),g.addElements(),g._type=g.getMeta().type},updateIndex:function(b){this.index=b},linkScales:function(){var b=this,e=b.getMeta(),g=b.chart,h=g.scales,k=b.getDataset(),m=g.options.scales;(e.xAxisID===null||!(e.xAxisID in h)||k.xAxisID)&&(e.xAxisID=k.xAxisID||m.xAxes[0].id),(e.yAxisID===null||!(e.yAxisID in h)||k.yAxisID)&&(e.yAxisID=k.yAxisID||m.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(b){return this.chart.scales[b]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&ae(this._data,this)},createMetaDataset:function(){var b=this,e=b.datasetElementType;return e&&new e({_chart:b.chart,_datasetIndex:b.index})},createMetaData:function(b){var e=this,g=e.dataElementType;return g&&new g({_chart:e.chart,_datasetIndex:e.index,_index:b})},addElements:function(){var b=this,e=b.getMeta(),g=b.getDataset().data||[],h=e.data,k,m;for(k=0,m=g.length;k<m;++k)h[k]=h[k]||b.createMetaData(k);e.dataset=e.dataset||b.createMetaDataset()},addElementAndReset:function(b){var e=this.createMetaData(b);this.getMeta().data.splice(b,0,e),this.updateElement(e,b,!0)},buildOrUpdateElements:function(){var b=this,e=b.getDataset(),g=e.data||(e.data=[]);b._data!==g&&(b._data&&ae(b._data,b),g&&Object.isExtensible(g)&&kb(g,b),b._data=g),b.resyncElements()},_configure:function(){var b=this;b._config=B.merge({},[b.chart.options.datasets[b._type],b.getDataset()],{merger:function(e,g,h){e!=="_meta"&&e!=="data"&&B._merger(e,g,h)}})},_update:function(b){var e=this;e._configure(),e._cachedDataOpts=null,e.update(b)},update:B.noop,transition:function(b){for(var e=this.getMeta(),g=e.data||[],h=g.length,k=0;k<h;++k)g[k].transition(b);e.dataset&&e.dataset.transition(b)},draw:function(){var b=this.getMeta(),e=b.data||[],g=e.length,h=0;for(b.dataset&&b.dataset.draw();h<g;++h)e[h].draw()},getStyle:function(b){var e=this,g=e.getMeta(),h=g.dataset,k;return e._configure(),h&&b===void 0?k=e._resolveDatasetElementOptions(h||{}):(b=b||0,k=e._resolveDataElementOptions(g.data[b]||{},b)),(k.fill===!1||k.fill===null)&&(k.backgroundColor=k.borderColor),k},_resolveDatasetElementOptions:function(b,e){var g=this,h=g.chart,k=g._config,m=b.custom||{},o=h.options.elements[g.datasetElementType.prototype._type]||{},r=g._datasetElementOptions,p={},s,w,z,D,M={chart:h,dataset:g.getDataset(),datasetIndex:g.index,hover:e};for(s=0,w=r.length;s<w;++s)z=r[s],D=e?"hover"+z.charAt(0).toUpperCase()+z.slice(1):z,p[z]=Ib([m[D],k[D],o[D]],M);return p},_resolveDataElementOptions:function(b,e){var g=this,h=b&&b.custom,k=g._cachedDataOpts;if(k&&!h)return k;var m=g.chart,o=g._config,r=m.options.elements[g.dataElementType.prototype._type]||{},p=g._dataElementOptions,s={},w={chart:m,dataIndex:e,dataset:g.getDataset(),datasetIndex:g.index},z={cacheable:!h},D,M,Q,T;h=h||{};if(B.isArray(p))for(M=0,Q=p.length;M<Q;++M)T=p[M],s[T]=Ib([h[T],o[T],r[T]],w,e,z);else for(D=Object.keys(p),M=0,Q=D.length;M<Q;++M)T=D[M],s[T]=Ib([h[T],o[p[T]],o[T],r[T]],w,e,z);return z.cacheable&&(g._cachedDataOpts=Object.freeze(s)),s},removeHoverStyle:function(b){B.merge(b._model,b.$previousStyle||{}),delete b.$previousStyle},setHoverStyle:function(b){var e=this.chart.data.datasets[b._datasetIndex],g=b._index,h=b.custom||{},k=b._model,m=B.getHoverColor;b.$previousStyle={backgroundColor:k.backgroundColor,borderColor:k.borderColor,borderWidth:k.borderWidth},k.backgroundColor=Ib([h.hoverBackgroundColor,e.hoverBackgroundColor,m(k.backgroundColor)],void 0,g),k.borderColor=Ib([h.hoverBorderColor,e.hoverBorderColor,m(k.borderColor)],void 0,g),k.borderWidth=Ib([h.hoverBorderWidth,e.hoverBorderWidth,k.borderWidth],void 0,g)},_removeDatasetHoverStyle:function(){var b=this.getMeta().dataset;b&&this.removeHoverStyle(b)},_setDatasetHoverStyle:function(){var b=this.getMeta().dataset,e={},g,h,k,m,o,r;if(!b)return;for(r=b._model,o=this._resolveDatasetElementOptions(b,!0),m=Object.keys(o),g=0,h=m.length;g<h;++g)k=m[g],e[k]=r[k],r[k]=o[k];b.$previousStyle=e},resyncElements:function(){var b=this,e=b.getMeta(),g=b.getDataset().data,h=e.data.length,k=g.length;k<h?e.data.splice(k,h-k):k>h&&b.insertElements(h,k-h)},insertElements:function(b,e){for(var g=0;g<e;++g)this.addElementAndReset(b+g)},onDataPush:function(){var b=arguments.length;this.insertElements(this.getDataset().data.length-b,b)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(b,e){this.getMeta().data.splice(b,e),this.insertElements(b,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),lh.extend=B.inherits;var mb=lh,Jb=Math.PI*2;S._set("global",{elements:{arc:{backgroundColor:S.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});function pc(b,e){var g=e.startAngle,h=e.endAngle,k=e.pixelMargin,m=k/e.outerRadius,o=e.x,r=e.y;b.beginPath(),b.arc(o,r,e.outerRadius,g-m,h+m),e.innerRadius>k?(m=k/e.innerRadius,b.arc(o,r,e.innerRadius-k,h+m,g-m,!0)):b.arc(o,r,k,h+Math.PI/2,g-Math.PI/2),b.closePath(),b.clip()}function Eb(b,e,g,h){var k=g.endAngle,m;for(h&&(g.endAngle=g.startAngle+Jb,pc(b,g),g.endAngle=k,g.endAngle===g.startAngle&&g.fullCircles&&(g.endAngle+=Jb,g.fullCircles--)),b.beginPath(),b.arc(g.x,g.y,g.innerRadius,g.startAngle+Jb,g.startAngle,!0),m=0;m<g.fullCircles;++m)b.stroke();for(b.beginPath(),b.arc(g.x,g.y,e.outerRadius,g.startAngle,g.startAngle+Jb),m=0;m<g.fullCircles;++m)b.stroke()}function qc(b,e,g){var h=e.borderAlign==="inner";h?(b.lineWidth=e.borderWidth*2,b.lineJoin="round"):(b.lineWidth=e.borderWidth,b.lineJoin="bevel"),g.fullCircles&&Eb(b,e,g,h),h&&pc(b,g),b.beginPath(),b.arc(g.x,g.y,e.outerRadius,g.startAngle,g.endAngle),b.arc(g.x,g.y,g.innerRadius,g.endAngle,g.startAngle,!0),b.closePath(),b.stroke()}var Nc=dc.extend({_type:"arc",inLabelRange:function(b){var e=this._view;return e?Math.pow(b-e.x,2)<Math.pow(e.radius+e.hoverRadius,2):!1},inRange:function(b,e){var g=this._view;if(g){for(var h=B.getAngleFromPoint(g,{x:b,y:e}),k=h.angle,m=h.distance,o=g.startAngle,r=g.endAngle;r<o;)r+=Jb;for(;k>r;)k-=Jb;for(;k<o;)k+=Jb;var p=k>=o&&k<=r,s=m>=g.innerRadius&&m<=g.outerRadius;return p&&s}return!1},getCenterPoint:function(){var b=this._view,e=(b.startAngle+b.endAngle)/2,g=(b.innerRadius+b.outerRadius)/2;return{x:b.x+Math.cos(e)*g,y:b.y+Math.sin(e)*g}},getArea:function(){var b=this._view;return Math.PI*((b.endAngle-b.startAngle)/(2*Math.PI))*(Math.pow(b.outerRadius,2)-Math.pow(b.innerRadius,2))},tooltipPosition:function(){var b=this._view,e=b.startAngle+(b.endAngle-b.startAngle)/2,g=(b.outerRadius-b.innerRadius)/2+b.innerRadius;return{x:b.x+Math.cos(e)*g,y:b.y+Math.sin(e)*g}},draw:function(){var b=this._chart.ctx,e=this._view,g=e.borderAlign==="inner"?.33:0,h={x:e.x,y:e.y,innerRadius:e.innerRadius,outerRadius:Math.max(e.outerRadius-g,0),pixelMargin:g,startAngle:e.startAngle,endAngle:e.endAngle,fullCircles:Math.floor(e.circumference/Jb)},k;b.save(),b.fillStyle=e.backgroundColor,b.strokeStyle=e.borderColor;if(h.fullCircles){for(h.endAngle=h.startAngle+Jb,b.beginPath(),b.arc(h.x,h.y,h.outerRadius,h.startAngle,h.endAngle),b.arc(h.x,h.y,h.innerRadius,h.endAngle,h.startAngle,!0),b.closePath(),k=0;k<h.fullCircles;++k)b.fill();h.endAngle=h.startAngle+e.circumference%Jb}b.beginPath(),b.arc(h.x,h.y,h.outerRadius,h.startAngle,h.endAngle),b.arc(h.x,h.y,h.innerRadius,h.endAngle,h.startAngle,!0),b.closePath(),b.fill(),e.borderWidth&&qc(b,e,h),b.restore()}}),cd=B.valueOrDefault,Rj=S.global.defaultColor;S._set("global",{elements:{line:{tension:.4,backgroundColor:Rj,borderWidth:3,borderColor:Rj,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var ko=dc.extend({_type:"line",draw:function(){var b=this,e=b._view,g=b._chart.ctx,h=e.spanGaps,k=b._children.slice(),m=S.global,o=m.elements.line,r=-1,p=b._loop,s,w,z;if(!k.length)return;if(b._loop){for(s=0;s<k.length;++s){w=B.previousItem(k,s);if(!k[s]._view.skip&&w._view.skip){k=k.slice(s).concat(k.slice(0,s)),p=h;break}}p&&k.push(k[0])}for(g.save(),g.lineCap=e.borderCapStyle||o.borderCapStyle,g.setLineDash&&g.setLineDash(e.borderDash||o.borderDash),g.lineDashOffset=cd(e.borderDashOffset,o.borderDashOffset),g.lineJoin=e.borderJoinStyle||o.borderJoinStyle,g.lineWidth=cd(e.borderWidth,o.borderWidth),g.strokeStyle=e.borderColor||m.defaultColor,g.beginPath(),z=k[0]._view,z.skip||(g.moveTo(z.x,z.y),r=0),s=1;s<k.length;++s)z=k[s]._view,w=r===-1?B.previousItem(k,s):k[r],z.skip||(r!==s-1&&!h||r===-1?g.moveTo(z.x,z.y):B.canvas.lineTo(g,w._view,z),r=s);p&&g.closePath(),g.stroke(),g.restore()}}),lo=B.valueOrDefault,vb=S.global.defaultColor;S._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:vb,borderColor:vb,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});function Xe(b){var e=this._view;return e?Math.abs(b-e.x)<e.radius+e.hitRadius:!1}function mo(b){var e=this._view;return e?Math.abs(b-e.y)<e.radius+e.hitRadius:!1}var Sj=dc.extend({_type:"point",inRange:function(b,e){var g=this._view;return g?Math.pow(b-g.x,2)+Math.pow(e-g.y,2)<Math.pow(g.hitRadius+g.radius,2):!1},inLabelRange:Xe,inXRange:Xe,inYRange:mo,getCenterPoint:function(){var b=this._view;return{x:b.x,y:b.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var b=this._view;return{x:b.x,y:b.y,padding:b.radius+b.borderWidth}},draw:function(b){var e=this._view,g=this._chart.ctx,h=e.pointStyle,k=e.rotation,m=e.radius,o=e.x,r=e.y,p=S.global,s=p.defaultColor;if(e.skip)return;(b===void 0||B.canvas._isPointInArea(e,b))&&(g.strokeStyle=e.borderColor||s,g.lineWidth=lo(e.borderWidth,p.elements.point.borderWidth),g.fillStyle=e.backgroundColor||s,B.canvas.drawPoint(g,h,m,o,r,k))}}),mh=S.global.defaultColor;S._set("global",{elements:{rectangle:{backgroundColor:mh,borderColor:mh,borderSkipped:"bottom",borderWidth:0}}});function Sf(b){return b&&b.width!==void 0}function Tj(b){var e,g,h,k,m;return Sf(b)?(m=b.width/2,e=b.x-m,g=b.x+m,h=Math.min(b.y,b.base),k=Math.max(b.y,b.base)):(m=b.height/2,e=Math.min(b.x,b.base),g=Math.max(b.x,b.base),h=b.y-m,k=b.y+m),{left:e,top:h,right:g,bottom:k}}function Uj(b,e,g){return b===e?g:b===g?e:b}function no(b){var e=b.borderSkipped,g={};return e?(b.horizontal?b.base>b.x&&(e=Uj(e,"left","right")):b.base<b.y&&(e=Uj(e,"bottom","top")),g[e]=!0,g):g}function oo(b,e,g){var h=b.borderWidth,k=no(b),m,o,r,p;return B.isObject(h)?(m=+h.top||0,o=+h.right||0,r=+h.bottom||0,p=+h.left||0):m=o=r=p=+h||0,{t:k.top||m<0?0:m>g?g:m,r:k.right||o<0?0:o>e?e:o,b:k.bottom||r<0?0:r>g?g:r,l:k.left||p<0?0:p>e?e:p}}function po(b){var e=Tj(b),g=e.right-e.left,h=e.bottom-e.top,k=oo(b,g/2,h/2);return{outer:{x:e.left,y:e.top,w:g,h},inner:{x:e.left+k.l,y:e.top+k.t,w:g-k.l-k.r,h:h-k.t-k.b}}}function be(b,e,g){var h=e===null,k=g===null,m=!b||h&&k?!1:Tj(b);return m&&(h||e>=m.left&&e<=m.right)&&(k||g>=m.top&&g<=m.bottom)}var Vj=dc.extend({_type:"rectangle",draw:function(){var b=this._chart.ctx,e=this._view,g=po(e),h=g.outer,k=g.inner;b.fillStyle=e.backgroundColor,b.fillRect(h.x,h.y,h.w,h.h);if(h.w===k.w&&h.h===k.h)return;b.save(),b.beginPath(),b.rect(h.x,h.y,h.w,h.h),b.clip(),b.fillStyle=e.borderColor,b.rect(k.x,k.y,k.w,k.h),b.fill("evenodd"),b.restore()},height:function(){var b=this._view;return b.base-b.y},inRange:function(b,e){return be(this._view,b,e)},inLabelRange:function(b,e){var g=this._view;return Sf(g)?be(g,b,null):be(g,null,e)},inXRange:function(b){return be(this._view,b,null)},inYRange:function(b){return be(this._view,null,b)},getCenterPoint:function(){var b=this._view,e,g;return Sf(b)?(e=b.x,g=(b.y+b.base)/2):(e=(b.x+b.base)/2,g=b.y),{x:e,y:g}},getArea:function(){var b=this._view;return Sf(b)?b.width*Math.abs(b.y-b.base):b.height*Math.abs(b.x-b.base)},tooltipPosition:function(){var b=this._view;return{x:b.x,y:b.y}}}),Wb={},qo=Nc,ro=ko,Wj=Sj,Ye=Vj;Wb.Arc=qo,Wb.Line=ro,Wb.Point=Wj,Wb.Rectangle=Ye;var ce=B._deprecated,de=B.valueOrDefault;S._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),S._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});function so(b,e){var g=b._length,h,k,m,o;for(m=1,o=e.length;m<o;++m)g=Math.min(g,Math.abs(e[m]-e[m-1]));for(m=0,o=b.getTicks().length;m<o;++m)k=b.getPixelForTick(m),g=m>0?Math.min(g,Math.abs(k-h)):g,h=k;return g}function Ze(b,e,g){var h=g.barThickness,k=e.stackCount,m=e.pixels[b],o=B.isNullOrUndef(h)?so(e.scale,e.pixels):-1,r,p;return B.isNullOrUndef(h)?(r=o*g.categoryPercentage,p=g.barPercentage):(r=h*k,p=1),{chunk:r/k,ratio:p,start:m-r/2}}function Tf(b,e,g){var h=e.pixels,k=h[b],m=b>0?h[b-1]:null,o=b<h.length-1?h[b+1]:null,r=g.categoryPercentage,p,s;return m===null&&(m=k-(o===null?e.end-e.start:o-k)),o===null&&(o=k+k-m),p=k-(k-Math.min(m,o))/2*r,s=Math.abs(o-m)/2*r,{chunk:s/e.stackCount,ratio:g.barPercentage,start:p}}var nh=mb.extend({dataElementType:Wb.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var b=this,e,g;mb.prototype.initialize.apply(b,arguments),e=b.getMeta(),e.stack=b.getDataset().stack,e.bar=!0,g=b._getIndexScale().options,ce("bar chart",g.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),ce("bar chart",g.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),ce("bar chart",g.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),ce("bar chart",b._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),ce("bar chart",g.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(b){var e=this,g=e.getMeta().data,h,k;for(e._ruler=e.getRuler(),h=0,k=g.length;h<k;++h)e.updateElement(g[h],h,b)},updateElement:function(b,e,g){var h=this,k=h.getMeta(),m=h.getDataset(),o=h._resolveDataElementOptions(b,e);b._xScale=h.getScaleForId(k.xAxisID),b._yScale=h.getScaleForId(k.yAxisID),b._datasetIndex=h.index,b._index=e,b._model={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderSkipped:o.borderSkipped,borderWidth:o.borderWidth,datasetLabel:m.label,label:h.chart.data.labels[e]},B.isArray(m.data[e])&&(b._model.borderSkipped=null),h._updateElementGeometry(b,e,g,o),b.pivot()},_updateElementGeometry:function(b,e,g,h){var k=this,m=b._model,o=k._getValueScale(),r=o.getBasePixel(),p=o.isHorizontal(),s=k._ruler||k.getRuler(),w=k.calculateBarValuePixels(k.index,e,h),z=k.calculateBarIndexPixels(k.index,e,s,h);m.horizontal=p,m.base=g?r:w.base,m.x=p?g?r:w.head:z.center,m.y=p?z.center:g?r:w.head,m.height=p?z.size:void 0,m.width=p?void 0:z.size},_getStacks:function(b){var e=this,g=e._getIndexScale(),h=g._getMatchingVisibleMetas(e._type),k=g.options.stacked,m=h.length,o=[],r,p;for(r=0;r<m;++r){p=h[r],(k===!1||o.indexOf(p.stack)===-1||k===void 0&&p.stack===void 0)&&o.push(p.stack);if(p.index===b)break}return o},getStackCount:function(){return this._getStacks().length},getStackIndex:function(b,e){var g=this._getStacks(b),h=e!==void 0?g.indexOf(e):-1;return h===-1?g.length-1:h},getRuler:function(){var b=this,e=b._getIndexScale(),g=[],h,k;for(h=0,k=b.getMeta().data.length;h<k;++h)g.push(e.getPixelForValue(null,h,b.index));return{pixels:g,start:e._startPixel,end:e._endPixel,stackCount:b.getStackCount(),scale:e}},calculateBarValuePixels:function(b,e,g){var h=this,k=h.chart,m=h._getValueScale(),o=m.isHorizontal(),r=k.data.datasets,p=m._getMatchingVisibleMetas(h._type),s=m._parseValue(r[b].data[e]),w=g.minBarLength,z=m.options.stacked,D=h.getMeta().stack,M=s.start===void 0?0:s.max>=0&&s.min>=0?s.min:s.max,Q=s.start===void 0?s.end:s.max>=0&&s.min>=0?s.max-s.min:s.min-s.max,T=p.length,Z,ha,wa,Aa,Na,Ha,Xa;if(z||z===void 0&&D!==void 0)for(Z=0;Z<T;++Z){ha=p[Z];if(ha.index===b)break;ha.stack===D&&(Xa=m._parseValue(r[ha.index].data[e]),wa=Xa.start===void 0?Xa.end:Xa.min>=0&&Xa.max>=0?Xa.max:Xa.min,(s.min<0&&wa<0||s.max>=0&&wa>0)&&(M+=wa))}return Aa=m.getPixelForValue(M),Na=m.getPixelForValue(M+Q),Ha=Na-Aa,w!==void 0&&Math.abs(Ha)<w&&(Ha=w,Q>=0&&!o||Q<0&&o?Na=Aa-w:Na=Aa+w),{size:Ha,base:Aa,head:Na,center:Na+Ha/2}},calculateBarIndexPixels:function(b,e,g,h){var k=this,m=h.barThickness==="flex"?Tf(e,g,h):Ze(e,g,h),o=k.getStackIndex(b,k.getMeta().stack),r=m.start+m.chunk*o+m.chunk/2,p=Math.min(de(h.maxBarThickness,Infinity),m.chunk*m.ratio);return{base:r-p/2,head:r+p/2,center:r,size:p}},draw:function(){var b=this,e=b.chart,g=b._getValueScale(),h=b.getMeta().data,k=b.getDataset(),m=h.length,o=0;for(B.canvas.clipArea(e.ctx,e.chartArea);o<m;++o){var r=g._parseValue(k.data[o]);!isNaN(r.min)&&!isNaN(r.max)&&h[o].draw()}B.canvas.unclipArea(e.ctx)},_resolveDataElementOptions:function(){var b=this,e=B.extend({},mb.prototype._resolveDataElementOptions.apply(b,arguments)),g=b._getIndexScale().options,h=b._getValueScale().options;return e.barPercentage=de(g.barPercentage,e.barPercentage),e.barThickness=de(g.barThickness,e.barThickness),e.categoryPercentage=de(g.categoryPercentage,e.categoryPercentage),e.maxBarThickness=de(g.maxBarThickness,e.maxBarThickness),e.minBarLength=de(h.minBarLength,e.minBarLength),e}}),vd=B.valueOrDefault,Oc=B.options.resolve;S._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(b,e){var g=e.datasets[b.datasetIndex].label||"",h=e.datasets[b.datasetIndex].data[b.index];return g+": ("+b.xLabel+", "+b.yLabel+", "+h.r+")"}}}});var to=mb.extend({dataElementType:Wb.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(b){var e=this,g=e.getMeta(),h=g.data;B.each(h,function(k,m){e.updateElement(k,m,b)})},updateElement:function(b,e,g){var h=this,k=h.getMeta(),m=b.custom||{},o=h.getScaleForId(k.xAxisID),r=h.getScaleForId(k.yAxisID),p=h._resolveDataElementOptions(b,e),s=h.getDataset().data[e],w=h.index,z=g?o.getPixelForDecimal(.5):o.getPixelForValue(typeof s==="object"?s:NaN,e,w),D=g?r.getBasePixel():r.getPixelForValue(s,e,w);b._xScale=o,b._yScale=r,b._options=p,b._datasetIndex=w,b._index=e,b._model={backgroundColor:p.backgroundColor,borderColor:p.borderColor,borderWidth:p.borderWidth,hitRadius:p.hitRadius,pointStyle:p.pointStyle,rotation:p.rotation,radius:g?0:p.radius,skip:m.skip||isNaN(z)||isNaN(D),x:z,y:D},b.pivot()},setHoverStyle:function(b){var e=b._model,g=b._options,h=B.getHoverColor;b.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=vd(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=vd(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=vd(g.hoverBorderWidth,g.borderWidth),e.radius=g.radius+g.hoverRadius},_resolveDataElementOptions:function(b,e){var g=this,h=g.chart,k=g.getDataset(),m=b.custom||{},o=k.data[e]||{},r=mb.prototype._resolveDataElementOptions.apply(g,arguments),p={chart:h,dataIndex:e,dataset:k,datasetIndex:g.index};return g._cachedDataOpts===r&&(r=B.extend({},r)),r.radius=Oc([m.radius,o.r,g._config.radius,h.options.elements.point.radius],p,e),r}}),Uf=B.valueOrDefault,wd=Math.PI,Pc=wd*2,xd=wd/2;S._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(b){var e=document.createElement("ul"),g=b.data,h=g.datasets,k=g.labels,m,o,r,p;e.setAttribute("class",b.id+"-legend");if(h.length)for(m=0,o=h[0].data.length;m<o;++m)r=e.appendChild(document.createElement("li")),p=r.appendChild(document.createElement("span")),p.style.backgroundColor=h[0].backgroundColor[m],k[m]&&r.appendChild(document.createTextNode(k[m]));return e.outerHTML},legend:{labels:{generateLabels:function(b){var e=b.data;return e.labels.length&&e.datasets.length?e.labels.map(function(g,h){var k=b.getDatasetMeta(0),m=k.controller.getStyle(h);return{text:g,fillStyle:m.backgroundColor,strokeStyle:m.borderColor,lineWidth:m.borderWidth,hidden:isNaN(e.datasets[0].data[h])||k.data[h].hidden,index:h}}):[]}},onClick:function(b,e){var g=e.index,h=this.chart,k,m,o;for(k=0,m=(h.data.datasets||[]).length;k<m;++k)o=h.getDatasetMeta(k),o.data[g]&&(o.data[g].hidden=!o.data[g].hidden);h.update()}},cutoutPercentage:50,rotation:-xd,circumference:Pc,tooltips:{callbacks:{title:function(){return""},label:function(b,e){var g=e.labels[b.index],h=": "+e.datasets[b.datasetIndex].data[b.index];return B.isArray(g)?(g=g.slice(),g[0]+=h):g+=h,g}}}});var Xj=mb.extend({dataElementType:Wb.Arc,linkScales:B.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(b){for(var e=0,g=0;g<b;++g)this.chart.isDatasetVisible(g)&&++e;return e},update:function(b){var e=this,g=e.chart,h=g.chartArea,k=g.options,m=1,o=1,r=0,p=0,s=e.getMeta(),w=s.data,z=k.cutoutPercentage/100||0,D=k.circumference,M=e._getRingWeight(e.index),Q,T,Z,ha;if(D<Pc){var wa=k.rotation%Pc;wa+=wa>=wd?-Pc:wa<-wd?Pc:0;var Aa=wa+D,Na=Math.cos(wa),Ha=Math.sin(wa),Xa=Math.cos(Aa),ib=Math.sin(Aa),ab=wa<=0&&Aa>=0||Aa>=Pc,db=wa<=xd&&Aa>=xd||Aa>=Pc+xd,Kb=wa===-wd||Aa>=wd,Fb=wa<=-xd&&Aa>=-xd||Aa>=wd+xd,Bb=Kb?-1:Math.min(Na,Na*z,Xa,Xa*z),Nb=Fb?-1:Math.min(Ha,Ha*z,ib,ib*z),me=ab?1:Math.max(Na,Na*z,Xa,Xa*z),hd=db?1:Math.max(Ha,Ha*z,ib,ib*z);m=(me-Bb)/2,o=(hd-Nb)/2,r=-(me+Bb)/2,p=-(hd+Nb)/2}for(Z=0,ha=w.length;Z<ha;++Z)w[Z]._options=e._resolveDataElementOptions(w[Z],Z);for(g.borderWidth=e.getMaxBorderWidth(),Q=(h.right-h.left-g.borderWidth)/m,T=(h.bottom-h.top-g.borderWidth)/o,g.outerRadius=Math.max(Math.min(Q,T)/2,0),g.innerRadius=Math.max(g.outerRadius*z,0),g.radiusLength=(g.outerRadius-g.innerRadius)/(e._getVisibleDatasetWeightTotal()||1),g.offsetX=r*g.outerRadius,g.offsetY=p*g.outerRadius,s.total=e.calculateTotal(),e.outerRadius=g.outerRadius-g.radiusLength*e._getRingWeightOffset(e.index),e.innerRadius=Math.max(e.outerRadius-g.radiusLength*M,0),Z=0,ha=w.length;Z<ha;++Z)e.updateElement(w[Z],Z,b)},updateElement:function(b,e,g){var h=this,k=h.chart,m=k.chartArea,o=k.options,r=o.animation,p=(m.left+m.right)/2,s=(m.top+m.bottom)/2,w=o.rotation,z=o.rotation,D=h.getDataset(),M=g&&r.animateRotate?0:b.hidden?0:h.calculateCircumference(D.data[e])*(o.circumference/Pc),Q=g&&r.animateScale?0:h.innerRadius,T=g&&r.animateScale?0:h.outerRadius,Z=b._options||{};B.extend(b,{_datasetIndex:h.index,_index:e,_model:{backgroundColor:Z.backgroundColor,borderColor:Z.borderColor,borderWidth:Z.borderWidth,borderAlign:Z.borderAlign,x:p+k.offsetX,y:s+k.offsetY,startAngle:w,endAngle:z,circumference:M,outerRadius:T,innerRadius:Q,label:B.valueAtIndexOrDefault(D.label,e,k.data.labels[e])}});var ha=b._model;(!g||!r.animateRotate)&&(e===0?ha.startAngle=o.rotation:ha.startAngle=h.getMeta().data[e-1]._model.endAngle,ha.endAngle=ha.startAngle+ha.circumference),b.pivot()},calculateTotal:function(){var b=this.getDataset(),e=this.getMeta(),g=0,h;return B.each(e.data,function(k,m){h=b.data[m],!isNaN(h)&&!k.hidden&&(g+=Math.abs(h))}),g},calculateCircumference:function(b){var e=this.getMeta().total;return e>0&&!isNaN(b)?Pc*(Math.abs(b)/e):0},getMaxBorderWidth:function(b){var e=this,g=0,h=e.chart,k,m,o,r,p,s,w,z;if(!b){for(k=0,m=h.data.datasets.length;k<m;++k)if(h.isDatasetVisible(k)){o=h.getDatasetMeta(k),b=o.data,k!==e.index&&(p=o.controller);break}}if(!b)return 0;for(k=0,m=b.length;k<m;++k)r=b[k],p?(p._configure(),s=p._resolveDataElementOptions(r,k)):s=r._options,s.borderAlign!=="inner"&&(w=s.borderWidth,z=s.hoverBorderWidth,g=w>g?w:g,g=z>g?z:g);return g},setHoverStyle:function(b){var e=b._model,g=b._options,h=B.getHoverColor;b.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=Uf(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=Uf(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=Uf(g.hoverBorderWidth,g.borderWidth)},_getRingWeightOffset:function(b){for(var e=0,g=0;g<b;++g)this.chart.isDatasetVisible(g)&&(e+=this._getRingWeight(g));return e},_getRingWeight:function(b){return Math.max(Uf(this.chart.data.datasets[b].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});S._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),S._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var uo=nh.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Qc=B.valueOrDefault,oh=B.options.resolve,ph=B.canvas._isPointInArea;S._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});function qh(b,e){var g=b&&b.options.ticks||{},h=g.reverse,k=g.min===void 0?e:0,m=g.max===void 0?e:0;return{start:h?m:k,end:h?k:m}}function vo(b,e,g){var h=g/2,k=qh(b,h),m=qh(e,h);return{top:m.end,right:k.end,bottom:m.start,left:k.start}}function wo(b){var e,g,h,k;return B.isObject(b)?(e=b.top,g=b.right,h=b.bottom,k=b.left):e=g=h=k=b,{top:e,right:g,bottom:h,left:k}}var Yj=mb.extend({datasetElementType:Wb.Line,dataElementType:Wb.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(b){var e=this,g=e.getMeta(),h=g.dataset,k=g.data||[],m=e.chart.options,o=e._config,r=e._showLine=Qc(o.showLine,m.showLines),p,s;for(e._xScale=e.getScaleForId(g.xAxisID),e._yScale=e.getScaleForId(g.yAxisID),r&&(o.tension!==void 0&&o.lineTension===void 0&&(o.lineTension=o.tension),h._scale=e._yScale,h._datasetIndex=e.index,h._children=k,h._model=e._resolveDatasetElementOptions(h),h.pivot()),p=0,s=k.length;p<s;++p)e.updateElement(k[p],p,b);for(r&&h._model.tension!==0&&e.updateBezierControlPoints(),p=0,s=k.length;p<s;++p)k[p].pivot()},updateElement:function(b,e,g){var h=this,k=h.getMeta(),m=b.custom||{},o=h.getDataset(),r=h.index,p=o.data[e],s=h._xScale,w=h._yScale,z=k.dataset._model,D,M,Q=h._resolveDataElementOptions(b,e);D=s.getPixelForValue(typeof p==="object"?p:NaN,e,r),M=g?w.getBasePixel():h.calculatePointY(p,e,r),b._xScale=s,b._yScale=w,b._options=Q,b._datasetIndex=r,b._index=e,b._model={x:D,y:M,skip:m.skip||isNaN(D)||isNaN(M),radius:Q.radius,pointStyle:Q.pointStyle,rotation:Q.rotation,backgroundColor:Q.backgroundColor,borderColor:Q.borderColor,borderWidth:Q.borderWidth,tension:Qc(m.tension,z?z.tension:0),steppedLine:z?z.steppedLine:!1,hitRadius:Q.hitRadius}},_resolveDatasetElementOptions:function(b){var e=this,g=e._config,h=b.custom||{},k=e.chart.options,m=k.elements.line,o=mb.prototype._resolveDatasetElementOptions.apply(e,arguments);return o.spanGaps=Qc(g.spanGaps,k.spanGaps),o.tension=Qc(g.lineTension,m.tension),o.steppedLine=oh([h.steppedLine,g.steppedLine,m.stepped]),o.clip=wo(Qc(g.clip,vo(e._xScale,e._yScale,o.borderWidth))),o},calculatePointY:function(b,e,g){var h=this,k=h.chart,m=h._yScale,o=0,r=0,p,s,w,z,D,M,Q;if(m.options.stacked){for(D=+m.getRightValue(b),M=k._getSortedVisibleDatasetMetas(),Q=M.length,p=0;p<Q;++p){w=M[p];if(w.index===g)break;s=k.data.datasets[w.index],w.type==="line"&&w.yAxisID===m.id&&(z=+m.getRightValue(s.data[e]),z<0?r+=z||0:o+=z||0)}return D<0?m.getPixelForValue(r+D):m.getPixelForValue(o+D)}return m.getPixelForValue(b)},updateBezierControlPoints:function(){var b=this,e=b.chart,g=b.getMeta(),h=g.dataset._model,k=e.chartArea,m=g.data||[],o,r,p,s;h.spanGaps&&(m=m.filter(function(z){return!z._model.skip}));function w(z,D,M){return Math.max(Math.min(z,M),D)}if(h.cubicInterpolationMode==="monotone")B.splineCurveMonotone(m);else for(o=0,r=m.length;o<r;++o)p=m[o]._model,s=B.splineCurve(B.previousItem(m,o)._model,p,B.nextItem(m,o)._model,h.tension),p.controlPointPreviousX=s.previous.x,p.controlPointPreviousY=s.previous.y,p.controlPointNextX=s.next.x,p.controlPointNextY=s.next.y;if(e.options.elements.line.capBezierPoints)for(o=0,r=m.length;o<r;++o)p=m[o]._model,ph(p,k)&&(o>0&&ph(m[o-1]._model,k)&&(p.controlPointPreviousX=w(p.controlPointPreviousX,k.left,k.right),p.controlPointPreviousY=w(p.controlPointPreviousY,k.top,k.bottom)),o<m.length-1&&ph(m[o+1]._model,k)&&(p.controlPointNextX=w(p.controlPointNextX,k.left,k.right),p.controlPointNextY=w(p.controlPointNextY,k.top,k.bottom)))},draw:function(){var b=this,e=b.chart,g=b.getMeta(),h=g.data||[],k=e.chartArea,m=e.canvas,o=0,r=h.length,p;for(b._showLine&&(p=g.dataset._model.clip,B.canvas.clipArea(e.ctx,{left:p.left===!1?0:k.left-p.left,right:p.right===!1?m.width:k.right+p.right,top:p.top===!1?0:k.top-p.top,bottom:p.bottom===!1?m.height:k.bottom+p.bottom}),g.dataset.draw(),B.canvas.unclipArea(e.ctx));o<r;++o)h[o].draw(k)},setHoverStyle:function(b){var e=b._model,g=b._options,h=B.getHoverColor;b.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Qc(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=Qc(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=Qc(g.hoverBorderWidth,g.borderWidth),e.radius=Qc(g.hoverRadius,g.radius)}}),xo=B.options.resolve;S._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(b){var e=document.createElement("ul"),g=b.data,h=g.datasets,k=g.labels,m,o,r,p;e.setAttribute("class",b.id+"-legend");if(h.length)for(m=0,o=h[0].data.length;m<o;++m)r=e.appendChild(document.createElement("li")),p=r.appendChild(document.createElement("span")),p.style.backgroundColor=h[0].backgroundColor[m],k[m]&&r.appendChild(document.createTextNode(k[m]));return e.outerHTML},legend:{labels:{generateLabels:function(b){var e=b.data;return e.labels.length&&e.datasets.length?e.labels.map(function(g,h){var k=b.getDatasetMeta(0),m=k.controller.getStyle(h);return{text:g,fillStyle:m.backgroundColor,strokeStyle:m.borderColor,lineWidth:m.borderWidth,hidden:isNaN(e.datasets[0].data[h])||k.data[h].hidden,index:h}}):[]}},onClick:function(b,e){var g=e.index,h=this.chart,k,m,o;for(k=0,m=(h.data.datasets||[]).length;k<m;++k)o=h.getDatasetMeta(k),o.data[g].hidden=!o.data[g].hidden;h.update()}},tooltips:{callbacks:{title:function(){return""},label:function(b,e){return e.labels[b.index]+": "+b.yLabel}}}});var yo=mb.extend({dataElementType:Wb.Arc,linkScales:B.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(b){var e=this,g=e.getDataset(),h=e.getMeta(),k=e.chart.options.startAngle||0,m=e._starts=[],o=e._angles=[],r=h.data,p,s,w;for(e._updateRadius(),h.count=e.countVisibleElements(),p=0,s=g.data.length;p<s;p++)m[p]=k,w=e._computeAngle(p),o[p]=w,k+=w;for(p=0,s=r.length;p<s;++p)r[p]._options=e._resolveDataElementOptions(r[p],p),e.updateElement(r[p],p,b)},_updateRadius:function(){var b=this,e=b.chart,g=e.chartArea,h=e.options,k=Math.min(g.right-g.left,g.bottom-g.top);e.outerRadius=Math.max(k/2,0),e.innerRadius=Math.max(h.cutoutPercentage?e.outerRadius/100*h.cutoutPercentage:1,0),e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount(),b.outerRadius=e.outerRadius-e.radiusLength*b.index,b.innerRadius=b.outerRadius-e.radiusLength},updateElement:function(b,e,g){var h=this,k=h.chart,m=h.getDataset(),o=k.options,r=o.animation,p=k.scale,s=k.data.labels,w=p.xCenter,z=p.yCenter,D=o.startAngle,M=b.hidden?0:p.getDistanceFromCenterForValue(m.data[e]),Q=h._starts[e],T=Q+(b.hidden?0:h._angles[e]),Z=r.animateScale?0:p.getDistanceFromCenterForValue(m.data[e]),ha=b._options||{};B.extend(b,{_datasetIndex:h.index,_index:e,_scale:p,_model:{backgroundColor:ha.backgroundColor,borderColor:ha.borderColor,borderWidth:ha.borderWidth,borderAlign:ha.borderAlign,x:w,y:z,innerRadius:0,outerRadius:g?Z:M,startAngle:g&&r.animateRotate?D:Q,endAngle:g&&r.animateRotate?D:T,label:B.valueAtIndexOrDefault(s,e,s[e])}}),b.pivot()},countVisibleElements:function(){var b=this.getDataset(),e=this.getMeta(),g=0;return B.each(e.data,function(h,k){!isNaN(b.data[k])&&!h.hidden&&g++}),g},setHoverStyle:function(b){var e=b._model,g=b._options,h=B.getHoverColor,k=B.valueOrDefault;b.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=k(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=k(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=k(g.hoverBorderWidth,g.borderWidth)},_computeAngle:function(b){var e=this,g=this.getMeta().count,h=e.getDataset(),k=e.getMeta();if(isNaN(h.data[b])||k.data[b].hidden)return 0;var m={chart:e.chart,dataIndex:b,dataset:h,datasetIndex:e.index};return xo([e.chart.options.elements.arc.angle,2*Math.PI/g],m,b)}});S._set("pie",B.clone(S.doughnut)),S._set("pie",{cutoutPercentage:0});var zo=Xj,yd=B.valueOrDefault;S._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var Ao=mb.extend({datasetElementType:Wb.Line,dataElementType:Wb.Point,linkScales:B.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(b){var e=this,g=e.getMeta(),h=g.dataset,k=g.data||[],m=e.chart.scale,o=e._config,r,p;for(o.tension!==void 0&&o.lineTension===void 0&&(o.lineTension=o.tension),h._scale=m,h._datasetIndex=e.index,h._children=k,h._loop=!0,h._model=e._resolveDatasetElementOptions(h),h.pivot(),r=0,p=k.length;r<p;++r)e.updateElement(k[r],r,b);for(e.updateBezierControlPoints(),r=0,p=k.length;r<p;++r)k[r].pivot()},updateElement:function(b,e,g){var h=this,k=b.custom||{},m=h.getDataset(),o=h.chart.scale,r=o.getPointPositionForValue(e,m.data[e]),p=h._resolveDataElementOptions(b,e),s=h.getMeta().dataset._model,w=g?o.xCenter:r.x,z=g?o.yCenter:r.y;b._scale=o,b._options=p,b._datasetIndex=h.index,b._index=e,b._model={x:w,y:z,skip:k.skip||isNaN(w)||isNaN(z),radius:p.radius,pointStyle:p.pointStyle,rotation:p.rotation,backgroundColor:p.backgroundColor,borderColor:p.borderColor,borderWidth:p.borderWidth,tension:yd(k.tension,s?s.tension:0),hitRadius:p.hitRadius}},_resolveDatasetElementOptions:function(){var b=this,e=b._config,g=b.chart.options,h=mb.prototype._resolveDatasetElementOptions.apply(b,arguments);return h.spanGaps=yd(e.spanGaps,g.spanGaps),h.tension=yd(e.lineTension,g.elements.line.tension),h},updateBezierControlPoints:function(){var b=this,e=b.getMeta(),g=b.chart.chartArea,h=e.data||[],k,m,o,r;e.dataset._model.spanGaps&&(h=h.filter(function(s){return!s._model.skip}));function p(s,w,z){return Math.max(Math.min(s,z),w)}for(k=0,m=h.length;k<m;++k)o=h[k]._model,r=B.splineCurve(B.previousItem(h,k,!0)._model,o,B.nextItem(h,k,!0)._model,o.tension),o.controlPointPreviousX=p(r.previous.x,g.left,g.right),o.controlPointPreviousY=p(r.previous.y,g.top,g.bottom),o.controlPointNextX=p(r.next.x,g.left,g.right),o.controlPointNextY=p(r.next.y,g.top,g.bottom)},setHoverStyle:function(b){var e=b._model,g=b._options,h=B.getHoverColor;b.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=yd(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=yd(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=yd(g.hoverBorderWidth,g.borderWidth),e.radius=yd(g.hoverRadius,g.radius)}});S._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(b){return"("+b.xLabel+", "+b.yLabel+")"}}}}),S._set("global",{datasets:{scatter:{showLine:!1}}});var Bo=Yj,Zj={bar:nh,bubble:to,doughnut:Xj,horizontalBar:uo,line:Yj,polarArea:yo,pie:zo,radar:Ao,scatter:Bo};function zd(b,e){return b.native?{x:b.x,y:b.y}:B.getRelativePosition(b,e)}function _e(b,e){var g=b._getSortedVisibleDatasetMetas(),h,k,m,o,r,p;for(k=0,o=g.length;k<o;++k)for(h=g[k].data,m=0,r=h.length;m<r;++m)p=h[m],p._view.skip||e(p)}function rh(b,e){var g=[];return _e(b,function(h){h.inRange(e.x,e.y)&&g.push(h)}),g}function sh(b,e,g,h){var k=Number.POSITIVE_INFINITY,m=[];return _e(b,function(o){if(g&&!o.inRange(e.x,e.y))return;var r=o.getCenterPoint(),p=h(e,r);p<k?(m=[o],k=p):p===k&&m.push(o)}),m}function th(b){var e=b.indexOf("x")!==-1,g=b.indexOf("y")!==-1;return function(h,k){var m=e?Math.abs(h.x-k.x):0,o=g?Math.abs(h.y-k.y):0;return Math.sqrt(Math.pow(m,2)+Math.pow(o,2))}}function $e(b,e,g){var h=zd(e,b);g.axis=g.axis||"x";var k=th(g.axis),m=g.intersect?rh(b,h):sh(b,h,!1,k),o=[];return m.length?(b._getSortedVisibleDatasetMetas().forEach(function(r){var p=r.data[m[0]._index];p&&!p._view.skip&&o.push(p)}),o):[]}var dd={modes:{single:function(b,e){var g=zd(e,b),h=[];return _e(b,function(k){if(k.inRange(g.x,g.y))return h.push(k),h}),h.slice(0,1)},label:$e,index:$e,dataset:function(b,e,g){var h=zd(e,b);g.axis=g.axis||"xy";var k=th(g.axis),m=g.intersect?rh(b,h):sh(b,h,!1,k);return m.length>0&&(m=b.getDatasetMeta(m[0]._datasetIndex).data),m},"x-axis":function(b,e){return $e(b,e,{intersect:!1})},point:function(b,e){var g=zd(e,b);return rh(b,g)},nearest:function(b,e,g){var h=zd(e,b);g.axis=g.axis||"xy";var k=th(g.axis);return sh(b,h,g.intersect,k)},x:function(b,e,g){var h=zd(e,b),k=[],m=!1;return _e(b,function(o){o.inXRange(h.x)&&k.push(o),o.inRange(h.x,h.y)&&(m=!0)}),g.intersect&&!m&&(k=[]),k},y:function(b,e,g){var h=zd(e,b),k=[],m=!1;return _e(b,function(o){o.inYRange(h.y)&&k.push(o),o.inRange(h.x,h.y)&&(m=!0)}),g.intersect&&!m&&(k=[]),k}}},uh=B.extend;function ee(b,e){return B.where(b,function(g){return g.pos===e})}function af(b,e){return b.sort(function(g,h){var k=e?h:g,m=e?g:h;return k.weight===m.weight?k.index-m.index:k.weight-m.weight})}function Co(b){var e=[],g,h,k;for(g=0,h=(b||[]).length;g<h;++g)k=b[g],e.push({index:g,box:k,pos:k.position,horizontal:k.isHorizontal(),weight:k.weight});return e}function Do(b,e){var g,h,k;for(g=0,h=b.length;g<h;++g)k=b[g],k.width=k.horizontal?k.box.fullWidth&&e.availableWidth:e.vBoxMaxWidth,k.height=k.horizontal&&e.hBoxMaxHeight}function Eo(b){var e=Co(b),g=af(ee(e,"left"),!0),h=af(ee(e,"right")),k=af(ee(e,"top"),!0),m=af(ee(e,"bottom"));return{leftAndTop:g.concat(k),rightAndBottom:h.concat(m),chartArea:ee(e,"chartArea"),vertical:g.concat(h),horizontal:k.concat(m)}}function _j(b,e,g,h){return Math.max(b[g],e[g])+Math.max(b[h],e[h])}function $j(b,e,g){var h=g.box,k=b.maxPadding,m,o;g.size&&(b[g.pos]-=g.size),g.size=g.horizontal?h.height:h.width,b[g.pos]+=g.size;if(h.getPadding){var r=h.getPadding();k.top=Math.max(k.top,r.top),k.left=Math.max(k.left,r.left),k.bottom=Math.max(k.bottom,r.bottom),k.right=Math.max(k.right,r.right)}m=e.outerWidth-_j(k,b,"left","right"),o=e.outerHeight-_j(k,b,"top","bottom");if(m!==b.w||o!==b.h)return b.w=m,b.h=o,g.horizontal?m!==b.w:o!==b.h}function qb(b){var e=b.maxPadding;function g(h){var k=Math.max(e[h]-b[h],0);return b[h]+=k,k}b.y+=g("top"),b.x+=g("left"),g("right"),g("bottom")}function bf(b,e){var g=e.maxPadding;function h(k){var m={left:0,top:0,right:0,bottom:0};return k.forEach(function(o){m[o]=Math.max(e[o],g[o])}),m}return b?h(["left","right"]):h(["top","bottom"])}function ed(b,e,g){var h=[],k,m,o,r,p,s;for(k=0,m=b.length;k<m;++k)o=b[k],r=o.box,r.update(o.width||e.w,o.height||e.h,bf(o.horizontal,e)),$j(e,g,o)&&(s=!0,h.length&&(p=!0)),r.fullWidth||h.push(o);return p?ed(h,e,g)||s:s}function ak(b,e,g){var h=g.padding,k=e.x,m=e.y,o,r,p,s;for(o=0,r=b.length;o<r;++o)p=b[o],s=p.box,p.horizontal?(s.left=s.fullWidth?h.left:e.left,s.right=s.fullWidth?g.outerWidth-h.right:e.left+e.w,s.top=m,s.bottom=m+s.height,s.width=s.right-s.left,m=s.bottom):(s.left=k,s.right=k+s.width,s.top=e.top,s.bottom=e.top+e.h,s.height=s.bottom-s.top,k=s.right);e.x=k,e.y=m}S._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var ec={defaults:{},addBox:function(b,e){b.boxes||(b.boxes=[]),e.fullWidth=e.fullWidth||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw:function(){e.draw.apply(e,arguments)}}]},b.boxes.push(e)},removeBox:function(b,e){var g=b.boxes?b.boxes.indexOf(e):-1;g!==-1&&b.boxes.splice(g,1)},configure:function(b,e,g){for(var h=["fullWidth","position","weight"],k=h.length,m=0,o;m<k;++m)o=h[m],g.hasOwnProperty(o)&&(e[o]=g[o])},update:function(b,e,g){if(!b)return;var h=b.options.layout||{},k=B.options.toPadding(h.padding),m=e-k.width,o=g-k.height,r=Eo(b.boxes),p=r.vertical,s=r.horizontal,w=Object.freeze({outerWidth:e,outerHeight:g,padding:k,availableWidth:m,vBoxMaxWidth:m/2/p.length,hBoxMaxHeight:o/2}),z=uh({maxPadding:uh({},k),w:m,h:o,x:k.left,y:k.top},k);Do(p.concat(s),w),ed(p,z,w),ed(s,z,w)&&ed(p,z,w),qb(z),ak(r.leftAndTop,z,w),z.x+=z.w,z.y+=z.h,ak(r.rightAndBottom,z,w),b.chartArea={left:z.left,top:z.top,right:z.left+z.w,bottom:z.top+z.h},B.each(r.chartArea,function(D){var M=D.box;uh(M,b.chartArea),M.update(z.w,z.h)})}},Fo={acquireContext:function(b){return b&&b.canvas&&(b=b.canvas),b&&b.getContext("2d")||null}},Vf=`/*
 * DOM element rendering detection
 * https://davidwalsh.name/detect-node-insertion
 */
@keyframes chartjs-render-animation {
	from { opacity: 0.99; }
	to { opacity: 1; }
}

.chartjs-render-monitor {
	animation: chartjs-render-animation 0.001s;
}

/*
 * DOM element resizing detection
 * https://github.com/marcj/css-element-queries
 */
.chartjs-size-monitor,
.chartjs-size-monitor-expand,
.chartjs-size-monitor-shrink {
	position: absolute;
	direction: ltr;
	left: 0;
	top: 0;
	right: 0;
	bottom: 0;
	overflow: hidden;
	pointer-events: none;
	visibility: hidden;
	z-index: -1;
}

.chartjs-size-monitor-expand > div {
	position: absolute;
	width: 1000000px;
	height: 1000000px;
	left: 0;
	top: 0;
}

.chartjs-size-monitor-shrink > div {
	position: absolute;
	width: 200%;
	height: 200%;
	left: 0;
	top: 0;
}
`,fd=Object.freeze({__proto__:null,default:Vf}),vh=i(fd),Sb="$chartjs",rc="chartjs-",wh=rc+"size-monitor",Wf=rc+"render-monitor",Go=rc+"render-animation",bk=["animationstart","webkitAnimationStart"],Ho={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function cf(b,e){var g=B.getStyle(b,e),h=g&&g.match(/^(\d+)(\.\d+)?px$/);return h?Number(h[1]):void 0}function xh(b,e){var g=b.style,h=b.getAttribute("height"),k=b.getAttribute("width");b[Sb]={initial:{height:h,width:k,style:{display:g.display,height:g.height,width:g.width}}},g.display=g.display||"block";if(k===null||k===""){var m=cf(b,"width");m!==void 0&&(b.width=m)}if(h===null||h==="")if(b.style.height==="")b.height=b.width/(e.options.aspectRatio||2);else{var o=cf(b,"height");m!==void 0&&(b.height=o)}return b}var Io=function(){var b=!1;try{var e=Object.defineProperty({},"passive",{get:function(){b=!0}});window.addEventListener("e",null,e)}catch(g){}return b}(),ck=Io?{passive:!0}:!1;function df(b,e,g){b.addEventListener(e,g,ck)}function Xf(b,e,g){b.removeEventListener(e,g,ck)}function yh(b,e,g,h,k){return{type:b,chart:e,native:k||null,x:g!==void 0?g:null,y:h!==void 0?h:null}}function Jo(b,e){var g=Ho[b.type]||b.type,h=B.getRelativePosition(b,e);return yh(g,e,h.x,h.y,b)}function Ko(b,e){var g=!1,h=[];return function(){h=Array.prototype.slice.call(arguments),e=e||this,g||(g=!0,B.requestAnimFrame.call(window,function(){g=!1,b.apply(e,h)}))}}function ef(b){var e=document.createElement("div");return e.className=b||"",e}function Lo(b){var e=1e6,g=ef(wh),h=ef(wh+"-expand"),k=ef(wh+"-shrink");h.appendChild(ef()),k.appendChild(ef()),g.appendChild(h),g.appendChild(k),g._reset=function(){h.scrollLeft=e,h.scrollTop=e,k.scrollLeft=e,k.scrollTop=e};var m=function(){g._reset(),b()};return df(h,"scroll",m.bind(h,"expand")),df(k,"scroll",m.bind(k,"shrink")),g}function dk(b,e){var g=b[Sb]||(b[Sb]={}),h=g.renderProxy=function(k){k.animationName===Go&&e()};B.each(bk,function(k){df(b,k,h)}),g.reflow=!!b.offsetParent,b.classList.add(Wf)}function Mo(b){var e=b[Sb]||{},g=e.renderProxy;g&&(B.each(bk,function(h){Xf(b,h,g)}),delete e.renderProxy),b.classList.remove(Wf)}function fe(b,e,g){var h=b[Sb]||(b[Sb]={}),k=h.resizer=Lo(Ko(function(){if(h.resizer){var m=g.options.maintainAspectRatio&&b.parentNode,o=m?m.clientWidth:0;e(yh("resize",g)),m&&m.clientWidth<o&&g.canvas&&e(yh("resize",g))}}));dk(b,function(){if(h.resizer){var m=b.parentNode;m&&m!==k.parentNode&&m.insertBefore(k,m.firstChild),k._reset()}})}function No(b){var e=b[Sb]||{},g=e.resizer;delete e.resizer,Mo(b),g&&g.parentNode&&g.parentNode.removeChild(g)}function zh(b,e){var g=b[Sb]||(b[Sb]={});if(!g.containsStyles){g.containsStyles=!0,e=`/* Chart.js */
`+e;var h=document.createElement("style");h.setAttribute("type","text/css"),h.appendChild(document.createTextNode(e)),b.appendChild(h)}}var ek={disableCSSInjection:!1,_enabled:typeof window!=="undefined"&&typeof document!=="undefined",_ensureLoaded:function(b){if(!this.disableCSSInjection){var e=b.getRootNode?b.getRootNode():document,g=e.host?e:document.head;zh(g,vh)}},acquireContext:function(b,e){typeof b==="string"?b=document.getElementById(b):b.length&&(b=b[0]),b&&b.canvas&&(b=b.canvas);var g=b&&b.getContext&&b.getContext("2d");return g&&g.canvas===b?(this._ensureLoaded(b),xh(b,e),g):null},releaseContext:function(b){var e=b.canvas;if(!e[Sb])return;var g=e[Sb].initial;["height","width"].forEach(function(h){var k=g[h];B.isNullOrUndef(k)?e.removeAttribute(h):e.setAttribute(h,k)}),B.each(g.style||{},function(h,k){e.style[k]=h}),e.width=e.width,delete e[Sb]},addEventListener:function(b,e,g){var h=b.canvas;if(e==="resize"){fe(h,g,b);return}var k=g[Sb]||(g[Sb]={}),m=k.proxies||(k.proxies={}),o=m[b.id+"_"+e]=function(r){g(Jo(r,b))};df(h,e,o)},removeEventListener:function(b,e,g){var h=b.canvas;if(e==="resize"){No(h);return}var k=g[Sb]||{},m=k.proxies||{},o=m[b.id+"_"+e];if(!o)return;Xf(h,e,o)}};B.addEvent=df,B.removeEvent=Xf;var Ah=ek._enabled?ek:Fo,ge=B.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Ah);S._set("global",{plugins:{}});var nb={_plugins:[],_cacheId:0,register:function(b){var e=this._plugins;[].concat(b).forEach(function(g){e.indexOf(g)===-1&&e.push(g)}),this._cacheId++},unregister:function(b){var e=this._plugins;[].concat(b).forEach(function(g){var h=e.indexOf(g);h!==-1&&e.splice(h,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(b,e,g){var h=this.descriptors(b),k=h.length,m,o,r,p,s;for(m=0;m<k;++m){o=h[m],r=o.plugin,s=r[e];if(typeof s==="function"){p=[b].concat(g||[]),p.push(o.options);if(s.apply(r,p)===!1)return!1}}return!0},descriptors:function(b){var e=b.$plugins||(b.$plugins={});if(e.id===this._cacheId)return e.descriptors;var g=[],h=[],k=b&&b.config||{},m=k.options&&k.options.plugins||{};return this._plugins.concat(k.plugins||[]).forEach(function(o){var r=g.indexOf(o);if(r!==-1)return;var p=o.id,s=m[p];if(s===!1)return;s===!0&&(s=B.clone(S.global.plugins[p])),g.push(o),h.push({plugin:o,options:s||{}})}),e.descriptors=h,e.id=this._cacheId,h},_invalidate:function(b){delete b.$plugins}},ff={constructors:{},defaults:{},registerScaleType:function(b,e,g){this.constructors[b]=e,this.defaults[b]=B.clone(g)},getScaleConstructor:function(b){return this.constructors.hasOwnProperty(b)?this.constructors[b]:void 0},getScaleDefaults:function(b){return this.defaults.hasOwnProperty(b)?B.merge({},[S.scale,this.defaults[b]]):{}},updateScaleDefaults:function(b,e){var g=this;g.defaults.hasOwnProperty(b)&&(g.defaults[b]=B.extend(g.defaults[b],e))},addScalesToLayout:function(b){B.each(b.scales,function(e){e.fullWidth=e.options.fullWidth,e.position=e.options.position,e.weight=e.options.weight,ec.addBox(b,e)})}},Rc=B.valueOrDefault,Yf=B.rtl.getRtlAdapter;S._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:B.noop,title:function(b,e){var g="",h=e.labels,k=h?h.length:0;if(b.length>0){var m=b[0];m.label?g=m.label:m.xLabel?g=m.xLabel:k>0&&m.index<k&&(g=h[m.index])}return g},afterTitle:B.noop,beforeBody:B.noop,beforeLabel:B.noop,label:function(b,e){var g=e.datasets[b.datasetIndex].label||"";return g&&(g+=": "),B.isNullOrUndef(b.value)?g+=b.yLabel:g+=b.value,g},labelColor:function(b,e){var g=e.getDatasetMeta(b.datasetIndex),h=g.data[b.index],k=h._view;return{borderColor:k.borderColor,backgroundColor:k.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:B.noop,afterBody:B.noop,beforeFooter:B.noop,footer:B.noop,afterFooter:B.noop}}});var fk={average:function(b){if(!b.length)return!1;var e,g,h=0,k=0,m=0;for(e=0,g=b.length;e<g;++e){var o=b[e];if(o&&o.hasValue()){var r=o.tooltipPosition();h+=r.x,k+=r.y,++m}}return{x:h/m,y:k/m}},nearest:function(b,e){var g=e.x,h=e.y,k=Number.POSITIVE_INFINITY,m,o,r;for(m=0,o=b.length;m<o;++m){var p=b[m];if(p&&p.hasValue()){var s=p.getCenterPoint(),w=B.distanceBetweenPoints(e,s);w<k&&(k=w,r=p)}}if(r){var z=r.tooltipPosition();g=z.x,h=z.y}return{x:g,y:h}}};function sc(b,e){return e&&(B.isArray(e)?Array.prototype.push.apply(b,e):b.push(e)),b}function Wa(b){return(typeof b==="string"||b instanceof String)&&b.indexOf(`
`)>-1?b.split(`
`):b}function Oo(b){var e=b._xScale,g=b._yScale||b._scale,h=b._index,k=b._datasetIndex,m=b._chart.getDatasetMeta(k).controller,o=m._getIndexScale(),r=m._getValueScale();return{xLabel:e?e.getLabelForIndex(h,k):"",yLabel:g?g.getLabelForIndex(h,k):"",label:o?""+o.getLabelForIndex(h,k):"",value:r?""+r.getLabelForIndex(h,k):"",index:h,datasetIndex:k,x:b._model.x,y:b._model.y}}function gk(b){var e=S.global;return{xPadding:b.xPadding,yPadding:b.yPadding,xAlign:b.xAlign,yAlign:b.yAlign,rtl:b.rtl,textDirection:b.textDirection,bodyFontColor:b.bodyFontColor,_bodyFontFamily:Rc(b.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:Rc(b.bodyFontStyle,e.defaultFontStyle),_bodyAlign:b.bodyAlign,bodyFontSize:Rc(b.bodyFontSize,e.defaultFontSize),bodySpacing:b.bodySpacing,titleFontColor:b.titleFontColor,_titleFontFamily:Rc(b.titleFontFamily,e.defaultFontFamily),_titleFontStyle:Rc(b.titleFontStyle,e.defaultFontStyle),titleFontSize:Rc(b.titleFontSize,e.defaultFontSize),_titleAlign:b.titleAlign,titleSpacing:b.titleSpacing,titleMarginBottom:b.titleMarginBottom,footerFontColor:b.footerFontColor,_footerFontFamily:Rc(b.footerFontFamily,e.defaultFontFamily),_footerFontStyle:Rc(b.footerFontStyle,e.defaultFontStyle),footerFontSize:Rc(b.footerFontSize,e.defaultFontSize),_footerAlign:b.footerAlign,footerSpacing:b.footerSpacing,footerMarginTop:b.footerMarginTop,caretSize:b.caretSize,cornerRadius:b.cornerRadius,backgroundColor:b.backgroundColor,opacity:0,legendColorBackground:b.multiKeyBackground,displayColors:b.displayColors,borderColor:b.borderColor,borderWidth:b.borderWidth}}function hk(b,e){var g=b._chart.ctx,h=e.yPadding*2,k=0,m=e.body,o=m.reduce(function(Q,T){return Q+T.before.length+T.lines.length+T.after.length},0);o+=e.beforeBody.length+e.afterBody.length;var r=e.title.length,p=e.footer.length,s=e.titleFontSize,w=e.bodyFontSize,z=e.footerFontSize;h+=r*s,h+=r?(r-1)*e.titleSpacing:0,h+=r?e.titleMarginBottom:0,h+=o*w,h+=o?(o-1)*e.bodySpacing:0,h+=p?e.footerMarginTop:0,h+=p*z,h+=p?(p-1)*e.footerSpacing:0;var D=0,M=function(Q){k=Math.max(k,g.measureText(Q).width+D)};return g.font=B.fontString(s,e._titleFontStyle,e._titleFontFamily),B.each(e.title,M),g.font=B.fontString(w,e._bodyFontStyle,e._bodyFontFamily),B.each(e.beforeBody.concat(e.afterBody),M),D=e.displayColors?w+2:0,B.each(m,function(Q){B.each(Q.before,M),B.each(Q.lines,M),B.each(Q.after,M)}),D=0,g.font=B.fontString(z,e._footerFontStyle,e._footerFontFamily),B.each(e.footer,M),k+=2*e.xPadding,{width:k,height:h}}function Po(b,e){var g=b._model,h=b._chart,k=b._chart.chartArea,m="center",o="center";g.y<e.height?o="top":g.y>h.height-e.height&&(o="bottom");var r,p,s,w,z,D=(k.left+k.right)/2,M=(k.top+k.bottom)/2;o==="center"?(r=function(T){return T<=D},p=function(T){return T>D}):(r=function(T){return T<=e.width/2},p=function(T){return T>=h.width-e.width/2}),s=function(T){return T+e.width+g.caretSize+g.caretPadding>h.width},w=function(T){return T-e.width-g.caretSize-g.caretPadding<0},z=function(T){return T<=M?"top":"bottom"},r(g.x)?(m="left",s(g.x)&&(m="center",o=z(g.y))):p(g.x)&&(m="right",w(g.x)&&(m="center",o=z(g.y)));var Q=b._options;return{xAlign:Q.xAlign?Q.xAlign:m,yAlign:Q.yAlign?Q.yAlign:o}}function Qo(b,e,g,h){var k=b.x,m=b.y,o=b.caretSize,r=b.caretPadding,p=b.cornerRadius,s=g.xAlign,w=g.yAlign,z=o+r,D=p+r;return s==="right"?k-=e.width:s==="center"&&(k-=e.width/2,k+e.width>h.width&&(k=h.width-e.width),k<0&&(k=0)),w==="top"?m+=z:w==="bottom"?m-=e.height+z:m-=e.height/2,w==="center"?s==="left"?k+=z:s==="right"&&(k-=z):s==="left"?k-=D:s==="right"&&(k+=D),{x:k,y:m}}function Zf(b,e){return e==="center"?b.x+b.width/2:e==="right"?b.x+b.width-b.xPadding:b.x+b.xPadding}function he(b){return sc([],Wa(b))}var Ro=dc.extend({initialize:function(){this._model=gk(this._options),this._lastActive=[]},getTitle:function(){var b=this,e=b._options,g=e.callbacks,h=g.beforeTitle.apply(b,arguments),k=g.title.apply(b,arguments),m=g.afterTitle.apply(b,arguments),o=[];return o=sc(o,Wa(h)),o=sc(o,Wa(k)),o=sc(o,Wa(m)),o},getBeforeBody:function(){return he(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(b,e){var g=this,h=g._options.callbacks,k=[];return B.each(b,function(m){var o={before:[],lines:[],after:[]};sc(o.before,Wa(h.beforeLabel.call(g,m,e))),sc(o.lines,h.label.call(g,m,e)),sc(o.after,Wa(h.afterLabel.call(g,m,e))),k.push(o)}),k},getAfterBody:function(){return he(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var b=this,e=b._options.callbacks,g=e.beforeFooter.apply(b,arguments),h=e.footer.apply(b,arguments),k=e.afterFooter.apply(b,arguments),m=[];return m=sc(m,Wa(g)),m=sc(m,Wa(h)),m=sc(m,Wa(k)),m},update:function(b){var e=this,g=e._options,h=e._model,k=e._model=gk(g),m=e._active,o=e._data,r={xAlign:h.xAlign,yAlign:h.yAlign},p={x:h.x,y:h.y},s={width:h.width,height:h.height},w={x:h.caretX,y:h.caretY},z,D;if(m.length){k.opacity=1;var M=[],Q=[];w=fk[g.position].call(e,m,e._eventPosition);var T=[];for(z=0,D=m.length;z<D;++z)T.push(Oo(m[z]));g.filter&&(T=T.filter(function(Z){return g.filter(Z,o)})),g.itemSort&&(T=T.sort(function(Z,ha){return g.itemSort(Z,ha,o)})),B.each(T,function(Z){M.push(g.callbacks.labelColor.call(e,Z,e._chart)),Q.push(g.callbacks.labelTextColor.call(e,Z,e._chart))}),k.title=e.getTitle(T,o),k.beforeBody=e.getBeforeBody(T,o),k.body=e.getBody(T,o),k.afterBody=e.getAfterBody(T,o),k.footer=e.getFooter(T,o),k.x=w.x,k.y=w.y,k.caretPadding=g.caretPadding,k.labelColors=M,k.labelTextColors=Q,k.dataPoints=T,s=hk(this,k),r=Po(this,s),p=Qo(k,s,r,e._chart)}else k.opacity=0;return k.xAlign=r.xAlign,k.yAlign=r.yAlign,k.x=p.x,k.y=p.y,k.width=s.width,k.height=s.height,k.caretX=w.x,k.caretY=w.y,e._model=k,b&&g.custom&&g.custom.call(e,k),e},drawCaret:function(b,e){var g=this._chart.ctx,h=this._view,k=this.getCaretPosition(b,e,h);g.lineTo(k.x1,k.y1),g.lineTo(k.x2,k.y2),g.lineTo(k.x3,k.y3)},getCaretPosition:function(b,e,g){var h,k,m,o,r,p,s=g.caretSize,w=g.cornerRadius,z=g.xAlign,D=g.yAlign,M=b.x,Q=b.y,T=e.width,Z=e.height;if(D==="center")r=Q+Z/2,z==="left"?(h=M,k=h-s,m=h,o=r+s,p=r-s):(h=M+T,k=h+s,m=h,o=r-s,p=r+s);else{z==="left"?(k=M+w+s,h=k-s,m=k+s):z==="right"?(k=M+T-w-s,h=k-s,m=k+s):(k=g.caretX,h=k-s,m=k+s);if(D==="top")o=Q,r=o-s,p=o;else{o=Q+Z,r=o+s,p=o;var ha=m;m=h,h=ha}}return{x1:h,x2:k,x3:m,y1:o,y2:r,y3:p}},drawTitle:function(b,e,g){var h=e.title,k=h.length,m,o,r;if(k){var p=Yf(e.rtl,e.x,e.width);for(b.x=Zf(e,e._titleAlign),g.textAlign=p.textAlign(e._titleAlign),g.textBaseline="middle",m=e.titleFontSize,o=e.titleSpacing,g.fillStyle=e.titleFontColor,g.font=B.fontString(m,e._titleFontStyle,e._titleFontFamily),r=0;r<k;++r)g.fillText(h[r],p.x(b.x),b.y+m/2),b.y+=m+o,r+1===k&&(b.y+=e.titleMarginBottom-o)}},drawBody:function(b,e,g){var h=e.bodyFontSize,k=e.bodySpacing,m=e._bodyAlign,o=e.body,r=e.displayColors,p=0,s=r?Zf(e,"left"):0,w=Yf(e.rtl,e.x,e.width),z=function(Xa){g.fillText(Xa,w.x(b.x+p),b.y+h/2),b.y+=h+k},D,M,Q,T,Z,ha,wa,Aa,Na=w.textAlign(m);for(g.textAlign=m,g.textBaseline="middle",g.font=B.fontString(h,e._bodyFontStyle,e._bodyFontFamily),b.x=Zf(e,Na),g.fillStyle=e.bodyFontColor,B.each(e.beforeBody,z),p=r&&Na!=="right"?m==="center"?h/2+1:h+2:0,Z=0,wa=o.length;Z<wa;++Z){for(D=o[Z],M=e.labelTextColors[Z],Q=e.labelColors[Z],g.fillStyle=M,B.each(D.before,z),T=D.lines,ha=0,Aa=T.length;ha<Aa;++ha){if(r){var Ha=w.x(s);g.fillStyle=e.legendColorBackground,g.fillRect(w.leftForLtr(Ha,h),b.y,h,h),g.lineWidth=1,g.strokeStyle=Q.borderColor,g.strokeRect(w.leftForLtr(Ha,h),b.y,h,h),g.fillStyle=Q.backgroundColor,g.fillRect(w.leftForLtr(w.xPlus(Ha,1),h-2),b.y+1,h-2,h-2),g.fillStyle=M}z(T[ha])}B.each(D.after,z)}p=0,B.each(e.afterBody,z),b.y-=k},drawFooter:function(b,e,g){var h=e.footer,k=h.length,m,o;if(k){var r=Yf(e.rtl,e.x,e.width);for(b.x=Zf(e,e._footerAlign),b.y+=e.footerMarginTop,g.textAlign=r.textAlign(e._footerAlign),g.textBaseline="middle",m=e.footerFontSize,g.fillStyle=e.footerFontColor,g.font=B.fontString(m,e._footerFontStyle,e._footerFontFamily),o=0;o<k;++o)g.fillText(h[o],r.x(b.x),b.y+m/2),b.y+=m+e.footerSpacing}},drawBackground:function(b,e,g,h){g.fillStyle=e.backgroundColor,g.strokeStyle=e.borderColor,g.lineWidth=e.borderWidth;var k=e.xAlign,m=e.yAlign,o=b.x,r=b.y,p=h.width,s=h.height,w=e.cornerRadius;g.beginPath(),g.moveTo(o+w,r),m==="top"&&this.drawCaret(b,h),g.lineTo(o+p-w,r),g.quadraticCurveTo(o+p,r,o+p,r+w),m==="center"&&k==="right"&&this.drawCaret(b,h),g.lineTo(o+p,r+s-w),g.quadraticCurveTo(o+p,r+s,o+p-w,r+s),m==="bottom"&&this.drawCaret(b,h),g.lineTo(o+w,r+s),g.quadraticCurveTo(o,r+s,o,r+s-w),m==="center"&&k==="left"&&this.drawCaret(b,h),g.lineTo(o,r+w),g.quadraticCurveTo(o,r,o+w,r),g.closePath(),g.fill(),e.borderWidth>0&&g.stroke()},draw:function(){var b=this._chart.ctx,e=this._view;if(e.opacity===0)return;var g={width:e.width,height:e.height},h={x:e.x,y:e.y},k=Math.abs(e.opacity<.001)?0:e.opacity,m=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;this._options.enabled&&m&&(b.save(),b.globalAlpha=k,this.drawBackground(h,e,b,g),h.y+=e.yPadding,B.rtl.overrideTextDirection(b,e.textDirection),this.drawTitle(h,e,b),this.drawBody(h,e,b),this.drawFooter(h,e,b),B.rtl.restoreTextDirection(b,e.textDirection),b.restore())},handleEvent:function(b){var e=this,g=e._options,h=!1;return e._lastActive=e._lastActive||[],b.type==="mouseout"?e._active=[]:(e._active=e._chart.getElementsAtEventForMode(b,g.mode,g),g.reverse&&e._active.reverse()),h=!B.arrayEquals(e._active,e._lastActive),h&&(e._lastActive=e._active,(g.enabled||g.custom)&&(e._eventPosition={x:b.x,y:b.y},e.update(!0),e.pivot())),h}}),So=fk,Bh=Ro;Bh.positioners=So;var ie=B.valueOrDefault;S._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});function gf(){return B.merge({},[].slice.call(arguments),{merger:function(b,e,g,h){if(b==="xAxes"||b==="yAxes"){var k=g[b].length,m,o,r;for(e[b]||(e[b]=[]),m=0;m<k;++m)r=g[b][m],o=ie(r.type,b==="xAxes"?"category":"linear"),m>=e[b].length&&e[b].push({}),!e[b][m].type||r.type&&r.type!==e[b][m].type?B.merge(e[b][m],[ff.getScaleDefaults(o),r]):B.merge(e[b][m],r)}else B._merger(b,e,g,h)}})}function hf(){return B.merge({},[].slice.call(arguments),{merger:function(b,e,g,h){var k=e[b]||{},m=g[b];b==="scales"?e[b]=gf(k,m):b==="scale"?e[b]=B.merge(k,[ff.getScaleDefaults(m.type),m]):B._merger(b,e,g,h)}})}function To(b){b=b||{};var e=b.data=b.data||{};return e.datasets=e.datasets||[],e.labels=e.labels||[],b.options=hf(S.global,S[b.type],b.options||{}),b}function ik(b){var e=b.options;B.each(b.scales,function(g){ec.removeBox(b,g)}),e=hf(S.global,S[b.config.type],e),b.options=b.config.options=e,b.ensureScalesHaveIDs(),b.buildOrUpdateScales(),b.tooltip._options=e.tooltips,b.tooltip.initialize()}function jk(b,e,g){var h,k=function(m){return m.id===h};do h=e+g++;while(B.findIndex(b,k)>=0);return h}function _f(b){return b==="top"||b==="bottom"}function $f(b,e){return function(g,h){return g[b]===h[b]?g[e]-h[e]:g[b]-h[b]}}var Fc=function(b,e){return this.construct(b,e),this};B.extend(Fc.prototype,{construct:function(b,e){var g=this;e=To(e);var h=ge.acquireContext(b,e),k=h&&h.canvas,m=k&&k.height,o=k&&k.width;g.id=B.uid(),g.ctx=h,g.canvas=k,g.config=e,g.width=o,g.height=m,g.aspectRatio=m?o/m:null,g.options=e.options,g._bufferedRender=!1,g._layers=[],g.chart=g,g.controller=g,Fc.instances[g.id]=g,Object.defineProperty(g,"data",{get:function(){return g.config.data},set:function(r){g.config.data=r}});if(!h||!k){console.error("Failed to create chart: can't acquire context from the given item");return}g.initialize(),g.update()},initialize:function(){var b=this;return nb.notify(b,"beforeInit"),B.retinaScale(b,b.options.devicePixelRatio),b.bindEvents(),b.options.responsive&&b.resize(!0),b.initToolTip(),nb.notify(b,"afterInit"),b},clear:function(){return B.canvas.clear(this),this},stop:function(){return kh.cancelAnimation(this),this},resize:function(b){var e=this,g=e.options,h=e.canvas,k=g.maintainAspectRatio&&e.aspectRatio||null,m=Math.max(0,Math.floor(B.getMaximumWidth(h))),o=Math.max(0,Math.floor(k?m/k:B.getMaximumHeight(h)));if(e.width===m&&e.height===o)return;h.width=e.width=m,h.height=e.height=o,h.style.width=m+"px",h.style.height=o+"px",B.retinaScale(e,g.devicePixelRatio);if(!b){var r={width:m,height:o};nb.notify(e,"resize",[r]),g.onResize&&g.onResize(e,r),e.stop(),e.update({duration:g.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var b=this.options,e=b.scales||{},g=b.scale;B.each(e.xAxes,function(h,k){h.id||(h.id=jk(e.xAxes,"x-axis-",k))}),B.each(e.yAxes,function(h,k){h.id||(h.id=jk(e.yAxes,"y-axis-",k))}),g&&(g.id=g.id||"scale")},buildOrUpdateScales:function(){var b=this,e=b.options,g=b.scales||{},h=[],k=Object.keys(g).reduce(function(m,o){return m[o]=!1,m},{});e.scales&&(h=h.concat((e.scales.xAxes||[]).map(function(m){return{options:m,dtype:"category",dposition:"bottom"}}),(e.scales.yAxes||[]).map(function(m){return{options:m,dtype:"linear",dposition:"left"}}))),e.scale&&h.push({options:e.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),B.each(h,function(m){var o=m.options,r=o.id,p=ie(o.type,m.dtype);_f(o.position)!==_f(m.dposition)&&(o.position=m.dposition),k[r]=!0;var s=null;if(r in g&&g[r].type===p)s=g[r],s.options=o,s.ctx=b.ctx,s.chart=b;else{var w=ff.getScaleConstructor(p);if(!w)return;s=new w({id:r,type:p,options:o,ctx:b.ctx,chart:b}),g[s.id]=s}s.mergeTicksOptions(),m.isDefault&&(b.scale=s)}),B.each(k,function(m,o){m||delete g[o]}),b.scales=g,ff.addScalesToLayout(this)},buildOrUpdateControllers:function(){var b=this,e=[],g=b.data.datasets,h,k;for(h=0,k=g.length;h<k;h++){var m=g[h],o=b.getDatasetMeta(h),r=m.type||b.config.type;o.type&&o.type!==r&&(b.destroyDatasetMeta(h),o=b.getDatasetMeta(h)),o.type=r,o.order=m.order||0,o.index=h;if(o.controller)o.controller.updateIndex(h),o.controller.linkScales();else{var p=Zj[o.type];if(p===void 0)throw new Error('"'+o.type+'" is not a chart type.');o.controller=new p(b,h),e.push(o.controller)}}return e},resetElements:function(){var b=this;B.each(b.data.datasets,function(e,g){b.getDatasetMeta(g).controller.reset()},b)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(b){var e=this,g,h;(!b||typeof b!=="object")&&(b={duration:b,lazy:arguments[1]}),ik(e),nb._invalidate(e);if(nb.notify(e,"beforeUpdate")===!1)return;e.tooltip._data=e.data;var k=e.buildOrUpdateControllers();for(g=0,h=e.data.datasets.length;g<h;g++)e.getDatasetMeta(g).controller.buildOrUpdateElements();e.updateLayout(),e.options.animation&&e.options.animation.duration&&B.each(k,function(m){m.reset()}),e.updateDatasets(),e.tooltip.initialize(),e.lastActive=[],nb.notify(e,"afterUpdate"),e._layers.sort($f("z","_idx")),e._bufferedRender?e._bufferedRequest={duration:b.duration,easing:b.easing,lazy:b.lazy}:e.render(b)},updateLayout:function(){var b=this;if(nb.notify(b,"beforeLayout")===!1)return;ec.update(this,this.width,this.height),b._layers=[],B.each(b.boxes,function(e){e._configure&&e._configure(),b._layers.push.apply(b._layers,e._layers())},b),b._layers.forEach(function(e,g){e._idx=g}),nb.notify(b,"afterScaleUpdate"),nb.notify(b,"afterLayout")},updateDatasets:function(){var b=this;if(nb.notify(b,"beforeDatasetsUpdate")===!1)return;for(var e=0,g=b.data.datasets.length;e<g;++e)b.updateDataset(e);nb.notify(b,"afterDatasetsUpdate")},updateDataset:function(b){var e=this,g=e.getDatasetMeta(b),h={meta:g,index:b};if(nb.notify(e,"beforeDatasetUpdate",[h])===!1)return;g.controller._update(),nb.notify(e,"afterDatasetUpdate",[h])},render:function(b){var e=this;(!b||typeof b!=="object")&&(b={duration:b,lazy:arguments[1]});var g=e.options.animation,h=ie(b.duration,g&&g.duration),k=b.lazy;if(nb.notify(e,"beforeRender")===!1)return;var m=function(r){nb.notify(e,"afterRender"),B.callback(g&&g.onComplete,[r],e)};if(g&&h){var o=new jh({numSteps:h/16.66,easing:b.easing||g.easing,render:function(r,p){var s=B.easing.effects[p.easing],w=p.currentStep,z=w/p.numSteps;r.draw(s(z),z,w)},onAnimationProgress:g.onProgress,onAnimationComplete:m});kh.addAnimation(e,o,h,k)}else e.draw(),m(new jh({numSteps:0,chart:e}));return e},draw:function(b){var e=this,g,h;e.clear(),B.isNullOrUndef(b)&&(b=1),e.transition(b);if(e.width<=0||e.height<=0)return;if(nb.notify(e,"beforeDraw",[b])===!1)return;for(h=e._layers,g=0;g<h.length&&h[g].z<=0;++g)h[g].draw(e.chartArea);for(e.drawDatasets(b);g<h.length;++g)h[g].draw(e.chartArea);e._drawTooltip(b),nb.notify(e,"afterDraw",[b])},transition:function(b){for(var e=this,g=0,h=(e.data.datasets||[]).length;g<h;++g)e.isDatasetVisible(g)&&e.getDatasetMeta(g).controller.transition(b);e.tooltip.transition(b)},_getSortedDatasetMetas:function(b){var e=this,g=e.data.datasets||[],h=[],k,m;for(k=0,m=g.length;k<m;++k)(!b||e.isDatasetVisible(k))&&h.push(e.getDatasetMeta(k));return h.sort($f("order","index")),h},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(b){var e=this,g,h;if(nb.notify(e,"beforeDatasetsDraw",[b])===!1)return;for(g=e._getSortedVisibleDatasetMetas(),h=g.length-1;h>=0;--h)e.drawDataset(g[h],b);nb.notify(e,"afterDatasetsDraw",[b])},drawDataset:function(b,e){var g=this,h={meta:b,index:b.index,easingValue:e};if(nb.notify(g,"beforeDatasetDraw",[h])===!1)return;b.controller.draw(e),nb.notify(g,"afterDatasetDraw",[h])},_drawTooltip:function(b){var e=this,g=e.tooltip,h={tooltip:g,easingValue:b};if(nb.notify(e,"beforeTooltipDraw",[h])===!1)return;g.draw(),nb.notify(e,"afterTooltipDraw",[h])},getElementAtEvent:function(b){return dd.modes.single(this,b)},getElementsAtEvent:function(b){return dd.modes.label(this,b,{intersect:!0})},getElementsAtXAxis:function(b){return dd.modes["x-axis"](this,b,{intersect:!0})},getElementsAtEventForMode:function(b,e,g){var h=dd.modes[e];return typeof h==="function"?h(this,b,g):[]},getDatasetAtEvent:function(b){return dd.modes.dataset(this,b,{intersect:!0})},getDatasetMeta:function(b){var e=this,g=e.data.datasets[b];g._meta||(g._meta={});var h=g._meta[e.id];return h||(h=g._meta[e.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:g.order||0,index:b}),h},getVisibleDatasetCount:function(){for(var b=0,e=0,g=this.data.datasets.length;e<g;++e)this.isDatasetVisible(e)&&b++;return b},isDatasetVisible:function(b){var e=this.getDatasetMeta(b);return typeof e.hidden==="boolean"?!e.hidden:!this.data.datasets[b].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(b){var e=this.id,g=this.data.datasets[b],h=g._meta&&g._meta[e];h&&(h.controller.destroy(),delete g._meta[e])},destroy:function(){var b=this,e=b.canvas,g,h;for(b.stop(),g=0,h=b.data.datasets.length;g<h;++g)b.destroyDatasetMeta(g);e&&(b.unbindEvents(),B.canvas.clear(b),ge.releaseContext(b.ctx),b.canvas=null,b.ctx=null),nb.notify(b,"destroy"),delete Fc.instances[b.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var b=this;b.tooltip=new Bh({_chart:b,_chartInstance:b,_data:b.data,_options:b.options.tooltips},b)},bindEvents:function(){var b=this,e=b._listeners={},g=function(){b.eventHandler.apply(b,arguments)};B.each(b.options.events,function(h){ge.addEventListener(b,h,g),e[h]=g}),b.options.responsive&&(g=function(){b.resize()},ge.addEventListener(b,"resize",g),e.resize=g)},unbindEvents:function(){var b=this,e=b._listeners;if(!e)return;delete b._listeners,B.each(e,function(g,h){ge.removeEventListener(b,h,g)})},updateHoverStyle:function(b,e,g){var h=g?"set":"remove",k,m,o;for(m=0,o=b.length;m<o;++m)k=b[m],k&&this.getDatasetMeta(k._datasetIndex).controller[h+"HoverStyle"](k);e==="dataset"&&this.getDatasetMeta(b[0]._datasetIndex).controller["_"+h+"DatasetHoverStyle"]()},eventHandler:function(b){var e=this,g=e.tooltip;if(nb.notify(e,"beforeEvent",[b])===!1)return;e._bufferedRender=!0,e._bufferedRequest=null;var h=e.handleEvent(b);g&&(h=g._start?g.handleEvent(b):h|g.handleEvent(b)),nb.notify(e,"afterEvent",[b]);var k=e._bufferedRequest;return k?e.render(k):h&&!e.animating&&(e.stop(),e.render({duration:e.options.hover.animationDuration,lazy:!0})),e._bufferedRender=!1,e._bufferedRequest=null,e},handleEvent:function(b){var e=this,g=e.options||{},h=g.hover,k=!1;return e.lastActive=e.lastActive||[],b.type==="mouseout"?e.active=[]:e.active=e.getElementsAtEventForMode(b,h.mode,h),B.callback(g.onHover||g.hover.onHover,[b.native,e.active],e),(b.type==="mouseup"||b.type==="click")&&(g.onClick&&g.onClick.call(e,b.native,e.active)),e.lastActive.length&&e.updateHoverStyle(e.lastActive,h.mode,!1),e.active.length&&h.mode&&e.updateHoverStyle(e.active,h.mode,!0),k=!B.arrayEquals(e.active,e.lastActive),e.lastActive=e.active,k}}),Fc.instances={};var Ma=Fc;Fc.Controller=Fc,Fc.types={},B.configMerge=hf,B.scaleMerge=gf;var Uo=function(){B.where=function(h,k){if(B.isArray(h)&&Array.prototype.filter)return h.filter(k);var m=[];return B.each(h,function(o){k(o)&&m.push(o)}),m},B.findIndex=Array.prototype.findIndex?function(h,k,m){return h.findIndex(k,m)}:function(h,k,m){m=m===void 0?h:m;for(var o=0,r=h.length;o<r;++o)if(k.call(m,h[o],o,h))return o;return-1},B.findNextWhere=function(h,k,m){B.isNullOrUndef(m)&&(m=-1);for(var o=m+1;o<h.length;o++){var r=h[o];if(k(r))return r}},B.findPreviousWhere=function(h,k,m){B.isNullOrUndef(m)&&(m=h.length);for(var o=m-1;o>=0;o--){var r=h[o];if(k(r))return r}},B.isNumber=function(h){return!isNaN(parseFloat(h))&&isFinite(h)},B.almostEquals=function(h,k,m){return Math.abs(h-k)<m},B.almostWhole=function(h,k){var m=Math.round(h);return m-k<=h&&m+k>=h},B.max=function(h){return h.reduce(function(k,m){return isNaN(m)?k:Math.max(k,m)},Number.NEGATIVE_INFINITY)},B.min=function(h){return h.reduce(function(k,m){return isNaN(m)?k:Math.min(k,m)},Number.POSITIVE_INFINITY)},B.sign=Math.sign?function(h){return Math.sign(h)}:function(h){return h=+h,h===0||isNaN(h)?h:h>0?1:-1},B.toRadians=function(h){return h*(Math.PI/180)},B.toDegrees=function(h){return h*(180/Math.PI)},B._decimalPlaces=function(h){if(!B.isFinite(h))return;for(var k=1,m=0;Math.round(h*k)/k!==h;)k*=10,m++;return m},B.getAngleFromPoint=function(h,k){var m=k.x-h.x,o=k.y-h.y,r=Math.sqrt(m*m+o*o),p=Math.atan2(o,m);return p<-.5*Math.PI&&(p+=2*Math.PI),{angle:p,distance:r}},B.distanceBetweenPoints=function(h,k){return Math.sqrt(Math.pow(k.x-h.x,2)+Math.pow(k.y-h.y,2))},B.aliasPixel=function(h){return h%2===0?0:.5},B._alignPixel=function(h,k,m){var o=h.currentDevicePixelRatio,r=m/2;return Math.round((k-r)*o)/o+r},B.splineCurve=function(h,k,m,o){var r=h.skip?k:h,p=k,s=m.skip?k:m,w=Math.sqrt(Math.pow(p.x-r.x,2)+Math.pow(p.y-r.y,2)),z=Math.sqrt(Math.pow(s.x-p.x,2)+Math.pow(s.y-p.y,2)),D=w/(w+z),M=z/(w+z);D=isNaN(D)?0:D,M=isNaN(M)?0:M;var Q=o*D,T=o*M;return{previous:{x:p.x-Q*(s.x-r.x),y:p.y-Q*(s.y-r.y)},next:{x:p.x+T*(s.x-r.x),y:p.y+T*(s.y-r.y)}}},B.EPSILON=Number.EPSILON||1e-14,B.splineCurveMonotone=function(h){var k=(h||[]).map(function(Z){return{model:Z._model,deltaK:0,mK:0}}),m=k.length,o,r,p,s;for(o=0;o<m;++o){p=k[o];if(p.model.skip)continue;r=o>0?k[o-1]:null,s=o<m-1?k[o+1]:null;if(s&&!s.model.skip){var w=s.model.x-p.model.x;p.deltaK=w!==0?(s.model.y-p.model.y)/w:0}!r||r.model.skip?p.mK=p.deltaK:!s||s.model.skip?p.mK=r.deltaK:this.sign(r.deltaK)!==this.sign(p.deltaK)?p.mK=0:p.mK=(r.deltaK+p.deltaK)/2}var z,D,M,Q;for(o=0;o<m-1;++o){p=k[o],s=k[o+1];if(p.model.skip||s.model.skip)continue;if(B.almostEquals(p.deltaK,0,this.EPSILON)){p.mK=s.mK=0;continue}z=p.mK/p.deltaK,D=s.mK/p.deltaK,Q=Math.pow(z,2)+Math.pow(D,2);if(Q<=9)continue;M=3/Math.sqrt(Q),p.mK=z*M*p.deltaK,s.mK=D*M*p.deltaK}var T;for(o=0;o<m;++o){p=k[o];if(p.model.skip)continue;r=o>0?k[o-1]:null,s=o<m-1?k[o+1]:null,r&&!r.model.skip&&(T=(p.model.x-r.model.x)/3,p.model.controlPointPreviousX=p.model.x-T,p.model.controlPointPreviousY=p.model.y-T*p.mK),s&&!s.model.skip&&(T=(s.model.x-p.model.x)/3,p.model.controlPointNextX=p.model.x+T,p.model.controlPointNextY=p.model.y+T*p.mK)}},B.nextItem=function(h,k,m){return m?k>=h.length-1?h[0]:h[k+1]:k>=h.length-1?h[h.length-1]:h[k+1]},B.previousItem=function(h,k,m){return m?k<=0?h[h.length-1]:h[k-1]:k<=0?h[0]:h[k-1]},B.niceNum=function(h,k){var m=Math.floor(B.log10(h)),o=h/Math.pow(10,m),r;return k?o<1.5?r=1:o<3?r=2:o<7?r=5:r=10:o<=1?r=1:o<=2?r=2:o<=5?r=5:r=10,r*Math.pow(10,m)},B.requestAnimFrame=function(){return typeof window==="undefined"?function(h){h()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(h){return window.setTimeout(h,1e3/60)}}(),B.getRelativePosition=function(h,k){var m,o,r=h.originalEvent||h,p=h.target||h.srcElement,s=p.getBoundingClientRect(),w=r.touches;w&&w.length>0?(m=w[0].clientX,o=w[0].clientY):(m=r.clientX,o=r.clientY);var z=parseFloat(B.getStyle(p,"padding-left")),D=parseFloat(B.getStyle(p,"padding-top")),M=parseFloat(B.getStyle(p,"padding-right")),Q=parseFloat(B.getStyle(p,"padding-bottom")),T=s.right-s.left-z-M,Z=s.bottom-s.top-D-Q;return m=Math.round((m-s.left-z)/T*p.width/k.currentDevicePixelRatio),o=Math.round((o-s.top-D)/Z*p.height/k.currentDevicePixelRatio),{x:m,y:o}};function b(h,k,m){var o;return typeof h==="string"?(o=parseInt(h,10),h.indexOf("%")!==-1&&(o=o/100*k.parentNode[m])):o=h,o}function e(h){return h!==void 0&&h!==null&&h!=="none"}function g(h,k,m){var o=document.defaultView,r=B._getParentNode(h),p=o.getComputedStyle(h)[k],s=o.getComputedStyle(r)[k],w=e(p),z=e(s),D=Number.POSITIVE_INFINITY;return w||z?Math.min(w?b(p,h,m):D,z?b(s,r,m):D):"none"}B.getConstraintWidth=function(h){return g(h,"max-width","clientWidth")},B.getConstraintHeight=function(h){return g(h,"max-height","clientHeight")},B._calculatePadding=function(h,k,m){return k=B.getStyle(h,k),k.indexOf("%")>-1?m*parseInt(k,10)/100:parseInt(k,10)},B._getParentNode=function(h){var k=h.parentNode;return k&&k.toString()==="[object ShadowRoot]"&&(k=k.host),k},B.getMaximumWidth=function(h){var k=B._getParentNode(h);if(!k)return h.clientWidth;var m=k.clientWidth,o=B._calculatePadding(k,"padding-left",m),r=B._calculatePadding(k,"padding-right",m),p=m-o-r,s=B.getConstraintWidth(h);return isNaN(s)?p:Math.min(p,s)},B.getMaximumHeight=function(h){var k=B._getParentNode(h);if(!k)return h.clientHeight;var m=k.clientHeight,o=B._calculatePadding(k,"padding-top",m),r=B._calculatePadding(k,"padding-bottom",m),p=m-o-r,s=B.getConstraintHeight(h);return isNaN(s)?p:Math.min(p,s)},B.getStyle=function(h,k){return h.currentStyle?h.currentStyle[k]:document.defaultView.getComputedStyle(h,null).getPropertyValue(k)},B.retinaScale=function(h,k){var m=h.currentDevicePixelRatio=k||typeof window!=="undefined"&&window.devicePixelRatio||1;if(m===1)return;var o=h.canvas,r=h.height,p=h.width;o.height=r*m,o.width=p*m,h.ctx.scale(m,m),!o.style.height&&!o.style.width&&(o.style.height=r+"px",o.style.width=p+"px")},B.fontString=function(h,k,m){return k+" "+h+"px "+m},B.longestText=function(h,k,m,o){o=o||{};var r=o.data=o.data||{},p=o.garbageCollect=o.garbageCollect||[];o.font!==k&&(r=o.data={},p=o.garbageCollect=[],o.font=k),h.font=k;var s=0,w=m.length,z,D,M,Q,T;for(z=0;z<w;z++){Q=m[z];if(Q!==void 0&&Q!==null&&B.isArray(Q)!==!0)s=B.measureText(h,r,p,s,Q);else if(B.isArray(Q))for(D=0,M=Q.length;D<M;D++)T=Q[D],T!==void 0&&T!==null&&!B.isArray(T)&&(s=B.measureText(h,r,p,s,T))}var Z=p.length/2;if(Z>m.length){for(z=0;z<Z;z++)delete r[p[z]];p.splice(0,Z)}return s},B.measureText=function(h,k,m,o,r){var p=k[r];return p||(p=k[r]=h.measureText(r).width,m.push(r)),p>o&&(o=p),o},B.numberOfLabelLines=function(h){var k=1;return B.each(h,function(m){B.isArray(m)&&(m.length>k&&(k=m.length))}),k},B.color=cb?function(h){return h instanceof CanvasGradient&&(h=S.global.defaultColor),cb(h)}:function(h){return console.error("Color.js not found!"),h},B.getHoverColor=function(h){return h instanceof CanvasPattern||h instanceof CanvasGradient?h:B.color(h).saturate(.5).darken(.1).rgbString()}};function Ad(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function ag(b){this.options=b||{}}B.extend(ag.prototype,{formats:Ad,parse:Ad,format:Ad,add:Ad,diff:Ad,startOf:Ad,endOf:Ad,_create:function(b){return b}}),ag.override=function(b){B.extend(ag.prototype,b)};var Vo=ag,Ch={_date:Vo},jf={formatters:{values:function(b){return B.isArray(b)?b:""+b},linear:function(b,e,g){var h=g.length>3?g[2]-g[1]:g[1]-g[0];Math.abs(h)>1&&(b!==Math.floor(b)&&(h=b-Math.floor(b)));var k=B.log10(Math.abs(h)),m="";if(b!==0){var o=Math.max(Math.abs(g[0]),Math.abs(g[g.length-1]));if(o<1e-4){var r=B.log10(Math.abs(b)),p=Math.floor(r)-Math.floor(k);p=Math.max(Math.min(p,20),0),m=b.toExponential(p)}else{var s=-1*Math.floor(k);s=Math.max(Math.min(s,20),0),m=b.toFixed(s)}}else m="0";return m},logarithmic:function(b,e,g){var h=b/Math.pow(10,Math.floor(B.log10(b)));return b===0?"0":h===1||h===2||h===5||e===0||e===g.length-1?b.toExponential():""}}},Bd=B.isArray,kf=B.isNullOrUndef,Cd=B.valueOrDefault,Dd=B.valueAtIndexOrDefault;S._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:jf.formatters.values,minor:{},major:{}}});function Wo(b,e){for(var g=[],h=b.length/e,k=0,m=b.length;k<m;k+=h)g.push(b[Math.floor(k)]);return g}function Xo(b,e,g){var h=b.getTicks().length,k=Math.min(e,h-1),m=b.getPixelForTick(k),o=b._startPixel,r=b._endPixel,p=1e-6,s;if(g){h===1?s=Math.max(m-o,r-m):e===0?s=(b.getPixelForTick(1)-m)/2:s=(m-b.getPixelForTick(k-1))/2,m+=k<e?s:-s;if(m<o-p||m>r+p)return}return m}function tc(b,e){B.each(b,function(g){var h=g.gc,k=h.length/2,m;if(k>e){for(m=0;m<k;++m)delete g.data[h[m]];h.splice(0,k)}})}function Ed(b,e,g,h){var k=g.length,m=[],o=[],r=[],p,s,w,z,D,M,Q,T,Z,ha,wa,Aa,Na;for(p=0;p<k;++p){z=g[p].label,D=g[p].major?e.major:e.minor,b.font=M=D.string,Q=h[M]=h[M]||{data:{},gc:[]},T=D.lineHeight,Z=ha=0;if(!kf(z)&&!Bd(z))Z=B.measureText(b,Q.data,Q.gc,Z,z),ha=T;else if(Bd(z))for(s=0,w=z.length;s<w;++s)wa=z[s],!kf(wa)&&!Bd(wa)&&(Z=B.measureText(b,Q.data,Q.gc,Z,wa),ha+=T);m.push(Z),o.push(ha),r.push(T/2)}tc(h,k),Aa=m.indexOf(Math.max.apply(null,m)),Na=o.indexOf(Math.max.apply(null,o));function Ha(Xa){return{width:m[Xa]||0,height:o[Xa]||0,offset:r[Xa]||0}}return{first:Ha(0),last:Ha(k-1),widest:Ha(Aa),highest:Ha(Na)}}function je(b){return b.drawTicks?b.tickMarkLength:0}function Dh(b){var e,g;return b.display?(e=B.options._parseFont(b),g=B.options.toPadding(b.padding),e.lineHeight+g.height):0}function Eh(b,e){return B.extend(B.options._parseFont({fontFamily:Cd(e.fontFamily,b.fontFamily),fontSize:Cd(e.fontSize,b.fontSize),fontStyle:Cd(e.fontStyle,b.fontStyle),lineHeight:Cd(e.lineHeight,b.lineHeight)}),{color:B.options.resolve([e.fontColor,b.fontColor,S.global.defaultFontColor])})}function bg(b){var e=Eh(b,b.minor),g=b.major.enabled?Eh(b,b.major):e;return{minor:e,major:g}}function Fh(b){var e=[],g,h,k;for(h=0,k=b.length;h<k;++h)g=b[h],typeof g._index!=="undefined"&&e.push(g);return e}function Yo(b){var e=b.length,g,h;if(e<2)return!1;for(h=b[0],g=1;g<e;++g)if(b[g]-b[g-1]!==h)return!1;return h}function kk(b,e,g,h){var k=Yo(b),m=(e.length-1)/h,o,r,p,s;if(!k)return Math.max(m,1);for(o=B.math._factorize(k),p=0,s=o.length-1;p<s;p++){r=o[p];if(r>m)return r}return Math.max(m,1)}function Zo(b){var e=[],g,h;for(g=0,h=b.length;g<h;g++)b[g].major&&e.push(g);return e}function _o(b,e,g){var h=0,k=e[0],m,o;for(g=Math.ceil(g),m=0;m<b.length;m++)o=b[m],m===k?(o._index=m,h++,k=e[h*g]):delete o.label}function cg(b,e,g,h){var k=Cd(g,0),m=Math.min(Cd(h,b.length),b.length),o=0,r,p,s,w;for(e=Math.ceil(e),h&&(r=h-g,e=r/Math.floor(r/e)),w=k;w<0;)o++,w=Math.round(k+o*e);for(p=Math.max(k,0);p<m;p++)s=b[p],p===w?(s._index=p,o++,w=Math.round(k+o*e)):delete s.label}var Gh=dc.extend({zeroLineIndex:0,getPadding:function(){var b=this;return{left:b.paddingLeft||0,top:b.paddingTop||0,right:b.paddingRight||0,bottom:b.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var b=this.chart.data;return this.options.labels||(this.isHorizontal()?b.xLabels:b.yLabels)||b.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){B.callback(this.options.beforeUpdate,[this])},update:function(b,e,g){var h=this,k=h.options.ticks,m=k.sampleSize,o,r,p,s,w;h.beforeUpdate(),h.maxWidth=b,h.maxHeight=e,h.margins=B.extend({left:0,right:0,top:0,bottom:0},g),h._ticks=null,h.ticks=null,h._labelSizes=null,h._maxLabelLines=0,h.longestLabelWidth=0,h.longestTextCache=h.longestTextCache||{},h._gridLineItems=null,h._labelItems=null,h.beforeSetDimensions(),h.setDimensions(),h.afterSetDimensions(),h.beforeDataLimits(),h.determineDataLimits(),h.afterDataLimits(),h.beforeBuildTicks(),s=h.buildTicks()||[],s=h.afterBuildTicks(s)||s;if((!s||!s.length)&&h.ticks)for(s=[],o=0,r=h.ticks.length;o<r;++o)s.push({value:h.ticks[o],major:!1});return h._ticks=s,w=m<s.length,p=h._convertTicksToLabels(w?Wo(s,m):s),h._configure(),h.beforeCalculateTickRotation(),h.calculateTickRotation(),h.afterCalculateTickRotation(),h.beforeFit(),h.fit(),h.afterFit(),h._ticksToDraw=k.display&&(k.autoSkip||k.source==="auto")?h._autoSkip(s):s,w&&(p=h._convertTicksToLabels(h._ticksToDraw)),h.ticks=p,h.afterUpdate(),h.minSize},_configure:function(){var b=this,e=b.options.ticks.reverse,g,h;b.isHorizontal()?(g=b.left,h=b.right):(g=b.top,h=b.bottom,e=!e),b._startPixel=g,b._endPixel=h,b._reversePixels=e,b._length=h-g},afterUpdate:function(){B.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){B.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var b=this;b.isHorizontal()?(b.width=b.maxWidth,b.left=0,b.right=b.width):(b.height=b.maxHeight,b.top=0,b.bottom=b.height),b.paddingLeft=0,b.paddingTop=0,b.paddingRight=0,b.paddingBottom=0},afterSetDimensions:function(){B.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){B.callback(this.options.beforeDataLimits,[this])},determineDataLimits:B.noop,afterDataLimits:function(){B.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){B.callback(this.options.beforeBuildTicks,[this])},buildTicks:B.noop,afterBuildTicks:function(b){var e=this;return Bd(b)&&b.length?B.callback(e.options.afterBuildTicks,[e,b]):(e.ticks=B.callback(e.options.afterBuildTicks,[e,e.ticks])||e.ticks,b)},beforeTickToLabelConversion:function(){B.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var b=this,e=b.options.ticks;b.ticks=b.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){B.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){B.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var b=this,e=b.options,g=e.ticks,h=b.getTicks().length,k=g.minRotation||0,m=g.maxRotation,o=k,r,p,s,w,z,D,M;if(!b._isVisible()||!g.display||k>=m||h<=1||!b.isHorizontal()){b.labelRotation=k;return}r=b._getLabelSizes(),p=r.widest.width,s=r.highest.height-r.highest.offset,w=Math.min(b.maxWidth,b.chart.width-p),z=e.offset?b.maxWidth/h:w/(h-1),p+6>z&&(z=w/(h-(e.offset?.5:1)),D=b.maxHeight-je(e.gridLines)-g.padding-Dh(e.scaleLabel),M=Math.sqrt(p*p+s*s),o=B.toDegrees(Math.min(Math.asin(Math.min((r.highest.height+6)/z,1)),Math.asin(Math.min(D/M,1))-Math.asin(s/M))),o=Math.max(k,Math.min(m,o))),b.labelRotation=o},afterCalculateTickRotation:function(){B.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){B.callback(this.options.beforeFit,[this])},fit:function(){var b=this,e=b.minSize={width:0,height:0},g=b.chart,h=b.options,k=h.ticks,m=h.scaleLabel,o=h.gridLines,r=b._isVisible(),p=h.position==="bottom",s=b.isHorizontal();s?e.width=b.maxWidth:r&&(e.width=je(o)+Dh(m)),s?r&&(e.height=je(o)+Dh(m)):e.height=b.maxHeight;if(k.display&&r){var w=bg(k),z=b._getLabelSizes(),D=z.first,M=z.last,Q=z.widest,T=z.highest,Z=w.minor.lineHeight*.4,ha=k.padding;if(s){var wa=b.labelRotation!==0,Aa=B.toRadians(b.labelRotation),Na=Math.cos(Aa),Ha=Math.sin(Aa),Xa=Ha*Q.width+Na*(T.height-(wa?T.offset:0))+(wa?0:Z);e.height=Math.min(b.maxHeight,e.height+Xa+ha);var ib=b.getPixelForTick(0)-b.left,ab=b.right-b.getPixelForTick(b.getTicks().length-1),db,Kb;wa?(db=p?Na*D.width+Ha*D.offset:Ha*(D.height-D.offset),Kb=p?Ha*(M.height-M.offset):Na*M.width+Ha*M.offset):(db=D.width/2,Kb=M.width/2),b.paddingLeft=Math.max((db-ib)*b.width/(b.width-ib),0)+3,b.paddingRight=Math.max((Kb-ab)*b.width/(b.width-ab),0)+3}else{var Fb=k.mirror?0:Q.width+ha+Z;e.width=Math.min(b.maxWidth,e.width+Fb),b.paddingTop=D.height/2,b.paddingBottom=M.height/2}}b.handleMargins(),s?(b.width=b._length=g.width-b.margins.left-b.margins.right,b.height=e.height):(b.width=e.width,b.height=b._length=g.height-b.margins.top-b.margins.bottom)},handleMargins:function(){var b=this;b.margins&&(b.margins.left=Math.max(b.paddingLeft,b.margins.left),b.margins.top=Math.max(b.paddingTop,b.margins.top),b.margins.right=Math.max(b.paddingRight,b.margins.right),b.margins.bottom=Math.max(b.paddingBottom,b.margins.bottom))},afterFit:function(){B.callback(this.options.afterFit,[this])},isHorizontal:function(){var b=this.options.position;return b==="top"||b==="bottom"},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(b){if(kf(b))return NaN;if((typeof b==="number"||b instanceof Number)&&!isFinite(b))return NaN;if(b){if(this.isHorizontal()){if(b.x!==void 0)return this.getRightValue(b.x)}else if(b.y!==void 0)return this.getRightValue(b.y)}return b},_convertTicksToLabels:function(b){var e=this,g,h,k;for(e.ticks=b.map(function(m){return m.value}),e.beforeTickToLabelConversion(),g=e.convertTicksToLabels(b)||e.ticks,e.afterTickToLabelConversion(),h=0,k=b.length;h<k;++h)b[h].label=g[h];return g},_getLabelSizes:function(){var b=this,e=b._labelSizes;return e||(b._labelSizes=e=Ed(b.ctx,bg(b.options.ticks),b.getTicks(),b.longestTextCache),b.longestLabelWidth=e.widest.width),e},_parseValue:function(b){var e,g,h,k;return Bd(b)?(e=+this.getRightValue(b[0]),g=+this.getRightValue(b[1]),h=Math.min(e,g),k=Math.max(e,g)):(b=+this.getRightValue(b),e=void 0,g=b,h=b,k=b),{min:h,max:k,start:e,end:g}},_getScaleLabel:function(b){var e=this._parseValue(b);return e.start!==void 0?"["+e.start+", "+e.end+"]":+this.getRightValue(b)},getLabelForIndex:B.noop,getPixelForValue:B.noop,getValueForPixel:B.noop,getPixelForTick:function(b){var e=this,g=e.options.offset,h=e._ticks.length,k=1/Math.max(h-(g?0:1),1);return b<0||b>h-1?null:e.getPixelForDecimal(b*k+(g?k/2:0))},getPixelForDecimal:function(b){var e=this;return e._reversePixels&&(b=1-b),e._startPixel+b*e._length},getDecimalForPixel:function(b){var e=(b-this._startPixel)/this._length;return this._reversePixels?1-e:e},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var b=this,e=b.min,g=b.max;return b.beginAtZero?0:e<0&&g<0?g:e>0&&g>0?e:0},_autoSkip:function(b){var e=this,g=e.options.ticks,h=e._length,k=g.maxTicksLimit||h/e._tickSize()+1,m=g.major.enabled?Zo(b):[],o=m.length,r=m[0],p=m[o-1],s,w,z,D;if(o>k)return _o(b,m,o/k),Fh(b);z=kk(m,b,h,k);if(o>0){for(s=0,w=o-1;s<w;s++)cg(b,z,m[s],m[s+1]);return D=o>1?(p-r)/(o-1):null,cg(b,z,B.isNullOrUndef(D)?0:r-D,r),cg(b,z,p,B.isNullOrUndef(D)?b.length:p+D),Fh(b)}return cg(b,z),Fh(b)},_tickSize:function(){var b=this,e=b.options.ticks,g=B.toRadians(b.labelRotation),h=Math.abs(Math.cos(g)),k=Math.abs(Math.sin(g)),m=b._getLabelSizes(),o=e.autoSkipPadding||0,r=m?m.widest.width+o:0,p=m?m.highest.height+o:0;return b.isHorizontal()?p*h>r*k?r/h:p/k:p*k<r*h?p/h:r/k},_isVisible:function(){var b=this,e=b.chart,g=b.options.display,h,k,m;if(g!=="auto")return!!g;for(h=0,k=e.data.datasets.length;h<k;++h)if(e.isDatasetVisible(h)){m=e.getDatasetMeta(h);if(m.xAxisID===b.id||m.yAxisID===b.id)return!0}return!1},_computeGridLineItems:function(b){var e=this,g=e.chart,h=e.options,k=h.gridLines,m=h.position,o=k.offsetGridLines,r=e.isHorizontal(),p=e._ticksToDraw,s=p.length+(o?1:0),w=je(k),z=[],D=k.drawBorder?Dd(k.lineWidth,0,0):0,M=D/2,Q=B._alignPixel,T=function(jg){return Q(g,jg,D)},Z,ha,wa,Aa,Na,Ha,Xa,ib,ab,db,Kb,Fb,Bb,Nb,me,hd,id;for(m==="top"?(Z=T(e.bottom),Xa=e.bottom-w,ab=Z-M,Kb=T(b.top)+M,Bb=b.bottom):m==="bottom"?(Z=T(e.top),Kb=b.top,Bb=T(b.bottom)-M,Xa=Z+M,ab=e.top+w):m==="left"?(Z=T(e.right),Ha=e.right-w,ib=Z-M,db=T(b.left)+M,Fb=b.right):(Z=T(e.left),db=b.left,Fb=T(b.right)-M,Ha=Z+M,ib=e.left+w),ha=0;ha<s;++ha){wa=p[ha]||{};if(kf(wa.label)&&ha<p.length)continue;ha===e.zeroLineIndex&&h.offset===o?(Nb=k.zeroLineWidth,me=k.zeroLineColor,hd=k.zeroLineBorderDash||[],id=k.zeroLineBorderDashOffset||0):(Nb=Dd(k.lineWidth,ha,1),me=Dd(k.color,ha,"rgba(0,0,0,0.1)"),hd=k.borderDash||[],id=k.borderDashOffset||0),Aa=Xo(e,wa._index||ha,o);if(Aa===void 0)continue;Na=Q(g,Aa,Nb),r?Ha=ib=db=Fb=Na:Xa=ab=Kb=Bb=Na,z.push({tx1:Ha,ty1:Xa,tx2:ib,ty2:ab,x1:db,y1:Kb,x2:Fb,y2:Bb,width:Nb,color:me,borderDash:hd,borderDashOffset:id})}return z.ticksLength=s,z.borderValue=Z,z},_computeLabelItems:function(){var b=this,e=b.options,g=e.ticks,h=e.position,k=g.mirror,m=b.isHorizontal(),o=b._ticksToDraw,r=bg(g),p=g.padding,s=je(e.gridLines),w=-B.toRadians(b.labelRotation),z=[],D,M,Q,T,Z,ha,wa,Aa,Na,Ha,Xa,ib;for(h==="top"?(ha=b.bottom-s-p,wa=w?"left":"center"):h==="bottom"?(ha=b.top+s+p,wa=w?"right":"center"):h==="left"?(Z=b.right-(k?0:s)-p,wa=k?"left":"right"):(Z=b.left+(k?0:s)+p,wa=k?"right":"left"),D=0,M=o.length;D<M;++D){Q=o[D],T=Q.label;if(kf(T))continue;Aa=b.getPixelForTick(Q._index||D)+g.labelOffset,Na=Q.major?r.major:r.minor,Ha=Na.lineHeight,Xa=Bd(T)?T.length:1,m?(Z=Aa,ib=h==="top"?((w?1:.5)-Xa)*Ha:(w?0:.5)*Ha):(ha=Aa,ib=(1-Xa)*Ha/2),z.push({x:Z,y:ha,rotation:w,label:T,font:Na,textOffset:ib,textAlign:wa})}return z},_drawGrid:function(b){var e=this,g=e.options.gridLines;if(!g.display)return;var h=e.ctx,k=e.chart,m=B._alignPixel,o=g.drawBorder?Dd(g.lineWidth,0,0):0,r=e._gridLineItems||(e._gridLineItems=e._computeGridLineItems(b)),p,s,w,z,D;for(w=0,z=r.length;w<z;++w)D=r[w],p=D.width,s=D.color,p&&s&&(h.save(),h.lineWidth=p,h.strokeStyle=s,h.setLineDash&&(h.setLineDash(D.borderDash),h.lineDashOffset=D.borderDashOffset),h.beginPath(),g.drawTicks&&(h.moveTo(D.tx1,D.ty1),h.lineTo(D.tx2,D.ty2)),g.drawOnChartArea&&(h.moveTo(D.x1,D.y1),h.lineTo(D.x2,D.y2)),h.stroke(),h.restore());if(o){var M=o,Q=Dd(g.lineWidth,r.ticksLength-1,1),T=r.borderValue,Z,ha,wa,Aa;e.isHorizontal()?(Z=m(k,e.left,M)-M/2,ha=m(k,e.right,Q)+Q/2,wa=Aa=T):(wa=m(k,e.top,M)-M/2,Aa=m(k,e.bottom,Q)+Q/2,Z=ha=T),h.lineWidth=o,h.strokeStyle=Dd(g.color,0),h.beginPath(),h.moveTo(Z,wa),h.lineTo(ha,Aa),h.stroke()}},_drawLabels:function(){var b=this,e=b.options.ticks;if(!e.display)return;var g=b.ctx,h=b._labelItems||(b._labelItems=b._computeLabelItems()),k,m,o,r,p,s,w,z;for(k=0,o=h.length;k<o;++k){p=h[k],s=p.font,g.save(),g.translate(p.x,p.y),g.rotate(p.rotation),g.font=s.string,g.fillStyle=s.color,g.textBaseline="middle",g.textAlign=p.textAlign,w=p.label,z=p.textOffset;if(Bd(w))for(m=0,r=w.length;m<r;++m)g.fillText(""+w[m],0,z),z+=s.lineHeight;else g.fillText(w,0,z);g.restore()}},_drawTitle:function(){var b=this,e=b.ctx,g=b.options,h=g.scaleLabel;if(!h.display)return;var k=Cd(h.fontColor,S.global.defaultFontColor),m=B.options._parseFont(h),o=B.options.toPadding(h.padding),r=m.lineHeight/2,p=g.position,s=0,w,z;if(b.isHorizontal())w=b.left+b.width/2,z=p==="bottom"?b.bottom-r-o.bottom:b.top+r+o.top;else{var D=p==="left";w=D?b.left+r+o.top:b.right-r-o.top,z=b.top+b.height/2,s=D?-.5*Math.PI:.5*Math.PI}e.save(),e.translate(w,z),e.rotate(s),e.textAlign="center",e.textBaseline="middle",e.fillStyle=k,e.font=m.string,e.fillText(h.labelString,0,0),e.restore()},draw:function(b){var e=this;if(!e._isVisible())return;e._drawGrid(b),e._drawTitle(),e._drawLabels()},_layers:function(){var b=this,e=b.options,g=e.ticks&&e.ticks.z||0,h=e.gridLines&&e.gridLines.z||0;return!b._isVisible()||g===h||b.draw!==b._draw?[{z:g,draw:function(){b.draw.apply(b,arguments)}}]:[{z:h,draw:function(){b._drawGrid.apply(b,arguments),b._drawTitle.apply(b,arguments)}},{z:g,draw:function(){b._drawLabels.apply(b,arguments)}}]},_getMatchingVisibleMetas:function(b){var e=this,g=e.isHorizontal();return e.chart._getSortedVisibleDatasetMetas().filter(function(h){return(!b||h.type===b)&&(g?h.xAxisID===e.id:h.yAxisID===e.id)})}});Gh.prototype._draw=Gh.prototype.draw;var Xb=Gh,Hh=B.isNullOrUndef,$o={position:"bottom"},lk=Xb.extend({determineDataLimits:function(){var b=this,e=b._getLabels(),g=b.options.ticks,h=g.min,k=g.max,m=0,o=e.length-1,r;h!==void 0&&(r=e.indexOf(h),r>=0&&(m=r)),k!==void 0&&(r=e.indexOf(k),r>=0&&(o=r)),b.minIndex=m,b.maxIndex=o,b.min=e[m],b.max=e[o]},buildTicks:function(){var b=this,e=b._getLabels(),g=b.minIndex,h=b.maxIndex;b.ticks=g===0&&h===e.length-1?e:e.slice(g,h+1)},getLabelForIndex:function(b,e){var g=this,h=g.chart;return h.getDatasetMeta(e).controller._getValueScaleId()===g.id?g.getRightValue(h.data.datasets[e].data[b]):g._getLabels()[b]},_configure:function(){var b=this,e=b.options.offset,g=b.ticks;Xb.prototype._configure.call(b),b.isHorizontal()||(b._reversePixels=!b._reversePixels);if(!g)return;b._startValue=b.minIndex-(e?.5:0),b._valueRange=Math.max(g.length-(e?0:1),1)},getPixelForValue:function(b,e,g){var h=this,k,m,o;return!Hh(e)&&!Hh(g)&&(b=h.chart.data.datasets[g].data[e]),Hh(b)||(k=h.isHorizontal()?b.x:b.y),(k!==void 0||b!==void 0&&isNaN(e))&&(m=h._getLabels(),b=B.valueOrDefault(k,b),o=m.indexOf(b),e=o!==-1?o:e,isNaN(e)&&(e=b)),h.getPixelForDecimal((e-h._startValue)/h._valueRange)},getPixelForTick:function(b){var e=this.ticks;return b<0||b>e.length-1?null:this.getPixelForValue(e[b],b+this.minIndex)},getValueForPixel:function(b){var e=this,g=Math.round(e._startValue+e.getDecimalForPixel(b)*e._valueRange);return Math.min(Math.max(g,0),e.ticks.length-1)},getBasePixel:function(){return this.bottom}}),ap=$o;lk._defaults=ap;var bp=B.noop,Fd=B.isNullOrUndef;function cp(b,e){var g=[],h=1e-14,k=b.stepSize,m=k||1,o=b.maxTicks-1,r=b.min,p=b.max,s=b.precision,w=e.min,z=e.max,D=B.niceNum((z-w)/o/m)*m,M,Q,T,Z;if(D<h&&Fd(r)&&Fd(p))return[w,z];Z=Math.ceil(z/D)-Math.floor(w/D),Z>o&&(D=B.niceNum(Z*D/o/m)*m),k||Fd(s)?M=Math.pow(10,B._decimalPlaces(D)):(M=Math.pow(10,s),D=Math.ceil(D*M)/M),Q=Math.floor(w/D)*D,T=Math.ceil(z/D)*D,k&&(!Fd(r)&&B.almostWhole(r/D,D/1e3)&&(Q=r),!Fd(p)&&B.almostWhole(p/D,D/1e3)&&(T=p)),Z=(T-Q)/D,B.almostEquals(Z,Math.round(Z),D/1e3)?Z=Math.round(Z):Z=Math.ceil(Z),Q=Math.round(Q*M)/M,T=Math.round(T*M)/M,g.push(Fd(r)?Q:r);for(var ha=1;ha<Z;++ha)g.push(Math.round((Q+ha*D)*M)/M);return g.push(Fd(p)?T:p),g}var dg=Xb.extend({getRightValue:function(b){return typeof b==="string"?+b:Xb.prototype.getRightValue.call(this,b)},handleTickRangeOptions:function(){var b=this,e=b.options,g=e.ticks;if(g.beginAtZero){var h=B.sign(b.min),k=B.sign(b.max);h<0&&k<0?b.max=0:h>0&&k>0&&(b.min=0)}var m=g.min!==void 0||g.suggestedMin!==void 0,o=g.max!==void 0||g.suggestedMax!==void 0;g.min!==void 0?b.min=g.min:g.suggestedMin!==void 0&&(b.min===null?b.min=g.suggestedMin:b.min=Math.min(b.min,g.suggestedMin)),g.max!==void 0?b.max=g.max:g.suggestedMax!==void 0&&(b.max===null?b.max=g.suggestedMax:b.max=Math.max(b.max,g.suggestedMax)),m!==o&&(b.min>=b.max&&(m?b.max=b.min+1:b.min=b.max-1)),b.min===b.max&&(b.max++,g.beginAtZero||b.min--)},getTickLimit:function(){var b=this,e=b.options.ticks,g=e.stepSize,h=e.maxTicksLimit,k;return g?k=Math.ceil(b.max/g)-Math.floor(b.min/g)+1:(k=b._computeTickLimit(),h=h||11),h&&(k=Math.min(h,k)),k},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:bp,buildTicks:function(){var b=this,e=b.options,g=e.ticks,h=b.getTickLimit();h=Math.max(2,h);var k={maxTicks:h,min:g.min,max:g.max,precision:g.precision,stepSize:B.valueOrDefault(g.fixedStepSize,g.stepSize)},m=b.ticks=cp(k,b);b.handleDirectionalChanges(),b.max=B.max(m),b.min=B.min(m),g.reverse?(m.reverse(),b.start=b.max,b.end=b.min):(b.start=b.min,b.end=b.max)},convertTicksToLabels:function(){var b=this;b.ticksAsNumbers=b.ticks.slice(),b.zeroLineIndex=b.ticks.indexOf(0),Xb.prototype.convertTicksToLabels.call(b)},_configure:function(){var b=this,e=b.getTicks(),g=b.min,h=b.max,k;Xb.prototype._configure.call(b),b.options.offset&&e.length&&(k=(h-g)/Math.max(e.length-1,1)/2,g-=k,h+=k),b._startValue=g,b._endValue=h,b._valueRange=h-g}}),dp={position:"left",ticks:{callback:jf.formatters.linear}},eg=0,ep=1;function fp(b,e,g){var h=[g.type,e===void 0&&g.stack===void 0?g.index:"",g.stack].join(".");return b[h]===void 0&&(b[h]={pos:[],neg:[]}),b[h]}function gp(b,e,g,h){var k=b.options,m=k.stacked,o=fp(e,m,g),r=o.pos,p=o.neg,s=h.length,w,z;for(w=0;w<s;++w){z=b._parseValue(h[w]);if(isNaN(z.min)||isNaN(z.max)||g.data[w].hidden)continue;r[w]=r[w]||0,p[w]=p[w]||0,k.relativePoints?r[w]=100:z.min<0||z.max<0?p[w]+=z.min:r[w]+=z.max}}function hp(b,e,g){var h=g.length,k,m;for(k=0;k<h;++k){m=b._parseValue(g[k]);if(isNaN(m.min)||isNaN(m.max)||e.data[k].hidden)continue;b.min=Math.min(b.min,m.min),b.max=Math.max(b.max,m.max)}}var mk=dg.extend({determineDataLimits:function(){var b=this,e=b.options,g=b.chart,h=g.data.datasets,k=b._getMatchingVisibleMetas(),m=e.stacked,o={},r=k.length,p,s,w,z;b.min=Number.POSITIVE_INFINITY,b.max=Number.NEGATIVE_INFINITY;if(m===void 0)for(p=0;!m&&p<r;++p)s=k[p],m=s.stack!==void 0;for(p=0;p<r;++p)s=k[p],w=h[s.index].data,m?gp(b,o,s,w):hp(b,s,w);B.each(o,function(D){z=D.pos.concat(D.neg),b.min=Math.min(b.min,B.min(z)),b.max=Math.max(b.max,B.max(z))}),b.min=B.isFinite(b.min)&&!isNaN(b.min)?b.min:eg,b.max=B.isFinite(b.max)&&!isNaN(b.max)?b.max:ep,b.handleTickRangeOptions()},_computeTickLimit:function(){var b=this,e;return b.isHorizontal()?Math.ceil(b.width/40):(e=B.options._parseFont(b.options.ticks),Math.ceil(b.height/e.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(b,e){return this._getScaleLabel(this.chart.data.datasets[e].data[b])},getPixelForValue:function(b){var e=this;return e.getPixelForDecimal((+e.getRightValue(b)-e._startValue)/e._valueRange)},getValueForPixel:function(b){return this._startValue+this.getDecimalForPixel(b)*this._valueRange},getPixelForTick:function(b){var e=this.ticksAsNumbers;return b<0||b>e.length-1?null:this.getPixelForValue(e[b])}}),ip=dp;mk._defaults=ip;var Ih=B.valueOrDefault,Yb=B.math.log10;function nk(b,e){var g=[],h=Ih(b.min,Math.pow(10,Math.floor(Yb(e.min)))),k=Math.floor(Yb(e.max)),m=Math.ceil(e.max/Math.pow(10,k)),o,r;h===0?(o=Math.floor(Yb(e.minNotZero)),r=Math.floor(e.minNotZero/Math.pow(10,o)),g.push(h),h=r*Math.pow(10,o)):(o=Math.floor(Yb(h)),r=Math.floor(h/Math.pow(10,o)));var p=o<0?Math.pow(10,Math.abs(o)):1;do g.push(h),++r,r===10&&(r=1,++o,p=o>=0?1:p),h=Math.round(r*Math.pow(10,o)*p)/p;while(o<k||o===k&&r<m);var s=Ih(b.max,h);return g.push(s),g}var ok={position:"left",ticks:{callback:jf.formatters.logarithmic}};function lf(b,e){return B.isFinite(b)&&b>=0?b:e}var mf=Xb.extend({determineDataLimits:function(){var b=this,e=b.options,g=b.chart,h=g.data.datasets,k=b.isHorizontal();function m(Z){return k?Z.xAxisID===b.id:Z.yAxisID===b.id}var o,r,p,s,w,z;b.min=Number.POSITIVE_INFINITY,b.max=Number.NEGATIVE_INFINITY,b.minNotZero=Number.POSITIVE_INFINITY;var D=e.stacked;if(D===void 0)for(o=0;o<h.length;o++){r=g.getDatasetMeta(o);if(g.isDatasetVisible(o)&&m(r)&&r.stack!==void 0){D=!0;break}}if(e.stacked||D){var M={};for(o=0;o<h.length;o++){r=g.getDatasetMeta(o);var Q=[r.type,e.stacked===void 0&&r.stack===void 0?o:"",r.stack].join(".");if(g.isDatasetVisible(o)&&m(r))for(M[Q]===void 0&&(M[Q]=[]),s=h[o].data,w=0,z=s.length;w<z;w++){var T=M[Q];p=b._parseValue(s[w]);if(isNaN(p.min)||isNaN(p.max)||r.data[w].hidden||p.min<0||p.max<0)continue;T[w]=T[w]||0,T[w]+=p.max}}B.each(M,function(Z){if(Z.length>0){var ha=B.min(Z),wa=B.max(Z);b.min=Math.min(b.min,ha),b.max=Math.max(b.max,wa)}})}else for(o=0;o<h.length;o++){r=g.getDatasetMeta(o);if(g.isDatasetVisible(o)&&m(r))for(s=h[o].data,w=0,z=s.length;w<z;w++){p=b._parseValue(s[w]);if(isNaN(p.min)||isNaN(p.max)||r.data[w].hidden||p.min<0||p.max<0)continue;b.min=Math.min(p.min,b.min),b.max=Math.max(p.max,b.max),p.min!==0&&(b.minNotZero=Math.min(p.min,b.minNotZero))}}b.min=B.isFinite(b.min)?b.min:null,b.max=B.isFinite(b.max)?b.max:null,b.minNotZero=B.isFinite(b.minNotZero)?b.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var b=this,e=b.options.ticks,g=1,h=10;b.min=lf(e.min,b.min),b.max=lf(e.max,b.max),b.min===b.max&&(b.min!==0&&b.min!==null?(b.min=Math.pow(10,Math.floor(Yb(b.min))-1),b.max=Math.pow(10,Math.floor(Yb(b.max))+1)):(b.min=g,b.max=h)),b.min===null&&(b.min=Math.pow(10,Math.floor(Yb(b.max))-1)),b.max===null&&(b.max=b.min!==0?Math.pow(10,Math.floor(Yb(b.min))+1):h),b.minNotZero===null&&(b.min>0?b.minNotZero=b.min:b.max<1?b.minNotZero=Math.pow(10,Math.floor(Yb(b.max))):b.minNotZero=g)},buildTicks:function(){var b=this,e=b.options.ticks,g=!b.isHorizontal(),h={min:lf(e.min),max:lf(e.max)},k=b.ticks=nk(h,b);b.max=B.max(k),b.min=B.min(k),e.reverse?(g=!g,b.start=b.max,b.end=b.min):(b.start=b.min,b.end=b.max),g&&k.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),Xb.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(b,e){return this._getScaleLabel(this.chart.data.datasets[e].data[b])},getPixelForTick:function(b){var e=this.tickValues;return b<0||b>e.length-1?null:this.getPixelForValue(e[b])},_getFirstTickValue:function(b){var e=Math.floor(Yb(b)),g=Math.floor(b/Math.pow(10,e));return g*Math.pow(10,e)},_configure:function(){var b=this,e=b.min,g=0;Xb.prototype._configure.call(b),e===0&&(e=b._getFirstTickValue(b.minNotZero),g=Ih(b.options.ticks.fontSize,S.global.defaultFontSize)/b._length),b._startValue=Yb(e),b._valueOffset=g,b._valueRange=(Yb(b.max)-Yb(e))/(1-g)},getPixelForValue:function(b){var e=this,g=0;return b=+e.getRightValue(b),b>e.min&&b>0&&(g=(Yb(b)-e._startValue)/e._valueRange+e._valueOffset),e.getPixelForDecimal(g)},getValueForPixel:function(b){var e=this,g=e.getDecimalForPixel(b);return g===0&&e.min===0?0:Math.pow(10,e._startValue+(g-e._valueOffset)*e._valueRange)}}),ke=ok;mf._defaults=ke;var Gd=B.valueOrDefault,fg=B.valueAtIndexOrDefault,Hd=B.options.resolve,pk={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:jf.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(b){return b}}};function gg(b){var e=b.ticks;return e.display&&b.display?Gd(e.fontSize,S.global.defaultFontSize)+e.backdropPaddingY*2:0}function jp(b,e,g){return B.isArray(g)?{w:B.longestText(b,b.font,g),h:g.length*e}:{w:b.measureText(g).width,h:e}}function qk(b,e,g,h,k){return b===h||b===k?{start:e-g/2,end:e+g/2}:b<h||b>k?{start:e-g,end:e}:{start:e,end:e+g}}function kp(b){var e=B.options._parseFont(b.options.pointLabels),g={l:0,r:b.width,t:0,b:b.height-b.paddingTop},h={},k,m,o;b.ctx.font=e.string,b._pointLabelSizes=[];var r=b.chart.data.labels.length;for(k=0;k<r;k++){o=b.getPointPosition(k,b.drawingArea+5),m=jp(b.ctx,e.lineHeight,b.pointLabels[k]),b._pointLabelSizes[k]=m;var p=b.getIndexAngle(k),s=B.toDegrees(p)%360,w=qk(s,o.x,m.w,0,180),z=qk(s,o.y,m.h,90,270);w.start<g.l&&(g.l=w.start,h.l=p),w.end>g.r&&(g.r=w.end,h.r=p),z.start<g.t&&(g.t=z.start,h.t=p),z.end>g.b&&(g.b=z.end,h.b=p)}b.setReductions(b.drawingArea,g,h)}function lp(b){return b===0||b===180?"center":b<180?"left":"right"}function mp(b,e,g,h){var k=g.y+h/2,m,o;if(B.isArray(e))for(m=0,o=e.length;m<o;++m)b.fillText(e[m],g.x,k),k+=h;else b.fillText(e,g.x,k)}function np(b,e,g){b===90||b===270?g.y-=e.h/2:(b>270||b<90)&&(g.y-=e.h)}function op(b){var e=b.ctx,g=b.options,h=g.pointLabels,k=gg(g),m=b.getDistanceFromCenterForValue(g.ticks.reverse?b.min:b.max),o=B.options._parseFont(h);e.save(),e.font=o.string,e.textBaseline="middle";for(var r=b.chart.data.labels.length-1;r>=0;r--){var p=r===0?k/2:0,s=b.getPointPosition(r,m+p+5),w=fg(h.fontColor,r,S.global.defaultFontColor);e.fillStyle=w;var z=b.getIndexAngle(r),D=B.toDegrees(z);e.textAlign=lp(D),np(D,b._pointLabelSizes[r],s),mp(e,b.pointLabels[r],s,o.lineHeight)}e.restore()}function pp(b,e,g,h){var k=b.ctx,m=e.circular,o=b.chart.data.labels.length,r=fg(e.color,h-1),p=fg(e.lineWidth,h-1),s;if(!m&&!o||!r||!p)return;k.save(),k.strokeStyle=r,k.lineWidth=p,k.setLineDash&&(k.setLineDash(e.borderDash||[]),k.lineDashOffset=e.borderDashOffset||0),k.beginPath();if(m)k.arc(b.xCenter,b.yCenter,g,0,Math.PI*2);else{s=b.getPointPosition(0,g),k.moveTo(s.x,s.y);for(var w=1;w<o;w++)s=b.getPointPosition(w,g),k.lineTo(s.x,s.y)}k.closePath(),k.stroke(),k.restore()}function hg(b){return B.isNumber(b)?b:0}var rk=dg.extend({setDimensions:function(){var b=this;b.width=b.maxWidth,b.height=b.maxHeight,b.paddingTop=gg(b.options)/2,b.xCenter=Math.floor(b.width/2),b.yCenter=Math.floor((b.height-b.paddingTop)/2),b.drawingArea=Math.min(b.height-b.paddingTop,b.width)/2},determineDataLimits:function(){var b=this,e=b.chart,g=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;B.each(e.data.datasets,function(k,m){if(e.isDatasetVisible(m)){var o=e.getDatasetMeta(m);B.each(k.data,function(r,p){var s=+b.getRightValue(r);if(isNaN(s)||o.data[p].hidden)return;g=Math.min(s,g),h=Math.max(s,h)})}}),b.min=g===Number.POSITIVE_INFINITY?0:g,b.max=h===Number.NEGATIVE_INFINITY?0:h,b.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/gg(this.options))},convertTicksToLabels:function(){var b=this;dg.prototype.convertTicksToLabels.call(b),b.pointLabels=b.chart.data.labels.map(function(){var e=B.callback(b.options.pointLabels.callback,arguments,b);return e||e===0?e:""})},getLabelForIndex:function(b,e){return+this.getRightValue(this.chart.data.datasets[e].data[b])},fit:function(){var b=this,e=b.options;e.display&&e.pointLabels.display?kp(b):b.setCenterPoint(0,0,0,0)},setReductions:function(b,e,g){var h=this,k=e.l/Math.sin(g.l),m=Math.max(e.r-h.width,0)/Math.sin(g.r),o=-e.t/Math.cos(g.t),r=-Math.max(e.b-(h.height-h.paddingTop),0)/Math.cos(g.b);k=hg(k),m=hg(m),o=hg(o),r=hg(r),h.drawingArea=Math.min(Math.floor(b-(k+m)/2),Math.floor(b-(o+r)/2)),h.setCenterPoint(k,m,o,r)},setCenterPoint:function(b,e,g,h){var k=this,m=k.width-e-k.drawingArea,o=b+k.drawingArea,r=g+k.drawingArea,p=k.height-k.paddingTop-h-k.drawingArea;k.xCenter=Math.floor((o+m)/2+k.left),k.yCenter=Math.floor((r+p)/2+k.top+k.paddingTop)},getIndexAngle:function(b){var e=this.chart,g=360/e.data.labels.length,h=e.options||{},k=h.startAngle||0,m=(b*g+k)%360;return(m<0?m+360:m)*Math.PI*2/360},getDistanceFromCenterForValue:function(b){var e=this;if(B.isNullOrUndef(b))return NaN;var g=e.drawingArea/(e.max-e.min);return e.options.ticks.reverse?(e.max-b)*g:(b-e.min)*g},getPointPosition:function(b,e){var g=this,h=g.getIndexAngle(b)-Math.PI/2;return{x:Math.cos(h)*e+g.xCenter,y:Math.sin(h)*e+g.yCenter}},getPointPositionForValue:function(b,e){return this.getPointPosition(b,this.getDistanceFromCenterForValue(e))},getBasePosition:function(b){var e=this,g=e.min,h=e.max;return e.getPointPositionForValue(b||0,e.beginAtZero?0:g<0&&h<0?h:g>0&&h>0?g:0)},_drawGrid:function(){var b=this,e=b.ctx,g=b.options,h=g.gridLines,k=g.angleLines,m=Gd(k.lineWidth,h.lineWidth),o=Gd(k.color,h.color),r,p,s;g.pointLabels.display&&op(b),h.display&&B.each(b.ticks,function(w,z){z!==0&&(p=b.getDistanceFromCenterForValue(b.ticksAsNumbers[z]),pp(b,h,p,z))});if(k.display&&m&&o){for(e.save(),e.lineWidth=m,e.strokeStyle=o,e.setLineDash&&(e.setLineDash(Hd([k.borderDash,h.borderDash,[]])),e.lineDashOffset=Hd([k.borderDashOffset,h.borderDashOffset,0])),r=b.chart.data.labels.length-1;r>=0;r--)p=b.getDistanceFromCenterForValue(g.ticks.reverse?b.min:b.max),s=b.getPointPosition(r,p),e.beginPath(),e.moveTo(b.xCenter,b.yCenter),e.lineTo(s.x,s.y),e.stroke();e.restore()}},_drawLabels:function(){var b=this,e=b.ctx,g=b.options,h=g.ticks;if(!h.display)return;var k=b.getIndexAngle(0),m=B.options._parseFont(h),o=Gd(h.fontColor,S.global.defaultFontColor),r,p;e.save(),e.font=m.string,e.translate(b.xCenter,b.yCenter),e.rotate(k),e.textAlign="center",e.textBaseline="middle",B.each(b.ticks,function(s,w){if(w===0&&!h.reverse)return;r=b.getDistanceFromCenterForValue(b.ticksAsNumbers[w]),h.showLabelBackdrop&&(p=e.measureText(s).width,e.fillStyle=h.backdropColor,e.fillRect(-p/2-h.backdropPaddingX,-r-m.size/2-h.backdropPaddingY,p+h.backdropPaddingX*2,m.size+h.backdropPaddingY*2)),e.fillStyle=o,e.fillText(s,0,-r)}),e.restore()},_drawTitle:B.noop}),qp=pk;rk._defaults=qp;var Jh=B._deprecated,sk=B.options.resolve,rp=B.valueOrDefault,tk=Number.MIN_SAFE_INTEGER||-9007199254740991,Kh=Number.MAX_SAFE_INTEGER||9007199254740991,ig={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Zb=Object.keys(ig);function uk(b,e){return b-e}function sp(b){var e={},g=[],h,k,m;for(h=0,k=b.length;h<k;++h)m=b[h],e[m]||(e[m]=!0,g.push(m));return g}function vk(b){return B.valueOrDefault(b.time.min,b.ticks.min)}function wk(b){return B.valueOrDefault(b.time.max,b.ticks.max)}function Lh(b,e,g,h){if(h==="linear"||!b.length)return[{time:e,pos:0},{time:g,pos:1}];var k=[],m=[e],o,r,p,s,w;for(o=0,r=b.length;o<r;++o)s=b[o],s>e&&s<g&&m.push(s);for(m.push(g),o=0,r=m.length;o<r;++o)w=m[o+1],p=m[o-1],s=m[o],(p===void 0||w===void 0||Math.round((w+p)/2)!==s)&&k.push({time:s,pos:o/(r-1)});return k}function tp(b,e,g){for(var h=0,k=b.length-1,m,o,r;h>=0&&h<=k;){m=h+k>>1,o=b[m-1]||null,r=b[m];if(o)if(r[e]<g)h=m+1;else if(o[e]>g)k=m-1;else return{lo:o,hi:r};else return{lo:null,hi:r}}return{lo:r,hi:null}}function le(b,e,g,h){var k=tp(b,e,g),m=k.lo?k.hi?k.lo:b[b.length-2]:b[0],o=k.lo?k.hi?k.hi:b[b.length-1]:b[1],r=o[e]-m[e],p=r?(g-m[e])/r:0,s=(o[h]-m[h])*p;return m[h]+s}function Mh(b,e){var g=b._adapter,h=b.options.time,k=h.parser,m=k||h.format,o=e;return typeof k==="function"&&(o=k(o)),B.isFinite(o)||(o=typeof m==="string"?g.parse(o,m):g.parse(o)),o!==null?+o:(!k&&typeof m==="function"&&(o=m(e),B.isFinite(o)||(o=g.parse(o))),o)}function Sc(b,e){if(B.isNullOrUndef(e))return null;var g=b.options.time,h=Mh(b,b.getRightValue(e));return h===null?h:(g.round&&(h=+b._adapter.startOf(h,g.round)),h)}function nf(b,e,g,h){var k=Zb.length,m,o,r;for(m=Zb.indexOf(b);m<k-1;++m){o=ig[Zb[m]],r=o.steps?o.steps:Kh;if(o.common&&Math.ceil((g-e)/(r*o.size))<=h)return Zb[m]}return Zb[k-1]}function up(b,e,g,h,k){var m,o;for(m=Zb.length-1;m>=Zb.indexOf(g);m--){o=Zb[m];if(ig[o].common&&b._adapter.diff(k,h,o)>=e-1)return o}return Zb[g?Zb.indexOf(g):0]}function vp(b){for(var e=Zb.indexOf(b)+1,g=Zb.length;e<g;++e)if(ig[Zb[e]].common)return Zb[e]}function wp(b,e,g,h){var k=b._adapter,m=b.options,o=m.time,r=o.unit||nf(o.minUnit,e,g,h),p=sk([o.stepSize,o.unitStepSize,1]),s=r==="week"?o.isoWeekday:!1,w=e,z=[],D;s&&(w=+k.startOf(w,"isoWeek",s)),w=+k.startOf(w,s?"day":r);if(k.diff(g,e,r)>1e5*p)throw e+" and "+g+" are too far apart with stepSize of "+p+" "+r;for(D=w;D<g;D=+k.add(D,p,r))z.push(D);return(D===g||m.bounds==="ticks")&&z.push(D),z}function xp(b,e,g,h,k){var m=0,o=0,r,p;return k.offset&&e.length&&(r=le(b,"time",e[0],"pos"),e.length===1?m=1-r:m=(le(b,"time",e[1],"pos")-r)/2,p=le(b,"time",e[e.length-1],"pos"),e.length===1?o=p:o=(p-le(b,"time",e[e.length-2],"pos"))/2),{start:m,end:o,factor:1/(m+1+o)}}function yp(b,e,g,h){var k=b._adapter,m=+k.startOf(e[0].value,h),o=e[e.length-1].value,r,p;for(r=m;r<=o;r=+k.add(r,1,h))p=g[r],p>=0&&(e[p].major=!0);return e}function xk(b,e,g){var h=[],k={},m=e.length,o,r;for(o=0;o<m;++o)r=e[o],k[r]=o,h.push({value:r,major:!1});return m===0||!g?h:yp(b,h,k,g)}var yk={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}},zk=Xb.extend({initialize:function(){this.mergeTicksOptions(),Xb.prototype.initialize.call(this)},update:function(){var b=this,e=b.options,g=e.time||(e.time={}),h=b._adapter=new Ch._date(e.adapters.date);return Jh("time scale",g.format,"time.format","time.parser"),Jh("time scale",g.min,"time.min","ticks.min"),Jh("time scale",g.max,"time.max","ticks.max"),B.mergeIf(g.displayFormats,h.formats()),Xb.prototype.update.apply(b,arguments)},getRightValue:function(b){return b&&b.t!==void 0&&(b=b.t),Xb.prototype.getRightValue.call(this,b)},determineDataLimits:function(){var b=this,e=b.chart,g=b._adapter,h=b.options,k=h.time.unit||"day",m=Kh,o=tk,r=[],p=[],s=[],w,z,D,M,Q,T,Z,ha=b._getLabels();for(w=0,D=ha.length;w<D;++w)s.push(Sc(b,ha[w]));for(w=0,D=(e.data.datasets||[]).length;w<D;++w)if(e.isDatasetVisible(w)){Q=e.data.datasets[w].data;if(B.isObject(Q[0]))for(p[w]=[],z=0,M=Q.length;z<M;++z)T=Sc(b,Q[z]),r.push(T),p[w][z]=T;else p[w]=s.slice(0),Z||(r=r.concat(s),Z=!0)}else p[w]=[];s.length&&(m=Math.min(m,s[0]),o=Math.max(o,s[s.length-1])),r.length&&(r=D>1?sp(r).sort(uk):r.sort(uk),m=Math.min(m,r[0]),o=Math.max(o,r[r.length-1])),m=Sc(b,vk(h))||m,o=Sc(b,wk(h))||o,m=m===Kh?+g.startOf(Date.now(),k):m,o=o===tk?+g.endOf(Date.now(),k)+1:o,b.min=Math.min(m,o),b.max=Math.max(m+1,o),b._table=[],b._timestamps={data:r,datasets:p,labels:s}},buildTicks:function(){var b=this,e=b.min,g=b.max,h=b.options,k=h.ticks,m=h.time,o=b._timestamps,r=[],p=b.getLabelCapacity(e),s=k.source,w=h.distribution,z,D,M;for(s==="data"||s==="auto"&&w==="series"?o=o.data:s==="labels"?o=o.labels:o=wp(b,e,g,p),h.bounds==="ticks"&&o.length&&(e=o[0],g=o[o.length-1]),e=Sc(b,vk(h))||e,g=Sc(b,wk(h))||g,z=0,D=o.length;z<D;++z)M=o[z],M>=e&&M<=g&&r.push(M);return b.min=e,b.max=g,b._unit=m.unit||(k.autoSkip?nf(m.minUnit,b.min,b.max,p):up(b,r.length,m.minUnit,b.min,b.max)),b._majorUnit=!k.major.enabled||b._unit==="year"?void 0:vp(b._unit),b._table=Lh(b._timestamps.data,e,g,w),b._offsets=xp(b._table,r,e,g,h),k.reverse&&r.reverse(),xk(b,r,b._majorUnit)},getLabelForIndex:function(b,e){var g=this,h=g._adapter,k=g.chart.data,m=g.options.time,o=k.labels&&b<k.labels.length?k.labels[b]:"",r=k.datasets[e].data[b];return B.isObject(r)&&(o=g.getRightValue(r)),m.tooltipFormat?h.format(Mh(g,o),m.tooltipFormat):typeof o==="string"?o:h.format(Mh(g,o),m.displayFormats.datetime)},tickFormatFunction:function(b,e,g,h){var k=this,m=k._adapter,o=k.options,r=o.time.displayFormats,p=r[k._unit],s=k._majorUnit,w=r[s],z=g[e],D=o.ticks,M=s&&w&&z&&z.major,Q=m.format(b,h?h:M?w:p),T=M?D.major:D.minor,Z=sk([T.callback,T.userCallback,D.callback,D.userCallback]);return Z?Z(Q,e,g):Q},convertTicksToLabels:function(b){var e=[],g,h;for(g=0,h=b.length;g<h;++g)e.push(this.tickFormatFunction(b[g].value,g,b));return e},getPixelForOffset:function(b){var e=this,g=e._offsets,h=le(e._table,"time",b,"pos");return e.getPixelForDecimal((g.start+h)*g.factor)},getPixelForValue:function(b,e,g){var h=this,k=null;e!==void 0&&g!==void 0&&(k=h._timestamps.datasets[g][e]),k===null&&(k=Sc(h,b));if(k!==null)return h.getPixelForOffset(k)},getPixelForTick:function(b){var e=this.getTicks();return b>=0&&b<e.length?this.getPixelForOffset(e[b].value):null},getValueForPixel:function(b){var e=this,g=e._offsets,h=e.getDecimalForPixel(b)/g.factor-g.end,k=le(e._table,"pos",h,"time");return e._adapter._create(k)},_getLabelSize:function(b){var e=this,g=e.options.ticks,h=e.ctx.measureText(b).width,k=B.toRadians(e.isHorizontal()?g.maxRotation:g.minRotation),m=Math.cos(k),o=Math.sin(k),r=rp(g.fontSize,S.global.defaultFontSize);return{w:h*m+r*o,h:h*o+r*m}},getLabelWidth:function(b){return this._getLabelSize(b).w},getLabelCapacity:function(b){var e=this,g=e.options.time,h=g.displayFormats,k=h[g.unit]||h.millisecond,m=e.tickFormatFunction(b,0,xk(e,[b],e._majorUnit),k),o=e._getLabelSize(m),r=Math.floor(e.isHorizontal()?e.width/o.w:e.height/o.h);return e.options.offset&&r--,r>0?r:1}}),zp=yk;zk._defaults=zp;var Ak={category:lk,linear:mk,logarithmic:mf,radialLinear:rk,time:zk},Ap={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Ch._date.override(typeof d==="function"?{_id:"moment",formats:function(){return Ap},parse:function(b,e){return typeof b==="string"&&typeof e==="string"?b=d(b,e):b instanceof d||(b=d(b)),b.isValid()?b.valueOf():null},format:function(b,e){return d(b).format(e)},add:function(b,e,g){return d(b).add(e,g).valueOf()},diff:function(b,e,g){return d(b).diff(d(e),g)},startOf:function(b,e,g){return b=d(b),e==="isoWeek"?b.isoWeekday(g).valueOf():b.startOf(e).valueOf()},endOf:function(b,e){return d(b).endOf(e).valueOf()},_create:function(b){return d(b)}}:{}),S._set("global",{plugins:{filler:{propagate:!0}}});var Bp={dataset:function(b){var e=b.fill,g=b.chart,h=g.getDatasetMeta(e),k=h&&g.isDatasetVisible(e),m=k&&h.dataset._children||[],o=m.length||0;return o?function(r,p){return p<o&&m[p]._view||null}:null},boundary:function(b){var e=b.boundary,g=e?e.x:null,h=e?e.y:null;return B.isArray(e)?function(k,m){return e[m]}:function(k){return{x:g===null?k.x:g,y:h===null?k.y:h}}}};function Cp(b,e,g){var h=b._model||{},k=h.fill,m;k===void 0&&(k=!!h.backgroundColor);if(k===!1||k===null)return!1;if(k===!0)return"origin";m=parseFloat(k,10);if(isFinite(m)&&Math.floor(m)===m)return(k[0]==="-"||k[0]==="+")&&(m=e+m),m===e||m<0||m>=g?!1:m;switch(k){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return k;default:return!1}}function gd(b){var e=b.el._model||{},g=b.el._scale||{},h=b.fill,k=null,m;if(isFinite(h))return null;h==="start"?k=e.scaleBottom===void 0?g.bottom:e.scaleBottom:h==="end"?k=e.scaleTop===void 0?g.top:e.scaleTop:e.scaleZero!==void 0?k=e.scaleZero:g.getBasePixel&&(k=g.getBasePixel());if(k!==void 0&&k!==null){if(k.x!==void 0&&k.y!==void 0)return k;if(B.isFinite(k))return m=g.isHorizontal(),{x:m?k:null,y:m?null:k}}return null}function Bk(b){var e=b.el._scale,g=e.options,h=e.chart.data.labels.length,k=b.fill,m=[],o,r,p,s,w;if(!h)return null;for(o=g.ticks.reverse?e.max:e.min,r=g.ticks.reverse?e.min:e.max,p=e.getPointPositionForValue(0,o),s=0;s<h;++s)w=k==="start"||k==="end"?e.getPointPositionForValue(s,k==="start"?o:r):e.getBasePosition(s),g.gridLines.circular&&(w.cx=p.x,w.cy=p.y,w.angle=e.getIndexAngle(s)-Math.PI/2),m.push(w);return m}function Dp(b){var e=b.el._scale||{};return e.getPointPositionForValue?Bk(b):gd(b)}function Ep(b,e,g){var h=b[e],k=h.fill,m=[e],o;if(!g)return k;for(;k!==!1&&m.indexOf(k)===-1;){if(!isFinite(k))return k;o=b[k];if(!o)return!1;if(o.visible)return k;m.push(k),k=o.fill}return!1}function Fp(b){var e=b.fill,g="dataset";return e===!1?null:(isFinite(e)||(g="boundary"),Bp[g](b))}function ka(b){return b&&!b.skip}function Ck(b,e,g,h,k){var m,o,r,p;if(!h||!k)return;for(b.moveTo(e[0].x,e[0].y),m=1;m<h;++m)B.canvas.lineTo(b,e[m-1],e[m]);if(g[0].angle!==void 0){for(o=g[0].cx,r=g[0].cy,p=Math.sqrt(Math.pow(g[0].x-o,2)+Math.pow(g[0].y-r,2)),m=k-1;m>0;--m)b.arc(o,r,p,g[m].angle,g[m-1].angle,!0);return}for(b.lineTo(g[k-1].x,g[k-1].y),m=k-1;m>0;--m)B.canvas.lineTo(b,g[m],g[m-1],!0)}function Gp(b,e,g,h,k,m){var o=e.length,r=h.spanGaps,p=[],s=[],w=0,z=0,D,M,Q,T,Z,ha,wa,Aa;for(b.beginPath(),D=0,M=o;D<M;++D)Q=D%o,T=e[Q]._view,Z=g(T,Q,h),ha=ka(T),wa=ka(Z),m&&Aa===void 0&&ha&&(Aa=D+1,M=o+Aa),ha&&wa?(w=p.push(T),z=s.push(Z)):w&&z&&(r?(ha&&p.push(T),wa&&s.push(Z)):(Ck(b,p,s,w,z),w=z=0,p=[],s=[]));Ck(b,p,s,w,z),b.closePath(),b.fillStyle=k,b.fill()}var Dk={id:"filler",afterDatasetsUpdate:function(b,e){var g=(b.data.datasets||[]).length,h=e.propagate,k=[],m,o,r,p;for(o=0;o<g;++o)m=b.getDatasetMeta(o),r=m.dataset,p=null,r&&r._model&&r instanceof Wb.Line&&(p={visible:b.isDatasetVisible(o),fill:Cp(r,o,g),chart:b,el:r}),m.$filler=p,k.push(p);for(o=0;o<g;++o){p=k[o];if(!p)continue;p.fill=Ep(k,o,h),p.boundary=Dp(p),p.mapper=Fp(p)}},beforeDatasetsDraw:function(b){var e=b._getSortedVisibleDatasetMetas(),g=b.ctx,h,k,m,o,r,p,s;for(k=e.length-1;k>=0;--k){h=e[k].$filler;if(!h||!h.visible)continue;m=h.el,o=m._view,r=m._children||[],p=h.mapper,s=o.backgroundColor||S.global.defaultColor,p&&s&&r.length&&(B.canvas.clipArea(g,b.chartArea),Gp(g,r,p,o,s,m._loop),B.canvas.unclipArea(g))}}},$a=B.rtl.getRtlAdapter,uc=B.noop,Tc=B.valueOrDefault;S._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(b,e){var g=e.datasetIndex,h=this.chart,k=h.getDatasetMeta(g);k.hidden=k.hidden===null?!h.data.datasets[g].hidden:null,h.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(b){var e=b.data.datasets,g=b.options.legend||{},h=g.labels&&g.labels.usePointStyle;return b._getSortedDatasetMetas().map(function(k){var m=k.controller.getStyle(h?0:void 0);return{text:e[k.index].label,fillStyle:m.backgroundColor,hidden:!b.isDatasetVisible(k.index),lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:m.borderWidth,strokeStyle:m.borderColor,pointStyle:m.pointStyle,rotation:m.rotation,datasetIndex:k.index}},this)}}},legendCallback:function(b){var e=document.createElement("ul"),g=b.data.datasets,h,k,m,o;for(e.setAttribute("class",b.id+"-legend"),h=0,k=g.length;h<k;h++)m=e.appendChild(document.createElement("li")),o=m.appendChild(document.createElement("span")),o.style.backgroundColor=g[h].backgroundColor,g[h].label&&m.appendChild(document.createTextNode(g[h].label));return e.outerHTML}});function of(b,e){return b.usePointStyle&&b.boxWidth>e?e:b.boxWidth}var Ek=dc.extend({initialize:function(b){var e=this;B.extend(e,b),e.legendHitBoxes=[],e._hoveredItem=null,e.doughnutMode=!1},beforeUpdate:uc,update:function(b,e,g){var h=this;return h.beforeUpdate(),h.maxWidth=b,h.maxHeight=e,h.margins=g,h.beforeSetDimensions(),h.setDimensions(),h.afterSetDimensions(),h.beforeBuildLabels(),h.buildLabels(),h.afterBuildLabels(),h.beforeFit(),h.fit(),h.afterFit(),h.afterUpdate(),h.minSize},afterUpdate:uc,beforeSetDimensions:uc,setDimensions:function(){var b=this;b.isHorizontal()?(b.width=b.maxWidth,b.left=0,b.right=b.width):(b.height=b.maxHeight,b.top=0,b.bottom=b.height),b.paddingLeft=0,b.paddingTop=0,b.paddingRight=0,b.paddingBottom=0,b.minSize={width:0,height:0}},afterSetDimensions:uc,beforeBuildLabels:uc,buildLabels:function(){var b=this,e=b.options.labels||{},g=B.callback(e.generateLabels,[b.chart],b)||[];e.filter&&(g=g.filter(function(h){return e.filter(h,b.chart.data)})),b.options.reverse&&g.reverse(),b.legendItems=g},afterBuildLabels:uc,beforeFit:uc,fit:function(){var b=this,e=b.options,g=e.labels,h=e.display,k=b.ctx,m=B.options._parseFont(g),o=m.size,r=b.legendHitBoxes=[],p=b.minSize,s=b.isHorizontal();s?(p.width=b.maxWidth,p.height=h?10:0):(p.width=h?10:0,p.height=b.maxHeight);if(!h){b.width=p.width=b.height=p.height=0;return}k.font=m.string;if(s){var w=b.lineWidths=[0],z=0;k.textAlign="left",k.textBaseline="middle",B.each(b.legendItems,function(wa,Aa){var Na=of(g,o),Ha=Na+o/2+k.measureText(wa.text).width;(Aa===0||w[w.length-1]+Ha+2*g.padding>p.width)&&(z+=o+g.padding,w[w.length-(Aa>0?0:1)]=0),r[Aa]={left:0,top:0,width:Ha,height:o},w[w.length-1]+=Ha+g.padding}),p.height+=z}else{var D=g.padding,M=b.columnWidths=[],Q=b.columnHeights=[],T=g.padding,Z=0,ha=0;B.each(b.legendItems,function(wa,Aa){var Na=of(g,o),Ha=Na+o/2+k.measureText(wa.text).width;Aa>0&&ha+o+2*D>p.height&&(T+=Z+g.padding,M.push(Z),Q.push(ha),Z=0,ha=0),Z=Math.max(Z,Ha),ha+=o+D,r[Aa]={left:0,top:0,width:Ha,height:o}}),T+=Z,M.push(Z),Q.push(ha),p.width+=T}b.width=p.width,b.height=p.height},afterFit:uc,isHorizontal:function(){return this.options.position==="top"||this.options.position==="bottom"},draw:function(){var b=this,e=b.options,g=e.labels,h=S.global,k=h.defaultColor,m=h.elements.line,o=b.height,r=b.columnHeights,p=b.width,s=b.lineWidths;if(!e.display)return;var w=$a(e.rtl,b.left,b.minSize.width),z=b.ctx,D=Tc(g.fontColor,h.defaultFontColor),M=B.options._parseFont(g),Q=M.size,T;z.textAlign=w.textAlign("left"),z.textBaseline="middle",z.lineWidth=.5,z.strokeStyle=D,z.fillStyle=D,z.font=M.string;var Z=of(g,Q),ha=b.legendHitBoxes,wa=function(ib,ab,db){if(isNaN(Z)||Z<=0)return;z.save();var Kb=Tc(db.lineWidth,m.borderWidth);z.fillStyle=Tc(db.fillStyle,k),z.lineCap=Tc(db.lineCap,m.borderCapStyle),z.lineDashOffset=Tc(db.lineDashOffset,m.borderDashOffset),z.lineJoin=Tc(db.lineJoin,m.borderJoinStyle),z.lineWidth=Kb,z.strokeStyle=Tc(db.strokeStyle,k),z.setLineDash&&z.setLineDash(Tc(db.lineDash,m.borderDash));if(g&&g.usePointStyle){var Fb=Z*Math.SQRT2/2,Bb=w.xPlus(ib,Z/2),Nb=ab+Q/2;B.canvas.drawPoint(z,db.pointStyle,Fb,Bb,Nb,db.rotation)}else z.fillRect(w.leftForLtr(ib,Z),ab,Z,Q),Kb!==0&&z.strokeRect(w.leftForLtr(ib,Z),ab,Z,Q);z.restore()},Aa=function(ib,ab,db,Kb){var Fb=Q/2,Bb=w.xPlus(ib,Z+Fb),Nb=ab+Fb;z.fillText(db.text,Bb,Nb),db.hidden&&(z.beginPath(),z.lineWidth=2,z.moveTo(Bb,Nb),z.lineTo(w.xPlus(Bb,Kb),Nb),z.stroke())},Na=function(ib,ab){switch(e.align){case"start":return g.padding;case"end":return ib-ab;default:return(ib-ab+g.padding)/2}},Ha=b.isHorizontal();Ha?T={x:b.left+Na(p,s[0]),y:b.top+g.padding,line:0}:T={x:b.left+g.padding,y:b.top+Na(o,r[0]),line:0},B.rtl.overrideTextDirection(b.ctx,e.textDirection);var Xa=Q+g.padding;B.each(b.legendItems,function(ib,ab){var db=z.measureText(ib.text).width,Kb=Z+Q/2+db,Fb=T.x,Bb=T.y;w.setWidth(b.minSize.width),Ha?ab>0&&Fb+Kb+g.padding>b.left+b.minSize.width&&(Bb=T.y+=Xa,T.line++,Fb=T.x=b.left+Na(p,s[T.line])):ab>0&&Bb+Xa>b.top+b.minSize.height&&(Fb=T.x=Fb+b.columnWidths[T.line]+g.padding,T.line++,Bb=T.y=b.top+Na(o,r[T.line]));var Nb=w.x(Fb);wa(Nb,Bb,ib),ha[ab].left=w.leftForLtr(Nb,ha[ab].width),ha[ab].top=Bb,Aa(Nb,Bb,ib,db),Ha?T.x+=Kb+g.padding:T.y+=Xa}),B.rtl.restoreTextDirection(b.ctx,e.textDirection)},_getLegendItemAt:function(b,e){var g=this,h,k,m;if(b>=g.left&&b<=g.right&&e>=g.top&&e<=g.bottom)for(m=g.legendHitBoxes,h=0;h<m.length;++h){k=m[h];if(b>=k.left&&b<=k.left+k.width&&e>=k.top&&e<=k.top+k.height)return g.legendItems[h]}return null},handleEvent:function(b){var e=this,g=e.options,h=b.type==="mouseup"?"click":b.type,k;if(h==="mousemove"){if(!g.onHover&&!g.onLeave)return}else if(h==="click"){if(!g.onClick)return}else return;k=e._getLegendItemAt(b.x,b.y),h==="click"?k&&g.onClick&&g.onClick.call(e,b.native,k):(g.onLeave&&k!==e._hoveredItem&&(e._hoveredItem&&g.onLeave.call(e,b.native,e._hoveredItem),e._hoveredItem=k),g.onHover&&k&&g.onHover.call(e,b.native,k))}});function Fk(b,e){var g=new Ek({ctx:b.ctx,options:e,chart:b});ec.configure(b,g,e),ec.addBox(b,g),b.legend=g}var Hp={id:"legend",_element:Ek,beforeInit:function(b){var e=b.options.legend;e&&Fk(b,e)},beforeUpdate:function(b){var e=b.options.legend,g=b.legend;e?(B.mergeIf(e,S.global.legend),g?(ec.configure(b,g,e),g.options=e):Fk(b,e)):g&&(ec.removeBox(b,g),delete b.legend)},afterEvent:function(b,e){var g=b.legend;g&&g.handleEvent(e)}},Uc=B.noop;S._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Gk=dc.extend({initialize:function(b){var e=this;B.extend(e,b),e.legendHitBoxes=[]},beforeUpdate:Uc,update:function(b,e,g){var h=this;return h.beforeUpdate(),h.maxWidth=b,h.maxHeight=e,h.margins=g,h.beforeSetDimensions(),h.setDimensions(),h.afterSetDimensions(),h.beforeBuildLabels(),h.buildLabels(),h.afterBuildLabels(),h.beforeFit(),h.fit(),h.afterFit(),h.afterUpdate(),h.minSize},afterUpdate:Uc,beforeSetDimensions:Uc,setDimensions:function(){var b=this;b.isHorizontal()?(b.width=b.maxWidth,b.left=0,b.right=b.width):(b.height=b.maxHeight,b.top=0,b.bottom=b.height),b.paddingLeft=0,b.paddingTop=0,b.paddingRight=0,b.paddingBottom=0,b.minSize={width:0,height:0}},afterSetDimensions:Uc,beforeBuildLabels:Uc,buildLabels:Uc,afterBuildLabels:Uc,beforeFit:Uc,fit:function(){var b=this,e=b.options,g=b.minSize={},h=b.isHorizontal(),k,m;if(!e.display){b.width=g.width=b.height=g.height=0;return}k=B.isArray(e.text)?e.text.length:1,m=k*B.options._parseFont(e).lineHeight+e.padding*2,b.width=g.width=h?b.maxWidth:m,b.height=g.height=h?m:b.maxHeight},afterFit:Uc,isHorizontal:function(){var b=this.options.position;return b==="top"||b==="bottom"},draw:function(){var b=this,e=b.ctx,g=b.options;if(!g.display)return;var h=B.options._parseFont(g),k=h.lineHeight,m=k/2+g.padding,o=0,r=b.top,p=b.left,s=b.bottom,w=b.right,z,D,M;e.fillStyle=B.valueOrDefault(g.fontColor,S.global.defaultFontColor),e.font=h.string,b.isHorizontal()?(D=p+(w-p)/2,M=r+m,z=w-p):(D=g.position==="left"?p+m:w-m,M=r+(s-r)/2,z=s-r,o=Math.PI*(g.position==="left"?-.5:.5)),e.save(),e.translate(D,M),e.rotate(o),e.textAlign="center",e.textBaseline="middle";var Q=g.text;if(B.isArray(Q))for(var T=0,Z=0;Z<Q.length;++Z)e.fillText(Q[Z],0,T,z),T+=k;else e.fillText(Q,0,0,z);e.restore()}});function Gc(b,e){var g=new Gk({ctx:b.ctx,options:e,chart:b});ec.configure(b,g,e),ec.addBox(b,g),b.titleBlock=g}var Ip={id:"title",_element:Gk,beforeInit:function(b){var e=b.options.title;e&&Gc(b,e)},beforeUpdate:function(b){var e=b.options.title,g=b.titleBlock;e?(B.mergeIf(e,S.global.title),g?(ec.configure(b,g,e),g.options=e):Gc(b,e)):g&&(ec.removeBox(b,g),delete b.titleBlock)}},Vc={},Jp=Dk,Kp=Hp,Hk=Ip;Vc.filler=Jp,Vc.legend=Kp,Vc.title=Hk,Ma.helpers=B,Uo(),Ma._adapters=Ch,Ma.Animation=jh,Ma.animationService=kh,Ma.controllers=Zj,Ma.DatasetController=mb,Ma.defaults=S,Ma.Element=dc,Ma.elements=Wb,Ma.Interaction=dd,Ma.layouts=ec,Ma.platform=ge,Ma.plugins=nb,Ma.Scale=Xb,Ma.scaleService=ff,Ma.Ticks=jf,Ma.Tooltip=Bh,Ma.helpers.each(Ak,function(b,e){Ma.scaleService.registerScaleType(e,b,b._defaults)});for(var Ik in Vc)Vc.hasOwnProperty(Ik)&&Ma.plugins.register(Vc[Ik]);Ma.platform.initialize();var Jk=Ma;return typeof window!=="undefined"&&(window.Chart=Ma),Ma.Chart=Ma,Ma.Legend=Vc.legend._element,Ma.Title=Vc.title._element,Ma.pluginService=Ma.plugins,Ma.PluginBase=Ma.Element.extend({}),Ma.canvasHelpers=Ma.helpers.canvas,Ma.layoutService=Ma.layouts,Ma.LinearScaleBase=dg,Ma.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(b){Ma[b]=function(e,g){return new Ma(e,Ma.helpers.merge(g||{},{type:b.charAt(0).toLowerCase()+b.slice(1)}))}}),Jk})});var vl=Ec((a,c)=>{!function(d,f){"function"==typeof define&&define.amd?define([],f):"object"==typeof c&&"undefined"!=typeof a?c.exports=f():d.Papa=f()}(a,function d(){"use strict";var f="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==f?f:{},i=!f.document&&!!f.postMessage,l=i&&/blob:/i.test((f.location||{}).protocol),q={},u=0,v={parse:function(I,O){var x=(O=O||{}).dynamicTyping||!1;ja(x)&&(O.dynamicTypingFunction=x,x={});if(O.dynamicTyping=x,O.transform=!!ja(O.transform)&&O.transform,O.worker&&v.WORKERS_SUPPORTED){var G=function(){if(!v.WORKERS_SUPPORTED)return!1;var J=(K=f.URL||f.webkitURL||null,ca=d.toString(),v.BLOB_URL||(v.BLOB_URL=K.createObjectURL(new Blob(["(",ca,")();"],{type:"text/javascript"})))),U=new f.Worker(J),K,ca;return U.onmessage=ga,U.id=u++,q[U.id]=U}();return G.userStep=O.step,G.userChunk=O.chunk,G.userComplete=O.complete,G.userError=O.error,O.step=ja(O.step),O.chunk=ja(O.chunk),O.complete=ja(O.complete),O.error=ja(O.error),delete O.worker,void G.postMessage({input:I,config:O,workerId:G.id})}var F=null;return v.NODE_STREAM_INPUT,"string"==typeof I?F=O.download?new H(O):new N(O):!0===I.readable&&ja(I.read)&&ja(I.on)?F=new P(O):(f.File&&I instanceof File||I instanceof Object)&&(F=new R(O)),F.stream(I)},unparse:function(I,O){var x=!1,G=!0,F=",",J=`\r
`,U='"',K=U+U,ca=!1,ba=null,Ba=!1;!function(){if("object"!=typeof O)return;"string"!=typeof O.delimiter||v.BAD_DELIMITERS.filter(function(na){return-1!==O.delimiter.indexOf(na)}).length||(F=O.delimiter),("boolean"==typeof O.quotes||"function"==typeof O.quotes||Array.isArray(O.quotes))&&(x=O.quotes),"boolean"!=typeof O.skipEmptyLines&&"string"!=typeof O.skipEmptyLines||(ca=O.skipEmptyLines),"string"==typeof O.newline&&(J=O.newline),"string"==typeof O.quoteChar&&(U=O.quoteChar),"boolean"==typeof O.header&&(G=O.header);if(Array.isArray(O.columns)){if(0===O.columns.length)throw new Error("Option columns is empty");ba=O.columns}void 0!==O.escapeChar&&(K=O.escapeChar+U),"boolean"==typeof O.escapeFormulae&&(Ba=O.escapeFormulae)}();var $=new RegExp(Y(U),"g");"string"==typeof I&&(I=JSON.parse(I));if(Array.isArray(I)){if(!I.length||Array.isArray(I[0]))return ra(null,I,ca);if("object"==typeof I[0])return ra(ba||va(I[0]),I,ca)}else if("object"==typeof I)return"string"==typeof I.data&&(I.data=JSON.parse(I.data)),Array.isArray(I.data)&&(I.fields||(I.fields=I.meta&&I.meta.fields),I.fields||(I.fields=Array.isArray(I.data[0])?I.fields:va(I.data[0])),Array.isArray(I.data[0])||"object"==typeof I.data[0]||(I.data=[I.data])),ra(I.fields||[],I.data||[],ca);throw new Error("Unable to serialize unrecognized input");function va(na){if("object"!=typeof na)return[];var xa=[];for(var ma in na)xa.push(ma);return xa}function ra(na,xa,ma){var eb="";"string"==typeof na&&(na=JSON.parse(na)),"string"==typeof xa&&(xa=JSON.parse(xa));var gb=Array.isArray(na)&&0<na.length,hb=!Array.isArray(xa[0]);if(gb&&G){for(var Ca=0;Ca<na.length;Ca++)0<Ca&&(eb+=F),eb+=da(na[Ca],Ca);0<xa.length&&(eb+=J)}for(var Ia=0;Ia<xa.length;Ia++){var Za=gb?na.length:xa[Ia].length,fb=!1,qa=gb?0===Object.keys(xa[Ia]).length:0===xa[Ia].length;if(ma&&!gb&&(fb="greedy"===ma?""===xa[Ia].join("").trim():1===xa[Ia].length&&0===xa[Ia][0].length),"greedy"===ma&&gb){for(var ya=[],La=0;La<Za;La++){var ta=hb?na[La]:La;ya.push(xa[Ia][ta])}fb=""===ya.join("").trim()}if(!fb){for(var Ea=0;Ea<Za;Ea++){0<Ea&&!qa&&(eb+=F);var cb=gb&&hb?na[Ea]:Ea;eb+=da(xa[Ia][cb],Ea)}Ia<xa.length-1&&(!ma||0<Za&&!qa)&&(eb+=J)}}return eb}function da(na,xa){if(null==na)return"";if(na.constructor===Date)return JSON.stringify(na).slice(1,25);!0===Ba&&"string"==typeof na&&null!==na.match(/^[=+\-@].*$/)&&(na="'"+na);var ma=na.toString().replace($,K),eb="boolean"==typeof x&&x||"function"==typeof x&&x(na,xa)||Array.isArray(x)&&x[xa]||function(gb,hb){for(var Ca=0;Ca<hb.length;Ca++)if(-1<gb.indexOf(hb[Ca]))return!0;return!1}(ma,v.BAD_DELIMITERS)||-1<ma.indexOf(F)||" "===ma.charAt(0)||" "===ma.charAt(ma.length-1);return eb?U+ma+U:ma}}};if(v.RECORD_SEP=String.fromCharCode(30),v.UNIT_SEP=String.fromCharCode(31),v.BYTE_ORDER_MARK="﻿",v.BAD_DELIMITERS=["\r",`
`,'"',v.BYTE_ORDER_MARK],v.WORKERS_SUPPORTED=!i&&!!f.Worker,v.NODE_STREAM_INPUT=1,v.LocalChunkSize=10485760,v.RemoteChunkSize=5242880,v.DefaultDelimiter=",",v.Parser=fa,v.ParserHandle=V,v.NetworkStreamer=H,v.FileStreamer=R,v.StringStreamer=N,v.ReadableStreamStreamer=P,f.jQuery){var A=f.jQuery;A.fn.parse=function(I){var O=I.config||{},x=[];return this.each(function(J){if(!("INPUT"===A(this).prop("tagName").toUpperCase()&&"file"===A(this).attr("type").toLowerCase()&&f.FileReader)||!this.files||0===this.files.length)return!0;for(var U=0;U<this.files.length;U++)x.push({file:this.files[U],inputElem:this,instanceConfig:A.extend({},O)})}),G(),this;function G(){if(0!==x.length){var J,U,K,ca,ba=x[0];if(ja(I.before)){var Ba=I.before(ba.file,ba.inputElem);if("object"==typeof Ba){if("abort"===Ba.action)return J="AbortError",U=ba.file,K=ba.inputElem,ca=Ba.reason,void(ja(I.error)&&I.error({name:J},U,K,ca));if("skip"===Ba.action)return void F();"object"==typeof Ba.config&&(ba.instanceConfig=A.extend(ba.instanceConfig,Ba.config))}else if("skip"===Ba)return void F()}var $=ba.instanceConfig.complete;ba.instanceConfig.complete=function(va){ja($)&&$(va,ba.file,ba.inputElem),F()},v.parse(ba.file,ba.instanceConfig)}else ja(I.complete)&&I.complete()}function F(){x.splice(0,1),G()}}}function E(I){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(O){var x=oa(O);x.chunkSize=parseInt(x.chunkSize),O.step||O.chunk||(x.chunkSize=null),this._handle=new V(x),(this._handle.streamer=this)._config=x}.call(this,I),this.parseChunk=function(O,x){if(this.isFirstChunk&&ja(this._config.beforeFirstChunk)){var G=this._config.beforeFirstChunk(O);void 0!==G&&(O=G)}this.isFirstChunk=!1,this._halted=!1;var F=this._partialLine+O;this._partialLine="";var J=this._handle.parse(F,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var U=J.meta.cursor;this._finished||(this._partialLine=F.substring(U-this._baseIndex),this._baseIndex=U),J&&J.data&&(this._rowCount+=J.data.length);var K=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(l)f.postMessage({results:J,workerId:v.WORKER_ID,finished:K});else if(ja(this._config.chunk)&&!x){if(this._config.chunk(J,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);J=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(J.data),this._completeResults.errors=this._completeResults.errors.concat(J.errors),this._completeResults.meta=J.meta),this._completed||!K||!ja(this._config.complete)||J&&J.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),K||J&&J.meta.paused||this._nextChunk(),J}this._halted=!0},this._sendError=function(O){ja(this._config.error)?this._config.error(O):l&&this._config.error&&f.postMessage({workerId:v.WORKER_ID,error:O,finished:!1})}}function H(I){var O;(I=I||{}).chunkSize||(I.chunkSize=v.RemoteChunkSize),E.call(this,I),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(x){this._input=x,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(O=new XMLHttpRequest(),this._config.withCredentials&&(O.withCredentials=this._config.withCredentials),i||(O.onload=pa(this._chunkLoaded,this),O.onerror=pa(this._chunkError,this)),O.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var x=this._config.downloadRequestHeaders;for(var G in x)O.setRequestHeader(G,x[G])}if(this._config.chunkSize){var F=this._start+this._config.chunkSize-1;O.setRequestHeader("Range","bytes="+this._start+"-"+F)}try{O.send(this._config.downloadRequestBody)}catch(J){this._chunkError(J.message)}i&&0===O.status&&this._chunkError()}},this._chunkLoaded=function(){4===O.readyState&&(O.status<200||400<=O.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:O.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(x){var G=x.getResponseHeader("Content-Range");return null===G?-1:parseInt(G.substring(G.lastIndexOf("/")+1))}(O),this.parseChunk(O.responseText)))},this._chunkError=function(x){var G=O.statusText||x;this._sendError(new Error(G))}}function R(I){var O,x;(I=I||{}).chunkSize||(I.chunkSize=v.LocalChunkSize),E.call(this,I);var G="undefined"!=typeof FileReader;this.stream=function(F){this._input=F,x=F.slice||F.webkitSlice||F.mozSlice,G?((O=new FileReader()).onload=pa(this._chunkLoaded,this),O.onerror=pa(this._chunkError,this)):O=new FileReaderSync(),this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var F=this._input;if(this._config.chunkSize){var J=Math.min(this._start+this._config.chunkSize,this._input.size);F=x.call(F,this._start,J)}var U=O.readAsText(F,this._config.encoding);G||this._chunkLoaded({target:{result:U}})},this._chunkLoaded=function(F){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(F.target.result)},this._chunkError=function(){this._sendError(O.error)}}function N(I){var O;E.call(this,I=I||{}),this.stream=function(x){return O=x,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var x,G=this._config.chunkSize;return G?(x=O.substring(0,G),O=O.substring(G)):(x=O,O=""),this._finished=!O,this.parseChunk(x)}}}function P(I){E.call(this,I=I||{});var O=[],x=!0,G=!1;this.pause=function(){E.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){E.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(F){this._input=F,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){G&&1===O.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),O.length?this.parseChunk(O.shift()):x=!0},this._streamData=pa(function(F){try{O.push("string"==typeof F?F:F.toString(this._config.encoding)),x&&(x=!1,this._checkIsFinished(),this.parseChunk(O.shift()))}catch(J){this._streamError(J)}},this),this._streamError=pa(function(F){this._streamCleanUp(),this._sendError(F)},this),this._streamEnd=pa(function(){this._streamCleanUp(),G=!0,this._streamData("")},this),this._streamCleanUp=pa(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function V(I){var O,x,G,F=Math.pow(2,53),J=-F,U=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,K=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,ca=this,ba=0,Ba=0,$=!1,va=!1,ra=[],da={data:[],errors:[],meta:{}};if(ja(I.step)){var na=I.step;I.step=function(Ca){if(da=Ca,eb())ma();else{if(ma(),0===da.data.length)return;ba+=Ca.data.length,I.preview&&ba>I.preview?x.abort():(da.data=da.data[0],na(da,ca))}}}function xa(Ca){return"greedy"===I.skipEmptyLines?""===Ca.join("").trim():1===Ca.length&&0===Ca[0].length}function ma(){if(da&&G&&(hb("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+v.DefaultDelimiter+"'"),G=!1),I.skipEmptyLines)for(var Ca=0;Ca<da.data.length;Ca++)xa(da.data[Ca])&&da.data.splice(Ca--,1);return eb()&&function(){if(!da)return;function Ia(fb,qa){ja(I.transformHeader)&&(fb=I.transformHeader(fb,qa)),ra.push(fb)}if(Array.isArray(da.data[0])){for(var Za=0;eb()&&Za<da.data.length;Za++)da.data[Za].forEach(Ia);da.data.splice(0,1)}else da.data.forEach(Ia)}(),function(){if(!da||!I.header&&!I.dynamicTyping&&!I.transform)return da;function Ia(fb,qa){var ya,La=I.header?{}:[];for(ya=0;ya<fb.length;ya++){var ta=ya,Ea=fb[ya];I.header&&(ta=ya>=ra.length?"__parsed_extra":ra[ya]),I.transform&&(Ea=I.transform(Ea,ta)),Ea=gb(ta,Ea),"__parsed_extra"===ta?(La[ta]=La[ta]||[],La[ta].push(Ea)):La[ta]=Ea}return I.header&&(ya>ra.length?hb("FieldMismatch","TooManyFields","Too many fields: expected "+ra.length+" fields but parsed "+ya,Ba+qa):ya<ra.length&&hb("FieldMismatch","TooFewFields","Too few fields: expected "+ra.length+" fields but parsed "+ya,Ba+qa)),La}var Za=1;return!da.data.length||Array.isArray(da.data[0])?(da.data=da.data.map(Ia),Za=da.data.length):da.data=Ia(da.data,0),I.header&&da.meta&&(da.meta.fields=ra),Ba+=Za,da}()}function eb(){return I.header&&0===ra.length}function gb(Ca,Ia){return Za=Ca,I.dynamicTypingFunction&&void 0===I.dynamicTyping[Za]&&(I.dynamicTyping[Za]=I.dynamicTypingFunction(Za)),!0===(I.dynamicTyping[Za]||I.dynamicTyping)?"true"===Ia||"TRUE"===Ia||"false"!==Ia&&"FALSE"!==Ia&&(function(fb){if(U.test(fb)){var qa=parseFloat(fb);if(J<qa&&qa<F)return!0}return!1}(Ia)?parseFloat(Ia):K.test(Ia)?new Date(Ia):""===Ia?null:Ia):Ia;var Za}function hb(Ca,Ia,Za,fb){var qa={type:Ca,code:Ia,message:Za};void 0!==fb&&(qa.row=fb),da.errors.push(qa)}this.parse=function(Ca,Ia,Za){var fb=I.quoteChar||'"';if(I.newline||(I.newline=function(La,ta){La=La.substring(0,1048576);var Ea=new RegExp(Y(ta)+"([^]*?)"+Y(ta),"gm"),cb=(La=La.replace(Ea,"")).split("\r"),Da=La.split(`
`),Sa=1<Da.length&&Da[0].length<cb[0].length;if(1===cb.length||Sa)return`
`;for(var Ja=0,Va=0;Va<cb.length;Va++)`
`===cb[Va][0]&&Ja++;return Ja>=cb.length/2?`\r
`:"\r"}(Ca,fb)),G=!1,I.delimiter)ja(I.delimiter)&&(I.delimiter=I.delimiter(Ca),da.meta.delimiter=I.delimiter);else{var qa=function(La,ta,Ea,cb,Da){var Sa,Ja,Va,jb;Da=Da||[",","	","|",";",v.RECORD_SEP,v.UNIT_SEP];for(var ub=0;ub<Da.length;ub++){var ob=Da[ub],sa=0,_a=0,X=0;Va=void 0;for(var L=new fa({comments:cb,delimiter:ob,newline:ta,preview:10}).parse(La),_=0;_<L.data.length;_++)if(Ea&&xa(L.data[_]))X++;else{var aa=L.data[_].length;_a+=aa,void 0!==Va?0<aa&&(sa+=Math.abs(aa-Va),Va=aa):Va=aa}0<L.data.length&&(_a/=L.data.length-X),(void 0===Ja||sa<=Ja)&&(void 0===jb||jb<_a)&&1.99<_a&&(Ja=sa,Sa=ob,jb=_a)}return{successful:!!(I.delimiter=Sa),bestDelimiter:Sa}}(Ca,I.newline,I.skipEmptyLines,I.comments,I.delimitersToGuess);qa.successful?I.delimiter=qa.bestDelimiter:(G=!0,I.delimiter=v.DefaultDelimiter),da.meta.delimiter=I.delimiter}var ya=oa(I);return I.preview&&I.header&&ya.preview++,O=Ca,x=new fa(ya),da=x.parse(O,Ia,Za),ma(),$?{meta:{paused:!0}}:da||{meta:{paused:!1}}},this.paused=function(){return $},this.pause=function(){$=!0,x.abort(),O=ja(I.chunk)?"":O.substring(x.getCharIndex())},this.resume=function(){ca.streamer._halted?($=!1,ca.streamer.parseChunk(O,!0)):setTimeout(ca.resume,3)},this.aborted=function(){return va},this.abort=function(){va=!0,x.abort(),da.meta.aborted=!0,ja(I.complete)&&I.complete(da),O=""}}function Y(I){return I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function fa(I){var O,x=(I=I||{}).delimiter,G=I.newline,F=I.comments,J=I.step,U=I.preview,K=I.fastMode,ca=O=void 0===I.quoteChar?'"':I.quoteChar;if(void 0!==I.escapeChar&&(ca=I.escapeChar),("string"!=typeof x||-1<v.BAD_DELIMITERS.indexOf(x))&&(x=","),F===x)throw new Error("Comment character same as delimiter");!0===F?F="#":("string"!=typeof F||-1<v.BAD_DELIMITERS.indexOf(F))&&(F=!1),`
`!==G&&"\r"!==G&&`\r
`!==G&&(G=`
`);var ba=0,Ba=!1;this.parse=function($,va,ra){if("string"!=typeof $)throw new Error("Input must be a string");var da=$.length,na=x.length,xa=G.length,ma=F.length,eb=ja(J),gb=[],hb=[],Ca=[],Ia=ba=0;if(!$)return ub();if(K||!1!==K&&-1===$.indexOf(O)){for(var Za=$.split(G),fb=0;fb<Za.length;fb++){if(Ca=Za[fb],ba+=Ca.length,fb!==Za.length-1)ba+=G.length;else if(ra)return ub();if(!F||Ca.substring(0,ma)!==F){if(eb){if(gb=[],Sa(Ca.split(x)),ob(),Ba)return ub()}else Sa(Ca.split(x));if(U&&U<=fb)return gb=gb.slice(0,U),ub(!0)}}return ub()}for(var qa=$.indexOf(x,ba),ya=$.indexOf(G,ba),La=new RegExp(Y(ca)+Y(O),"g"),ta=$.indexOf(O,ba);;)if($[ba]!==O)if(F&&0===Ca.length&&$.substring(ba,ba+ma)===F){if(-1===ya)return ub();ba=ya+xa,ya=$.indexOf(G,ba),qa=$.indexOf(x,ba)}else{if(-1!==qa&&(qa<ya||-1===ya)){if(!(qa<ta)){Ca.push($.substring(ba,qa)),ba=qa+na,qa=$.indexOf(x,ba);continue}var Ea=sa(qa,ta,ya);if(Ea&&void 0!==Ea.nextDelim){qa=Ea.nextDelim,ta=Ea.quoteSearch,Ca.push($.substring(ba,qa)),ba=qa+na,qa=$.indexOf(x,ba);continue}}if(-1===ya)break;if(Ca.push($.substring(ba,ya)),jb(ya+xa),eb&&(ob(),Ba))return ub();if(U&&gb.length>=U)return ub(!0)}else for(ta=ba,ba++;;){if(-1===(ta=$.indexOf(O,ta+1)))return ra||hb.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:gb.length,index:ba}),Va();if(ta===da-1)return Va($.substring(ba,ta).replace(La,O));if(O!==ca||$[ta+1]!==ca){if(O===ca||0===ta||$[ta-1]!==ca){-1!==qa&&qa<ta+1&&(qa=$.indexOf(x,ta+1)),-1!==ya&&ya<ta+1&&(ya=$.indexOf(G,ta+1));var cb=Ja(-1===ya?qa:Math.min(qa,ya));if($[ta+1+cb]===x){Ca.push($.substring(ba,ta).replace(La,O)),$[ba=ta+1+cb+na]!==O&&(ta=$.indexOf(O,ba)),qa=$.indexOf(x,ba),ya=$.indexOf(G,ba);break}var Da=Ja(ya);if($.substring(ta+1+Da,ta+1+Da+xa)===G){if(Ca.push($.substring(ba,ta).replace(La,O)),jb(ta+1+Da+xa),qa=$.indexOf(x,ba),ta=$.indexOf(O,ba),eb&&(ob(),Ba))return ub();if(U&&gb.length>=U)return ub(!0);break}hb.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:gb.length,index:ba}),ta++}}else ta++}return Va();function Sa(_a){gb.push(_a),Ia=ba}function Ja(_a){var X=0;if(-1!==_a){var L=$.substring(ta+1,_a);L&&""===L.trim()&&(X=L.length)}return X}function Va(_a){return ra||(void 0===_a&&(_a=$.substring(ba)),Ca.push(_a),ba=da,Sa(Ca),eb&&ob()),ub()}function jb(_a){ba=_a,Sa(Ca),Ca=[],ya=$.indexOf(G,ba)}function ub(_a){return{data:gb,errors:hb,meta:{delimiter:x,linebreak:G,aborted:Ba,truncated:!!_a,cursor:Ia+(va||0)}}}function ob(){J(ub()),gb=[],hb=[]}function sa(_a,X,L){var _={nextDelim:void 0,quoteSearch:void 0},aa=$.indexOf(O,X+1);if(X<_a&&_a<aa&&(aa<L||-1===L)){var S=$.indexOf(x,aa);if(-1===S)return _;aa<S&&(aa=$.indexOf(O,aa+1)),_=sa(S,aa,L)}else _={nextDelim:_a,quoteSearch:X};return _}},this.abort=function(){Ba=!0},this.getCharIndex=function(){return ba}}function ga(I){var O=I.data,x=q[O.workerId],G=!1;if(O.error)x.userError(O.error,O.file);else if(O.results&&O.results.data){var F={abort:function(){G=!0,la(O.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ia,resume:ia};if(ja(x.userStep)){for(var J=0;J<O.results.data.length&&(x.userStep({data:O.results.data[J],errors:O.results.errors,meta:O.results.meta},F),!G);J++);delete O.results}else ja(x.userChunk)&&(x.userChunk(O.results,F,O.file),delete O.results)}O.finished&&!G&&la(O.workerId,O.results)}function la(I,O){var x=q[I];ja(x.userComplete)&&x.userComplete(O),x.terminate(),delete q[I]}function ia(){throw new Error("Not implemented.")}function oa(I){if("object"!=typeof I||null===I)return I;var O=Array.isArray(I)?[]:{};for(var x in I)O[x]=oa(I[x]);return O}function pa(I,O){return function(){I.apply(O,arguments)}}function ja(I){return"function"==typeof I}return l&&(f.onmessage=function(I){var O=I.data;void 0===v.WORKER_ID&&O&&(v.WORKER_ID=O.workerId);if("string"==typeof O.input)f.postMessage({workerId:v.WORKER_ID,results:v.parse(O.input,O.config),finished:!0});else if(f.File&&O.input instanceof File||O.input instanceof Object){var x=v.parse(O.input,O.config);x&&f.postMessage({workerId:v.WORKER_ID,results:x,finished:!0})}}),(H.prototype=Object.create(E.prototype)).constructor=H,(R.prototype=Object.create(E.prototype)).constructor=R,(N.prototype=Object.create(N.prototype)).constructor=N,(P.prototype=Object.create(E.prototype)).constructor=P,v})});var Np=Ec(I=>{_d(I,{__assign:()=>d,__asyncDelegator:()=>fa,__asyncGenerator:()=>Y,__asyncValues:()=>ga,__await:()=>V,__awaiter:()=>u,__classPrivateFieldGet:()=>pa,__classPrivateFieldSet:()=>ja,__createBinding:()=>A,__decorate:()=>i,__exportStar:()=>E,__extends:()=>c,__generator:()=>v,__importDefault:()=>oa,__importStar:()=>ia,__makeTemplateObject:()=>la,__metadata:()=>q,__param:()=>l,__read:()=>R,__rest:()=>f,__spread:()=>N,__spreadArrays:()=>P,__values:()=>H});var a=function(x,G){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,J){F.__proto__=J}||function(F,J){for(var U in J)J.hasOwnProperty(U)&&(F[U]=J[U])},a(x,G)};function c(x,G){a(x,G);function F(){this.constructor=x}x.prototype=G===null?Object.create(G):(F.prototype=G.prototype,new F())}var d=function(){return d=Object.assign||function x(G){for(var F,J=1,U=arguments.length;J<U;J++){F=arguments[J];for(var K in F)Object.prototype.hasOwnProperty.call(F,K)&&(G[K]=F[K])}return G},d.apply(this,arguments)};function f(x,G){var F={};for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&G.indexOf(J)<0&&(F[J]=x[J]);if(x!=null&&typeof Object.getOwnPropertySymbols==="function")for(var U=0,J=Object.getOwnPropertySymbols(x);U<J.length;U++)G.indexOf(J[U])<0&&Object.prototype.propertyIsEnumerable.call(x,J[U])&&(F[J[U]]=x[J[U]]);return F}function i(x,G,F,J){var U=arguments.length,K=U<3?G:J===null?J=Object.getOwnPropertyDescriptor(G,F):J,ca;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")K=Reflect.decorate(x,G,F,J);else for(var ba=x.length-1;ba>=0;ba--)(ca=x[ba])&&(K=(U<3?ca(K):U>3?ca(G,F,K):ca(G,F))||K);return U>3&&K&&Object.defineProperty(G,F,K),K}function l(x,G){return function(F,J){G(F,J,x)}}function q(x,G){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(x,G)}function u(x,G,F,J){function U(K){return K instanceof F?K:new F(function(ca){ca(K)})}return new(F||(F=Promise))(function(K,ca){function ba(va){try{$(J.next(va))}catch(ra){ca(ra)}}function Ba(va){try{$(J.throw(va))}catch(ra){ca(ra)}}function $(va){va.done?K(va.value):U(va.value).then(ba,Ba)}$((J=J.apply(x,G||[])).next())})}function v(x,G){var F={label:0,sent:function(){if(K[0]&1)throw K[1];return K[1]},trys:[],ops:[]},J,U,K,ca;return ca={next:ba(0),throw:ba(1),return:ba(2)},typeof Symbol==="function"&&(ca[Symbol.iterator]=function(){return this}),ca;function ba($){return function(va){return Ba([$,va])}}function Ba($){if(J)throw new TypeError("Generator is already executing.");for(;F;)try{if(J=1,U&&(K=$[0]&2?U.return:$[0]?U.throw||((K=U.return)&&K.call(U),0):U.next)&&!(K=K.call(U,$[1])).done)return K;(U=0,K)&&($=[$[0]&2,K.value]);switch($[0]){case 0:case 1:K=$;break;case 4:return F.label++,{value:$[1],done:!1};case 5:F.label++,U=$[1],$=[0];continue;case 7:$=F.ops.pop(),F.trys.pop();continue;default:if(!(K=F.trys,K=K.length>0&&K[K.length-1])&&($[0]===6||$[0]===2)){F=0;continue}if($[0]===3&&(!K||$[1]>K[0]&&$[1]<K[3])){F.label=$[1];break}if($[0]===6&&F.label<K[1]){F.label=K[1],K=$;break}if(K&&F.label<K[2]){F.label=K[2],F.ops.push($);break}K[2]&&F.ops.pop(),F.trys.pop();continue}$=G.call(x,F)}catch(va){$=[6,va],U=0}finally{J=K=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}}function A(x,G,F,J){J===void 0&&(J=F),x[J]=G[F]}function E(x,G){for(var F in x)F!=="default"&&!G.hasOwnProperty(F)&&(G[F]=x[F])}function H(x){var G=typeof Symbol==="function"&&Symbol.iterator,F=G&&x[G],J=0;if(F)return F.call(x);if(x&&typeof x.length==="number")return{next:function(){return x&&J>=x.length&&(x=void 0),{value:x&&x[J++],done:!x}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(x,G){var F=typeof Symbol==="function"&&x[Symbol.iterator];if(!F)return x;var J=F.call(x),U,K=[],ca;try{for(;(G===void 0||G-- >0)&&!(U=J.next()).done;)K.push(U.value)}catch(ba){ca={error:ba}}finally{try{U&&!U.done&&(F=J.return)&&F.call(J)}finally{if(ca)throw ca.error}}return K}function N(){for(var x=[],G=0;G<arguments.length;G++)x=x.concat(R(arguments[G]));return x}function P(){for(var x=0,G=0,F=arguments.length;G<F;G++)x+=arguments[G].length;for(var J=Array(x),U=0,G=0;G<F;G++)for(var K=arguments[G],ca=0,ba=K.length;ca<ba;ca++,U++)J[U]=K[ca];return J}function V(x){return this instanceof V?(this.v=x,this):new V(x)}function Y(x,G,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=F.apply(x,G||[]),U,K=[];return U={},ca("next"),ca("throw"),ca("return"),U[Symbol.asyncIterator]=function(){return this},U;function ca(da){J[da]&&(U[da]=function(na){return new Promise(function(xa,ma){K.push([da,na,xa,ma])>1||ba(da,na)})})}function ba(da,na){try{Ba(J[da](na))}catch(xa){ra(K[0][3],xa)}}function Ba(da){da.value instanceof V?Promise.resolve(da.value.v).then($,va):ra(K[0][2],da)}function $(da){ba("next",da)}function va(da){ba("throw",da)}function ra(da,na){(da(na),K.shift(),K.length)&&ba(K[0][0],K[0][1])}}function fa(x){var G,F;return G={},J("next"),J("throw",function(U){throw U}),J("return"),G[Symbol.iterator]=function(){return this},G;function J(U,K){G[U]=x[U]?function(ca){return(F=!F)?{value:V(x[U](ca)),done:U==="return"}:K?K(ca):ca}:K}}function ga(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=x[Symbol.asyncIterator],F;return G?G.call(x):(x=typeof H==="function"?H(x):x[Symbol.iterator](),F={},J("next"),J("throw"),J("return"),F[Symbol.asyncIterator]=function(){return this},F);function J(K){F[K]=x[K]&&function(ca){return new Promise(function(ba,Ba){ca=x[K](ca),U(ba,Ba,ca.done,ca.value)})}}function U(K,ca,ba,Ba){Promise.resolve(Ba).then(function($){K({value:$,done:ba})},ca)}}function la(x,G){return Object.defineProperty?Object.defineProperty(x,"raw",{value:G}):x.raw=G,x}function ia(x){if(x&&x.__esModule)return x;var G={};if(x!=null)for(var F in x)Object.hasOwnProperty.call(x,F)&&(G[F]=x[F]);return G.default=x,G}function oa(x){return x&&x.__esModule?x:{default:x}}function pa(x,G){if(!G.has(x))throw new TypeError("attempted to get private field on non-instance");return G.get(x)}function ja(x,G,F){if(!G.has(x))throw new TypeError("attempted to set private field on non-instance");return G.set(x,F),F}});var Rp=Ec(I=>{_d(I,{__assign:()=>d,__asyncDelegator:()=>fa,__asyncGenerator:()=>Y,__asyncValues:()=>ga,__await:()=>V,__awaiter:()=>u,__classPrivateFieldGet:()=>pa,__classPrivateFieldSet:()=>ja,__createBinding:()=>A,__decorate:()=>i,__exportStar:()=>E,__extends:()=>c,__generator:()=>v,__importDefault:()=>oa,__importStar:()=>ia,__makeTemplateObject:()=>la,__metadata:()=>q,__param:()=>l,__read:()=>R,__rest:()=>f,__spread:()=>N,__spreadArrays:()=>P,__values:()=>H});var a=function(x,G){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,J){F.__proto__=J}||function(F,J){for(var U in J)J.hasOwnProperty(U)&&(F[U]=J[U])},a(x,G)};function c(x,G){a(x,G);function F(){this.constructor=x}x.prototype=G===null?Object.create(G):(F.prototype=G.prototype,new F())}var d=function(){return d=Object.assign||function x(G){for(var F,J=1,U=arguments.length;J<U;J++){F=arguments[J];for(var K in F)Object.prototype.hasOwnProperty.call(F,K)&&(G[K]=F[K])}return G},d.apply(this,arguments)};function f(x,G){var F={};for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&G.indexOf(J)<0&&(F[J]=x[J]);if(x!=null&&typeof Object.getOwnPropertySymbols==="function")for(var U=0,J=Object.getOwnPropertySymbols(x);U<J.length;U++)G.indexOf(J[U])<0&&Object.prototype.propertyIsEnumerable.call(x,J[U])&&(F[J[U]]=x[J[U]]);return F}function i(x,G,F,J){var U=arguments.length,K=U<3?G:J===null?J=Object.getOwnPropertyDescriptor(G,F):J,ca;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")K=Reflect.decorate(x,G,F,J);else for(var ba=x.length-1;ba>=0;ba--)(ca=x[ba])&&(K=(U<3?ca(K):U>3?ca(G,F,K):ca(G,F))||K);return U>3&&K&&Object.defineProperty(G,F,K),K}function l(x,G){return function(F,J){G(F,J,x)}}function q(x,G){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(x,G)}function u(x,G,F,J){function U(K){return K instanceof F?K:new F(function(ca){ca(K)})}return new(F||(F=Promise))(function(K,ca){function ba(va){try{$(J.next(va))}catch(ra){ca(ra)}}function Ba(va){try{$(J.throw(va))}catch(ra){ca(ra)}}function $(va){va.done?K(va.value):U(va.value).then(ba,Ba)}$((J=J.apply(x,G||[])).next())})}function v(x,G){var F={label:0,sent:function(){if(K[0]&1)throw K[1];return K[1]},trys:[],ops:[]},J,U,K,ca;return ca={next:ba(0),throw:ba(1),return:ba(2)},typeof Symbol==="function"&&(ca[Symbol.iterator]=function(){return this}),ca;function ba($){return function(va){return Ba([$,va])}}function Ba($){if(J)throw new TypeError("Generator is already executing.");for(;F;)try{if(J=1,U&&(K=$[0]&2?U.return:$[0]?U.throw||((K=U.return)&&K.call(U),0):U.next)&&!(K=K.call(U,$[1])).done)return K;(U=0,K)&&($=[$[0]&2,K.value]);switch($[0]){case 0:case 1:K=$;break;case 4:return F.label++,{value:$[1],done:!1};case 5:F.label++,U=$[1],$=[0];continue;case 7:$=F.ops.pop(),F.trys.pop();continue;default:if(!(K=F.trys,K=K.length>0&&K[K.length-1])&&($[0]===6||$[0]===2)){F=0;continue}if($[0]===3&&(!K||$[1]>K[0]&&$[1]<K[3])){F.label=$[1];break}if($[0]===6&&F.label<K[1]){F.label=K[1],K=$;break}if(K&&F.label<K[2]){F.label=K[2],F.ops.push($);break}K[2]&&F.ops.pop(),F.trys.pop();continue}$=G.call(x,F)}catch(va){$=[6,va],U=0}finally{J=K=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}}function A(x,G,F,J){J===void 0&&(J=F),x[J]=G[F]}function E(x,G){for(var F in x)F!=="default"&&!G.hasOwnProperty(F)&&(G[F]=x[F])}function H(x){var G=typeof Symbol==="function"&&Symbol.iterator,F=G&&x[G],J=0;if(F)return F.call(x);if(x&&typeof x.length==="number")return{next:function(){return x&&J>=x.length&&(x=void 0),{value:x&&x[J++],done:!x}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(x,G){var F=typeof Symbol==="function"&&x[Symbol.iterator];if(!F)return x;var J=F.call(x),U,K=[],ca;try{for(;(G===void 0||G-- >0)&&!(U=J.next()).done;)K.push(U.value)}catch(ba){ca={error:ba}}finally{try{U&&!U.done&&(F=J.return)&&F.call(J)}finally{if(ca)throw ca.error}}return K}function N(){for(var x=[],G=0;G<arguments.length;G++)x=x.concat(R(arguments[G]));return x}function P(){for(var x=0,G=0,F=arguments.length;G<F;G++)x+=arguments[G].length;for(var J=Array(x),U=0,G=0;G<F;G++)for(var K=arguments[G],ca=0,ba=K.length;ca<ba;ca++,U++)J[U]=K[ca];return J}function V(x){return this instanceof V?(this.v=x,this):new V(x)}function Y(x,G,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=F.apply(x,G||[]),U,K=[];return U={},ca("next"),ca("throw"),ca("return"),U[Symbol.asyncIterator]=function(){return this},U;function ca(da){J[da]&&(U[da]=function(na){return new Promise(function(xa,ma){K.push([da,na,xa,ma])>1||ba(da,na)})})}function ba(da,na){try{Ba(J[da](na))}catch(xa){ra(K[0][3],xa)}}function Ba(da){da.value instanceof V?Promise.resolve(da.value.v).then($,va):ra(K[0][2],da)}function $(da){ba("next",da)}function va(da){ba("throw",da)}function ra(da,na){(da(na),K.shift(),K.length)&&ba(K[0][0],K[0][1])}}function fa(x){var G,F;return G={},J("next"),J("throw",function(U){throw U}),J("return"),G[Symbol.iterator]=function(){return this},G;function J(U,K){G[U]=x[U]?function(ca){return(F=!F)?{value:V(x[U](ca)),done:U==="return"}:K?K(ca):ca}:K}}function ga(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=x[Symbol.asyncIterator],F;return G?G.call(x):(x=typeof H==="function"?H(x):x[Symbol.iterator](),F={},J("next"),J("throw"),J("return"),F[Symbol.asyncIterator]=function(){return this},F);function J(K){F[K]=x[K]&&function(ca){return new Promise(function(ba,Ba){ca=x[K](ca),U(ba,Ba,ca.done,ca.value)})}}function U(K,ca,ba,Ba){Promise.resolve(Ba).then(function($){K({value:$,done:ba})},ca)}}function la(x,G){return Object.defineProperty?Object.defineProperty(x,"raw",{value:G}):x.raw=G,x}function ia(x){if(x&&x.__esModule)return x;var G={};if(x!=null)for(var F in x)Object.hasOwnProperty.call(x,F)&&(G[F]=x[F]);return G.default=x,G}function oa(x){return x&&x.__esModule?x:{default:x}}function pa(x,G){if(!G.has(x))throw new TypeError("attempted to get private field on non-instance");return G.get(x)}function ja(x,G,F){if(!G.has(x))throw new TypeError("attempted to set private field on non-instance");return G.set(x,F),F}});var Tk=Ec(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});var a=Rp();var c={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var d=function(X,L){if(!X)throw f(L)},f=function(X){return new Error("Firebase Database ("+c.SDK_VERSION+") INTERNAL ASSERT FAILED: "+X)};var i=function(X){for(var L=[],_=0,aa=0;aa<X.length;aa++){var S=X.charCodeAt(aa);S<128?L[_++]=S:S<2048?(L[_++]=S>>6|192,L[_++]=S&63|128):(S&64512)===55296&&aa+1<X.length&&(X.charCodeAt(aa+1)&64512)===56320?(S=65536+((S&1023)<<10)+(X.charCodeAt(++aa)&1023),L[_++]=S>>18|240,L[_++]=S>>12&63|128,L[_++]=S>>6&63|128,L[_++]=S&63|128):(L[_++]=S>>12|224,L[_++]=S>>6&63|128,L[_++]=S&63|128)}return L},l=function(X){for(var L=[],_=0,aa=0;_<X.length;){var S=X[_++];if(S<128)L[aa++]=String.fromCharCode(S);else if(S>191&&S<224){var za=X[_++];L[aa++]=String.fromCharCode((S&31)<<6|za&63)}else if(S>239&&S<365){var za=X[_++],Ra=X[_++],pb=X[_++],Ta=((S&7)<<18|(za&63)<<12|(Ra&63)<<6|pb&63)-65536;L[aa++]=String.fromCharCode(55296+(Ta>>10)),L[aa++]=String.fromCharCode(56320+(Ta&1023))}else{var za=X[_++],Ra=X[_++];L[aa++]=String.fromCharCode((S&15)<<12|(za&63)<<6|Ra&63)}}return L.join("")},q={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob==="function",encodeByteArray:function(X,L){if(!Array.isArray(X))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var _=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,aa=[],S=0;S<X.length;S+=3){var za=X[S],Ra=S+1<X.length,pb=Ra?X[S+1]:0,Ta=S+2<X.length,lb=Ta?X[S+2]:0,Mb=za>>2,Db=(za&3)<<4|pb>>4,Ka=(pb&15)<<2|lb>>6,td=lb&63;Ta||(td=64,Ra||(Ka=64)),aa.push(_[Mb],_[Db],_[Ka],_[td])}return aa.join("")},encodeString:function(X,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(X):this.encodeByteArray(i(X),L)},decodeString:function(X,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(X):l(this.decodeStringToByteArray(X,L))},decodeStringToByteArray:function(X,L){this.init_();for(var _=L?this.charToByteMapWebSafe_:this.charToByteMap_,aa=[],S=0;S<X.length;){var za=_[X.charAt(S++)],Ra=S<X.length,pb=Ra?_[X.charAt(S)]:0;++S;var Ta=S<X.length,lb=Ta?_[X.charAt(S)]:64;++S;var Mb=S<X.length,Db=Mb?_[X.charAt(S)]:64;++S;if(za==null||pb==null||lb==null||Db==null)throw Error();var Ka=za<<2|pb>>4;aa.push(Ka);if(lb!==64){var td=pb<<4&240|lb>>2;aa.push(td);if(Db!==64){var Mf=lb<<6&192|Db;aa.push(Mf)}}}return aa},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var X=0;X<this.ENCODED_VALS.length;X++)this.byteToCharMap_[X]=this.ENCODED_VALS.charAt(X),this.charToByteMap_[this.byteToCharMap_[X]]=X,this.byteToCharMapWebSafe_[X]=this.ENCODED_VALS_WEBSAFE.charAt(X),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[X]]=X,X>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(X)]=X,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(X)]=X)}}},u=function(X){var L=i(X);return q.encodeByteArray(L,!0)},v=function(X){try{return q.decodeString(X,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function A(X){return E(void 0,X)}function E(X,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:var _=L;return new Date(_.getTime());case Object:X===void 0&&(X={});break;case Array:X=[];break;default:return L}for(var aa in L){if(!L.hasOwnProperty(aa))continue;X[aa]=E(X[aa],L[aa])}return X}var H=function(){function X(){var L=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(_,aa){L.resolve=_,L.reject=aa})}return X.prototype.wrapCallback=function(L){var _=this;return function(aa,S){aa?_.reject(aa):_.resolve(S),typeof L==="function"&&(_.promise.catch(function(){}),L.length===1?L(aa):L(aa,S))}},X}();function R(){return typeof navigator!=="undefined"&&typeof navigator.userAgent==="string"?navigator.userAgent:""}function N(){return typeof window!=="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(R())}function P(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(X){return!1}}function V(){return typeof self==="object"&&self.self===self}function Y(){var X=typeof chrome==="object"?chrome.runtime:typeof browser==="object"?browser.runtime:void 0;return typeof X==="object"&&X.id!==void 0}function fa(){return typeof navigator==="object"&&navigator.product==="ReactNative"}function ga(){return R().indexOf("Electron/")>=0}function la(){var X=R();return X.indexOf("MSIE ")>=0||X.indexOf("Trident/")>=0}function ia(){return R().indexOf("MSAppHost/")>=0}function oa(){return c.NODE_CLIENT===!0||c.NODE_ADMIN===!0}function pa(){return!P()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ja(){return"indexedDB"in self&&indexedDB!=null}function I(){return new Promise(function(X,L){try{var _=!0,aa="validate-browser-context-for-indexeddb-analytics-module",S=window.indexedDB.open(aa);S.onsuccess=function(){S.result.close(),_||window.indexedDB.deleteDatabase(aa),X(!0)},S.onupgradeneeded=function(){_=!1},S.onerror=function(){var za;L(((za=S.error)===null||za===void 0?void 0:za.message)||"")}}catch(za){L(za)}})}function O(){return!navigator||!navigator.cookieEnabled?!1:!0}var x="FirebaseError",G=function(X){a.__extends(L,X);function L(_,aa){var S=X.call(this,aa)||this;return S.code=_,S.name=x,Object.setPrototypeOf(S,L.prototype),Error.captureStackTrace&&Error.captureStackTrace(S,F.prototype.create),S}return L}(Error),F=function(){function X(L,_,aa){this.service=L,this.serviceName=_,this.errors=aa}return X.prototype.create=function(L){for(var _=[],aa=1;aa<arguments.length;aa++)_[aa-1]=arguments[aa];for(var S=_[0]||{},za=this.service+"/"+L,Ra=this.errors[L],pb=Ra?J(Ra,S):"Error",Ta=this.serviceName+": "+pb+" ("+za+").",lb=new G(za,Ta),Mb=0,Db=Object.keys(S);Mb<Db.length;Mb++){var Ka=Db[Mb];Ka.slice(-1)!=="_"&&(Ka in lb&&console.warn('Overwriting FirebaseError base field "'+Ka+'" can cause unexpected behavior.'),lb[Ka]=S[Ka])}return lb},X}();function J(X,L){return X.replace(U,function(_,aa){var S=L[aa];return S!=null?String(S):"<"+aa+"?>"})}var U=/\{\$([^}]+)}/g;function K(X){return JSON.parse(X)}function ca(X){return JSON.stringify(X)}var ba=function(X){var L={},_={},aa={},S="";try{var za=X.split(".");L=K(v(za[0])||""),_=K(v(za[1])||""),S=za[2],aa=_.d||{},delete _.d}catch(Ra){}return{header:L,claims:_,data:aa,signature:S}},Ba=function(X){var L=ba(X).claims,_=Math.floor(new Date().getTime()/1e3),aa=0,S=0;return typeof L==="object"&&(L.hasOwnProperty("nbf")?aa=L.nbf:L.hasOwnProperty("iat")&&(aa=L.iat),L.hasOwnProperty("exp")?S=L.exp:S=aa+86400),!!_&&!!aa&&!!S&&_>=aa&&_<=S},$=function(X){var L=ba(X).claims;return typeof L==="object"&&L.hasOwnProperty("iat")?L.iat:null},va=function(X){var L=ba(X),_=L.claims;return!!_&&typeof _==="object"&&_.hasOwnProperty("iat")},ra=function(X){var L=ba(X).claims;return typeof L==="object"&&L.admin===!0};function da(X,L){return Object.prototype.hasOwnProperty.call(X,L)}function na(X,L){return Object.prototype.hasOwnProperty.call(X,L)?X[L]:void 0}function xa(X){for(var L in X)if(Object.prototype.hasOwnProperty.call(X,L))return!1;return!0}function ma(X,L,_){var aa={};for(var S in X)Object.prototype.hasOwnProperty.call(X,S)&&(aa[S]=L.call(_,X[S],S,X));return aa}function eb(X){for(var L=[],_=function(Ta,lb){Array.isArray(lb)?lb.forEach(function(Mb){L.push(encodeURIComponent(Ta)+"="+encodeURIComponent(Mb))}):L.push(encodeURIComponent(Ta)+"="+encodeURIComponent(lb))},aa=0,S=Object.entries(X);aa<S.length;aa++){var za=S[aa],Ra=za[0],pb=za[1];_(Ra,pb)}return L.length?"&"+L.join("&"):""}function gb(X){var L={},_=X.replace(/^\?/,"").split("&");return _.forEach(function(aa){if(aa){var S=aa.split("=");L[S[0]]=S[1]}}),L}var hb=function(){function X(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var L=1;L<this.blockSize;++L)this.pad_[L]=0;this.reset()}return X.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},X.prototype.compress_=function(L,_){_||(_=0);var aa=this.W_;if(typeof L==="string")for(var S=0;S<16;S++)aa[S]=L.charCodeAt(_)<<24|L.charCodeAt(_+1)<<16|L.charCodeAt(_+2)<<8|L.charCodeAt(_+3),_+=4;else for(var S=0;S<16;S++)aa[S]=L[_]<<24|L[_+1]<<16|L[_+2]<<8|L[_+3],_+=4;for(var S=16;S<80;S++){var za=aa[S-3]^aa[S-8]^aa[S-14]^aa[S-16];aa[S]=(za<<1|za>>>31)&4294967295}for(var Ra=this.chain_[0],pb=this.chain_[1],Ta=this.chain_[2],lb=this.chain_[3],Mb=this.chain_[4],Db,Ka,S=0;S<80;S++){S<40?S<20?(Db=lb^pb&(Ta^lb),Ka=1518500249):(Db=pb^Ta^lb,Ka=1859775393):S<60?(Db=pb&Ta|lb&(pb|Ta),Ka=2400959708):(Db=pb^Ta^lb,Ka=3395469782);var za=(Ra<<5|Ra>>>27)+Db+Mb+Ka+aa[S]&4294967295;Mb=lb,lb=Ta,Ta=(pb<<30|pb>>>2)&4294967295,pb=Ra,Ra=za}this.chain_[0]=this.chain_[0]+Ra&4294967295,this.chain_[1]=this.chain_[1]+pb&4294967295,this.chain_[2]=this.chain_[2]+Ta&4294967295,this.chain_[3]=this.chain_[3]+lb&4294967295,this.chain_[4]=this.chain_[4]+Mb&4294967295},X.prototype.update=function(L,_){if(L==null)return;_===void 0&&(_=L.length);for(var aa=_-this.blockSize,S=0,za=this.buf_,Ra=this.inbuf_;S<_;){if(Ra===0)for(;S<=aa;)this.compress_(L,S),S+=this.blockSize;if(typeof L==="string")for(;S<_;){za[Ra]=L.charCodeAt(S),++Ra,++S;if(Ra===this.blockSize){this.compress_(za),Ra=0;break}}else for(;S<_;){za[Ra]=L[S],++Ra,++S;if(Ra===this.blockSize){this.compress_(za),Ra=0;break}}}this.inbuf_=Ra,this.total_+=_},X.prototype.digest=function(){var L=[],_=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var aa=this.blockSize-1;aa>=56;aa--)this.buf_[aa]=_&255,_/=256;this.compress_(this.buf_);for(var S=0,aa=0;aa<5;aa++)for(var za=24;za>=0;za-=8)L[S]=this.chain_[aa]>>za&255,++S;return L},X}();function Ca(X,L){var _=new Ia(X,L);return _.subscribe.bind(_)}var Ia=function(){function X(L,_){var aa=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=_,this.task.then(function(){L(aa)}).catch(function(S){aa.error(S)})}return X.prototype.next=function(L){this.forEachObserver(function(_){_.next(L)})},X.prototype.error=function(L){this.forEachObserver(function(_){_.error(L)}),this.close(L)},X.prototype.complete=function(){this.forEachObserver(function(L){L.complete()}),this.close()},X.prototype.subscribe=function(L,_,aa){var S=this,za;if(L===void 0&&_===void 0&&aa===void 0)throw new Error("Missing Observer.");fb(L,["next","error","complete"])?za=L:za={next:L,error:_,complete:aa},za.next===void 0&&(za.next=qa),za.error===void 0&&(za.error=qa),za.complete===void 0&&(za.complete=qa);var Ra=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{S.finalError?za.error(S.finalError):za.complete()}catch(pb){}return}),this.observers.push(za),Ra},X.prototype.unsubscribeOne=function(L){if(this.observers===void 0||this.observers[L]===void 0)return;delete this.observers[L],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this)},X.prototype.forEachObserver=function(L){if(this.finalized)return;for(var _=0;_<this.observers.length;_++)this.sendOne(_,L)},X.prototype.sendOne=function(L,_){var aa=this;this.task.then(function(){if(aa.observers!==void 0&&aa.observers[L]!==void 0)try{_(aa.observers[L])}catch(S){typeof console!=="undefined"&&console.error&&console.error(S)}})},X.prototype.close=function(L){var _=this;if(this.finalized)return;this.finalized=!0,L!==void 0&&(this.finalError=L),this.task.then(function(){_.observers=void 0,_.onNoObservers=void 0})},X}();function Za(X,L){return function(){for(var _=[],aa=0;aa<arguments.length;aa++)_[aa]=arguments[aa];Promise.resolve(!0).then(function(){X.apply(void 0,_)}).catch(function(S){L&&L(S)})}}function fb(X,L){if(typeof X!=="object"||X===null)return!1;for(var _=0,aa=L;_<aa.length;_++){var S=aa[_];if(S in X&&typeof X[S]==="function")return!0}return!1}function qa(){}var ya=function(X,L,_,aa){var S;aa<L?S="at least "+L:aa>_&&(S=_===0?"none":"no more than "+_);if(S){var za=X+" failed: Was called with "+aa+(aa===1?" argument.":" arguments.")+" Expects "+S+".";throw new Error(za)}};function La(X,L,_){var aa="";switch(L){case 1:aa=_?"first":"First";break;case 2:aa=_?"second":"Second";break;case 3:aa=_?"third":"Third";break;case 4:aa=_?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var S=X+" failed: ";return S+=aa+" argument ",S}function ta(X,L,_,aa){if(aa&&!_)return;if(typeof _!=="string")throw new Error(La(X,L,aa)+"must be a valid firebase namespace.")}function Ea(X,L,_,aa){if(aa&&!_)return;if(typeof _!=="function")throw new Error(La(X,L,aa)+"must be a valid function.")}function cb(X,L,_,aa){if(aa&&!_)return;if(typeof _!=="object"||_===null)throw new Error(La(X,L,aa)+"must be a valid context object.")}var Da=function(X){for(var L=[],_=0,aa=0;aa<X.length;aa++){var S=X.charCodeAt(aa);if(S>=55296&&S<=56319){var za=S-55296;aa++,d(aa<X.length,"Surrogate pair missing trail surrogate.");var Ra=X.charCodeAt(aa)-56320;S=65536+(za<<10)+Ra}S<128?L[_++]=S:S<2048?(L[_++]=S>>6|192,L[_++]=S&63|128):S<65536?(L[_++]=S>>12|224,L[_++]=S>>6&63|128,L[_++]=S&63|128):(L[_++]=S>>18|240,L[_++]=S>>12&63|128,L[_++]=S>>6&63|128,L[_++]=S&63|128)}return L},Sa=function(X){for(var L=0,_=0;_<X.length;_++){var aa=X.charCodeAt(_);aa<128?L++:aa<2048?L+=2:aa>=55296&&aa<=56319?(L+=4,_++):L+=3}return L};var Ja=1e3,Va=2,jb=4*60*60*1e3,ub=.5;function ob(X,L,_){L===void 0&&(L=Ja),_===void 0&&(_=Va);var aa=L*Math.pow(_,X),S=Math.round(ub*aa*(Math.random()-.5)*2);return Math.min(jb,aa+S)}sa.CONSTANTS=c;sa.Deferred=H;sa.ErrorFactory=F;sa.FirebaseError=G;sa.MAX_VALUE_MILLIS=jb;sa.RANDOM_FACTOR=ub;sa.Sha1=hb;sa.areCookiesEnabled=O;sa.assert=d;sa.assertionError=f;sa.async=Za;sa.base64=q;sa.base64Decode=v;sa.base64Encode=u;sa.calculateBackoffMillis=ob;sa.contains=da;sa.createSubscribe=Ca;sa.decode=ba;sa.deepCopy=A;sa.deepExtend=E;sa.errorPrefix=La;sa.getUA=R;sa.isAdmin=ra;sa.isBrowser=V;sa.isBrowserExtension=Y;sa.isElectron=ga;sa.isEmpty=xa;sa.isIE=la;sa.isIndexedDBAvailable=ja;sa.isMobileCordova=N;sa.isNode=P;sa.isNodeSdk=oa;sa.isReactNative=fa;sa.isSafari=pa;sa.isUWP=ia;sa.isValidFormat=va;sa.isValidTimestamp=Ba;sa.issuedAtTime=$;sa.jsonEval=K;sa.map=ma;sa.querystring=eb;sa.querystringDecode=gb;sa.safeGet=na;sa.stringLength=Sa;sa.stringToByteArray=Da;sa.stringify=ca;sa.validateArgCount=ya;sa.validateCallback=Ea;sa.validateContextObject=cb;sa.validateIndexedDBOpenable=I;sa.validateNamespace=ta});var Pp=Ec(I=>{_d(I,{__assign:()=>d,__asyncDelegator:()=>fa,__asyncGenerator:()=>Y,__asyncValues:()=>ga,__await:()=>V,__awaiter:()=>u,__classPrivateFieldGet:()=>pa,__classPrivateFieldSet:()=>ja,__createBinding:()=>A,__decorate:()=>i,__exportStar:()=>E,__extends:()=>c,__generator:()=>v,__importDefault:()=>oa,__importStar:()=>ia,__makeTemplateObject:()=>la,__metadata:()=>q,__param:()=>l,__read:()=>R,__rest:()=>f,__spread:()=>N,__spreadArrays:()=>P,__values:()=>H});var a=function(x,G){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,J){F.__proto__=J}||function(F,J){for(var U in J)J.hasOwnProperty(U)&&(F[U]=J[U])},a(x,G)};function c(x,G){a(x,G);function F(){this.constructor=x}x.prototype=G===null?Object.create(G):(F.prototype=G.prototype,new F())}var d=function(){return d=Object.assign||function x(G){for(var F,J=1,U=arguments.length;J<U;J++){F=arguments[J];for(var K in F)Object.prototype.hasOwnProperty.call(F,K)&&(G[K]=F[K])}return G},d.apply(this,arguments)};function f(x,G){var F={};for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&G.indexOf(J)<0&&(F[J]=x[J]);if(x!=null&&typeof Object.getOwnPropertySymbols==="function")for(var U=0,J=Object.getOwnPropertySymbols(x);U<J.length;U++)G.indexOf(J[U])<0&&Object.prototype.propertyIsEnumerable.call(x,J[U])&&(F[J[U]]=x[J[U]]);return F}function i(x,G,F,J){var U=arguments.length,K=U<3?G:J===null?J=Object.getOwnPropertyDescriptor(G,F):J,ca;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")K=Reflect.decorate(x,G,F,J);else for(var ba=x.length-1;ba>=0;ba--)(ca=x[ba])&&(K=(U<3?ca(K):U>3?ca(G,F,K):ca(G,F))||K);return U>3&&K&&Object.defineProperty(G,F,K),K}function l(x,G){return function(F,J){G(F,J,x)}}function q(x,G){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(x,G)}function u(x,G,F,J){function U(K){return K instanceof F?K:new F(function(ca){ca(K)})}return new(F||(F=Promise))(function(K,ca){function ba(va){try{$(J.next(va))}catch(ra){ca(ra)}}function Ba(va){try{$(J.throw(va))}catch(ra){ca(ra)}}function $(va){va.done?K(va.value):U(va.value).then(ba,Ba)}$((J=J.apply(x,G||[])).next())})}function v(x,G){var F={label:0,sent:function(){if(K[0]&1)throw K[1];return K[1]},trys:[],ops:[]},J,U,K,ca;return ca={next:ba(0),throw:ba(1),return:ba(2)},typeof Symbol==="function"&&(ca[Symbol.iterator]=function(){return this}),ca;function ba($){return function(va){return Ba([$,va])}}function Ba($){if(J)throw new TypeError("Generator is already executing.");for(;F;)try{if(J=1,U&&(K=$[0]&2?U.return:$[0]?U.throw||((K=U.return)&&K.call(U),0):U.next)&&!(K=K.call(U,$[1])).done)return K;(U=0,K)&&($=[$[0]&2,K.value]);switch($[0]){case 0:case 1:K=$;break;case 4:return F.label++,{value:$[1],done:!1};case 5:F.label++,U=$[1],$=[0];continue;case 7:$=F.ops.pop(),F.trys.pop();continue;default:if(!(K=F.trys,K=K.length>0&&K[K.length-1])&&($[0]===6||$[0]===2)){F=0;continue}if($[0]===3&&(!K||$[1]>K[0]&&$[1]<K[3])){F.label=$[1];break}if($[0]===6&&F.label<K[1]){F.label=K[1],K=$;break}if(K&&F.label<K[2]){F.label=K[2],F.ops.push($);break}K[2]&&F.ops.pop(),F.trys.pop();continue}$=G.call(x,F)}catch(va){$=[6,va],U=0}finally{J=K=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}}function A(x,G,F,J){J===void 0&&(J=F),x[J]=G[F]}function E(x,G){for(var F in x)F!=="default"&&!G.hasOwnProperty(F)&&(G[F]=x[F])}function H(x){var G=typeof Symbol==="function"&&Symbol.iterator,F=G&&x[G],J=0;if(F)return F.call(x);if(x&&typeof x.length==="number")return{next:function(){return x&&J>=x.length&&(x=void 0),{value:x&&x[J++],done:!x}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(x,G){var F=typeof Symbol==="function"&&x[Symbol.iterator];if(!F)return x;var J=F.call(x),U,K=[],ca;try{for(;(G===void 0||G-- >0)&&!(U=J.next()).done;)K.push(U.value)}catch(ba){ca={error:ba}}finally{try{U&&!U.done&&(F=J.return)&&F.call(J)}finally{if(ca)throw ca.error}}return K}function N(){for(var x=[],G=0;G<arguments.length;G++)x=x.concat(R(arguments[G]));return x}function P(){for(var x=0,G=0,F=arguments.length;G<F;G++)x+=arguments[G].length;for(var J=Array(x),U=0,G=0;G<F;G++)for(var K=arguments[G],ca=0,ba=K.length;ca<ba;ca++,U++)J[U]=K[ca];return J}function V(x){return this instanceof V?(this.v=x,this):new V(x)}function Y(x,G,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=F.apply(x,G||[]),U,K=[];return U={},ca("next"),ca("throw"),ca("return"),U[Symbol.asyncIterator]=function(){return this},U;function ca(da){J[da]&&(U[da]=function(na){return new Promise(function(xa,ma){K.push([da,na,xa,ma])>1||ba(da,na)})})}function ba(da,na){try{Ba(J[da](na))}catch(xa){ra(K[0][3],xa)}}function Ba(da){da.value instanceof V?Promise.resolve(da.value.v).then($,va):ra(K[0][2],da)}function $(da){ba("next",da)}function va(da){ba("throw",da)}function ra(da,na){(da(na),K.shift(),K.length)&&ba(K[0][0],K[0][1])}}function fa(x){var G,F;return G={},J("next"),J("throw",function(U){throw U}),J("return"),G[Symbol.iterator]=function(){return this},G;function J(U,K){G[U]=x[U]?function(ca){return(F=!F)?{value:V(x[U](ca)),done:U==="return"}:K?K(ca):ca}:K}}function ga(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=x[Symbol.asyncIterator],F;return G?G.call(x):(x=typeof H==="function"?H(x):x[Symbol.iterator](),F={},J("next"),J("throw"),J("return"),F[Symbol.asyncIterator]=function(){return this},F);function J(K){F[K]=x[K]&&function(ca){return new Promise(function(ba,Ba){ca=x[K](ca),U(ba,Ba,ca.done,ca.value)})}}function U(K,ca,ba,Ba){Promise.resolve(Ba).then(function($){K({value:$,done:ba})},ca)}}function la(x,G){return Object.defineProperty?Object.defineProperty(x,"raw",{value:G}):x.raw=G,x}function ia(x){if(x&&x.__esModule)return x;var G={};if(x!=null)for(var F in x)Object.hasOwnProperty.call(x,F)&&(G[F]=x[F]);return G.default=x,G}function oa(x){return x&&x.__esModule?x:{default:x}}function pa(x,G){if(!G.has(x))throw new TypeError("attempted to get private field on non-instance");return G.get(x)}function ja(x,G,F){if(!G.has(x))throw new TypeError("attempted to set private field on non-instance");return G.set(x,F),F}});var Op=Ec(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});var a=Pp(),c=Tk(),d=function(){function E(H,R,N){this.name=H,this.instanceFactory=R,this.type=N,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return E.prototype.setInstantiationMode=function(H){return this.instantiationMode=H,this},E.prototype.setMultipleInstances=function(H){return this.multipleInstances=H,this},E.prototype.setServiceProps=function(H){return this.serviceProps=H,this},E}();var f="[DEFAULT]";var i=function(){function E(H,R){this.name=H,this.container=R,this.component=null,this.instances=new Map(),this.instancesDeferred=new Map()}return E.prototype.get=function(H){H===void 0&&(H=f);var R=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(R)){var N=new c.Deferred();this.instancesDeferred.set(R,N);try{var P=this.getOrInitializeService(R);P&&N.resolve(P)}catch(V){}}return this.instancesDeferred.get(R).promise},E.prototype.getImmediate=function(H){var R=a.__assign({identifier:f,optional:!1},H),N=R.identifier,P=R.optional,V=this.normalizeInstanceIdentifier(N);try{var Y=this.getOrInitializeService(V);if(!Y){if(P)return null;throw Error("Service "+this.name+" is not available")}return Y}catch(fa){if(P)return null;throw fa}},E.prototype.getComponent=function(){return this.component},E.prototype.setComponent=function(H){var R,N;if(H.name!==this.name)throw Error("Mismatching Component "+H.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");this.component=H;if(q(H))try{this.getOrInitializeService(f)}catch(oa){}try{for(var P=a.__values(this.instancesDeferred.entries()),V=P.next();!V.done;V=P.next()){var Y=a.__read(V.value,2),fa=Y[0],ga=Y[1],la=this.normalizeInstanceIdentifier(fa);try{var ia=this.getOrInitializeService(la);ga.resolve(ia)}catch(oa){}}}catch(oa){R={error:oa}}finally{try{V&&!V.done&&(N=P.return)&&N.call(P)}finally{if(R)throw R.error}}},E.prototype.clearInstance=function(H){H===void 0&&(H=f),this.instancesDeferred.delete(H),this.instances.delete(H)},E.prototype.delete=function(){return a.__awaiter(this,void 0,void 0,function(){var H;return a.__generator(this,function(R){switch(R.label){case 0:return H=Array.from(this.instances.values()),[4,Promise.all(a.__spread(H.filter(function(N){return"INTERNAL"in N}).map(function(N){return N.INTERNAL.delete()}),H.filter(function(N){return"_delete"in N}).map(function(N){return N._delete()})))];case 1:return R.sent(),[2]}})})},E.prototype.isComponentSet=function(){return this.component!=null},E.prototype.getOrInitializeService=function(H){var R=this.instances.get(H);return!R&&this.component&&(R=this.component.instanceFactory(this.container,l(H)),this.instances.set(H,R)),R||null},E.prototype.normalizeInstanceIdentifier=function(H){return this.component?this.component.multipleInstances?H:f:H},E}();function l(E){return E===f?void 0:E}function q(E){return E.instantiationMode==="EAGER"}var u=function(){function E(H){this.name=H,this.providers=new Map()}return E.prototype.addComponent=function(H){var R=this.getProvider(H.name);if(R.isComponentSet())throw new Error("Component "+H.name+" has already been registered with "+this.name);R.setComponent(H)},E.prototype.addOrOverwriteComponent=function(H){var R=this.getProvider(H.name);R.isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)},E.prototype.getProvider=function(H){if(this.providers.has(H))return this.providers.get(H);var R=new i(H,this);return this.providers.set(H,R),R},E.prototype.getProviders=function(){return Array.from(this.providers.values())},E}();v.Component=d;v.ComponentContainer=u;v.Provider=i});var Qp=Ec(H=>{_d(H,{LogLevel:()=>f,Logger:()=>v,setLogLevel:()=>A,setUserLogHandler:()=>E});function a(){for(var N=0,P=0,V=arguments.length;P<V;P++)N+=arguments[P].length;for(var Y=Array(N),fa=0,P=0;P<V;P++)for(var ga=arguments[P],la=0,ia=ga.length;la<ia;la++,fa++)Y[fa]=ga[la];return Y}var c,d=[],f;(function(N){N[N.DEBUG=0]="DEBUG",N[N.VERBOSE=1]="VERBOSE",N[N.INFO=2]="INFO",N[N.WARN=3]="WARN",N[N.ERROR=4]="ERROR",N[N.SILENT=5]="SILENT"})(f||(f={}));var i={debug:f.DEBUG,verbose:f.VERBOSE,info:f.INFO,warn:f.WARN,error:f.ERROR,silent:f.SILENT},l=f.INFO,q=(c={},c[f.DEBUG]="log",c[f.VERBOSE]="log",c[f.INFO]="info",c[f.WARN]="warn",c[f.ERROR]="error",c),u=function(N,P){for(var V=[],Y=2;Y<arguments.length;Y++)V[Y-2]=arguments[Y];if(P<N.logLevel)return;var fa=new Date().toISOString(),ga=q[P];if(ga)console[ga].apply(console,a(["["+fa+"]  "+N.name+":"],V));else throw new Error("Attempted to log a message with an invalid logType (value: "+P+")")},v=function(){function N(P){this.name=P,this._logLevel=l,this._logHandler=u,this._userLogHandler=null,d.push(this)}return Object.defineProperty(N.prototype,"logLevel",{get:function(){return this._logLevel},set:function(P){if(!(P in f))throw new TypeError('Invalid value "'+P+'" assigned to `logLevel`');this._logLevel=P},enumerable:!1,configurable:!0}),N.prototype.setLogLevel=function(P){this._logLevel=typeof P==="string"?i[P]:P},Object.defineProperty(N.prototype,"logHandler",{get:function(){return this._logHandler},set:function(P){if(typeof P!=="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=P},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(P){this._userLogHandler=P},enumerable:!1,configurable:!0}),N.prototype.debug=function(){for(var P=[],V=0;V<arguments.length;V++)P[V]=arguments[V];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.DEBUG],P)),this._logHandler.apply(this,a([this,f.DEBUG],P))},N.prototype.log=function(){for(var P=[],V=0;V<arguments.length;V++)P[V]=arguments[V];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.VERBOSE],P)),this._logHandler.apply(this,a([this,f.VERBOSE],P))},N.prototype.info=function(){for(var P=[],V=0;V<arguments.length;V++)P[V]=arguments[V];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.INFO],P)),this._logHandler.apply(this,a([this,f.INFO],P))},N.prototype.warn=function(){for(var P=[],V=0;V<arguments.length;V++)P[V]=arguments[V];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.WARN],P)),this._logHandler.apply(this,a([this,f.WARN],P))},N.prototype.error=function(){for(var P=[],V=0;V<arguments.length;V++)P[V]=arguments[V];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.ERROR],P)),this._logHandler.apply(this,a([this,f.ERROR],P))},N}();function A(N){d.forEach(function(P){P.setLogLevel(N)})}function E(N,P){for(var V=function(la){var ia=null;P&&P.level&&(ia=i[P.level]),N===null?la.userLogHandler=null:la.userLogHandler=function(oa,pa){for(var ja=[],I=2;I<arguments.length;I++)ja[I-2]=arguments[I];var O=ja.map(function(x){if(x==null)return null;{if(typeof x==="string")return x;{if(typeof x==="number"||typeof x==="boolean")return x.toString();{if(x instanceof Error)return x.message;try{return JSON.stringify(x)}catch(G){return null}}}}}).filter(function(x){return x}).join(" ");pa>=(ia!==null&&ia!==void 0?ia:oa.logLevel)&&N({level:f[pa].toLowerCase(),message:O,args:ja,type:oa.name})}},Y=0,fa=d;Y<fa.length;Y++){var ga=fa[Y];V(ga)}}});var Mp=Ec($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});var a=Np(),c=Tk(),d=Op(),f=Qp();var i,l=(i={},i["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",i),q=new c.ErrorFactory("app","Firebase",l),u="@firebase/app",v="0.6.11",A="@firebase/analytics",E="@firebase/auth",H="@firebase/database",R="@firebase/functions",N="@firebase/installations",P="@firebase/messaging",V="@firebase/performance",Y="@firebase/remote-config",fa="@firebase/storage",ga="@firebase/firestore",la="firebase-wrapper";var ia,oa="[DEFAULT]",pa=(ia={},ia[u]="fire-core",ia[A]="fire-analytics",ia[E]="fire-auth",ia[H]="fire-rtdb",ia[R]="fire-fn",ia[N]="fire-iid",ia[P]="fire-fcm",ia[V]="fire-perf",ia[Y]="fire-rc",ia[fa]="fire-gcs",ia[ga]="fire-fst",ia["fire-js"]="fire-js",ia[la]="fire-js-all",ia);var ja=new f.Logger("@firebase/app");var I=function(){function ra(da,na,xa){var ma,eb,gb=this;this.firebase_=xa,this.isDeleted_=!1,this.name_=na.name,this.automaticDataCollectionEnabled_=na.automaticDataCollectionEnabled||!1,this.options_=c.deepCopy(da),this.container=new d.ComponentContainer(na.name),this._addComponent(new d.Component("app",function(){return gb},"PUBLIC"));try{for(var hb=a.__values(this.firebase_.INTERNAL.components.values()),Ca=hb.next();!Ca.done;Ca=hb.next()){var Ia=Ca.value;this._addComponent(Ia)}}catch(Za){ma={error:Za}}finally{try{Ca&&!Ca.done&&(eb=hb.return)&&eb.call(hb)}finally{if(ma)throw ma.error}}}return Object.defineProperty(ra.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(da){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=da},enumerable:!1,configurable:!0}),Object.defineProperty(ra.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(ra.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),ra.prototype.delete=function(){var da=this;return new Promise(function(na){da.checkDestroyed_(),na()}).then(function(){return da.firebase_.INTERNAL.removeApp(da.name_),Promise.all(da.container.getProviders().map(function(na){return na.delete()}))}).then(function(){da.isDeleted_=!0})},ra.prototype._getService=function(da,na){return na===void 0&&(na=oa),this.checkDestroyed_(),this.container.getProvider(da).getImmediate({identifier:na})},ra.prototype._removeServiceInstance=function(da,na){na===void 0&&(na=oa),this.container.getProvider(da).clearInstance(na)},ra.prototype._addComponent=function(da){try{this.container.addComponent(da)}catch(na){ja.debug("Component "+da.name+" failed to register with FirebaseApp "+this.name,na)}},ra.prototype._addOrOverwriteComponent=function(da){this.container.addOrOverwriteComponent(da)},ra.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw q.create("app-deleted",{appName:this.name_})},ra}();I.prototype.name&&I.prototype.options||I.prototype.delete||console.log("dc");var O="7.20.0";function x(ra){var da={},na=new Map(),xa={__esModule:!0,initializeApp:gb,app:eb,registerVersion:Ia,setLogLevel:f.setLogLevel,onLog:Za,apps:null,SDK_VERSION:O,INTERNAL:{registerComponent:Ca,removeApp:ma,components:na,useAsService:fb}};xa.default=xa,Object.defineProperty(xa,"apps",{get:hb});function ma(qa){delete da[qa]}function eb(qa){qa=qa||oa;if(!c.contains(da,qa))throw q.create("no-app",{appName:qa});return da[qa]}eb.App=ra;function gb(qa,ya){ya===void 0&&(ya={});if(typeof ya!=="object"||ya===null){var La=ya;ya={name:La}}var ta=ya;ta.name===void 0&&(ta.name=oa);var Ea=ta.name;if(typeof Ea!=="string"||!Ea)throw q.create("bad-app-name",{appName:String(Ea)});if(c.contains(da,Ea))throw q.create("duplicate-app",{appName:Ea});var cb=new ra(qa,ta,xa);return da[Ea]=cb,cb}function hb(){return Object.keys(da).map(function(qa){return da[qa]})}function Ca(qa){var ya,La,ta=qa.name;if(na.has(ta))return ja.debug("There were multiple attempts to register component "+ta+"."),qa.type==="PUBLIC"?xa[ta]:null;na.set(ta,qa);if(qa.type==="PUBLIC"){var Ea=function(Ja){Ja===void 0&&(Ja=eb());if(typeof Ja[ta]!=="function")throw q.create("invalid-app-argument",{appName:ta});return Ja[ta]()};qa.serviceProps!==void 0&&c.deepExtend(Ea,qa.serviceProps),xa[ta]=Ea,ra.prototype[ta]=function(){for(var Ja=[],Va=0;Va<arguments.length;Va++)Ja[Va]=arguments[Va];var jb=this._getService.bind(this,ta);return jb.apply(this,qa.multipleInstances?Ja:[])}}try{for(var cb=a.__values(Object.keys(da)),Da=cb.next();!Da.done;Da=cb.next()){var Sa=Da.value;da[Sa]._addComponent(qa)}}catch(Ja){ya={error:Ja}}finally{try{Da&&!Da.done&&(La=cb.return)&&La.call(cb)}finally{if(ya)throw ya.error}}return qa.type==="PUBLIC"?xa[ta]:null}function Ia(qa,ya,La){var ta,Ea=(ta=pa[qa])!==null&&ta!==void 0?ta:qa;La&&(Ea+="-"+La);var cb=Ea.match(/\s|\//),Da=ya.match(/\s|\//);if(cb||Da){var Sa=['Unable to register library "'+Ea+'" with version "'+ya+'":'];cb&&Sa.push('library name "'+Ea+'" contains illegal characters (whitespace or "/")'),cb&&Da&&Sa.push("and"),Da&&Sa.push('version name "'+ya+'" contains illegal characters (whitespace or "/")'),ja.warn(Sa.join(" "));return}Ca(new d.Component(Ea+"-version",function(){return{library:Ea,version:ya}},"VERSION"))}function Za(qa,ya){if(qa!==null&&typeof qa!=="function")throw q.create("invalid-log-argument",{appName:name});f.setUserLogHandler(qa,ya)}function fb(qa,ya){if(ya==="serverAuth")return null;var La=ya;return La}return xa}function G(){var ra=x(I);ra.INTERNAL=a.__assign(a.__assign({},ra.INTERNAL),{createFirebaseNamespace:G,extendNamespace:da,createSubscribe:c.createSubscribe,ErrorFactory:c.ErrorFactory,deepExtend:c.deepExtend});function da(na){c.deepExtend(ra,na)}return ra}var F=G();var J=function(){function ra(da){this.container=da}return ra.prototype.getPlatformInfoString=function(){var da=this.container.getProviders();return da.map(function(na){if(U(na)){var xa=na.getImmediate();return xa.library+"/"+xa.version}else return null}).filter(function(na){return na}).join(" ")},ra}();function U(ra){var da=ra.getComponent();return(da===null||da===void 0?void 0:da.type)==="VERSION"}function K(ra,da){ra.INTERNAL.registerComponent(new d.Component("platform-logger",function(na){return new J(na)},"PRIVATE")),ra.registerVersion(u,v,da),ra.registerVersion("fire-js","")}if(c.isBrowser()&&self.firebase!==void 0){ja.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var ca=self.firebase.SDK_VERSION;ca&&ca.indexOf("LITE")>=0&&ja.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var ba=F.initializeApp;F.initializeApp=function(){for(var ra=[],da=0;da<arguments.length;da++)ra[da]=arguments[da];return c.isNode()&&ja.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/rollup-plugin-node-resolve
      `),ba.apply(void 0,ra)};var Ba=F;K(Ba);$.default=Ba;$.firebase=Ba});var fc=Ec((l,q)=>{"use strict";var a=Mp();function c(u){return u&&typeof u==="object"&&"default"in u?u:{default:u}}var d=c(a),f="firebase",i="7.21.1";d.default.registerVersion(f,i,"app");q.exports=d.default});var aw=Ec((c,d)=>{var a=function(){function f(A,E){if(!u[A]){u[A]={};for(var H=0;H<A.length;H++)u[A][A.charAt(H)]=H}return u[A][E]}var i=String.fromCharCode,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",u={},v={compressToBase64:function(A){if(null==A)return"";var E=v._compress(A,6,function(H){return l.charAt(H)});switch(E.length%4){default:case 0:return E;case 1:return E+"===";case 2:return E+"==";case 3:return E+"="}},decompressFromBase64:function(A){return null==A?"":""==A?null:v._decompress(A.length,32,function(E){return f(l,A.charAt(E))})},compressToUTF16:function(A){return null==A?"":v._compress(A,15,function(E){return i(E+32)})+" "},decompressFromUTF16:function(A){return null==A?"":""==A?null:v._decompress(A.length,16384,function(E){return A.charCodeAt(E)-32})},compressToUint8Array:function(A){for(var E=v.compress(A),H=new Uint8Array(2*E.length),R=0,N=E.length;N>R;R++){var P=E.charCodeAt(R);H[2*R]=P>>>8,H[2*R+1]=P%256}return H},decompressFromUint8Array:function(A){if(null===A||void 0===A)return v.decompress(A);for(var E=new Array(A.length/2),H=0,R=E.length;R>H;H++)E[H]=256*A[2*H]+A[2*H+1];var N=[];return E.forEach(function(P){N.push(i(P))}),v.decompress(N.join(""))},compressToEncodedURIComponent:function(A){return null==A?"":v._compress(A,6,function(E){return q.charAt(E)})},decompressFromEncodedURIComponent:function(A){return null==A?"":""==A?null:(A=A.replace(/ /g,"+"),v._decompress(A.length,32,function(E){return f(q,A.charAt(E))}))},compress:function(A){return v._compress(A,16,function(E){return i(E)})},_compress:function(A,E,H){if(null==A)return"";var R,N,P,V={},Y={},fa="",ga="",la="",ia=2,oa=3,pa=2,ja=[],I=0,O=0;for(P=0;P<A.length;P+=1)if(fa=A.charAt(P),Object.prototype.hasOwnProperty.call(V,fa)||(V[fa]=oa++,Y[fa]=!0),ga=la+fa,Object.prototype.hasOwnProperty.call(V,ga))la=ga;else{if(Object.prototype.hasOwnProperty.call(Y,la)){if(la.charCodeAt(0)<256){for(R=0;pa>R;R++)I<<=1,O==E-1?(O=0,ja.push(H(I)),I=0):O++;for(N=la.charCodeAt(0),R=0;8>R;R++)I=I<<1|1&N,O==E-1?(O=0,ja.push(H(I)),I=0):O++,N>>=1}else{for(N=1,R=0;pa>R;R++)I=I<<1|N,O==E-1?(O=0,ja.push(H(I)),I=0):O++,N=0;for(N=la.charCodeAt(0),R=0;16>R;R++)I=I<<1|1&N,O==E-1?(O=0,ja.push(H(I)),I=0):O++,N>>=1}ia--,0==ia&&(ia=Math.pow(2,pa),pa++),delete Y[la]}else for(N=V[la],R=0;pa>R;R++)I=I<<1|1&N,O==E-1?(O=0,ja.push(H(I)),I=0):O++,N>>=1;ia--,0==ia&&(ia=Math.pow(2,pa),pa++),V[ga]=oa++,la=String(fa)}if(""!==la){if(Object.prototype.hasOwnProperty.call(Y,la)){if(la.charCodeAt(0)<256){for(R=0;pa>R;R++)I<<=1,O==E-1?(O=0,ja.push(H(I)),I=0):O++;for(N=la.charCodeAt(0),R=0;8>R;R++)I=I<<1|1&N,O==E-1?(O=0,ja.push(H(I)),I=0):O++,N>>=1}else{for(N=1,R=0;pa>R;R++)I=I<<1|N,O==E-1?(O=0,ja.push(H(I)),I=0):O++,N=0;for(N=la.charCodeAt(0),R=0;16>R;R++)I=I<<1|1&N,O==E-1?(O=0,ja.push(H(I)),I=0):O++,N>>=1}ia--,0==ia&&(ia=Math.pow(2,pa),pa++),delete Y[la]}else for(N=V[la],R=0;pa>R;R++)I=I<<1|1&N,O==E-1?(O=0,ja.push(H(I)),I=0):O++,N>>=1;ia--,0==ia&&(ia=Math.pow(2,pa),pa++)}for(N=2,R=0;pa>R;R++)I=I<<1|1&N,O==E-1?(O=0,ja.push(H(I)),I=0):O++,N>>=1;for(;;){if(I<<=1,O==E-1){ja.push(H(I));break}O++}return ja.join("")},decompress:function(A){return null==A?"":""==A?null:v._decompress(A.length,32768,function(E){return A.charCodeAt(E)})},_decompress:function(A,E,H){var R,N,P,V,Y,fa,ga,la,ia=[],oa=4,pa=4,ja=3,I="",O=[],x={val:H(0),position:E,index:1};for(N=0;3>N;N+=1)ia[N]=N;for(V=0,fa=Math.pow(2,2),ga=1;ga!=fa;)Y=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),V|=(Y>0?1:0)*ga,ga<<=1;switch(R=V){case 0:for(V=0,fa=Math.pow(2,8),ga=1;ga!=fa;)Y=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),V|=(Y>0?1:0)*ga,ga<<=1;la=i(V);break;case 1:for(V=0,fa=Math.pow(2,16),ga=1;ga!=fa;)Y=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),V|=(Y>0?1:0)*ga,ga<<=1;la=i(V);break;case 2:return""}for(ia[3]=la,P=la,O.push(la);;){if(x.index>A)return"";for(V=0,fa=Math.pow(2,ja),ga=1;ga!=fa;)Y=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),V|=(Y>0?1:0)*ga,ga<<=1;switch(la=V){case 0:for(V=0,fa=Math.pow(2,8),ga=1;ga!=fa;)Y=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),V|=(Y>0?1:0)*ga,ga<<=1;ia[pa++]=i(V),la=pa-1,oa--;break;case 1:for(V=0,fa=Math.pow(2,16),ga=1;ga!=fa;)Y=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),V|=(Y>0?1:0)*ga,ga<<=1;ia[pa++]=i(V),la=pa-1,oa--;break;case 2:return O.join("")}if(0==oa&&(oa=Math.pow(2,ja),ja++),ia[la])I=ia[la];else{if(la!==pa)return null;I=P+P.charAt(0)}O.push(I),ia[pa++]=P+I.charAt(0),oa--,P=I,0==oa&&(oa=Math.pow(2,ja),ja++)}}};return v}();"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof d&&null!=d&&(d.exports=a)});let Wp,Xp=0,Yp=0;const yb={get:()=>Wp,set:a=>{Wp=a},getFrame:()=>Xp,setFrame:a=>{Xp=a},getElapsed:()=>Yp,setElapsed:a=>{Yp=a}};let aq=0;function Kk(a=0){return()=>{aq=a}}function Ph(){return aq}let Yk="Phaser",iw="https://phaser4.io",jw="#fff",kw="linear-gradient(#3e0081 40%, #00bcc3)";function Uk(){if(Yk!==""){const a=yb.get(),c=Yk==="Phaser"?" v"+a.VERSION:"";console.log(`%c${Yk}${c}%c ${iw}`,`padding: 4px 16px; color: ${jw}; background: ${kw}`,"")}}let fq=800,gq=600,hq=1;function Nk(a=800,c=600,d=1){return d===0&&(d=window.devicePixelRatio),()=>{fq=a,gq=c,hq=d}}function Jd(){return fq}function Kd(){return gq}function Ld(){return hq}const ol=[],rf={add:a=>{ol.push(a)},get:()=>ol,clear:()=>{ol.length=0}};let eq;function Qh(a){eq=a}function Vk(){return eq}let Zk=.5,_k=.5;let bq=0;function $k(a){bq=a}function kg(){return bq}function Rh(a){let c;return a&&(typeof a==="string"?c=document.getElementById(a):typeof a==="object"&&a.nodeType===1&&(c=a)),c||(c=document.body),c}let cq;function Lk(a){return()=>{a&&(cq=Rh(a))}}function Wk(){return cq}let dq=[];function Mk(a){return()=>{dq=[].concat(a)}}function al(){return dq}let mw={alpha:!1,antialias:!1,depth:!1,premultipliedAlpha:!1};function bl(){return mw}class wq{constructor(a){this.stack=[],this.current=null,this.renderer=a}reset(){this.stack=[],this.current=null;const a=this.renderer,c=a.gl;c.bindFramebuffer(c.FRAMEBUFFER,null),c.viewport(0,0,a.width,a.height)}add(a,c=!0,d=0,f=0){this.stack.push({framebuffer:a,width:d,height:f}),this.set(a,c,d,f)}set(a,c=!0,d=0,f=0){const i=this.renderer,l=i.gl;l.bindFramebuffer(l.FRAMEBUFFER,a),c&&(l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT)),d>0&&l.viewport(0,0,d,f),this.current=a}pop(){this.stack.pop();const a=this.stack.length;if(a>0){const c=this.stack[a-1];this.set(c.framebuffer,!1,c.width,c.height)}else this.reset()}rebind(){const a=this.renderer.gl;a.bindFramebuffer(a.FRAMEBUFFER,this.current)}destroy(){this.stack=[]}}let vq;const Hb={get:()=>vq,set:a=>{vq=a}};function xq(a,c=[]){const d=a>>16&255,f=a>>8&255,i=a&255,l=a>16777215?a>>>24:255;return c[0]=d/255,c[1]=f/255,c[2]=i/255,c[3]=l/255,c}function sq(a,c){return a.a===c.a&&a.b===c.b&&a.c===c.c&&a.d===c.d&&a.tx===c.tx&&a.ty===c.ty}function _h(a,c){const d=Hb.get();c||(c=d.COLOR_ATTACHMENT0);const f=d.createFramebuffer();return d.bindFramebuffer(d.FRAMEBUFFER,f),d.framebufferTexture2D(d.FRAMEBUFFER,c,d.TEXTURE_2D,a,0),d.bindFramebuffer(d.FRAMEBUFFER,null),f}function di(a){const c=Hb.get();if(!c)return;const{parent:d,flipY:f,unpackPremultiplyAlpha:i,minFilter:l,magFilter:q,wrapS:u,wrapT:v,generateMipmap:A,isPOT:E}=a,H=d.image;let R=d.width,N=d.height;const P=c.createTexture();return c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,P),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,f),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),H?(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,H),R=H.width,N=H.height):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,R,N,0,c.RGBA,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,l),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,q),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,u),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,v),A&&E&&c.generateMipmap(c.TEXTURE_2D),a.texture=P,P}function xe(a){const c=Hb.get();c&&c.isFramebuffer(a)&&c.deleteFramebuffer(a)}function pl(a){const c=Hb.get();if(!c)return;c.isTexture(a)&&c.deleteTexture(a)}function tq(a,c){return a<1||c<1?!1:(a&a-1)===0&&(c&c-1)===0}function Gq(a,c=!0){const d=Hb.get();d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,a);const f=c?d.LINEAR:d.NEAREST;d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,f),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,f)}function Hq(a){const c=Hb.get(),d=a.parent.image,f=d.width,i=d.height;return f>0&&i>0&&(c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,a.texture),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,a.flipY),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,d)),a.texture}class qf{constructor(a,c={}){this.index=0,this.indexCounter=-1,this.dirtyIndex=!0,this.unpackPremultiplyAlpha=!0,this.flipY=!1,this.isPOT=!1,this.generateMipmap=!1;const d=Hb.get();this.parent=a,this.isPOT=tq(a.width,a.height);const{texture:f=null,framebuffer:i=null,unpackPremultiplyAlpha:l=!0,minFilter:q=d.LINEAR,magFilter:u=d.LINEAR,wrapS:v=d.CLAMP_TO_EDGE,wrapT:A=d.CLAMP_TO_EDGE,generateMipmap:E=this.isPOT,flipY:H=!1}=c;this.minFilter=q,this.magFilter=u,this.wrapS=v,this.wrapT=A,this.generateMipmap=E,this.flipY=H,this.unpackPremultiplyAlpha=l,i&&(this.framebuffer=i),f?this.texture=f:di(this)}setFilter(a){this.texture&&Gq(this.texture,a)}create(){const a=this.texture;return a&&pl(a),di(this)}update(){const a=this.texture;return a?Hq(this):di(this)}setIndex(a){this.dirtyIndex=a!==this.index,this.index=a}destroy(){pl(this.texture),xe(this.framebuffer),this.parent=null,this.texture=null,this.framebuffer=null}}class Dq{constructor(a,c,d,f,i){this.batchSize=a,this.dataSize=c,this.indexSize=d,this.vertexElementSize=f,this.quadIndexSize=i,this.vertexByteSize=f*c,this.quadByteSize=this.vertexByteSize*4,this.quadElementSize=f*4,this.bufferByteSize=a*this.quadByteSize,this.create()}create(){let a=[];for(let d=0;d<this.batchSize*this.indexSize;d+=this.indexSize)a.push(d+0,d+1,d+2,d+2,d+3,d+0);this.data=new ArrayBuffer(this.bufferByteSize),this.index=new Uint16Array(a),this.vertexViewF32=new Float32Array(this.data),this.vertexViewU32=new Uint32Array(this.data);const c=Hb.get();this.vertexBuffer=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer),c.bufferData(c.ARRAY_BUFFER,this.data,c.DYNAMIC_DRAW),this.indexBuffer=c.createBuffer(),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.indexBuffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,this.index,c.STATIC_DRAW),c.bindBuffer(c.ARRAY_BUFFER,null),a=[]}destroy(){}}class ql{constructor(a,c,d,f,i,l){this.trimmed=!1,this.texture=a,this.key=c,this.x=d,this.y=f,this.width=i,this.height=l,this.sourceSizeWidth=i,this.sourceSizeHeight=l,this.updateUVs()}setPivot(a,c){this.pivot={x:a,y:c}}setSize(a,c){this.width=a,this.height=c,this.sourceSizeWidth=a,this.sourceSizeHeight=c,this.updateUVs()}setSourceSize(a,c){this.sourceSizeWidth=a,this.sourceSizeHeight=c}setTrim(a,c,d,f,i,l){this.trimmed=!0,this.sourceSizeWidth=a,this.sourceSizeHeight=c,this.spriteSourceSizeX=d,this.spriteSourceSizeY=f,this.spriteSourceSizeWidth=i,this.spriteSourceSizeHeight=l}getExtent(a,c){const d=this.sourceSizeWidth,f=this.sourceSizeHeight;let i,l,q,u;return this.trimmed?(i=this.spriteSourceSizeX-a*d,l=i+this.spriteSourceSizeWidth,q=this.spriteSourceSizeY-c*f,u=q+this.spriteSourceSizeHeight):(i=-a*d,l=i+d,q=-c*f,u=q+f),{left:i,right:l,top:q,bottom:u}}setExtent(a){const c=a.transform,d=c.origin.x,f=c.origin.y,i=this.sourceSizeWidth,l=this.sourceSizeHeight;let q,u,v,A;this.trimmed?(q=this.spriteSourceSizeX-d*i,u=this.spriteSourceSizeY-f*l,v=this.spriteSourceSizeWidth,A=this.spriteSourceSizeHeight):(q=-d*i,u=-f*l,v=i,A=l),c.setExtent(q,u,v,A)}updateUVs(){const{x:a,y:c,width:d,height:f}=this,i=this.texture.width,l=this.texture.height;this.u0=a/i,this.v0=c/l,this.u1=(a+d)/i,this.v1=(c+f)/l}}class $b{constructor(a,c,d){this.key="",a&&(c=a.width,d=a.height),this.image=a,this.width=c,this.height=d,this.frames=new Map(),this.data={},this.addFrame("__BASE",0,0,c,d),rf.add(this)}addFrame(a,c,d,f,i){if(this.frames.has(a))return null;const l=new ql(this,a,c,d,f,i);return this.frames.set(a,l),(!this.firstFrame||this.firstFrame.key==="__BASE")&&(this.firstFrame=l),l}getFrame(a){if(!a)return this.firstFrame;a instanceof ql&&(a=a.key);let c=this.frames.get(a);return c||(console.warn(`Frame missing: ${a}`),c=this.firstFrame),c}setSize(a,c){this.width=a,this.height=c;const d=this.frames.get("__BASE");d.setSize(a,c)}destroy(){this.binding&&this.binding.destroy(),this.frames.clear(),this.data=null,this.image=null,this.firstFrame=null}}let Cq;const tg={get:()=>Cq,set:a=>{Cq=a}};const Fq={fragmentShader:`\r
#define SHADER_NAME SINGLE_QUAD_FRAG\r
\r
precision highp float;\r
\r
varying vec2 vTextureCoord;\r
varying float vTextureId;\r
varying vec4 vTintColor;\r
\r
uniform sampler2D uTexture;\r
\r
void main (void)\r
{\r
    vec4 color = texture2D(uTexture, vTextureCoord);\r
\r
    gl_FragColor = color * vec4(vTintColor.bgr * vTintColor.a, vTintColor.a);\r
}`,vertexShader:`\r
#define SHADER_NAME SINGLE_QUAD_VERT\r
\r
precision highp float;\r
\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
attribute float aTextureId;\r
attribute vec4 aTintColor;\r
\r
uniform mat4 uProjectionMatrix;\r
uniform mat4 uCameraMatrix;\r
\r
varying vec2 vTextureCoord;\r
varying float vTextureId;\r
varying vec4 vTintColor;\r
\r
void main (void)\r
{\r
    vTextureCoord = aTextureCoord;\r
    vTextureId = aTextureId;\r
    vTintColor = aTintColor;\r
\r
    gl_Position = uProjectionMatrix * uCameraMatrix * vec4(aVertexPosition, 0.0, 1.0);\r
}`};class ci{constructor(a={}){this.attribs={aVertexPosition:0,aTextureCoord:0,aTextureId:0,aTintColor:0},this.uniforms={uProjectionMatrix:0,uCameraMatrix:0,uTexture:0,uTime:0,uResolution:0},this.renderToFBO=!1,this.renderer=tg.get();const{batchSize:c=4096,dataSize:d=4,indexSize:f=4,vertexElementSize:i=6,quadIndexSize:l=6,fragmentShader:q=Fq.fragmentShader,vertexShader:u=Fq.vertexShader,width:v=Jd(),height:A=Kd(),resolution:E=Ld(),renderToFBO:H=!1}=a;this.buffer=new Dq(c,d,f,i,l),this.createShaders(q,u),this.count=0,this.renderToFBO=H;const R=new $b(null,v*E,A*E),N=new qf(R);R.binding=N,N.framebuffer=_h(N.texture),this.texture=R,this.framebuffer=N.framebuffer}createShaders(a,c){const d=this.renderer.gl,f=d.createShader(d.FRAGMENT_SHADER);d.shaderSource(f,a),d.compileShader(f);let i=!1,l=d.getShaderInfoLog(f);l.length>0&&(i=!0,console.error(l));const q=d.createShader(d.VERTEX_SHADER);d.shaderSource(q,c),d.compileShader(q),l=d.getShaderInfoLog(f),l.length>0&&(i=!0,console.error(l));if(i)return;const u=d.createProgram();d.attachShader(u,q),d.attachShader(u,f),d.linkProgram(u),d.useProgram(u),this.program=u;for(const v of Object.keys(this.attribs)){const A=d.getAttribLocation(u,v);d.enableVertexAttribArray(A),this.attribs[v]=A}for(const v of Object.keys(this.uniforms))this.uniforms[v]=d.getUniformLocation(u,v)}bind(a,c,d){if(!this.program)return!1;const f=this.renderer,i=f.gl,l=this.uniforms;return i.useProgram(this.program),i.uniformMatrix4fv(l.uProjectionMatrix,!1,a),i.uniformMatrix4fv(l.uCameraMatrix,!1,c),i.uniform1i(l.uTexture,f.textures.textureIndex[d]),i.uniform1f(l.uTime,performance.now()),i.uniform2f(l.uResolution,f.width,f.height),this.bindBuffers(this.buffer.indexBuffer,this.buffer.vertexBuffer),!0}bindBuffers(a,c){const d=this.renderer.gl,f=this.buffer.vertexByteSize,i=this.attribs;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),d.bindBuffer(d.ARRAY_BUFFER,c),d.vertexAttribPointer(i.aVertexPosition,2,d.FLOAT,!1,f,0),d.vertexAttribPointer(i.aTextureCoord,2,d.FLOAT,!1,f,8),d.vertexAttribPointer(i.aTextureId,1,d.FLOAT,!1,f,16),d.vertexAttribPointer(i.aTintColor,4,d.UNSIGNED_BYTE,!0,f,20),this.count=0}draw(a){const c=this.renderer,d=c.gl,f=this.buffer;if(a===f.batchSize)d.bufferData(d.ARRAY_BUFFER,f.data,d.DYNAMIC_DRAW);else{const i=f.vertexViewF32.subarray(0,a*f.quadElementSize);d.bufferSubData(d.ARRAY_BUFFER,0,i)}this.renderToFBO&&c.fbo.add(this.framebuffer,!0),d.drawElements(d.TRIANGLES,a*f.quadIndexSize,d.UNSIGNED_SHORT,0),this.renderToFBO&&c.fbo.pop()}flush(){const a=this.count;return a===0?!1:(this.draw(a),this.prevCount=a,this.count=0,!0)}}const Aw=`\r
#define SHADER_NAME MULTI_QUAD_FRAG\r
\r
precision highp float;\r
\r
varying vec2 vTextureCoord;\r
varying float vTextureId;\r
varying vec4 vTintColor;\r
\r
uniform sampler2D uTexture[%count%];\r
\r
void main (void)\r
{\r
    vec4 color;\r
\r
    %forloop%\r
\r
    gl_FragColor = color * vec4(vTintColor.bgr * vTintColor.a, vTintColor.a);\r
}`;class yq extends ci{constructor(a={fragmentShader:Aw}){super(a)}createShaders(a,c){const d=kg();let f="";for(let i=1;i<d;i++)i>1&&(f+=`
	else `),i<d-1&&(f+=`if (vTextureId < ${i}.5)`),f+=`
	{`,f+=`
		color = texture2D(uTexture[${i}], vTextureCoord);`,f+=`
	}`;a=a.replace(/%count%/gi,`${d}`),a=a.replace(/%forloop%/gi,f),super.createShaders(a,c)}bind(a,c){if(!this.program)return!1;const d=this.renderer,f=d.gl,i=this.uniforms;return f.useProgram(this.program),f.uniformMatrix4fv(i.uProjectionMatrix,!1,a),f.uniformMatrix4fv(i.uCameraMatrix,!1,c),f.uniform1iv(i.uTexture,d.textures.textureIndex),f.uniform1f(i.uTime,performance.now()),f.uniform2f(i.uResolution,d.width,d.height),this.bindBuffers(this.buffer.indexBuffer,this.buffer.vertexBuffer),!0}}function zq(a,c,d=-1,f=1){const i=-2*(1/-a),l=-2*(1/c),q=2*(1/(d-f));return new Float32Array([i,0,0,0,0,l,0,0,0,0,q,0,-1,1,0,1])}class Aq{constructor(a,c){this.renderer=a;const d={shader:new c()};this.stack=[d],this.currentEntry=d,this.current=d.shader,this.singleQuadShader=new ci()}add(a,c){const d={shader:a,textureID:c};return this.stack.push(d),d}set(a,c){this.flush();const d=this.renderer,f=d.projectionMatrix,i=d.currentCamera.matrix,l=a.bind(f,i,c);if(l){const q=this.add(a,c);this.currentEntry=q,this.current=a}return l}setDefault(a){this.set(this.singleQuadShader,a)}pop(){this.flush();const a=this.stack;a.length>1&&a.pop(),this.currentEntry=a[a.length-1],this.current=this.currentEntry.shader}reset(){this.pop(),this.rebind()}flush(){return this.current.flush()?(this.renderer.flushTotal++,!0):!1}rebind(){const a=this.renderer,c=a.projectionMatrix,d=a.currentCamera.matrix,f=this.currentEntry;f.shader.bind(c,d,f.textureID)}popAndRebind(){this.pop(),this.rebind()}clear(){}destroy(){}}const yw=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function zw(a){let c="";for(let d=0;d<a;++d)d>0&&(c+=`
else `),d<a-1&&(c+=`if(test == ${d}.0){}`);return c}function Eq(a,c){const d=c.createShader(c.FRAGMENT_SHADER);for(;;){const f=yw.replace(/%forloop%/gi,zw(a));c.shaderSource(d,f),c.compileShader(d);if(!c.getShaderParameter(d,c.COMPILE_STATUS))a=a/2|0;else break}return a}class Bq{constructor(a){this.startActiveTexture=0,this.renderer=a,this.tempTextures=[],this.textureIndex=[]}init(){const a=this.renderer.gl;let c=Eq(a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),a);const d=kg();d===0||d>0&&d>c?$k(c):d>0&&d<c&&(c=Math.max(8,d));const f=this.tempTextures;f.length&&f.forEach(l=>{a.deleteTexture(l)});const i=[];for(let l=0;l<c;l++){const q=a.createTexture();a.activeTexture(a.TEXTURE0+l),a.bindTexture(a.TEXTURE_2D,q),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),f[l]=q,i.push(l)}this.maxTextures=c,this.textureIndex=i,this.currentActiveTexture=1}update(){const a=rf.get();for(let c=0;c<a.length;c++){const d=a[c];d.binding||(d.binding=new qf(d))}rf.clear()}reset(){const a=this.renderer.gl,c=this.tempTextures;for(let d=0;d<c.length;d++)a.activeTexture(a.TEXTURE0+d),a.bindTexture(a.TEXTURE_2D,c[d]);this.currentActiveTexture=1,this.startActiveTexture++}bind(a,c=0){const d=this.renderer.gl,f=a.binding;f.setIndex(c),d.activeTexture(d.TEXTURE0+c),d.bindTexture(d.TEXTURE_2D,f.texture)}unbind(a=0){const c=this.renderer.gl;c.activeTexture(c.TEXTURE0+a),c.bindTexture(c.TEXTURE_2D,this.tempTextures[a]),a>0&&this.startActiveTexture++}request(a){const c=this.renderer.gl,d=a.binding,f=this.currentActiveTexture;return d.indexCounter>=this.startActiveTexture?!1:(d.indexCounter=this.startActiveTexture,f<this.maxTextures?(d.setIndex(f),c.activeTexture(c.TEXTURE0+f),c.bindTexture(c.TEXTURE_2D,d.texture),this.currentActiveTexture++):(this.renderer.flush(),this.startActiveTexture++,d.indexCounter=this.startActiveTexture,d.setIndex(1),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,d.texture),this.currentActiveTexture=2),!0)}}class iq{constructor(){this.clearColor=[0,0,0,1],this.flushTotal=0,this.clearBeforeRender=!0,this.optimizeRedraw=!1,this.autoResize=!0,this.contextLost=!1,this.currentCamera=null,this.width=Jd(),this.height=Kd(),this.resolution=Ld(),this.setBackgroundColor(Ph());const a=document.createElement("canvas");a.addEventListener("webglcontextlost",c=>this.onContextLost(c),!1),a.addEventListener("webglcontextrestored",()=>this.onContextRestored(),!1),this.canvas=a,this.fbo=new wq(this),this.textures=new Bq(this),this.initContext(),tg.set(this),this.shaders=new Aq(this,yq)}initContext(){const a=this.canvas.getContext("webgl",bl());Hb.set(a),this.gl=a,a.disable(a.DEPTH_TEST),a.disable(a.CULL_FACE),this.resize(this.width,this.height,this.resolution),this.textures.init()}resize(a,c,d=1){this.width=a*d,this.height=c*d,this.resolution=d;const f=this.canvas;f.width=this.width,f.height=this.height,this.autoResize&&(f.style.width=(this.width/d).toString()+"px",f.style.height=(this.height/d).toString()+"px"),this.gl.viewport(0,0,this.width,this.height),this.projectionMatrix=zq(a,c)}onContextLost(a){a.preventDefault(),this.contextLost=!0}onContextRestored(){this.contextLost=!1,this.initContext()}setBackgroundColor(a){return xq(a,this.clearColor),this}reset(a=null,c=this.width,d=this.height){const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,a),f.viewport(0,0,c,d),f.enable(f.BLEND),f.blendFunc(f.ONE,f.ONE_MINUS_SRC_ALPHA),this.flushTotal=0,this.currentCamera=null,this.textures.update()}render(a){if(this.contextLost)return;this.reset();if(this.optimizeRedraw&&a.numDirtyFrames===0&&a.numDirtyCameras===0)return;const c=this.gl;if(this.clearBeforeRender){const f=this.clearColor;c.clearColor(f[0],f[1],f[2],f[3]),c.clear(c.COLOR_BUFFER_BIT)}const d=a.worldData;for(let f=0;f<d.length;f++){const{camera:i,renderList:l}=d[f];(!this.currentCamera||!sq(i.worldTransform,this.currentCamera.worldTransform))&&(this.flush(),this.currentCamera=i,this.shaders.rebind()),l.forEach(q=>{q.children.length?this.renderNode(q):q.node.renderGL(this)})}this.flush()}renderNode(a){a.node.renderGL(this),a.children.forEach(c=>{c.children.length>0?this.renderNode(c):c.node.renderGL(this)}),a.node.postRenderGL(this)}flush(){this.shaders.flush()}destroy(){tg.set(void 0)}}function Ok(){return()=>{Qh(iq)}}function Gb(a,c,...d){if(a.events.size===0||!a.events.has(c))return!1;const f=a.events.get(c);for(const i of f)i.callback.apply(i.context,d),i.once&&f.delete(i);return f.size===0&&a.events.delete(c),!0}function Sp(a,c){const d=Rh(c);return d.appendChild(a),a}function Tp(a){const c=document.readyState;if(c==="complete"||c==="interactive"){a();return}const d=()=>{document.removeEventListener("deviceready",d,!0),document.removeEventListener("DOMContentLoaded",d,!0),window.removeEventListener("load",d,!0),a()};document.body?window.hasOwnProperty("cordova")?document.addEventListener("deviceready",d,!0):(document.addEventListener("DOMContentLoaded",d,!0),window.addEventListener("load",d,!0)):window.setTimeout(d,20)}class Xk{constructor(){this.events=new Map()}}class ng{constructor(a,c,d=!1){this.callback=a,this.context=c,this.once=d}}function mc(a,c,d,f=a,i=!1){if(typeof d!=="function")throw new TypeError("Listener not a function");const l=new ng(d,f,i),q=a.events.get(c);return q?q.add(l):a.events.set(c,new Set([l])),l}function ue(a,c,d,f=a){return mc(a,c,d,f,!0)}function Iq(){return{gameFrame:0,numTotalFrames:0,numDirtyFrames:0,numDirtyCameras:0,worldData:[]}}function Lq(a,c=0){a.gameFrame=c,a.numTotalFrames=0,a.numDirtyFrames=0,a.numDirtyCameras=0,a.worldData.length=0}let Mq;const ei={get:()=>Mq,set:a=>{Mq=a}};class Up{constructor(){this.scenes=new Map(),this.sceneIndex=0,this.flush=!1,this.renderResult=Iq(),this.game=yb.get(),ei.set(this),ue(this.game,"boot",()=>this.boot())}boot(){al().forEach(a=>new a())}update(a,c){for(const d of this.scenes.values())Gb(d,"update",a,c)}render(a){const c=this.renderResult;Lq(c,a);for(const d of this.scenes.values())Gb(d,"render",c);return this.flush&&(c.numDirtyFrames++,this.flush=!1),c}}function ug(a,c){const d=document.createElement("canvas");return d.width=a,d.height=c,d.getContext("2d")}let Nq;const Tb={get:()=>Nq,set:a=>{Nq=a}};class Vp{constructor(){this.textures=new Map(),this.createDefaultTextures(),Tb.set(this)}createDefaultTextures(){this.add("__BLANK",new $b(ug(32,32).canvas));const a=ug(32,32);a.strokeStyle="#0f0",a.moveTo(0,0),a.lineTo(32,32),a.stroke(),a.strokeRect(.5,.5,31,31),this.add("__MISSING",new $b(a.canvas))}get(a){const c=this.textures;return c.has(a)?c.get(a):c.get("__MISSING")}has(a){return this.textures.has(a)}add(a,c){let d;const f=this.textures;return f.has(a)||(c instanceof $b?d=c:d=new $b(c),d.key=a,f.set(a,d)),d}}class Lp extends Xk{constructor(...a){super();this.VERSION="4.0.0-beta1",this.isBooted=!1,this.isPaused=!1,this.willUpdate=!0,this.willRender=!0,this.lastTick=0,this.elapsed=0,this.frame=0,yb.set(this),Tp(()=>this.boot(a))}boot(a){a.forEach(f=>f());const c=Vk();this.renderer=new c(),this.textureManager=new Vp(),this.sceneManager=new Up();const d=Wk();d&&Sp(this.renderer.canvas,d),this.isBooted=!0,Uk(),Gb(this,"boot"),this.lastTick=performance.now(),this.step(this.lastTick)}pause(){this.isPaused=!0}resume(){this.isPaused=!1,this.lastTick=performance.now()}step(a){const c=a-this.lastTick;this.lastTick=a,this.elapsed+=c,this.isPaused||(this.willUpdate&&(this.sceneManager.update(c,a),Gb(this,"update",c,a)),this.willRender&&this.renderer.render(this.sceneManager.render(this.frame))),this.frame++,yb.setFrame(this.frame),yb.setElapsed(this.elapsed),requestAnimationFrame(d=>this.step(d))}destroy(){}}function Jq(a,c,d){return Object.prototype.hasOwnProperty.call(a,c)?a[c]:d}function Kq(a,c={}){const d=ei.get(),f=d.scenes.size,i=d.sceneIndex,l=f===0;typeof c==="string"?a.key=c:(c||!c&&l)&&(a.key=Jq(c,"key","scene"+i.toString())),d.scenes.has(a.key)?console.warn("Scene key already in use: "+a.key):(d.scenes.set(a.key,a),d.flush=!0,d.sceneIndex++)}class Nh{constructor(a){this.game=yb.get(),this.events=new Map(),Kq(this,a)}}function se(a){const c=[a],d=[];for(;c.length>0;){const f=c.shift();d.push(f);const i=f.numChildren;if(i>0)for(let l=i-1;l>=0;l--)c.unshift(f.children[l])}return d.shift(),d}function ld(a,c){return a.children.indexOf(c)}function Sh(a,c){const d=a.children;let f;if(c>=0&&c<d.length){const i=d.splice(c,1);i[0]&&(f=i[0],f.parent=null)}return f}function te(a,c){const d=ld(a,c);return d>-1&&Sh(a,d),c}const gl="addedtoworld";const hl="removedfromworld";function fl(a,...c){return c.forEach(d=>{d.world&&(Gb(d.world,hl,d,d.world),Gb(d,hl,d,d.world)),d.world=a,Gb(a,gl,d,a),Gb(d,gl,d,a)}),c}function re(a,...c){c.forEach(f=>{f.parent&&te(f.parent,f),f.parent=a});const d=a.world;return d&&fl(d,...se(a)),c}function oe(a,c){return a.children.push(c),re(a,c),c.transform.updateWorld(),c}function cl(a,...c){return c.forEach(d=>{oe(a,d)}),c}const Ga={CLEAR:0,TRANSFORM:1,UPDATE:2,CHILD_CACHE:4,POST_RENDER:8,COLORS:16,BOUNDS:32,TEXTURE:64,FRAME:128,ALPHA:256,CHILD:512,DEFAULT:1+2+16+32,USER1:536870912,USER2:1073741824,USER3:2147483648,USER4:4294967296};function lg(a,c=0,d){const f=a.children;d===void 0&&(d=f.length);const i=d-c;if(i>0&&i<=d){const l=f.splice(c,i);return l.forEach(q=>{q.parent=null}),l}else return[]}function dl(a,c=0,d){const f=lg(a,c,d);f.forEach(i=>{i.destroy()})}function mg(a,...c){return c.forEach(d=>{te(a,d)}),c}function el(a,c,d=0,f){const i=lg(a,d,f);return re(c,...i),i.forEach(l=>{l.transform.updateWorld()}),i}class qe{constructor(a=1,c=0,d=0,f=1,i=0,l=0){this.set(a,c,d,f,i,l)}set(a=1,c=0,d=0,f=1,i=0,l=0){return this.a=a,this.b=c,this.c=d,this.d=f,this.tx=i,this.ty=l,this}identity(){return this.set()}toArray(){return[this.a,this.b,this.c,this.d,this.tx,this.ty]}fromArray(a){return this.set(a[0],a[1],a[2],a[3],a[4],a[5])}}function $h(a,c,d){return a.width<=0||a.height<=0?!1:a.x<=c&&a.x+a.width>=c&&a.y<=d&&a.y+a.height>=d}class _b{constructor(a=0,c=0,d=0,f=0){this.set(a,c,d,f)}set(a=0,c=0,d=0,f=0){return this.x=a,this.y=c,this.width=d,this.height=f,this}contains(a,c){return $h(this,a,c)}set right(a){a<=this.x?this.width=0:this.width=a-this.x}get right(){return this.x+this.width}set bottom(a){a<=this.y?this.height=0:this.height=a-this.y}get bottom(){return this.y+this.height}}function uq(){}class kd{constructor(a,c=0,d=0,f=!1){this.compareValue=!1,this._x=c,this._y=d,this.callback=a,this.compareValue=f}set(a=0,c=0){return this._x=a,this._y=c,this.callback(this),this}destroy(){this.callback=uq}set x(a){(!this.compareValue||this.compareValue&&a!==this._x)&&(this._x=a,this.callback(this))}get x(){return this._x}set y(a){(!this.compareValue||this.compareValue&&a!==this._x)&&(this._y=a,this.callback(this))}get y(){return this._y}}function rq(a,c,d){const f=d-c;return c+((a-c)%f+f)%f}function Zp(a){return rq(a,-Math.PI,Math.PI)}class _p{constructor(){this._rotation=0,this.type="Camera",this.dirtyRender=!0;const a=yb.get();this.renderer=a.renderer,this.matrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1]),this.bounds=new _b(),this.worldTransform=new qe(),this.position=new kd(()=>this.updateTransform(),0,0),this.scale=new kd(()=>this.updateTransform(),1,1),this.origin=new kd(()=>this.updateTransform(),.5,.5),this.reset()}updateTransform(){const a=this.matrix,c=this.position.x,d=this.position.y,f=this.scale.x,i=this.scale.y,l=-c+this.width*this.origin.x,q=-d+this.height*this.origin.y,u=Math.sin(this.rotation),v=Math.cos(this.rotation),A=u+u,E=u*A,H=v*A,R=(1-E)*f,N=H*f,P=-H*i,V=(1-E)*i;a[0]=R,a[1]=N,a[4]=P,a[5]=V,a[12]=c+l-(R*l+P*q),a[13]=d+q-(N*l+V*q),this.worldTransform.set(v*f,u*f,-u*i,v*i,-c,-d);const Y=this.width*(1/f),fa=this.height*(1/i);this.bounds.set(l-Y/2,q-fa/2,Y,fa),this.dirtyRender=!0}reset(){const a=this.renderer.width,c=this.renderer.height;this.width=a,this.height=c,this.bounds.set(0,0,a,c)}set rotation(a){a!==this._rotation&&(this._rotation=Zp(a),this.updateTransform())}get rotation(){return this._rotation}destroy(){this.position.destroy(),this.scale.destroy(),this.origin.destroy(),this.world=null,this.worldTransform=null,this.renderer=null,this.matrix=null,this.bounds=null}}class $p{constructor(){this.type="StaticCamera",this.dirtyRender=!0;const a=yb.get();this.renderer=a.renderer,this.matrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.bounds=new _b(),this.worldTransform=new qe(),this.reset()}reset(){const a=this.renderer.width,c=this.renderer.height;this.width=a,this.height=c,this.bounds.set(0,0,a,c)}destroy(){this.world=null,this.worldTransform=null,this.renderer=null,this.matrix=null,this.bounds=null}}const Th="destroy";const jq="postupdate";const kq="update";function md(a,c,d,f,i){const l=a.events,q=l.get(c);if(!d)l.delete(c);else if(d instanceof ng)q.delete(d);else{const u=!f,v=i!==void 0;for(const A of q)A.callback===d&&(u&&A.context===f)&&(v&&A.once===i)&&q.delete(A)}return q.size===0&&l.delete(c),a}function pf(a){const{a:c,b:d,c:f,d:i,tx:l,ty:q}=a.world,{x:u,y:v,right:A,bottom:E}=a.extent,H=u*c+v*f+l,R=u*d+v*i+q,N=u*c+E*f+l,P=u*d+E*i+q,V=A*c+E*f+l,Y=A*d+E*i+q,fa=A*c+v*f+l,ga=A*d+v*i+q;return{x0:H,y0:R,x1:N,y1:P,x2:V,y2:Y,x3:fa,y3:ga}}class Uh{constructor(a){this.fixed=!1,this.includeChildren=!0,this.visibleOnly=!0,this.entity=a,this.area=new _b()}set(a,c,d,f){this.area.set(a,c,d,f)}get(){return this.entity.isDirty(Ga.BOUNDS)&&!this.fixed&&this.update(),this.area}updateLocal(){const{x0:a,y0:c,x1:d,y1:f,x2:i,y2:l,x3:q,y3:u}=pf(this.entity.transform),v=Math.min(a,d,i,q),A=Math.min(c,f,l,u),E=Math.max(a,d,i,q),H=Math.max(c,f,l,u);return this.area.set(v,A,E-v,H-A)}update(){const a=this.updateLocal();this.entity.clearDirty(Ga.BOUNDS);if(!this.includeChildren||!this.entity.numChildren)return a;const c=this.visibleOnly,d=this.entity.children;let f=a.x,i=a.y,l=a.right,q=a.bottom;for(let u=0;u<d.length;u++){const v=d[u];if(!v||c&&!v.visible)continue;const A=v.bounds.get();A.x<f&&(f=A.x),A.y<i&&(i=A.y),A.right>l&&(l=A.right),A.bottom>q&&(q=A.bottom)}return a.set(f,i,l-f,q-i)}destroy(){this.entity=null,this.area=null}}class Vh{constructor(a){this.enabled=!1,this.enabledChildren=!0,this.entity=a}destroy(){this.entity=null,this.hitArea=null}}class Ic{constructor(a=0,c=0){this.set(a,c)}set(a=0,c=0){return this.x=a,this.y=c,this}getArray(){return[this.x,this.y]}fromArray(a){return this.set(a[0],a[1])}toString(){return`[x=${this.x}, y=${this.y}]`}}function Xh(a){const c=a.local,d=a.position.x,f=a.position.y,i=a.rotation,l=a.scale.x,q=a.scale.y,u=a.skew.x,v=a.skew.y;c.set(Math.cos(i+v)*l,Math.sin(i+v)*l,-Math.sin(i-u)*q,Math.cos(i-u)*q,d,f)}function jl(a,c){return c.set(a.a,a.b,a.c,a.d,a.tx,a.ty)}function Yh(a){const c=a.parent,d=a.transform,f=d.local,i=d.world;if(!c)jl(f,i);else if(d.passthru)jl(c.transform.world,i);else{const{a:l,b:q,c:u,d:v,tx:A,ty:E}=f,{a:H,b:R,c:N,d:P,tx:V,ty:Y}=c.transform.world;i.set(l*H+q*N,l*R+q*P,u*H+v*N,u*R+v*P,A*H+E*N+V,A*R+E*P+Y)}}class Wh{constructor(a,c=0,d=0){this.passthru=!1,this._rotation=0,this.entity=a,this.local=new qe(),this.world=new qe(),this.position=new kd(()=>this.update(),c,d),this.scale=new kd(()=>this.update(),1,1,!0),this.skew=new kd(()=>this.update(),0,0,!0),this.origin=new kd(()=>this.updateExtent(),Zk,_k),this.extent=new _b()}update(){this.updateLocal(),this.updateWorld()}updateLocal(){this.entity.setDirty(Ga.TRANSFORM,Ga.BOUNDS),Xh(this)}updateWorld(){const a=this.entity;a.setDirty(Ga.TRANSFORM,Ga.BOUNDS),Yh(a),a.numChildren&&this.updateChildren()}updateChildren(){const a=this.entity.children;for(let c=0;c<a.length;c++){const d=a[c];d.transform.updateWorld()}}globalToLocal(a,c,d=new Ic()){const{a:f,b:i,c:l,d:q,tx:u,ty:v}=this.world,A=1/(f*q+l*-i);return d.x=q*A*a+-l*A*c+(v*l-u*q)*A,d.y=f*A*c+-i*A*a+(-v*f+u*i)*A,d}localToGlobal(a,c,d=new Ic()){const{a:f,b:i,c:l,d:q,tx:u,ty:v}=this.world;return d.x=f*a+l*c+u,d.y=i*a+q*c+v,d}setExtent(a,c,d,f){this.extent.set(a,c,d,f),this.entity.setDirty(Ga.TRANSFORM,Ga.BOUNDS)}updateExtent(a,c){const d=this.extent,f=this.entity;a!==void 0&&(d.width=a),c!==void 0&&(d.height=c),d.x=-this.origin.x*d.width,d.y=-this.origin.y*d.height,f.setDirty(Ga.TRANSFORM,Ga.BOUNDS)}set rotation(a){a!==this._rotation&&(this._rotation=a,this.update())}get rotation(){return this._rotation}destroy(){this.position.destroy(),this.scale.destroy(),this.skew.destroy(),this.origin.destroy(),this.entity=null,this.local=null,this.world=null,this.position=null,this.scale=null,this.skew=null,this.origin=null,this.extent=null}}class Hc{constructor(a=0,c=0){this.type="GameObject",this.name="",this.willUpdate=!0,this.willUpdateChildren=!0,this.willRender=!0,this.willRenderChildren=!0,this.willCacheChildren=!1,this.dirty=0,this.dirtyFrame=0,this.visible=!0,this.children=[],this.events=new Map(),this.transform=new Wh(this,a,c),this.bounds=new Uh(this),this.input=new Vh(this),this.dirty=Ga.DEFAULT,this.transform.update()}isRenderable(){return this.visible&&this.willRender}isDirty(a){return(this.dirty&a)!==0}clearDirty(a){return this.isDirty(a)&&(this.dirty^=a),this}setDirty(a,c){return this.isDirty(a)||(this.dirty^=a,this.dirtyFrame=yb.getFrame()),this.isDirty(c)||(this.dirty^=c),this}update(a,c){if(this.willUpdateChildren){const d=this.children;for(let f=0;f<d.length;f++){const i=d[f];i&&i.willUpdate&&i.update(a,c)}}this.postUpdate(a,c)}postUpdate(a,c){}renderGL(a){}renderCanvas(a){}postRenderGL(a){}postRenderCanvas(a){}get numChildren(){return this.children.length}destroy(a){a?el(this,a):dl(this),Gb(this,Th,this),this.transform.destroy(),this.bounds.destroy(),this.input.destroy(),this.events.clear(),this.world=null,this.parent=null,this.children=null}}const ai="worldrender";const bi="worldshutdown";var xw=Object.freeze({__proto__:null,WorldRenderEvent:ai,WorldShutdownEvent:bi});function fi(a,c){c.numRendered++,c.numRenderable++,a.node.dirtyFrame>=c.gameFrame&&c.dirtyFrame++,a.children.forEach(d=>{d.children.length>0&&fi(d,c)})}function ul(a){if(a.node.isDirty(Ga.CHILD_CACHE))return!0;const c=[a];for(;c.length>0;){const d=c.pop();if(d.node.isDirty(Ga.TRANSFORM))return!0;const f=d.children.length;if(f>0)for(let i=0;i<f;i++)c.push(d.children[i])}return c.length=0,!1}function tl(a,c){a.forEach(d=>{c||ul(d)?d.node.setDirty(Ga.CHILD_CACHE):d.children.length=0})}function gi(a,c,d=[]){for(let f=0;f<c.numChildren;f++){const i=c.children[f];if(i.isRenderable()){const l=[],q={node:i,children:l};d.push(q),i.willRenderChildren&&i.numChildren>0&&(i.willCacheChildren&&a.push(q),gi(a,i,l))}}return d}function rl(a){const c=[],d=[],f=gi(c,a,d),i=a.renderData;c.length>0&&tl(c,a.camera.dirtyRender),f.forEach(l=>{l.children.length?fi(l,i):(i.numRendered++,i.numRenderable++,l.node.dirtyFrame>=i.gameFrame&&i.dirtyFrame++)}),i.renderList=f,a.forceRefresh&&(i.dirtyFrame++,a.forceRefresh=!1)}function sl(a,c){a.numDirtyFrames+=c.dirtyFrame,a.numTotalFrames+=c.numRendered,c.camera.dirtyRender&&a.numDirtyCameras++,a.worldData.push(c)}function vg(a,c){a.gameFrame=c,a.dirtyFrame=0,a.numRendered=0,a.numRenderable=0,a.renderList.length=0}class ze extends Hc{constructor(a){super();this.forceRefresh=!1,this.type="BaseWorld",this.scene=a,this.world=this,this.events=new Map(),this._updateListener=mc(a,"update",(c,d)=>this.update(c,d)),this._renderListener=mc(a,"render",c=>this.render(c)),this._shutdownListener=mc(a,"shutdown",()=>this.shutdown()),ue(a,"destroy",()=>this.destroy())}update(a,c){if(!this.willUpdate)return;Gb(this,kq,a,c,this),super.update(a,c)}postUpdate(a,c){Gb(this,jq,a,c,this)}render(a){const c=this.renderData;vg(c,a.gameFrame);if(!this.willRender||!this.visible)return;rl(this),Gb(this,ai,c,this),sl(a,c),this.camera&&(this.camera.dirtyRender=!1)}shutdown(){const a=this.scene;md(a,"update",this._updateListener),md(a,"render",this._renderListener),md(a,"shutdown",this._shutdownListener),mg(this),Gb(this,bi,this),vg(this.renderData,0),this.camera&&this.camera.reset()}destroy(a){super.destroy(a),Gb(this,Th,this),vg(this.renderData,0),this.camera&&this.camera.destroy(),this.events.clear(),this.camera=null,this.renderData=null,this.events=null}}function wg(a){return{camera:a,gameFrame:0,dirtyFrame:0,numRendered:0,numRenderable:0,renderList:[]}}class Pk extends ze{constructor(a){super(a);this.type="StaticWorld",this.camera=new $p(),this.renderData=wg(this.camera)}}class Bw extends ze{constructor(a){super(a);this.enableCameraCull=!0,this.type="World",this.camera=new _p(),this.renderData=wg(this.camera)}}function lq(a,c){const d=a.texture,f=c.shaders.current,i=f.buffer,l=d.binding;f.count===i.batchSize&&c.flush();const q=a.vertexData;c.textures.request(d);const u=l.index;q[4]=u,q[10]=u,q[16]=u,q[22]=u;const v=f.count*i.quadElementSize;i.vertexViewF32.set(q,v);const A=a.vertexColor,E=i.vertexViewU32;E[v+5]=A[0],E[v+11]=A[2],E[v+17]=A[3],E[v+23]=A[1],f.count++}var sw=Object.freeze({__proto__:null,BoundsComponent:Uh,InputComponent:Vh,GetVertices:pf,TransformComponent:Wh,UpdateLocalTransform:Xh,UpdateWorldTransform:Yh});class ve extends Hc{constructor(a=0,c=0){super(a,c);this._alpha=1,this.type="Container"}setSize(a,c=a){return this.transform.updateExtent(a,c),this}setPosition(a,c){return this.transform.position.set(a,c),this}setOrigin(a,c=a){return this.transform.origin.set(a,c),this}setSkew(a,c=a){return this.transform.skew.set(a,c),this}setScale(a,c=a){return this.transform.scale.set(a,c),this}setRotation(a){return this.transform.rotation=a,this}set width(a){this.transform.updateExtent(a)}get width(){return this.transform.extent.width}set height(a){this.transform.updateExtent(void 0,a)}get height(){return this.transform.extent.height}set x(a){this.transform.position.x=a}get x(){return this.transform.position.x}set y(a){this.transform.position.y=a}get y(){return this.transform.position.y}set originX(a){this.transform.origin.x=a}get originX(){return this.transform.origin.x}set originY(a){this.transform.origin.y=a}get originY(){return this.transform.origin.y}set skewX(a){this.transform.skew.x=a}get skewX(){return this.transform.skew.x}set skewY(a){this.transform.skew.y=a}get skewY(){return this.transform.skew.y}set scaleX(a){this.transform.scale.x=a}get scaleX(){return this.transform.scale.x}set scaleY(a){this.transform.scale.y=a}get scaleY(){return this.transform.scale.y}set rotation(a){this.transform.rotation=a}get rotation(){return this.transform.rotation}get alpha(){return this._alpha}set alpha(a){a!==this._alpha&&(this._alpha=a,this.setDirty(Ga.TRANSFORM))}}function mq(a,c){const d=a.frame;if(!d)return;const f=c.ctx,i=a.transform,{a:l,b:q,c:u,d:v,tx:A,ty:E}=i.world,{x:H,y:R}=i.extent;f.save(),f.setTransform(l,q,u,v,A,E),f.globalAlpha=a.alpha,f.drawImage(d.texture.image,d.x,d.y,d.width,d.height,H,R,d.width,d.height),f.restore()}function ye(a,c){const d=(c*255|0)&255;return(d<<24|a)>>>0}function we(a){const c=a.vertexAlpha,d=a.vertexTint,f=a.vertexColor;return f[0]=ye(d[0],c[0]),f[1]=ye(d[1],c[1]),f[2]=ye(d[2],c[2]),f[3]=ye(d[3],c[3]),a}function qg(a,c,...d){const f=a.getFrame(c),{u0:i,u1:l,v0:q,v1:u,pivot:v}=f;return d.forEach(A=>{if(!A||f===A.frame)return;A.frame=f,v&&A.setOrigin(v.x,v.y),A.frame.setExtent(A),A.hasTexture=!0;const E=A.vertexData;E[2]=i,E[3]=q,E[8]=i,E[9]=u,E[14]=l,E[15]=u,E[20]=l,E[21]=q}),d}function ll(a,c,...d){if(!a)d.forEach(f=>{f.texture=null,f.frame=null,f.hasTexture=!1});else{let f;a instanceof $b?f=a:f=Tb.get().get(a),f?(d.forEach(i=>{i.texture=f}),qg(f,c,...d)):console.warn(`Invalid Texture key: ${a}`)}return d}function ml(a){const c=a.vertexData,{x0:d,y0:f,x1:i,y1:l,x2:q,y2:u,x3:v,y3:A}=pf(a.transform);return c[0]=d,c[1]=f,c[6]=i,c[7]=l,c[12]=q,c[13]=u,c[18]=v,c[19]=A,a}class vc extends ve{constructor(a,c,d,f){super(a,c);this.hasTexture=!1,this._tint=16777215,this.type="Sprite",this.vertexData=new Float32Array(24).fill(0),this.vertexColor=new Uint32Array(4).fill(4294967295),this.vertexAlpha=new Float32Array(4).fill(1),this.vertexTint=new Uint32Array(4).fill(16777215),this.setTexture(d,f)}setTexture(a,c){return ll(a,c,this),this}setFrame(a){return qg(this.texture,a,this),this}isRenderable(){return this.visible&&this.willRender&&this.hasTexture&&this.alpha>0}preRender(){this.isDirty(Ga.COLORS)&&(we(this),this.clearDirty(Ga.COLORS)),this.isDirty(Ga.TRANSFORM)&&(ml(this),this.clearDirty(Ga.TRANSFORM))}renderGL(a){this.preRender(),lq(this,a)}renderCanvas(a){this.preRender(),mq(this,a)}get alpha(){return this._alpha}set alpha(a){if(a!==this._alpha){this._alpha=a;const c=this.vertexAlpha;c[0]=a,c[1]=a,c[2]=a,c[3]=a,this.setDirty(Ga.ALPHA)}}get tint(){return this._tint}set tint(a){if(a!==this._tint){this._tint=a;const c=this.vertexTint;c[0]=a,c[1]=a,c[2]=a,c[3]=a,this.setDirty(Ga.COLORS)}}destroy(a){super.destroy(a),this.texture=null,this.frame=null,this.hasTexture=!1,this.vertexData=null,this.vertexColor=null,this.vertexAlpha=null,this.vertexTint=null}}class qw extends vc{constructor(a,c,d,f){super(a,c,d,f);this.type="AnimatedSprite",this.anims=new Map(),this.animData={currentAnim:"",currentFrames:[],frameIndex:0,animSpeed:0,nextFrameTime:0,repeatCount:0,isPlaying:!1,yoyo:!1,pendingStart:!1,playingForward:!0,delay:0,repeatDelay:0,onStart:null,onRepeat:null,onComplete:null}}stop(){const a=this.animData;a.isPlaying=!1,a.currentAnim="",a.onComplete&&a.onComplete(this,a.currentAnim)}nextFrame(){const a=this.animData;a.frameIndex++;if(a.frameIndex===a.currentFrames.length)if(a.yoyo)a.frameIndex--,a.playingForward=!1;else if(a.repeatCount===-1||a.repeatCount>0)a.frameIndex=0,a.repeatCount!==-1&&a.repeatCount--,a.onRepeat&&a.onRepeat(this,a.currentAnim),a.nextFrameTime+=a.repeatDelay;else return a.frameIndex--,this.stop();this.setFrame(a.currentFrames[a.frameIndex]),a.nextFrameTime+=a.animSpeed}prevFrame(){const a=this.animData;a.frameIndex--;if(a.frameIndex===-1)if(a.repeatCount===-1||a.repeatCount>0)a.frameIndex=0,a.playingForward=!0,a.repeatCount!==-1&&a.repeatCount--,a.onRepeat&&a.onRepeat(this,a.currentAnim),a.nextFrameTime+=a.repeatDelay;else return a.frameIndex=0,this.stop();this.setFrame(a.currentFrames[a.frameIndex]),a.nextFrameTime+=a.animSpeed}update(a,c){super.update(a,c);const d=this.animData;if(!d.isPlaying)return;d.nextFrameTime-=a*1e3,d.nextFrameTime=Math.max(d.nextFrameTime,0),d.nextFrameTime===0&&(d.pendingStart?(d.onStart&&d.onStart(this,d.currentAnim),d.pendingStart=!1,d.nextFrameTime=d.animSpeed):d.playingForward?this.nextFrame():this.prevFrame())}get isPlaying(){return this.animData.isPlaying}get isPlayingForward(){return this.animData.isPlaying&&this.animData.playingForward}get currentAnimation(){return this.animData.currentAnim}destroy(a){super.destroy(a),this.anims.clear(),this.animData=null}}function il(a,c,d,f,i,l,q=0,u=1,v=1,A=0,E=0){const H=Math.cos(q+E)*u,R=Math.sin(q+E)*u,N=-Math.sin(q-A)*v,P=Math.cos(q-A)*v,V=a*H+d*N+i,Y=a*R+d*P+l,fa=a*H+f*N+i,ga=a*R+f*P+l,la=c*H+f*N+i,ia=c*R+f*P+l,oa=c*H+d*N+i,pa=c*R+d*P+l;return{x0:V,y0:Y,x1:fa,y1:ga,x2:la,y2:ia,x3:oa,y3:pa}}function Zh(a,c,d,f,i,l,q,u,v,A=0,E=4294967295){const H=a.shaders.current,R=H.buffer,N=R.vertexViewF32,P=R.vertexViewU32,V=H.count*R.quadElementSize;N[V+0]=c,N[V+1]=d,N[V+2]=l,N[V+3]=v,N[V+4]=A,P[V+5]=E,N[V+6]=c,N[V+7]=d+i,N[V+8]=l,N[V+9]=q,N[V+10]=A,P[V+11]=E,N[V+12]=c+f,N[V+13]=d+i,N[V+14]=u,N[V+15]=q,N[V+16]=A,P[V+17]=E,N[V+18]=c+f,N[V+19]=d,N[V+20]=u,N[V+21]=v,N[V+22]=A,P[V+23]=E,H.count++}function og(a,c,d,f,i,l,q,u,v,A=0,E=4294967295){a.shaders.setDefault(A),Zh(a,c,d,f,i,l,q,u,v,A,E),a.shaders.popAndRebind()}class pg extends Hc{constructor(){super();this.type="Layer",this.transform.passthru=!0,this.willRender=!1}}class kl extends pg{constructor(){super();this.type="RenderLayer",this.willRender=!0,this.willRenderChildren=!0,this.willCacheChildren=!0,this.setDirty(Ga.CHILD_CACHE);const a=Jd(),c=Kd(),d=Ld(),f=new $b(null,a*d,c*d);f.binding=new qf(f),f.binding.framebuffer=_h(f.binding.texture),this.texture=f,this.framebuffer=f.binding.framebuffer}renderGL(a){this.numChildren>0&&(a.flush(),this.isDirty(Ga.CHILD_CACHE)?(a.fbo.add(this.framebuffer,!0),this.clearDirty(Ga.CHILD_CACHE)):(a.fbo.add(this.framebuffer,!1),this.postRenderGL(a)))}postRenderGL(a){const c=this.texture;a.flush(),a.fbo.pop();const{u0:d,v0:f,u1:i,v1:l}=c.firstFrame;a.textures.bind(c),og(a,0,0,c.width,c.height,d,f,i,l),a.textures.unbind(),this.clearDirty(Ga.TRANSFORM)}}class rw extends kl{constructor(){super();this.shaders=[],this.type="EffectLayer"}postRenderGL(a){const c=this.shaders,d=this.texture;a.flush(),a.fbo.pop();if(c.length===0){const{u0:f,v0:i,u1:l,v1:q}=d.firstFrame;a.textures.bind(d),og(a,0,0,d.width,d.height,f,i,l,q),a.textures.unbind()}else{let f=d;for(let v=0;v<c.length;v++){const A=c[v],{u0:E,v0:H,u1:R,v1:N}=f.firstFrame;a.shaders.set(A,0)&&(A.renderToFBO=!0,a.textures.bind(f),Zh(a,0,0,f.width,f.height,E,H,R,N),a.shaders.pop(),a.textures.unbind(),f=A.texture)}const{u0:i,v0:l,u1:q,v1:u}=f.firstFrame;a.textures.bind(f),og(a,0,0,f.width,f.height,i,l,q,u),a.textures.unbind()}this.clearDirty(Ga.TRANSFORM)}}function nq(a,c){const d=a.texture,f=c.shaders.current,i=f.buffer;c.flush(),c.textures.request(d),a.updateTextureIndex();const l=c.gl;f.bindBuffers(a.indexBuffer,a.vertexBuffer),l.bufferData(l.ARRAY_BUFFER,a.data,l.STATIC_DRAW),l.drawElements(l.TRIANGLES,a.count*i.quadIndexSize,l.UNSIGNED_SHORT,0),f.prevCount=a.count,c.flushTotal++,f.bindBuffers(i.indexBuffer,i.vertexBuffer)}function oq(a,c,d){return Math.max(c,Math.min(d,a))}class tw extends pg{constructor(a,c){super();this.glTextureIndex=0,this.hasTexture=!1,this.type="SpriteBatch",this.willRender=!0,this.setTexture(c),this.setMaxSize(a)}resetBuffers(){let a=[];for(let d=0;d<this.maxSize*4;d+=4)a.push(d+0,d+1,d+2,d+2,d+3,d+0);this.data=new ArrayBuffer(this.maxSize*96),this.index=new Uint16Array(a),this.vertexViewF32=new Float32Array(this.data),this.vertexViewU32=new Uint32Array(this.data);const c=Hb.get();c&&(xe(this.vertexBuffer),xe(this.indexBuffer),this.vertexBuffer=c.createBuffer(),this.indexBuffer=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer),c.bufferData(c.ARRAY_BUFFER,this.data,c.STATIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.indexBuffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,this.index,c.STATIC_DRAW),c.bindBuffer(c.ARRAY_BUFFER,null)),a=[],this.count=0}setMaxSize(a){return this.maxSize=oq(a,0,65535),this.resetBuffers(),this}setTexture(a){let c;return a instanceof $b?c=a:c=Tb.get().get(a),c?(this.texture=c,this.hasTexture=!0,this.glTextureIndex=-1):console.warn(`Invalid Texture key: ${a}`),this}isRenderable(){return this.visible&&this.willRender&&this.hasTexture&&this.count>0}clear(){return this.count=0,this}addToBatch(a,c,d,f,i,l,q,u,v,A){if(this.count>=this.maxSize)return console.warn("SpriteBatch full"),this;const{u0:E,u1:H,v0:R,v1:N}=a,P=this.vertexViewF32,V=this.vertexViewU32,Y=this.count*24,fa=this.texture.binding?this.texture.binding.index:0;return P[Y+0]=d,P[Y+1]=f,P[Y+2]=E,P[Y+3]=R,P[Y+4]=fa,V[Y+5]=c,P[Y+6]=i,P[Y+7]=l,P[Y+8]=E,P[Y+9]=N,P[Y+10]=fa,V[Y+11]=c,P[Y+12]=q,P[Y+13]=u,P[Y+14]=H,P[Y+15]=N,P[Y+16]=fa,V[Y+17]=c,P[Y+18]=v,P[Y+19]=A,P[Y+20]=H,P[Y+21]=R,P[Y+22]=fa,V[Y+23]=c,this.setDirty(Ga.TRANSFORM),this.count++,this}add(a){const{frame:c=null,x:d=0,y:f=0,rotation:i=0,scaleX:l=1,scaleY:q=1,skewX:u=0,skewY:v=0,originX:A=0,originY:E=0,alpha:H=1,tint:R=16777215}=a,N=this.texture.getFrame(c),{left:P,right:V,top:Y,bottom:fa}=N.getExtent(A,E),{x0:ga,y0:la,x1:ia,y1:oa,x2:pa,y2:ja,x3:I,y3:O}=il(P,V,Y,fa,d,f,i,l,q,u,v),x=ye(R,H);return this.addToBatch(N,x,ga,la,ia,oa,pa,ja,I,O)}addXY(a,c,d){const f=this.texture.getFrame(d),{left:i,right:l,top:q,bottom:u}=f.getExtent(0,0),{x0:v,y0:A,x1:E,y1:H,x2:R,y2:N,x3:P,y3:V}=il(i,l,q,u,a,c);return this.addToBatch(f,4294967295,v,A,E,H,R,N,P,V)}updateTextureIndex(){const a=this.texture.binding.index;if(a===this.glTextureIndex)return;const c=this.vertexViewF32;this.glTextureIndex=a;for(let d=0;d<this.count;d++)c[d*24+4]=a,c[d*24+10]=a,c[d*24+16]=a,c[d*24+22]=a}renderGL(a){nq(this,a)}destroy(){super.destroy(),xe(this.vertexBuffer),xe(this.indexBuffer),this.data=null,this.vertexViewF32=null,this.vertexViewU32=null,this.index=null,this.texture=null,this.hasTexture=!1}}function Md(a=32,c=32){const d=ug(a,c);return new $b(d.canvas)}class Oh extends vc{constructor(a,c,d="",f,i){super(a,c,Md());this.splitRegExp=/(?:\r\n|\r|\n)/,this.padding={left:0,right:0,top:0,bottom:0},this.verticalAlign="ascent",this.lineSpacing=0,this.font="16px monospace",this.fillStyle="#fff",this.strokeStyle="",this.backgroundStyle="",this.cornerRadius=0,this.textAlign="left",this.textBaseline="alphabetic",this.lineWidth=0,this.lineDash=[],this.antialias=!1,this.type="Text";const l=yb.get();this.resolution=l.renderer.resolution,this.canvas=this.texture.image,this.context=this.canvas.getContext("2d"),f&&(this.font=f),i&&(this.fillStyle=i),this.setText(d)}syncContext(a,c){this.preRenderCallback&&this.preRenderCallback(a,c),c.font=this.font,c.textBaseline=this.textBaseline,c.textAlign=this.textAlign,c.fillStyle=this.fillStyle,c.strokeStyle=this.strokeStyle,c.lineWidth=this.lineWidth,c.lineCap="round",c.lineJoin="round",c.setLineDash(this.lineDash),c.imageSmoothingEnabled=this.antialias}updateText(){const a=this.canvas,c=this.context,d=this.resolution,f=this._text.split(this.splitRegExp),i=this.padding,l=this.fillStyle,q=this.strokeStyle,u=this.lineWidth,v=this.lineSpacing,A=u>0?u/2:0;c.clearRect(0,0,a.width,a.height),this.syncContext(a,c),c.textAlign="start";let E=0,H=0,R=0;const N=[],P=this.verticalAlign==="ascent",V=c.measureText("|MÉq"),Y=Math.ceil(Math.abs(V.actualBoundingBoxAscent)+Math.abs(V.actualBoundingBoxDescent))+u;for(let x=0;x<f.length;x++){const G=c.measureText(f[x]),F=G.actualBoundingBoxLeft,J=G.actualBoundingBoxRight;let U=G.actualBoundingBoxAscent,K=G.actualBoundingBoxDescent;(!U&&!K||f[x]==="")&&(U=Y,K=0);const ca=Math.ceil(Math.abs(F)+Math.abs(J))+u,ba=Math.ceil(Math.abs(U)+Math.abs(K))+u;P?(R+=U+A,x>0&&(R+=v+A),H=R+K+A):(R=H+(ba-K-A),H+=ba,x<f.length-1&&(H+=v)),E=Math.max(E,ca),N.push({lineWidth:ca,lineHeight:ba,ascent:U,descent:K,left:F,right:J,y:R})}E+=i.left+i.right,H+=i.top+i.bottom;const fa=this.fixedWidth?this.fixedWidth:E,ga=this.fixedHeight?this.fixedHeight:H,la=Math.ceil(fa*d),ia=Math.ceil(ga*d);(a.width!==la||a.height!==ia)&&(a.width=la,a.height=ia,this.texture.setSize(fa,ga),this.setSize(fa,ga)),c.save(),c.scale(d,d),this.syncContext(a,c);const oa=this.backgroundStyle;if(oa){c.save(),c.fillStyle=oa,c.strokeStyle=oa;const x=this.cornerRadius,G=x>0?x/2:0;x&&(c.lineWidth=x,c.strokeRect(G,G,fa-x,ga-x)),c.fillRect(G,G,fa-x,ga-x),c.restore()}const pa=this.textAlign,ja=pa==="center",I=pa==="right"||pa==="end",O=(ga-H)/2+i.top;for(let x=0;x<f.length;x++){const G=f[x],F=N[x];let J=i.left+F.left+A;const U=O+F.y;ja?J=fa/2:I&&(J=fa-A),q&&c.strokeText(G,J,U),l&&c.fillText(G,J,U)}return c.restore(),this.texture.binding&&this.texture.binding.update(),this.setDirty(Ga.TEXTURE),this}get text(){return this._text}set text(a){this.setText(a)}setText(a=""){return Array.isArray(a)&&(a=a.join(`
`)),a!==this._text&&(this._text=a.toString(),this.updateText()),this}destroy(a){this.texture.destroy(),this.fillStyle=null,this.strokeStyle=null,this.backgroundStyle=null,this.canvas=null,this.context=null,super.destroy(a)}}function Qk(a,...c){return c.forEach(d=>{const f=d.vertexTint;f[0]=a,f[1]=a,f[2]=a,f[3]=a,we(d)}),c}function Rk(a,c){return Math.floor(Math.random()*(c-a+1)+a)}function sd(a,c,d,f=1){let i;if(typeof a==="string"){let u=Tb.get();u.has(a)||u.add(a,Md()),i=u.get(a)}else i=a;let l=i.image,q=l.getContext("2d");return d?c.call(d,l,q):c(l,q),i.setSize(l.width/f,l.height/f),i.binding&&i.binding.update(),i}var fh;(function(a){a[a.left=1]="left",a[a.right=2]="right",a[a.both=3]="both"})(fh||(fh={}));function Vv(a,c=0,d=" ",f=1){a=a.toString();let i=0;if(c+1>=a.length)switch(f){case 1:a=new Array(c+1-a.length).join(d)+a;break;case 3:i=c-a.length;let l=Math.ceil(i/2),q=i-l;a=new Array(q+1).join(d)+a+new Array(l+1).join(d);break;default:a=a+new Array(c+1-a.length).join(d);break}return a}function cc(a,c,d){switch(typeof a){case"number":return`#${Vv(Math.floor(a).toString(16),6,"0",fh.left)}`;case"function":return a(c,d);default:return a}}function lj(a,c,d,f,i,l,q,u,v,A,E=!0){c.beginPath(),c.rect(d,f,i,l);if(q!==void 0){if(A!==void 0){let H;E?H=c.createLinearGradient(0,0,i,0):H=c.createLinearGradient(0,0,0,l),H.addColorStop(0,q),H.addColorStop(1,A),q=H}c.fillStyle=q,c.fill()}u!==void 0&&(c.strokeStyle=u,c.lineWidth=v,c.stroke())}function Sk(a,{width:c=32,height:d=c,fillStyle:f,fillColor2:i,isHorizontalGradient:l=!0,strokeStyle:q,lineWidth:u=2}={}){return sd(a,function(v,A){v.width=Math.ceil(c),v.height=Math.ceil(d),q||(u=0);const E=u/2,H=E,R=E;c-=u,d-=u,lj(v,A,H,R,c,d,cc(f,v,A),cc(q,v,A),u,cc(i,v,A),l)})}class Qv{constructor(a=0,c=a,d=0,f=d,i=0){this._width=0;this._height=0;this.cornerRadius={tl:Dc(0),tr:Dc(0),bl:Dc(0),br:Dc(0)};this.setTo(a,c,d,f,i)}setTo(a=0,c=a,d=0,f=d,i=0){return this.setPosition(a,c),this.setRadius(i),this.setSize(d,f),this}setPosition(a=0,c=a){return this.x=a,this.y=c,this}setRadius(a=0){let c=this.cornerRadius;if(typeof a==="number"){const d=a,f=a;c.tl=Dc(void 0,d,f),c.tr=Dc(void 0,d,f),c.bl=Dc(void 0,d,f),c.br=Dc(void 0,d,f)}else{const d=a.x??0,f=a.y??0;c.tl=Dc(a.tl,d,f),c.tr=Dc(a.tr,d,f),c.bl=Dc(a.bl,d,f),c.br=Dc(a.br,d,f)}return this}setSize(a=0,c=a){return this.width=a,this.height=c,this}get minWidth(){let a=this.cornerRadius;return Math.max(a.tl.x+a.tr.x,a.bl.x+a.br.x)}get minHeight(){let a=this.cornerRadius;return Math.max(a.tl.y+a.bl.y,a.tr.y+a.br.y)}get width(){return this._width}set width(a){a==null&&(a=0),this._width=Math.max(a,this.minWidth)}get height(){return this._height}set height(a){a==null&&(a=0),this._height=Math.max(a,this.minHeight)}get radius(){let a=this.cornerRadius,c=Math.max(a.tl.x,a.tl.y,a.tr.x,a.tr.y,a.bl.x,a.bl.y,a.br.x,a.br.y);return c}}function Dc(a,c,d){return a===void 0?{x:c,y:d}:typeof a==="number"?{x:a,y:a}:a}const Wy=Math.PI/180;function Qd(a){return a*Wy}const Rv=Qd(0),Sv=Qd(90),Tv=Qd(180),Uv=Qd(270);function kj(a,c,d,f,i,l,q){const u=new Qv(c,d,f,i,l),v=u.minWidth,A=u.minHeight,E=f>=v?1:f/v,H=i>=A?1:i/A,R=u.cornerRadius;let N,P,V,Y,fa;a.beginPath(),a.translate(c,d),N=R.br,P=N.x*E,V=N.y*H,Y=f-P,fa=i-V,P>0&&V>0?Nj(a,Y,fa,P,V,Rv,Sv,q):(a.moveTo(f,fa),a.lineTo(f,i),a.lineTo(Y,i)),N=R.bl,P=N.x*E,V=N.y*H,Y=P,fa=i-V,a.lineTo(P,i),P>0&&V>0?Nj(a,Y,fa,P,V,Sv,Tv,q):(a.lineTo(0,i),a.lineTo(0,fa)),N=R.tl,P=N.x*E,V=N.y*H,Y=P,fa=V,a.lineTo(0,fa),P>0&&V>0?Nj(a,Y,fa,P,V,Tv,Uv,q):(a.lineTo(0,0),a.lineTo(Y,0)),N=R.tr,P=N.x*E,V=N.y*H,Y=f-P,fa=V,a.lineTo(Y,0),P>0&&V>0?Nj(a,Y,fa,P,V,Uv,Rv,q):(a.lineTo(f,0),a.lineTo(f,fa)),a.closePath()}var Nj=function(a,c,d,f,i,l,q,u){if(u===void 0)a.ellipse(c,d,f,i,0,l,q);else{u+=1;let v=(q-l)/u;for(let A=0;A<=u;A++){const E=l+v*A,H=c+f*Math.cos(E),R=d+i*Math.sin(E);a.lineTo(H,R)}}};function Tg(a,c,d,f,i,l,q,u,v,A,E,H=!0,R){kj(c,d,f,i,l,q,R);if(u!==void 0){if(E!==void 0){let N;H?N=c.createLinearGradient(0,0,i,0):N=c.createLinearGradient(0,0,0,l),N.addColorStop(0,u),N.addColorStop(1,E),u=N}c.fillStyle=u,c.fill()}v!==void 0&&(c.strokeStyle=v,c.lineWidth=A,c.stroke())}var Jv;(function(a){a[a.right=0]="right",a[a.down=1]="down",a[a.left=2]="left",a[a.up=3]="up"})(Jv||(Jv={}));var Xn;(function(a){a[a.IDLE=0]="IDLE",a[a.UPDATING=1]="UPDATING"})(Xn||(Xn={}));function hj(a,c,d){const f=Math.ceil(c*a.resolution),i=Math.ceil(d*a.resolution),l=a.canvas;if(l.width===f&&l.height===i){ij(a);return}l.width=f,l.height=i,a.texture.setSize(c,d),a.setSize(c,d),a.updateTexture()}function ij(a){a.context.clearRect(0,0,a.canvas.width,a.canvas.height),a.updateTexture()}function hn(a,c="#fff"){let d=a.context;d.fillStyle=c,d.fillRect(0,0,a.canvas.width,a.canvas.height),a.updateTexture()}function jj(a,c,d){const f=new Image();f.onload=function(){const i=a.resolution,l=f.width/i,q=f.height/i;hj(a,l,q),a.context.drawImage(f,0,0),a.updateTexture(),d&&d(),f.onload=null,f.src="",f.remove()},f.src=c}function jn(a,c){return new Promise(function(d,f){jj(a,c,d)})}function kn(a,c,d){return a.canvas.toDataURL(c,d)}function ln(a,c,d,f=[0,0,0,0]){const i=a.context.getImageData(c,d,1,1).data;return f[0]=i[0],f[1]=i[1],f[2]=i[2],f[3]=i[3],f}function mn(a,c,d,f,i,l,q){q===void 0&&(q=f!==0||i!==0||l!==0?255:0);const u=a.context.createImageData(1,1);u.data[0]=f,u.data[1]=i,u.data[2]=l,u.data[3]=q,a.context.putImageData(u,c,d),a.updateTexture()}class Ac extends vc{constructor(a=0,c=0,d=32,f=32){super(a,c,Md());this.type="rexCanvas";const i=yb.get();this.resolution=i.renderer.resolution,this.canvas=this.texture.image,this.context=this.canvas.getContext("2d"),this.resize(d,f)}updateTexture(){return this.texture.binding&&this.texture.binding.update(),this.setDirty(Ga.TEXTURE),this}destroy(a){this.texture.destroy(),this.canvas=null,this.context=null,super.destroy(a)}resize(a,c){return hj(this,a,c),this}clear(){return ij(this),this}}function It(a,c){c.width!==a.width&&(c.width=a.width),c.height!==a.height&&(c.height=a.height);let d=c.getContext("2d");return d.drawImage(a.texture.image,a.x,a.y,a.width,a.height),c}function nn(a,c,d=0,f=0,i=a.width,l=a.height){const q=a.resolution,u=a.canvas,v=Math.ceil(i*q),A=Math.ceil(l*q);sd(c,function(E,H){E.width!==v&&(E.width=v),E.height!==A&&(E.height=A),H.clearRect(0,0,v,A),H.drawImage(u,d,f,v,A)},void 0,a.resolution)}function on(a,c,d){const f=Tb.get();if(!f.has(c))return;It(f.get(c).getFrame(d),a.canvas);const i=a.canvas.width,l=a.canvas.height,q=a.resolution,u=i/q,v=l/q;a.texture.setSize(u,v),a.setSize(u,v),a.updateTexture()}class pn extends Ac{fill(a="#fff"){return hn(this,a),this}getCanvas(){return this.canvas}getContext(){return this.context}getDataURL(a,c){return kn(this,a,c)}getPixel(a,c,d=[0,0,0,0]){return ln(this,a,c,d)}generateTexture(a,c=0,d=0,f=this.width,i=this.height){return nn(this,a,c,d,f,i),this}loadFromURL(a,c){return jj(this,a,c),this}loadFromURLPromise(a){return jn(this,a)}loadTexture(a,c){return on(this,a,c),this}setPixel(a,c,d,f,i,l){return mn(this,a,c,d,f,i,l),this}}const Zna=Rb(Oq());function Jt(a,c){const d=new Zna.Chart(a.context,gy(a,c));return d}function gy(a,c={}){c.hasOwnProperty("options")||(c.options={});const d=c.options;d.responsive=!1,d.maintainAspectRatio=!1,d.hasOwnProperty("devicePixelRatio")||(d.devicePixelRatio=1);let f=!1;d.hasOwnProperty("animation")?d.animation===!1&&(f=!0,d.animation={}):d.animation={};const i=d.animation;f&&(i.duration=0);const l=i.onProgress;i.onProgress=function(u){l&&l(u),a.updateTexture()};const q=i.onComplete;return i.onComplete=function(u){q&&q(u),a.updateTexture()},c}function Kt(a,c,d){a.height=c,a.width=d,a.aspectRatio=a.height?a.width/a.height:null,a.update()}function Jf(a,c){if(typeof c==="string"){const d=a.data.datasets;for(let f=0,i=d.length;f<i;f++){const l=d[f];if(l.label===c)return l}}else return a.data.datasets[c];return null}function Lt(a,c,d){const f=Jf(a,c);if(!f)return;if(typeof d==="string"){const i=a.data.labels;d=i.indexOf(d);if(d===-1)return}return f.data[d]}function Mt(a,c,d,f){const i=Jf(a,c);if(!i)return;if(typeof d==="string"){const l=a.data.labels;d=l.indexOf(d);if(d===-1)return}i.data[d]=f}class Qg extends Ac{constructor(a=0,c=0,d=1,f=1,i={}){super(a,c,d,f);this.type="rexChart";this.setChart(i)}destroy(a){this.chart&&(this.chart.destroy(),this.chart=null),super.destroy(a)}setChart(a={}){return this.chart&&this.chart.destroy(),this.chart=Jt(this,a),this}resize(a=this.width,c=this.height){return a===this.width&&c===this.height?this:(super.resize(a,c),this.chart&&Kt(this.chart,this.canvas.width,this.canvas.height),this)}getChartDataset(a){let c;return this.chart&&(c=Jf(this.chart,a)),c}getChartData(a,c){let d;return this.chart&&(d=Lt(this.chart,a,c)),d}setChartData(a,c,d){return this.chart&&Mt(this.chart,a,c,d),this}updateChart(){return this.chart&&this.chart.update(),this}}var Xc;(function(a){a[a.circle=0]="circle",a[a.ellipse=1]="ellipse",a[a.roundRectangle=2]="roundRectangle"})(Xc||(Xc={}));function qn(a,c,d,f=Xc.circle){let i,l,q,u;typeof f==="object"?{maskType:i,backgroundStyle:l,radius:q,iteration:u}=f:i=f,typeof i==="string"&&(i=Xc[i]);const v=a.canvas,A=a.context,E=Tb.get();if(!E.has(c))return;const H=E.get(c).getFrame(d),R=H.width,N=H.height;v.width!==R&&(v.width=R),v.height!==N&&(v.height=N),A.clearRect(0,0,R,N),l&&(A.fillStyle=l,A.fillRect(0,0,R,N)),A.beginPath();switch(i){case Xc.roundRectangle:kj(A,0,0,R,N,q,u);break;default:const P=Math.floor(R/2),V=Math.floor(N/2);i===Xc.circle?A.arc(P,V,Math.min(P,V),0,2*Math.PI):A.ellipse(P,V,P,V,0,0,2*Math.PI);break}A.clip(),A.drawImage(H.texture.image,H.x,H.y,H.width,H.height),a.texture.setSize(R,N),a.setSize(R,N),a.updateTexture()}class Rg extends Ac{constructor(a,c,d,f,i=Xc.circle){super(a,c);this.type="rexMaskedImage";qn(this,d,f,i)}maskImage(a,c,d=Xc.circle){return qn(this,a,c,d),this}}class Sg extends Ac{constructor({x:a=0,y:c=0,width:d=1,height:f=1,fillStyle:i,fillColor2:l,isHorizontalGradient:q=!0,strokeStyle:u,lineWidth:v=2}={}){super(a,c);this.type="rexCanvasRoundRectangle";this.setFillStyle(i,l,q),this.setStrokeStyle(u,v),this.resize(d,f)}setFillStyle(a,c,d=!0){return this.fillStyle=a,this.fillColor2=c,this.isHorizontalGradient=d,this}setStrokeStyle(a,c){return this.strokeStyle=a,this.lineWidth=c,this}resize(a,c){return super.resize(a,c),this.refresh(),this}refresh(){let a=this.lineWidth;this.strokeStyle||(a=0);const c=a/2,d=c,f=c,i=this.width-a,l=this.height-a;return lj(this.canvas,this.context,d,f,i,l,cc(this.fillStyle,this.canvas,this.context),cc(this.strokeStyle,this.canvas,this.context),a,cc(this.fillColor2,this.canvas,this.context),this.isHorizontalGradient),this}}class Ug extends Ac{constructor({x:a=0,y:c=0,width:d=1,height:f=1,radius:i=0,iteration:l,fillStyle:q,fillColor2:u,isHorizontalGradient:v=!0,strokeStyle:A,lineWidth:E=2}={}){super(a,c);this.type="rexCanvasRoundRectangle";this.setRadius(i),this.setIteration(l),this.setFillStyle(q,u,v),this.setStrokeStyle(A,E),this.resize(d,f)}setRadius(a){return this.radius=a,this}setIteration(a){return this.iteration=a,this}setFillStyle(a,c,d=!0){return this.fillStyle=a,this.fillColor2=c,this.isHorizontalGradient=d,this}setStrokeStyle(a,c){return this.strokeStyle=a,this.lineWidth=c,this}resize(a,c){return super.resize(a,c),this.refresh(),this}refresh(){let a=this.lineWidth;this.strokeStyle||(a=0);const c=a/2,d=c,f=c,i=this.width-a,l=this.height-a;return Tg(this.canvas,this.context,d,f,i,l,this.radius,cc(this.fillStyle,this.canvas,this.context),cc(this.strokeStyle,this.canvas,this.context),a,cc(this.fillColor2,this.canvas,this.context),this.isHorizontalGradient,this.iteration),this}}function lc(a,c){Array.isArray(c)?cl(a,...c):oe(a,c)}function Pb(a,c,d=!0){if(Array.isArray(c)){mg(a,...c);for(let f=0,i=c.length;f<i;f++)c[f].destroy()}else{const f=c;te(a,f),d&&f.destroy()}}function Yc(a,c=!0){const d=a.children;for(let f=0,i=d.length;f<i;f++){const l=d[f];l.parent=null,c&&l.destroy()}d.length=0}class rn extends ve{constructor(){super(...arguments);this.type="rexContainer"}add(a){return lc(this,a),this}remove(a,c=!0){return Pb(this,a,c),this}clear(a=!0){return Yc(this,a),this}}function Bc(a=0,c={left:0,right:0,top:0,bottom:0}){if(typeof a==="number")c.left=a,c.right=a,c.top=a,c.bottom=a;else{let d,f,i,l;({left:d=0,right:f=0,top:i=0,bottom:l=0}=a),c.left=d,c.right=f,c.top=i,c.bottom=l}return c}function Oe(a){return a.x+(0-a.originX)*a.width}function Qe(a){return a.x+(.5-a.originX)*a.width}function Pe(a){return a.x+(1-a.originX)*a.width}function Re(a){return a.y+(0-a.originY)*a.height}function Te(a){return a.y+(.5-a.originY)*a.height}function Se(a){return a.y+(1-a.originY)*a.height}function Xg(a,c){a.x+=c-Oe(a)}function Zg(a,c){a.x+=c-Qe(a)}function Yg(a,c){a.x+=c-Pe(a)}function _g(a,c){a.y+=c-Re(a)}function ah(a,c){a.y+=c-Te(a)}function $g(a,c){a.y+=c-Se(a)}function Nt(a){let c;return a instanceof Ya?c=Math.max(a.minWidth,a.childrenWidth):a.hasOwnProperty("minWidth")?c=a.minWidth:c=a.width,c}function Ot(a){let c;return a instanceof Ya?c=Math.max(a.minHeight,a.childrenHeight):a.hasOwnProperty("minHeight")?c=a.minHeight:c=a.height,c}function Pt(a,c,d,f){if(a.rexSizer.hidden||!a.needLayout)return a;a.preLayout(c,d,f),d===void 0&&(d=Math.max(a.childrenWidth,a.minWidth)),f===void 0&&(f=Math.max(a.childrenHeight,a.minHeight)),a.resize(d,f),a.layoutBackgrounds(),a.postLayout(c,d,f)}function sn(a,c,d,f){if(c)return;a.layoutInit();const i=a.getChildrenSizers();for(var l=0,q=i.length;l<q;l++){const u=i[l];if(u.rexSizer.hidden||!u.needLayout)continue;sn(u)}}function Kf(a){a._childrenWidth=void 0,a._childrenHeight=void 0}function Yd(a,c,d){if(!a||c===void 0&&d===void 0)return;a.resize?(c===void 0&&(c=a.width),d===void 0&&(d=a.height),a.resize(c,d)):(c!==void 0&&(a.width=c),d!==void 0&&(a.height=d))}var tb;(function(a){a[a.left_top=0]="left_top",a[a.top_left=0]="top_left",a[a.center_top=1]="center_top",a[a.top_center=1]="top_center",a[a.right_top=2]="right_top",a[a.top_right=2]="top_right",a[a.left_center=3]="left_center",a[a.center_left=3]="center_left",a[a.center=4]="center",a[a.center_center=4]="center_center",a[a.right_center=5]="right_center",a[a.center_right=5]="center_right",a[a.left_bottom=6]="left_bottom",a[a.bottom_left=6]="bottom_left",a[a.center_bottom=7]="center_bottom",a[a.bottom_center=7]="bottom_center",a[a.right_bottom=8]="right_bottom",a[a.bottom_right=8]="bottom_right"})(tb||(tb={}));function Xu(a,c,d=tb.center,f=0,i=0){const l=d%3;switch(l){case 0:Xg(a,Oe(c));break;case 1:Zg(a,Qe(c));break;default:Yg(a,Pe(c));break}const q=Math.floor(d/3);switch(q){case 0:_g(a,Re(c));break;case 1:ah(a,Te(c));break;default:$g(a,Se(c));break}a.x-=f,a.y-=i}class jy{constructor(){this.x=0;this.y=0;this.width=0;this.height=0;this.originX=0;this.originY=0}setTo(a=0,c=0,d=0,f=0){return this.x=a,this.y=c,this.width=d,this.height=f,this}alignIn(a,c=tb.center,d=0,f=0){return Xu(a,this,c,d,f),this}}const Zc=new jy();function Qt(a){if(a.backgroundChildren===void 0)return;const c=a.left,d=a.top,f=a.width,i=a.height,l=a.backgroundChildren;for(let q=0,u=l.length;q<u;q++){const v=l[q],A=v.rexSizer;if(A.hidden)continue;const E=A.padding,H=c+E.left,R=d+E.top,N=f-E.left-E.right,P=i-E.top-E.bottom;Yd(v,N,P),Zc.setTo(H,R,N,P).alignIn(v)}}function Rt(a,c,d,f){}function St(a,c){lc(a,c)}function Tt(a){return a.hasOwnProperty("rexSizer")||(a.rexSizer={}),a.rexSizer}function Ut(a,c,{padding:d=0,childKey:f}={}){a.backgroundChildren===void 0&&(a.backgroundChildren=[]),lc(a,c),a.backgroundChildren.push(c);const i=a.getSizerState(c);i.padding=Bc(d),f!==void 0&&a.addChildrenMap(f,c)}function Vt(a,c){return a.backgroundChildren===void 0?!1:a.backgroundChildren.includes(c)}function Wt(a,c,d){a.childrenMap===void 0&&(a.childrenMap={}),a.childrenMap[c]=d}function _t(a,c,d=!1){if(d){const f=[a];for(;f.length;){a=f.shift();for(let i=0,l=a.children.length;i<l;i++){const q=a.children[i];if(q.name===c)return q;f.push(q)}}}else for(let f=0,i=a.children.length;f<i;f++){const l=a.children[f];if(l.name===c)return l}return null}function tn(a,c,d){typeof c==="string"&&(c=c.split("."));if(c.length===0)return null;let f=c.shift(),i=null;if(f.charAt(0)==="#")f=f.substring(1),i=_t(a,f,d);else if(!f.includes("["))a.childrenMap&&(i=a.childrenMap[f]);else{const l=f.match(iy);if(l!=null){if(a.childrenMap){let q=a.childrenMap[l[1]];q&&(i=q[l[2]])}}}return c.length===0?i:i&&i.childrenMap?tn(i,c,d):null}const iy=/(\S+)\[(\d+)\]/i;function bh(a){let c=a.parent;for(;c;){if(c instanceof Ya)return c;c=c.parent}return null}function Xt(a,c){return bh(c)===a}function Yt(a,c){return a.backgroundChildren?a.backgroundChildren.includes(c):!1}function Zt(a){let c,d=bh(a);for(;d;)c=d,d=bh(d);return c}class Ya extends rn{constructor({x:a=0,y:c=0,width:d=0,height:f=0,space:i=0,name:l=""}={}){super(a,c);this.type="rexBaseSizer";this.rexSizer={};this.needLayout=!0;this.setMinSize(d,f),this.space=Bc(i),this.name=l}destroy(a){this.sizerChildren=null,this.backgroundChildren=null,super.destroy(a)}get left(){return Oe(this)}set left(a){Xg(this,a)}alignLeft(a){return this.left=a,this}get right(){return Pe(this)}set right(a){Yg(this,a)}alignRight(a){return this.right=a,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get centerX(){return Qe(this)}set centerX(a){Zg(this,a)}alignCenterX(a){return this.centerX=a,this}get top(){return Re(this)}set top(a){_g(this,a)}alignTop(a){return this.top=a,this}get bottom(){return Se(this)}set bottom(a){$g(this,a)}alignBottom(a){return this.bottom=a,this}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get centerY(){return Te(this)}set centerY(a){ah(this,a)}alignCenterY(a){return this.centerY=a,this}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}setMinSize(a,c){return this.setMinWidth(a).setMinHeight(c),this}setMinWidth(a=0){return this.minWidth=a,this}setMinHeight(a=0){return this.minHeight=a,this}getChildWidth(a){return Nt(a)}getChildHeight(a){return Ot(a)}getChildrenWidth(){return 0}getChildrenHeight(){return 0}getChildrenSizers(a=[]){return a}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}resize(a=this.width,c=this.height){return this.setSize(a,c),this}getSizerState(a){return Tt(a)}layout(){const a=this.x,c=this.y;return this.setPosition(0,0)._layout().setPosition(a,c),this}_layout(a,c,d){return Pt(this,a,c,d),this}preLayout(a,c,d){return sn(this,a,c,d),this}layoutInit(){return Kf(this),this}layoutBackgrounds(){return Qt(this),this}postLayout(a,c,d){return Rt(this,a,c,d),this}pin(a){return St(this,a),this}addBackground(a,c){return Ut(this,a,c),this}isBackground(a){return Vt(this,a)}addChildrenMap(a,c){return Wt(this,a,c),this}getElement(a,c=!1){return tn(this,a,c)}isChild(a){return Xt(this,a)}isBackgroundChild(a){return Yt(this,a)}getTopmostParentSizer(a=this){return Zt(a)}}var Cc;(function(a){a[a.left=0]="left",a[a.top=0]="top",a[a.right=1]="right",a[a.bottom=1]="bottom",a[a.center=2]="center",a[a.justify=3]="justify",a[a["justify-left"]=3]="justify-left",a[a["justify-top"]=3]="justify-top",a[a["justify-right"]=4]="justify-right",a[a["justify-bottom"]=4]="justify-bottom",a[a["justify-center"]=5]="justify-center"})(Cc||(Cc={}));var Oa;(function(a){a[a.x=0]="x",a[a.h=0]="h",a[a.horizontal=0]="horizontal",a[a["left-to-right"]=0]="left-to-right",a[a.y=1]="y",a[a.v=1]="v",a[a.vertical=1]="vertical",a[a["top-to-bottom"]=1]="top-to-bottom"})(Oa||(Oa={}));function $t(a,c=a.sizerChildren){let d=0;for(let f=0,i=c.length;f<i;f++){const l=c[f];if(l===`
`)continue;const q=a.getChildWidth(l);d=Math.max(q,d)}return d}function au(a,c=a.sizerChildren){let d=0;for(let f=0,i=c.length;f<i;f++){const l=c[f];if(l===`
`)continue;const q=a.getChildHeight(l);d=Math.max(q,d)}return d}function bu(a,c=[]){const d=a.sizerChildren;for(var f=0,i=d.length;f<i;f++){const l=d[f];if(l===`
`)continue;l instanceof Ya&&c.push(l)}return c}function cu(a){if(a.rexSizer.hidden)return 0;let c;return a.orientation===Oa.x?c=a.maxChildWidth:c=0,c+a.space.left+a.space.right}function du(a){if(a.rexSizer.hidden)return 0;let c;return a.orientation===Oa.x?c=0:c=a.maxChildHeight,c+a.space.top+a.space.bottom}function lu(a,c){const d={lines:[],width:0,height:0},f=d.lines,i=a.sizerChildren;let l=0,q;for(let u=0,v=i.length;u<v;u++){let A=i[u],E,H;if(A===`
`)A=void 0,E=0,H=!0;else{if(A.rexSizer.hidden)continue;A instanceof Ya&&A.layout(),E=a.orientation===Oa.x?mu(A):nu(A),H=l<E}H&&(q&&(q.width=c-(l+a.space.item),d.width=Math.max(d.width,q.width),d.height+=q.height+a.space.line),q={children:[],width:0,height:0},f.push(q),l=c),l-=E+a.space.item;if(A){q.children.push(A);const R=a.orientation===Oa.x?nu(A):mu(A);q.height=Math.max(q.height,R)}}return q&&(q.width=c-(l+a.space.item),d.width=Math.max(d.width,q.width),d.height+=q.height),d}function mu(a){const c=a.rexSizer.padding;return a.width+c.left+c.right}function nu(a){const c=a.rexSizer.padding;return a.height+c.top+c.bottom}function eu(a,c,d,f){if(a.rexSizer.hidden||!a.needLayout)return;a.preLayout(c),d===void 0&&(d=Math.max(a.maxChildWidth+a.space.left+a.space.right,a.minWidth)),f===void 0&&(f=Math.max(a.maxChildHeight+a.space.top+a.space.bottom,a.minHeight));let i;a.orientation===Oa.x?i=d-a.space.left-a.space.right:i=f-a.space.top-a.space.bottom;const l=lu(a,i);a.orientation===Oa.x?f=Math.max(f,l.height+a.space.top+a.space.bottom):d=Math.max(d,l.height+a.space.left+a.space.right),a.resize(d,f);const q=a.innerLeft,u=a.innerTop;let v=q,A=u;const E=l.lines;for(let N=0,P=E.length;N<P;N++){const V=E[N],Y=V.children;a.rtl&&Y.reverse();const fa=i-V.width;let ga=0;switch(a.align){case Cc.left:break;case Cc.right:a.orientation===Oa.x?v+=fa:A+=fa;break;case Cc.center:a.orientation===Oa.x?v+=fa/2:A+=fa/2;break;case Cc["justify-left"]:ga=un(i,fa,Y.length);break;case Cc["justify-right"]:ga=un(i,fa,Y.length),ga===0&&(a.orientation===Oa.x?v+=fa:A+=fa);break;case Cc["justify-center"]:ga=un(i,fa,Y.length),ga===0&&(a.orientation===Oa.x?v+=fa/2:A+=fa/2);break}for(var H=0,R=Y.length;H<R;H++){const la=Y[H],ia=la.rexSizer,oa=ia.padding;let pa,ja,I,O;a.orientation===Oa.x?(pa=v+oa.left,H>0&&(pa+=a.space.item),ja=A+oa.top,I=la.width,O=la.height,v=pa+I+oa.right+ga):(pa=v+oa.left,ja=A+oa.top,H>0&&(ja+=a.space.item),I=la.width,O=la.height,A=ja+O+oa.bottom+ga),Zc.setTo(pa,ja,I,O).alignIn(la,tb.center)}a.orientation===Oa.x?(v=q,A+=V.height+a.space.line):(v+=V.height+a.space.line,A=u)}a.layoutBackgrounds(),a.postLayout()}function un(a,c,d){return c/a<=.25?c/(d-1):0}function fu(a){Kf(a),a._maxChildWidth=void 0,a._maxChildHeight=void 0}function gu(a,c,{padding:d=0,childKey:f,index:i}={}){lc(a,c);const l=a.getSizerState(c);l.padding=Bc(d),i===void 0||i>=a.sizerChildren.length?a.sizerChildren.push(c):a.sizerChildren.splice(i,0,c),f!==void 0&&a.addChildrenMap(f,c)}function hu(a){a.sizerChildren.push(`
`)}function Lg(a,c){if(c>=a.length)return;let d=a.length-1,f=a[c];for(let i=c;i<d;i++)a[i]=a[i+1];return a.length=d,f}function _c(a,c,d,f=a){if(!Array.isArray(c)){const l=a.indexOf(c);return l!==-1?(Lg(a,l),d&&d.call(f,c),c):null}let i=c.length-1;for(;i>=0;){const l=c[i],q=a.indexOf(l);q!==-1?(Lg(a,q),d&&d.call(f,l)):c.pop(),i--}return c}function iu(a,c,d=!0){Pb(a,c,d);const f=_c(a.sizerChildren,c);!f&&a.backgroundChildren&&_c(a.backgroundChildren,c)}function ju(a,c=!0){const d=a.sizerChildren;for(let f=0,i=d.length;f<i;f++){const l=d[f];if(l===`
`)continue;Pb(a,l,c)}a.sizerChildren.length=0}function ku(a,c=!0){Yc(a,c),a.sizerChildren.length=0,a.backgroundChildren&&(a.backgroundChildren.length=0)}class mj extends Ya{constructor({space:a={item:0,line:0},orientation:c=Oa.x,align:d=Cc.left,rtl:f=!1}={}){super(arguments[0]);this.type="rexFixedWidthSizer";this.sizerChildren=[];this.setOrientation(c),this.setItemSpacing(a.item),this.setLineSpacing(a.line),this.setAlign(d),this.setRTL(f)}setOrientation(a){return typeof a==="string"&&(a=Oa[a]),this.orientation=a,this}setItemSpacing(a=0){return this.space.item=a,this}setLineSpacing(a=0){return this.space.line=a,this}setAlign(a){return typeof a==="string"&&(a=Cc[a]),this.align=a,this}setRTL(a=!0){return this.rtl=a,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=$t(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=au(this)),this._maxChildHeight}getChildrenSizers(a=[]){return bu(this,a)}getChildrenWidth(){return cu(this)}getChildrenHeight(){return du(this)}_layout(a,c,d){return eu(this,a,c,d),this}layoutInit(){return fu(this),this}add(a,c){return gu(this,a,c),this}addNewLine(){return hu(this),this}remove(a,c=!0){return iu(this,a,c),this}removeAll(a=!0){return ju(this,a),this}clear(a=!0){return ku(this,a),this}}function $c(a,c,d=0,f=a.length-1){for(let i=d;i<=f;i++)a[i]=c;return a}function ou(a,{column:c=0,row:d=0,columnProportions:f=0,rowProportions:i=0,space:l}={}){a.columnCount=c,a.rowCount=d,a.sizerChildren.length=c*d,$c(a.sizerChildren,null),a.columnProportions.length=c;if(typeof f==="number")$c(a.columnProportions,f);else for(let v=0;v<c;v++)a.columnProportions[v]=f[v]??0;a.rowProportions.length=d;if(typeof i==="number")$c(a.rowProportions,i);else for(let v=0;v<d;v++)a.rowProportions[v]=i[v]??0;a.columnWidth.length=c,a.rowHeight.length=d,a.space.column=[],a.space.column.length=c-1;const q=l.column??0;if(typeof q==="number")$c(a.space.column,q);else for(let v=0,A=a.space.column.length;v<A;v++)a.space.column[v]=q[v]??0;a.space.row=[],a.space.row.length=d-1;const u=l.row??0;if(typeof u==="number")$c(a.space.row,u);else for(let v=0,A=a.space.row.length;v<A;v++)a.space.row[v]=u[v]??0}function pu(a,c=[]){const d=a.sizerChildren;for(var f=0,i=d.length;f<i;f++){const l=d[f];l&&l instanceof Ya&&c.push(l)}return c}function pj(...a){return Array.prototype.reduce.call(a,Vy,0)}function Vy(a,c){return a+c}function qu(a){if(a.rexSizer.hidden)return 0;let c=0;const d=a.sizerChildren;for(let f=0;f<a.columnCount;f++){const i=a.columnProportions[f];let l=0;if(i===0){for(let q=0;q<a.rowCount;q++){const u=d[q*a.columnCount+f];if(!u)continue;if(u.rexSizer.hidden)continue;const v=u.rexSizer.padding,A=a.getChildWidth(u)+v.left+v.right;l=Math.max(l,A)}c+=l}a.columnWidth[f]=l}return c+pj(a.space.left,...a.space.column,a.space.right)}function ru(a){if(a.rexSizer.hidden)return 0;let c=0;const d=a.sizerChildren;for(let i=0;i<a.rowCount;i++){const l=a.rowProportions[i];let q=0;if(l===0){for(var f=0;f<a.columnCount;f++){const u=d[i*a.columnCount+f];if(!u)continue;if(u.rexSizer.hidden)continue;const v=u.rexSizer.padding,A=a.getChildHeight(u)+v.top+v.bottom;q=Math.max(q,A)}c+=q}a.rowHeight[i]=q}return c+pj(a.space.top,...a.space.row,a.space.bottom)}function Cu(a,c){let d;const f=a.rexSizer;if(f.expand){const i=f.padding;d=c-i.left-i.right}return d}function Bu(a,c){let d;const f=a.rexSizer;if(f.expand){const i=f.padding;d=c-i.top-i.bottom}return d}function Zd(a,c,d){return a.sizerChildren[d*a.columnCount+c]}function su(a,c,d,f){if(a.rexSizer.hidden||!a.needLayout)return;a.preLayout(c);const i=a.totalColumnProportions,l=a.totalRowProportions;if(d===void 0)if(c&&i>0){const V=a.rexSizer.padding;d=c.width-V.left-V.right}else d=Math.max(a.childrenWidth,a.minWidth);if(f===void 0)if(c&&l>0){const V=a.rexSizer.padding;f=c.height-V.top-V.bottom}else f=Math.max(a.childrenHeight,a.minHeight);a.resize(d,f);let q;i>0?q=(a.width-a.childrenWidth)/i:q=0;let u;l>0?u=(a.height-a.childrenHeight)/l:u=0;const v=a.innerLeft,A=a.innerTop,E=a.space.column,H=a.space.row;let R=v,N=A;for(let V=0;V<a.rowCount;V++){const Y=a.rowProportions[V],fa=Y===0?a.rowHeight[V]:Y*u;R=v;for(var P=0;P<a.columnCount;P++){const ga=a.columnProportions[P],la=ga===0?a.columnWidth[P]:ga*q,ia=Zd(a,P,V);if(!ia||ia.rexSizer.hidden){R+=la+E[P];continue}const oa=Cu(ia,la),pa=Bu(ia,fa);ia instanceof Ya?ia._layout(a,oa,pa):Yd(ia,oa,pa);const ja=ia.rexSizer,I=ja.padding,O=R+I.left,x=la-I.left-I.right,G=N+I.top,F=fa-I.top-I.bottom;Zc.setTo(O,G,x,F).alignIn(ia,ja.align),R+=la+E[P]}N+=fa+H[V]}return a.layoutBackgrounds(),a.postLayout()}function Au(a,c,d,f,i){if(typeof a==="number"&&typeof c==="number"){let l=c*f+a;if(!d[l])return l}else if(c===void 0&&typeof a==="number")for(let l=0;l<i;l++){let q=l*f+a;if(!d[q])return q}else if(a===void 0&&typeof c==="number")for(let l=0;l<f;l++){let q=c*f+l;if(!d[q])return q}else if(c===!0)for(let l=0;l<f;l++)for(let q=0;q<i;q++){let u=q*f+l;if(!d[u])return u}else for(let l=0,q=d.length;l<q;l++)if(!d[l])return l;return null}function tu(a,c,{column:d,row:f,align:i=tb.center,padding:l=0,expand:q=!0,childKey:u}={}){const v=Au(d,f,a.sizerChildren,a.columnCount,a.rowCount);if(v===null)return;lc(a,c),typeof i==="string"&&(i=tb[i]);const A=a.getSizerState(c);A.align=i,A.padding=Bc(l),A.expand=q,a.sizerChildren[v]=c,u!==void 0&&a.addChildrenMap(u,c)}function nj(a,c,d=!0){Pb(a,c,d);const f=a.sizerChildren.indexOf(c);f>=0?a.sizerChildren[f]=null:a.backgroundChildren&&_c(a.backgroundChildren,c)}function uu(a,c,d,f=!0){const i=Zd(a,c,d);i&&nj(a,i,f)}function vu(a,c=!0){Pb(a,a.sizerChildren,c),$c(a.sizerChildren,null)}function wu(a,c=!0){Yc(a,c),$c(a.sizerChildren,null),a.backgroundChildren&&(a.backgroundChildren.length=0)}function xu(a,c,d){if(!c)return null;const f=a.sizerChildren.indexOf(c);return f===-1?null:(d===void 0&&(d={x:0,y:0}),d.x=f%a.columnCount,d.y=Math.floor(f/a.columnCount),d)}function yu(a,c,d){for(let f=0,i=a.rowCount;f<i;f++)for(let l=0,q=a.columnCount;l<q;l++){if(Zd(a,l,f))continue;let u;d?u=c.call(d,l,f,a):u=c(l,f,a);if(u)return}}function zu(a){const c=a.sizerChildren;let d=0;for(let f=0,i=c.length;f<i;f++)c[f]||d++;return d}class oj extends Ya{constructor(a={}){super(a);this.type="rexGridSizer";this.sizerChildren=[];this.columnProportions=[];this.rowProportions=[];this.columnWidth=[];this.rowHeight=[];ou(this,a)}setColumnProportion(a,c){return a<this.columnProportions.length&&(this.columnProportions[a]=c),this}setRowProportion(a,c){return a<this.rowProportions.length&&(this.rowProportions[a]=c),this}get totalColumnProportions(){return this.columnProportions.reduce((a,c)=>a+c)}get totalRowProportions(){return this.rowProportions.reduce((a,c)=>a+c)}getChildrenSizers(a=[]){return pu(this,a)}getChildrenWidth(){return qu(this)}getChildrenHeight(){return ru(this)}_layout(a,c,d){return su(this,a,c,d),this}add(a,c){return tu(this,a,c),this}remove(a,c=!0){return nj(this,a,c),this}removeAt(a,c,d=!0){return uu(this,a,c,d),this}removeAll(a=!0){return vu(this,a),this}clear(a=!0){return wu(this,a),this}getChildAt(a,c){return Zd(this,a,c)}childToGridIndex(a,c){return xu(this,a,c)}forEachEmptyGrid(a,c){return yu(this,a,c),this}get gridCount(){return this.sizerChildren.length}get emptyGridCount(){return zu(this)}}function Nu(a,c=[]){const d=a.sizerChildren;for(var f=0,i=d.length;f<i;f++){const l=d[f];l instanceof Ya&&c.push(l)}return c}function Ou(a){const c=a.sizerChildren;let d=0;for(let f=0,i=c.length;f<i;f++){const l=c[f];if(l.rexSizer.hidden)continue;const q=l.rexSizer,u=q.proportion;u>0&&(d+=u)}return d}class wj extends ve{}function xj(a){return a instanceof wj}function tj(a,c=!0){if(a.rexSizer.hidden)return 0;c===void 0&&(c=!0);const d=a.sizerChildren;let f=0;if(a.orientation===Oa.x)for(var i=0,l=d.length;i<l;i++){const q=d[i],u=q.rexSizer;if(u.hidden)continue;const v=u.padding;let A;u.proportion===0||c&&!xj(q)&&u.proportion>0?A=a.getChildWidth(q):A=0,A+=v.left+v.right,i>0&&(A+=a.space.item),f+=A}else for(var i=0,l=d.length;i<l;i++){const q=d[i];if(!q.hasOwnProperty("rexSizer"))continue;const u=q.rexSizer;if(u.hidden)continue;const v=u.padding,A=a.getChildWidth(q)+v.left+v.right;f=Math.max(A,f)}return f+a.space.left+a.space.right}function uj(a,c=!0){if(a.rexSizer.hidden)return 0;const d=a.sizerChildren;let f=0;if(a.orientation===Oa.x)for(var i=0,l=d.length;i<l;i++){const q=d[i],u=q.rexSizer;if(u.hidden)continue;const v=u.padding,A=a.getChildHeight(q)+v.top+v.bottom;f=Math.max(A,f)}else for(var i=0,l=d.length;i<l;i++){const q=d[i];if(!q.hasOwnProperty("rexSizer"))continue;const u=q.rexSizer;if(u.hidden)continue;const v=u.padding;let A;u.proportion===0||c&&!xj(q)&&u.proportion>0?A=a.getChildHeight(q):A=0,A+=v.top+v.bottom,i>0&&(A+=a.space.item),f+=A}return f+a.space.top+a.space.bottom}function Wu(a,c){let d;const f=c.rexSizer,i=f.padding;return a.orientation===Oa.x?f.proportion>0&&a.proportionLength>0&&(d=f.proportion*a.proportionLength):f.expand&&(d=a.innerWidth-i.left-i.right),d}function Vu(a,c){let d;const f=c.rexSizer,i=f.padding;return a.orientation===Oa.x?f.expand&&(d=a.innerHeight-i.top-i.bottom):f.proportion>0&&a.proportionLength>0&&(d=f.proportion*a.proportionLength),d}function Pu(a,c,d,f){if(a.rexSizer.hidden||!a.needLayout)return;a.preLayout(c),d===void 0&&(d=Math.max(a.childrenWidth,a.minWidth)),f===void 0&&(f=Math.max(a.childrenHeight,a.minHeight)),a.resize(d,f);let i;if(a.childrenProportion>0){let R=a.orientation===Oa.x?a.width-a.childrenWidth:a.height-a.childrenHeight;R>0?(R=a.orientation===Oa.x?a.width-tj(a,!1):a.height-uj(a,!1),i=R/a.childrenProportion):i=0}else i=0;a.proportionLength=i;const l=a.sizerChildren,q=a.innerLeft,u=a.innerTop,v=a.innerWidth,A=a.innerHeight;let E=q,H=u;for(let R=0,N=l.length;R<N;R++){const P=l[R];if(P.rexSizer.hidden)continue;const V=P.rexSizer,Y=V.padding;let fa=Wu(a,P),ga=Vu(a,P);P instanceof Ya?P._layout(a,fa,ga):Yd(P,fa,ga),fa===void 0&&(fa=P.width),ga===void 0&&(ga=P.height);let la,ia,oa,pa;a.orientation===Oa.x?(la=E+Y.left,V.proportion===0||i===0?oa=fa:oa=V.proportion*i,ia=H+Y.top,pa=A-Y.top-Y.bottom):(la=E+Y.left,oa=v-Y.left-Y.right,ia=H+Y.top,V.proportion===0||i===0?pa=ga:pa=V.proportion*i),Zc.setTo(la,ia,oa,pa).alignIn(P,V.align),a.orientation===Oa.x?E+=oa+Y.left+Y.right+a.space.item:H+=pa+Y.top+Y.bottom+a.space.item}a.layoutBackgrounds(),a.postLayout()}function Qu(a){Kf(a),a._childrenProportion=void 0}function vj(a,c,{proportion:d=0,align:f=tb.center,padding:i=0,expand:l=!1,childKey:q,index:u}={}){lc(a,c),typeof f==="string"&&(f=tb[f]);const v=a.getSizerState(c);v.proportion=d,v.align=f,v.padding=Bc(i),v.expand=l,u===void 0||u>=a.sizerChildren.length?a.sizerChildren.push(c):a.sizerChildren.splice(u,0,c),q!==void 0&&a.addChildrenMap(q,c)}function Ru(a,c=1){const d=new wj();vj(a,d,{proportion:c})}function Su(a,c,d=!0){Pb(a,c,d);const f=_c(a.sizerChildren,c);!f&&a.backgroundChildren&&_c(a.backgroundChildren,c)}function Tu(a,c=!0){Pb(a,a.sizerChildren,c),a.sizerChildren.length=0}function Uu(a,c=!0){Yc(a,c),a.sizerChildren.length=0,a.backgroundChildren&&(a.backgroundChildren.length=0)}class Lf extends Ya{constructor({space:a={item:0},orientation:c=Oa.x}={}){super(arguments[0]);this.type="rexSizer";this.sizerChildren=[];this.setOrientation(c),this.setItemSpacing(a.item)}setOrientation(a){return typeof a==="string"&&(a=Oa[a]),this.orientation=a,this}setItemSpacing(a=0){return this.space.item=a,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=Ou(this)),this._childrenProportion}getChildrenSizers(a=[]){return Nu(this,a)}getChildrenWidth(a=!0){return tj(this,a)}getChildrenHeight(a=!0){return uj(this,a)}_layout(a,c,d){return Pu(this,a,c,d),this}layoutInit(){return Qu(this),this}add(a,c){return vj(this,a,c),this}addSpace(a=1){return Ru(this,a),this}remove(a,c=!0){return Su(this,a,c),this}removeAll(a=!0){return Tu(this,a),this}clear(a=!0){return Uu(this,a),this}}class qj extends Lf{constructor({background:a,icon:c,text:d,expandTextWidth:f=!1,expandTextHeight:i=!1,action:l,align:q,space:u={}}={}){super(arguments[0]);this.type="rexLabel";a&&this.addBackground(a),(q==="right"||q==="bottom"||q==="center")&&this.addSpace();if(c){let v;const A=u.icon??0;this.orientation===Oa.x?(d||l)&&(v={right:A}):(d||l)&&(v={bottom:A}),this.add(c,{padding:v})}if(d){let v,A,E;const H=u.text??0;this.orientation===Oa.x?(v=f?1:0,l&&(A={right:H}),E=i):(v=i?1:0,l&&(A={bottom:H}),E=f),this.add(d,{proportion:v,align:tb.center,padding:A,expand:E})}l&&this.add(l),q==="center"&&this.addSpace(),this.addChildrenMap("background",a),this.addChildrenMap("icon",c),this.addChildrenMap("text",d),this.addChildrenMap("action",l)}get text(){const a=this.childrenMap.text;if(a===void 0)return"";let c;return a.text?(c=a.text,typeof c!=="string"&&(c=c.join(`
`))):c="",c}set text(a){const c=this.childrenMap.text;c!==void 0&&(c.text=a)}setText(a){return typeof a!=="string"&&(a=a.join(`
`)),this.text=a,this}appendText(a){return typeof a!=="string"&&(a=a.join(`
`)),this.text+=a,this}}function Du(a,c=[]){for(const[d,f]of a.sizerChildren)f instanceof Ya&&c.push(f);return c}function Eu(a){if(a.rexSizer.hidden)return 0;let c=0;for(const[d,f]of a.sizerChildren){const i=f.rexSizer.padding,l=a.getChildWidth(f)+i.left+i.right;c=Math.max(l,c)}return c+a.space.left+a.space.right}function Fu(a){if(a.rexSizer.hidden)return 0;let c=0;for(const[d,f]of a.sizerChildren){const i=f.rexSizer.padding,l=a.getChildHeight(f)+i.top+i.bottom;c=Math.max(l,c)}return c+a.space.top+a.space.bottom}function Mu(a,c){let d;const f=c.rexSizer;if(f.expandWidth){const i=f.padding;d=a.innerWidth-i.left-i.right}return d}function Lu(a,c){let d;const f=c.rexSizer;if(f.expandHeight){const i=f.padding;d=a.innerHeight-i.top-i.bottom}return d}function Gu(a,c,d,f){if(a.rexSizer.hidden||!a.needLayout)return;a.preLayout(c),d===void 0&&(d=Math.max(a.childrenWidth,a.minWidth)),f===void 0&&(f=Math.max(a.childrenHeight,a.minHeight)),a.resize(d,f);const i=a.innerLeft,l=a.innerTop,q=a.innerWidth,u=a.innerHeight;for(let[v,A]of a.sizerChildren){const E=A.rexSizer,H=E.padding;if(A instanceof Ya)A._layout(a,Mu(a,A),Lu(a,A));else{let Y,fa;E.expandWidth&&(Y=q-H.left-H.right),E.expandHeight&&(fa=u-H.top-H.bottom),Yd(A,Y,fa)}const R=i+H.left,N=q-H.left-H.right,P=l+H.top,V=u-H.top-H.bottom;Zc.setTo(R,P,N,V).alignIn(A,E.align)}a.layoutBackgrounds(),a.postLayout()}function Hu(a,c,{key:d=Date.now(),padding:f=0,align:i=tb.center,expand:l=!0}={}){lc(a,c),typeof i==="string"&&(i=tb[i]);const q=a.getSizerState(c);q.key=d,q.align=i,q.padding=Bc(f);if(typeof l==="boolean")q.expandWidth=l,q.expandHeight=l;else{let{width:u=!1,height:v=!1}=l;q.expandWidth=u,q.expandHeight=v}a.sizerChildren.has(d)&&a.sizerChildren.get(d).destroy(),a.sizerChildren.set(d,c)}function sj(a,c){if(c instanceof Hc)if(c.parent===a&&c.hasOwnProperty("rexSizer")){const d=c.rexSizer;return d.key}else return null;else{const d=c;return a.sizerChildren.has(d)?d:null}}function Iu(a,c,d=!0){Pb(a,c,d);const f=sj(a,c);f?a.sizerChildren.delete(f):_c(a.backgroundChildren,c)}function Ju(a,c=!0){Pb(a,Array.from(a.sizerChildren.values()),c),a.sizerChildren.clear()}function Ku(a,c=!0){Yc(a,c),a.sizerChildren.clear(),a.backgroundChildren&&(a.backgroundChildren.length=0)}class rj extends Ya{constructor(a={}){super(a);this.type="rexOverlapSizer";this.sizerChildren=new Map()}getChildrenSizers(a=[]){return Du(this,a)}getChildrenWidth(){return Eu(this)}getChildrenHeight(){return Fu(this)}_layout(a,c,d){return Gu(this,a,c,d),this}add(a,c){return Hu(this,a,c),this}getChildKey(a){return sj(this,a)}remove(a,c=!0){return Iu(this,a,c),this}removeAll(a=!0){return Ju(this,a),this}clear(a=!0){return Ku(this,a),this}}var Qb;(function(a){a[a.none=0]="none",a[a.word=1]="word",a[a.char=2]="char"})(Qb||(Qb={}));var Cb;(function(a){a[a.none=0]="none",a[a.raw=1]="raw",a[a.wrapped=2]="wrapped"})(Cb||(Cb={}));const In=/(?:\r\n|\r|\n)/;function mv(a,c,d,f,i,l=0){i<=0&&(f=0);let q=[];if(!a||!a.length)return q;let u=a.split(In),v=u.length-1;a.slice(-1)===`
`&&(u.length-=1);let A;for(let E=0,H=u.length;E<H;E++){let R=u[E],N=E===v?0:1;if(f===0){q.push(ih(R,c(R,d),N));continue}E===0?A=i-l:A=i;if(R.length<=100){let ga=c(R,d);if(ga<=A){q.push(ih(R,ga,N));continue}}let P;f===1?P=R.split(" "):P=R;let V="",Y="",fa=0;for(let ga=0,la=P.length;ga<la;ga++){let ia=P[ga];f===1?(V+=ia,ga<la-1&&(V+=" ")):V+=ia;let oa=c(V,d);oa>A&&(ga===0?q.push(ih("",0,2)):(q.push(ih(Y,fa,2)),V=ia,f===1&&(ga<la-1&&(V+=" ")),oa=c(V,d)),A=i),Y=V,fa=oa}q.push(ih(Y,fa,N))}return q}let ih=function(a,c,d){return{text:a,width:c,newLineMode:d}};var ch;(function(a){a[a.left=0]="left",a[a.center=1]="center",a[a.right=2]="right"})(ch||(ch={}));var dh;(function(a){a[a.top=0]="top",a[a.center=1]="center",a[a.bottom=2]="bottom"})(dh||(dh={}));class Ue{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(a){return this.items.push(a),this}pushMultiple(a){return this.items.push.apply(this.items,a),a.length=0,this}clear(){return this.items.length=0,this}}class Kn{constructor(){this.pens=[]}destroy(){this.pens.length=0}addPen(a){return this.pens.push(a),this}get firstPen(){return this.pens[0]}get lastPen(){return this.pens[this.pens.length-1]}hasPen(){return this.pens.length>0}get pensCount(){return this.pens.length}get startIndex(){let a=this.pens[0];return a?a.startIndex:0}get width(){let a=this.lastPen;return a?a.lastX:0}}function Pj(a){if(Array.isArray(a))a.length=0;else for(let c in a)delete a[c]}function Ve(a,c=Array.isArray(a)?[]:{}){Pj(c);if(Array.isArray(a)){c.length=a.length;for(let d=0,f=a.length;d<f;d++)c[d]=a[d]}else for(let d in a)c[d]=a[d];return c}class Ln{constructor(){this.text="";this.x=0;this.y=0;this.width=0;this.height=0;this.ascent=0;this.descent=0;this.prop={};this.newLineMode=Cb.none;this.startIndex=0}set(a="",c=0,d=0,f=0,i=0,l=0,q=0,u={},v=Cb.none,A=0){return this.text=a,this.x=c,this.y=d,this.width=f,this.height=i,this.ascent=l,this.descent=q,this.prop=u,this.newLineMode=v,this.startIndex=A,this}clone(){let a=new Ln();return a.set(this.text,this.x,this.y,this.width,this.height,this.ascent,this.descent,Ve(this.prop),this.newLineMode,this.startIndex),a}get plainText(){return this.newLineMode===Cb.raw?`${this.text}
`:this.text}get wrapText(){return this.newLineMode!==Cb.none?`${this.text}
`:this.text}get plainTextLength(){let a=this.text.length;return this.newLineMode===Cb.raw&&(a+=1),a}get endIndex(){return this.startIndex+this.plainTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}}class eh{constructor({penPool:a}){this.pens=[];this.lines=[];this.pens=[],this.lines=[],this.penPool=a}destroy(){this.freePens()}freePens(){return this.penPool.pushMultiple(this.pens),this.lines.forEach(a=>{a.destroy()}),this.lines.length=0,this.maxLineWidth=0,this.totalLineHeight=0,this}addTextPen(a,c,d,f,i,l,q,u,v=Cb.none){let A=this.penPool.pop();return A==null&&(A=new Ln()),A.set(a,c,d,f,i,l,q,u,v),this.addPen(A),this}addImagePen(a,c,d,f,i){return this.addTextPen("",a,c,d,f,f,0,i,Cb.none),this}addNewLinePen(a){let c=this.lastPen;return c&&c.newLineMode===Cb.none&&(c.newLineMode=a),this}addPen(a){let c=this.lastPen;c==null?a.startIndex=0:a.startIndex=c.endIndex,this.pens.push(a);let d=this.lastLine;return d==null&&(d=new Kn(),this.lines.push(d)),d.addPen(a),a.newLineMode!==Cb.none&&(d=new Kn(),this.lines.push(d)),this}clone(a){a==null&&(a=new eh({penPool:this.penPool})),a.freePens();const c=this.pens;for(let i=0,l=c.length;i<l;i++)a.addPen(c[i].clone());const d=this.lines,f=a.lines;for(let i=0,l=d.length;i<l;i++){const q=d[i],u=f[i];u.y=q.y,u.height=q.height}return a}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(a){if(a>=this.lines.length)return this.getLineEndIndex(a);{let c=this.lines[a];if(!c)return 0;let d=c.firstPen;return d?d.startIndex:0}}getLineEndIndex(a){let c=this.lines.length;a>=c&&(a=c-1);for(let d=a;d>=0;d--){let f=this.lines[d];if(f&&f.hasPen())return f.lastPen.endIndex}return 0}getLineWidth(a){let c=this.lines[a];return c?c.width:0}getLineHeights(a=[]){return this.lines.forEach(function(c){a.push(c.height)}),a}get lineCount(){return this.lines.length}get plainText(){let a=[],c=this.pens;for(let d=0,f=c.length;d<f;d++)a.push(c[d].plainText);return a.join()}get plainTextLength(){let a=0;for(let c=0,d=this.pens.length;c<d;c++)a+=this.pens[c].plainTextLength;return a}getSliceTagText(a,c,d=0,f,i=!1){if(f===void 0){let A=this.lastPen;if(!A)return"";f=A.endIndex}let l=[],q;for(var u=0,v=this.pens.length;u<v;u++){let A=this.pens[u],E=A.endIndex;if(E<=d)continue;let H=i?A.wrapText:A.plainText,R=A.prop,N=A.startIndex,P=N>=d&&E<=f;P||(H=H.substring(d-N,f-N)),c?l.push(a.call(c,H,R,q)):l.push(a(H,R,q)),q=R;if(E>=f)break}return l.join()}}function jv(a,c,d){let f=Ve(a,d);for(let i in c)f.hasOwnProperty(i)&&(f[i]=c[i]);return f}function Dj(a,c,d={key:c}){d=jv(ry,d);let f=Tb.get(),i=f.get(d.key);if(!i)return;let l=i.getFrame(d.frame);if(!l)return;let q=d.width,u=d.height;(q===void 0||u===void 0)&&(q===void 0&&u===void 0?(d.width=l.width,d.height=l.height):q===void 0?d.width=l.width*(u/l.height):u===void 0&&(d.height=l.height*(q/l.width))),a.images.set(c,d)}const ry={key:void 0,frame:void 0,width:void 0,height:void 0,y:0,left:0,right:0,top:0,bottom:0};class fv{constructor(){this.images=new Map()}destroy(){this.images.clear()}add(a,c){if(typeof a==="string")Dj(this,a,c);else if(Array.isArray(a)){let d=a;for(let f=0,i=d.length;f<i;f++)Dj(this,d[f])}else{let d=a;for(a in d)Dj(this,a,d[a])}return this}remove(a){return this.images.delete(a),this}get(a){return this.images.get(a)}getOuterWidth(a){let c=this.images.get(a);return c?c.width+c.left+c.right:0}getOuterHeight(a){let c=this.images.get(a);return c?c.height+c.top+c.bottom:0}getFrame(a){let c=this.images.get(a);if(!c)return;let d=Tb.get(),f=d.get(c.key);if(!f)return;let i=f.getFrame(c.frame);return i}hasTexture(a){return!!this.getFrame(a)}}function Bj(a,c){a.font=c.font}function Cj(a,c){a.textBaseline="alphabetic",a.textAlign="start",a.fillStyle=c.fillStyle,a.strokeStyle=c.strokeStyle,a.lineWidth=c.strokeThickness,a.lineCap="round",a.lineJoin="round",a.imageSmoothingEnabled=c.antialias}function Jn(a,c,d){d?(a.shadowColor=c.shadowColor,a.shadowBlur=c.shadowBlur,a.shadowOffsetX=c.shadowOffsetX,a.shadowOffsetY=c.shadowOffsetY):(a.shadowColor="#000",a.shadowBlur=0,a.shadowOffsetX=0,a.shadowOffsetY=0)}function kv(a,c){return c.measureText(a).width}function lv(a,c,d=0){let f=c.measureText(a),i=f.actualBoundingBoxAscent,l=f.actualBoundingBoxDescent;return(!i&&!l||a==="")&&(i=d,l=0),Hj.ascent=i,Hj.descent=l,Hj.height=Math.ceil(Math.abs(i)+Math.abs(l)),Hj}let Hj={ascent:0,descent:0,height:0};function gv(a,c,d,f,i){a.freePens();if(c==="")return a;let l=d.canvas,q=d.context,u=d.parent,v=d.parser.splitText(c),A,E,H=0;for(var R=0,N=v.length;R<N;R++){let ga=d.parser.tagTextToProp(v[R],A),la=ga.text;A=ga.prop;if(A.img){let ia,oa;d.imageManager?(ia=d.imageManager.getOuterWidth(A.img),oa=d.imageManager.getOuterHeight(A.img)):(ia=0,oa=0),i>0&&f!==Qb.none&&(i<H+ia&&(a.addNewLinePen(Cb.wrapped),H=0)),a.addImagePen(H,0,ia,oa,Ve(A)),H+=ia}else if(la!==""){q.save();let ia=d.parser.propToStyle(u,A);Bj(q,ia),Cj(q,ia);let oa=ia.strokeThickness,pa=oa/2;E=mv(la,kv,q,f,i,H);let ja=lv("|MÉq",q);for(let I=0,O=E.length;I<O;I++){const x=E[I],G=ja.height+oa,F=ja.ascent+pa,J=ja.descent+pa;a.addTextPen(x.text,H,0,x.width,G,F,J,Ve(A),x.newLineMode),x.newLineMode!==Cb.none?H=0:H+=x.width}q.restore()}}let P=a.lines,V=d.parent.lineSpacing,Y=0,fa=0;for(let ga=0,la=P.length;ga<la;ga++){const ia=P[ga],oa=ia.pens,pa=oa.length;let ja=0,I=0;for(let G=0;G<pa;G++){const F=oa[G];ja=Math.max(ja,F.ascent),I=Math.max(I,F.descent)}const O=ja+I,x=fa+ja;for(let G=0;G<pa;G++)oa[G].y+=x;ia.y=x,ia.height=O,Y=Math.max(Y,ia.width),fa+=O+V}return a.maxLineWidth=Y,a.totalLineHeight=fa-V,a}const qq={PI2:Math.PI*2,HALF_PI:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};class qy extends _b{constructor(a,c,d,f,i){super(a,c,d,f);this.name=i}}class iv{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return this.hitAreas.length=0,this}add(a,c,d,f,i){let l=new qy(c,d,f,i,a);return this.hitAreas.push(l),this}getFirstHitArea(a,c){for(let d=0,f=this.hitAreas.length;d<f;d++){let i=this.hitAreas[d];if(i.contains(a,c))return i}return null}}function hv(a,c,d,f,i,l=0,q=0,u=a.penManager){a.hitAreaManager&&a.hitAreaManager.clear();let v=u.totalLineHeight;if(v===0)return;const A=f<a.textWidth||i<a.textHeight;let E=a.context;E.save();let H=a.parent;ly(a,H),my(a,H),A&&(E.beginPath(),E.rect(c,d,f,i),E.clip());let R=H.align%3,N=Math.floor(H.align/3),P=d-q;switch(N){case dh.center:P+=(i-v)/2;break;case dh.bottom:P+=i-v-2;break}let V=u.lines,Y=P;const fa=c+i;for(let ga=0,la=V.length;ga<la;ga++){let ia=V[ga];if(Y>fa)break;const oa=Y+ia.height;if(oa<d){Y=oa;continue}let pa=ia.width;if(pa===0){Y=oa;continue}let ja=c-l;switch(R){case ch.center:ja+=(f-pa)/2;break;case ch.right:ja+=f-pa;break}let I=ia.pens;for(let O=0,x=I.length;O<x;O++)ky(a,I[O],ja,P);Y=oa}E.restore()}function ky(a,c,d,f){d+=c.x,f+=c.y;let i=a.canvas,l=a.context,q=a.parent;l.save();let u=a.parser.propToStyle(q,c.prop);Bj(l,u),Cj(l,u),u.underlineThickness>0&&c.width>0&&ny(a,d,f,c.width,u),c.isTextPen&&oy(a,d,f,c.text,u),c.isImagePen&&py(a,d,f,c.prop.img,u),l.restore(),c.hasAreaMarker&&c.width>0&&(a.hitAreaManager||(a.hitAreaManager=new iv()),a.hitAreaManager.add(c.prop.area,d,f,c.width,c.height))}function ly(a,c){let d=a.canvas,f=a.context;f.clearRect(0,0,d.width,d.height)}function my(a,c){let d=a.canvas,f=a.context;f.clearRect(0,0,d.width,d.height);const i=c.backgroundFillStyle,l=c.backgroundStrokeStyle;if(i||l){const q=c.backgroundStrokeThickness,u=q/2,v=c.cornerRadius,A=c.cornerIteration,E=u,H=u,R=d.width-q,N=d.height-q;Tg(d,f,E,H,R,N,v,i,l,q,c.backgroundFillColor2,c.backgroundIsHorizontalGradient,A)}else f.clearRect(0,0,d.width,d.height)}function ny(a,c,d,f,i){d+=i.underlineOffsetY-i.underlineThickness/2;let l=a.context,q=l.lineCap;l.lineCap="butt",l.beginPath(),l.strokeStyle=i.underlineStyle,l.lineWidth=i.underlineThickness,l.moveTo(c,d),l.lineTo(c+f,d),l.stroke(),l.lineCap=q}function oy(a,c,d,f,i){let l=a.context;i.strokeStyle&&i.strokeStyle!=="none"&&i.strokeThickness>0&&(Jn(l,i,i.shadowStroke),l.strokeText(f,c,d)),i.fillStyle&&i.fillStyle!=="none"&&(Jn(l,i,i.shadowFill),l.fillText(f,c,d))}function py(a,c,d,f,i){let l=a.imageManager;if(!l)return;let q=l.get(f),u=l.getFrame(f);c+=q.left,d+=q.y-q.height;let v=a.context;v.drawImage(u.texture.image,u.x,u.y,u.width,u.height,c,d,q.width,q.height)}class Yu{constructor({canvas:a,context:c,parent:d,parser:f,penPool:i=new Ue()}){this.textScrollX=0;this.textScrollY=0;this.canvas=a,this.context=c,this.parser=f,this.parent=d,this.penPool=i,this.penManager=new eh({penPool:i})}destroy(){this.parser.destroy(),this.canvas=null,this.context=null,this.parser=null,this.parent=null,this.penManager&&(this.penManager.destroy(),this.penManager=null),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=null),this.imageManager&&(this.imageManager.destroy(),this.imageManager=null),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=null)}get textWidth(){return this.penManager.maxLineWidth}get textHeight(){return this.penManager.totalLineHeight}updatePenManager(a,c,d,f=this.penManager){return gv(f,a,this,c,d)}draw(a,c,d,f,i=0,l=0){return hv(this,a,c,d,f,i,l,this.penManager),this}get lines(){return this.penManager.lines}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=new eh({penPool:this.penPool})),this._tmpPenManager}getPlainText(a,c,d){let f;return a==null?f=this.penManager.plainText:f=this.parser.splitText(a,!0).join(""),(c!=null||d!=null)&&(c==null&&(c=0),d==null&&(d=f.length),f=f.substring(c,d)),f}getPenManager(a,c){return a===void 0?this.clonePenManager(c,this.penManager):(c===void 0&&(c=new eh({penPool:this.penPool})),this.updatePenManager(a,this.parent.wrapMode,this.parent.wrapWidth,c),c)}getText(a,c,d,f){if(a==null)return this.penManager.getSliceTagText(this.parser.propToTagText,this.parser,c,d,f);let i=this.tmpPenManager;return this.updatePenManager(a,this.parent.wrapMode,this.parent.wrapWidth,i),i.getSliceTagText(this.parser.propToTagText,this.parser,c,d,f)}clonePenManager(a,c=this.penManager){return c.clone(a)}getLastPen(a=this.penManager){return a.lastPen}addImageInfo(a,c){return this.imageManager===void 0&&(this.imageManager=new fv()),this.imageManager.add(a,c),this}}function wn(a,c=!0,d=!0){let f=a.canvasText;c&&f.updatePenManager(a.text,a.wrapMode,a.wrapWidth);if(d){let i=a.padding,l,q,u,v;a.fixedWidth===0?(l=f.textWidth,u=l+i.left+i.right):(u=a.fixedWidth,l=u-i.left-i.right,l>f.textWidth&&(l=f.textWidth)),a.fixedHeight===0?(q=f.textHeight,v=q+i.top+i.bottom):(v=a.fixedHeight,q=v-i.top-i.bottom,q>f.textHeight&&(q=f.textHeight));let A=a.resolution,E=Math.ceil(u*A),H=Math.ceil(v*A),R=a.canvas;(R.width!==E||R.height!==H)&&(R.width=E,R.height=H,a.texture.setSize(u,v),a.setSize(u,v));let N=a.context;N.save(),N.scale(A,A),f.draw(i.left,i.top,l,q,0,a.textScrollY),N.restore(),a.texture.binding&&a.texture.binding.update(),a.setDirty(Ga.TEXTURE)}}function yj(a,c=0,d=0){a.fixedWidth=c,a.fixedHeight=d,Aj(a)}function xn(a,c,d,f,i){const l=a.padding;if(typeof c==="number")l.left=c,l.right=d===void 0?c:d,l.top=f===void 0?c:f,l.bottom=i===void 0?c:i;else{let q=c;l.left=q.left??0,l.right=q.right??0,l.top=q.top??0,l.bottom=q.bottom??0}Aj(a)}function Aj(a){const c=a.fixedWidth;if(a.wrapMode!==Qb.none){const d=a.padding,f=c-d.left-d.right;a.wrapWidth=Math.max(f,0)}else a.wrapWidth=0}function Zu(a,c,d=!1){d?a.textScrollYPercentage=c:a.textScrollY=c}function yn(a,c){typeof c==="string"&&(c=tb[c]),a.align=c}function zn(a,c=0){a.lineSpacing=c}function An(a,c,d,f=0,i=0,l,q=!0,u){d||(f=0),a.backgroundFillStyle=c,a.backgroundFillColor2=l,a.backgroundIsHorizontalGradient=q,a.backgroundStrokeStyle=d,a.backgroundStrokeThickness=f,a.cornerRadius=i,a.cornerIteration=u}function _u(a,c,d){c&&Bn(a,c),d&&Cn(a,d)}function Bn(a,c){a.fontFamily=c}function Cn(a,c){typeof c==="number"&&(c=`${c}px`),a.fontSize=c}function Dn(a,c){a.fillStyle=c}function En(a,c,d=2){a.strokeStyle=c,a.strokeThickness=d}function Fn(a,c="#000",d=5,f=0,i=0,l=!1,q=!1){a.shadowColor=c,a.shadowBlur=d,a.shadowOffsetX=f,a.shadowOffsetY=i,a.shadowFill=l,a.shadowStroke=q}function Gn(a,c,d){typeof c==="string"&&(c=Qb[c]),a.wrapMode=c,d===void 0?Aj(a):a.wrapWidth=d}function Hn(a,c,d=2,f=0){a.underlineStyle=c,a.underlineThickness=d,a.underlineOffsetY=f}function vn(a,c,d){a.canvasText.addImageInfo(c,d)}function $u(a,c,d,f){return c=a.canvasText.getText(c,d,f,!0),c.split(In)}function av(a,c,d,f){return a.canvasText.getPlainText(c,d,f)}function bv(a,c,d,f){return a.canvasText.getText(c,d,f,!1)}function cv(a,c,d,f){return a.canvasText.getText(c,d,f,!1)}function dv(a,c){return a.canvasText.clonePenManager(c)}function ev(a,c,d){return a.canvasText.getPenManager(c,d)}class zj extends vc{constructor(a,c,d="",{width:f=0,height:i=0,padding:l,wrapMode:q=Qb.none,backgroundFillStyle:u,backgroundFillColor2:v,backgroundIsHorizontalGradient:A,backgroundStrokeStyle:E,backgroundStrokeThickness:H,cornerRadius:R=0,cornerIteration:N,align:P=tb.top_left,lineSpacing:V=0,fontFamily:Y="monospace",fontSize:fa="16px",fillStyle:ga="#fff",strokeStyle:la,strokeThickness:ia=1,shadowColor:oa="#000",shadowBlur:pa=4,shadowOffsetX:ja=0,shadowOffsetY:I=0,shadowFill:O=!1,shadowStroke:x=!1,underlineStyle:G="#fff",underlineThickness:F=1,underlineOffsetY:J=0,images:U}={},K){super(a,c,Md());this.antialias=!1;this.fontFamily="monospace";this.fontSize="16px";this.fillStyle="#fff";this.strokeThickness=1;this.shadowStroke=!1;this.shadowFill=!1;this.shadowColor="#000";this.shadowBlur=4;this.shadowOffsetX=0;this.shadowOffsetY=0;this.underlineStyle="#fff";this.underlineThickness=1;this.underlineOffsetY=0;this.align=tb.top_left;this.lineSpacing=0;this.wrapMode=Qb.none;this.wrapWidth=0;this.fixedWidth=0;this.fixedHeight=0;this.padding={left:0,right:0,top:0,bottom:0};this._textScrollY=0;this.type="rexText";const ca=yb.get();this.resolution=ca.renderer.resolution,this.canvas=this.texture.image,this.context=this.canvas.getContext("2d"),this.canvasText=new Yu({canvas:this.canvas,context:this.context,parent:this,parser:K}),yj(this,f,i),l&&xn(this,l),Gn(this,q),yn(this,P),zn(this,V),An(this,u,E,H,R,v,A,N),Bn(this,Y),Cn(this,fa),Dn(this,ga),la&&En(this,la,ia),Fn(this,oa,pa,ja,I,O,x),Hn(this,G,F,J),U&&vn(this,U),this.setText(d)}destroy(a){this.canvasText.destroy(),this.texture.destroy(),this.canvas=null,this.context=null,super.destroy(a)}updateText(a=!0,c=!0){return wn(this,a,c),this}get text(){return this._text}set text(a){this.setText(a)}setText(a="",c=!0){return Array.isArray(a)&&(a=a.join(`
`)),a!==this._text&&(this._text=a.toString(),c&&this.updateText()),this}setBackgroundStyle(a,c,d=2,f=0,i,l=!0){return An(this,a,c,d,f,i,l),this}setFixedSize(a,c){return yj(this,a,c),this}setPadding(a,c,d,f){return xn(this,a,c,d,f),this}setTextScrollY(a,c=!1){return Zu(this,a,c),this}setAlign(a){return yn(this,a),this}setLineSpacing(a=0){return zn(this,a),this}setFont(a,c){return _u(this,a,c),this}setFillStyle(a){return Dn(this,a),this}setStrokeStyle(a,c=2){return En(this,a,c),this}setShadow(a="#000",c=5,d=0,f=0,i=!1,l=!1){return Fn(this,a,c,d,f,i,l),this}resize(a,c){return yj(this,a,c),wn(this),this}setWrapMode(a,c=0){return Gn(this,a,c),this}setUnderline(a,c=2,d=0){return Hn(this,a,c,d),this}addImageInfo(a,c){return vn(this,a,c),this}getWrappedText(a,c,d){return $u(this,a,c,d)}getPlainText(a,c,d){return av(this,a,c,d)}getText(a,c,d){return bv(this,a,c,d)}getSubString(a,c,d){return cv(this,a,c,d)}clonePenManager(a){return dv(this,a)}getPenManager(a,c){return ev(this,a,c)}get textScrollY(){return this._textScrollY}set textScrollY(a){this._textScrollY=a}get textScrollYPercentage(){return this._textScrollY/(this.totalTextHeight-this.displayTextHeight)}set textScrollYPercentage(a){const c=this.displayTextHeight,d=this.totalTextHeight;d<=c?this._textScrollY=0:this._textScrollY=(d-c)*a}get totalTextHeight(){return this.canvasText.textHeight}get displayTextHeight(){const a=this.padding;return this.height-a.top-a.bottom}}class Ej{destroy(){}}const Fj={text:null,prop:null},Gj={font:void 0,fontFamily:void 0,fontStyle:void 0,fontSize:void 0,fillStyle:void 0,strokeStyle:void 0,strokeThickness:void 0,shadowColor:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,shadowBlur:void 0,shadowStroke:void 0,shadowFill:void 0,underlineStyle:void 0,underlineThickness:void 0,underlineOffsetY:void 0,image:void 0};class nv extends Ej{splitText(a,c=!1){const d=[];let f=0;for(;;){const l=Mn.exec(a);if(!l)break;const q=l[0],u=Mn.lastIndex-q.length;f<u&&d.push(a.substring(f,u)),c||d.push(q),f=Mn.lastIndex}const i=a.length;return f<i&&d.push(a.substring(f,i)),d}tagTextToProp(a,c){let d,f;c==null&&(c={}),c.img&&Ab(c,ad,"img"),uy.test(a)?(Ab(c,oc,"b",!0),d=""):vy.test(a)?(Ab(c,ad,"b"),d=""):wy.test(a)?(Ab(c,oc,"i",!0),d=""):xy.test(a)?(Ab(c,ad,"i"),d=""):ov.test(a)?(f=a.match(ov),Ab(c,oc,"size",f[1]+"px"),d=""):yy.test(a)?(Ab(c,ad,"size"),d=""):pv.test(a)?(f=a.match(pv),Ab(c,oc,"color",f[1]),d=""):zy.test(a)?(Ab(c,ad,"color"),d=""):qv.test(a)?(f=a.match(qv),Ab(c,oc,"u",!0),d=""):rv.test(a)?(f=a.match(rv),Ab(c,oc,"u",f[1]),d=""):Ay.test(a)?(Ab(c,ad,"u"),d=""):By.test(a)?(Ab(c,oc,"shadow",!0),d=""):sv.test(a)?(f=a.match(sv),Ab(c,oc,"shadow",f[1]),d=""):Cy.test(a)?(Ab(c,ad,"shadow"),d=""):Dy.test(a)?(Ab(c,oc,"stroke",!0),d=""):tv.test(a)?(f=a.match(tv),Ab(c,oc,"stroke",f[1]),d=""):Ey.test(a)?(Ab(c,ad,"stroke"),d=""):uv.test(a)?(f=a.match(uv),Ab(c,oc,"img",f[1]),d=""):Fy.test(a)?(Ab(c,ad,"img"),d=""):vv.test(a)?(f=a.match(vv),Ab(c,oc,"area",f[1]),d=""):Gy.test(a)?(Ab(c,ad,"area"),d=""):d=a;const i=Fj;return i.text=d,i.prop=c,i}propToStyle(a,c){const d=Gj;return c.hasOwnProperty("img")?d.image=c.img:(d.image=null,d.fontFamily=a.fontFamily,d.fontSize=c.size??a.fontSize,d.fontStyle=sy(c.b,c.i),d.font=`${d.fontStyle} ${d.fontSize} ${d.fontFamily}`,d.fillStyle=c.color??a.fillStyle,c.hasOwnProperty("stroke")?c.stroke===!0?(d.strokeStyle=a.strokeStyle,d.strokeThickness=a.strokeThickness):(d.strokeStyle=c.stroke,d.strokeThickness=a.strokeThickness):(d.strokeStyle=a.strokeStyle,d.strokeThickness=0)),c.hasOwnProperty("shadow")?c.shadow===!0?(d.shadowColor=a.shadowColor,d.shadowOffsetX=a.shadowOffsetX,d.shadowOffsetY=a.shadowOffsetY,d.shadowBlur=a.shadowBlur,d.shadowStroke=!0,d.shadowFill=!0):(d.shadowColor=c.shadow,d.shadowOffsetX=a.shadowOffsetX,d.shadowOffsetY=a.shadowOffsetY,d.shadowBlur=a.shadowBlur,d.shadowStroke=!0,d.shadowFill=!0):(d.shadowColor="#000",d.shadowOffsetX=0,d.shadowOffsetY=0,d.shadowBlur=0,d.shadowStroke=!1,d.shadowFill=!1),c.hasOwnProperty("u")?c.u===!0?(d.underlineStyle=a.underlineStyle,d.underlineThickness=a.underlineThickness,d.underlineOffsetY=a.underlineOffsetY):(d.underlineStyle=c.u,d.underlineThickness=a.underlineThickness,d.underlineOffsetY=a.underlineOffsetY):(d.underlineStyle="#000",d.underlineThickness=0,d.underlineOffsetY=0),d}propToTagText(a,c,d){d==null&&(d=ty);let f=[];for(const l in d){if(c.hasOwnProperty(l))continue;f.push(`[/${l}]`)}a=`${f.join()}${a}`;let i=[];for(const l in c){if(d[l]===c[l])continue;switch(l){case"size":const q=c.size.replace("px","");i.push(`[size=${q}]`);break;case"color":case"img":case"area":i.push(`[${l}=${c[l]}]`);break;case"stroke":case"u":c[l]===!0?i.push(`[${l}]`):i.push(`[${l}=${c[l]}]`);break;default:i.push(`[${l}]`);break}}return a=`${a}${i.join()}`,a}}const Ab=function(a,c,d,f){return c===oc?a[d]=f:a.hasOwnProperty(d)&&delete a[d],a};var sy=function(a,c){return a&&c?"bold italic":a?"bold":c?"italic":""};const ty={},Mn=/\[b\]|\[\/b\]|\[i\]|\[\/i\]|\[size=(\d+)\]|\[\/size\]|\[color=([a-z]+|#[0-9abcdef]+)\]|\[\/color\]|\[u\]|\[u=([a-z]+|#[0-9abcdef]+)\]|\[\/u\]|\[shadow\]|\[shadow=([a-z]+|#[0-9abcdef]+)\]|\[\/shadow\]|\[stroke\]|\[stroke=([a-z]+|#[0-9abcdef]+)\]|\[\/stroke\]|\[img=([^\]]+)\]|\[\/img\]|\[area=([^\]]+)\]|\[\/area\]/ig;var uy=/\[b\]/i,vy=/\[\/b\]/i,wy=/\[i\]/i,xy=/\[\/i\]/i,ov=/\[size=(\d+)\]/i,yy=/\[\/size\]/i,pv=/\[color=([a-z]+|#[0-9abcdef]+)\]/i,zy=/\[\/color\]/i,qv=/\[u\]/i,rv=/\[u=([a-z]+|#[0-9abcdef]+)\]/i,Ay=/\[\/u\]/i,By=/\[shadow\]/i,sv=/\[shadow=([a-z]+|#[0-9abcdef]+)\]/i,Cy=/\[\/shadow\]/i,Dy=/\[stroke\]/i,tv=/\[stroke=([a-z]+|#[0-9abcdef]+)\]/i,Ey=/\[\/stroke\]/i,uv=/\[img=([^\]]+)\]/i,Fy=/\[\/img\]/i,vv=/\[area=([^\]]+)\]/i,Gy=/\[\/area\]/i;const ad=!1,oc=!0;class Vg extends zj{constructor(a,c,d="",f){super(a,c,d,f,new nv());this.type="rexBBcodeText"}}class wv extends Ej{constructor(a){super();this.tags=new Map();if(a)for(const c in a)this.addTag(c,a[c])}destroy(){this.tags.clear()}addTag(a,c){return this.tags.set(a,c),this}isTextTag(a){const c=this.tags.get(a);return c?c.img==null:!1}splitText(a,c=!1){const d=[];let f=0;for(;;){const l=Nn.exec(a);if(!l)break;const q=l[0],u=Nn.lastIndex-q.length;f<u&&d.push(a.substring(f,u));if(!c)d.push(q);else if(yv.test(q)){const v=q.match(zv);d.push(v[2])}else if(Av.test(q)){const v=q.match(Bv);d.push(v[2])}f=Nn.lastIndex}const i=a.length;return f<i&&d.push(a.substring(f,i)),d}tagTextToProp(a,c){let d,f;if(yv.test(a)){const l=a.match(zv);if(l!=null){const q=l[1],u=this.tags;f=u.get(q)??{},f._class=q,d=l[2]}}else if(Av.test(a)){const l=a.match(Bv);if(l!=null){const q=l[1];f=Hy(q),f._style=q,d=l[2]}}d===void 0&&(d=a),f===void 0&&(f={});const i=Fj;return i.text=d,i.prop=f,i}propToStyle(a,c){const d=Gj;if(c.hasOwnProperty("img"))d.image=c.img;else{d.image=null,d.fontFamily=c.family??c.fontFamily??c["font-family"]??a.fontFamily;let f=c.size??c.fontSize??c["font-size"]??a.fontSize;typeof f==="number"&&(f=`${f}px`),d.fontSize=f,d.fontStyle=c.style??c.fontStyle??c["font-style"]??"",d.font=`${d.fontStyle} ${d.fontSize} ${d.fontFamily}`,d.fillStyle=c.color??c["font-color"]??a.fillStyle;if(c.hasOwnProperty("stroke")){const i=c.stroke;d.strokeStyle=i.color??a.strokeStyle,d.strokeThickness=i.thinkness??a.strokeThickness}else d.strokeStyle=a.strokeStyle,d.strokeThickness=a.strokeThickness}if(c.hasOwnProperty("shadow")){const f=c.shadow;d.shadowColor=f.color??a.shadowColor,d.shadowOffsetX=f.offsetX??a.shadowOffsetX,d.shadowOffsetY=f.offsetY??a.shadowOffsetY,d.shadowBlur=f.blur??a.shadowBlur,d.shadowStroke=!0,d.shadowFill=!0}else d.shadowColor=a.shadowColor,d.shadowOffsetX=a.shadowOffsetX,d.shadowOffsetY=a.shadowOffsetY,d.shadowBlur=a.shadowBlur,d.shadowStroke=a.shadowStroke,d.shadowFill=a.shadowFill;if(c.hasOwnProperty("u")||c.hasOwnProperty("underline")){const f=c.u??c.underline;d.underlineStyle=f.color??a.underlineStyle,d.underlineThickness=f.thinkness??a.underlineThickness,d.underlineOffsetY=f.offset??a.underlineOffsetY}else d.underlineStyle="#000",d.underlineThickness=0,d.underlineOffsetY=0;return d}propToTagText(a,c,d){if(c.hasOwnProperty("_class")){if(a===""){if(this.isTextTag(c._class))return""}return`<class=${c._class}>${a}</class>`}else if(c.hasOwnProperty("_style"))return`<style=${c._style}>${a}</style>`}}function Hy(a){const c=a.split(";"),d={};for(var f=0,i=c.length;f<i;f++){const[l,q]=c[f].split(":");if(xv(l)||xv(q))continue;if(l==="stroke"){const u=q.split(" "),v={},A=u.length;A>=1&&(v.color=u[0]),A>=2&&(v.thinkness=parseInt(u[1].replace("px",""))),d.stroke=v}else if(l==="shadow"){const u=q.split(" "),v={},A=u.length;A>=1&&(v.color=u[0]),A>=2&&(v.offsetX=parseInt(u[1].replace("px",""))),A>=3&&(v.offsetY=parseInt(u[2].replace("px",""))),A>=4&&(v.blur=parseInt(u[3].replace("px",""))),d.shadow=v}else if(l==="u"||l==="underline"){const u=q.split(" "),v={},A=u.length;A>=1&&(v.color=u[0]),A>=2&&(v.thinkness=parseInt(u[1].replace("px",""))),A>=3&&(v.offset=parseInt(u[2].replace("px",""))),d[l]=v}else d[l]=q}return d}function xv(a){return a=a.replace(Iy,""),a.length===0}const Nn=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,yv=/<\s*class=/i,zv=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,Av=/<\s*style=/i,Bv=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,Iy=/^\s+|\s+$/;class Wg extends zj{constructor(a,c,d="",f){const i=f?f.tags:void 0;super(a,c,d,f,new wv(i));this.type="rexTagText"}get parser(){return this.canvasText.parser}addTag(a,c){return this.parser.addTag(a,c),this}addTags(a){for(const c in a)this.parser.addTag(c,a[c]);return this}}const pe={};_d(pe,{BBCodeText:()=>Vg,BaseSizer:()=>Ya,Chart:()=>Qg,FixedWidthSizer:()=>mj,GridSizer:()=>oj,Label:()=>qj,MaskedImage:()=>Rg,OverlapSizer:()=>rj,RectangleCanvas:()=>Sg,RoundRectangleCanvas:()=>Ug,Sizer:()=>Lf,TagText:()=>Wg});function nc(a,c){return a===void 0||c===void 0?void 0:`${a}|${c}`}function Rr(a,c){let d=a.split("|");return c===void 0&&(c=zx),c.x=parseInt(d[0]),c.y=parseInt(d[1]),c}let zx={x:0,y:0};let _v=new Ue();function Zq(){let a=_v.pop();return a===null&&(a=new Map()),a}function yi(a){_v.push(a)}function Xq(a,c,d,f,i,l,q,u){if(d===l&&f===q&&i===u)return;let v=nc(d,f),A=nc(l,q);if(v){let E=c.get(v);E.delete(i);if(v===A){E.set(u,a);return}else E.size===0&&(yi(E),c.delete(v))}if(A){let E=c.get(A);E?E.set(u,a):(E=Zq(),E.set(u,a),c.set(A,E))}}function Ol(a,c,d,f){let i=nc(c,d),l=a.get(i);l&&(f!==void 0?(l.delete(f),l.size===0&&(yi(l),a.delete(i))):(l.clear(),yi(l),a.delete(i)))}let $v=new Ue();function Yq(){let a=$v.pop();return a===null&&(a=new Set()),a}function Nl(a){$v.push(a)}function xi(a,c,d,f){if(d===f)return;if(d!==void 0){let i=c.get(d);i&&(i.delete(a),i.size===0&&(Nl(i),c.delete(d)))}if(f!==void 0){let i=c.get(f);i?i.add(a):(i=Yq(),i.add(a),c.set(f,i))}}function De(a,c,d){let f=a.get(c);f&&(f.delete(d),f.size===0&&(Nl(f),a.delete(c)))}function Sq(a,c,d,f,i){let l=a.chessToXYZ.get(c),q=l?l.x:void 0,u=l?l.y:void 0,v=l?l.y:void 0;l?(l.x=d,l.y=f,l.z=i):a.chessToXYZ.set(c,{x:d,y:f,z:i}),Xq(c,a.XYToZMap,q,u,v,d,f,i),xi(c,a.XToChessSet,q,d),xi(c,a.YToChessSet,u,f),xi(c,a.ZToChessSet,v,i)}function Ce(a,c,d,f){let i=a.XYToZMap.get(nc(c,d));return i===void 0?null:f!==void 0?i.has(f)?i.get(f):null:i}function Tq(a,c,d,f){if(f!==void 0){let i=Ce(a,c,d,f);if(i===void 0)return;a.chessToXYZ.delete(i),Ol(a.XYToZMap,c,d,f),De(a.XToChessSet,c,i),De(a.YToChessSet,d,i),De(a.ZToChessSet,f,i)}else{let i=Ce(a,c,d);if(i){for(const[l,q]of i)a.chessToXYZ.delete(q),De(a.XToChessSet,c,q),De(a.YToChessSet,d,q),De(a.ZToChessSet,l,q);Ol(a.XYToZMap,c,d)}}}function Uq(a,c){return a.chessToXYZ.has(c)}function Vq(a,c,d,f){return Ce(a,c,d,f)!==null}function Wq(a,c){return a.chessToXYZ.get(c)||null}function Ll(a){let c=-Infinity;for(const[d,f]of a)c<d&&(c=d);return c}function Ml(a){let c=Infinity;for(const[d,f]of a)c>d&&(c=d);return c}class wl{constructor(){this.chessToXYZ=new Map();this.XYToZMap=new Map();this.XToChessSet=new Map();this.YToChessSet=new Map();this.ZToChessSet=new Map();this._xMax=void 0;this._xMin=void 0;this._yMax=void 0;this._yMin=void 0}destroy(){this.clear()}clear(){return this.chessToXYZ.clear(),this.XYToZMap.clear(),this.XToChessSet.clear(),this.YToChessSet.clear(),this.ZToChessSet.clear(),this.clearBounds(),this}clearBounds(){return this._xMax=void 0,this._xMin=void 0,this._yMax=void 0,this._yMin=void 0,this}addChess(a,c,d,f){return Sq(this,a,c,d,f),this.clearBounds(),this}getChess(a,c,d){return Ce(this,a,c,d)}removeChess(a,c,d){return Tq(this,a,c,d),this.clearBounds(),this}hasChess(a){return Uq(this,a)}contains(a,c,d){return Vq(this,a,c,d)}getXYZ(a){return Wq(this,a)}get xMax(){return this._xMax===void 0&&(this._xMax=Ll(this.XToChessSet)),this._xMax}get xMin(){return this._xMin===void 0&&(this._xMin=Ml(this.XToChessSet)),this._xMin}get yMax(){return this._yMax===void 0&&(this._yMax=Ll(this.YToChessSet)),this._yMax}get yMin(){return this._yMin===void 0&&(this._yMin=Ml(this.YToChessSet)),this._yMin}}function Jc(a,c=[]){let d=a.boardData.chessToXYZ;for(const[f,i]of d)c.push(f);return c}function Ni(a){if(typeof a!=="object"||a.nodeType||a===a.window)return!1;try{if(a.constructor&&!{}.hasOwnProperty.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}return!0}function Cg(a){return Ni(a)?!0:typeof a==="object"?a.isTileXYZ:!1}function Pa(a,c){let d=a.boardData.getXYZ(c);return d?d:Cg(c)?c:null}function wb(a,c,d,f){return a.boardData.getChess(c,d,f)}class _q{constructor(a){this.board=null;this.blocker=!1;this.parent=a,this.boot()}boot(){typeof this.parent==="object"&&this.parent.on&&this.parent.on("destroy",this.destroy,this)}destroy(){if(this.board){let a=this.tileXYZ;this.board.boardData.removeChess(a.x,a.y,a.z)}this.parent=void 0,this.board=null}setBoard(a){return this.board=a,this}get tileXYZ(){return this.board==null?null:this.board.boardData.getXYZ(this.parent)}setBlocker(a=!0){return this.blocker=a,this}setBlockEdge(a,c=!0){typeof this.blocker==="boolean"&&(this.blocker={});let d=this.blocker;if(typeof a==="object"){let f=a;for(let i in f)d[i]=f[i]}else d[a]=c;return this}getBlockEdge(a){return typeof this.blocker==="boolean"?!1:this.blocker.hasOwnProperty(a)?this.blocker[a]:!1}}function xc(a){return a.hasOwnProperty("rexChess")||(a.rexChess=new _q(a)),a.rexChess}function hc(a,c,d,f,i,l=!1,q=!1){if(c){let u=Pa(a,c);if(u)d=u.x,f=u.y,i=u.z;else return}else{c=wb(a,d,f,i);if(!c)return}q||a.boardData.removeChess(d,f,i),a._isBoard&&xc(c).setBoard(null),l&&c.destroy&&c.destroy()}function Be(a,c){if(a.infinityMode)return;if(a.height===void 0||a.height<=c){a.height=c;return}let d=Jc(a);d.forEach(f=>{let i=Pa(a,f);i.y>c&&hc(a,f)}),a.height=c}function Ae(a,c){if(a.infinityMode)return;if(a.width===void 0||a.width<=c){a.width=c;return}let d=Jc(a);d.forEach(f=>{let i=Pa(a,f);i.x>c&&hc(a,f)}),a.width=c}class hi{constructor({grid:a=void 0,wrap:c=!1,inifinity:d=!1,width:f=0,height:i=0}={}){this.boardData=new wl(),this._isBoard=!0,this.setGrid(a),this.setWrapMode(c),this.setInfinityMode(d),this.setBoardSize(f,i)}destroy(){}setGrid(a){return this.grid=a,this}setWrapMode(a=!0){return this.wrapMode=a,this}setInfinityMode(a=!0){return this.infinityMode=a,this}setBoardSize(a=0,c=0){return Ae(this,a),Be(this,c),this}}function wc(a,c,d,f){let i;return a.infinityMode?i=!0:i=c>=0&&c<a.width&&d>=0&&d<a.height,i&&f!==void 0&&(i=a.boardData.contains(c,d,f)),i}function Ub(a,c,d,f){return a.grid.getWorldXY(c,d,f)}function xf(a,c,d,f){if(c===void 0){let i=Jc(a);for(let l=0,q=i.length;l<q;l++){let u=i[l],v=Pa(a,u);Ub(a,v.x,v.y,u)}}else{if(d===void 0){let i=Pa(a,c);d=i.x,f=i.y}Ub(a,d,f,c)}}function Nd(a,c,d,f,i,l=!0){if(!wc(a,d,f))return;let q=Pa(a,c);i===void 0&&(q?i=q.z:i=0);if(q&&q.x===d&&q.y===f&&q.z===i)return;let u=wb(a,d,f,i);u&&(hc(a,null,d,f,i),console.warn(`Chess at (${d},${f},${i}) has been removed because of overlapped`)),a.boardData.addChess(c,d,f,i),a._isBoard&&xc(c).setBoard(a),l&&xf(a,c,d,f)}function He(a,c,d,f){return Math.atan2(f-c,d-a)}function Od(a,c,d){let f=Pa(a,c),i=Pa(a,d),l=Ub(a,f.x,f.y,!0),q=l.x,u=l.y;l=Ub(a,i.x,i.y,!0);let v=l.x,A=l.y;return He(q,u,v,A)}function nd(a,c,d){let f=d-c;return c+((a-c)%f+f)%f}function wf(a,c,d,f={x:0,y:0}){return f===!0&&(f=Hw),a.wrapMode?c=nd(c,0,a.width):!a.infinityMode&&(c<0||c>=a.width)&&(c=null),a.wrapMode?d=nd(d,0,a.height):!a.infinityMode&&(d<0||d>=a.height)&&(d=null),f.x=c,f.y=d,f}let Hw={x:0,y:0};function gc(a,c,d,f,i){let l=Pa(a,c);if(l===null)return null;typeof d==="string"&&(d.includes(",")?d=d.split(".").map(A=>parseInt(A,10)):d=parseInt(d));let q=typeof d==="number",u=typeof f==="number";if(q&&u){let A=a.grid.getTileXYAtDirection(l,d,f,i);return wf(a,A.x,A.y,A),(A.x===null||A.y===null)&&(A=null),A}Array.isArray(i)||(i=[]),d===null&&(d=a.grid.allDirections);let v;if(q)if(Array.isArray(f))for(let A=0,E=f.length;A<E;A++)v=gc(a,l,d,f[A]),v!==null&&i.push(v);else{let A,E,H;({end:A=1,start:E=A>0?1:-1,step:H=A>=E?1:-1}=f);if(E===A)v=gc(a,l,d,A),v!==null&&i.push(v);else if(E<A)for(let R=E;R<=A;R+=H)v=gc(a,l,d,R),v!==null&&i.push(v);else for(let R=E;R>=A;R+=H)v=gc(a,l,d,R),v!==null&&i.push(v)}else for(let A=0,E=d.length;A<E;A++)u?(v=gc(a,l,d[A],f),v!==null&&i.push(v)):gc(a,l,d[A],f,i);return i}function Wc(a,c,d=null,f={x:0,y:0}){return gc(a,c,d,1,f)}function tf(a,c,d){c===void 0&&(c=Lw);let f=a.wrapMode,i=a.infinityMode;a.wrapMode=!1,a.infinityMode=!0;let l=Wc(a,c,d,!0);return a.wrapMode=f,a.infinityMode=i,Od(a,c,l)}let Lw={x:0,y:0};const Xy=180/Math.PI;function Af(a){return a*Xy}function cr(a,c){let d=c-a;if(d===0)return 0;let f=Math.floor((d- -180)/360);return d-f*360}function sf(a,c,d){d=Af(d);let f=a.grid.allDirections,i=Infinity,l;for(let q=0,u=f.length;q<u;q++){let v=Af(tf(a,c,f[q])),A=Math.abs(cr(d,v));A<i&&(i=A,l=q)}return l}function vf(a,c,d){if(c===null||d===null)return null;if(c.x===d.x&&c.y===d.y)return null;let f=a.grid.getNeighborTileDirection(c,d);if(a.wrapMode&&f===null){let i=Wc(a,c,null);for(let l=0,q=i.length;l<q;l++){let u=i[l];if(d.x===u.x&&d.y===u.y){f=l;break}}}return f}function uf(a,c,d){let f=Pa(a,c),i=Pa(a,d);return vf(a,f,i)}function ji(a,c,d){return uf(a,c,d)!==null}function ki(a,c,d,f=!0){let i=Pa(a,c),l=Pa(a,d);return i===null||l===null?null:a.grid.directionBetween(i,l,f)}function zg(a,c,d=1,f=[]){let i=a.grid.ringToTileXYArray(c,d);for(let l=0,q=i.length;l<q;l++){let u=i[l];wc(a,u.x,u.y)&&f.push(u)}return f}function xl(a,c,d,f=!0,i=[]){for(let l=0;l<=d;l++){let q=f?l:d-l;zg(a,c,q,i)}return i}function Kc(a,c,d,f,i={x:0,y:0}){return i===!0&&(i=Jw),d===0&&f===0?(i.x=c.x,i.y=c.y):a.grid.offset(c,d,f,i),i}let Jw={x:0,y:0};function yl(a,c){let d=Infinity,f=Infinity,i;for(let u=0,v=c.length;u<v;u++)i=c[u],d=Math.min(d,i.x),f=Math.min(f,i.y);if(d!==0||f!==0)for(let u=0,v=c.length;u<v;u++)i=c[u],Kc(a,i,-d,-f,i);let l=-Infinity,q=-Infinity;for(let u=0,v=c.length;u<v;u++)i=c[u],l=Math.max(l,i.x),q=Math.max(q,i.y);return Ae(a,l+1),Be(a,q+1),c}var Fe;(function(a){a[a["x+,y+"]=0]="x+,y+",a[a["x-,y+"]=1]="x-,y+",a[a["y+,x+"]=2]="y+,x+",a[a["y-,x+"]=3]="y-,x+"})(Fe||(Fe={}));function li(a,c,d,f=0){let i={x:0,y:0};switch(f){case 0:for(let l=0;l<a.height;l++)for(let q=0;q<a.width;q++)i.x=q,i.y=l,d?c.call(d,i,a):c(i,a);break;case 1:for(let l=0;l<a.height;l++)for(let q=a.width-1;q>=0;q--)i.x=q,i.y=l,d?c.call(d,i,a):c(i,a);break;case 2:for(let l=0;l<a.width;l++)for(let q=0;q<a.height;q++)i.x=l,i.y=q,d?c.call(d,i,a):c(i,a);break;case 3:for(let l=0;l<a.width;l++)for(let q=a.height-1;q>=0;q--)i.x=l,i.y=q,d?c.call(d,i,a):c(i,a)}}function mi(a,c,d,f){return a.grid.getDistance(c,d,f)}function xg(a,c=0,d=[]){if(Array.isArray(c)){let f=c;for(let i=0;i<a.height;i++)for(let l=0;l<a.width;l++){let q=!0;for(let u=0,v=f.length;u<v;u++)if(wb(a,l,i,f[u])!==null){q=!1;break}q&&d.push({x:l,y:i})}}else for(let f=0;f<a.height;f++)for(let i=0;i<a.width;i++)wb(a,i,f,c)===null&&d.push({x:i,y:f});return d}function yg(a,c,d,f){return a.grid.getGridPoints(c,d,f)}function ic(a,c,d,f=[]){let i=a.boardData.getChess(c,d);for(const[l,q]of i)f.push(q);return f}function yf(a,c,d,f=[]){let i=d!=null,l,q;for(let u=0,v=c.length;u<v;u++)l=c[u],i?(q=wb(a,l.x,l.y,d),q!==null&&f.push(q)):ic(a,l.x,l.y,f);return f}function ni(a,c,d,f,i){let l=Pa(a,c);if(l===null)return null;f==null&&(f=l.hasOwnProperty("z")?l.z:null);let q=Wc(a,l,d,!0);return q===null?null:Array.isArray(q)?(i===void 0&&(i=[]),yf(a,q,f,i)):f==null?(i===void 0&&(i=[]),ic(a,q.x,q.y,i)):wb(a,q.x,q.y,f)}function oi(a,c,d,f={x:0,y:0}){let i=sf(a,c,d);return gc(a,c,i,1,f)}function pi(a,c,d,f){return a.grid.getOppositeDirection(c,d,f)}function Ag(a,c){return Math.floor(Math.random()*(c-a+1)+a)}function zf(a,c=0,d=a.length){let f=c+Math.floor(Math.random()*d);return a[f]===void 0?null:a[f]}function zl(a,c=0,d={x:0,y:0}){d===!0&&(d=Ew);let f=Math.floor(a.width*a.height*.3);for(let l=0;l<f;l++){let q=Ag(0,a.width-1),u=Ag(0,a.height-1);if(wb(a,q,u,c)===null)return d.x=q,d.y=u,d}let i=xg(a,c);if(i.length===0)return null;{let l=zf(i);return d.x=l.x,d.y=l.y,d}}let Ew={x:0,y:0};function Al(a,c,d,f){if(f===void 0){let i=ic(a,c,d);for(let l=0,q=i.length;l<q;l++){let u=xc(i[l]).blocker;if(u===!0)return!0}return!1}else{let i=wb(a,c,d,f);if(i===null)return!1;let l=xc(i).blocker;return l===!0}}function Bl(a,c){return a.boardData.chessToXYZ.has(c)}function Cl(a,c,d,f,i){if(f===void 0){let l=ic(a,c,d);for(let q=0,u=l.length;q<u;q++)if(Rq(xc(l[q]).blocker,i))return!0;return!1}else{let l=wb(a,c,d,f);return l===null?!1:Rq(xc(l).blocker,i)}}function Rq(a,c){return a===!1||a===!0?a:a[c]===!0}function Ql(a){return a=a%Xv,a>=0?a:a+Xv}const Xv=Math.PI*2;function dr(a,c,d=1e-4){return Math.abs(a-c)<d}function qi(a,c,d,f,i){let l=Pa(a,c),q=Pa(a,d),u=Od(a,l,q);u=Ql(u);let v=Math.abs(u-f);v=Math.min(v,Mw-v);let A=i/2;return dr(v,A)||v<A}const Mw=Math.PI*2;function ri(a,c,d,f,i){let l=Pa(a,c),q=Pa(a,d),u=a.grid.directions;a.grid.directions=a.grid.sides;let v=a.grid.directionBetween(l,q,!1);a.grid.directions=u;let A=Math.abs(v-f);return A=Math.min(A,a.grid.directions-A),A<=i/2}function ac(a,c,d,f={x:0,y:0}){return a.grid.getTileXY(c,d,f)}function si(a,c,d,f){if(a.infinityMode&&f===void 0)return!0;let i=ac(a,c,d,!0);return wc(a,i.x,i.y,f)}function br(a,c,d,f){let i=a-d,l=c-f;return Math.sqrt(i*i+l*l)}function Pl(a,c,d){return(c-a)*d+a}function Dl(a,c,d,f,i,l=[]){let q=br(c,d,f,i),u=Math.min(a.grid.width,a.grid.height),v=Math.ceil(q/(u/4)),A;for(let E=0;E<=v;E++){let H=E/v,R=Pl(c,f,H),N=Pl(d,i,H),P=ac(a,R,N);if(!wc(a,P.x,P.y))continue;if(A&&A.x===P.x&&A.y===P.y)continue;l.push(P),A=P}return l}var Ge;(function(a){a[a.x=1]="x",a[a.horizontal=1]="horizontal",a[a.h=1]="h",a[a.y=2]="y",a[a.vertical=2]="vertical",a[a.v=2]="v",a[a.xy=3]="xy"})(Ge||(Ge={}));function El(a,c,d,f=null,i={x:0,y:0}){return i===!0&&(i=Iw),f!==null?Kc(a,c,-f.x,-f.y,i):(i.x=c.x,i.y=c.y),a.grid.mirror(i,d,i),f!==null&&Kc(a,i,f.x,f.y,i),i}let Iw={x:0,y:0};function Fl(a,c=!1,d=!1){let f=Jc(a);for(let i=0,l=f.length;i<l;i++)hc(a,f[i],void 0,void 0,void 0,c,d)}function Gl(a,c,d,f=null,i={x:0,y:0}){return i===!0&&(i=Kw),f!==null?Kc(a,c,-f.x,-f.y,i):(i.x=c.x,i.y=c.y),a.grid.rotate(i,d,i),f!==null&&Kc(a,i,f.x,f.y,i),i}let Kw={x:0,y:0};function Hl(a,c,d){let f=Pa(a,c);if(f===null)return;Nd(a,c,f.x,f.y,d)}function Bg(a,c,d){return Math.max(c,Math.min(d,a))}function Il(a,c,d,f=[]){let i=ac(a,c.left,c.top,!0),l=i.x-1,q=i.y-1,u=ac(a,c.right,c.bottom,!0),v=u.x+1,A=u.y+1;a.infinityMode||(l=Bg(l,0,a.width-1),q=Bg(q,0,a.height-1),v=Bg(v,0,a.width-1),A=Bg(A,0,a.height-1));for(let E=l;E<=v;E++)for(let H=q;H<=A;H++){let R=Ub(a,E,H,!0);d(c,R.x,R.y)&&f.push({x:E,y:H})}return f}function Jl(a,c,d,f=!0){let i=Pa(a,c),l=Pa(a,d);if(i==null||l==null)return;hc(a,c),hc(a,d),Nd(a,c,l.x,l.y,l.z,f),Nd(a,d,i.x,i.y,i.z,f)}function ti(a,c,d=[]){let f=a.boardData.ZToChessSet.get(c);if(f)for(const i of f)d.push(i);return d}function ui(a,c,d=[]){for(let f=0,i=c.length;f<i;f++){let l=c[f];d.push(Ub(a,l.x,l.y))}return d}function vi(a,c,d,f={x:0,y:0}){return f===!0&&(f=Nw),ac(a,c,d,f),Ub(a,f.x,f.y,f),f}let Nw={x:0,y:0};function wi(a,c,d,f,i){let l=ac(a,c,d,!0);return f!==void 0?wb(a,l.x,l.y,f):ic(a,l.x,l.y,i)}class ii extends hi{addChess(a,c,d,f,i=!0){return Nd(this,a,c,d,f,i),this}angleBetween(a,c){return Od(this,a,c)}angleSnapToDirection(a,c){return sf(this,a,c)}angleToward(a,c){return tf(this,a,c)}areNeighbors(a,c){return ji(this,a,c)}chessToTileXYZ(a){return Pa(this,a)}contains(a,c,d){return wc(this,a,c,d)}directionBetween(a,c,d=!0){return ki(this,a,c,d)}filledRingToTileXYArray(a,c,d=!0,f=[]){return xl(this,a,c,d,f)}fit(a){return yl(this,a)}forEachTileXY(a,c,d=0){return li(this,a,c,d),this}getAllChess(a=[]){return Jc(this,a)}getChessData(a){return xc(a)}getDistance(a,c,d=!1){return mi(this,a,c,d)}getEmptyTileXYArray(a=0,c=[]){return xg(this,a,c)}getGridPoints(a,c,d){return yg(this,a,c,d)}getNeighborChess(a,c,d,f){return ni(this,a,c,d,f)}getNeighborChessDirection(a,c){return uf(this,a,c)}getNeighborTileDirection(a,c){return vf(this,a,c)}getNeighborTileXY(a,c=null,d={x:0,y:0}){return Wc(this,a,c,d)}getNeighborTileXYAtAngle(a,c,d={x:0,y:0}){return oi(this,a,c,d)}getOppositeDirection(a,c,d){return pi(this,a,c,d)}getRandomEmptyTileXY(a=0,c={x:0,y:0}){return zl(this,a,c)}getTileXYAtDirection(a,c,d,f){return gc(this,a,c,d,f)}getWrapTileXY(a,c,d={x:0,y:0}){return wf(this,a,c,d)}gridAlign(a,c,d){return xf(this,a,c,d),this}hasBlocker(a,c,d){return Al(this,a,c,d)}hasChess(a){return Bl(this,a)}hasEdgeBlocker(a,c,d,f){return Cl(this,a,c,d,f)}isAngleInCone(a,c,d,f){return qi(this,a,c,d,f)}isDirectionInCone(a,c,d,f){return ri(this,a,c,d,f)}isOverlappingPoint(a,c,d){return si(this,a,c,d)}lineToTileXYArray(a,c,d,f,i=[]){return Dl(this,a,c,d,f,i)}mirror(a,c,d=null,f={x:0,y:0}){return El(this,a,c,d,f)}offset(a,c,d,f){return Kc(this,a,c,d,f)}removeAllChess(a=!1,c=!1){return Fl(this,a,c),this}removeChess(a,c,d,f,i=!1,l=!1){return hc(this,a,c,d,f,i,l),this}ringToTileXYArray(a,c=1,d=[]){return zg(this,a,c,d)}rotate(a,c,d=null,f={x:0,y:0}){return Gl(this,a,c,d,f)}setBoardWidth(a=0){return Ae(this,a),this}setBoardHeight(a=0){return Be(this,a),this}setTileZ(a,c){return Hl(this,a,c),this}shapeToTileXYArray(a,c,d=[]){return Il(this,a,c,d)}swapChess(a,c,d=!0){return Jl(this,a,c,d),this}tileXYArrayToChessArray(a,c,d=[]){return yf(this,a,c,d)}tileXYToChessArray(a,c,d=[]){return ic(this,a,c,d)}tileXYZToChess(a,c,d){return wb(this,a,c,d)}tileZToChessArray(a,c=[]){return ti(this,a,c)}tileXYArrayToWorldXYArray(a,c=[]){return ui(this,a,c)}tileXYToWorldXY(a,c,d={x:0,y:0}){return Ub(this,a,c,d)}worldXYSnapToGrid(a,c,d={x:0,y:0}){return vi(this,a,c,d)}worldXYToChess(a,c,d,f){return wi(this,a,c,d,f)}worldXYToTileXY(a,c,d){return ac(this,a,c,d)}}class Qq extends ii{}const yc={};_d(yc,{ChessToTileXYZ:()=>Pa,Contains:()=>wc,DirectionBetween:()=>ki,ForEachTileXY:()=>li,GetDistance:()=>mi,GetOppositeDirection:()=>pi,GetTileXYAtDirection:()=>gc,GetWrapTileXY:()=>wf,IsDirectionInCone:()=>ri,TileXYArrayToChessArray:()=>yf,TileXYToChessArray:()=>ic,TileXYZToChess:()=>wb,TileZToChessArray:()=>ti});const Pd={};_d(Pd,{AngleBetween:()=>Od,AngleSnapToDirection:()=>sf,AngleToward:()=>tf,GetGridPoints:()=>yg,GridAlign:()=>xf,IsAngleInCone:()=>qi,IsOverlappingPoint:()=>si,TileXYArrayToWorldXYArray:()=>ui,TileXYToWorldXY:()=>Ub,WorldXYSnapToGrid:()=>vi,WorldXYToChess:()=>wi,WorldXYToTileXY:()=>ac});const Ee={};_d(Ee,{AreNeighbors:()=>ji,GetNeighborChess:()=>ni,GetNeighborChessDirection:()=>uf,GetNeighborTileDirection:()=>vf,GetNeighborTileXY:()=>Wc,GetNeighborTileXYAtAngle:()=>oi});var sb;(function(a){a[a.orthogonal=0]="orthogonal",a[a.isometric=1]="isometric"})(sb||(sb={}));var od;(function(a){a[a["4dir"]=4]="4dir",a[a["8dir"]=8]="8dir"})(od||(od={}));class Lr{constructor({x:a=0,y:c=0,cellWidth:d=0,cellHeight:f=0,type:i=sb.orthogonal,dir:l=od["4dir"]}={}){this.setOriginPosition(a,c),this.setCellSize(d,f),this.setType(i),this.setDirectionMode(l)}fromJSON({x:a=0,y:c=0,cellWidth:d=0,cellHeight:f=0,type:i=sb.orthogonal,dir:l=od["4dir"]}={}){return this.setType(i),this.setDirectionMode(l),this.setOriginPosition(a,c),this.setCellSize(d,f),this}toJSON(){return{x:this.x,y:this.y,cellWidth:this.cellWidth,cellHeight:this.cellHeight,type:this.mode,dir:this.directions}}setOriginPosition(a=0,c=0){return this.x=a,this.y=c,this}get width(){return this._width}set width(a){this._width=a,this._halfWidth=a/2}get height(){return this._height}set height(a){this._height=a,this._halfHeight=a/2}setCellSize(a=0,c=0){return this.width=a,this.height=c,this}get cellWidth(){return this.width}set cellWidth(a){this.width=a}get cellHeight(){return this.height}set cellHeight(a){this.height=a}setType(a=sb.orthogonal){return typeof a==="string"&&(a=sb[a]),this.mode=a,this}setDirectionMode(a=od["4dir"]){return typeof a==="string"&&(a=od[a]),this.directions=a,this}}function Dr(a,c,d,f=!0){let i;switch(a.mode){case sb.orthogonal:case sb.isometric:if(c.y===d.y)i=d.x>=c.x?0:2;else if(c.x===d.x)i=d.y>=c.y?1:3;else if(a.directions===od["4dir"]){let l=Af(He(c.x,c.y,d.x,d.y));l<0&&(l+=360),i=l/90,f&&(i=Math.round(i))}else{let l=d.x-c.x,q=d.y-c.y;if(l===q)i=l>0?4:6;else if(l===-q)i=l>0?7:5;else{let u=Af(Math.atan2(q,l));u<0&&(u+=360);let v=u/45;f&&(v=Math.round(v)),v>=0&&v<1?i=v:v>=1&&v<2?i=v+3:v>=2&&v<3?i=v-1:v>=3&&v<4?i=v+2:v>=4&&v<5?i=v-2:v>=5&&v<6?i=v+1:v>=6&&v<7?i=v-3:i=v}}break}return i===a.directions&&(i=0),i}function Ii(a,c){return nd(c,0,a.directions)}function Er(a,c,d,f=!1){let i=d.x-c.x,l=d.y-c.y,q;return f?q=Math.abs(i)+Math.abs(l):q=Math.sqrt(i*i+l*l),q}function Ei(a,c=[]){if(!(c.length===a))if(c.length<a)for(let d=c.length;d<a;d++)c.push({x:0,y:0});else c.length=a;return c}function Li(a,c,d,f={x:0,y:0}){typeof c==="object"&&(d=c.y,c=c.x),f===!0&&(f=gx);let i,l;switch(a.mode){case sb.orthogonal:i=c*a.width,l=d*a.height;break;case sb.isometric:i=(c-d)*a._halfWidth,l=(c+d)*a._halfHeight;break}return i+=a.x,l+=a.y,f.x=i,f.y=l,f}let gx={x:0,y:0};function Fr(a,c=0,d=0,f=[]){if(typeof c==="object"){let v=c;d=v.y,c=v.x}f===!0&&(f=cx),Ei(4,f);let i,l;({x:i,y:l}=Li(a,c,d));let q=a._halfWidth,u=a._halfHeight;switch(a.mode){case sb.orthogonal:f[0].x=i+q,f[0].y=l-u,f[1].x=i+q,f[1].y=l+u,f[2].x=i-q,f[2].y=l+u,f[3].x=i-q,f[3].y=l-u;break;case sb.isometric:f[0].x=i+q,f[0].y=l,f[1].x=i,f[1].y=l+u,f[2].x=i-q,f[2].y=l,f[3].x=i,f[3].y=l-u;break}return f}let cx=[];const Bf=[[1,0],[0,1],[-1,0],[0,-1],[1,1],[-1,1],[-1,-1],[1,-1]],Dg=Bf;function Ar(a){let c={},d,f,i;for(let l in a)d=a[l],f=d[0],i=d[1],c.hasOwnProperty(f)||(c[f]={}),c[f][i]=parseInt(l);return c}const Br=Ar(Bf),Cr=Ar(Dg);function Gr(a,c,d){let f;switch(a.mode){case sb.orthogonal:f=Br;break;case sb.isometric:f=Cr;break}let i=d.x-c.x,l=d.y-c.y;if(f.hasOwnProperty(i)){let q=f[i];if(q.hasOwnProperty(l))return q[l]}return null}function Mi(a,c,d,f,i={x:0,y:0}){i===!0&&(i=fx);let l,q;switch(a.mode){case sb.orthogonal:l=Bf[d][0],q=Bf[d][1];break;case sb.isometric:l=Dg[d][0],q=Dg[d][1];break}return f===1?(i.x=c.x+l,i.y=c.y+q):(i.x=c.x+f*l,i.y=c.y+f*q),i}let fx={x:0,y:0};function Hr(a,c,d,f={x:0,y:0}){return Mi(a,c,d,1,f)}function Ir(a,c,d,f){return dx[f]}const dx={0:2,1:3,2:0,3:1,4:6,5:7,6:4,7:5};function Jr(a,c,d,f={x:0,y:0}){typeof c==="object"&&(d=c.y,c=c.x),f===!0&&(f=ex),c-=a.x,d-=a.y;let i=c/a.width,l=d/a.height;switch(a.mode){case sb.orthogonal:f.x=Math.round(i),f.y=Math.round(l);break;case sb.isometric:f.x=Math.round(+i+l),f.y=Math.round(-i+l);break}return f}let ex={x:0,y:0};function Kr(a,c,d,f={x:0,y:0}){return typeof d==="string"&&(d=Ge[d]),f===!0&&(f=hx),f.x=d&1?-c.x:c.x,f.y=d&2?-c.y:c.y,f}let hx={x:0,y:0};function Ie(a,c,d,f,i={x:0,y:0}){i===!0&&(i=ix);let l=c.x+d,q=c.y+f;return i.x=l,i.y=q,i}let ix={x:0,y:0};function Mr(a,c,d,f=[]){let i,l;for(i=d,l=-d;l<=d;l++)f.push(Ie(a,c,i,l));for(l=d,i=d-1;i>=-d;i--)f.push(Ie(a,c,i,l));for(i=-d,l=d-1;l>=-d;l--)f.push(Ie(a,c,i,l));for(l=-d,i=-d+1;i<=d-1;i++)f.push(Ie(a,c,i,l));return f}function Nr(a,c,d,f={x:0,y:0}){f===!0&&(f=nx),d=nd(d,0,3);let i,l;switch(d){case 1:i=-c.y,l=c.x;break;case 2:i=-c.x,l=-c.y;break;case 3:i=c.y,l=-c.x;break;default:i=c.x,l=c.y;break}return f.x=i,f.y=l,f}let nx={x:0,y:0};function Ji(a){a._savedOriginX=a.x,a._savedOriginY=a.y}function Ki(a){a.x=a._savedOriginX,a.y=a._savedOriginY}class zr extends Lr{get sides(){return 4}get allDirections(){return this.directions===4?jx:kx}get halfDirections(){return this.directions===4?lx:mx}directionBetween(a,c,d=!0){return Dr(this,a,c,d)}directionNormalize(a){return Ii(this,a)}getDistance(a,c,d=!1){return Er(this,a,c,d)}getGridPoints(a=0,c=0,d=[]){return Fr(this,a,c,d)}getNeighborTileDirection(a,c){return Gr(this,a,c)}getNeighborTileXY(a,c,d={x:0,y:0}){return Hr(this,a,c,d)}getOppositeDirection(a,c,d){return Ir(this,a,c,d)}getTileXY(a,c,d={x:0,y:0}){return Jr(this,a,c,d)}getTileXYAtDirection(a,c,d,f={x:0,y:0}){return Mi(this,a,c,d,f)}getWorldXY(a,c,d={x:0,y:0}){return Li(this,a,c,d)}mirror(a,c,d={x:0,y:0}){return Kr(this,a,c,d)}offset(a,c,d,f={x:0,y:0}){return Ie(this,a,c,d,f)}ringToTileXYArray(a,c,d=[]){return Mr(this,a,c,d)}rotate(a,c,d={x:0,y:0}){return Nr(this,a,c,d)}restoreOrigin(){return Ki(this),this}saveOrigin(){return Ji(this),this}}const jx=[0,1,2,3],kx=[0,1,2,3,4,5,6,7],lx=[0,1],mx=[0,1,4,5];var Qa;(function(a){a[a.ODD_R=0]="ODD_R",a[a.EVEN_R=1]="EVEN_R",a[a.ODD_Q=2]="ODD_Q",a[a.EVEN_Q=3]="EVEN_Q"})(Qa||(Qa={}));var Lc;(function(a){a[a.y=0]="y",a[a.flat=0]="flat",a[a.x=1]="x",a[a.pointy=1]="pointy"})(Lc||(Lc={}));var Sd;(function(a){a[a.even=0]="even",a[a.odd=1]="odd"})(Sd||(Sd={}));class sr{constructor({x:a=0,y:c=0,radius:d=void 0,cellWidth:f=0,cellHeight:i=0,staggerAxis:l=Lc.x,staggerIndex:q=Sd.odd}={}){this.setType(l,q),this.setDirectionMode(),this.setOriginPosition(a,c),d!==void 0?this.setRadius(d):this.setCellSize(f,i)}fromJSON({x:a=0,y:c=0,radius:d=void 0,cellWidth:f=0,cellHeight:i=0,staggerAxis:l=Lc.x,staggerIndex:q=Sd.odd}={}){return this.setType(l,q),this.setDirectionMode(),this.setOriginPosition(a,c),d!==void 0?this.setRadius(d):this.setCellSize(f,i),this}toJSON(){return{x:this.x,y:this.y,radius:this.radius,cellWidth:this.cellWidth,cellHeight:this.cellHeight,staggerAxis:this.staggerAxis,staggerIndex:this.staggerIndex}}setOriginPosition(a,c){return this.x=a,this.y=c,this}get width(){return this._width}set width(a){this._width=a,this._halfWidth=a/2}get height(){return this._height}set height(a){this._height=a,this._halfHeight=a/2}setCellSize(a=0,c=0){return this.width=a,this.height=c,this.radius=void 0,this}get cellWidth(){return this.width}set cellWidth(a){this.width=a}get cellHeight(){return this.height}set cellHeight(a){this.height=a}setRadius(a=0){let c,d;return this.staggerAxis===Lc.y?(c=2*a,d=yr*a):(c=yr*a,d=2*a),this.setCellSize(c,d),this.radius=a,this}setDirectionMode(){return this.directions=6,this}setType(a=1,c=1){return typeof a==="string"&&(a=Lc[a]),typeof c==="string"&&(c=Sd[c]),this.staggerAxis=a,this.staggerIndex=c,a===Lc.y?this.mode=c===Sd.even?Qa.EVEN_Q:Qa.ODD_Q:this.mode=c===Sd.even?Qa.EVEN_R:Qa.ODD_R,this}}const yr=Math.sqrt(3);function jc(a,c,d,f={x:0,y:0,z:0}){f===!0&&(f=Rl);switch(a){case Qa.ODD_R:f.x=c-(d-(d&1))/2,f.z=d;break;case Qa.EVEN_R:f.x=c-(d+(d&1))/2,f.z=d;break;case Qa.ODD_Q:f.x=c,f.z=d-(c-(c&1))/2;break;case Qa.EVEN_Q:f.x=c,f.z=d-(c+(c&1))/2;break}return f.y=-f.x-f.z,f}function gr(a,c,d,f={x:0,y:0,z:0}){typeof a!=="number"&&(f=a,a=f.x,c=f.y,d=f.z),f===!0&&(f=Rl);let i=Math.round(a),l=Math.round(c),q=Math.round(d),u=Math.abs(i-a),v=Math.abs(l-c),A=Math.abs(q-d);return u>v&&u>A?i=-l-q:v>A?l=-i-q:q=-i-l,f.x=i,f.y=l,f.z=q,f}function Ob(a,c,d,f,i={x:0,y:0}){i===!0&&(i=Pw);switch(a){case Qa.ODD_R:i.x=c+(f-(f&1))/2,i.y=f;break;case Qa.EVEN_R:i.x=c+(f+(f&1))/2,i.y=f;break;case Qa.ODD_Q:i.x=c,i.y=f+(c-(c&1))/2;break;case Qa.EVEN_Q:i.x=c,i.y=f+(c+(c&1))/2;break}return i}function hr(a,c,d={x:0,y:0,z:0}){return d===!0&&(d=Rl),d.x=a,d.y=-a-c,d.z=c,d}let Rl={x:0,y:0,z:0},Pw={x:0,y:0};function jr(a,c,d,f=!0){let i;jc(a.mode,c.x,c.y,Ai),jc(a.mode,d.x,d.y,Bi);let l=Bi.x-Ai.x,q=Bi.y-Ai.y,u=Bi.z-Ai.z;return u===0?i=l>0?0:3:l===0?i=u>0?1:4:q===0?i=u>0?2:5:l>0&&q<0&&u>0?i=0+u/-q:l<0&&q<0&&u>0?i=1+-q/u:l<0&&q>0&&u>0?i=2+q/-l:l<0&&q>0&&u<0?i=3+-u/q:l>0&&q>0&&u<0?i=4+l/-u:i=5+-q/l,f&&(i=Math.round(i)),i}let Ai={x:0,y:0,z:0},Bi={x:0,y:0,z:0};function kr(a,c,d,f=!1){jc(a.mode,c.x,c.y,Ci),jc(a.mode,d.x,d.y,Di);let i=Di.x-Ci.x,l=Di.y-Ci.y,q=Di.z-Ci.z;return(Math.abs(i)+Math.abs(l)+Math.abs(q))/2}let Ci={x:0,y:0,z:0},Di={x:0,y:0,z:0};function Fi(a,c,d,f={x:0,y:0}){typeof c==="object"&&(d=c.y,c=c.x),f===!0&&(f=Yw);let i=c*a.width,l=d*a.height;switch(a.mode){case Qa.ODD_R:d&1&&(i+=a._halfWidth),l*=.75;break;case Qa.EVEN_R:d&1&&(i-=a._halfWidth),l*=.75;break;case Qa.ODD_Q:i*=.75,c&1&&(l+=a._halfHeight);break;case Qa.EVEN_Q:i*=.75,c&1&&(l-=a._halfHeight);break}return i+=a.x,l+=a.y,f.x=i,f.y=l,f}let Yw={x:0,y:0};function lr(a,c=0,d=0,f=[]){if(typeof c==="object"){let q=c;d=q.y,c=q.x}f===!0&&(f=Uw),Ei(6,f);let i,l;({x:i,y:l}=Fi(a,c,d));if(a.radius!==void 0){let q=a.radius,u=a.staggerAxis===Lc.flat?0:-30;for(let v=0;v<6;v++){let A=60*v+u,E=Qd(A);f[v].x=i+q*Math.cos(E),f[v].y=l+q*Math.sin(E)}}else{let q=a._halfWidth,u=q/2,v=a._halfHeight,A=v/2;a.staggerAxis===Lc.flat?(f[0].x=i+q,f[0].y=l,f[1].x=i+u,f[1].y=l+v,f[2].x=i-u,f[2].y=l+v,f[3].x=i-q,f[3].y=l,f[4].x=i-u,f[4].y=l-v,f[5].x=i+u,f[5].y=l-v):(f[0].x=i+q,f[0].y=l-A,f[1].x=i+q,f[1].y=l+A,f[2].x=i,f[2].y=l+v,f[3].x=i-q,f[3].y=l+A,f[4].x=i-q,f[4].y=l-A,f[5].x=i,f[5].y=l-v)}return f}let Uw=[];const Qw=[[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]],[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]]],Rw=[[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]],[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]]],Sw=[[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]],[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]]],Tw=[[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]],[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]]],zc=[Qw,Rw,Sw,Tw];function Rd(a){let c={},d,f;for(let i in a)[d,f]=a[i],c.hasOwnProperty(d)||(c[d]={}),c[d][f]=parseInt(i);return c}const ir=[[Rd(zc[0][0]),Rd(zc[0][1])],[Rd(zc[1][0]),Rd(zc[1][1])],[Rd(zc[2][0]),Rd(zc[2][1])],[Rd(zc[3][0]),Rd(zc[3][1])]];function Gi(a,c,d){let f;switch(a){case Qa.ODD_R:case Qa.EVEN_R:f=d&1;break;case Qa.ODD_Q:case Qa.EVEN_Q:f=c&1;break}return f}function mr(a,c,d){let f=a.mode,i=Gi(f,c.x,c.y),l=ir[f][i],q=d.x-c.x,u=d.y-c.y;if(l.hasOwnProperty(q)){let v=l[q];if(v.hasOwnProperty(u))return v[u]}return null}function Hi(a,c,d,f,i={x:0,y:0}){i===!0&&(i=Xw);let l=a.mode,q=c.x,u=c.y;if(f===1){let v=Gi(l,q,u);i.x=q+zc[l][v][d][0],i.y=u+zc[l][v][d][1]}else if(f===0)i.x=q,i.y=u;else{let v=jc(l,q,u,!0),A,E,H;switch(d){case 1:A=v.x,E=v.y-f,H=v.z+f;break;case 2:A=v.x-f,E=v.y,H=v.z+f;break;case 3:A=v.x-f,E=v.y+f,H=v.z;break;case 4:A=v.x,E=v.y+f,H=v.z-f;break;case 5:A=v.x+f,E=v.y,H=v.z-f;break;default:A=v.x+f,E=v.y-f,H=v.z;break}Ob(l,A,E,H,i)}return i}let Xw={x:0,y:0};function nr(a,c,d,f={x:0,y:0}){return Hi(a,c,d,1,f)}function or(a,c,d,f){return(f+3)%6}const pr=4/3,qr=2/3;function rr(a,c,d,f={x:0,y:0}){typeof c==="object"&&(d=c.y,c=c.x),f===!0&&(f=Ww),c-=a.x,d-=a.y;let i,l;switch(a.mode){case Qa.ODD_R:case Qa.EVEN_R:l=d*pr/a.height,i=c/a.width-qr*(d/a.height);break;case Qa.ODD_Q:case Qa.EVEN_Q:l=d/a.height-qr*(c/a.width),i=c*pr/a.width;break}let q=hr(i,l,Vw);return gr(q),Ob(a.mode,q.x,q.y,q.z,f),f}let Vw={x:0,y:0,z:0},Ww={x:0,y:0};function tr(a,c,d,f={x:0,y:0}){typeof d==="string"&&(d=Ge[d]),f===!0&&(f=$w);let i=jc(a.mode,c.x,c.y,!0),l=a.mode===Qa.ODD_R||a.mode===Qa.EVEN_R,q,u,v;return d&1&&(l?(q=i.y,u=i.x,v=i.z):(q=-i.x,u=-i.z,v=-i.y),i.x=q,i.y=u,i.z=v),d&2&&(l?(q=-i.y,u=-i.x,v=-i.z):(q=i.x,u=i.z,v=i.y)),Ob(a.mode,q,u,v,f),f}let $w={x:0,y:0};function ur(a,c,d,f,i={x:0,y:0}){i===!0&&(i=ax);let l=c.x+d,q=c.y+f;switch(a.mode){case Qa.ODD_R:(f&1)!==0&&((q&1)===0&&(l+=1));break;case Qa.EVEN_R:(f&1)!==0&&((q&1)===0&&(l-=1));break;case Qa.ODD_Q:(d&1)!==0&&((l&1)==0&&(q+=1));break;case Qa.EVEN_Q:(d&1)!==0&&((l&1)==0&&(q-=1));break}return i.x=l,i.y=q,i}let ax={x:0,y:0};function vr(a,c,d,f=[]){let i=jc(a.mode,c.x,c.y,!0),l=i.x,q=i.y,u=i.z,v,A,E;for(E=d,v=0;v>=-d;v--)A=-v-E,f.push(Ob(a.mode,l+v,q+A,u+E));for(v=-d,A=1;A<=d;A++)E=-v-A,f.push(Ob(a.mode,l+v,q+A,u+E));for(A=d,E=-1;E>=-d;E--)v=-A-E,f.push(Ob(a.mode,l+v,q+A,u+E));for(E=-d,v=1;v<=d;v++)A=-v-E,f.push(Ob(a.mode,l+v,q+A,u+E));for(v=d,A=-1;A>=-d;A--)E=-v-A,f.push(Ob(a.mode,l+v,q+A,u+E));for(A=-d,E=1;E<=d-1;E++)v=-A-E,f.push(Ob(a.mode,l+v,q+A,u+E));return f}function wr(a,c,d,f={x:0,y:0}){f===!0&&(f=bx),d=nd(d,0,5);let i=jc(a.mode,c.x,c.y,!0),l,q,u;switch(d){case 1:l=-i.z,q=-i.x,u=-i.y;break;case 2:l=i.y,q=i.z,u=i.x;break;case 3:l=-i.x,q=-i.y,u=-i.z;break;case 4:l=i.z,q=i.x,u=i.y;break;case 5:l=-i.y,q=-i.z,u=-i.x;break;default:l=i.x,q=i.y,u=i.z;break}return Ob(a.mode,l,q,u,f),f}let bx={x:0,y:0};class xr extends sr{get sides(){return 6}get allDirections(){return Zw}get halfDirections(){return _w}directionBetween(a,c,d=!0){return jr(this,a,c,d)}directionNormalize(a){return Ii(this,a)}getDistance(a,c,d=!1){return kr(this,a,c,d)}getGridPoints(a=0,c=0,d=[]){return lr(this,a,c,d)}getNeighborTileDirection(a,c){return mr(this,a,c)}getNeighborTileXY(a,c,d={x:0,y:0}){return nr(this,a,c,d)}getOppositeDirection(a,c,d){return or(this,a,c,d)}getTileXY(a,c,d={x:0,y:0}){return rr(this,a,c,d)}getTileXYAtDirection(a,c,d,f={x:0,y:0}){return Hi(this,a,c,d,f)}getWorldXY(a,c,d={x:0,y:0}){return Fi(this,a,c,d)}mirror(a,c,d={x:0,y:0}){return tr(this,a,c,d)}offset(a,c,d,f={x:0,y:0}){return ur(this,a,c,d,f)}ringToTileXYArray(a,c,d=[]){return vr(this,a,c,d)}rotate(a,c,d={x:0,y:0}){return wr(this,a,c,d)}restoreOrigin(){return Ki(this),this}saveOrigin(){return Ji(this),this}}const Zw=[0,1,2,3,4,5],_w=[0,1,2];var Lb;(function(a){a[a.random=0]="random",a[a.diagonal=1]="diagonal",a[a.straight=2]="straight",a[a.line=3]="line",a[a.astar=10]="astar",a[a["astar-random"]=11]="astar-random",a[a["astar-line"]=12]="astar-line"})(Lb||(Lb={}));const Je=null;class Lv{constructor(a){this.content=[],this.scoreFunction=a}clear(){this.content.length=0}push(a){this.content.push(a),this.sinkDown(this.content.length-1)}pop(){let a=this.content[0],c=this.content.pop();return this.content.length>0&&(this.content[0]=c,this.bubbleUp(0)),a}remove(a){const c=this.content.indexOf(a);let d=this.content.pop();c!==this.content.length-1&&(this.content[c]=d,this.scoreFunction(d)<this.scoreFunction(a)?this.sinkDown(c):this.bubbleUp(c))}get size(){return this.content.length}rescoreElement(a){this.sinkDown(this.content.indexOf(a))}sinkDown(a){let c=this.content[a];for(;a>0;){let d=(a+1>>1)-1,f=this.content[d];if(this.scoreFunction(c)<this.scoreFunction(f))this.content[d]=c,this.content[a]=f,a=d;else break}}bubbleUp(a){let c=this.content.length,d=this.content[a],f=this.scoreFunction(d);for(;;){let i=a+1<<1,l=i-1,q=null,u;if(l<c){let v=this.content[l];u=this.scoreFunction(v),u<f&&(q=l)}if(i<c){let v=this.content[i],A=this.scoreFunction(v);A<(q===null?f:u)&&(q=i)}if(q!==null)this.content[a]=this.content[q],this.content[q]=d,a=q;else break}}}let CAa=new Lv(a=>a.f);const Mj=function(a,c,d=[]){let f=c;for(;f.prevNodes.length>0;)d.push(f),f=f.prevNodes[0];return d.reverse()};const Ov=function(a,c,d=[]){let f=c;for(;f.prevNodes.length>0;)d.push(f),f.prevNodes.length===1?f=f.prevNodes[0]:f=zf(f.prevNodes);return d.reverse()};const Nv=function(a,c,d=[]){let f=c,i=c.angleTo(a);for(;f.prevNodes.length>0;){d.push(f);if(f.prevNodes.length===1)f=f.prevNodes[0];else{let l=Infinity;for(let q=1,u=f.prevNodes.length;q<u;q++){let v=f.prevNodes[q],A=Math.abs(c.angleTo(v)-i);A<l&&(l=A,f=v)}}}return d.reverse()};const Mv=function(a,c,d=[]){let f=c,i;for(;f.prevNodes.length>0;){d.push(f);if(f.prevNodes.length===1||i===void 0){let l=f.prevNodes[0];i=l.logicDirTo(f),f=l}else{let l,q;for(let u=0,v=f.prevNodes.length;u<v;u++){l=f.prevNodes[u],q=l.logicDirTo(f);if(q!==i)break}i=q,f=l}}return d.reverse()};const Pv=function(a,c,d=[]){let f=c,i;for(;f.prevNodes.length>0;){d.push(f);if(f.prevNodes.length===1||i===void 0){let l=f.prevNodes[0];i=l.logicDirTo(f),f=l}else{let l,q;for(let u=0,v=f.prevNodes.length;u<v;u++){l=f.prevNodes[u],q=l.logicDirTo(f);if(q===i)break}i=q,f=l}}return d.reverse()};let We={};We[Lb.astar]=Mj;We[Lb["astar-line"]]=Mj;We[Lb["astar-random"]]=Mj;We[Lb.random]=Ov;We[Lb.line]=Nv;We[Lb.diagonal]=Mv;We[Lb.straight]=Pv;class Qr{constructor(){this.prevNodes=[]}shutdown(){this.key=void 0,this.prevNodes.length=0}destroy(){this.shutdown()}reset(a){this.key=a,this.f=0,this.g=0,this.h=void 0,this.closerH=void 0,this.visited=!1,this.closed=!1}heuristic(a,c,d){if(c===null)return 0;let f,i=this.distanceTo(a)*this.manager.weight;switch(c){case Lb.astar:f=i;break;case Lb["astar-line"]:if(d!==void 0){let l=a.angleTo(d)-this.angleTo(d);f=i+Math.abs(l)}else f=i;case Lb["astar-random"]:f=i+Math.random();break;default:f=i;break}return f}getNextNodes(){return[]}getCost(a){return Je}distanceTo(a){return 0}angleTo(a){return 0}logicDirTo(a){return 0}getNode(a,c=!1){return this.manager.getNode(a,c)}}function Ke(a){for(let c=a.length-1;c>0;c--){let d=Math.floor(Math.random()*(c+1)),f=a[c];a[c]=a[d],a[d]=f}return a}class yx extends Qr{constructor(a){super();this.isTileXYZ=!0;this.pathFinder=a}reset(a){super.reset(a),this.key=a,Rr(a,this),this._px=void 0,this._py=void 0,this.cost=void 0}getNextNodes(){let a=Ee.GetNeighborTileXY(this.board,this);this.pathFinder.shuffleNeighbors&&Ke(a);let c=[];return a.forEach(d=>{let f=this.getNode(nc(d.x,d.y),!0);c.push(f)}),c}getCost(a){return this.pathFinder.cacheCost?this.cost===void 0&&(this.cost=this.pathFinder.getCost(this,a)):this.cost=this.pathFinder.getCost(this,a),this.cost}distanceTo(a){return yc.GetDistance(this.board,this,a,!0)}angleTo(a){return He(this.worldX,this.wroldY,a.worldX,a.worldX)}logicDirTo(a){return Ee.GetNeighborTileDirection(this.board,this,a)}get board(){return this.pathFinder.board}get worldX(){if(this._px===void 0){let a=Pd.TileXYToWorldXY(this.board,this.x,this.y,!0);this._px=a.x,this._py=a.y}return this._px}get wroldY(){if(this._py===void 0){let a=Pd.TileXYToWorldXY(this.board,this.x,this.y,!0);this._px=a.x,this._py=a.y}return this._py}}class tx{constructor(){this.data=[];this.visited=new Set()}push(a,c){if(Array.isArray(a)){let f=a;for(let i=0,l=f.length;i<l;i++)this.push(f[i]);return this}if(typeof a==="object"){let f=a;a=f.x,c=f.y}let d=`${a},${c}`;return this.visited.has(d)?this:(this.data.push({x:a,y:c}),this.visited.add(d),this)}pop(){return this.data.pop()}get length(){return this.data.length}clear(){return this.data.length=0,this.visited.clear(),this}}let v9=new tx();var zi;(function(a){a[a.direction=0]="direction",a[a.angle=1]="angle"})(zi||(zi={}));function ao(a,c){return a.events.delete(c),a}function $n(a,c,...d){if(a.events.size===0||!a.events.has(c))return!1;const f=a.events.get(c);let i=f.size;for(const l of f){l.callback.apply(l.context,d),l.once&&f.delete(l),i--;if(i===0)break}return f.size===0&&a.events.delete(c),!0}class hh{constructor(a,c,d=!1){this.callback=a,this.context=c,this.once=d}}function co(a){return[...a.events.keys()]}function bo(a,c){const d=a.events.get(c);return d?d.size:0}function eo(a,c){const d=[],f=a.events.get(c);return f.forEach(i=>{d.push(i.callback)}),d}function _n(a,c,d,f,i){const l=a.events,q=l.get(c);if(!d)l.delete(c);else if(d instanceof hh)q.delete(d);else{const u=!f,v=i!==void 0;for(const A of q)A.callback===d&&(u&&A.context===f)&&(v&&A.once===i)&&q.delete(A)}return q.size===0&&l.delete(c),a}function gh(a,c,d,f=a,i=!1){if(typeof d!=="function")throw new TypeError("Listener not a function");const l=new hh(d,f,i),q=a.events.get(c);return q?q.add(l):a.events.set(c,new Set([l])),l}function Zn(a,c,d,f=a){return gh(a,c,d,f,!0)}function Oj(a,c){c?a.events.delete(c):a.events.clear()}function Wv(a){return class extends a{constructor(){super(...arguments);this.events=null}setEventEmitter(c){return this.destroyEventEmitter(),this.privateEE=c===void 0,this.privateEE?this.events=new Map():c?this.events=c.events:this.events=null,this.lastEventInstance=null,this}getEventEmitter(){return this}clearEventEmitter(){return this.setEventEmitter(null),this}destroyEventEmitter(){return this.lastEventInstance=null,this.events&&this.privateEE&&(Oj(this),this.events=null),this}on(c,d,f=this,i=!1){return this.lastEventInstance=null,this.events&&(this.lastEventInstance=gh(this,c,d,f,i)),this}once(c,d,f=this){return this.lastEventInstance=null,this.events&&(this.lastEventInstance=Zn(this,c,d,f)),this}off(c,d,f,i){return this.lastEventInstance=null,this.events&&_n(this,c,d,f,i),this}emit(c,...d){return this.lastEventInstance=null,this.events&&$n(this,c,...d),this}removeAllListeners(c){return this.lastEventInstance=null,this.events&&Oj(this,c),this}clearEvent(c){return this.lastEventInstance=null,this.events&&ao(this,c),this}getListenerCount(c){return this.lastEventInstance=null,this.events?bo(this,c):0}getEventNames(){return this.lastEventInstance=null,this.events?co(this):[]}getListeners(c){return this.lastEventInstance=null,this.events?eo(this,c):[]}}}const zb=Wv(class{});var bd;(function(a){a[a.no=0]="no",a[a.lazy=1]="lazy",a[a.always=2]="always"})(bd||(bd={}));const ho="complete";class Kj extends zb{constructor(a,{eventEmitter:c,tickingMode:d=bd.lazy}={}){super();this._isRunning=!1;this.tickingState=!1;this.parent=a,this.setEventEmitter(c),this.setTickingMode(d)}boot(){this.tickingMode===bd.always&&!this.tickingState&&this.startTicking()}shutdown(){this.destroyEventEmitter(),this.tickingState&&this.stopTicking()}setTickingMode(a){typeof a==="string"&&(a=bd[a]),this.tickingMode=a}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(a){if(this._isRunning===a)return;this._isRunning=a,this.tickingMode===bd.lazy&&a!=this.tickingState&&(a?this.startTicking():this.stopTicking())}start(){return this.isRunning=!0,this}pause(){return this.isRunning=!1,this}resume(){return this.isRunning=!0,this}stop(){return this.isRunning=!1,this}complete(a=ho){this.isRunning=!1,this.emit(a,this.parent,this)}}class Kv extends Kj{constructor(a,{updater:c=a,isRunning:d=!1,timeScale:f=1,now:i=0,tickingMode:l=bd.lazy}={}){super(a,arguments[1]);this.updater=null;this.timeScale=1;this.now=0;this.parent=a,this.setUpdater(c),this.isRunning=d,this.timeScale=f,this.now=i,this.setTickingMode(l),this.boot()}resetFromJSON({isRunning:a=!1,timeScale:c=1,now:d=0,tickingMode:f=bd.lazy}={}){return this.isRunning=a,this.timeScale=c,this.now=d,this.setTickingMode(f),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}boot(){super.boot(),mc(this.parent,"destroy",this.destroy,this)}shutdown(){super.shutdown(),this.parent=void 0,this.updater=void 0}destroy(){this.shutdown()}setUpdater(a){return a instanceof Hc&&(a=a.world),a instanceof Nh||a instanceof ze?this.updater=a:this.updater=null,this}start(a=0){return this.now=a,super.start(),this}seek(a){return this.now=a,this}addDt(a){return a*=this.timeScale,this.now+=a,this}}class Ij extends Kv{startTicking(){this.update===null&&this.setUpdater(this.parent);if(this.update===null)return;super.startTicking(),this.updater&&mc(this.updater,"update",this.update,this)}stopTicking(){super.stopTicking(),this.updater&&md(this.updater,"update",this.update,this)}update(a){return!this.isRunning||this.timeScale===0?this:(this.addDt(a),this)}}const sCa=Rb(vl());const Ul="receive";const Ur={receive:Ul};function Vr(a,c){(!a.sendToRef||a.sendToRef.key!==a.receiverID)&&(a.sendToRef=a.database.ref(a.rootPath).child(a.receiverID));if(c===void 0)return a.sendToRef.remove();let d={message:c,senderID:a.userID,stamp:a.stamp};return a.userName!==void 0&&(d.senderName=a.userName),a.skipFirst=!1,a.stamp=!a.stamp,a.sendToRef.set(d)}function Wr(a){if(a.isReceiving&&a.receiverRef.key===a.receiverID)return;Tl(a),a.isReceiving=!0,a.skipFirst=!0,a.receiverRef=a.database.ref(a.rootPath).child(a.receiverID),a.receiverRef.on("value",Yr,a),a.receiverRef.onDisconnect().remove()}function Tl(a){if(!a.isReceiving)return;a.isReceiving=!1,a.receiverRef.off("value",Yr,a),a.receiverRef.remove(),a.receiverRef.onDisconnect().cancel()}function Yr(a){if(this.skipFirst){this.skipFirst=!1;return}let c=a.val();if(c==null)return;delete c.stamp,this.history.add(c),this.emit(this.eventNames.receive,c)}class Xr{constructor({maxLength:a=-1}={}){this.maxLength=a,this.records=[]}add(a){return this.maxLength===0?this:(this.records.push(a),this.maxLength>0&&this.records.length>this.maxLength&&this.records.shift(),this)}clear(){return this.records.length=0,this}changeUserName(a,c){return this.maxLength===0?this:(this.records.forEach(d=>{d.senderID===a&&(d.senderName=c)}),this)}}const Fca=Rb(fc());class Df extends zb{constructor({eventEmitter:a,root:c="",senderID:d="",senderName:f,receiverID:i="",history:l=0,eventNames:q=Ur}={}){super();this.setEventEmitter(a),this.eventNames=q,this.database=Fca.database(),this.setRootPath(c),this.skipFirst=!0,this.stamp=!1,this.userInfo={userID:"",userName:void 0},this.setSender(d,f),this.setReceiver(i),this.isReceiving=!1,l===!0?l=-1:l===!1&&(l=0),this.history=new Xr({maxLength:l})}destroy(){this.stopReceiving().destroyEventEmitter()}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.rootPath=a,this.sendToRef=void 0,this.receiverRef=void 0,this}setSender(a,c){return typeof a==="string"?(this.userID=a,this.userName=c):this.userInfo=a,this}setReceiver(a){return this.receiverID=a,this}changeUserName(a,c){return a===this.userID&&(this.userName=c),this.history.changeUserName(a,c),this}getHistory(){return this.history.records}clearHistory(){return this.history.clear(),this}send(a){return Vr(this,a)}startReceiving(){return Wr(this),this}stopReceiving(){return Tl(this),this}}const Zy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function Ui(a,c,d=Zy){let f=c===void 0?a:Ag(a,c),i="";for(let l=0;l<f;l++)i+=zf(Array.from(d));return i}const Rka=Rb(fc());var xb;(function(a){a[a["1d"]=1]="1d",a[a["2d"]=2]="2d",a[a["3d"]=3]="3d"})(xb||(xb={}));const $l="init";const am="update";const Vl="addkey0";const Wl="addkey1";const Xl="addkey2";const bm="removekey0";const cm="removekey1";const dm="removekey2";const Yl="changekey0";const Zl="changekey1";const _l="changekey2";const Zr={init:$l,update:am,addkey0:Vl,removekey0:bm,changekey0:Yl,addkey1:Wl,removekey1:cm,changekey1:Zl,addkey2:Xl,removekey2:dm,changekey2:_l};function Yv(a){return a==null||a===""||a.length===0}function Yy(a,c,d={}){let f=a;if(!Yv(c)){typeof c==="string"&&(c=c.split("."));let i;for(let l=0,q=c.length;l<q;l++){i=c[l];if(f[i]==null||typeof f[i]!=="object"){let u;l===q-1?u=d:u={},f[i]=u}f=f[i]}}return f}function Zv(a,c,d){if(typeof a!=="object")return;if(Yv(c)){if(d==null)return;typeof d==="object"&&(a=d)}else{typeof c==="string"&&(c=c.split("."));let f=c.pop(),i=Yy(a,c);i[f]=d}return a}function fo(a){if(typeof a!=="object"||a===null)return a;const c=Array.isArray(a)?[]:{};for(const d in a){const f=a[d];c[d]=fo(f)}return c}class _r{constructor(){this.data={}}setValue(a,c){return a==null?this.clear():typeof a==="object"?this.data=a:Zv(this.data,a,c),this}getValue(a){if(a==null)return this.data;{typeof a==="string"&&(a=a.split("."));let c=this.data;for(let d=0,f=a.length;d<f;d++){if(!go(c))return;c=c[a[d]]}return c}}cloneValue(a){return fo(this.getValue(a))}removeKey(a){if(a==null)this.clear();else{typeof a==="string"&&(a=a.split("."));let c=a.pop(),d=this.data;for(let f=0,i=a.length;f<i;f++){if(!go(d))return this;d=d[a[f]]}go(d)&&delete d[c]}return this}clear(){return Pj(this.data),this}incValue(a,c=1){let d=this.getValue(a);return typeof d!=="number"&&(d=0),this.setValue(a,d+c),this}mulValue(a,c){let d=this.getValue(a);return typeof d!=="number"&&(d=1),this.setValue(a,d*c),this}}function go(a){return a!=null&&typeof a==="object"}const Wda=Rb(fc());class Le extends zb{constructor({eventEmitter:a,parent:c,key:d,type:f,eventNames:i,table:l}={}){super();this.setEventEmitter(a),this.parent=c,this.children=new Map(),this.key=d,this.parent?this.fullKeyPath=is(this.parent.fullKeyPath,this.key):this.fullKeyPath="",this.type=f,this.eventNames=i,this.table=l,this.database=Wda.database(),this.setRootPath()}destroy(){this.stopUpdate().clear().destroyEventEmitter()}setRootPath(a){if(a===void 0){let c=this.parent?this.parent.rootPath:"";a=`${c}/${this.key}`}this.rootPath=a,this.rootRef=a!==""?this.database.ref(a):void 0;for(const[c,d]of this.children)d instanceof Le&&d.setRootPath();return this}setData(a,c){if(arguments.length===0)this.clear();else if(typeof a=="string")this.setChildData(a,c);else{let d=a;for(const[f,i]of this.children)d.hasOwnProperty(f)||this.removeChild(f);for(let f in d)this.setChildData(f,d[f])}return this}clear(){this.table.removeKey(this.fullKeyPath);for(const[a,c]of this.children)this.removeChild(a);return this}get childClass(){return null}setChildData(a,c){const d=is(this.fullKeyPath,a);this.table.setValue(d,c);if(!(typeof c!=="object")){if(this.children.has(a))this.children.get(a).setData(c);else if(this.childClass){let f=new this.childClass({parent:this,key:a,type:this.type,eventEmitter:this.eventEmitter,eventNames:this.eventNames,table:this.table});f.startUpdate(),this.children.set(a,f)}}return this}removeChild(a){return this.children.has(a)&&(this.children.get(a).destroy(),this.children.delete(a)),this}startUpdate(){return this}stopUpdate(){return this}}function is(a,c){return a==null||a===""?c:c==null||c===""?a:`${a}.${c}`}class Eg extends Le{startUpdate(){return this.rootRef.on("child_added",this.addCol,this),this.rootRef.on("child_removed",this.removeCol,this),this.rootRef.on("child_changed",this.changeColValue,this),this}stopUpdate(){return this.rootRef.off("child_added",this.addCol,this),this.rootRef.off("child_removed",this.removeCol,this),this.rootRef.off("child_changed",this.changeColValue,this),this}addCol(a){const c=a.key,d=a.val();this.setData(c,d);switch(this.type){case xb["1d"]:this.emit(this.eventNames.addkey0,c,d);break;case xb["2d"]:this.emit(this.eventNames.addkey1,this.key,c,d);break;default:this.emit(this.eventNames.addkey2,this.pageKey,this.key,c,d);break}this.emit(this.eventNames.update,this.table.data)}removeCol(a){const c=a.key;this.removeChild(c);switch(this.type){case xb["1d"]:this.emit(this.eventNames.removekey0,c);break;case xb["2d"]:this.emit(this.eventNames.removekey1,this.key,c);break;default:this.emit(this.eventNames.removekey2,this.pageKey,this.key,c);break}this.emit(this.eventNames.update,this.table.data)}changeColValue(a){const c=a.key,d=a.val();this.setData(c,d);switch(this.type){case xb["1d"]:this.emit(this.eventNames.changekey0,c,d);break;case xb["2d"]:this.emit(this.eventNames.changekey1,this.key,c,d);break;default:this.emit(this.eventNames.changekey2,this.pageKey,this.key,c,d);break}this.emit(this.eventNames.update,this.table.data)}get pageKey(){return this.parent.key}}class Fg extends Le{startUpdate(){return this.rootRef.on("child_added",this.addRow,this),this.rootRef.on("child_removed",this.removeRow,this),this}stopUpdate(){return this.rootRef.off("child_added",this.addRow,this),this.rootRef.off("child_removed",this.removeRow,this),this}addRow(a){const c=a.key,d=a.val();this.setData(c,d);switch(this.type){case xb["2d"]:this.emit(this.eventNames.addkey0,c,d);break;default:this.emit(this.eventNames.addkey1,this.key,c,d);break}}removeRow(a){const c=a.key;this.removeChild(c);switch(this.type){case xb["2d"]:this.emit(this.eventNames.removekey0,c);break;default:this.emit(this.eventNames.removekey1,this.key,c);break}}get childClass(){return Eg}}class em extends Le{startUpdate(){return this.rootRef.on("child_added",this.addPage,this),this.rootRef.on("child_removed",this.removePage,this),this}stopUpdate(){return this.rootRef.off("child_added",this.addPage,this),this.rootRef.off("child_removed",this.removePage,this),this}addPage(a){const c=a.key,d=a.val();this.setData(c,d),this.emit(this.eventNames.addkey0,c,d)}removePage(a){const c=a.key;this.removeChild(c),this.emit(this.eventNames.removekey0,c)}get childClass(){return Fg}}const Qi={};Qi[xb["1d"]]=Eg;Qi[xb["2d"]]=Fg;Qi[xb["3d"]]=em;function $r(a){return new Qi[a.tableType]({type:a.tableType,eventEmitter:a.eventEmitter,eventNames:a.eventNames,table:a.table})}function as(a){return a.updater.clear(),a.initialFlag=!1,a.rootRef.once("value").then(function(c){let d=c.val()??{};return a.table.setValue(d),a.emit(a.eventNames.init,d),a.initialFlag=!0,Promise.resolve(d)})}function Vb(a,c,d,f){let i=a.rootRef;return i=c?i.child(c):i,i=d?i.child(d):i,i=f?i.child(f):i,i}function bs(a,...c){let d,f,i,l;switch(c.length){case 4:[d,f,i,l]=c;break;case 3:[d,f,l]=c;break;case 2:[d,l]=c;break;default:l=c[0];break}return Vb(a,d,f,i).set(l)}function cs(a,...c){let d,f,i;switch(c.length){case 3:[d,f,i]=c;break;case 2:[d,f]=c;break;default:d=c[0];break}return Vb(a,d,f,i).remove()}function ds(a,...c){let d,f,i,l;switch(c.length){case 4:[d,f,i,l]=c;break;case 3:[d,f,l]=c;break;case 2:[d,l]=c;break;default:l=c[0];break}return Vb(a,d,f,i).transaction(function(q){return q===null&&(q=0),q+l})}function es(a,...c){let d,f,i,l;switch(c.length){case 4:[d,f,i,l]=c;break;case 3:[d,f,l]=c;break;case 2:[d,l]=c;break;default:l=c[0];break}return Vb(a,d,f,i).transaction(l)}function fs(a,c){return Vb(a).update(c)}function gs(a,...c){let d,f,i;switch(c.length){case 3:[d,f,i]=c;break;case 2:[d,f]=c;break;case 1:d=c[0];break}return Vb(a,d,f,i).onDisconnect().remove()}function hs(a,...c){let d,f,i,l;switch(c.length){case 4:[d,f,i,l]=c;break;case 3:[d,f,l]=c;break;case 2:[d,l]=c;break;default:l=c[0];break}return Vb(a,d,f,i).onDisconnect().set(l)}const Zca=Rb(fc());class Ef extends zb{constructor({eventEmitter:a,root:c="",type:d=xb["3d"],eventNames:f=Zr}={}){super();this.setEventEmitter(a),this.eventNames=f,this.database=Zca.database(),this.table=new _r(),this.setTableType(d),this.setRootPath(c),this.initialFlag=!1}destroy(){this.updater.destroy(),this.destroyEventEmitter().stopUpdate()}setRootPath(a){return this.rootPath=a,this.rootRef=a!==""?this.database.ref(this.rootPath):null,this.updater.setRootPath(a),this}setTableType(a){return typeof a==="string"&&(a=xb[a]),this.tableType=a,this.updater&&this.updater.destroy(),this.updater=$r(this),this}startUpdate(){return as(this),this.updater.startUpdate(),this}stopUpdate(){return this.updater.stopUpdate(),this}clear(){return this.updater.clear(),this}getData(){return this.table.getValue(...arguments)}cloneData(){return this.table.cloneValue(...arguments)}getItemRef(a,c,d){return Vb(this,a,c,d)}setData(...a){return bs(this,...a)}removeData(...a){return cs(this,...a)}incValue(...a){return ds(this,...a)}transaction(...a){return es(this,...a)}updateData(a){return fs(this,a)}removeDataOnDisconnect(...a){return gs(this,...a)}setDataOnDisconnect(...a){return hs(this,...a)}}const $ja=Rb(fc());var cn;(function(a){a.d="d",a.w="w",a.m="m",a.y="y",a.a="a",a.day="d",a.week="w",a.month="m",a.year="y",a.all="a"})(cn||(cn={}));var Og;(function(a){a.d="tagD",a.w="tagW",a.m="tagM",a.y="tagY",a.a="tagA"})(Og||(Og={}));var Pg;(function(a){a.d="scoreD",a.w="scoreW",a.m="scoreM",a.y="scoreY",a.a="scoreA"})(Pg||(Pg={}));var pt;(function(a){a.d="day",a.w="week",a.m="month",a.y="year",a.a="all"})(pt||(pt={}));function gn({query:a,totalLines:c=Infinity,linesPerPage:d=1e3,startDocRef:f,startMode:i,forEachPageCallback:l,resolveCallback:q}){return Ht({query:a,remainderLines:c,linesPerPage:d,startDocRef:f,startMode:i,forEachPageCallback:l,resolveCallback:q})}function Ht(a){let c=a.query;a.startDocRef&&(c=c[a.startMode](a.startDocRef));let d=Math.min(a.remainderLines,a.linesPerPage);return a.remainderLines-=d,c.limit(d).get().then(function(f){let i=a.remainderLines===0||f.size<d,l=!1;a.forEachPageCallback&&(l=a.forEachPageCallback(f)||!1),i=i||l;if(i){let q;return a.resolveCallback&&(q=a.resolveCallback()),Promise.resolve(q)}else return a.startDocRef=f.docs[f.size-1],a.startMode="startAfter",Ht(a)})}function bc(a,c=Infinity,d=0,f,i){let l=[],q=0;return gn({query:a,totalLines:d+c,startDocRef:f,startMode:i,forEachPageCallback:function(u){let v,A=u.size,E=d-q;E<=0?v=u.docs:E<A&&(v=u.docs.slice(E,A)),v&&l.push(...v),q+=A},resolveCallback:function(){return l}})}const ena=Rb(fc());function yt(a,c,d=0){return bc(a.nextQuery,c,d,a.baselineDocRef,a.baselineMode).then(function(f){let i=f.length;return a.cacheItems=f,a.pageIndex=void 0,a.startItemIndex=d,a.endItemIndex=a.startItemIndex+i-1,a.isFullPage=c===void 0?!0:i===c,Promise.resolve(a.cacheItems)})}const Ema=Rb(fc());class gj{constructor({query:a={next:void 0,previous:void 0},itemCount:c=100,baselineDoc:d,baselineMode:f="startAt"}={}){this.setQuery(a),this.setItemCount(c),this.setBaselineDoc(d,f),this.pageIndex=void 0,this.baselineDocRef=void 0,this.baselineMode="startAt",this.startItemIndex=void 0,this.endItemIndex=void 0,this.cacheItems=void 0,this.isFullPage=void 0}setQuery(a,c){if(a instanceof Ema.firestore.Query)this.nextQuery=a,this.prevQuery=c;else{var d=a;this.nextQuery=d.next,this.prevQuery=d.previous}return this.pageIndex=null,this.isFullPage=!0,this}setItemCount(a){return this.itemCount=a,this}setBaselineDoc(a,c){return a?(this.baselineDocRef=a.ref,this.baselineMode=c):this.baselineDocRef=void 0,this}load(a,c=0){return yt(this,a,c)}loadFirstPage(){return this._loadFirstPage()}loadNextPage(){return this.pageIndex==null?this._loadFirstPage():this._loadNextPage()}loadPreviousPage(){return this.pageIndex==null||this.pageIndex===1?this._loadFirstPage():this._loadPreviousPage()}loadCurrentPage(){return this.pageIndex==null||this.pageIndex===0?this._loadFirstPage():this._loadCurrentPage()}}function Et(a){return bc(a.nextQuery,a.itemCount,0,a.baselineDocRef,a.baselineMode).then(function(c){let d=c.length;return a.cacheItems=c,a.pageIndex=0,a.startItemIndex=0,a.endItemIndex=a.startItemIndex+d-1,a.isFullPage=d===a.itemCount,a.prevPageEndDocRef=null,a.currPageStartDocRef=c[0].ref,a.currPageEndDocRef=c[d-1].ref,Promise.resolve(a.cacheItems)})}function zt(a){return bc(a.nextQuery,a.itemCount,0,a.baselineDocRef,a.baselineMode).then(function(c){let d=c.length;return a.cacheItems=c,a.pageIndex=0,a.startItemIndex=0,a.endItemIndex=a.startItemIndex+d-1,a.isFullPage=d===a.itemCount,Promise.resolve(a.cacheItems)})}function Ft(a){return bc(a.nextQuery,a.itemCount,0,a.currPageEndDocRef,"startAfter").then(function(c){let d=c.length;return a.cacheItems=c,a.pageIndex+=1,a.startItemIndex=a.endItemIndex+1,a.endItemIndex=a.startItemIndex+d-1,a.isFullPage=d===a.itemCount,a.prevPageEndDocRef=a.currPageEndDocRef,a.currPageStartDocRef=c[0].ref,a.currPageEndDocRef=c[d-1].ref,Promise.resolve(a.cacheItems)})}function At(a){let c=(a.pageIndex+1)*a.itemCount;return bc(a.nextQuery,a.itemCount,c,a.baselineDocRef,a.baselineMode).then(function(d){let f=d.length;return a.cacheItems=d,a.pageIndex+=1,a.startItemIndex=a.endItemIndex+1,a.endItemIndex=a.startItemIndex+f-1,a.isFullPage=f===a.itemCount,Promise.resolve(a.cacheItems)})}function Gt(a){return bc(a.prevQuery,a.itemCount+1,0,a.currPageStartDocRef,"startAfter").then(function(c){let d=c.length-1;return a.cacheItems=c,a.cacheItems.pop(),a.cacheItems.reverse(),a.pageIndex-=1,a.endItemIndex=a.startItemIndex-1,a.startItemIndex=a.endItemIndex-d+1,a.isFullPage=d===a.itemCount,a.prevPageEndDocRef=c[d].ref,a.currPageStartDocRef=c[d-1].ref,a.currPageEndDocRef=c[0].ref,Promise.resolve(a.cacheItems)})}function Bt(a){let c=(a.pageIndex-1)*a.itemCount;return bc(a.nextQuery,a.itemCount,c,a.baselineDocRef,a.baselineMode).then(function(d){let f=d.length;return a.cacheItems=d,a.pageIndex-=1,a.endItemIndex=a.startItemIndex-1,a.startItemIndex=a.endItemIndex-f+1,a.isFullPage=f===a.itemCount,Promise.resolve(a.cacheItems)})}function Dt(a){return bc(a.nextQuery,a.itemCount,0,a.prevPageEndDocRef,"startAfter").then(function(c){let d=c.length;return a.cacheItems=c,a.endItemIndex=a.startItemIndex+d-1,a.isFullPage=d===a.itemCount,a.currPageStartDocRef=c[0].ref,a.currPageEndDocRef=c[d-1].ref,Promise.resolve(a.cacheItems)})}function Ct(a){let c=a.pageIndex*a.itemCount;return bc(a.nextQuery,a.itemCount,c,a.baselineDocRef,a.baselineMode).then(function(d){let f=d.length;return a.cacheItems=d,a.endItemIndex=a.startItemIndex+f-1,a.isFullPage=f===a.itemCount,Promise.resolve(a.cacheItems)})}class dn extends gj{_loadFirstPage(){return zt(this)}_loadNextPage(){return At(this)}_loadPreviousPage(){return Bt(this)}_loadCurrentPage(){return Ct(this)}}const Ela=Rb(fc());class fj extends gj{_loadFirstPage(){return Et(this)}_loadNextPage(){return Ft(this)}_loadPreviousPage(){return Gt(this)}_loadCurrentPage(){return Dt(this)}}const xma=Rb(fc());function rt(a,c){let d={senderID:a.userID,message:c,timestamp:xma.firestore.FieldValue.serverTimestamp()};return a.userName!==void 0&&(d.senderName=a.userName),a.receiverID!==void 0&&(d.receiverID=a.receiverID),a.rootRef.add(d)}function en(a,c=a.receiverID){let d=a.rootRef;return d=c!==void 0?d.where("receiverID","==",c):d,d}function qt(a,c=a.receiverID){let d=en(a,c),f=d.orderBy("timestamp"),i=d.orderBy("timestamp","desc");return{next:f,previous:i}}const fn="receive";function st(a){let c=en(a).orderBy("timestamp","desc").limit(1);a.unsubscribe=c.onSnapshot({includeMetadataChanges:!0},function(d){if(d.size>0){let f=d.docs[0];if(f.metadata.hasPendingWrites){a.skipFirst&&(a.skipFirst=!1);return}wt(a,a.receiverID,f);if(a.skipFirst)a.skipFirst=!1;else{let i=xt(f);a.cacheMessages.push(i),a.emit(fn,i)}}else a.skipFirst&&(a.skipFirst=!1)},function(d){debugger})}function tt(a){a.unsubscribe&&a.unsubscribe(),a.resetQueryFlag=!0,a.cacheMessages.length=0}function ut(a){return wt(a),a.page.loadNextPage().then(function(c){let d=[];for(let f=0,i=c.length;f<i;f++)d.push(xt(c[f]));return a.cacheMessages.splice(0,0,...d),Promise.resolve(d)})}function wt(a,c=a.receiverID,d){if(!a.resetQueryFlag)return;a.resetQueryFlag=!1;let f=a.skipFirst?"startAt":"startAfter";a.page.setBaselineDoc(d,f).setQuery(qt(a,c));return}function xt(a){let c=a.data();return c.timestamp=c.timestamp.toDate(),c}const oma=Rb(fc());class vt extends zb{constructor({eventEmitter:a,root:c="",senderID:d="",senderName:f="",receiverID:i,pageItemCount:l=100}={}){super();this.setEventEmitter(a),this.database=oma.firestore(),this.setRootPath(c),this.userInfo={userID:"",userName:void 0},this.setSender(d,f),this.setReceiver(i),this.skipFirst=!0,this.unsubscribe=void 0,this.page=new fj(),this.setPageItemCount(l),this.resetQueryFlag=!0,this.cacheMessages=[]}destroy(){this.stopReceiving().destroyEventEmitter()}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.resetQueryFlag=this.resetQueryFlag||this.rootPath!==a,this.rootPath=a,this.rootRef=this.database.collection(a),this}setSender(a,c){return typeof a==="string"?(this.userID=a,this.userName=c):this.userInfo=a,this}setReceiver(a){return this.resetQueryFlag=this.resetQueryFlag||this.receiverID!==a,this.receiverID=a,this}setPageItemCount(a){return this.page.setItemCount(a),this}get hasPreviousMessage(){return this.page.isFullPage!==!1}send(a){return rt(this,a)}startReceiving(){return st(this),this}stopReceiving(){return tt(this),this}loadPreviousMessages(){return ut(this)}}const im="join";const jm="leave";const lm="init";const km="update";const hm="changename";const gm="change";const ns={join:im,leave:jm,update:km,change:gm,init:lm,changename:hm};var rd;(function(a){a[a.once=0]="once",a[a.child=1]="child",a[a.all=2]="all"})(rd||(rd={}));const Vm="add";const Xm="remove";const Wm="change";const Ym="update";const ft={add:Vm,remove:Xm,update:Ym,change:Wm};function dj(a){a.items.length=0,a.itemID2Index.clear()}function gt(a){return a.items}function ht(a,c){return a.itemID2Index.has(c)}function Um(a,c){return c==null?null:a.itemID2Index.get(c)}function it(a,c){if(c==null)return null;let d=Um(a,c);return d==null?null:a.items[d]}function jt(a,c,d){a.items.forEach(c,d)}function Xd(a){a.itemID2Index.clear();let c=a.items;for(var d=0,f=c.length;d<f;d++){let i=c[d][a.keyItemID];a.itemID2Index.set(i,d)}}function Zm(a,c){let d=$m.call(this,a,c);Xd(this),this.emit(this.eventNames.add,d),this.emit(this.eventNames.update,this.items)}function Mg(a,c){let d=kt.call(this,a);Xd(this);let f=$m.call(this,a,c);Xd(this),this.emit(this.eventNames.change,f,d),this.emit(this.eventNames.update,this.items)}function _m(a){let c=kt.call(this,a);Xd(this),this.emit(this.eventNames.remove,c),this.emit(this.eventNames.update,this.items)}function Ng(a){dj(this),a.forEach(function(c){$m.call(this,c,null,!0)}.bind(this)),Xd(this),this.emit(this.eventNames.update,this.items)}function $m(a,c,d=!1){let f,i=this.getItemCallback,l=this.getItemCallbackScope;l?f=i.call(l,a):f=i(a);if(d)return this.items.push(f),f;if(c==null)this.items.unshift(f);else{let q=this.itemID2Index.get(c);q===this.items.length-1?this.items.push(f):this.items.splice(q+1,0,f)}return f}function kt(a){let c=this.itemID2Index.get(a.key),d=Lg(this.items,c);return d}const nt={start(a,c){a.isUpdating=!1,c.once("value",Ng,a)},stop(a){}};const mt={start(a,c){c.on("child_added",Zm,a),c.on("child_removed",_m,a),c.on("child_moved",Mg,a),c.on("child_changed",Mg,a)},stop(a){a.query.off("child_added",Zm,a),a.query.off("child_removed",_m,a),a.query.off("child_moved",Mg,a),a.query.off("child_changed",Mg,a)}};const lt={start(a,c){c.on("value",Ng,a)},stop(a){a.query.off("value",Ng,a)}};const Kg={};Kg[rd.all]=lt;Kg[rd.child]=mt;Kg[rd.once]=nt;class Me extends zb{constructor({eventEmitter:a,itemIDKey:c="__itemID__",mode:d=rd.child,getItemCallback:f=Ux,getItemCallbackScope:i,query:l,eventNames:q=ft}={}){super();this.setEventEmitter(a),this.eventNames=q,this.isUpdating=!1,this.items=[],this.itemID2Index=new Map(),this.setItemIDKey(c),this.setMode(d),i===void 0&&(i=this),this.setGetitemCallback(f,i),this.setQuery(l)}destroy(){this.stopUpdate().clear()}setItemIDKey(a){return this.keyItemID=a,this}setMode(a){return typeof a==="string"&&(a=rd[a]),this.mode=a,this.updater=Kg[a],this}setGetitemCallback(a,c){return this.getItemCallback=a,this.getItemCallbackScope=c,this}setQuery(a){return this.query=a,this}startUpdate(a){if(a)this.setQuery(a);else if(this.query)a=this.query;else return this;return this.stopUpdate().clear(),this.isUpdating=!0,this.updater.start(this,a),this}stopUpdate(){return!this.query||!this.isUpdating?this:(this.isUpdating=!1,this.updater.stop(this),this)}clear(){return dj(this),this}getItems(){return gt(this)}hasItem(a){return ht(this,a)}getItemIndexFromItemID(a){return Um(this,a)}getItemFromItemID(a){return it(this,a)}forEach(a,c){return jt(this,a,c),this}updateItemID2Index(){return Xd(this),this}}const Ux=function(a){let c=a.val();return c[this.keyItemID]=a.key,c};function Td(a,c=a.userID){return a.userID2ItemID.has(c)}function Ri(a,c=a.userID){if(!Td(a,c))return null;let d=a.userID2ItemID.get(c);return a.rootRef.child(d)}function os(a,c=a.userID){if(!Td(a,c))return null;let d=a.userID2ItemID.get(c);return a.userList.getItemFromItemID(d)}function fm(a){return a.userList.getItems()}function ps(a){a.userList.clear()}function qs(a,c,d){a.userList.forEach(c,d)}function rs(a,c=a.userID){let d=a.userList.getItems()[0];return d&&d.userID===c}function ss(a){return a.maxUsers===0?!1:a.userList.getItems().length>=a.maxUsers}function ks(a=0,c){return new Promise(function(d,f){setTimeout(function(){d(c)},a)})}function ls(a,c=a.userID,d=a.userName){if(Td(a,c))return Promise.resolve();let f={userID:c,userName:d},i=a.maxUsers,l=a.database.ref(a.rootPath),q=l.push();return q.onDisconnect().remove().then(function(){return q.set(f)}).then(function(){return ks(0)}).then(function(){return i===0?(a.isInList=!0,Promise.resolve()):l.limitToFirst(i).once("value").then(function(u){return Ix(u,c)?(a.isInList=!0,Promise.resolve()):(a.isInList=!1,q.remove().then(function(){return q.onDisconnect().cancel()}).then(function(){return Promise.reject()}))})})}function Ix(a,c){let d=!1;return a.forEach(function(f){let i=f.val();if(i.userID===c)return d=!0,!0}),d}function ms(a,c=a.userID){if(!Td(a,c))return Promise.resolve();let d=a.userID2ItemID.get(c),f=a.database.ref(a.rootPath).child(d);return f.remove()}function js(a,c){return new Promise(function(d,f){let i=Ri(a);if(i)return d(i);{let l=a.rootRef.orderByChild("userID").equalTo(a.userID);l.once("child_added").then(function(q){return d(q.ref)})}}).then(function(d){return d.child("userName").set(c)}).then(function(){return a.userName=c,Promise.resolve()})}const Gea=Rb(fc());class Ff extends zb{constructor({eventEmitter:a,root:c="",userID:d="",userName:f="",maxUsers:i=0,eventNames:l=ns}={}){super();this.setEventEmitter(a),this.eventNames=l,this.database=Gea.database(),this.setRootPath(c),this.userInfo={userID:"",userName:""},this.setUser(d,f),this.setMaxUsers(i),this.userList=new Me({eventEmitter:this.eventEmitter,itemIDKey:"joinAt",eventNames:{add:l.join,remove:l.leave,update:l.update,change:l.change}}),this.isInList=!1,this.userID2ItemID=new Map(),this.userList.on(this.eventNames.join,function(q){this.userID2ItemID.set(q.userID,q.joinAt),q.userID===this.userInfo.userID&&this.emit(this.eventNames.init,fm(this))},this).on(this.eventNames.leave,function(q){this.userID2ItemID.delete(q.userID),q.userID===this.userID&&(this.isInList=!1)},this).on(this.eventNames.change,function(q,u){let v=q.userID,A=q.userName,E=u.userName;A!==E&&this.emit(this.eventNames.changename,v,A,E)},this)}destroy(){this.stopUpdate().destroyEventEmitter().leave(),this.userList.destroy()}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.rootPath=a,this.rootRef=a!==""?this.database.ref(this.rootPath):void 0,this}setUser(a,c){return typeof a==="string"?(this.userID=a,this.userName=c):this.userInfo=a,this}setMaxUsers(a){return this.maxUsers=a,this}clear(){return ps(this),this}forEach(a,c){return qs(this,a,c),this}isFull(){return ss(this)}isFirstUser(a=this.userID){return rs(this,a)}getUser(a=this.userID){return os(this,a)}getUsers(){return fm(this)}getUserRef(a=this.userID){return Ri(this,a)}contains(a=this.userID){return Td(this,a)}join(a=this.userID,c=this.userName){return ls(this,a,c)}leave(a=this.userID){return ms(this,a)}changeUserName(a){return js(this,a)}startUpdate(){let a=this.rootRef;return this.maxUsers>0&&(a=a.limitToFirst(this.maxUsers)),this.userList.startUpdate(a),this}stopUpdate(){return this.userList.stopUpdate(),this}}const Ne="room.join";const Vd="room.leave";const Bm="userlist.join";const Cm="userlist.leave";const Em="userlist.init";const Dm="userlist.update";const Hg="userlist.changename";const mm="broadcast.receive";function qm(a){return`tables.${a}.init`}function rm(a){return`tables.${a}.update`}function sm(a){return`tables.${a}.addkey0`}function tm(a){return`tables.${a}.addkey1`}function um(a){return`tables.${a}.addkey2`}function vm(a){return`tables.${a}.removekey0`}function wm(a){return`tables.${a}.removekey1`}function xm(a){return`tables.${a}.removekey2`}function ym(a){return`tables.${a}.changekey0`}function zm(a){return`tables.${a}.changekey1`}function Am(a){return`tables.${a}.changekey2`}const nm="roomlist.add";const om="roomlist.remove";const pm="roomlist.update";function Fs(a){const c=new Ff({eventEmitter:a.eventEmitter,eventNames:{join:Bm,leave:Cm,update:Dm,change:"userlist.change",init:Em,changename:Hg},userID:a.userInfo});return c.on("userlist.leave",function(d){d.userID===a.userID&&Nx(a)}),a.on(Ne,function(){c.startUpdate()}).on(Vd,function(){c.stopUpdate().clear()}),c}function Nx(a){a.emit(Vd),setTimeout(function(){a.roomID=void 0,a.roomName=void 0,a.doorState=void 0,a.leftRoomFlag=!1},0)}function Cs(a){const c=new Me({eventEmitter:a.eventEmitter,itemIDKey:"roomID",eventNames:{update:pm,add:nm,remove:om,change:"roomlist.change"},mode:"once"});return c}function Ms(a){return a.split("|")[0]}function Ls(a){return a.split("|")[1]}function Gf(a,c=""){return`${a}|${c}`}function Mc(a,c){let d=a.rootRef;return c&&(d=d.child(c)),d}function Ig(a,c,d){let f=Mc(a,"rooms");return c!==void 0&&(f=f.child(c),d!==void 0&&(f=f.child(d))),f}function Bs(a,c){return Ig(a,c,"alive")}function Gs(a,c){return Ig(a,c,"users")}function Gg(a,c){let d=Mc(a,"room-filters");return c!==void 0&&(d=d.child(c)),d}function Hf(a,c){let d=Mc(a,"room-metadata");return c!==void 0&&(d=d.child(c)),d}function Ti(a,c,d){let f=`${a.rootPath}/rooms/${c}`;return d&&(f+=`/${d}`),f}function Wi(a,c){return Ti(a,c,"users")}function Ds(a,c,d){let f=Ti(a,c,"tables");return d&&(f+=`/${d}`),f}function Hs(a,c,d="open"){let f=Gg(a);return f=f.orderByChild("filter"),c===void 0?f=f.startAt(d).endAt(`${d}~`):f=f.equalTo(Gf(d,c)),f}function ys(a,c){if(c)c===!0&&(c={history:!1});else return null;const d=new Df({eventEmitter:a.eventEmitter,eventNames:{receive:mm},receiverID:"boradcast",senderID:a.userInfo,history:c.history});return a.on(Ne,function(f){d.setRootPath(Ti(a,f.roomID)).startReceiving()}).on(Vd,function(){d.stopReceiving()}).on(Hg,function(f,i){d.changeUserName(f,i)}),d}function Es(a,c){const d=new Map();return c?(c.forEach(f=>{d.set(f.key,Mx(a,f))}),a.on(Ne,function(f){for(const[i,l]of d)l.setRootPath(Ds(a,f.roomID,i)).startUpdate()}).on(Vd,function(){for(const[f,i]of d)i.stopUpdate().clear()}),d):d}function Mx(a,{key:c,type:d=xb["1d"]}){const f=new Ef({eventEmitter:a.eventEmitter,type:d,eventNames:{init:qm(c),update:rm(c),addkey0:sm(c),removekey0:vm(c),changekey0:ym(c),addkey1:tm(c),removekey1:wm(c),changekey1:zm(c),addkey2:um(c),removekey2:xm(c),changekey2:Am(c)}});return f}function kc(a,c=a.roomID,d=a.roomName){return{roomID:c,roomName:d}}function _i(a,c){return c===void 0?a.roomID!==void 0:a.roomID===c}function Ps(a){return a.userList.isFull()}function Qs(a,c=a.userID){return a.userList.isFirstUser(c)}function Rs(a){return a.userList.getUsers()}function Xi(a,c,d,f){a.roomID=c,a.roomName=d,a.roomType=f,a.emit("room.join",kc(a))}function Vi(a,c={}){return c.roomID==null&&(c.roomID=Ig(a).push().key),Kx(a,c.roomID).then(function(){return Lx(a,c)})}function Kx(a,c){return Bs(a,c).transaction(function(d){return d===null?!0:void 0})}function Lx(a,{roomID:c,roomName:d="",roomType:f="",maxUsers:i=0,presisted:l=!1,door:q="open",join:u=!0,filterData:v}){let A=Ig(a,c),E=Gg(a,c),H=Hf(a,c);a.isRemoveRoomWhenLeft=!l,a.isRemoveRoomWhenLeft&&(A.onDisconnect().remove(),E.onDisconnect().remove(),H.onDisconnect().remove());const R=Gf(q,f),N={},P={filter:R,name:d};v&&(P.data=v),N[`room-filters/${c}`]=P;const V={name:d,filter:R,maxUsers:i,moderators:{}};return V.moderators[a.userID]=a.userName,N[`room-metadata/${c}`]=V,new Promise(function(Y,fa){if(u){const ga=a.userList.setRootPath(Wi(a,c)).setMaxUsers(0).join();return a.userList.setMaxUsers(i),ga.then(Y,fa)}else return Y()}).then(function(){return Mc(a).update(N)}).then(function(){return a.isRoomCreator=!0,u&&Xi(a,c,d,f),Promise.resolve(kc(a))})}function zs(a,{digits:c=10,candidates:d="0123456789",retry:f=1e3}){let i=arguments[1];return As(a,c,d,f,i)}function As(a,c,d,f,i){return i.roomID=Ui(c,c,d),f<=0?Promise.reject(i):(f--,Vi(a,i).catch(function(){return As(a,c,d,f,i)}))}function $i(a,c=a.roomID){const d={};d[`room-filter/${c}`]=null,d[`room-metadata/${c}`]=null,d[`rooms/${c}`]=null;const f=kc(a);return Mc(a).update(d).then(function(){return Promise.resolve(f)})}function If(a){if(!_i(a))return Promise.resolve(kc(a));a.leftRoomFlag=!0;if(a.isRemoveRoomWhenLeft)return $i(a);{const c=kc(a);return a.userList.leave().then(function(){return Promise.resolve(c)})}}function Zi(a,{leftThenJoin:c=!0,roomID:d}){return c?If(a).then(function(){return Ns(a,d)}):Ns(a,d)}function Ns(a,c){return c==null?Promise.reject(kc(a,c,"")):(a.isRemoveRoomWhenLeft=!1,Ox(a,c).then(function(d){return a.userList.setRootPath(Wi(a,c)).setMaxUsers(d.maxUsers).join().then(function(){return Promise.resolve(d)})}).then(function(d){return Xi(a,c,d.name,Ls(d.filter)),Promise.resolve(kc(a))}))}function Ox(a,c){return Hf(a,c).once("value").then(function(d){let f=d.val();return Px(a,f)?Promise.resolve(f):Promise.reject()})}function Px(a,c){if(c==null)return!1;if(Ms(c.filter)==="closed")return!1;const d=a.userID;if(c.moderators[d])return!0;switch(c.permission){case"blocklist":const f=c.blocklist;return!(f&&f[d]);case"allowlist":const i=c.allowlist;return i&&i[d];default:return!0}}function Yi(a,c,d){return new Promise(function(f,i){a.roomList.once("roomlist.update",function(l){f(l)}).startUpdate(Hs(a,c,d))})}function Js(a,{roomType:c="",leftThenJoin:d=!0}={}){return Yi(a,c,"open").then(function(f){if(f.length===0)return Promise.reject("No filtered room");Ke(f);const i={leftThenJoin:d,roomID:""};return Ks(a,i,f)})}function Ks(a,c,d,f=0){return f===d.length?Promise.reject("Can't join any room"):(c.roomID=d[f].roomID,f++,Zi(a,c).catch(function(){return Ks(a,c,d,f)}))}function Os(a,c){return a.userList.contains(c)?c===a.userID?If(a):a.userList.leave(c):Promise.resolve()}function Ud(a,c){return c===a.roomID?Promise.resolve(!0):Hf(a,c).once("value").then(function(d){const f=d.val()!==null;return Promise.resolve(f)})}function Si(a,c,d=a.roomID){return Ud(a,d).then(function(f){if(!f)return Promise.resolve();const i=Gf(c,a.roomType),l={};return l[`room-filters/${d}/filter`]=i,l[`room-metadata/${d}/filter`]=i,Mc(a).update(l)})}function vs(a,c=a.roomID){return Si(a,"open",c)}function ws(a,c=a.roomID){return Si(a,"closed",c)}function ts(a,c,d=a.roomID){return Ud(a,d).then(function(f){return f?Gg(a,d).child("data").update(c):Promise.resolve()})}function xs(a,c){return a.userList.changeUserName(c)}function us(a,c,d=a.roomID){return Ud(a,d).then(function(f){if(!f)return Promise.resolve();const i={};return i[`room-filters/${d}/name`]=c,i[`room-metadata/${d}/name`]=c,Mc(a).update(i)})}function Is(a,c=a.roomID){return c===a.roomID?a.userList.getUsers():new Promise(function(d,f){const i=new Me({itemIDKey:"joinAt",mode:"once"});i.once("update",function(l){d(l)}).startUpdate(Gs(a,c))})}const rga=Rb(fc());class Ss extends zb{constructor({eventEmitter:a,root:c="",userID:d="",userName:f="",broadcast:i=!0,tables:l=!1}={}){super();this.setEventEmitter(a),this.database=rga.database(),this.setRootPath(c),this.userInfo={userID:"",userName:""},this.setUser(d,f),this.isRoomCreator=!1,this.roomID=void 0,this.roomName=void 0,this.roomType=void 0,this.doorState=void 0,this.leftRoomFlag=!1,this.isRemoveRoomWhenLeft=void 0,this.userList=Fs(this),this.roomList=Cs(this),this.broadcast=ys(this,i),this.tables=Es(this,l)}destroy(){var a=this;this.destroyEventEmitter().leaveRoom().then(function(){a.userList.destroy(),a.userList=void 0,a.roomList.destroy(),a.roomList=void 0,a.broadcast.destroy(),a.broadcast=void 0})}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.rootPath=a,this.rootRef=a!==""?this.database.ref(this.rootPath):void 0,this}getRoomInfo(a,c){return kc(this,a,c)}setUser(a,c){return typeof a==="string"?(this.userID=a,this.userName=c):this.userInfo=a,this}isInRoom(a){return _i(this,a)}isFull(){return Ps(this)}isFirstUser(a=this.userID){return Qs(this,a)}getUsers(){return Rs(this)}get maxUsers(){return this.userList.maxUsers}getTable(a){return this.tables.get(a)}createRoom(a){return Vi(this,a)}createRandomRoom(a={}){return zs(this,a)}joinRoom(a){return Zi(this,a)}joinRandomRoom(a={}){return Js(this,a)}leaveRoom(){return If(this)}removeRoom(a=this.roomID){return $i(this,a)}kickUser(a){return Os(this,a)}changeRoomState(a,c=this.roomID){return Si(this,a,c)}openRoom(a=this.roomID){return vs(this,a)}closeRoom(a=this.roomID){return ws(this,a)}changeUserName(a){return xs(this,a)}changeFilterData(a,c=this.roomID){return ts(this,a,c)}changeRoomName(a,c,d=a.roomID){return us(this,c,d)}getUserList(a=this.roomID){return Is(this,a)}getRoomList(a,c){return Yi(this,a,c)}HasRoom(a){return Ud(this,a)}}function Zs(a,c){let d=a.rootPath;return c&&(d+=`/${c}`),d}function Xs(a){return Zs(a,"users")}function Vs(a,c){return`${Zs(a,"tables")}/${c}`}const qd="room.join";const Wd="room.leave";const Rm="userlist.join";const aj="userlist.leave";const Tm="userlist.init";const Sm="userlist.update";const Jg="userlist.changename";const Fm="broadcast.receive";function Gm(a){return`tables.${a}.init`}function Hm(a){return`tables.${a}.update`}function Im(a){return`tables.${a}.addkey0`}function Jm(a){return`tables.${a}.addkey1`}function Km(a){return`tables.${a}.addkey2`}function Lm(a){return`tables.${a}.removekey0`}function Mm(a){return`tables.${a}.removekey1`}function Nm(a){return`tables.${a}.removekey2`}function Om(a){return`tables.${a}.changekey0`}function Pm(a){return`tables.${a}.changekey1`}function Qm(a){return`tables.${a}.changekey2`}function Ys(a,c=0){const d=new Ff({eventEmitter:a.eventEmitter,eventNames:{join:Rm,leave:aj,update:Sm,change:"userlist.change",init:Tm,changename:Jg},root:Xs(a),userID:a.userInfo,maxUsers:c});return d.on(aj,function(f){f.userID===a.userID&&Sx(a)}),a.on(qd,function(){d.startUpdate()}).on(Wd,function(){d.stopUpdate().clear()}),d}function Sx(a){a.emit(Wd),setTimeout(function(){a.leftRoomFlag=!1},0)}function Us(a,c){if(c)c===!0&&(c={history:!1});else return null;const d=new Df({eventEmitter:a.eventEmitter,eventNames:{receive:Fm},receiverID:"broadcast",senderID:a.userInfo,history:c.history});return a.on(qd,function(){d.setRootPath(a.rootPath).startReceiving()}).on(Wd,function(){d.stopReceiving()}).on(Jg,function(f,i){d.changeUserName(f,i)}),d}function Ws(a,c){const d=new Map();return c?(c.forEach(f=>{d.set(f.key,Rx(a,f))}),a.on(qd,function(){for(const[f,i]of d)i.setRootPath(Vs(a,f)).startUpdate()}).on(Wd,function(){for(const[f,i]of d)i.stopUpdate().clear()}),d):d}function Rx(a,{key:c,type:d=xb["1d"]}){const f=new Ef({eventEmitter:a.eventEmitter,type:d,eventNames:{init:Gm(c),update:Hm(c),addkey0:Im(c),removekey0:Lm(c),changekey0:Om(c),addkey1:Jm(c),removekey1:Mm(c),changekey1:Pm(c),addkey2:Km(c),removekey2:Nm(c),changekey2:Qm(c)}});return f}function cj(a){return a.userList.isInList}function bt(a){return a.userList.isFull()}function ct(a,c=a.userID){return a.userList.isFirstUser(c)}function dt(a){return a.userList.getUsers()}function $s(a){return a.userList.join().then(function(){return a.emit(qd),Promise.resolve()})}function bj(a){return cj(a)?(a.leftRoomFlag=!0,a.userList.leave()):Promise.resolve()}function _s(a){return a.userList.getUsers()}function at(a,c){return a.userList.contains(c)?c===a.userID?bj(a):a.userList.leave(c):Promise.resolve()}function Ts(a,c){return a.userList.changeUserName(c)}const dia=Rb(fc());class et extends zb{constructor({eventEmitter:a,root:c="",userID:d="",userName:f="",maxUsers:i=0,broadcast:l=!0,tables:q=!1}={}){const u=arguments[0];super();this.setEventEmitter(a),this.database=dia.database(),this.setRootPath(c),this.userInfo={userID:"",userName:""},this.setUser(d,f),this.leftRoomFlag=!1,this.userList=Ys(this,i),this.broadcast=Us(this,l),this.tables=Ws(this,q)}shutdown(){}destroy(){this.shutdown()}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.rootPath=a,this.rootRef=a!==""?this.database.ref(this.rootPath):void 0,this}setUser(a,c){return typeof a==="string"?(this.userID=a,this.userName=c):this.userInfo=a,this}isInRoom(){return cj(this)}isFull(){return bt(this)}isFirstUser(a=this.userID){return ct(this,a)}getUsers(){return dt(this)}get maxUsers(){return this.userList.maxUsers}getTable(a){return this.tables.get(a)}joinRoom(){return $s(this)}leaveRoom(){return bj(this)}getUserList(){return _s(this)}kickUser(a){return at(this,a)}changeUserName(a){return Ts(this,a)}}const Sn="statechange";function Tn(a){return`exit_${a.toString()}`}function Un(a){return`enter_${a.toString()}`}class Cv extends zb{constructor({eventEmitter:a}={}){super();this._states=new Map();this.enable=!0;this.setEventEmitter(a)}destroy(){this.destroyEventEmitter()}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(a=!0){return this.enable=a,this}getState(a){return this._states.get(a)}addState(a){return this._states.set(a.name,a),this}addStates(a){for(let c=0,d=a.length;c<d;c++)this.addState(a[c]);return this}removeState(a){return this._states.delete(a),this}removeAllStates(){return this._states.clear(),this}set state(a){if(!this.enable||this._stateLock)return;if(this._state===a)return;this._prevState=this._state,this._state=a,this._stateLock=!0,this.emit(Sn,this);if(this._prevState!=null){const c=this.getState(this._prevState);c&&c.exit&&c.exit(this),this.emit(Tn(this._prevState),this)}this._stateLock=!1;if(this._state!=null){const c=this.getState(this._state);c&&c.enter&&c.enter(this),this.emit(Un(this._state),this)}}get state(){return this._state}get prevState(){return this._prevState}get stateList(){return Array.from(this._states.keys())}start(a){return this._start=a,this._prevState=void 0,this._state=a,this}goto(a){return a!=null&&(this.state=a),this}next(){const a=this.getState(this.state);if(!a||!a.next)return this;let c;return typeof a.next==="string"?c=a.next:c=a.next(this),this.goto(c),this}update(a,c,d="update"){const f=this.getState(this.state);f&&f[d]&&f[d](this,a,c)}preupdate(a,c){this.update(c,a,"preupdate")}postupdate(a,c){this.update(c,a,"postupdate")}}var Vn;(function(a){a[a.shuffle=0]="shuffle",a[a.random=1]="random"})(Vn||(Vn={}));const Yn="die";class Dv extends Ij{constructor(a,{lifeTime:c=1e3,destroy:d=!0}={}){super(a,arguments[1]);this.setLifeTime(c),this.setDestroyMode(d)}resetFromJSON({lifeTime:a=1e3,destroy:c=!0}={}){return super.resetFromJSON(arguments[0]),this.setLifeTime(a),this.setDestroyMode(c),this}toJSON(){const a=super.toJSON();return a.lifeTime=this.lifeTime,a.destroy=this.destroyMode,a}setLifeTime(a){return this.lifeTime=a,this}addToLifeTime(a){return this.lifeTime+=a,this}setDestroyMode(a=!0){return this.destroyMode=a,this}get isAlive(){return this.now<this.lifeTime}get remainder(){let a=this.lifeTime-this.now;return a<0&&(a=0),a}update(a){return this.isRunning?(super.update(a),this.isAlive||(this.complete(Yn),this.destroyMode&&this.gameObject.destroy&&this.gameObject.destroy()),this):this}get gameObject(){return this.parent}}class Jj{constructor(a,c,d,f,i){this.key=a,this.start=c,this.end=d,this.step=f,this.items=i,this._current=c}reset(){this._current=this.start}get isEnd(){return this.step>=0?this._current>=this.end:this._current<=this.end}get length(){return this.step>=0&&this.start>this.end||this.step<0&&this.start<this.end?0:Math.floor(this.end-this.start)+1}next(){return this.isEnd?this._current=this.start:this._current+=this.step,this}get current(){return this.items?this.items[this._current]:this._current}}class Fv{constructor(){this.indexes=[];this.length=0;this.firstPass=!0;this.currentCount=0}reset(){for(let a=0,c=this.indexes.length;a<c;a++)this.indexes[a].reset();return this.firstPass=!0,this.currentCount=0,this}addNumberLoop(a,c,d,f=d>=c?1:-1){return this.indexes.push(new Jj(a,c,d,f)),this.length=this._getLength(),this}addItemsLoop(a,c,d=!1){const f=c.length-1,i=d?f:0,l=d?0:f,q=d?-1:1;return this.indexes.push(new Jj(a,i,l,q,c)),this.length=this._getLength(),this}addLoop({key:a,start:c,end:d,step:f,items:i}){return this.indexes.push(new Jj(a,c,d,f,i)),this.length=this._getLength(),this}removeLoops(){return this.indexes.length=0,this.length=0,this}_getLength(){let a=this.indexes[0]?.length;for(let c=1,d=this.indexes.length;c<d;c++)a*=this.indexes[c].length;return a??0}get progress(){return this.currentCount/this.length}get isEnd(){for(let a=this.indexes.length-1;a>=0;a--)if(!this.indexes[a].isEnd)return!1;return!0}next(){for(let a=this.indexes.length-1;a>=0;a--){const c=this.indexes[a],d=c.isEnd;c.next();if(!d)break}return this}getCurrent(a={}){for(let c=this.indexes.length-1;c>=0;c--){const d=this.indexes[c];a[d.key]=d.current}return a}getNext(a={}){return this.firstPass?this.firstPass=!1:this.next(),this.getCurrent(a),this.currentCount++,a}}const On="tickstart";const Pn="tickend";const Qy=1e3/60;class Ev extends Kj{constructor(a,{callback:c,scope:d,deltaPercentage:f=1}={}){super(a,arguments[1]);this.deltaPercentage=1;this.loopIndexGenerator=new Fv();this.currentIndexes={};this.scene=a,this.setCallback(c,d),this.setDeltaPercentage(f),this.boot()}boot(){super.boot(),ue(this.scene,"shutdown",this.destroy,this)}shutdown(){super.shutdown(),this.scene=void 0}destroy(){this.shutdown()}startTicking(){super.startTicking(),mc(this.scene,"update",this.preupdate,this)}stopTicking(){super.stopTicking(),this.scene&&md(this.scene,"update",this.preupdate,this)}setCallback(a,c){return this.callback=a,this.scope=c,this}setDeltaPercentage(a){return this.deltaPercentage=a,this}addNumberLoop(a,c,d,f){return this.loopIndexGenerator.addNumberLoop(a,c,d,f),this}addItemsLoop(a,c,d=!1){return this.loopIndexGenerator.addItemsLoop(a,c,d),this}addLoop(a){return this.loopIndexGenerator.addLoop(a),this}get curTime(){return new Date().getTime()}get progress(){return this.loopIndexGenerator.progress}preupdate(){if(!this.callback)return;const a=this.curTime,c=Qy*this.deltaPercentage;let d;this.emit(On);do{if(this.loopIndexGenerator.isEnd){this.complete();return}this.currentIndexes=this.loopIndexGenerator.getNext(this.currentIndexes),this.scope?this.callback.call(this.scope,this.currentIndexes,this):this.callback(this.currentIndexes,this),d=this.curTime-a>=c}while(!d);this.emit(Pn)}}const qCa=Rb(aw());var Wn;(function(a){a[a.none=0]="none",a[a.base64=1]="base64",a[a.utf16=2]="utf16",a[a.uri=3]="uri"})(Wn||(Wn={}));let _y=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i;function Cf(a){let c;return a===""?c=null:_y.test(a)?c=parseFloat(a):a==="false"?c=!1:a==="true"?c=!0:c=a,c}const Ixa=Rb(vl());function Gv(a,{delimiter:c=",",convert:d=!0,types:f={}}={}){const i=Ixa.default.parse(a,{header:!0,delimiter:c}).data,l=f.question??"q",q=f.option??"",u=d===!0?Cf:d,v=[];let A,E;for(let H=0,R=i.length;H<R;H++){let N=i[H],P=N.type;delete N.type,P===l?(A=N,A.key===""&&delete A.key,Iv(A,u),A.options=[],v.push(A)):P===q&&(A&&(E=N,E.key===""&&delete E.key,Iv(E,u),A.options.push(E)))}return v}function Iv(a,c){const d=a;if(!c)return d;for(const f in a)d[f]=c(a[f],f);return d}function Rn(a,c,d){typeof c==="string"&&(c=Gv(c,d));if(Array.isArray(c))for(let f=0,i=c.length;f<i;f++)Hv(a,c[f]);else Hv(a,c)}function Hv(a,c){const d=c.options;if(d)for(let f=0,i=d.length;f<i;f++){let l=d[f];l.hasOwnProperty("key")||(l.key=`_${f}`)}c.hasOwnProperty("key")||(c.key=`_${a.questions.size}`),a.questions.set(c.key,c)}class Qn{constructor({questions:a}={}){this.questions=new Map();a&&Rn(this,a,arguments[0])}add(a,c){return Rn(this,a,c),this}remove(a){return this.questions.delete(a),this}removeAll(){return this.questions.clear(),this}has(a){return this.questions.has(a)}get(a){return this.questions.get(a)}getKeys(a=[]){const c=this.questions.keys();for(const d of c)a.push(d);return a}getOption(a,c){typeof a==="string"&&(a=this.get(a));if(!a)return null;const d=a.options;if(d)for(let f=0,i=d.length;f<i;f++){let l=d[f];if(l.key===c)return l}return null}}const Lj="quest";class Ry extends zb{constructor(a,{eventEmitter:c,shuffleQuestions:d=!1,shuffleOptions:f=!1}={}){super();this.questionKeys=[];this.setEventEmitter(c),Ni(a)&&(a=new Qn(a)),this.questionsManager=a,this.setShuffleQuestionsEnable(d),this.setShuffleOptionsEnable(f),this.init()}setShuffleQuestionsEnable(a=!0){return this.shuffleQuestionsEnable=a,this}setShuffleOptionsEnable(a=!0){return this.shuffleOptionsEnable=a,this}init(){return this.questionKeys.length=0,this.questionsManager.getKeys(this.questionKeys),this.shuffleQuestionsEnable&&Ke(this.questionKeys),this.nextIndex=-1,this.nextKey=void 0,this}setNextKey(a){return a===void 0?(this.nextIndex++,this.nextKey=this.questionKeys[this.nextIndex]):this.questionsManager.has(a)&&(this.nextKey=a,this.nextIndex=this.questionKeys.indexOf(a)),this}setPrevKey(){return this.nextIndex--,this.nextKey=this.questionKeys[this.nextIndex],this}getQuestion(){const a=this.questionsManager.get(this.nextKey);if(a&&this.shuffleOptionsEnable){const c=a.options;c&&Ke(c)}return a}getNextQuestion(a){return this.setNextKey(a).getQuestion()}getPrevQuestion(){return this.setPrevKey().getQuestion()}getOption(a,c){return c===void 0&&(c=a,a=this.getQuestion()),this.questionsManager.getOption(a,c)}next(a){const c=this.getNextQuestion(a);return c&&this.emit(Lj,c,this,this.questionsManager),this}prev(){const a=this.getPrevQuestion();return a&&this.emit(Lj,a,this,this.questionsManager),this}restart(a){return this.init(),this.next(a),this}get isLastQuestion(){return this.nextIndex===this.questionKeys.length-1}}var Sl;(function(a){a[a.ascending=0]="ascending",a[a.descending=1]="descending",a[a.logical_ascending=2]="logical_ascending",a[a.logical_descending=3]="logical_descending"})(Sl||(Sl={}));class dw extends Nh{constructor(){super();Sk("icon",{width:32,height:32,fillStyle:"white"});const a=hw("Items",5).layout().setPosition(400,300),c=new Pk(this);oe(c,a)}}const ew=8085079,fw=2493956;function gw(a){const c=new vc(0,0,"icon");Qk(Rk(0,16777216),c);const d=new Oh(0,0,a,"30px monospace"),f=new pe.Sizer({space:{item:10},orientation:"x"}).add(c).add(d);return f}function hw(a="Table",c=3){const d=new pe.Sizer({space:{left:20,right:20,top:20,bottom:20,item:10},orientation:"y"}),f=new pe.RoundRectangleCanvas({radius:20,fillStyle:fw,strokeStyle:ew,lineWidth:3});d.addBackground(f);const i=new Oh(0,0,a,"36px monospace");d.add(i,{padding:{bottom:10}});for(let l=0;l<c;l++)d.add(gw(`Item${l}`));return d}new Lp(Ok(),Nk(800,600),Lk("game"),Kk(2960685),Mk(dw));})();
/* @license
Papa Parse
v5.3.0
https://github.com/mholt/PapaParse
License: MIT
*/
/*!
 * Chart.js v2.9.3
 * https://www.chartjs.org
 * (c) 2019 Chart.js Contributors
 * Released under the MIT License
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! moment.js
//! momentjs.com
//! version : 2.29.0
