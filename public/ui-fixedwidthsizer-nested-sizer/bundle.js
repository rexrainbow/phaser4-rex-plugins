(()=>{var Qj=Object.defineProperty,kw=Object.prototype.hasOwnProperty,Cc=(a,b)=>()=>(b||(b={exports:{}},a(b.exports,b)),b.exports),lw=a=>Qj(a,"__esModule",{value:!0}),$d=(a,b)=>{lw(a);for(var d in b)Qj(a,d,{get:b[d],enumerable:!0})},mz=(a,b)=>{lw(a);if(typeof b==="object"||typeof b==="function")for(let d in b)kw.call(b,d)&&!kw.call(a,d)&&d!=="default"&&Qj(a,d,{get:()=>b[d],enumerable:!0});return a},Rb=a=>a&&a.__esModule?a:mz(Qj({},"default",{value:a,enumerable:!0}),a);var Pq=Cc((a,b)=>{(function(d,f){typeof a==="object"&&typeof b!=="undefined"?b.exports=f():typeof define==="function"&&define.amd?define(f):d.moment=f()})(a,function(){"use strict";var d;function f(){return d.apply(null,arguments)}function i(j){d=j}function l(j){return j instanceof Array||Object.prototype.toString.call(j)==="[object Array]"}function q(j){return j!=null&&Object.prototype.toString.call(j)==="[object Object]"}function u(j,n){return Object.prototype.hasOwnProperty.call(j,n)}function v(j){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(j).length===0;{var n;for(n in j)if(u(j,n))return!1;return!0}}function A(j){return j===void 0}function E(j){return typeof j==="number"||Object.prototype.toString.call(j)==="[object Number]"}function H(j){return j instanceof Date||Object.prototype.toString.call(j)==="[object Date]"}function O(j,n){var t=[],y;for(y=0;y<j.length;++y)t.push(n(j[y],y));return t}function I(j,n){for(var t in n)u(n,t)&&(j[t]=n[t]);return u(n,"toString")&&(j.toString=n.toString),u(n,"valueOf")&&(j.valueOf=n.valueOf),j}function Q(j,n,t,y){return rc(j,n,t,y,!0).utc()}function W(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function _(j){return j._pf==null&&(j._pf=W()),j._pf}var fa;Array.prototype.some?fa=Array.prototype.some:fa=function(j){var n=Object(this),t=n.length>>>0,y;for(y=0;y<t;y++)if(y in n&&j.call(this,n[y],y,n))return!0;return!1};function ha(j){if(j._isValid==null){var n=_(j),t=fa.call(n.parsedDateParts,function(C){return C!=null}),y=!isNaN(j._d.getTime())&&n.overflow<0&&!n.empty&&!n.invalidEra&&!n.invalidMonth&&!n.invalidWeekday&&!n.weekdayMismatch&&!n.nullInput&&!n.invalidFormat&&!n.userInvalidated&&(!n.meridiem||n.meridiem&&t);j._strict&&(y=y&&n.charsLeftOver===0&&n.unusedTokens.length===0&&n.bigHour===void 0);if(Object.isFrozen==null||!Object.isFrozen(j))j._isValid=y;else return y}return j._isValid}function oa(j){var n=Q(NaN);return j!=null?I(_(n),j):_(n).userInvalidated=!0,n}var ia=f.momentProperties=[],ra=!1;function ua(j,n){var t,y,C;A(n._isAMomentObject)||(j._isAMomentObject=n._isAMomentObject),A(n._i)||(j._i=n._i),A(n._f)||(j._f=n._f),A(n._l)||(j._l=n._l),A(n._strict)||(j._strict=n._strict),A(n._tzm)||(j._tzm=n._tzm),A(n._isUTC)||(j._isUTC=n._isUTC),A(n._offset)||(j._offset=n._offset),A(n._pf)||(j._pf=_(n)),A(n._locale)||(j._locale=n._locale);if(ia.length>0)for(t=0;t<ia.length;t++)y=ia[t],C=n[y],A(C)||(j[y]=C);return j}function la(j){ua(this,j),this._d=new Date(j._d!=null?j._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),ra===!1&&(ra=!0,f.updateOffset(this),ra=!1)}function N(j){return j instanceof la||j!=null&&j._isAMomentObject!=null}function R(j){f.suppressDeprecationWarnings===!1&&typeof console!=="undefined"&&console.warn&&console.warn("Deprecation warning: "+j)}function x(j,n){var t=!0;return I(function(){f.deprecationHandler!=null&&f.deprecationHandler(null,j);if(t){var y=[],C,V,ea;for(V=0;V<arguments.length;V++){C="";if(typeof arguments[V]==="object"){C+=`
[`+V+"] ";for(ea in arguments[0])u(arguments[0],ea)&&(C+=ea+": "+arguments[0][ea]+", ");C=C.slice(0,-2)}else C=arguments[V];y.push(C)}R(j+`
Arguments: `+Array.prototype.slice.call(y).join("")+`
`+new Error().stack),t=!1}return n.apply(this,arguments)},n)}var G={};function F(j,n){f.deprecationHandler!=null&&f.deprecationHandler(j,n),G[j]||(R(n),G[j]=!0)}f.suppressDeprecationWarnings=!1,f.deprecationHandler=null;function J(j){return typeof Function!=="undefined"&&j instanceof Function||Object.prototype.toString.call(j)==="[object Function]"}function U(j){var n,t;for(t in j)u(j,t)&&(n=j[t],J(n)?this[t]=n:this["_"+t]=n);this._config=j,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function K(j,n){var t=I({},j),y;for(y in n)u(n,y)&&(q(j[y])&&q(n[y])?(t[y]={},I(t[y],j[y]),I(t[y],n[y])):n[y]!=null?t[y]=n[y]:delete t[y]);for(y in j)u(j,y)&&!u(n,y)&&q(j[y])&&(t[y]=I({},t[y]));return t}function ca(j){j!=null&&this.set(j)}var ba;Object.keys?ba=Object.keys:ba=function(j){var n,t=[];for(n in j)u(j,n)&&t.push(n);return t};var Ba={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function $(j,n,t){var y=this._calendar[j]||this._calendar.sameElse;return J(y)?y.call(n,t):y}function va(j,n,t){var y=""+Math.abs(j),C=n-y.length,V=j>=0;return(V?t?"+":"":"-")+Math.pow(10,Math.max(0,C)).toString().substr(1)+y}var pa=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,da=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ma={},xa={};function ka(j,n,t,y){var C=y;typeof y==="string"&&(C=function(){return this[y]()}),j&&(xa[j]=C),n&&(xa[n[0]]=function(){return va(C.apply(this,arguments),n[1],n[2])}),t&&(xa[t]=function(){return this.localeData().ordinal(C.apply(this,arguments),j)})}function db(j){return j.match(/\[[\s\S]/)?j.replace(/^\[|\]$/g,""):j.replace(/\\/g,"")}function fb(j){var n=j.match(pa),t,y;for(t=0,y=n.length;t<y;t++)xa[n[t]]?n[t]=xa[n[t]]:n[t]=db(n[t]);return function(C){var V="",ea;for(ea=0;ea<y;ea++)V+=J(n[ea])?n[ea].call(C,j):n[ea];return V}}function gb(j,n){return j.isValid()?(n=Ca(n,j.localeData()),ma[n]=ma[n]||fb(n),ma[n](j)):j.localeData().invalidDate()}function Ca(j,n){var t=5;function y(C){return n.longDateFormat(C)||C}for(da.lastIndex=0;t>=0&&da.test(j);)j=j.replace(da,y),da.lastIndex=0,t-=1;return j}var Ia={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Ya(j){var n=this._longDateFormat[j],t=this._longDateFormat[j.toUpperCase()];return n||!t?n:(this._longDateFormat[j]=t.match(pa).map(function(y){return y==="MMMM"||y==="MM"||y==="DD"||y==="dddd"?y.slice(1):y}).join(""),this._longDateFormat[j])}var eb="Invalid date";function na(){return this._invalidDate}var ya="%d",La=/\d{1,2}/;function sa(j){return this._ordinal.replace("%d",j)}var Ea={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function bb(j,n,t,y){var C=this._relativeTime[t];return J(C)?C(j,n,t,y):C.replace(/%d/i,j)}function Da(j,n){var t=this._relativeTime[j>0?"future":"past"];return J(t)?t(n):t.replace(/%s/i,n)}var Sa={};function Ja(j,n){var t=j.toLowerCase();Sa[t]=Sa[t+"s"]=Sa[n]=j}function Va(j){return typeof j==="string"?Sa[j]||Sa[j.toLowerCase()]:void 0}function ib(j){var n={},t,y;for(y in j)u(j,y)&&(t=Va(y),t&&(n[t]=j[y]));return n}var tb={};function nb(j,n){tb[j]=n}function qa(j){var n=[],t;for(t in j)u(j,t)&&n.push({unit:t,priority:tb[t]});return n.sort(function(y,C){return y.priority-C.priority}),n}function Za(j){return j%4===0&&j%100!==0||j%400===0}function X(j){return j<0?Math.ceil(j)||0:Math.floor(j)}function L(j){var n=+j,t=0;return n!==0&&isFinite(n)&&(t=X(n)),t}function Z(j,n){return function(t){return t!=null?(S(this,j,t),f.updateOffset(this,n),this):aa(this,j)}}function aa(j,n){return j.isValid()?j._d["get"+(j._isUTC?"UTC":"")+n]():NaN}function S(j,n,t){j.isValid()&&!isNaN(t)&&(n==="FullYear"&&Za(j.year())&&j.month()===1&&j.date()===29?(t=L(t),j._d["set"+(j._isUTC?"UTC":"")+n](t,j.month(),Ye(t,j.month()))):j._d["set"+(j._isUTC?"UTC":"")+n](t))}function za(j){return j=Va(j),J(this[j])?this[j]():this}function Ra(j,n){if(typeof j==="object"){j=ib(j);var t=qa(j),y;for(y=0;y<t.length;y++)this[t[y].unit](j[t[y].unit])}else{j=Va(j);if(J(this[j]))return this[j](n)}return this}var ob=/\d/,Ta=/\d\d/,kb=/\d{3}/,Mb=/\d{4}/,Db=/[+-]?\d{6}/,Ka=/\d\d?/,td=/\d\d\d\d?/,Pf=/\d\d\d\d\d\d?/,Qf=/\d{1,3}/,B=/\d{1,4}/,Rf=/[+-]?\d{1,6}/,ae=/\d+/,Sf=/[+-]?\d+/,fo=/Z|[+-]\d\d:?\d\d/gi,Tf=/Z|[+-]\d\d(?::?\d\d)?/gi,go=/[+-]?\d+(\.\d{1,3})?/,ud=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,cc;cc={};function ta(j,n,t){cc[j]=J(n)?n:function(y,C){return y&&t?t:n}}function lh(j,n){return u(cc,j)?cc[j](n._strict,n._locale):new RegExp(mh(j))}function mh(j){return Ib(j.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(n,t,y,C,V){return t||y||C||V}))}function Ib(j){return j.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Uf={};function jb(j,n){var t,y=n;for(typeof j==="string"&&(j=[j]),E(n)&&(y=function(C,V){V[n]=L(C)}),t=0;t<j.length;t++)Uf[j[t]]=y}function be(j,n){jb(j,function(t,y,C,V){C._w=C._w||{},n(t,C._w,C,V)})}function nh(j,n,t){n!=null&&u(Uf,j)&&Uf[j](n,t._a,t,j)}var lb=0,Jb=1,oc=2,Eb=3,pc=4,Mc=5,cd=6,Rj=7,ho=8;function io(j,n){return(j%n+n)%n}var ub;Array.prototype.indexOf?ub=Array.prototype.indexOf:ub=function(j){var n;for(n=0;n<this.length;++n)if(this[n]===j)return n;return-1};function Ye(j,n){if(isNaN(j)||isNaN(n))return NaN;var t=io(n,12);return j+=(n-t)/12,t===1?Za(j)?29:28:31-t%7%2}ka("M",["MM",2],"Mo",function(){return this.month()+1}),ka("MMM",0,0,function(j){return this.localeData().monthsShort(this,j)}),ka("MMMM",0,0,function(j){return this.localeData().months(this,j)}),Ja("month","M"),nb("month",8),ta("M",Ka),ta("MM",Ka,Ta),ta("MMM",function(j,n){return n.monthsShortRegex(j)}),ta("MMMM",function(j,n){return n.monthsRegex(j)}),jb(["M","MM"],function(j,n){n[Jb]=L(j)-1}),jb(["MMM","MMMM"],function(j,n,t,y){var C=t._locale.monthsParse(j,y,t._strict);C!=null?n[Jb]=C:_(t).invalidMonth=j});var jo="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Sj="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),oh=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Vf=ud,Tj=ud;function Uj(j,n){return j?l(this._months)?this._months[j.month()]:this._months[(this._months.isFormat||oh).test(n)?"format":"standalone"][j.month()]:l(this._months)?this._months:this._months.standalone}function ko(j,n){return j?l(this._monthsShort)?this._monthsShort[j.month()]:this._monthsShort[oh.test(n)?"format":"standalone"][j.month()]:l(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function lo(j,n,t){var y,C,V,ea=j.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],y=0;y<12;++y)V=Q([2e3,y]),this._shortMonthsParse[y]=this.monthsShort(V,"").toLocaleLowerCase(),this._longMonthsParse[y]=this.months(V,"").toLocaleLowerCase();return t?n==="MMM"?(C=ub.call(this._shortMonthsParse,ea),C!==-1?C:null):(C=ub.call(this._longMonthsParse,ea),C!==-1?C:null):n==="MMM"?(C=ub.call(this._shortMonthsParse,ea),C!==-1?C:(C=ub.call(this._longMonthsParse,ea),C!==-1?C:null)):(C=ub.call(this._longMonthsParse,ea),C!==-1?C:(C=ub.call(this._shortMonthsParse,ea),C!==-1?C:null))}function mo(j,n,t){var y,C,V;if(this._monthsParseExact)return lo.call(this,j,n,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),y=0;y<12;y++){C=Q([2e3,y]),t&&!this._longMonthsParse[y]&&(this._longMonthsParse[y]=new RegExp("^"+this.months(C,"").replace(".","")+"$","i"),this._shortMonthsParse[y]=new RegExp("^"+this.monthsShort(C,"").replace(".","")+"$","i")),!t&&!this._monthsParse[y]&&(V="^"+this.months(C,"")+"|^"+this.monthsShort(C,""),this._monthsParse[y]=new RegExp(V.replace(".",""),"i"));if(t&&n==="MMMM"&&this._longMonthsParse[y].test(j))return y;{if(t&&n==="MMM"&&this._shortMonthsParse[y].test(j))return y;if(!t&&this._monthsParse[y].test(j))return y}}}function ce(j,n){var t;if(!j.isValid())return j;if(typeof n==="string")if(/^\d+$/.test(n))n=L(n);else{n=j.localeData().monthsParse(n);if(!E(n))return j}return t=Math.min(j.date(),Ye(j.year(),n)),j._d["set"+(j._isUTC?"UTC":"")+"Month"](n,t),j}function Vj(j){return j!=null?(ce(this,j),f.updateOffset(this,!0),this):aa(this,"Month")}function Wb(){return Ye(this.year(),this.month())}function no(j){return this._monthsParseExact?(u(this,"_monthsRegex")||Wj.call(this),j?this._monthsShortStrictRegex:this._monthsShortRegex):(u(this,"_monthsShortRegex")||(this._monthsShortRegex=Vf),this._monthsShortStrictRegex&&j?this._monthsShortStrictRegex:this._monthsShortRegex)}function oo(j){return this._monthsParseExact?(u(this,"_monthsRegex")||Wj.call(this),j?this._monthsStrictRegex:this._monthsRegex):(u(this,"_monthsRegex")||(this._monthsRegex=Tj),this._monthsStrictRegex&&j?this._monthsStrictRegex:this._monthsRegex)}function Wj(){function j(ea,Fa){return Fa.length-ea.length}var n=[],t=[],y=[],C,V;for(C=0;C<12;C++)V=Q([2e3,C]),n.push(this.monthsShort(V,"")),t.push(this.months(V,"")),y.push(this.months(V,"")),y.push(this.monthsShort(V,""));for(n.sort(j),t.sort(j),y.sort(j),C=0;C<12;C++)n[C]=Ib(n[C]),t[C]=Ib(t[C]);for(C=0;C<24;C++)y[C]=Ib(y[C]);this._monthsRegex=new RegExp("^("+y.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}ka("Y",0,0,function(){var j=this.year();return j<=9999?va(j,4):"+"+j}),ka(0,["YY",2],0,function(){return this.year()%100}),ka(0,["YYYY",4],0,"year"),ka(0,["YYYYY",5],0,"year"),ka(0,["YYYYYY",6,!0],0,"year"),Ja("year","y"),nb("year",1),ta("Y",Sf),ta("YY",Ka,Ta),ta("YYYY",B,Mb),ta("YYYYY",Rf,Db),ta("YYYYYY",Rf,Db),jb(["YYYYY","YYYYYY"],lb),jb("YYYY",function(j,n){n[lb]=j.length===2?f.parseTwoDigitYear(j):L(j)}),jb("YY",function(j,n){n[lb]=f.parseTwoDigitYear(j)}),jb("Y",function(j,n){n[lb]=parseInt(j,10)});function Ze(j){return Za(j)?366:365}f.parseTwoDigitYear=function(j){return L(j)+(L(j)>68?1900:2e3)};var de=Z("FullYear",!0);function ee(){return Za(this.year())}function po(j,n,t,y,C,V,ea){var Fa;return j<100&&j>=0?(Fa=new Date(j+400,n,t,y,C,V,ea),isFinite(Fa.getFullYear())&&Fa.setFullYear(j)):Fa=new Date(j,n,t,y,C,V,ea),Fa}function _e(j){var n,t;return j<100&&j>=0?(t=Array.prototype.slice.call(arguments),t[0]=j+400,n=new Date(Date.UTC.apply(null,t)),isFinite(n.getUTCFullYear())&&n.setUTCFullYear(j)):n=new Date(Date.UTC.apply(null,arguments)),n}function Wf(j,n,t){var y=7+n-t,C=(7+_e(j,0,y).getUTCDay()-n)%7;return-C+y-1}function ph(j,n,t,y,C){var V=(7+t-y)%7,ea=Wf(j,y,C),Fa=1+7*(n-1)+V+ea,Ua,qb;return Fa<=0?(Ua=j-1,qb=Ze(Ua)+Fa):Fa>Ze(j)?(Ua=j+1,qb=Fa-Ze(j)):(Ua=j,qb=Fa),{year:Ua,dayOfYear:qb}}function vd(j,n,t){var y=Wf(j.year(),n,t),C=Math.floor((j.dayOfYear()-y-1)/7)+1,V,ea;return C<1?(ea=j.year()-1,V=C+Nc(ea,n,t)):C>Nc(j.year(),n,t)?(V=C-Nc(j.year(),n,t),ea=j.year()+1):(ea=j.year(),V=C),{week:V,year:ea}}function Nc(j,n,t){var y=Wf(j,n,t),C=Wf(j+1,n,t);return(Ze(j)-y+C)/7}ka("w",["ww",2],"wo","week"),ka("W",["WW",2],"Wo","isoWeek"),Ja("week","w"),Ja("isoWeek","W"),nb("week",5),nb("isoWeek",5),ta("w",Ka),ta("ww",Ka,Ta),ta("W",Ka),ta("WW",Ka,Ta),be(["w","ww","W","WW"],function(j,n,t,y){n[y.substr(0,1)]=L(j)});function qo(j){return vd(j,this._week.dow,this._week.doy).week}var Xf={dow:0,doy:6};function wd(){return this._week.dow}function Oc(){return this._week.doy}function xd(j){var n=this.localeData().week(this);return j==null?n:this.add((j-n)*7,"d")}function Xj(j){var n=vd(this,1,4).week;return j==null?n:this.add((j-n)*7,"d")}ka("d",0,"do","day"),ka("dd",0,0,function(j){return this.localeData().weekdaysMin(this,j)}),ka("ddd",0,0,function(j){return this.localeData().weekdaysShort(this,j)}),ka("dddd",0,0,function(j){return this.localeData().weekdays(this,j)}),ka("e",0,0,"weekday"),ka("E",0,0,"isoWeekday"),Ja("day","d"),Ja("weekday","e"),Ja("isoWeekday","E"),nb("day",11),nb("weekday",11),nb("isoWeekday",11),ta("d",Ka),ta("e",Ka),ta("E",Ka),ta("dd",function(j,n){return n.weekdaysMinRegex(j)}),ta("ddd",function(j,n){return n.weekdaysShortRegex(j)}),ta("dddd",function(j,n){return n.weekdaysRegex(j)}),be(["dd","ddd","dddd"],function(j,n,t,y){var C=t._locale.weekdaysParse(j,y,t._strict);C!=null?n.d=C:_(t).invalidWeekday=j}),be(["d","e","E"],function(j,n,t,y){n[y]=L(j)});function ro(j,n){return typeof j!=="string"?j:isNaN(j)?(j=n.weekdaysParse(j),typeof j==="number"?j:null):parseInt(j,10)}function Pc(j,n){return typeof j==="string"?n.weekdaysParse(j)%7||7:isNaN(j)?null:j}function qh(j,n){return j.slice(n,7).concat(j.slice(0,n))}var rh="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),sh="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),so="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),to=ud,Yj=ud,uo=ud;function vo(j,n){var t=l(this._weekdays)?this._weekdays:this._weekdays[j&&j!==!0&&this._weekdays.isFormat.test(n)?"format":"standalone"];return j===!0?qh(t,this._week.dow):j?t[j.day()]:t}function wo(j){return j===!0?qh(this._weekdaysShort,this._week.dow):j?this._weekdaysShort[j.day()]:this._weekdaysShort}function yd(j){return j===!0?qh(this._weekdaysMin,this._week.dow):j?this._weekdaysMin[j.day()]:this._weekdaysMin}function xo(j,n,t){var y,C,V,ea=j.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],y=0;y<7;++y)V=Q([2e3,1]).day(y),this._minWeekdaysParse[y]=this.weekdaysMin(V,"").toLocaleLowerCase(),this._shortWeekdaysParse[y]=this.weekdaysShort(V,"").toLocaleLowerCase(),this._weekdaysParse[y]=this.weekdays(V,"").toLocaleLowerCase();return t?n==="dddd"?(C=ub.call(this._weekdaysParse,ea),C!==-1?C:null):n==="ddd"?(C=ub.call(this._shortWeekdaysParse,ea),C!==-1?C:null):(C=ub.call(this._minWeekdaysParse,ea),C!==-1?C:null):n==="dddd"?(C=ub.call(this._weekdaysParse,ea),C!==-1?C:(C=ub.call(this._shortWeekdaysParse,ea),C!==-1?C:(C=ub.call(this._minWeekdaysParse,ea),C!==-1?C:null))):n==="ddd"?(C=ub.call(this._shortWeekdaysParse,ea),C!==-1?C:(C=ub.call(this._weekdaysParse,ea),C!==-1?C:(C=ub.call(this._minWeekdaysParse,ea),C!==-1?C:null))):(C=ub.call(this._minWeekdaysParse,ea),C!==-1?C:(C=ub.call(this._weekdaysParse,ea),C!==-1?C:(C=ub.call(this._shortWeekdaysParse,ea),C!==-1?C:null)))}function yo(j,n,t){var y,C,V;if(this._weekdaysParseExact)return xo.call(this,j,n,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),y=0;y<7;y++){C=Q([2e3,1]).day(y),t&&!this._fullWeekdaysParse[y]&&(this._fullWeekdaysParse[y]=new RegExp("^"+this.weekdays(C,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[y]=new RegExp("^"+this.weekdaysShort(C,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[y]=new RegExp("^"+this.weekdaysMin(C,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[y]||(V="^"+this.weekdays(C,"")+"|^"+this.weekdaysShort(C,"")+"|^"+this.weekdaysMin(C,""),this._weekdaysParse[y]=new RegExp(V.replace(".",""),"i"));if(t&&n==="dddd"&&this._fullWeekdaysParse[y].test(j))return y;{if(t&&n==="ddd"&&this._shortWeekdaysParse[y].test(j))return y;{if(t&&n==="dd"&&this._minWeekdaysParse[y].test(j))return y;if(!t&&this._weekdaysParse[y].test(j))return y}}}}function Zj(j){if(!this.isValid())return j!=null?this:NaN;var n=this._isUTC?this._d.getUTCDay():this._d.getDay();return j!=null?(j=ro(j,this.localeData()),this.add(j-n,"d")):n}function zd(j){if(!this.isValid())return j!=null?this:NaN;var n=(this.day()+7-this.localeData()._week.dow)%7;return j==null?n:this.add(j-n,"d")}function $e(j){if(!this.isValid())return j!=null?this:NaN;if(j!=null){var n=Pc(j,this.localeData());return this.day(this.day()%7?n:n-7)}else return this.day()||7}function th(j){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||af.call(this),j?this._weekdaysStrictRegex:this._weekdaysRegex):(u(this,"_weekdaysRegex")||(this._weekdaysRegex=to),this._weekdaysStrictRegex&&j?this._weekdaysStrictRegex:this._weekdaysRegex)}function uh(j){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||af.call(this),j?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(u(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Yj),this._weekdaysShortStrictRegex&&j?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function vh(j){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||af.call(this),j?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(u(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=uo),this._weekdaysMinStrictRegex&&j?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function af(){function j(jd,Id){return Id.length-jd.length}var n=[],t=[],y=[],C=[],V,ea,Fa,Ua,qb;for(V=0;V<7;V++)ea=Q([2e3,1]).day(V),Fa=Ib(this.weekdaysMin(ea,"")),Ua=Ib(this.weekdaysShort(ea,"")),qb=Ib(this.weekdays(ea,"")),n.push(Fa),t.push(Ua),y.push(qb),C.push(Fa),C.push(Ua),C.push(qb);n.sort(j),t.sort(j),y.sort(j),C.sort(j),this._weekdaysRegex=new RegExp("^("+C.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+y.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+n.join("|")+")","i")}function dd(){return this.hours()%12||12}function wh(){return this.hours()||24}ka("H",["HH",2],0,"hour"),ka("h",["hh",2],0,dd),ka("k",["kk",2],0,wh),ka("hmm",0,0,function(){return""+dd.apply(this)+va(this.minutes(),2)}),ka("hmmss",0,0,function(){return""+dd.apply(this)+va(this.minutes(),2)+va(this.seconds(),2)}),ka("Hmm",0,0,function(){return""+this.hours()+va(this.minutes(),2)}),ka("Hmmss",0,0,function(){return""+this.hours()+va(this.minutes(),2)+va(this.seconds(),2)});function fe(j,n){ka(j,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),n)})}fe("a",!0),fe("A",!1),Ja("hour","h"),nb("hour",13);function bf(j,n){return n._meridiemParse}ta("a",bf),ta("A",bf),ta("H",Ka),ta("h",Ka),ta("k",Ka),ta("HH",Ka,Ta),ta("hh",Ka,Ta),ta("kk",Ka,Ta),ta("hmm",td),ta("hmmss",Pf),ta("Hmm",td),ta("Hmmss",Pf),jb(["H","HH"],Eb),jb(["k","kk"],function(j,n,t){var y=L(j);n[Eb]=y===24?0:y}),jb(["a","A"],function(j,n,t){t._isPm=t._locale.isPM(j),t._meridiem=j}),jb(["h","hh"],function(j,n,t){n[Eb]=L(j),_(t).bigHour=!0}),jb("hmm",function(j,n,t){var y=j.length-2;n[Eb]=L(j.substr(0,y)),n[pc]=L(j.substr(y)),_(t).bigHour=!0}),jb("hmmss",function(j,n,t){var y=j.length-4,C=j.length-2;n[Eb]=L(j.substr(0,y)),n[pc]=L(j.substr(y,2)),n[Mc]=L(j.substr(C)),_(t).bigHour=!0}),jb("Hmm",function(j,n,t){var y=j.length-2;n[Eb]=L(j.substr(0,y)),n[pc]=L(j.substr(y))}),jb("Hmmss",function(j,n,t){var y=j.length-4,C=j.length-2;n[Eb]=L(j.substr(0,y)),n[pc]=L(j.substr(y,2)),n[Mc]=L(j.substr(C))});function zo(j){return(j+"").toLowerCase().charAt(0)==="p"}var Ao=/[ap]\.?m?\.?/i,Bo=Z("Hours",!0);function _j(j,n,t){return j>11?t?"pm":"PM":t?"am":"AM"}var $j={calendar:Ba,longDateFormat:Ia,invalidDate:eb,ordinal:ya,dayOfMonthOrdinalParse:La,relativeTime:Ea,months:jo,monthsShort:Sj,week:Xf,weekdays:rh,weekdaysMin:so,weekdaysShort:sh,meridiemParse:Ao},pb={},cf={},ed;function ak(j,n){var t,y=Math.min(j.length,n.length);for(t=0;t<y;t+=1)if(j[t]!==n[t])return t;return y}function dc(j){return j?j.toLowerCase().replace("_","-"):j}function Co(j){for(var n=0,t,y,C,V;n<j.length;){for(V=dc(j[n]).split("-"),t=V.length,y=dc(j[n+1]),y=y?y.split("-"):null;t>0;){C=Yf(V.slice(0,t).join("-"));if(C)return C;if(y&&y.length>=t&&ak(V,y)>=t-1)break;t--}n++}return ed}function Yf(j){var n=null,t;if(pb[j]===void 0&&typeof b!=="undefined"&&b&&b.exports)try{n=ed._abbr,t=require,t("./locale/"+j),fd(n)}catch(y){pb[j]=null}return pb[j]}function fd(j,n){var t;return j&&(A(n)?t=qc(j):t=xh(j,n),t?ed=t:typeof console!=="undefined"&&console.warn&&console.warn("Locale "+j+" not found. Did you forget to load it?")),ed._abbr}function xh(j,n){if(n!==null){var t,y=$j;n.abbr=j;if(pb[j]!=null)F("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),y=pb[j]._config;else if(n.parentLocale!=null)if(pb[n.parentLocale]!=null)y=pb[n.parentLocale]._config;else{t=Yf(n.parentLocale);if(t!=null)y=t._config;else return cf[n.parentLocale]||(cf[n.parentLocale]=[]),cf[n.parentLocale].push({name:j,config:n}),null}return pb[j]=new ca(K(y,n)),cf[j]&&cf[j].forEach(function(C){xh(C.name,C.config)}),fd(j),pb[j]}else return delete pb[j],null}function Sb(j,n){if(n!=null){var t,y,C=$j;pb[j]!=null&&pb[j].parentLocale!=null?pb[j].set(K(pb[j]._config,n)):(y=Yf(j),y!=null&&(C=y._config),n=K(C,n),y==null&&(n.abbr=j),t=new ca(n),t.parentLocale=pb[j],pb[j]=t),fd(j)}else pb[j]!=null&&(pb[j].parentLocale!=null?(pb[j]=pb[j].parentLocale,j===fd()&&fd(j)):pb[j]!=null&&delete pb[j]);return pb[j]}function qc(j){var n;j&&j._locale&&j._locale._abbr&&(j=j._locale._abbr);if(!j)return ed;if(!l(j)){n=Yf(j);if(n)return n;j=[j]}return Co(j)}function yh(){return ba(pb)}function Zf(j){var n,t=j._a;return t&&_(j).overflow===-2&&(n=t[Jb]<0||t[Jb]>11?Jb:t[oc]<1||t[oc]>Ye(t[lb],t[Jb])?oc:t[Eb]<0||t[Eb]>24||t[Eb]===24&&(t[pc]!==0||t[Mc]!==0||t[cd]!==0)?Eb:t[pc]<0||t[pc]>59?pc:t[Mc]<0||t[Mc]>59?Mc:t[cd]<0||t[cd]>999?cd:-1,_(j)._overflowDayOfYear&&(n<lb||n>oc)&&(n=oc),_(j)._overflowWeeks&&n===-1&&(n=Rj),_(j)._overflowWeekday&&n===-1&&(n=ho),_(j).overflow=n),j}var Do=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bk=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Eo=/Z|[+-]\d\d(?::?\d\d)?/,df=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],zh=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Fo=/^\/?Date\((-?\d+)/i,ck=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ef={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function _f(j){var n,t,y=j._i,C=Do.exec(y)||bk.exec(y),V,ea,Fa,Ua;if(C){for(_(j).iso=!0,n=0,t=df.length;n<t;n++)if(df[n][1].exec(C[1])){ea=df[n][0],V=df[n][2]!==!1;break}if(ea==null){j._isValid=!1;return}if(C[3]){for(n=0,t=zh.length;n<t;n++)if(zh[n][1].exec(C[3])){Fa=(C[2]||" ")+zh[n][0];break}if(Fa==null){j._isValid=!1;return}}if(!V&&Fa!=null){j._isValid=!1;return}if(C[4])if(Eo.exec(C[4]))Ua="Z";else{j._isValid=!1;return}j._f=ea+(Fa||"")+(Ua||""),Ch(j)}else j._isValid=!1}function Ah(j,n,t,y,C,V){var ea=[Go(j),Sj.indexOf(n),parseInt(t,10),parseInt(y,10),parseInt(C,10)];return V&&ea.push(parseInt(V,10)),ea}function Go(j){var n=parseInt(j,10);return n<=49?2e3+n:n<=999?1900+n:n}function Ho(j){return j.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function ff(j,n,t){if(j){var y=sh.indexOf(j),C=new Date(n[0],n[1],n[2]).getDay();if(y!==C)return _(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function Io(j,n,t){if(j)return ef[j];{if(n)return 0;{var y=parseInt(t,10),C=y%100,V=(y-C)/100;return V*60+C}}}function dk(j){var n=ck.exec(Ho(j._i)),t;if(n){t=Ah(n[4],n[3],n[2],n[5],n[6],n[7]);if(!ff(n[1],t,j))return;j._a=t,j._tzm=Io(n[8],n[9],n[10]),j._d=_e.apply(null,j._a),j._d.setUTCMinutes(j._d.getUTCMinutes()-j._tzm),_(j).rfc2822=!0}else j._isValid=!1}function Jo(j){var n=Fo.exec(j._i);if(n!==null){j._d=new Date(+n[1]);return}_f(j);if(j._isValid===!1)delete j._isValid;else return;dk(j);if(j._isValid===!1)delete j._isValid;else return;j._strict?j._isValid=!1:f.createFromInputFallback(j)}f.createFromInputFallback=x("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(j){j._d=new Date(j._i+(j._useUTC?" UTC":""))});function ge(j,n,t){return j!=null?j:n!=null?n:t}function Ko(j){var n=new Date(f.now());return j._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function Bh(j){var n,t,y=[],C,V,ea;if(j._d)return;for(C=Ko(j),j._w&&j._a[oc]==null&&j._a[Jb]==null&&ek(j),j._dayOfYear!=null&&(ea=ge(j._a[lb],C[lb]),(j._dayOfYear>Ze(ea)||j._dayOfYear===0)&&(_(j)._overflowDayOfYear=!0),t=_e(ea,0,j._dayOfYear),j._a[Jb]=t.getUTCMonth(),j._a[oc]=t.getUTCDate()),n=0;n<3&&j._a[n]==null;++n)j._a[n]=y[n]=C[n];for(;n<7;n++)j._a[n]=y[n]=j._a[n]==null?n===2?1:0:j._a[n];j._a[Eb]===24&&j._a[pc]===0&&j._a[Mc]===0&&j._a[cd]===0&&(j._nextDay=!0,j._a[Eb]=0),j._d=(j._useUTC?_e:po).apply(null,y),V=j._useUTC?j._d.getUTCDay():j._d.getDay(),j._tzm!=null&&j._d.setUTCMinutes(j._d.getUTCMinutes()-j._tzm),j._nextDay&&(j._a[Eb]=24),j._w&&typeof j._w.d!=="undefined"&&j._w.d!==V&&(_(j).weekdayMismatch=!0)}function ek(j){var n,t,y,C,V,ea,Fa,Ua,qb;n=j._w,n.GG!=null||n.W!=null||n.E!=null?(V=1,ea=4,t=ge(n.GG,j._a[lb],vd(Wa(),1,4).year),y=ge(n.W,1),C=ge(n.E,1),(C<1||C>7)&&(Ua=!0)):(V=j._locale._week.dow,ea=j._locale._week.doy,qb=vd(Wa(),V,ea),t=ge(n.gg,j._a[lb],qb.year),y=ge(n.w,qb.week),n.d!=null?(C=n.d,(C<0||C>6)&&(Ua=!0)):n.e!=null?(C=n.e+V,(n.e<0||n.e>6)&&(Ua=!0)):C=V),y<1||y>Nc(t,V,ea)?_(j)._overflowWeeks=!0:Ua!=null?_(j)._overflowWeekday=!0:(Fa=ph(t,y,C,V,ea),j._a[lb]=Fa.year,j._dayOfYear=Fa.dayOfYear)}f.ISO_8601=function(){},f.RFC_2822=function(){};function Ch(j){if(j._f===f.ISO_8601){_f(j);return}if(j._f===f.RFC_2822){dk(j);return}j._a=[],_(j).empty=!0;var n=""+j._i,t,y,C,V,ea,Fa=n.length,Ua=0,qb;for(C=Ca(j._f,j._locale).match(pa)||[],t=0;t<C.length;t++)V=C[t],y=(n.match(lh(V,j))||[])[0],y&&(ea=n.substr(0,n.indexOf(y)),ea.length>0&&_(j).unusedInput.push(ea),n=n.slice(n.indexOf(y)+y.length),Ua+=y.length),xa[V]?(y?_(j).empty=!1:_(j).unusedTokens.push(V),nh(V,y,j)):j._strict&&!y&&_(j).unusedTokens.push(V);_(j).charsLeftOver=Fa-Ua,n.length>0&&_(j).unusedInput.push(n),j._a[Eb]<=12&&_(j).bigHour===!0&&j._a[Eb]>0&&(_(j).bigHour=void 0),_(j).parsedDateParts=j._a.slice(0),_(j).meridiem=j._meridiem,j._a[Eb]=he(j._locale,j._a[Eb],j._meridiem),qb=_(j).era,qb!==null&&(j._a[lb]=j._locale.erasConvertYear(qb,j._a[lb])),Bh(j),Zf(j)}function he(j,n,t){var y;return t==null?n:j.meridiemHour!=null?j.meridiemHour(n,t):j.isPM!=null?(y=j.isPM(t),y&&n<12&&(n+=12),!y&&n===12&&(n=0),n):n}function mb(j){var n,t,y,C,V,ea,Fa=!1;if(j._f.length===0){_(j).invalidFormat=!0,j._d=new Date(NaN);return}for(C=0;C<j._f.length;C++)V=0,ea=!1,n=ua({},j),j._useUTC!=null&&(n._useUTC=j._useUTC),n._f=j._f[C],Ch(n),ha(n)&&(ea=!0),V+=_(n).charsLeftOver,V+=_(n).unusedTokens.length*10,_(n).score=V,Fa?V<y&&(y=V,t=n):(y==null||V<y||ea)&&(y=V,t=n,ea&&(Fa=!0));I(j,t||n)}function gf(j){if(j._d)return;var n=ib(j._i),t=n.day===void 0?n.date:n.day;j._a=O([n.year,n.month,t,n.hour,n.minute,n.second,n.millisecond],function(y){return y&&parseInt(y,10)}),Bh(j)}function Qc(j){var n=new la(Zf($f(j)));return n._nextDay&&(n.add(1,"d"),n._nextDay=void 0),n}function $f(j){var n=j._i,t=j._f;return j._locale=j._locale||qc(j._l),n===null||t===void 0&&n===""?oa({nullInput:!0}):(typeof n==="string"&&(j._i=n=j._locale.preparse(n)),N(n)?new la(Zf(n)):(H(n)?j._d=n:l(t)?mb(j):t?Ch(j):fk(j),ha(j)||(j._d=null),j))}function fk(j){var n=j._i;A(n)?j._d=new Date(f.now()):H(n)?j._d=new Date(n.valueOf()):typeof n==="string"?Jo(j):l(n)?(j._a=O(n.slice(0),function(t){return parseInt(t,10)}),Bh(j)):q(n)?gf(j):E(n)?j._d=new Date(n):f.createFromInputFallback(j)}function rc(j,n,t,y,C){var V={};return(n===!0||n===!1)&&(y=n,n=void 0),(t===!0||t===!1)&&(y=t,t=void 0),(q(j)&&v(j)||l(j)&&j.length===0)&&(j=void 0),V._isAMomentObject=!0,V._useUTC=V._isUTC=C,V._l=t,V._i=j,V._f=n,V._strict=y,Qc(V)}function Wa(j,n,t,y){return rc(j,n,t,y,!1)}var Lo=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var j=Wa.apply(null,arguments);return this.isValid()&&j.isValid()?j<this?this:j:oa()}),gk=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var j=Wa.apply(null,arguments);return this.isValid()&&j.isValid()?j>this?this:j:oa()});function hk(j,n){var t,y;n.length===1&&l(n[0])&&(n=n[0]);if(!n.length)return Wa();for(t=n[0],y=1;y<n.length;++y)(!n[y].isValid()||n[y][j](t))&&(t=n[y]);return t}function Mo(){var j=[].slice.call(arguments,0);return hk("isBefore",j)}function No(){var j=[].slice.call(arguments,0);return hk("isAfter",j)}var ag=function(){return Date.now?Date.now():+new Date()},ie=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Oo(j){var n,t=!1,y;for(n in j)if(u(j,n)&&!(ub.call(ie,n)!==-1&&(j[n]==null||!isNaN(j[n]))))return!1;for(y=0;y<ie.length;++y)if(j[ie[y]]){if(t)return!1;parseFloat(j[ie[y]])!==L(j[ie[y]])&&(t=!0)}return!0}function Po(){return this._isValid}function Dh(){return sc(NaN)}function je(j){var n=ib(j),t=n.year||0,y=n.quarter||0,C=n.month||0,V=n.week||n.isoWeek||0,ea=n.day||0,Fa=n.hour||0,Ua=n.minute||0,qb=n.second||0,jd=n.millisecond||0;this._isValid=Oo(n),this._milliseconds=+jd+qb*1e3+Ua*6e4+Fa*1e3*60*60,this._days=+ea+V*7,this._months=+C+y*3+t*12,this._data={},this._locale=qc(),this._bubble()}function hf(j){return j instanceof je}function jf(j){return j<0?Math.round(-1*j)*-1:Math.round(j)}function Qo(j,n,t){var y=Math.min(j.length,n.length),C=Math.abs(j.length-n.length),V=0,ea;for(ea=0;ea<y;ea++)(t&&j[ea]!==n[ea]||!t&&L(j[ea])!==L(n[ea]))&&V++;return V+C}function ik(j,n){ka(j,0,0,function(){var t=this.utcOffset(),y="+";return t<0&&(t=-t,y="-"),y+va(~~(t/60),2)+n+va(~~t%60,2)})}ik("Z",":"),ik("ZZ",""),ta("Z",Tf),ta("ZZ",Tf),jb(["Z","ZZ"],function(j,n,t){t._useUTC=!0,t._tzm=bg(Tf,j)});var jk=/([\+\-]|\d\d)/gi;function bg(j,n){var t=(n||"").match(j),y,C,V;return t===null?null:(y=t[t.length-1]||[],C=(y+"").match(jk)||["-",0,0],V=+(C[1]*60)+L(C[2]),V===0?0:C[0]==="+"?V:-V)}function cg(j,n){var t,y;return n._isUTC?(t=n.clone(),y=(N(j)||H(j)?j.valueOf():Wa(j).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+y),f.updateOffset(t,!1),t):Wa(j).local()}function Dc(j){return-Math.round(j._d.getTimezoneOffset())}f.updateOffset=function(){};function Ma(j,n,t){var y=this._offset||0,C;if(!this.isValid())return j!=null?this:NaN;if(j!=null){if(typeof j==="string"){j=bg(Tf,j);if(j===null)return this}else Math.abs(j)<16&&!t&&(j=j*60);return!this._isUTC&&n&&(C=Dc(this)),this._offset=j,this._isUTC=!0,C!=null&&this.add(C,"m"),y!==j&&(!n||this._changeInProgress?eg(this,sc(j-y,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,f.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?y:Dc(this)}function Ro(j,n){return j!=null?(typeof j!=="string"&&(j=-j),this.utcOffset(j,n),this):-this.utcOffset()}function Ad(j){return this.utcOffset(0,j)}function dg(j){return this._isUTC&&(this.utcOffset(0,j),this._isUTC=!1,j&&this.subtract(Dc(this),"m")),this}function So(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i==="string"){var j=bg(fo,this._i);j!=null?this.utcOffset(j):this.utcOffset(0,!0)}return this}function Eh(j){return this.isValid()?(j=j?Wa(j).utcOffset():0,(this.utcOffset()-j)%60===0):!1}function kf(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Bd(){if(!A(this._isDSTShifted))return this._isDSTShifted;var j={},n;return ua(j,this),j=$f(j),j._a?(n=j._isUTC?Q(j._a):Wa(j._a),this._isDSTShifted=this.isValid()&&Qo(j._a,n.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function lf(){return this.isValid()?!this._isUTC:!1}function Cd(){return this.isValid()?this._isUTC:!1}function Dd(){return this.isValid()?this._isUTC&&this._offset===0:!1}var To=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Uo=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function sc(j,n){var t=j,y=null,C,V,ea;return hf(j)?t={ms:j._milliseconds,d:j._days,M:j._months}:E(j)||!isNaN(+j)?(t={},n?t[n]=+j:t.milliseconds=+j):(y=To.exec(j))?(C=y[1]==="-"?-1:1,t={y:0,d:L(y[oc])*C,h:L(y[Eb])*C,m:L(y[pc])*C,s:L(y[Mc])*C,ms:L(jf(y[cd]*1e3))*C}):(y=Uo.exec(j))?(C=y[1]==="-"?-1:1,t={y:Ed(y[2],C),M:Ed(y[3],C),w:Ed(y[4],C),d:Ed(y[5],C),h:Ed(y[6],C),m:Ed(y[7],C),s:Ed(y[8],C)}):t==null?t={}:typeof t==="object"&&("from"in t||"to"in t)&&(ea=Fh(Wa(t.from),Wa(t.to)),t={},t.ms=ea.milliseconds,t.M=ea.months),V=new je(t),hf(j)&&u(j,"_locale")&&(V._locale=j._locale),hf(j)&&u(j,"_isValid")&&(V._isValid=j._isValid),V}sc.fn=je.prototype,sc.invalid=Dh;function Ed(j,n){var t=j&&parseFloat(j.replace(",","."));return(isNaN(t)?0:t)*n}function ke(j,n){var t={};return t.months=n.month()-j.month()+(n.year()-j.year())*12,j.clone().add(t.months,"M").isAfter(n)&&--t.months,t.milliseconds=+n-+j.clone().add(t.months,"M"),t}function Fh(j,n){var t;return j.isValid()&&n.isValid()?(n=cg(n,j),j.isBefore(n)?t=ke(j,n):(t=ke(n,j),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function Gh(j,n){return function(t,y){var C,V;return y!==null&&!isNaN(+y)&&(F(n,"moment()."+n+"(period, number) is deprecated. Please use moment()."+n+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),V=t,t=y,y=V),C=sc(t,y),eg(this,C,j),this}}function eg(j,n,t,y){var C=n._milliseconds,V=jf(n._days),ea=jf(n._months);if(!j.isValid())return;y=y==null?!0:y,ea&&ce(j,aa(j,"Month")+ea*t),V&&S(j,"Date",aa(j,"Date")+V*t),C&&j._d.setTime(j._d.valueOf()+C*t),y&&f.updateOffset(j,V||ea)}var Hh=Gh(1,"add"),Vo=Gh(-1,"subtract");function kk(j){return typeof j==="string"||j instanceof String}function Wo(j){return N(j)||H(j)||kk(j)||E(j)||fg(j)||Xo(j)||j===null||j===void 0}function Xo(j){var n=q(j)&&!v(j),t=!1,y=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],C,V;for(C=0;C<y.length;C+=1)V=y[C],t=t||u(j,V);return n&&t}function fg(j){var n=l(j),t=!1;return n&&(t=j.filter(function(y){return!E(y)&&kk(j)}).length===0),n&&t}function Ih(j){var n=q(j)&&!v(j),t=!1,y=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],C,V;for(C=0;C<y.length;C+=1)V=y[C],t=t||u(j,V);return n&&t}function Xb(j,n){var t=j.diff(n,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function Jh(j,n){arguments.length===1&&(arguments[0]?Wo(arguments[0])?(j=arguments[0],n=void 0):Ih(arguments[0])&&(n=arguments[0],j=void 0):(j=void 0,n=void 0));var t=j||Wa(),y=cg(t,this).startOf("day"),C=f.calendarFormat(this,y)||"sameElse",V=n&&(J(n[C])?n[C].call(this,t):n[C]);return this.format(V||this.localeData().calendar(C,this,Wa(t)))}function Yo(){return new la(this)}function lk(j,n){var t=N(j)?j:Wa(j);return this.isValid()&&t.isValid()?(n=Va(n)||"millisecond",n==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(n).valueOf()):!1}function Zo(j,n){var t=N(j)?j:Wa(j);return this.isValid()&&t.isValid()?(n=Va(n)||"millisecond",n==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(n).valueOf()<t.valueOf()):!1}function _o(j,n,t,y){var C=N(j)?j:Wa(j),V=N(n)?n:Wa(n);return this.isValid()&&C.isValid()&&V.isValid()?(y=y||"()",(y[0]==="("?this.isAfter(C,t):!this.isBefore(C,t))&&(y[1]===")"?this.isBefore(V,t):!this.isAfter(V,t))):!1}function Fd(j,n){var t=N(j)?j:Wa(j),y;return this.isValid()&&t.isValid()?(n=Va(n)||"millisecond",n==="millisecond"?this.valueOf()===t.valueOf():(y=t.valueOf(),this.clone().startOf(n).valueOf()<=y&&y<=this.clone().endOf(n).valueOf())):!1}function $o(j,n){return this.isSame(j,n)||this.isAfter(j,n)}function gg(j,n){return this.isSame(j,n)||this.isBefore(j,n)}function ap(j,n,t){var y,C,V;if(!this.isValid())return NaN;y=cg(j,this);if(!y.isValid())return NaN;C=(y.utcOffset()-this.utcOffset())*6e4,n=Va(n);switch(n){case"year":V=hg(this,y)/12;break;case"month":V=hg(this,y);break;case"quarter":V=hg(this,y)/3;break;case"second":V=(this-y)/1e3;break;case"minute":V=(this-y)/6e4;break;case"hour":V=(this-y)/36e5;break;case"day":V=(this-y-C)/864e5;break;case"week":V=(this-y-C)/6048e5;break;default:V=this-y}return t?V:X(V)}function hg(j,n){if(j.date()<n.date())return-hg(n,j);var t=(n.year()-j.year())*12+(n.month()-j.month()),y=j.clone().add(t,"months"),C,V;return n-y<0?(C=j.clone().add(t-1,"months"),V=(n-y)/(y-C)):(C=j.clone().add(t+1,"months"),V=(n-y)/(C-y)),-(t+V)||0}f.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",f.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function bp(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function cp(j){if(!this.isValid())return null;var n=j!==!0,t=n?this.clone().utc():this;return t.year()<0||t.year()>9999?gb(t,n?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):J(Date.prototype.toISOString)?n?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",gb(t,"Z")):gb(t,n?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function dp(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var j="moment",n="",t,y,C,V;return this.isLocal()||(j=this.utcOffset()===0?"moment.utc":"moment.parseZone",n="Z"),t="["+j+'("]',y=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",C="-MM-DD[T]HH:mm:ss.SSS",V=n+'[")]',this.format(t+y+C+V)}function ep(j){j||(j=this.isUtc()?f.defaultFormatUtc:f.defaultFormat);var n=gb(this,j);return this.localeData().postformat(n)}function mk(j,n){return this.isValid()&&(N(j)&&j.isValid()||Wa(j).isValid())?sc({to:this,from:j}).locale(this.locale()).humanize(!n):this.localeData().invalidDate()}function fp(j){return this.from(Wa(),j)}function Kh(j,n){return this.isValid()&&(N(j)&&j.isValid()||Wa(j).isValid())?sc({from:this,to:j}).locale(this.locale()).humanize(!n):this.localeData().invalidDate()}function Yb(j){return this.to(Wa(),j)}function nk(j){var n;return j===void 0?this._locale._abbr:(n=qc(j),n!=null&&(this._locale=n),this)}var ok=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(j){return j===void 0?this.localeData():this.locale(j)});function mf(){return this._locale}var nf=1e3,le=60*nf,Gd=60*le,ig=(365*400+97)*24*Gd;function Hd(j,n){return(j%n+n)%n}function pk(j,n,t){return j<100&&j>=0?new Date(j+400,n,t)-ig:new Date(j,n,t).valueOf()}function jg(j,n,t){return j<100&&j>=0?Date.UTC(j+400,n,t)-ig:Date.UTC(j,n,t)}function gp(j){var n,t;j=Va(j);if(j===void 0||j==="millisecond"||!this.isValid())return this;t=this._isUTC?jg:pk;switch(j){case"year":n=t(this.year(),0,1);break;case"quarter":n=t(this.year(),this.month()-this.month()%3,1);break;case"month":n=t(this.year(),this.month(),1);break;case"week":n=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":n=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":n=t(this.year(),this.month(),this.date());break;case"hour":n=this._d.valueOf(),n-=Hd(n+(this._isUTC?0:this.utcOffset()*le),Gd);break;case"minute":n=this._d.valueOf(),n-=Hd(n,le);break;case"second":n=this._d.valueOf(),n-=Hd(n,nf);break}return this._d.setTime(n),f.updateOffset(this,!0),this}function qk(j){var n,t;j=Va(j);if(j===void 0||j==="millisecond"||!this.isValid())return this;t=this._isUTC?jg:pk;switch(j){case"year":n=t(this.year()+1,0,1)-1;break;case"quarter":n=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":n=t(this.year(),this.month()+1,1)-1;break;case"week":n=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":n=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":n=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":n=this._d.valueOf(),n+=Gd-Hd(n+(this._isUTC?0:this.utcOffset()*le),Gd)-1;break;case"minute":n=this._d.valueOf(),n+=le-Hd(n,le)-1;break;case"second":n=this._d.valueOf(),n+=nf-Hd(n,nf)-1;break}return this._d.setTime(n),f.updateOffset(this,!0),this}function hp(){return this._d.valueOf()-(this._offset||0)*6e4}function ip(){return Math.floor(this.valueOf()/1e3)}function jp(){return new Date(this.valueOf())}function kp(){var j=this;return[j.year(),j.month(),j.date(),j.hour(),j.minute(),j.second(),j.millisecond()]}function lp(){var j=this;return{years:j.year(),months:j.month(),date:j.date(),hours:j.hours(),minutes:j.minutes(),seconds:j.seconds(),milliseconds:j.milliseconds()}}function mp(){return this.isValid()?this.toISOString():null}function kg(){return ha(this)}function rk(){return I({},_(this))}function np(){return _(this).overflow}function Lh(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ka("N",0,0,"eraAbbr"),ka("NN",0,0,"eraAbbr"),ka("NNN",0,0,"eraAbbr"),ka("NNNN",0,0,"eraName"),ka("NNNNN",0,0,"eraNarrow"),ka("y",["y",1],"yo","eraYear"),ka("y",["yy",2],0,"eraYear"),ka("y",["yyy",3],0,"eraYear"),ka("y",["yyyy",4],0,"eraYear"),ta("N",Nh),ta("NN",Nh),ta("NNN",Nh),ta("NNNN",qp),ta("NNNNN",me),jb(["N","NN","NNN","NNNN","NNNNN"],function(j,n,t,y){var C=t._locale.erasParse(j,y,t._strict);C?_(t).era=C:_(t).invalidEra=j}),ta("y",ae),ta("yy",ae),ta("yyy",ae),ta("yyyy",ae),ta("yo",Oh),jb(["y","yy","yyy","yyyy"],lb),jb(["yo"],function(j,n,t,y){var C;t._locale._eraYearOrdinalRegex&&(C=j.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?n[lb]=t._locale.eraYearOrdinalParse(j,C):n[lb]=parseInt(j,10)});function sk(j,n){var t,y,C,V=this._eras||qc("en")._eras;for(t=0,y=V.length;t<y;++t){switch(typeof V[t].since){case"string":C=f(V[t].since).startOf("day"),V[t].since=C.valueOf();break}switch(typeof V[t].until){case"undefined":V[t].until=Infinity;break;case"string":C=f(V[t].until).startOf("day").valueOf(),V[t].until=C.valueOf();break}}return V}function op(j,n,t){var y,C,V=this.eras(),ea,Fa,Ua;for(j=j.toUpperCase(),y=0,C=V.length;y<C;++y){ea=V[y].name.toUpperCase(),Fa=V[y].abbr.toUpperCase(),Ua=V[y].narrow.toUpperCase();if(t)switch(n){case"N":case"NN":case"NNN":if(Fa===j)return V[y];break;case"NNNN":if(ea===j)return V[y];break;case"NNNNN":if(Ua===j)return V[y];break}else if([ea,Fa,Ua].indexOf(j)>=0)return V[y]}}function tk(j,n){var t=j.since<=j.until?1:-1;return n===void 0?f(j.since).year():f(j.since).year()+(n-j.offset)*t}function Mh(){var j,n,t,y=this.localeData().eras();for(j=0,n=y.length;j<n;++j){t=this.clone().startOf("day").valueOf();if(y[j].since<=t&&t<=y[j].until)return y[j].name;if(y[j].until<=t&&t<=y[j].since)return y[j].name}return""}function lg(){var j,n,t,y=this.localeData().eras();for(j=0,n=y.length;j<n;++j){t=this.clone().startOf("day").valueOf();if(y[j].since<=t&&t<=y[j].until)return y[j].narrow;if(y[j].until<=t&&t<=y[j].since)return y[j].narrow}return""}function Zb(){var j,n,t,y=this.localeData().eras();for(j=0,n=y.length;j<n;++j){t=this.clone().startOf("day").valueOf();if(y[j].since<=t&&t<=y[j].until)return y[j].abbr;if(y[j].until<=t&&t<=y[j].since)return y[j].abbr}return""}function uk(){var j,n,t,y,C=this.localeData().eras();for(j=0,n=C.length;j<n;++j){t=C[j].since<=C[j].until?1:-1,y=this.clone().startOf("day").valueOf();if(C[j].since<=y&&y<=C[j].until||C[j].until<=y&&y<=C[j].since)return(this.year()-f(C[j].since).year())*t+C[j].offset}return this.year()}function pp(j){return u(this,"_erasNameRegex")||Rc.call(this),j?this._erasNameRegex:this._erasRegex}function vk(j){return u(this,"_erasAbbrRegex")||Rc.call(this),j?this._erasAbbrRegex:this._erasRegex}function wk(j){return u(this,"_erasNarrowRegex")||Rc.call(this),j?this._erasNarrowRegex:this._erasRegex}function Nh(j,n){return n.erasAbbrRegex(j)}function qp(j,n){return n.erasNameRegex(j)}function me(j,n){return n.erasNarrowRegex(j)}function Oh(j,n){return n._eraYearOrdinalRegex||ae}function Rc(){var j=[],n=[],t=[],y=[],C,V,ea=this.eras();for(C=0,V=ea.length;C<V;++C)n.push(Ib(ea[C].name)),j.push(Ib(ea[C].abbr)),t.push(Ib(ea[C].narrow)),y.push(Ib(ea[C].name)),y.push(Ib(ea[C].abbr)),y.push(Ib(ea[C].narrow));this._erasRegex=new RegExp("^("+y.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+n.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+j.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}ka(0,["gg",2],0,function(){return this.weekYear()%100}),ka(0,["GG",2],0,function(){return this.isoWeekYear()%100});function of(j,n){ka(0,[j,j.length],0,n)}of("gggg","weekYear"),of("ggggg","weekYear"),of("GGGG","isoWeekYear"),of("GGGGG","isoWeekYear"),Ja("weekYear","gg"),Ja("isoWeekYear","GG"),nb("weekYear",1),nb("isoWeekYear",1),ta("G",Sf),ta("g",Sf),ta("GG",Ka,Ta),ta("gg",Ka,Ta),ta("GGGG",B,Mb),ta("gggg",B,Mb),ta("GGGGG",Rf,Db),ta("ggggg",Rf,Db),be(["gggg","ggggg","GGGG","GGGGG"],function(j,n,t,y){n[y.substr(0,2)]=L(j)}),be(["gg","GG"],function(j,n,t,y){n[y]=f.parseTwoDigitYear(j)});function rp(j){return yk.call(this,j,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function sp(j){return yk.call(this,j,this.isoWeek(),this.isoWeekday(),1,4)}function tp(){return Nc(this.year(),1,4)}function up(){return Nc(this.isoWeekYear(),1,4)}function vp(){var j=this.localeData()._week;return Nc(this.year(),j.dow,j.doy)}function xk(){var j=this.localeData()._week;return Nc(this.weekYear(),j.dow,j.doy)}function yk(j,n,t,y,C){var V;return j==null?vd(this,y,C).year:(V=Nc(j,y,C),n>V&&(n=V),zk.call(this,j,n,t,y,C))}function zk(j,n,t,y,C){var V=ph(j,n,t,y,C),ea=_e(V.year,0,V.dayOfYear);return this.year(ea.getUTCFullYear()),this.month(ea.getUTCMonth()),this.date(ea.getUTCDate()),this}ka("Q",0,"Qo","quarter"),Ja("quarter","Q"),nb("quarter",7),ta("Q",ob),jb("Q",function(j,n){n[Jb]=(L(j)-1)*3});function wp(j){return j==null?Math.ceil((this.month()+1)/3):this.month((j-1)*3+this.month()%3)}ka("D",["DD",2],"Do","date"),Ja("date","D"),nb("date",9),ta("D",Ka),ta("DD",Ka,Ta),ta("Do",function(j,n){return j?n._dayOfMonthOrdinalParse||n._ordinalParse:n._dayOfMonthOrdinalParseLenient}),jb(["D","DD"],oc),jb("Do",function(j,n){n[oc]=L(j.match(Ka)[0])});var Ak=Z("Date",!0);ka("DDD",["DDDD",3],"DDDo","dayOfYear"),Ja("dayOfYear","DDD"),nb("dayOfYear",4),ta("DDD",Qf),ta("DDDD",kb),jb(["DDD","DDDD"],function(j,n,t){t._dayOfYear=L(j)});function xp(j){var n=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return j==null?n:this.add(j-n,"d")}ka("m",["mm",2],0,"minute"),Ja("minute","m"),nb("minute",14),ta("m",Ka),ta("mm",Ka,Ta),jb(["m","mm"],pc);var yp=Z("Minutes",!1);ka("s",["ss",2],0,"second"),Ja("second","s"),nb("second",15),ta("s",Ka),ta("ss",Ka,Ta),jb(["s","ss"],Mc);var zp=Z("Seconds",!1);ka("S",0,0,function(){return~~(this.millisecond()/100)}),ka(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),ka(0,["SSS",3],0,"millisecond"),ka(0,["SSSS",4],0,function(){return this.millisecond()*10}),ka(0,["SSSSS",5],0,function(){return this.millisecond()*100}),ka(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),ka(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),ka(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),ka(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),Ja("millisecond","ms"),nb("millisecond",16),ta("S",Qf,ob),ta("SS",Qf,Ta),ta("SSS",Qf,kb);var gd,Bk;for(gd="SSSS";gd.length<=9;gd+="S")ta(gd,ae);function Ap(j,n){n[cd]=L(("0."+j)*1e3)}for(gd="S";gd.length<=9;gd+="S")jb(gd,Ap);Bk=Z("Milliseconds",!1),ka("z",0,0,"zoneAbbr"),ka("zz",0,0,"zoneName");function Bp(){return this._isUTC?"UTC":""}function Cp(){return this._isUTC?"Coordinated Universal Time":""}var ja=la.prototype;ja.add=Hh,ja.calendar=Jh,ja.clone=Yo,ja.diff=ap,ja.endOf=qk,ja.format=ep,ja.from=mk,ja.fromNow=fp,ja.to=Kh,ja.toNow=Yb,ja.get=za,ja.invalidAt=np,ja.isAfter=lk,ja.isBefore=Zo,ja.isBetween=_o,ja.isSame=Fd,ja.isSameOrAfter=$o,ja.isSameOrBefore=gg,ja.isValid=kg,ja.lang=ok,ja.locale=nk,ja.localeData=mf,ja.max=gk,ja.min=Lo,ja.parsingFlags=rk,ja.set=Ra,ja.startOf=gp,ja.subtract=Vo,ja.toArray=kp,ja.toObject=lp,ja.toDate=jp,ja.toISOString=cp,ja.inspect=dp,typeof Symbol!=="undefined"&&Symbol.for!=null&&(ja[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ja.toJSON=mp,ja.toString=bp,ja.unix=ip,ja.valueOf=hp,ja.creationData=Lh,ja.eraName=Mh,ja.eraNarrow=lg,ja.eraAbbr=Zb,ja.eraYear=uk,ja.year=de,ja.isLeapYear=ee,ja.weekYear=rp,ja.isoWeekYear=sp,ja.quarter=ja.quarters=wp,ja.month=Vj,ja.daysInMonth=Wb,ja.week=ja.weeks=xd,ja.isoWeek=ja.isoWeeks=Xj,ja.weeksInYear=vp,ja.weeksInWeekYear=xk,ja.isoWeeksInYear=tp,ja.isoWeeksInISOWeekYear=up,ja.date=Ak,ja.day=ja.days=Zj,ja.weekday=zd,ja.isoWeekday=$e,ja.dayOfYear=xp,ja.hour=ja.hours=Bo,ja.minute=ja.minutes=yp,ja.second=ja.seconds=zp,ja.millisecond=ja.milliseconds=Bk,ja.utcOffset=Ma,ja.utc=Ad,ja.local=dg,ja.parseZone=So,ja.hasAlignedHourOffset=Eh,ja.isDST=kf,ja.isLocal=lf,ja.isUtcOffset=Cd,ja.isUtc=Dd,ja.isUTC=Dd,ja.zoneAbbr=Bp,ja.zoneName=Cp,ja.dates=x("dates accessor is deprecated. Use date instead.",Ak),ja.months=x("months accessor is deprecated. Use month instead",Vj),ja.years=x("years accessor is deprecated. Use year instead",de),ja.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Ro),ja.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Bd);function Ck(j){return Wa(j*1e3)}function Dp(){return Wa.apply(null,arguments).parseZone()}function Dk(j){return j}var _a=ca.prototype;_a.calendar=$,_a.longDateFormat=Ya,_a.invalidDate=na,_a.ordinal=sa,_a.preparse=Dk,_a.postformat=Dk,_a.relativeTime=bb,_a.pastFuture=Da,_a.set=U,_a.eras=sk,_a.erasParse=op,_a.erasConvertYear=tk,_a.erasAbbrRegex=vk,_a.erasNameRegex=pp,_a.erasNarrowRegex=wk,_a.months=Uj,_a.monthsShort=ko,_a.monthsParse=mo,_a.monthsRegex=oo,_a.monthsShortRegex=no,_a.week=qo,_a.firstDayOfYear=Oc,_a.firstDayOfWeek=wd,_a.weekdays=vo,_a.weekdaysMin=yd,_a.weekdaysShort=wo,_a.weekdaysParse=yo,_a.weekdaysRegex=th,_a.weekdaysShortRegex=uh,_a.weekdaysMinRegex=vh,_a.isPM=zo,_a.meridiem=_j;function tc(j,n,t,y){var C=qc(),V=Q().set(y,n);return C[t](V,j)}function Sc(j,n,t){E(j)&&(n=j,j=void 0),j=j||"";if(n!=null)return tc(j,n,t,"month");var y,C=[];for(y=0;y<12;y++)C[y]=tc(j,y,t,"month");return C}function pf(j,n,t,y){typeof j==="boolean"?(E(n)&&(t=n,n=void 0),n=n||""):(n=j,t=n,j=!1,E(n)&&(t=n,n=void 0),n=n||"");var C=qc(),V=j?C._week.dow:0,ea,Fa=[];if(t!=null)return tc(n,(t+V)%7,y,"day");for(ea=0;ea<7;ea++)Fa[ea]=tc(n,(ea+V)%7,y,"day");return Fa}function Ek(j,n){return Sc(j,n,"months")}function Fk(j,n){return Sc(j,n,"monthsShort")}function Ep(j,n,t){return pf(j,n,t,"weekdays")}function Tc(j,n,t){return pf(j,n,t,"weekdaysShort")}function Gk(j,n,t){return pf(j,n,t,"weekdaysMin")}fd("en",{eras:[{since:"0001-01-01",until:Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(j){var n=j%10,t=L(j%100/10)===1?"th":n===1?"st":n===2?"nd":n===3?"rd":"th";return j+t}}),f.lang=x("moment.lang is deprecated. Use moment.locale instead.",fd),f.langData=x("moment.langData is deprecated. Use moment.localeData instead.",qc);var Ec=Math.abs;function Fp(){var j=this._data;return this._milliseconds=Ec(this._milliseconds),this._days=Ec(this._days),this._months=Ec(this._months),j.milliseconds=Ec(j.milliseconds),j.seconds=Ec(j.seconds),j.minutes=Ec(j.minutes),j.hours=Ec(j.hours),j.months=Ec(j.months),j.years=Ec(j.years),this}function Uc(j,n,t,y){var C=sc(n,t);return j._milliseconds+=y*C._milliseconds,j._days+=y*C._days,j._months+=y*C._months,j._bubble()}function Gp(j,n){return Uc(this,j,n,1)}function Hp(j,n){return Uc(this,j,n,-1)}function Hk(j){return j<0?Math.floor(j):Math.ceil(j)}function Ik(){var j=this._milliseconds,n=this._days,t=this._months,y=this._data,C,V,ea,Fa,Ua;return j>=0&&n>=0&&t>=0||j<=0&&n<=0&&t<=0||(j+=Hk(c(t)+n)*864e5,n=0,t=0),y.milliseconds=j%1e3,C=X(j/1e3),y.seconds=C%60,V=X(C/60),y.minutes=V%60,ea=X(V/60),y.hours=ea%24,n+=X(ea/24),Ua=X(Jk(n)),t+=Ua,n-=Hk(c(Ua)),Fa=X(t/12),t%=12,y.days=n,y.months=t,y.years=Fa,this}function Jk(j){return j*4800/146097}function c(j){return j*146097/4800}function e(j){if(!this.isValid())return NaN;var n,t,y=this._milliseconds;j=Va(j);if(j==="month"||j==="quarter"||j==="year"){n=this._days+y/864e5,t=this._months+Jk(n);switch(j){case"month":return t;case"quarter":return t/3;case"year":return t/12}}else{n=this._days+Math.round(c(this._months));switch(j){case"week":return n/7+y/6048e5;case"day":return n+y/864e5;case"hour":return n*24+y/36e5;case"minute":return n*1440+y/6e4;case"second":return n*86400+y/1e3;case"millisecond":return Math.floor(n*864e5)+y;default:throw new Error("Unknown unit "+j)}}}function g(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+L(this._months/12)*31536e6:NaN}function h(j){return function(){return this.as(j)}}var k=h("ms"),m=h("s"),o=h("m"),r=h("h"),p=h("d"),s=h("w"),w=h("M"),z=h("Q"),D=h("y");function M(){return sc(this)}function P(j){return j=Va(j),this.isValid()?this[j+"s"]():NaN}function T(j){return function(){return this.isValid()?this._data[j]:NaN}}var Y=T("milliseconds"),ga=T("seconds"),wa=T("minutes"),Aa=T("hours"),Na=T("days"),Ha=T("months"),Xa=T("years");function hb(){return X(this.days()/7)}var $a=Math.round,cb={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Kb(j,n,t,y,C){return C.relativeTime(n||1,!!t,j,y)}function Fb(j,n,t,y){var C=sc(j).abs(),V=$a(C.as("s")),ea=$a(C.as("m")),Fa=$a(C.as("h")),Ua=$a(C.as("d")),qb=$a(C.as("M")),jd=$a(C.as("w")),Id=$a(C.as("y")),oe=V<=t.ss&&["s",V]||V<t.s&&["ss",V]||ea<=1&&["m"]||ea<t.m&&["mm",ea]||Fa<=1&&["h"]||Fa<t.h&&["hh",Fa]||Ua<=1&&["d"]||Ua<t.d&&["dd",Ua];return t.w!=null&&(oe=oe||jd<=1&&["w"]||jd<t.w&&["ww",jd]),oe=oe||qb<=1&&["M"]||qb<t.M&&["MM",qb]||Id<=1&&["y"]||["yy",Id],oe[2]=n,oe[3]=+j>0,oe[4]=y,Kb.apply(null,oe)}function Bb(j){return j===void 0?$a:typeof j==="function"?($a=j,!0):!1}function Nb(j,n){return cb[j]===void 0?!1:n===void 0?cb[j]:(cb[j]=n,j==="s"&&(cb.ss=n-1),!0)}function ne(j,n){if(!this.isValid())return this.localeData().invalidDate();var t=!1,y=cb,C,V;return typeof j==="object"&&(n=j,j=!1),typeof j==="boolean"&&(t=j),typeof n==="object"&&(y=Object.assign({},cb,n),n.s!=null&&n.ss==null&&(y.ss=n.s-1)),C=this.localeData(),V=Fb(this,!t,y,C),t&&(V=C.pastFuture(+this,V)),C.postformat(V)}var hd=Math.abs;function id(j){return(j>0)-(j<0)||+j}function mg(){if(!this.isValid())return this.localeData().invalidDate();var j=hd(this._milliseconds)/1e3,n=hd(this._days),t=hd(this._months),y,C,V,ea,Fa=this.asSeconds(),Ua,qb,jd,Id;return Fa?(y=X(j/60),C=X(y/60),j%=60,y%=60,V=X(t/12),t%=12,ea=j?j.toFixed(3).replace(/\.?0+$/,""):"",Ua=Fa<0?"-":"",qb=id(this._months)!==id(Fa)?"-":"",jd=id(this._days)!==id(Fa)?"-":"",Id=id(this._milliseconds)!==id(Fa)?"-":"",Ua+"P"+(V?qb+V+"Y":"")+(t?qb+t+"M":"")+(n?jd+n+"D":"")+(C||y||j?"T":"")+(C?Id+C+"H":"")+(y?Id+y+"M":"")+(j?Id+ea+"S":"")):"P0D"}var ab=je.prototype;ab.isValid=Po,ab.abs=Fp,ab.add=Gp,ab.subtract=Hp,ab.as=e,ab.asMilliseconds=k,ab.asSeconds=m,ab.asMinutes=o,ab.asHours=r,ab.asDays=p,ab.asWeeks=s,ab.asMonths=w,ab.asQuarters=z,ab.asYears=D,ab.valueOf=g,ab._bubble=Ik,ab.clone=M,ab.get=P,ab.milliseconds=Y,ab.seconds=ga,ab.minutes=wa,ab.hours=Aa,ab.days=Na,ab.weeks=hb,ab.months=Ha,ab.years=Xa,ab.humanize=ne,ab.toISOString=mg,ab.toString=mg,ab.toJSON=mg,ab.locale=nk,ab.localeData=mf,ab.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",mg),ab.lang=ok,ka("X",0,0,"unix"),ka("x",0,0,"valueOf"),ta("x",Sf),ta("X",go),jb("X",function(j,n,t){t._d=new Date(parseFloat(j)*1e3)}),jb("x",function(j,n,t){t._d=new Date(L(j))});return f.version="2.29.0",i(Wa),f.fn=ja,f.min=Mo,f.max=No,f.now=ag,f.utc=Q,f.unix=Ck,f.months=Ek,f.isDate=H,f.locale=fd,f.invalid=oa,f.duration=sc,f.isMoment=N,f.weekdays=Ep,f.parseZone=Dp,f.localeData=qc,f.isDuration=hf,f.monthsShort=Fk,f.weekdaysMin=Gk,f.defineLocale=xh,f.updateLocale=Sb,f.locales=yh,f.weekdaysShort=Tc,f.normalizeUnits=Va,f.relativeTimeRounding=Bb,f.relativeTimeThreshold=Nb,f.calendarFormat=Xb,f.prototype=ja,f.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},f})});var Oq=Cc((a,b)=>{(function(d,f){typeof a==="object"&&typeof b!=="undefined"?b.exports=f(function(){try{return Pq()}catch(i){}}()):typeof define==="function"&&define.amd?define(["require"],function(i){return f(function(){try{return i("moment")}catch(l){}}())}):(d=d||self,d.Chart=f(d.moment))})(a,function(d){"use strict";d=d&&d.hasOwnProperty("default")?d.default:d;function f(c,e){return e={exports:{}},c(e,e.exports),e.exports}function i(c){return c&&c.default||c}var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},q=f(function(c){var e={};for(var g in l)l.hasOwnProperty(g)&&(e[l[g]]=g);var h=c.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var k in h)if(h.hasOwnProperty(k)){if(!("channels"in h[k]))throw new Error("missing channels property: "+k);if(!("labels"in h[k]))throw new Error("missing channel labels property: "+k);if(h[k].labels.length!==h[k].channels)throw new Error("channel and label counts mismatch: "+k);var m=h[k].channels,o=h[k].labels;delete h[k].channels,delete h[k].labels,Object.defineProperty(h[k],"channels",{value:m}),Object.defineProperty(h[k],"labels",{value:o})}h.rgb.hsl=function(p){var s=p[0]/255,w=p[1]/255,z=p[2]/255,D=Math.min(s,w,z),M=Math.max(s,w,z),P=M-D,T,Y,ga;return M===D?T=0:s===M?T=(w-z)/P:w===M?T=2+(z-s)/P:z===M&&(T=4+(s-w)/P),T=Math.min(T*60,360),T<0&&(T+=360),ga=(D+M)/2,M===D?Y=0:ga<=.5?Y=P/(M+D):Y=P/(2-M-D),[T,Y*100,ga*100]},h.rgb.hsv=function(p){var s,w,z,D,M,P=p[0]/255,T=p[1]/255,Y=p[2]/255,ga=Math.max(P,T,Y),wa=ga-Math.min(P,T,Y),Aa=function(Na){return(ga-Na)/6/wa+1/2};return wa===0?D=M=0:(M=wa/ga,s=Aa(P),w=Aa(T),z=Aa(Y),P===ga?D=z-w:T===ga?D=1/3+s-z:Y===ga&&(D=2/3+w-s),D<0?D+=1:D>1&&(D-=1)),[D*360,M*100,ga*100]},h.rgb.hwb=function(p){var s=p[0],w=p[1],z=p[2],D=h.rgb.hsl(p)[0],M=1/255*Math.min(s,Math.min(w,z));return z=1-1/255*Math.max(s,Math.max(w,z)),[D,M*100,z*100]},h.rgb.cmyk=function(p){var s=p[0]/255,w=p[1]/255,z=p[2]/255,D,M,P,T;return T=Math.min(1-s,1-w,1-z),D=(1-s-T)/(1-T)||0,M=(1-w-T)/(1-T)||0,P=(1-z-T)/(1-T)||0,[D*100,M*100,P*100,T*100]};function r(p,s){return Math.pow(p[0]-s[0],2)+Math.pow(p[1]-s[1],2)+Math.pow(p[2]-s[2],2)}h.rgb.keyword=function(p){var s=e[p];if(s)return s;var w=Infinity,z;for(var D in l)if(l.hasOwnProperty(D)){var M=l[D],P=r(p,M);P<w&&(w=P,z=D)}return z},h.keyword.rgb=function(p){return l[p]},h.rgb.xyz=function(p){var s=p[0]/255,w=p[1]/255,z=p[2]/255;s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,w=w>.04045?Math.pow((w+.055)/1.055,2.4):w/12.92,z=z>.04045?Math.pow((z+.055)/1.055,2.4):z/12.92;var D=s*.4124+w*.3576+z*.1805,M=s*.2126+w*.7152+z*.0722,P=s*.0193+w*.1192+z*.9505;return[D*100,M*100,P*100]},h.rgb.lab=function(p){var s=h.rgb.xyz(p),w=s[0],z=s[1],D=s[2],M,P,T;return w/=95.047,z/=100,D/=108.883,w=w>.008856?Math.pow(w,1/3):7.787*w+16/116,z=z>.008856?Math.pow(z,1/3):7.787*z+16/116,D=D>.008856?Math.pow(D,1/3):7.787*D+16/116,M=116*z-16,P=500*(w-z),T=200*(z-D),[M,P,T]},h.hsl.rgb=function(p){var s=p[0]/360,w=p[1]/100,z=p[2]/100,D,M,P,T,Y;if(w===0)return Y=z*255,[Y,Y,Y];z<.5?M=z*(1+w):M=z+w-z*w,D=2*z-M,T=[0,0,0];for(var ga=0;ga<3;ga++)P=s+1/3*-(ga-1),P<0&&P++,P>1&&P--,6*P<1?Y=D+(M-D)*6*P:2*P<1?Y=M:3*P<2?Y=D+(M-D)*(2/3-P)*6:Y=D,T[ga]=Y*255;return T},h.hsl.hsv=function(p){var s=p[0],w=p[1]/100,z=p[2]/100,D=w,M=Math.max(z,.01),P,T;return z*=2,w*=z<=1?z:2-z,D*=M<=1?M:2-M,T=(z+w)/2,P=z===0?2*D/(M+D):2*w/(z+w),[s,P*100,T*100]},h.hsv.rgb=function(p){var s=p[0]/60,w=p[1]/100,z=p[2]/100,D=Math.floor(s)%6,M=s-Math.floor(s),P=255*z*(1-w),T=255*z*(1-w*M),Y=255*z*(1-w*(1-M));z*=255;switch(D){case 0:return[z,Y,P];case 1:return[T,z,P];case 2:return[P,z,Y];case 3:return[P,T,z];case 4:return[Y,P,z];case 5:return[z,P,T]}},h.hsv.hsl=function(p){var s=p[0],w=p[1]/100,z=p[2]/100,D=Math.max(z,.01),M,P,T;return T=(2-w)*z,M=(2-w)*D,P=w*D,P/=M<=1?M:2-M,P=P||0,T/=2,[s,P*100,T*100]},h.hwb.rgb=function(p){var s=p[0]/360,w=p[1]/100,z=p[2]/100,D=w+z,M,P,T,Y;D>1&&(w/=D,z/=D),M=Math.floor(6*s),P=1-z,T=6*s-M,(M&1)!==0&&(T=1-T),Y=w+T*(P-w);var ga,wa,Aa;switch(M){default:case 6:case 0:ga=P,wa=Y,Aa=w;break;case 1:ga=Y,wa=P,Aa=w;break;case 2:ga=w,wa=P,Aa=Y;break;case 3:ga=w,wa=Y,Aa=P;break;case 4:ga=Y,wa=w,Aa=P;break;case 5:ga=P,wa=w,Aa=Y;break}return[ga*255,wa*255,Aa*255]},h.cmyk.rgb=function(p){var s=p[0]/100,w=p[1]/100,z=p[2]/100,D=p[3]/100,M,P,T;return M=1-Math.min(1,s*(1-D)+D),P=1-Math.min(1,w*(1-D)+D),T=1-Math.min(1,z*(1-D)+D),[M*255,P*255,T*255]},h.xyz.rgb=function(p){var s=p[0]/100,w=p[1]/100,z=p[2]/100,D,M,P;return D=s*3.2406+w*-1.5372+z*-.4986,M=s*-.9689+w*1.8758+z*.0415,P=s*.0557+w*-.204+z*1.057,D=D>.0031308?1.055*Math.pow(D,1/2.4)-.055:D*12.92,M=M>.0031308?1.055*Math.pow(M,1/2.4)-.055:M*12.92,P=P>.0031308?1.055*Math.pow(P,1/2.4)-.055:P*12.92,D=Math.min(Math.max(0,D),1),M=Math.min(Math.max(0,M),1),P=Math.min(Math.max(0,P),1),[D*255,M*255,P*255]},h.xyz.lab=function(p){var s=p[0],w=p[1],z=p[2],D,M,P;return s/=95.047,w/=100,z/=108.883,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,w=w>.008856?Math.pow(w,1/3):7.787*w+16/116,z=z>.008856?Math.pow(z,1/3):7.787*z+16/116,D=116*w-16,M=500*(s-w),P=200*(w-z),[D,M,P]},h.lab.xyz=function(p){var s=p[0],w=p[1],z=p[2],D,M,P;M=(s+16)/116,D=w/500+M,P=M-z/200;var T=Math.pow(M,3),Y=Math.pow(D,3),ga=Math.pow(P,3);return M=T>.008856?T:(M-16/116)/7.787,D=Y>.008856?Y:(D-16/116)/7.787,P=ga>.008856?ga:(P-16/116)/7.787,D*=95.047,M*=100,P*=108.883,[D,M,P]},h.lab.lch=function(p){var s=p[0],w=p[1],z=p[2],D,M,P;return D=Math.atan2(z,w),M=D*360/2/Math.PI,M<0&&(M+=360),P=Math.sqrt(w*w+z*z),[s,P,M]},h.lch.lab=function(p){var s=p[0],w=p[1],z=p[2],D,M,P;return P=z/360*2*Math.PI,D=w*Math.cos(P),M=w*Math.sin(P),[s,D,M]},h.rgb.ansi16=function(p){var s=p[0],w=p[1],z=p[2],D=1 in arguments?arguments[1]:h.rgb.hsv(p)[2];D=Math.round(D/50);if(D===0)return 30;var M=30+(Math.round(z/255)<<2|Math.round(w/255)<<1|Math.round(s/255));return D===2&&(M+=60),M},h.hsv.ansi16=function(p){return h.rgb.ansi16(h.hsv.rgb(p),p[2])},h.rgb.ansi256=function(p){var s=p[0],w=p[1],z=p[2];if(s===w&&w===z)return s<8?16:s>248?231:Math.round((s-8)/247*24)+232;var D=16+36*Math.round(s/255*5)+6*Math.round(w/255*5)+Math.round(z/255*5);return D},h.ansi16.rgb=function(p){var s=p%10;if(s===0||s===7)return p>50&&(s+=3.5),s=s/10.5*255,[s,s,s];var w=(~~(p>50)+1)*.5,z=(s&1)*w*255,D=(s>>1&1)*w*255,M=(s>>2&1)*w*255;return[z,D,M]},h.ansi256.rgb=function(p){if(p>=232){var s=(p-232)*10+8;return[s,s,s]}p-=16;var w,z=Math.floor(p/36)/5*255,D=Math.floor((w=p%36)/6)/5*255,M=w%6/5*255;return[z,D,M]},h.rgb.hex=function(p){var s=((Math.round(p[0])&255)<<16)+((Math.round(p[1])&255)<<8)+(Math.round(p[2])&255),w=s.toString(16).toUpperCase();return"000000".substring(w.length)+w},h.hex.rgb=function(p){var s=p.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!s)return[0,0,0];var w=s[0];s[0].length===3&&(w=w.split("").map(function(T){return T+T}).join(""));var z=parseInt(w,16),D=z>>16&255,M=z>>8&255,P=z&255;return[D,M,P]},h.rgb.hcg=function(p){var s=p[0]/255,w=p[1]/255,z=p[2]/255,D=Math.max(Math.max(s,w),z),M=Math.min(Math.min(s,w),z),P=D-M,T,Y;return P<1?T=M/(1-P):T=0,P<=0?Y=0:D===s?Y=(w-z)/P%6:D===w?Y=2+(z-s)/P:Y=4+(s-w)/P+4,Y/=6,Y%=1,[Y*360,P*100,T*100]},h.hsl.hcg=function(p){var s=p[1]/100,w=p[2]/100,z=1,D=0;return w<.5?z=2*s*w:z=2*s*(1-w),z<1&&(D=(w-.5*z)/(1-z)),[p[0],z*100,D*100]},h.hsv.hcg=function(p){var s=p[1]/100,w=p[2]/100,z=s*w,D=0;return z<1&&(D=(w-z)/(1-z)),[p[0],z*100,D*100]},h.hcg.rgb=function(p){var s=p[0]/360,w=p[1]/100,z=p[2]/100;if(w===0)return[z*255,z*255,z*255];var D=[0,0,0],M=s%1*6,P=M%1,T=1-P,Y=0;switch(Math.floor(M)){case 0:D[0]=1,D[1]=P,D[2]=0;break;case 1:D[0]=T,D[1]=1,D[2]=0;break;case 2:D[0]=0,D[1]=1,D[2]=P;break;case 3:D[0]=0,D[1]=T,D[2]=1;break;case 4:D[0]=P,D[1]=0,D[2]=1;break;default:D[0]=1,D[1]=0,D[2]=T}return Y=(1-w)*z,[(w*D[0]+Y)*255,(w*D[1]+Y)*255,(w*D[2]+Y)*255]},h.hcg.hsv=function(p){var s=p[1]/100,w=p[2]/100,z=s+w*(1-s),D=0;return z>0&&(D=s/z),[p[0],D*100,z*100]},h.hcg.hsl=function(p){var s=p[1]/100,w=p[2]/100,z=w*(1-s)+.5*s,D=0;return z>0&&z<.5?D=s/(2*z):z>=.5&&z<1&&(D=s/(2*(1-z))),[p[0],D*100,z*100]},h.hcg.hwb=function(p){var s=p[1]/100,w=p[2]/100,z=s+w*(1-s);return[p[0],(z-s)*100,(1-z)*100]},h.hwb.hcg=function(p){var s=p[1]/100,w=p[2]/100,z=1-w,D=z-s,M=0;return D<1&&(M=(z-D)/(1-D)),[p[0],D*100,M*100]},h.apple.rgb=function(p){return[p[0]/65535*255,p[1]/65535*255,p[2]/65535*255]},h.rgb.apple=function(p){return[p[0]/255*65535,p[1]/255*65535,p[2]/255*65535]},h.gray.rgb=function(p){return[p[0]/100*255,p[0]/100*255,p[0]/100*255]},h.gray.hsl=h.gray.hsv=function(p){return[0,0,p[0]]},h.gray.hwb=function(p){return[0,100,p[0]]},h.gray.cmyk=function(p){return[0,0,0,p[0]]},h.gray.lab=function(p){return[p[0],0,0]},h.gray.hex=function(p){var s=Math.round(p[0]/100*255)&255,w=(s<<16)+(s<<8)+s,z=w.toString(16).toUpperCase();return"000000".substring(z.length)+z},h.rgb.gray=function(p){var s=(p[0]+p[1]+p[2])/3;return[s/255*100]}}),u=q.rgb,v=q.hsl,A=q.hsv,E=q.hwb,H=q.cmyk,O=q.xyz,I=q.lab,Q=q.lch,W=q.hex,_=q.keyword,fa=q.ansi16,ha=q.ansi256,oa=q.hcg,ia=q.apple,ra=q.gray;function ua(){for(var c={},e=Object.keys(q),g=e.length,h=0;h<g;h++)c[e[h]]={distance:-1,parent:null};return c}function la(c){var e=ua(),g=[c];for(e[c].distance=0;g.length;)for(var h=g.pop(),k=Object.keys(q[h]),m=k.length,o=0;o<m;o++){var r=k[o],p=e[r];p.distance===-1&&(p.distance=e[h].distance+1,p.parent=h,g.unshift(r))}return e}function N(c,e){return function(g){return e(c(g))}}function R(c,e){for(var g=[e[c].parent,c],h=q[e[c].parent][c],k=e[c].parent;e[k].parent;)g.unshift(e[k].parent),h=N(q[e[k].parent][k],h),k=e[k].parent;return h.conversion=g,h}var x=function(c){for(var e=la(c),g={},h=Object.keys(e),k=h.length,m=0;m<k;m++){var o=h[m],r=e[o];if(r.parent===null)continue;g[o]=R(o,e)}return g},G={},F=Object.keys(q);function J(c){var e=function(g){return g===void 0||g===null?g:(arguments.length>1&&(g=Array.prototype.slice.call(arguments)),c(g))};return"conversion"in c&&(e.conversion=c.conversion),e}function U(c){var e=function(g){if(g===void 0||g===null)return g;arguments.length>1&&(g=Array.prototype.slice.call(arguments));var h=c(g);if(typeof h==="object")for(var k=h.length,m=0;m<k;m++)h[m]=Math.round(h[m]);return h};return"conversion"in c&&(e.conversion=c.conversion),e}F.forEach(function(c){G[c]={},Object.defineProperty(G[c],"channels",{value:q[c].channels}),Object.defineProperty(G[c],"labels",{value:q[c].labels});var e=x(c),g=Object.keys(e);g.forEach(function(h){var k=e[h];G[c][h]=U(k),G[c][h].raw=J(k)})});var K=G,ca={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ba={getRgba:Ba,getHsla:$,getRgb:pa,getHsl:da,getHwb:va,getAlpha:ma,hexString:xa,rgbString:ka,rgbaString:db,percentString:fb,percentaString:gb,hslString:Ca,hslaString:Ia,hwbString:Ya,keyword:eb};function Ba(c){if(!c)return;var e=/^#([a-fA-F0-9]{3,4})$/i,g=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,h=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,k=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,m=/(\w+)/,o=[0,0,0],r=1,p=c.match(e),s="";if(p){p=p[1],s=p[3];for(var w=0;w<o.length;w++)o[w]=parseInt(p[w]+p[w],16);s&&(r=Math.round(parseInt(s+s,16)/255*100)/100)}else if(p=c.match(g)){s=p[2],p=p[1];for(var w=0;w<o.length;w++)o[w]=parseInt(p.slice(w*2,w*2+2),16);s&&(r=Math.round(parseInt(s,16)/255*100)/100)}else if(p=c.match(h)){for(var w=0;w<o.length;w++)o[w]=parseInt(p[w+1]);r=parseFloat(p[4])}else if(p=c.match(k)){for(var w=0;w<o.length;w++)o[w]=Math.round(parseFloat(p[w+1])*2.55);r=parseFloat(p[4])}else if(p=c.match(m)){if(p[1]=="transparent")return[0,0,0,0];o=ca[p[1]];if(!o)return}for(var w=0;w<o.length;w++)o[w]=na(o[w],0,255);return!r&&r!=0?r=1:r=na(r,0,1),o[3]=r,o}function $(c){if(!c)return;var e=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,g=c.match(e);if(g){var h=parseFloat(g[4]),k=na(parseInt(g[1]),0,360),m=na(parseFloat(g[2]),0,100),o=na(parseFloat(g[3]),0,100),r=na(isNaN(h)?1:h,0,1);return[k,m,o,r]}}function va(c){if(!c)return;var e=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,g=c.match(e);if(g){var h=parseFloat(g[4]),k=na(parseInt(g[1]),0,360),m=na(parseFloat(g[2]),0,100),o=na(parseFloat(g[3]),0,100),r=na(isNaN(h)?1:h,0,1);return[k,m,o,r]}}function pa(c){var e=Ba(c);return e&&e.slice(0,3)}function da(c){var e=$(c);return e&&e.slice(0,3)}function ma(c){var e=Ba(c);if(e)return e[3];{if(e=$(c))return e[3];if(e=va(c))return e[3]}}function xa(c,e){var e=e!==void 0&&c.length===3?e:c[3];return"#"+ya(c[0])+ya(c[1])+ya(c[2])+(e>=0&&e<1?ya(Math.round(e*255)):"")}function ka(c,e){return e<1||c[3]&&c[3]<1?db(c,e):"rgb("+c[0]+", "+c[1]+", "+c[2]+")"}function db(c,e){return e===void 0&&(e=c[3]!==void 0?c[3]:1),"rgba("+c[0]+", "+c[1]+", "+c[2]+", "+e+")"}function fb(c,e){if(e<1||c[3]&&c[3]<1)return gb(c,e);var g=Math.round(c[0]/255*100),h=Math.round(c[1]/255*100),k=Math.round(c[2]/255*100);return"rgb("+g+"%, "+h+"%, "+k+"%)"}function gb(c,e){var g=Math.round(c[0]/255*100),h=Math.round(c[1]/255*100),k=Math.round(c[2]/255*100);return"rgba("+g+"%, "+h+"%, "+k+"%, "+(e||c[3]||1)+")"}function Ca(c,e){return e<1||c[3]&&c[3]<1?Ia(c,e):"hsl("+c[0]+", "+c[1]+"%, "+c[2]+"%)"}function Ia(c,e){return e===void 0&&(e=c[3]!==void 0?c[3]:1),"hsla("+c[0]+", "+c[1]+"%, "+c[2]+"%, "+e+")"}function Ya(c,e){return e===void 0&&(e=c[3]!==void 0?c[3]:1),"hwb("+c[0]+", "+c[1]+"%, "+c[2]+"%"+(e!==void 0&&e!==1?", "+e:"")+")"}function eb(c){return La[c.slice(0,3)]}function na(c,e,g){return Math.min(Math.max(e,c),g)}function ya(c){var e=c.toString(16).toUpperCase();return e.length<2?"0"+e:e}var La={};for(var sa in ca)La[ca[sa]]=sa;var Ea=function(c){if(c instanceof Ea)return c;if(!(this instanceof Ea))return new Ea(c);this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var e;typeof c==="string"?(e=ba.getRgba(c),e?this.setValues("rgb",e):(e=ba.getHsla(c))?this.setValues("hsl",e):(e=ba.getHwb(c))&&this.setValues("hwb",e)):typeof c==="object"&&(e=c,e.r!==void 0||e.red!==void 0?this.setValues("rgb",e):e.l!==void 0||e.lightness!==void 0?this.setValues("hsl",e):e.v!==void 0||e.value!==void 0?this.setValues("hsv",e):e.w!==void 0||e.whiteness!==void 0?this.setValues("hwb",e):(e.c!==void 0||e.cyan!==void 0)&&this.setValues("cmyk",e))};Ea.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var c=this.values;return c.alpha!==1?c.hwb.concat([c.alpha]):c.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var c=this.values;return c.rgb.concat([c.alpha])},hslaArray:function(){var c=this.values;return c.hsl.concat([c.alpha])},alpha:function(c){return c===void 0?this.values.alpha:(this.setValues("alpha",c),this)},red:function(c){return this.setChannel("rgb",0,c)},green:function(c){return this.setChannel("rgb",1,c)},blue:function(c){return this.setChannel("rgb",2,c)},hue:function(c){return c&&(c%=360,c=c<0?360+c:c),this.setChannel("hsl",0,c)},saturation:function(c){return this.setChannel("hsl",1,c)},lightness:function(c){return this.setChannel("hsl",2,c)},saturationv:function(c){return this.setChannel("hsv",1,c)},whiteness:function(c){return this.setChannel("hwb",1,c)},blackness:function(c){return this.setChannel("hwb",2,c)},value:function(c){return this.setChannel("hsv",2,c)},cyan:function(c){return this.setChannel("cmyk",0,c)},magenta:function(c){return this.setChannel("cmyk",1,c)},yellow:function(c){return this.setChannel("cmyk",2,c)},black:function(c){return this.setChannel("cmyk",3,c)},hexString:function(){return ba.hexString(this.values.rgb)},rgbString:function(){return ba.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return ba.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return ba.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return ba.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return ba.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return ba.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return ba.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var c=this.values.rgb;return c[0]<<16|c[1]<<8|c[2]},luminosity:function(){for(var c=this.values.rgb,e=[],g=0;g<c.length;g++){var h=c[g]/255;e[g]=h<=.03928?h/12.92:Math.pow((h+.055)/1.055,2.4)}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(c){var e=this.luminosity(),g=c.luminosity();return e>g?(e+.05)/(g+.05):(g+.05)/(e+.05)},level:function(c){var e=this.contrast(c);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var c=this.values.rgb,e=(c[0]*299+c[1]*587+c[2]*114)/1e3;return e<128},light:function(){return!this.dark()},negate:function(){for(var c=[],e=0;e<3;e++)c[e]=255-this.values.rgb[e];return this.setValues("rgb",c),this},lighten:function(c){var e=this.values.hsl;return e[2]+=e[2]*c,this.setValues("hsl",e),this},darken:function(c){var e=this.values.hsl;return e[2]-=e[2]*c,this.setValues("hsl",e),this},saturate:function(c){var e=this.values.hsl;return e[1]+=e[1]*c,this.setValues("hsl",e),this},desaturate:function(c){var e=this.values.hsl;return e[1]-=e[1]*c,this.setValues("hsl",e),this},whiten:function(c){var e=this.values.hwb;return e[1]+=e[1]*c,this.setValues("hwb",e),this},blacken:function(c){var e=this.values.hwb;return e[2]+=e[2]*c,this.setValues("hwb",e),this},greyscale:function(){var c=this.values.rgb,e=c[0]*.3+c[1]*.59+c[2]*.11;return this.setValues("rgb",[e,e,e]),this},clearer:function(c){var e=this.values.alpha;return this.setValues("alpha",e-e*c),this},opaquer:function(c){var e=this.values.alpha;return this.setValues("alpha",e+e*c),this},rotate:function(c){var e=this.values.hsl,g=(e[0]+c)%360;return e[0]=g<0?360+g:g,this.setValues("hsl",e),this},mix:function(c,e){var g=this,h=c,k=e===void 0?.5:e,m=2*k-1,o=g.alpha()-h.alpha(),r=((m*o===-1?m:(m+o)/(1+m*o))+1)/2,p=1-r;return this.rgb(r*g.red()+p*h.red(),r*g.green()+p*h.green(),r*g.blue()+p*h.blue()).alpha(g.alpha()*k+h.alpha()*(1-k))},toJSON:function(){return this.rgb()},clone:function(){var c=new Ea(),e=this.values,g=c.values,h,k;for(var m in e)e.hasOwnProperty(m)&&(h=e[m],k={}.toString.call(h),k==="[object Array]"?g[m]=h.slice(0):k==="[object Number]"?g[m]=h:console.error("unexpected color value:",h));return c}},Ea.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},Ea.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},Ea.prototype.getValues=function(c){for(var e=this.values,g={},h=0;h<c.length;h++)g[c.charAt(h)]=e[c][h];return e.alpha!==1&&(g.a=e.alpha),g},Ea.prototype.setValues=function(c,e){var g=this.values,h=this.spaces,k=this.maxes,m=1,o;this.valid=!0;if(c==="alpha")m=e;else if(e.length)g[c]=e.slice(0,c.length),m=e[c.length];else if(e[c.charAt(0)]!==void 0){for(o=0;o<c.length;o++)g[c][o]=e[c.charAt(o)];m=e.a}else if(e[h[c][0]]!==void 0){var r=h[c];for(o=0;o<c.length;o++)g[c][o]=e[r[o]];m=e.alpha}g.alpha=Math.max(0,Math.min(1,m===void 0?g.alpha:m));if(c==="alpha")return!1;var p;for(o=0;o<c.length;o++)p=Math.max(0,Math.min(k[c][o],g[c][o])),g[c][o]=Math.round(p);for(var s in h)s!==c&&(g[s]=K[c][s](g[c]));return!0},Ea.prototype.setSpace=function(c,e){var g=e[0];return g===void 0?this.getValues(c):(typeof g==="number"&&(g=Array.prototype.slice.call(e)),this.setValues(c,g),this)},Ea.prototype.setChannel=function(c,e,g){var h=this.values[c];return g===void 0?h[e]:g===h[e]?this:(h[e]=g,this.setValues(c,h),this)},typeof window!=="undefined"&&(window.Color=Ea);var bb=Ea,Da={noop:function(){},uid:function(){var c=0;return function(){return c++}}(),isNullOrUndef:function(c){return c===null||typeof c==="undefined"},isArray:function(c){if(Array.isArray&&Array.isArray(c))return!0;var e=Object.prototype.toString.call(c);return e.substr(0,7)==="[object"&&e.substr(-6)==="Array]"?!0:!1},isObject:function(c){return c!==null&&Object.prototype.toString.call(c)==="[object Object]"},isFinite:function(c){return(typeof c==="number"||c instanceof Number)&&isFinite(c)},valueOrDefault:function(c,e){return typeof c==="undefined"?e:c},valueAtIndexOrDefault:function(c,e,g){return Da.valueOrDefault(Da.isArray(c)?c[e]:c,g)},callback:function(c,e,g){if(c&&typeof c.call==="function")return c.apply(g,e)},each:function(c,e,g,h){var k,m,o;if(Da.isArray(c)){m=c.length;if(h)for(k=m-1;k>=0;k--)e.call(g,c[k],k);else for(k=0;k<m;k++)e.call(g,c[k],k)}else if(Da.isObject(c))for(o=Object.keys(c),m=o.length,k=0;k<m;k++)e.call(g,c[o[k]],o[k])},arrayEquals:function(c,e){var g,h,k,m;if(!c||!e||c.length!==e.length)return!1;for(g=0,h=c.length;g<h;++g){k=c[g],m=e[g];if(k instanceof Array&&m instanceof Array){if(!Da.arrayEquals(k,m))return!1}else if(k!==m)return!1}return!0},clone:function(c){if(Da.isArray(c))return c.map(Da.clone);if(Da.isObject(c)){for(var e={},g=Object.keys(c),h=g.length,k=0;k<h;++k)e[g[k]]=Da.clone(c[g[k]]);return e}return c},_merger:function(c,e,g,h){var k=e[c],m=g[c];Da.isObject(k)&&Da.isObject(m)?Da.merge(k,m,h):e[c]=Da.clone(m)},_mergerIf:function(c,e,g){var h=e[c],k=g[c];Da.isObject(h)&&Da.isObject(k)?Da.mergeIf(h,k):e.hasOwnProperty(c)||(e[c]=Da.clone(k))},merge:function(c,e,g){var h=Da.isArray(e)?e:[e],k=h.length,m,o,r,p,s;if(!Da.isObject(c))return c;for(g=g||{},m=g.merger||Da._merger,o=0;o<k;++o){e=h[o];if(!Da.isObject(e))continue;for(r=Object.keys(e),s=0,p=r.length;s<p;++s)m(r[s],c,e,g)}return c},mergeIf:function(c,e){return Da.merge(c,e,{merger:Da._mergerIf})},extend:Object.assign||function(c){return Da.merge(c,[].slice.call(arguments,1),{merger:function(e,g,h){g[e]=h[e]}})},inherits:function(c){var e=this,g=c&&c.hasOwnProperty("constructor")?c.constructor:function(){return e.apply(this,arguments)},h=function(){this.constructor=g};return h.prototype=e.prototype,g.prototype=new h(),g.extend=Da.inherits,c&&Da.extend(g.prototype,c),g.__super__=e.prototype,g},_deprecated:function(c,e,g,h){e!==void 0&&console.warn(c+': "'+g+'" is deprecated. Please use "'+h+'" instead')}},Sa=Da;Da.callCallback=Da.callback,Da.indexOf=function(c,e,g){return Array.prototype.indexOf.call(c,e,g)},Da.getValueOrDefault=Da.valueOrDefault,Da.getValueAtIndexOrDefault=Da.valueAtIndexOrDefault;var Ja={linear:function(c){return c},easeInQuad:function(c){return c*c},easeOutQuad:function(c){return-c*(c-2)},easeInOutQuad:function(c){return(c/=.5)<1?.5*c*c:-.5*(--c*(c-2)-1)},easeInCubic:function(c){return c*c*c},easeOutCubic:function(c){return(c=c-1)*c*c+1},easeInOutCubic:function(c){return(c/=.5)<1?.5*c*c*c:.5*((c-=2)*c*c+2)},easeInQuart:function(c){return c*c*c*c},easeOutQuart:function(c){return-((c=c-1)*c*c*c-1)},easeInOutQuart:function(c){return(c/=.5)<1?.5*c*c*c*c:-.5*((c-=2)*c*c*c-2)},easeInQuint:function(c){return c*c*c*c*c},easeOutQuint:function(c){return(c=c-1)*c*c*c*c+1},easeInOutQuint:function(c){return(c/=.5)<1?.5*c*c*c*c*c:.5*((c-=2)*c*c*c*c+2)},easeInSine:function(c){return-Math.cos(c*(Math.PI/2))+1},easeOutSine:function(c){return Math.sin(c*(Math.PI/2))},easeInOutSine:function(c){return-.5*(Math.cos(Math.PI*c)-1)},easeInExpo:function(c){return c===0?0:Math.pow(2,10*(c-1))},easeOutExpo:function(c){return c===1?1:-Math.pow(2,-10*c)+1},easeInOutExpo:function(c){return c===0?0:c===1?1:(c/=.5)<1?.5*Math.pow(2,10*(c-1)):.5*(-Math.pow(2,-10*--c)+2)},easeInCirc:function(c){return c>=1?c:-(Math.sqrt(1-c*c)-1)},easeOutCirc:function(c){return Math.sqrt(1-(c=c-1)*c)},easeInOutCirc:function(c){return(c/=.5)<1?-.5*(Math.sqrt(1-c*c)-1):.5*(Math.sqrt(1-(c-=2)*c)+1)},easeInElastic:function(c){var e=1.70158,g=0,h=1;return c===0?0:c===1?1:(g||(g=.3),h<1?(h=1,e=g/4):e=g/(2*Math.PI)*Math.asin(1/h),-(h*Math.pow(2,10*(c-=1))*Math.sin((c-e)*(2*Math.PI)/g)))},easeOutElastic:function(c){var e=1.70158,g=0,h=1;return c===0?0:c===1?1:(g||(g=.3),h<1?(h=1,e=g/4):e=g/(2*Math.PI)*Math.asin(1/h),h*Math.pow(2,-10*c)*Math.sin((c-e)*(2*Math.PI)/g)+1)},easeInOutElastic:function(c){var e=1.70158,g=0,h=1;return c===0?0:(c/=.5)===2?1:(g||(g=.45),h<1?(h=1,e=g/4):e=g/(2*Math.PI)*Math.asin(1/h),c<1?-.5*(h*Math.pow(2,10*(c-=1))*Math.sin((c-e)*(2*Math.PI)/g)):h*Math.pow(2,-10*(c-=1))*Math.sin((c-e)*(2*Math.PI)/g)*.5+1)},easeInBack:function(c){var e=1.70158;return c*c*((e+1)*c-e)},easeOutBack:function(c){var e=1.70158;return(c=c-1)*c*((e+1)*c+e)+1},easeInOutBack:function(c){var e=1.70158;return(c/=.5)<1?.5*(c*c*(((e*=1.525)+1)*c-e)):.5*((c-=2)*c*(((e*=1.525)+1)*c+e)+2)},easeInBounce:function(c){return 1-Ja.easeOutBounce(1-c)},easeOutBounce:function(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+.9375:7.5625*(c-=2.625/2.75)*c+.984375},easeInOutBounce:function(c){return c<.5?Ja.easeInBounce(c*2)*.5:Ja.easeOutBounce(c*2-1)*.5+.5}},Va={effects:Ja};Sa.easingEffects=Ja;var ib=Math.PI,tb=ib/180,nb=ib*2,qa=ib/2,Za=ib/4,X=ib*2/3,L={clear:function(c){c.ctx.clearRect(0,0,c.width,c.height)},roundedRect:function(c,e,g,h,k,m){if(m){var o=Math.min(m,k/2,h/2),r=e+o,p=g+o,s=e+h-o,w=g+k-o;c.moveTo(e,p),r<s&&p<w?(c.arc(r,p,o,-ib,-qa),c.arc(s,p,o,-qa,0),c.arc(s,w,o,0,qa),c.arc(r,w,o,qa,ib)):r<s?(c.moveTo(r,g),c.arc(s,p,o,-qa,qa),c.arc(r,p,o,qa,ib+qa)):p<w?(c.arc(r,p,o,-ib,0),c.arc(r,w,o,0,ib)):c.arc(r,p,o,-ib,ib),c.closePath(),c.moveTo(e,g)}else c.rect(e,g,h,k)},drawPoint:function(c,e,g,h,k,m){var o,r,p,s,w,z=(m||0)*tb;if(e&&typeof e==="object"){o=e.toString();if(o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]"){c.save(),c.translate(h,k),c.rotate(z),c.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),c.restore();return}}if(isNaN(g)||g<=0)return;c.beginPath();switch(e){default:c.arc(h,k,g,0,nb),c.closePath();break;case"triangle":c.moveTo(h+Math.sin(z)*g,k-Math.cos(z)*g),z+=X,c.lineTo(h+Math.sin(z)*g,k-Math.cos(z)*g),z+=X,c.lineTo(h+Math.sin(z)*g,k-Math.cos(z)*g),c.closePath();break;case"rectRounded":w=g*.516,s=g-w,r=Math.cos(z+Za)*s,p=Math.sin(z+Za)*s,c.arc(h-r,k-p,w,z-ib,z-qa),c.arc(h+p,k-r,w,z-qa,z),c.arc(h+r,k+p,w,z,z+qa),c.arc(h-p,k+r,w,z+qa,z+ib),c.closePath();break;case"rect":if(!m){s=Math.SQRT1_2*g,c.rect(h-s,k-s,2*s,2*s);break}z+=Za;case"rectRot":r=Math.cos(z)*g,p=Math.sin(z)*g,c.moveTo(h-r,k-p),c.lineTo(h+p,k-r),c.lineTo(h+r,k+p),c.lineTo(h-p,k+r),c.closePath();break;case"crossRot":z+=Za;case"cross":r=Math.cos(z)*g,p=Math.sin(z)*g,c.moveTo(h-r,k-p),c.lineTo(h+r,k+p),c.moveTo(h+p,k-r),c.lineTo(h-p,k+r);break;case"star":r=Math.cos(z)*g,p=Math.sin(z)*g,c.moveTo(h-r,k-p),c.lineTo(h+r,k+p),c.moveTo(h+p,k-r),c.lineTo(h-p,k+r),z+=Za,r=Math.cos(z)*g,p=Math.sin(z)*g,c.moveTo(h-r,k-p),c.lineTo(h+r,k+p),c.moveTo(h+p,k-r),c.lineTo(h-p,k+r);break;case"line":r=Math.cos(z)*g,p=Math.sin(z)*g,c.moveTo(h-r,k-p),c.lineTo(h+r,k+p);break;case"dash":c.moveTo(h,k),c.lineTo(h+Math.cos(z)*g,k+Math.sin(z)*g);break}c.fill(),c.stroke()},_isPointInArea:function(c,e){var g=1e-6;return c.x>e.left-g&&c.x<e.right+g&&c.y>e.top-g&&c.y<e.bottom+g},clipArea:function(c,e){c.save(),c.beginPath(),c.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),c.clip()},unclipArea:function(c){c.restore()},lineTo:function(c,e,g,h){var k=g.steppedLine;if(k){if(k==="middle"){var m=(e.x+g.x)/2;c.lineTo(m,h?g.y:e.y),c.lineTo(m,h?e.y:g.y)}else k==="after"&&!h||k!=="after"&&h?c.lineTo(e.x,g.y):c.lineTo(g.x,e.y);c.lineTo(g.x,g.y);return}if(!g.tension){c.lineTo(g.x,g.y);return}c.bezierCurveTo(h?e.controlPointPreviousX:e.controlPointNextX,h?e.controlPointPreviousY:e.controlPointNextY,h?g.controlPointNextX:g.controlPointPreviousX,h?g.controlPointNextY:g.controlPointPreviousY,g.x,g.y)}},Z=L;Sa.clear=L.clear,Sa.drawRoundedRectangle=function(c){c.beginPath(),L.roundedRect.apply(L,arguments)};var aa={_set:function(c,e){return Sa.merge(this[c]||(this[c]={}),e)}};aa._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var S=aa,za=Sa.valueOrDefault;function Ra(c){return!c||Sa.isNullOrUndef(c.size)||Sa.isNullOrUndef(c.family)?null:(c.style?c.style+" ":"")+(c.weight?c.weight+" ":"")+c.size+"px "+c.family}var ob={toLineHeight:function(c,e){var g=(""+c).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!g||g[1]==="normal")return e*1.2;c=+g[2];switch(g[3]){case"px":return c;case"%":c/=100;break}return e*c},toPadding:function(c){var e,g,h,k;return Sa.isObject(c)?(e=+c.top||0,g=+c.right||0,h=+c.bottom||0,k=+c.left||0):e=g=h=k=+c||0,{top:e,right:g,bottom:h,left:k,height:e+h,width:k+g}},_parseFont:function(c){var e=S.global,g=za(c.fontSize,e.defaultFontSize),h={family:za(c.fontFamily,e.defaultFontFamily),lineHeight:Sa.options.toLineHeight(za(c.lineHeight,e.defaultLineHeight),g),size:g,style:za(c.fontStyle,e.defaultFontStyle),weight:null,string:""};return h.string=Ra(h),h},resolve:function(c,e,g,h){var k=!0,m,o,r;for(m=0,o=c.length;m<o;++m){r=c[m];if(r===void 0)continue;e!==void 0&&typeof r==="function"&&(r=r(e),k=!1),g!==void 0&&Sa.isArray(r)&&(r=r[g],k=!1);if(r!==void 0)return h&&!k&&(h.cacheable=!1),r}}},Ta={_factorize:function(c){var e=[],g=Math.sqrt(c),h;for(h=1;h<g;h++)c%h===0&&(e.push(h),e.push(c/h));return g===(g|0)&&e.push(g),e.sort(function(k,m){return k-m}).pop(),e},log10:Math.log10||function(c){var e=Math.log(c)*Math.LOG10E,g=Math.round(e),h=c===Math.pow(10,g);return h?g:e}},kb=Ta;Sa.log10=Ta.log10;var Mb=function(c,e){return{x:function(g){return c+c+e-g},setWidth:function(g){e=g},textAlign:function(g){return g==="center"?g:g==="right"?"left":"right"},xPlus:function(g,h){return g-h},leftForLtr:function(g,h){return g-h}}},Db=function(){return{x:function(c){return c},setWidth:function(c){},textAlign:function(c){return c},xPlus:function(c,e){return c+e},leftForLtr:function(c,e){return c}}},Ka=function(c,e,g){return c?Mb(e,g):Db()},td=function(c,e){var g,h;(e==="ltr"||e==="rtl")&&(g=c.canvas.style,h=[g.getPropertyValue("direction"),g.getPropertyPriority("direction")],g.setProperty("direction",e,"important"),c.prevTextDirection=h)},Pf=function(c){var e=c.prevTextDirection;e!==void 0&&(delete c.prevTextDirection,c.canvas.style.setProperty("direction",e[0],e[1]))},Qf={getRtlAdapter:Ka,overrideTextDirection:td,restoreTextDirection:Pf},B=Sa,Rf=Va,ae=Z,Sf=ob,fo=kb,Tf=Qf;B.easing=Rf,B.canvas=ae,B.options=Sf,B.math=fo,B.rtl=Tf;function go(c,e,g,h){var k=Object.keys(g),m,o,r,p,s,w,z,D,M;for(m=0,o=k.length;m<o;++m){r=k[m],w=g[r],e.hasOwnProperty(r)||(e[r]=w),p=e[r];if(p===w||r[0]==="_")continue;c.hasOwnProperty(r)||(c[r]=p),s=c[r],z=typeof w;if(z===typeof s){if(z==="string"){D=bb(s);if(D.valid){M=bb(w);if(M.valid){e[r]=M.mix(D,h).rgbString();continue}}}else if(B.isFinite(s)&&B.isFinite(w)){e[r]=s+(w-s)*h;continue}}e[r]=w}}var ud=function(c){B.extend(this,c),this.initialize.apply(this,arguments)};B.extend(ud.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var c=this;return c._view||(c._view=B.extend({},c._model)),c._start={},c},transition:function(c){var e=this,g=e._model,h=e._start,k=e._view;return!g||c===1?(e._view=B.extend({},g),e._start=null,e):(k||(k=e._view={}),h||(h=e._start={}),go(h,k,g,c),e)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return B.isNumber(this._model.x)&&B.isNumber(this._model.y)}}),ud.extend=B.inherits;var cc=ud,ta=cc.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),lh=ta;Object.defineProperty(ta.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(ta.prototype,"chartInstance",{get:function(){return this.chart},set:function(c){this.chart=c}}),S._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:B.noop,onComplete:B.noop}});var mh={animations:[],request:null,addAnimation:function(c,e,g,h){var k=this.animations,m,o;for(e.chart=c,e.startTime=Date.now(),e.duration=g,h||(c.animating=!0),m=0,o=k.length;m<o;++m)if(k[m].chart===c){k[m]=e;return}k.push(e),k.length===1&&this.requestAnimationFrame()},cancelAnimation:function(c){var e=B.findIndex(this.animations,function(g){return g.chart===c});e!==-1&&(this.animations.splice(e,1),c.animating=!1)},requestAnimationFrame:function(){var c=this;c.request===null&&(c.request=B.requestAnimFrame.call(window,function(){c.request=null,c.startDigest()}))},startDigest:function(){var c=this;c.advance(),c.animations.length>0&&c.requestAnimationFrame()},advance:function(){for(var c=this.animations,e,g,h,k,m=0;m<c.length;)e=c[m],g=e.chart,h=e.numSteps,k=Math.floor((Date.now()-e.startTime)/e.duration*h)+1,e.currentStep=Math.min(k,h),B.callback(e.render,[g,e],g),B.callback(e.onAnimationProgress,[e],g),e.currentStep>=h?(B.callback(e.onAnimationComplete,[e],g),g.animating=!1,c.splice(m,1)):++m}},Ib=B.options.resolve,Uf=["push","pop","shift","splice","unshift"];function jb(c,e){if(c._chartjs){c._chartjs.listeners.push(e);return}Object.defineProperty(c,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Uf.forEach(function(g){var h="onData"+g.charAt(0).toUpperCase()+g.slice(1),k=c[g];Object.defineProperty(c,g,{configurable:!0,enumerable:!1,value:function(){var m=Array.prototype.slice.call(arguments),o=k.apply(this,m);return B.each(c._chartjs.listeners,function(r){typeof r[h]==="function"&&r[h].apply(r,m)}),o}})})}function be(c,e){var g=c._chartjs;if(!g)return;var h=g.listeners,k=h.indexOf(e);k!==-1&&h.splice(k,1);if(h.length>0)return;Uf.forEach(function(m){delete c[m]}),delete c._chartjs}var nh=function(c,e){this.initialize(c,e)};B.extend(nh.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(c,e){var g=this;g.chart=c,g.index=e,g.linkScales(),g.addElements(),g._type=g.getMeta().type},updateIndex:function(c){this.index=c},linkScales:function(){var c=this,e=c.getMeta(),g=c.chart,h=g.scales,k=c.getDataset(),m=g.options.scales;(e.xAxisID===null||!(e.xAxisID in h)||k.xAxisID)&&(e.xAxisID=k.xAxisID||m.xAxes[0].id),(e.yAxisID===null||!(e.yAxisID in h)||k.yAxisID)&&(e.yAxisID=k.yAxisID||m.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(c){return this.chart.scales[c]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&be(this._data,this)},createMetaDataset:function(){var c=this,e=c.datasetElementType;return e&&new e({_chart:c.chart,_datasetIndex:c.index})},createMetaData:function(c){var e=this,g=e.dataElementType;return g&&new g({_chart:e.chart,_datasetIndex:e.index,_index:c})},addElements:function(){var c=this,e=c.getMeta(),g=c.getDataset().data||[],h=e.data,k,m;for(k=0,m=g.length;k<m;++k)h[k]=h[k]||c.createMetaData(k);e.dataset=e.dataset||c.createMetaDataset()},addElementAndReset:function(c){var e=this.createMetaData(c);this.getMeta().data.splice(c,0,e),this.updateElement(e,c,!0)},buildOrUpdateElements:function(){var c=this,e=c.getDataset(),g=e.data||(e.data=[]);c._data!==g&&(c._data&&be(c._data,c),g&&Object.isExtensible(g)&&jb(g,c),c._data=g),c.resyncElements()},_configure:function(){var c=this;c._config=B.merge({},[c.chart.options.datasets[c._type],c.getDataset()],{merger:function(e,g,h){e!=="_meta"&&e!=="data"&&B._merger(e,g,h)}})},_update:function(c){var e=this;e._configure(),e._cachedDataOpts=null,e.update(c)},update:B.noop,transition:function(c){for(var e=this.getMeta(),g=e.data||[],h=g.length,k=0;k<h;++k)g[k].transition(c);e.dataset&&e.dataset.transition(c)},draw:function(){var c=this.getMeta(),e=c.data||[],g=e.length,h=0;for(c.dataset&&c.dataset.draw();h<g;++h)e[h].draw()},getStyle:function(c){var e=this,g=e.getMeta(),h=g.dataset,k;return e._configure(),h&&c===void 0?k=e._resolveDatasetElementOptions(h||{}):(c=c||0,k=e._resolveDataElementOptions(g.data[c]||{},c)),(k.fill===!1||k.fill===null)&&(k.backgroundColor=k.borderColor),k},_resolveDatasetElementOptions:function(c,e){var g=this,h=g.chart,k=g._config,m=c.custom||{},o=h.options.elements[g.datasetElementType.prototype._type]||{},r=g._datasetElementOptions,p={},s,w,z,D,M={chart:h,dataset:g.getDataset(),datasetIndex:g.index,hover:e};for(s=0,w=r.length;s<w;++s)z=r[s],D=e?"hover"+z.charAt(0).toUpperCase()+z.slice(1):z,p[z]=Ib([m[D],k[D],o[D]],M);return p},_resolveDataElementOptions:function(c,e){var g=this,h=c&&c.custom,k=g._cachedDataOpts;if(k&&!h)return k;var m=g.chart,o=g._config,r=m.options.elements[g.dataElementType.prototype._type]||{},p=g._dataElementOptions,s={},w={chart:m,dataIndex:e,dataset:g.getDataset(),datasetIndex:g.index},z={cacheable:!h},D,M,P,T;h=h||{};if(B.isArray(p))for(M=0,P=p.length;M<P;++M)T=p[M],s[T]=Ib([h[T],o[T],r[T]],w,e,z);else for(D=Object.keys(p),M=0,P=D.length;M<P;++M)T=D[M],s[T]=Ib([h[T],o[p[T]],o[T],r[T]],w,e,z);return z.cacheable&&(g._cachedDataOpts=Object.freeze(s)),s},removeHoverStyle:function(c){B.merge(c._model,c.$previousStyle||{}),delete c.$previousStyle},setHoverStyle:function(c){var e=this.chart.data.datasets[c._datasetIndex],g=c._index,h=c.custom||{},k=c._model,m=B.getHoverColor;c.$previousStyle={backgroundColor:k.backgroundColor,borderColor:k.borderColor,borderWidth:k.borderWidth},k.backgroundColor=Ib([h.hoverBackgroundColor,e.hoverBackgroundColor,m(k.backgroundColor)],void 0,g),k.borderColor=Ib([h.hoverBorderColor,e.hoverBorderColor,m(k.borderColor)],void 0,g),k.borderWidth=Ib([h.hoverBorderWidth,e.hoverBorderWidth,k.borderWidth],void 0,g)},_removeDatasetHoverStyle:function(){var c=this.getMeta().dataset;c&&this.removeHoverStyle(c)},_setDatasetHoverStyle:function(){var c=this.getMeta().dataset,e={},g,h,k,m,o,r;if(!c)return;for(r=c._model,o=this._resolveDatasetElementOptions(c,!0),m=Object.keys(o),g=0,h=m.length;g<h;++g)k=m[g],e[k]=r[k],r[k]=o[k];c.$previousStyle=e},resyncElements:function(){var c=this,e=c.getMeta(),g=c.getDataset().data,h=e.data.length,k=g.length;k<h?e.data.splice(k,h-k):k>h&&c.insertElements(h,k-h)},insertElements:function(c,e){for(var g=0;g<e;++g)this.addElementAndReset(c+g)},onDataPush:function(){var c=arguments.length;this.insertElements(this.getDataset().data.length-c,c)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(c,e){this.getMeta().data.splice(c,e),this.insertElements(c,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),nh.extend=B.inherits;var lb=nh,Jb=Math.PI*2;S._set("global",{elements:{arc:{backgroundColor:S.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});function oc(c,e){var g=e.startAngle,h=e.endAngle,k=e.pixelMargin,m=k/e.outerRadius,o=e.x,r=e.y;c.beginPath(),c.arc(o,r,e.outerRadius,g-m,h+m),e.innerRadius>k?(m=k/e.innerRadius,c.arc(o,r,e.innerRadius-k,h+m,g-m,!0)):c.arc(o,r,k,h+Math.PI/2,g-Math.PI/2),c.closePath(),c.clip()}function Eb(c,e,g,h){var k=g.endAngle,m;for(h&&(g.endAngle=g.startAngle+Jb,oc(c,g),g.endAngle=k,g.endAngle===g.startAngle&&g.fullCircles&&(g.endAngle+=Jb,g.fullCircles--)),c.beginPath(),c.arc(g.x,g.y,g.innerRadius,g.startAngle+Jb,g.startAngle,!0),m=0;m<g.fullCircles;++m)c.stroke();for(c.beginPath(),c.arc(g.x,g.y,e.outerRadius,g.startAngle,g.startAngle+Jb),m=0;m<g.fullCircles;++m)c.stroke()}function pc(c,e,g){var h=e.borderAlign==="inner";h?(c.lineWidth=e.borderWidth*2,c.lineJoin="round"):(c.lineWidth=e.borderWidth,c.lineJoin="bevel"),g.fullCircles&&Eb(c,e,g,h),h&&oc(c,g),c.beginPath(),c.arc(g.x,g.y,e.outerRadius,g.startAngle,g.endAngle),c.arc(g.x,g.y,g.innerRadius,g.endAngle,g.startAngle,!0),c.closePath(),c.stroke()}var Mc=cc.extend({_type:"arc",inLabelRange:function(c){var e=this._view;return e?Math.pow(c-e.x,2)<Math.pow(e.radius+e.hoverRadius,2):!1},inRange:function(c,e){var g=this._view;if(g){for(var h=B.getAngleFromPoint(g,{x:c,y:e}),k=h.angle,m=h.distance,o=g.startAngle,r=g.endAngle;r<o;)r+=Jb;for(;k>r;)k-=Jb;for(;k<o;)k+=Jb;var p=k>=o&&k<=r,s=m>=g.innerRadius&&m<=g.outerRadius;return p&&s}return!1},getCenterPoint:function(){var c=this._view,e=(c.startAngle+c.endAngle)/2,g=(c.innerRadius+c.outerRadius)/2;return{x:c.x+Math.cos(e)*g,y:c.y+Math.sin(e)*g}},getArea:function(){var c=this._view;return Math.PI*((c.endAngle-c.startAngle)/(2*Math.PI))*(Math.pow(c.outerRadius,2)-Math.pow(c.innerRadius,2))},tooltipPosition:function(){var c=this._view,e=c.startAngle+(c.endAngle-c.startAngle)/2,g=(c.outerRadius-c.innerRadius)/2+c.innerRadius;return{x:c.x+Math.cos(e)*g,y:c.y+Math.sin(e)*g}},draw:function(){var c=this._chart.ctx,e=this._view,g=e.borderAlign==="inner"?.33:0,h={x:e.x,y:e.y,innerRadius:e.innerRadius,outerRadius:Math.max(e.outerRadius-g,0),pixelMargin:g,startAngle:e.startAngle,endAngle:e.endAngle,fullCircles:Math.floor(e.circumference/Jb)},k;c.save(),c.fillStyle=e.backgroundColor,c.strokeStyle=e.borderColor;if(h.fullCircles){for(h.endAngle=h.startAngle+Jb,c.beginPath(),c.arc(h.x,h.y,h.outerRadius,h.startAngle,h.endAngle),c.arc(h.x,h.y,h.innerRadius,h.endAngle,h.startAngle,!0),c.closePath(),k=0;k<h.fullCircles;++k)c.fill();h.endAngle=h.startAngle+e.circumference%Jb}c.beginPath(),c.arc(h.x,h.y,h.outerRadius,h.startAngle,h.endAngle),c.arc(h.x,h.y,h.innerRadius,h.endAngle,h.startAngle,!0),c.closePath(),c.fill(),e.borderWidth&&pc(c,e,h),c.restore()}}),cd=B.valueOrDefault,Rj=S.global.defaultColor;S._set("global",{elements:{line:{tension:.4,backgroundColor:Rj,borderWidth:3,borderColor:Rj,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var ho=cc.extend({_type:"line",draw:function(){var c=this,e=c._view,g=c._chart.ctx,h=e.spanGaps,k=c._children.slice(),m=S.global,o=m.elements.line,r=-1,p=c._loop,s,w,z;if(!k.length)return;if(c._loop){for(s=0;s<k.length;++s){w=B.previousItem(k,s);if(!k[s]._view.skip&&w._view.skip){k=k.slice(s).concat(k.slice(0,s)),p=h;break}}p&&k.push(k[0])}for(g.save(),g.lineCap=e.borderCapStyle||o.borderCapStyle,g.setLineDash&&g.setLineDash(e.borderDash||o.borderDash),g.lineDashOffset=cd(e.borderDashOffset,o.borderDashOffset),g.lineJoin=e.borderJoinStyle||o.borderJoinStyle,g.lineWidth=cd(e.borderWidth,o.borderWidth),g.strokeStyle=e.borderColor||m.defaultColor,g.beginPath(),z=k[0]._view,z.skip||(g.moveTo(z.x,z.y),r=0),s=1;s<k.length;++s)z=k[s]._view,w=r===-1?B.previousItem(k,s):k[r],z.skip||(r!==s-1&&!h||r===-1?g.moveTo(z.x,z.y):B.canvas.lineTo(g,w._view,z),r=s);p&&g.closePath(),g.stroke(),g.restore()}}),io=B.valueOrDefault,ub=S.global.defaultColor;S._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:ub,borderColor:ub,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});function Ye(c){var e=this._view;return e?Math.abs(c-e.x)<e.radius+e.hitRadius:!1}function jo(c){var e=this._view;return e?Math.abs(c-e.y)<e.radius+e.hitRadius:!1}var Sj=cc.extend({_type:"point",inRange:function(c,e){var g=this._view;return g?Math.pow(c-g.x,2)+Math.pow(e-g.y,2)<Math.pow(g.hitRadius+g.radius,2):!1},inLabelRange:Ye,inXRange:Ye,inYRange:jo,getCenterPoint:function(){var c=this._view;return{x:c.x,y:c.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var c=this._view;return{x:c.x,y:c.y,padding:c.radius+c.borderWidth}},draw:function(c){var e=this._view,g=this._chart.ctx,h=e.pointStyle,k=e.rotation,m=e.radius,o=e.x,r=e.y,p=S.global,s=p.defaultColor;if(e.skip)return;(c===void 0||B.canvas._isPointInArea(e,c))&&(g.strokeStyle=e.borderColor||s,g.lineWidth=io(e.borderWidth,p.elements.point.borderWidth),g.fillStyle=e.backgroundColor||s,B.canvas.drawPoint(g,h,m,o,r,k))}}),oh=S.global.defaultColor;S._set("global",{elements:{rectangle:{backgroundColor:oh,borderColor:oh,borderSkipped:"bottom",borderWidth:0}}});function Vf(c){return c&&c.width!==void 0}function Tj(c){var e,g,h,k,m;return Vf(c)?(m=c.width/2,e=c.x-m,g=c.x+m,h=Math.min(c.y,c.base),k=Math.max(c.y,c.base)):(m=c.height/2,e=Math.min(c.x,c.base),g=Math.max(c.x,c.base),h=c.y-m,k=c.y+m),{left:e,top:h,right:g,bottom:k}}function Uj(c,e,g){return c===e?g:c===g?e:c}function ko(c){var e=c.borderSkipped,g={};return e?(c.horizontal?c.base>c.x&&(e=Uj(e,"left","right")):c.base<c.y&&(e=Uj(e,"bottom","top")),g[e]=!0,g):g}function lo(c,e,g){var h=c.borderWidth,k=ko(c),m,o,r,p;return B.isObject(h)?(m=+h.top||0,o=+h.right||0,r=+h.bottom||0,p=+h.left||0):m=o=r=p=+h||0,{t:k.top||m<0?0:m>g?g:m,r:k.right||o<0?0:o>e?e:o,b:k.bottom||r<0?0:r>g?g:r,l:k.left||p<0?0:p>e?e:p}}function mo(c){var e=Tj(c),g=e.right-e.left,h=e.bottom-e.top,k=lo(c,g/2,h/2);return{outer:{x:e.left,y:e.top,w:g,h},inner:{x:e.left+k.l,y:e.top+k.t,w:g-k.l-k.r,h:h-k.t-k.b}}}function ce(c,e,g){var h=e===null,k=g===null,m=!c||h&&k?!1:Tj(c);return m&&(h||e>=m.left&&e<=m.right)&&(k||g>=m.top&&g<=m.bottom)}var Vj=cc.extend({_type:"rectangle",draw:function(){var c=this._chart.ctx,e=this._view,g=mo(e),h=g.outer,k=g.inner;c.fillStyle=e.backgroundColor,c.fillRect(h.x,h.y,h.w,h.h);if(h.w===k.w&&h.h===k.h)return;c.save(),c.beginPath(),c.rect(h.x,h.y,h.w,h.h),c.clip(),c.fillStyle=e.borderColor,c.rect(k.x,k.y,k.w,k.h),c.fill("evenodd"),c.restore()},height:function(){var c=this._view;return c.base-c.y},inRange:function(c,e){return ce(this._view,c,e)},inLabelRange:function(c,e){var g=this._view;return Vf(g)?ce(g,c,null):ce(g,null,e)},inXRange:function(c){return ce(this._view,c,null)},inYRange:function(c){return ce(this._view,null,c)},getCenterPoint:function(){var c=this._view,e,g;return Vf(c)?(e=c.x,g=(c.y+c.base)/2):(e=(c.x+c.base)/2,g=c.y),{x:e,y:g}},getArea:function(){var c=this._view;return Vf(c)?c.width*Math.abs(c.y-c.base):c.height*Math.abs(c.x-c.base)},tooltipPosition:function(){var c=this._view;return{x:c.x,y:c.y}}}),Wb={},no=Mc,oo=ho,Wj=Sj,Ze=Vj;Wb.Arc=no,Wb.Line=oo,Wb.Point=Wj,Wb.Rectangle=Ze;var de=B._deprecated,ee=B.valueOrDefault;S._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),S._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});function po(c,e){var g=c._length,h,k,m,o;for(m=1,o=e.length;m<o;++m)g=Math.min(g,Math.abs(e[m]-e[m-1]));for(m=0,o=c.getTicks().length;m<o;++m)k=c.getPixelForTick(m),g=m>0?Math.min(g,Math.abs(k-h)):g,h=k;return g}function _e(c,e,g){var h=g.barThickness,k=e.stackCount,m=e.pixels[c],o=B.isNullOrUndef(h)?po(e.scale,e.pixels):-1,r,p;return B.isNullOrUndef(h)?(r=o*g.categoryPercentage,p=g.barPercentage):(r=h*k,p=1),{chunk:r/k,ratio:p,start:m-r/2}}function Wf(c,e,g){var h=e.pixels,k=h[c],m=c>0?h[c-1]:null,o=c<h.length-1?h[c+1]:null,r=g.categoryPercentage,p,s;return m===null&&(m=k-(o===null?e.end-e.start:o-k)),o===null&&(o=k+k-m),p=k-(k-Math.min(m,o))/2*r,s=Math.abs(o-m)/2*r,{chunk:s/e.stackCount,ratio:g.barPercentage,start:p}}var ph=lb.extend({dataElementType:Wb.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var c=this,e,g;lb.prototype.initialize.apply(c,arguments),e=c.getMeta(),e.stack=c.getDataset().stack,e.bar=!0,g=c._getIndexScale().options,de("bar chart",g.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),de("bar chart",g.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),de("bar chart",g.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),de("bar chart",c._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),de("bar chart",g.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(c){var e=this,g=e.getMeta().data,h,k;for(e._ruler=e.getRuler(),h=0,k=g.length;h<k;++h)e.updateElement(g[h],h,c)},updateElement:function(c,e,g){var h=this,k=h.getMeta(),m=h.getDataset(),o=h._resolveDataElementOptions(c,e);c._xScale=h.getScaleForId(k.xAxisID),c._yScale=h.getScaleForId(k.yAxisID),c._datasetIndex=h.index,c._index=e,c._model={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderSkipped:o.borderSkipped,borderWidth:o.borderWidth,datasetLabel:m.label,label:h.chart.data.labels[e]},B.isArray(m.data[e])&&(c._model.borderSkipped=null),h._updateElementGeometry(c,e,g,o),c.pivot()},_updateElementGeometry:function(c,e,g,h){var k=this,m=c._model,o=k._getValueScale(),r=o.getBasePixel(),p=o.isHorizontal(),s=k._ruler||k.getRuler(),w=k.calculateBarValuePixels(k.index,e,h),z=k.calculateBarIndexPixels(k.index,e,s,h);m.horizontal=p,m.base=g?r:w.base,m.x=p?g?r:w.head:z.center,m.y=p?z.center:g?r:w.head,m.height=p?z.size:void 0,m.width=p?void 0:z.size},_getStacks:function(c){var e=this,g=e._getIndexScale(),h=g._getMatchingVisibleMetas(e._type),k=g.options.stacked,m=h.length,o=[],r,p;for(r=0;r<m;++r){p=h[r],(k===!1||o.indexOf(p.stack)===-1||k===void 0&&p.stack===void 0)&&o.push(p.stack);if(p.index===c)break}return o},getStackCount:function(){return this._getStacks().length},getStackIndex:function(c,e){var g=this._getStacks(c),h=e!==void 0?g.indexOf(e):-1;return h===-1?g.length-1:h},getRuler:function(){var c=this,e=c._getIndexScale(),g=[],h,k;for(h=0,k=c.getMeta().data.length;h<k;++h)g.push(e.getPixelForValue(null,h,c.index));return{pixels:g,start:e._startPixel,end:e._endPixel,stackCount:c.getStackCount(),scale:e}},calculateBarValuePixels:function(c,e,g){var h=this,k=h.chart,m=h._getValueScale(),o=m.isHorizontal(),r=k.data.datasets,p=m._getMatchingVisibleMetas(h._type),s=m._parseValue(r[c].data[e]),w=g.minBarLength,z=m.options.stacked,D=h.getMeta().stack,M=s.start===void 0?0:s.max>=0&&s.min>=0?s.min:s.max,P=s.start===void 0?s.end:s.max>=0&&s.min>=0?s.max-s.min:s.min-s.max,T=p.length,Y,ga,wa,Aa,Na,Ha,Xa;if(z||z===void 0&&D!==void 0)for(Y=0;Y<T;++Y){ga=p[Y];if(ga.index===c)break;ga.stack===D&&(Xa=m._parseValue(r[ga.index].data[e]),wa=Xa.start===void 0?Xa.end:Xa.min>=0&&Xa.max>=0?Xa.max:Xa.min,(s.min<0&&wa<0||s.max>=0&&wa>0)&&(M+=wa))}return Aa=m.getPixelForValue(M),Na=m.getPixelForValue(M+P),Ha=Na-Aa,w!==void 0&&Math.abs(Ha)<w&&(Ha=w,P>=0&&!o||P<0&&o?Na=Aa-w:Na=Aa+w),{size:Ha,base:Aa,head:Na,center:Na+Ha/2}},calculateBarIndexPixels:function(c,e,g,h){var k=this,m=h.barThickness==="flex"?Wf(e,g,h):_e(e,g,h),o=k.getStackIndex(c,k.getMeta().stack),r=m.start+m.chunk*o+m.chunk/2,p=Math.min(ee(h.maxBarThickness,Infinity),m.chunk*m.ratio);return{base:r-p/2,head:r+p/2,center:r,size:p}},draw:function(){var c=this,e=c.chart,g=c._getValueScale(),h=c.getMeta().data,k=c.getDataset(),m=h.length,o=0;for(B.canvas.clipArea(e.ctx,e.chartArea);o<m;++o){var r=g._parseValue(k.data[o]);!isNaN(r.min)&&!isNaN(r.max)&&h[o].draw()}B.canvas.unclipArea(e.ctx)},_resolveDataElementOptions:function(){var c=this,e=B.extend({},lb.prototype._resolveDataElementOptions.apply(c,arguments)),g=c._getIndexScale().options,h=c._getValueScale().options;return e.barPercentage=ee(g.barPercentage,e.barPercentage),e.barThickness=ee(g.barThickness,e.barThickness),e.categoryPercentage=ee(g.categoryPercentage,e.categoryPercentage),e.maxBarThickness=ee(g.maxBarThickness,e.maxBarThickness),e.minBarLength=ee(h.minBarLength,e.minBarLength),e}}),vd=B.valueOrDefault,Nc=B.options.resolve;S._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(c,e){var g=e.datasets[c.datasetIndex].label||"",h=e.datasets[c.datasetIndex].data[c.index];return g+": ("+c.xLabel+", "+c.yLabel+", "+h.r+")"}}}});var qo=lb.extend({dataElementType:Wb.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(c){var e=this,g=e.getMeta(),h=g.data;B.each(h,function(k,m){e.updateElement(k,m,c)})},updateElement:function(c,e,g){var h=this,k=h.getMeta(),m=c.custom||{},o=h.getScaleForId(k.xAxisID),r=h.getScaleForId(k.yAxisID),p=h._resolveDataElementOptions(c,e),s=h.getDataset().data[e],w=h.index,z=g?o.getPixelForDecimal(.5):o.getPixelForValue(typeof s==="object"?s:NaN,e,w),D=g?r.getBasePixel():r.getPixelForValue(s,e,w);c._xScale=o,c._yScale=r,c._options=p,c._datasetIndex=w,c._index=e,c._model={backgroundColor:p.backgroundColor,borderColor:p.borderColor,borderWidth:p.borderWidth,hitRadius:p.hitRadius,pointStyle:p.pointStyle,rotation:p.rotation,radius:g?0:p.radius,skip:m.skip||isNaN(z)||isNaN(D),x:z,y:D},c.pivot()},setHoverStyle:function(c){var e=c._model,g=c._options,h=B.getHoverColor;c.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=vd(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=vd(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=vd(g.hoverBorderWidth,g.borderWidth),e.radius=g.radius+g.hoverRadius},_resolveDataElementOptions:function(c,e){var g=this,h=g.chart,k=g.getDataset(),m=c.custom||{},o=k.data[e]||{},r=lb.prototype._resolveDataElementOptions.apply(g,arguments),p={chart:h,dataIndex:e,dataset:k,datasetIndex:g.index};return g._cachedDataOpts===r&&(r=B.extend({},r)),r.radius=Nc([m.radius,o.r,g._config.radius,h.options.elements.point.radius],p,e),r}}),Xf=B.valueOrDefault,wd=Math.PI,Oc=wd*2,xd=wd/2;S._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(c){var e=document.createElement("ul"),g=c.data,h=g.datasets,k=g.labels,m,o,r,p;e.setAttribute("class",c.id+"-legend");if(h.length)for(m=0,o=h[0].data.length;m<o;++m)r=e.appendChild(document.createElement("li")),p=r.appendChild(document.createElement("span")),p.style.backgroundColor=h[0].backgroundColor[m],k[m]&&r.appendChild(document.createTextNode(k[m]));return e.outerHTML},legend:{labels:{generateLabels:function(c){var e=c.data;return e.labels.length&&e.datasets.length?e.labels.map(function(g,h){var k=c.getDatasetMeta(0),m=k.controller.getStyle(h);return{text:g,fillStyle:m.backgroundColor,strokeStyle:m.borderColor,lineWidth:m.borderWidth,hidden:isNaN(e.datasets[0].data[h])||k.data[h].hidden,index:h}}):[]}},onClick:function(c,e){var g=e.index,h=this.chart,k,m,o;for(k=0,m=(h.data.datasets||[]).length;k<m;++k)o=h.getDatasetMeta(k),o.data[g]&&(o.data[g].hidden=!o.data[g].hidden);h.update()}},cutoutPercentage:50,rotation:-xd,circumference:Oc,tooltips:{callbacks:{title:function(){return""},label:function(c,e){var g=e.labels[c.index],h=": "+e.datasets[c.datasetIndex].data[c.index];return B.isArray(g)?(g=g.slice(),g[0]+=h):g+=h,g}}}});var Xj=lb.extend({dataElementType:Wb.Arc,linkScales:B.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(c){for(var e=0,g=0;g<c;++g)this.chart.isDatasetVisible(g)&&++e;return e},update:function(c){var e=this,g=e.chart,h=g.chartArea,k=g.options,m=1,o=1,r=0,p=0,s=e.getMeta(),w=s.data,z=k.cutoutPercentage/100||0,D=k.circumference,M=e._getRingWeight(e.index),P,T,Y,ga;if(D<Oc){var wa=k.rotation%Oc;wa+=wa>=wd?-Oc:wa<-wd?Oc:0;var Aa=wa+D,Na=Math.cos(wa),Ha=Math.sin(wa),Xa=Math.cos(Aa),hb=Math.sin(Aa),$a=wa<=0&&Aa>=0||Aa>=Oc,cb=wa<=xd&&Aa>=xd||Aa>=Oc+xd,Kb=wa===-wd||Aa>=wd,Fb=wa<=-xd&&Aa>=-xd||Aa>=wd+xd,Bb=Kb?-1:Math.min(Na,Na*z,Xa,Xa*z),Nb=Fb?-1:Math.min(Ha,Ha*z,hb,hb*z),ne=$a?1:Math.max(Na,Na*z,Xa,Xa*z),hd=cb?1:Math.max(Ha,Ha*z,hb,hb*z);m=(ne-Bb)/2,o=(hd-Nb)/2,r=-(ne+Bb)/2,p=-(hd+Nb)/2}for(Y=0,ga=w.length;Y<ga;++Y)w[Y]._options=e._resolveDataElementOptions(w[Y],Y);for(g.borderWidth=e.getMaxBorderWidth(),P=(h.right-h.left-g.borderWidth)/m,T=(h.bottom-h.top-g.borderWidth)/o,g.outerRadius=Math.max(Math.min(P,T)/2,0),g.innerRadius=Math.max(g.outerRadius*z,0),g.radiusLength=(g.outerRadius-g.innerRadius)/(e._getVisibleDatasetWeightTotal()||1),g.offsetX=r*g.outerRadius,g.offsetY=p*g.outerRadius,s.total=e.calculateTotal(),e.outerRadius=g.outerRadius-g.radiusLength*e._getRingWeightOffset(e.index),e.innerRadius=Math.max(e.outerRadius-g.radiusLength*M,0),Y=0,ga=w.length;Y<ga;++Y)e.updateElement(w[Y],Y,c)},updateElement:function(c,e,g){var h=this,k=h.chart,m=k.chartArea,o=k.options,r=o.animation,p=(m.left+m.right)/2,s=(m.top+m.bottom)/2,w=o.rotation,z=o.rotation,D=h.getDataset(),M=g&&r.animateRotate?0:c.hidden?0:h.calculateCircumference(D.data[e])*(o.circumference/Oc),P=g&&r.animateScale?0:h.innerRadius,T=g&&r.animateScale?0:h.outerRadius,Y=c._options||{};B.extend(c,{_datasetIndex:h.index,_index:e,_model:{backgroundColor:Y.backgroundColor,borderColor:Y.borderColor,borderWidth:Y.borderWidth,borderAlign:Y.borderAlign,x:p+k.offsetX,y:s+k.offsetY,startAngle:w,endAngle:z,circumference:M,outerRadius:T,innerRadius:P,label:B.valueAtIndexOrDefault(D.label,e,k.data.labels[e])}});var ga=c._model;(!g||!r.animateRotate)&&(e===0?ga.startAngle=o.rotation:ga.startAngle=h.getMeta().data[e-1]._model.endAngle,ga.endAngle=ga.startAngle+ga.circumference),c.pivot()},calculateTotal:function(){var c=this.getDataset(),e=this.getMeta(),g=0,h;return B.each(e.data,function(k,m){h=c.data[m],!isNaN(h)&&!k.hidden&&(g+=Math.abs(h))}),g},calculateCircumference:function(c){var e=this.getMeta().total;return e>0&&!isNaN(c)?Oc*(Math.abs(c)/e):0},getMaxBorderWidth:function(c){var e=this,g=0,h=e.chart,k,m,o,r,p,s,w,z;if(!c){for(k=0,m=h.data.datasets.length;k<m;++k)if(h.isDatasetVisible(k)){o=h.getDatasetMeta(k),c=o.data,k!==e.index&&(p=o.controller);break}}if(!c)return 0;for(k=0,m=c.length;k<m;++k)r=c[k],p?(p._configure(),s=p._resolveDataElementOptions(r,k)):s=r._options,s.borderAlign!=="inner"&&(w=s.borderWidth,z=s.hoverBorderWidth,g=w>g?w:g,g=z>g?z:g);return g},setHoverStyle:function(c){var e=c._model,g=c._options,h=B.getHoverColor;c.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=Xf(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=Xf(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=Xf(g.hoverBorderWidth,g.borderWidth)},_getRingWeightOffset:function(c){for(var e=0,g=0;g<c;++g)this.chart.isDatasetVisible(g)&&(e+=this._getRingWeight(g));return e},_getRingWeight:function(c){return Math.max(Xf(this.chart.data.datasets[c].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});S._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),S._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var ro=ph.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Pc=B.valueOrDefault,qh=B.options.resolve,rh=B.canvas._isPointInArea;S._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});function sh(c,e){var g=c&&c.options.ticks||{},h=g.reverse,k=g.min===void 0?e:0,m=g.max===void 0?e:0;return{start:h?m:k,end:h?k:m}}function so(c,e,g){var h=g/2,k=sh(c,h),m=sh(e,h);return{top:m.end,right:k.end,bottom:m.start,left:k.start}}function to(c){var e,g,h,k;return B.isObject(c)?(e=c.top,g=c.right,h=c.bottom,k=c.left):e=g=h=k=c,{top:e,right:g,bottom:h,left:k}}var Yj=lb.extend({datasetElementType:Wb.Line,dataElementType:Wb.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(c){var e=this,g=e.getMeta(),h=g.dataset,k=g.data||[],m=e.chart.options,o=e._config,r=e._showLine=Pc(o.showLine,m.showLines),p,s;for(e._xScale=e.getScaleForId(g.xAxisID),e._yScale=e.getScaleForId(g.yAxisID),r&&(o.tension!==void 0&&o.lineTension===void 0&&(o.lineTension=o.tension),h._scale=e._yScale,h._datasetIndex=e.index,h._children=k,h._model=e._resolveDatasetElementOptions(h),h.pivot()),p=0,s=k.length;p<s;++p)e.updateElement(k[p],p,c);for(r&&h._model.tension!==0&&e.updateBezierControlPoints(),p=0,s=k.length;p<s;++p)k[p].pivot()},updateElement:function(c,e,g){var h=this,k=h.getMeta(),m=c.custom||{},o=h.getDataset(),r=h.index,p=o.data[e],s=h._xScale,w=h._yScale,z=k.dataset._model,D,M,P=h._resolveDataElementOptions(c,e);D=s.getPixelForValue(typeof p==="object"?p:NaN,e,r),M=g?w.getBasePixel():h.calculatePointY(p,e,r),c._xScale=s,c._yScale=w,c._options=P,c._datasetIndex=r,c._index=e,c._model={x:D,y:M,skip:m.skip||isNaN(D)||isNaN(M),radius:P.radius,pointStyle:P.pointStyle,rotation:P.rotation,backgroundColor:P.backgroundColor,borderColor:P.borderColor,borderWidth:P.borderWidth,tension:Pc(m.tension,z?z.tension:0),steppedLine:z?z.steppedLine:!1,hitRadius:P.hitRadius}},_resolveDatasetElementOptions:function(c){var e=this,g=e._config,h=c.custom||{},k=e.chart.options,m=k.elements.line,o=lb.prototype._resolveDatasetElementOptions.apply(e,arguments);return o.spanGaps=Pc(g.spanGaps,k.spanGaps),o.tension=Pc(g.lineTension,m.tension),o.steppedLine=qh([h.steppedLine,g.steppedLine,m.stepped]),o.clip=to(Pc(g.clip,so(e._xScale,e._yScale,o.borderWidth))),o},calculatePointY:function(c,e,g){var h=this,k=h.chart,m=h._yScale,o=0,r=0,p,s,w,z,D,M,P;if(m.options.stacked){for(D=+m.getRightValue(c),M=k._getSortedVisibleDatasetMetas(),P=M.length,p=0;p<P;++p){w=M[p];if(w.index===g)break;s=k.data.datasets[w.index],w.type==="line"&&w.yAxisID===m.id&&(z=+m.getRightValue(s.data[e]),z<0?r+=z||0:o+=z||0)}return D<0?m.getPixelForValue(r+D):m.getPixelForValue(o+D)}return m.getPixelForValue(c)},updateBezierControlPoints:function(){var c=this,e=c.chart,g=c.getMeta(),h=g.dataset._model,k=e.chartArea,m=g.data||[],o,r,p,s;h.spanGaps&&(m=m.filter(function(z){return!z._model.skip}));function w(z,D,M){return Math.max(Math.min(z,M),D)}if(h.cubicInterpolationMode==="monotone")B.splineCurveMonotone(m);else for(o=0,r=m.length;o<r;++o)p=m[o]._model,s=B.splineCurve(B.previousItem(m,o)._model,p,B.nextItem(m,o)._model,h.tension),p.controlPointPreviousX=s.previous.x,p.controlPointPreviousY=s.previous.y,p.controlPointNextX=s.next.x,p.controlPointNextY=s.next.y;if(e.options.elements.line.capBezierPoints)for(o=0,r=m.length;o<r;++o)p=m[o]._model,rh(p,k)&&(o>0&&rh(m[o-1]._model,k)&&(p.controlPointPreviousX=w(p.controlPointPreviousX,k.left,k.right),p.controlPointPreviousY=w(p.controlPointPreviousY,k.top,k.bottom)),o<m.length-1&&rh(m[o+1]._model,k)&&(p.controlPointNextX=w(p.controlPointNextX,k.left,k.right),p.controlPointNextY=w(p.controlPointNextY,k.top,k.bottom)))},draw:function(){var c=this,e=c.chart,g=c.getMeta(),h=g.data||[],k=e.chartArea,m=e.canvas,o=0,r=h.length,p;for(c._showLine&&(p=g.dataset._model.clip,B.canvas.clipArea(e.ctx,{left:p.left===!1?0:k.left-p.left,right:p.right===!1?m.width:k.right+p.right,top:p.top===!1?0:k.top-p.top,bottom:p.bottom===!1?m.height:k.bottom+p.bottom}),g.dataset.draw(),B.canvas.unclipArea(e.ctx));o<r;++o)h[o].draw(k)},setHoverStyle:function(c){var e=c._model,g=c._options,h=B.getHoverColor;c.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Pc(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=Pc(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=Pc(g.hoverBorderWidth,g.borderWidth),e.radius=Pc(g.hoverRadius,g.radius)}}),uo=B.options.resolve;S._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(c){var e=document.createElement("ul"),g=c.data,h=g.datasets,k=g.labels,m,o,r,p;e.setAttribute("class",c.id+"-legend");if(h.length)for(m=0,o=h[0].data.length;m<o;++m)r=e.appendChild(document.createElement("li")),p=r.appendChild(document.createElement("span")),p.style.backgroundColor=h[0].backgroundColor[m],k[m]&&r.appendChild(document.createTextNode(k[m]));return e.outerHTML},legend:{labels:{generateLabels:function(c){var e=c.data;return e.labels.length&&e.datasets.length?e.labels.map(function(g,h){var k=c.getDatasetMeta(0),m=k.controller.getStyle(h);return{text:g,fillStyle:m.backgroundColor,strokeStyle:m.borderColor,lineWidth:m.borderWidth,hidden:isNaN(e.datasets[0].data[h])||k.data[h].hidden,index:h}}):[]}},onClick:function(c,e){var g=e.index,h=this.chart,k,m,o;for(k=0,m=(h.data.datasets||[]).length;k<m;++k)o=h.getDatasetMeta(k),o.data[g].hidden=!o.data[g].hidden;h.update()}},tooltips:{callbacks:{title:function(){return""},label:function(c,e){return e.labels[c.index]+": "+c.yLabel}}}});var vo=lb.extend({dataElementType:Wb.Arc,linkScales:B.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(c){var e=this,g=e.getDataset(),h=e.getMeta(),k=e.chart.options.startAngle||0,m=e._starts=[],o=e._angles=[],r=h.data,p,s,w;for(e._updateRadius(),h.count=e.countVisibleElements(),p=0,s=g.data.length;p<s;p++)m[p]=k,w=e._computeAngle(p),o[p]=w,k+=w;for(p=0,s=r.length;p<s;++p)r[p]._options=e._resolveDataElementOptions(r[p],p),e.updateElement(r[p],p,c)},_updateRadius:function(){var c=this,e=c.chart,g=e.chartArea,h=e.options,k=Math.min(g.right-g.left,g.bottom-g.top);e.outerRadius=Math.max(k/2,0),e.innerRadius=Math.max(h.cutoutPercentage?e.outerRadius/100*h.cutoutPercentage:1,0),e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount(),c.outerRadius=e.outerRadius-e.radiusLength*c.index,c.innerRadius=c.outerRadius-e.radiusLength},updateElement:function(c,e,g){var h=this,k=h.chart,m=h.getDataset(),o=k.options,r=o.animation,p=k.scale,s=k.data.labels,w=p.xCenter,z=p.yCenter,D=o.startAngle,M=c.hidden?0:p.getDistanceFromCenterForValue(m.data[e]),P=h._starts[e],T=P+(c.hidden?0:h._angles[e]),Y=r.animateScale?0:p.getDistanceFromCenterForValue(m.data[e]),ga=c._options||{};B.extend(c,{_datasetIndex:h.index,_index:e,_scale:p,_model:{backgroundColor:ga.backgroundColor,borderColor:ga.borderColor,borderWidth:ga.borderWidth,borderAlign:ga.borderAlign,x:w,y:z,innerRadius:0,outerRadius:g?Y:M,startAngle:g&&r.animateRotate?D:P,endAngle:g&&r.animateRotate?D:T,label:B.valueAtIndexOrDefault(s,e,s[e])}}),c.pivot()},countVisibleElements:function(){var c=this.getDataset(),e=this.getMeta(),g=0;return B.each(e.data,function(h,k){!isNaN(c.data[k])&&!h.hidden&&g++}),g},setHoverStyle:function(c){var e=c._model,g=c._options,h=B.getHoverColor,k=B.valueOrDefault;c.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=k(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=k(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=k(g.hoverBorderWidth,g.borderWidth)},_computeAngle:function(c){var e=this,g=this.getMeta().count,h=e.getDataset(),k=e.getMeta();if(isNaN(h.data[c])||k.data[c].hidden)return 0;var m={chart:e.chart,dataIndex:c,dataset:h,datasetIndex:e.index};return uo([e.chart.options.elements.arc.angle,2*Math.PI/g],m,c)}});S._set("pie",B.clone(S.doughnut)),S._set("pie",{cutoutPercentage:0});var wo=Xj,yd=B.valueOrDefault;S._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var xo=lb.extend({datasetElementType:Wb.Line,dataElementType:Wb.Point,linkScales:B.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(c){var e=this,g=e.getMeta(),h=g.dataset,k=g.data||[],m=e.chart.scale,o=e._config,r,p;for(o.tension!==void 0&&o.lineTension===void 0&&(o.lineTension=o.tension),h._scale=m,h._datasetIndex=e.index,h._children=k,h._loop=!0,h._model=e._resolveDatasetElementOptions(h),h.pivot(),r=0,p=k.length;r<p;++r)e.updateElement(k[r],r,c);for(e.updateBezierControlPoints(),r=0,p=k.length;r<p;++r)k[r].pivot()},updateElement:function(c,e,g){var h=this,k=c.custom||{},m=h.getDataset(),o=h.chart.scale,r=o.getPointPositionForValue(e,m.data[e]),p=h._resolveDataElementOptions(c,e),s=h.getMeta().dataset._model,w=g?o.xCenter:r.x,z=g?o.yCenter:r.y;c._scale=o,c._options=p,c._datasetIndex=h.index,c._index=e,c._model={x:w,y:z,skip:k.skip||isNaN(w)||isNaN(z),radius:p.radius,pointStyle:p.pointStyle,rotation:p.rotation,backgroundColor:p.backgroundColor,borderColor:p.borderColor,borderWidth:p.borderWidth,tension:yd(k.tension,s?s.tension:0),hitRadius:p.hitRadius}},_resolveDatasetElementOptions:function(){var c=this,e=c._config,g=c.chart.options,h=lb.prototype._resolveDatasetElementOptions.apply(c,arguments);return h.spanGaps=yd(e.spanGaps,g.spanGaps),h.tension=yd(e.lineTension,g.elements.line.tension),h},updateBezierControlPoints:function(){var c=this,e=c.getMeta(),g=c.chart.chartArea,h=e.data||[],k,m,o,r;e.dataset._model.spanGaps&&(h=h.filter(function(s){return!s._model.skip}));function p(s,w,z){return Math.max(Math.min(s,z),w)}for(k=0,m=h.length;k<m;++k)o=h[k]._model,r=B.splineCurve(B.previousItem(h,k,!0)._model,o,B.nextItem(h,k,!0)._model,o.tension),o.controlPointPreviousX=p(r.previous.x,g.left,g.right),o.controlPointPreviousY=p(r.previous.y,g.top,g.bottom),o.controlPointNextX=p(r.next.x,g.left,g.right),o.controlPointNextY=p(r.next.y,g.top,g.bottom)},setHoverStyle:function(c){var e=c._model,g=c._options,h=B.getHoverColor;c.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=yd(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=yd(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=yd(g.hoverBorderWidth,g.borderWidth),e.radius=yd(g.hoverRadius,g.radius)}});S._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(c){return"("+c.xLabel+", "+c.yLabel+")"}}}}),S._set("global",{datasets:{scatter:{showLine:!1}}});var yo=Yj,Zj={bar:ph,bubble:qo,doughnut:Xj,horizontalBar:ro,line:Yj,polarArea:vo,pie:wo,radar:xo,scatter:yo};function zd(c,e){return c.native?{x:c.x,y:c.y}:B.getRelativePosition(c,e)}function $e(c,e){var g=c._getSortedVisibleDatasetMetas(),h,k,m,o,r,p;for(k=0,o=g.length;k<o;++k)for(h=g[k].data,m=0,r=h.length;m<r;++m)p=h[m],p._view.skip||e(p)}function th(c,e){var g=[];return $e(c,function(h){h.inRange(e.x,e.y)&&g.push(h)}),g}function uh(c,e,g,h){var k=Number.POSITIVE_INFINITY,m=[];return $e(c,function(o){if(g&&!o.inRange(e.x,e.y))return;var r=o.getCenterPoint(),p=h(e,r);p<k?(m=[o],k=p):p===k&&m.push(o)}),m}function vh(c){var e=c.indexOf("x")!==-1,g=c.indexOf("y")!==-1;return function(h,k){var m=e?Math.abs(h.x-k.x):0,o=g?Math.abs(h.y-k.y):0;return Math.sqrt(Math.pow(m,2)+Math.pow(o,2))}}function af(c,e,g){var h=zd(e,c);g.axis=g.axis||"x";var k=vh(g.axis),m=g.intersect?th(c,h):uh(c,h,!1,k),o=[];return m.length?(c._getSortedVisibleDatasetMetas().forEach(function(r){var p=r.data[m[0]._index];p&&!p._view.skip&&o.push(p)}),o):[]}var dd={modes:{single:function(c,e){var g=zd(e,c),h=[];return $e(c,function(k){if(k.inRange(g.x,g.y))return h.push(k),h}),h.slice(0,1)},label:af,index:af,dataset:function(c,e,g){var h=zd(e,c);g.axis=g.axis||"xy";var k=vh(g.axis),m=g.intersect?th(c,h):uh(c,h,!1,k);return m.length>0&&(m=c.getDatasetMeta(m[0]._datasetIndex).data),m},"x-axis":function(c,e){return af(c,e,{intersect:!1})},point:function(c,e){var g=zd(e,c);return th(c,g)},nearest:function(c,e,g){var h=zd(e,c);g.axis=g.axis||"xy";var k=vh(g.axis);return uh(c,h,g.intersect,k)},x:function(c,e,g){var h=zd(e,c),k=[],m=!1;return $e(c,function(o){o.inXRange(h.x)&&k.push(o),o.inRange(h.x,h.y)&&(m=!0)}),g.intersect&&!m&&(k=[]),k},y:function(c,e,g){var h=zd(e,c),k=[],m=!1;return $e(c,function(o){o.inYRange(h.y)&&k.push(o),o.inRange(h.x,h.y)&&(m=!0)}),g.intersect&&!m&&(k=[]),k}}},wh=B.extend;function fe(c,e){return B.where(c,function(g){return g.pos===e})}function bf(c,e){return c.sort(function(g,h){var k=e?h:g,m=e?g:h;return k.weight===m.weight?k.index-m.index:k.weight-m.weight})}function zo(c){var e=[],g,h,k;for(g=0,h=(c||[]).length;g<h;++g)k=c[g],e.push({index:g,box:k,pos:k.position,horizontal:k.isHorizontal(),weight:k.weight});return e}function Ao(c,e){var g,h,k;for(g=0,h=c.length;g<h;++g)k=c[g],k.width=k.horizontal?k.box.fullWidth&&e.availableWidth:e.vBoxMaxWidth,k.height=k.horizontal&&e.hBoxMaxHeight}function Bo(c){var e=zo(c),g=bf(fe(e,"left"),!0),h=bf(fe(e,"right")),k=bf(fe(e,"top"),!0),m=bf(fe(e,"bottom"));return{leftAndTop:g.concat(k),rightAndBottom:h.concat(m),chartArea:fe(e,"chartArea"),vertical:g.concat(h),horizontal:k.concat(m)}}function _j(c,e,g,h){return Math.max(c[g],e[g])+Math.max(c[h],e[h])}function $j(c,e,g){var h=g.box,k=c.maxPadding,m,o;g.size&&(c[g.pos]-=g.size),g.size=g.horizontal?h.height:h.width,c[g.pos]+=g.size;if(h.getPadding){var r=h.getPadding();k.top=Math.max(k.top,r.top),k.left=Math.max(k.left,r.left),k.bottom=Math.max(k.bottom,r.bottom),k.right=Math.max(k.right,r.right)}m=e.outerWidth-_j(k,c,"left","right"),o=e.outerHeight-_j(k,c,"top","bottom");if(m!==c.w||o!==c.h)return c.w=m,c.h=o,g.horizontal?m!==c.w:o!==c.h}function pb(c){var e=c.maxPadding;function g(h){var k=Math.max(e[h]-c[h],0);return c[h]+=k,k}c.y+=g("top"),c.x+=g("left"),g("right"),g("bottom")}function cf(c,e){var g=e.maxPadding;function h(k){var m={left:0,top:0,right:0,bottom:0};return k.forEach(function(o){m[o]=Math.max(e[o],g[o])}),m}return c?h(["left","right"]):h(["top","bottom"])}function ed(c,e,g){var h=[],k,m,o,r,p,s;for(k=0,m=c.length;k<m;++k)o=c[k],r=o.box,r.update(o.width||e.w,o.height||e.h,cf(o.horizontal,e)),$j(e,g,o)&&(s=!0,h.length&&(p=!0)),r.fullWidth||h.push(o);return p?ed(h,e,g)||s:s}function ak(c,e,g){var h=g.padding,k=e.x,m=e.y,o,r,p,s;for(o=0,r=c.length;o<r;++o)p=c[o],s=p.box,p.horizontal?(s.left=s.fullWidth?h.left:e.left,s.right=s.fullWidth?g.outerWidth-h.right:e.left+e.w,s.top=m,s.bottom=m+s.height,s.width=s.right-s.left,m=s.bottom):(s.left=k,s.right=k+s.width,s.top=e.top,s.bottom=e.top+e.h,s.height=s.bottom-s.top,k=s.right);e.x=k,e.y=m}S._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var dc={defaults:{},addBox:function(c,e){c.boxes||(c.boxes=[]),e.fullWidth=e.fullWidth||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw:function(){e.draw.apply(e,arguments)}}]},c.boxes.push(e)},removeBox:function(c,e){var g=c.boxes?c.boxes.indexOf(e):-1;g!==-1&&c.boxes.splice(g,1)},configure:function(c,e,g){for(var h=["fullWidth","position","weight"],k=h.length,m=0,o;m<k;++m)o=h[m],g.hasOwnProperty(o)&&(e[o]=g[o])},update:function(c,e,g){if(!c)return;var h=c.options.layout||{},k=B.options.toPadding(h.padding),m=e-k.width,o=g-k.height,r=Bo(c.boxes),p=r.vertical,s=r.horizontal,w=Object.freeze({outerWidth:e,outerHeight:g,padding:k,availableWidth:m,vBoxMaxWidth:m/2/p.length,hBoxMaxHeight:o/2}),z=wh({maxPadding:wh({},k),w:m,h:o,x:k.left,y:k.top},k);Ao(p.concat(s),w),ed(p,z,w),ed(s,z,w)&&ed(p,z,w),pb(z),ak(r.leftAndTop,z,w),z.x+=z.w,z.y+=z.h,ak(r.rightAndBottom,z,w),c.chartArea={left:z.left,top:z.top,right:z.left+z.w,bottom:z.top+z.h},B.each(r.chartArea,function(D){var M=D.box;wh(M,c.chartArea),M.update(z.w,z.h)})}},Co={acquireContext:function(c){return c&&c.canvas&&(c=c.canvas),c&&c.getContext("2d")||null}},Yf=`/*
 * DOM element rendering detection
 * https://davidwalsh.name/detect-node-insertion
 */
@keyframes chartjs-render-animation {
	from { opacity: 0.99; }
	to { opacity: 1; }
}

.chartjs-render-monitor {
	animation: chartjs-render-animation 0.001s;
}

/*
 * DOM element resizing detection
 * https://github.com/marcj/css-element-queries
 */
.chartjs-size-monitor,
.chartjs-size-monitor-expand,
.chartjs-size-monitor-shrink {
	position: absolute;
	direction: ltr;
	left: 0;
	top: 0;
	right: 0;
	bottom: 0;
	overflow: hidden;
	pointer-events: none;
	visibility: hidden;
	z-index: -1;
}

.chartjs-size-monitor-expand > div {
	position: absolute;
	width: 1000000px;
	height: 1000000px;
	left: 0;
	top: 0;
}

.chartjs-size-monitor-shrink > div {
	position: absolute;
	width: 200%;
	height: 200%;
	left: 0;
	top: 0;
}
`,fd=Object.freeze({__proto__:null,default:Yf}),xh=i(fd),Sb="$chartjs",qc="chartjs-",yh=qc+"size-monitor",Zf=qc+"render-monitor",Do=qc+"render-animation",bk=["animationstart","webkitAnimationStart"],Eo={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function df(c,e){var g=B.getStyle(c,e),h=g&&g.match(/^(\d+)(\.\d+)?px$/);return h?Number(h[1]):void 0}function zh(c,e){var g=c.style,h=c.getAttribute("height"),k=c.getAttribute("width");c[Sb]={initial:{height:h,width:k,style:{display:g.display,height:g.height,width:g.width}}},g.display=g.display||"block";if(k===null||k===""){var m=df(c,"width");m!==void 0&&(c.width=m)}if(h===null||h==="")if(c.style.height==="")c.height=c.width/(e.options.aspectRatio||2);else{var o=df(c,"height");m!==void 0&&(c.height=o)}return c}var Fo=function(){var c=!1;try{var e=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("e",null,e)}catch(g){}return c}(),ck=Fo?{passive:!0}:!1;function ef(c,e,g){c.addEventListener(e,g,ck)}function _f(c,e,g){c.removeEventListener(e,g,ck)}function Ah(c,e,g,h,k){return{type:c,chart:e,native:k||null,x:g!==void 0?g:null,y:h!==void 0?h:null}}function Go(c,e){var g=Eo[c.type]||c.type,h=B.getRelativePosition(c,e);return Ah(g,e,h.x,h.y,c)}function Ho(c,e){var g=!1,h=[];return function(){h=Array.prototype.slice.call(arguments),e=e||this,g||(g=!0,B.requestAnimFrame.call(window,function(){g=!1,c.apply(e,h)}))}}function ff(c){var e=document.createElement("div");return e.className=c||"",e}function Io(c){var e=1e6,g=ff(yh),h=ff(yh+"-expand"),k=ff(yh+"-shrink");h.appendChild(ff()),k.appendChild(ff()),g.appendChild(h),g.appendChild(k),g._reset=function(){h.scrollLeft=e,h.scrollTop=e,k.scrollLeft=e,k.scrollTop=e};var m=function(){g._reset(),c()};return ef(h,"scroll",m.bind(h,"expand")),ef(k,"scroll",m.bind(k,"shrink")),g}function dk(c,e){var g=c[Sb]||(c[Sb]={}),h=g.renderProxy=function(k){k.animationName===Do&&e()};B.each(bk,function(k){ef(c,k,h)}),g.reflow=!!c.offsetParent,c.classList.add(Zf)}function Jo(c){var e=c[Sb]||{},g=e.renderProxy;g&&(B.each(bk,function(h){_f(c,h,g)}),delete e.renderProxy),c.classList.remove(Zf)}function ge(c,e,g){var h=c[Sb]||(c[Sb]={}),k=h.resizer=Io(Ho(function(){if(h.resizer){var m=g.options.maintainAspectRatio&&c.parentNode,o=m?m.clientWidth:0;e(Ah("resize",g)),m&&m.clientWidth<o&&g.canvas&&e(Ah("resize",g))}}));dk(c,function(){if(h.resizer){var m=c.parentNode;m&&m!==k.parentNode&&m.insertBefore(k,m.firstChild),k._reset()}})}function Ko(c){var e=c[Sb]||{},g=e.resizer;delete e.resizer,Jo(c),g&&g.parentNode&&g.parentNode.removeChild(g)}function Bh(c,e){var g=c[Sb]||(c[Sb]={});if(!g.containsStyles){g.containsStyles=!0,e=`/* Chart.js */
`+e;var h=document.createElement("style");h.setAttribute("type","text/css"),h.appendChild(document.createTextNode(e)),c.appendChild(h)}}var ek={disableCSSInjection:!1,_enabled:typeof window!=="undefined"&&typeof document!=="undefined",_ensureLoaded:function(c){if(!this.disableCSSInjection){var e=c.getRootNode?c.getRootNode():document,g=e.host?e:document.head;Bh(g,xh)}},acquireContext:function(c,e){typeof c==="string"?c=document.getElementById(c):c.length&&(c=c[0]),c&&c.canvas&&(c=c.canvas);var g=c&&c.getContext&&c.getContext("2d");return g&&g.canvas===c?(this._ensureLoaded(c),zh(c,e),g):null},releaseContext:function(c){var e=c.canvas;if(!e[Sb])return;var g=e[Sb].initial;["height","width"].forEach(function(h){var k=g[h];B.isNullOrUndef(k)?e.removeAttribute(h):e.setAttribute(h,k)}),B.each(g.style||{},function(h,k){e.style[k]=h}),e.width=e.width,delete e[Sb]},addEventListener:function(c,e,g){var h=c.canvas;if(e==="resize"){ge(h,g,c);return}var k=g[Sb]||(g[Sb]={}),m=k.proxies||(k.proxies={}),o=m[c.id+"_"+e]=function(r){g(Go(r,c))};ef(h,e,o)},removeEventListener:function(c,e,g){var h=c.canvas;if(e==="resize"){Ko(h);return}var k=g[Sb]||{},m=k.proxies||{},o=m[c.id+"_"+e];if(!o)return;_f(h,e,o)}};B.addEvent=ef,B.removeEvent=_f;var Ch=ek._enabled?ek:Co,he=B.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Ch);S._set("global",{plugins:{}});var mb={_plugins:[],_cacheId:0,register:function(c){var e=this._plugins;[].concat(c).forEach(function(g){e.indexOf(g)===-1&&e.push(g)}),this._cacheId++},unregister:function(c){var e=this._plugins;[].concat(c).forEach(function(g){var h=e.indexOf(g);h!==-1&&e.splice(h,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(c,e,g){var h=this.descriptors(c),k=h.length,m,o,r,p,s;for(m=0;m<k;++m){o=h[m],r=o.plugin,s=r[e];if(typeof s==="function"){p=[c].concat(g||[]),p.push(o.options);if(s.apply(r,p)===!1)return!1}}return!0},descriptors:function(c){var e=c.$plugins||(c.$plugins={});if(e.id===this._cacheId)return e.descriptors;var g=[],h=[],k=c&&c.config||{},m=k.options&&k.options.plugins||{};return this._plugins.concat(k.plugins||[]).forEach(function(o){var r=g.indexOf(o);if(r!==-1)return;var p=o.id,s=m[p];if(s===!1)return;s===!0&&(s=B.clone(S.global.plugins[p])),g.push(o),h.push({plugin:o,options:s||{}})}),e.descriptors=h,e.id=this._cacheId,h},_invalidate:function(c){delete c.$plugins}},gf={constructors:{},defaults:{},registerScaleType:function(c,e,g){this.constructors[c]=e,this.defaults[c]=B.clone(g)},getScaleConstructor:function(c){return this.constructors.hasOwnProperty(c)?this.constructors[c]:void 0},getScaleDefaults:function(c){return this.defaults.hasOwnProperty(c)?B.merge({},[S.scale,this.defaults[c]]):{}},updateScaleDefaults:function(c,e){var g=this;g.defaults.hasOwnProperty(c)&&(g.defaults[c]=B.extend(g.defaults[c],e))},addScalesToLayout:function(c){B.each(c.scales,function(e){e.fullWidth=e.options.fullWidth,e.position=e.options.position,e.weight=e.options.weight,dc.addBox(c,e)})}},Qc=B.valueOrDefault,$f=B.rtl.getRtlAdapter;S._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:B.noop,title:function(c,e){var g="",h=e.labels,k=h?h.length:0;if(c.length>0){var m=c[0];m.label?g=m.label:m.xLabel?g=m.xLabel:k>0&&m.index<k&&(g=h[m.index])}return g},afterTitle:B.noop,beforeBody:B.noop,beforeLabel:B.noop,label:function(c,e){var g=e.datasets[c.datasetIndex].label||"";return g&&(g+=": "),B.isNullOrUndef(c.value)?g+=c.yLabel:g+=c.value,g},labelColor:function(c,e){var g=e.getDatasetMeta(c.datasetIndex),h=g.data[c.index],k=h._view;return{borderColor:k.borderColor,backgroundColor:k.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:B.noop,afterBody:B.noop,beforeFooter:B.noop,footer:B.noop,afterFooter:B.noop}}});var fk={average:function(c){if(!c.length)return!1;var e,g,h=0,k=0,m=0;for(e=0,g=c.length;e<g;++e){var o=c[e];if(o&&o.hasValue()){var r=o.tooltipPosition();h+=r.x,k+=r.y,++m}}return{x:h/m,y:k/m}},nearest:function(c,e){var g=e.x,h=e.y,k=Number.POSITIVE_INFINITY,m,o,r;for(m=0,o=c.length;m<o;++m){var p=c[m];if(p&&p.hasValue()){var s=p.getCenterPoint(),w=B.distanceBetweenPoints(e,s);w<k&&(k=w,r=p)}}if(r){var z=r.tooltipPosition();g=z.x,h=z.y}return{x:g,y:h}}};function rc(c,e){return e&&(B.isArray(e)?Array.prototype.push.apply(c,e):c.push(e)),c}function Wa(c){return(typeof c==="string"||c instanceof String)&&c.indexOf(`
`)>-1?c.split(`
`):c}function Lo(c){var e=c._xScale,g=c._yScale||c._scale,h=c._index,k=c._datasetIndex,m=c._chart.getDatasetMeta(k).controller,o=m._getIndexScale(),r=m._getValueScale();return{xLabel:e?e.getLabelForIndex(h,k):"",yLabel:g?g.getLabelForIndex(h,k):"",label:o?""+o.getLabelForIndex(h,k):"",value:r?""+r.getLabelForIndex(h,k):"",index:h,datasetIndex:k,x:c._model.x,y:c._model.y}}function gk(c){var e=S.global;return{xPadding:c.xPadding,yPadding:c.yPadding,xAlign:c.xAlign,yAlign:c.yAlign,rtl:c.rtl,textDirection:c.textDirection,bodyFontColor:c.bodyFontColor,_bodyFontFamily:Qc(c.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:Qc(c.bodyFontStyle,e.defaultFontStyle),_bodyAlign:c.bodyAlign,bodyFontSize:Qc(c.bodyFontSize,e.defaultFontSize),bodySpacing:c.bodySpacing,titleFontColor:c.titleFontColor,_titleFontFamily:Qc(c.titleFontFamily,e.defaultFontFamily),_titleFontStyle:Qc(c.titleFontStyle,e.defaultFontStyle),titleFontSize:Qc(c.titleFontSize,e.defaultFontSize),_titleAlign:c.titleAlign,titleSpacing:c.titleSpacing,titleMarginBottom:c.titleMarginBottom,footerFontColor:c.footerFontColor,_footerFontFamily:Qc(c.footerFontFamily,e.defaultFontFamily),_footerFontStyle:Qc(c.footerFontStyle,e.defaultFontStyle),footerFontSize:Qc(c.footerFontSize,e.defaultFontSize),_footerAlign:c.footerAlign,footerSpacing:c.footerSpacing,footerMarginTop:c.footerMarginTop,caretSize:c.caretSize,cornerRadius:c.cornerRadius,backgroundColor:c.backgroundColor,opacity:0,legendColorBackground:c.multiKeyBackground,displayColors:c.displayColors,borderColor:c.borderColor,borderWidth:c.borderWidth}}function hk(c,e){var g=c._chart.ctx,h=e.yPadding*2,k=0,m=e.body,o=m.reduce(function(P,T){return P+T.before.length+T.lines.length+T.after.length},0);o+=e.beforeBody.length+e.afterBody.length;var r=e.title.length,p=e.footer.length,s=e.titleFontSize,w=e.bodyFontSize,z=e.footerFontSize;h+=r*s,h+=r?(r-1)*e.titleSpacing:0,h+=r?e.titleMarginBottom:0,h+=o*w,h+=o?(o-1)*e.bodySpacing:0,h+=p?e.footerMarginTop:0,h+=p*z,h+=p?(p-1)*e.footerSpacing:0;var D=0,M=function(P){k=Math.max(k,g.measureText(P).width+D)};return g.font=B.fontString(s,e._titleFontStyle,e._titleFontFamily),B.each(e.title,M),g.font=B.fontString(w,e._bodyFontStyle,e._bodyFontFamily),B.each(e.beforeBody.concat(e.afterBody),M),D=e.displayColors?w+2:0,B.each(m,function(P){B.each(P.before,M),B.each(P.lines,M),B.each(P.after,M)}),D=0,g.font=B.fontString(z,e._footerFontStyle,e._footerFontFamily),B.each(e.footer,M),k+=2*e.xPadding,{width:k,height:h}}function Mo(c,e){var g=c._model,h=c._chart,k=c._chart.chartArea,m="center",o="center";g.y<e.height?o="top":g.y>h.height-e.height&&(o="bottom");var r,p,s,w,z,D=(k.left+k.right)/2,M=(k.top+k.bottom)/2;o==="center"?(r=function(T){return T<=D},p=function(T){return T>D}):(r=function(T){return T<=e.width/2},p=function(T){return T>=h.width-e.width/2}),s=function(T){return T+e.width+g.caretSize+g.caretPadding>h.width},w=function(T){return T-e.width-g.caretSize-g.caretPadding<0},z=function(T){return T<=M?"top":"bottom"},r(g.x)?(m="left",s(g.x)&&(m="center",o=z(g.y))):p(g.x)&&(m="right",w(g.x)&&(m="center",o=z(g.y)));var P=c._options;return{xAlign:P.xAlign?P.xAlign:m,yAlign:P.yAlign?P.yAlign:o}}function No(c,e,g,h){var k=c.x,m=c.y,o=c.caretSize,r=c.caretPadding,p=c.cornerRadius,s=g.xAlign,w=g.yAlign,z=o+r,D=p+r;return s==="right"?k-=e.width:s==="center"&&(k-=e.width/2,k+e.width>h.width&&(k=h.width-e.width),k<0&&(k=0)),w==="top"?m+=z:w==="bottom"?m-=e.height+z:m-=e.height/2,w==="center"?s==="left"?k+=z:s==="right"&&(k-=z):s==="left"?k-=D:s==="right"&&(k+=D),{x:k,y:m}}function ag(c,e){return e==="center"?c.x+c.width/2:e==="right"?c.x+c.width-c.xPadding:c.x+c.xPadding}function ie(c){return rc([],Wa(c))}var Oo=cc.extend({initialize:function(){this._model=gk(this._options),this._lastActive=[]},getTitle:function(){var c=this,e=c._options,g=e.callbacks,h=g.beforeTitle.apply(c,arguments),k=g.title.apply(c,arguments),m=g.afterTitle.apply(c,arguments),o=[];return o=rc(o,Wa(h)),o=rc(o,Wa(k)),o=rc(o,Wa(m)),o},getBeforeBody:function(){return ie(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(c,e){var g=this,h=g._options.callbacks,k=[];return B.each(c,function(m){var o={before:[],lines:[],after:[]};rc(o.before,Wa(h.beforeLabel.call(g,m,e))),rc(o.lines,h.label.call(g,m,e)),rc(o.after,Wa(h.afterLabel.call(g,m,e))),k.push(o)}),k},getAfterBody:function(){return ie(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var c=this,e=c._options.callbacks,g=e.beforeFooter.apply(c,arguments),h=e.footer.apply(c,arguments),k=e.afterFooter.apply(c,arguments),m=[];return m=rc(m,Wa(g)),m=rc(m,Wa(h)),m=rc(m,Wa(k)),m},update:function(c){var e=this,g=e._options,h=e._model,k=e._model=gk(g),m=e._active,o=e._data,r={xAlign:h.xAlign,yAlign:h.yAlign},p={x:h.x,y:h.y},s={width:h.width,height:h.height},w={x:h.caretX,y:h.caretY},z,D;if(m.length){k.opacity=1;var M=[],P=[];w=fk[g.position].call(e,m,e._eventPosition);var T=[];for(z=0,D=m.length;z<D;++z)T.push(Lo(m[z]));g.filter&&(T=T.filter(function(Y){return g.filter(Y,o)})),g.itemSort&&(T=T.sort(function(Y,ga){return g.itemSort(Y,ga,o)})),B.each(T,function(Y){M.push(g.callbacks.labelColor.call(e,Y,e._chart)),P.push(g.callbacks.labelTextColor.call(e,Y,e._chart))}),k.title=e.getTitle(T,o),k.beforeBody=e.getBeforeBody(T,o),k.body=e.getBody(T,o),k.afterBody=e.getAfterBody(T,o),k.footer=e.getFooter(T,o),k.x=w.x,k.y=w.y,k.caretPadding=g.caretPadding,k.labelColors=M,k.labelTextColors=P,k.dataPoints=T,s=hk(this,k),r=Mo(this,s),p=No(k,s,r,e._chart)}else k.opacity=0;return k.xAlign=r.xAlign,k.yAlign=r.yAlign,k.x=p.x,k.y=p.y,k.width=s.width,k.height=s.height,k.caretX=w.x,k.caretY=w.y,e._model=k,c&&g.custom&&g.custom.call(e,k),e},drawCaret:function(c,e){var g=this._chart.ctx,h=this._view,k=this.getCaretPosition(c,e,h);g.lineTo(k.x1,k.y1),g.lineTo(k.x2,k.y2),g.lineTo(k.x3,k.y3)},getCaretPosition:function(c,e,g){var h,k,m,o,r,p,s=g.caretSize,w=g.cornerRadius,z=g.xAlign,D=g.yAlign,M=c.x,P=c.y,T=e.width,Y=e.height;if(D==="center")r=P+Y/2,z==="left"?(h=M,k=h-s,m=h,o=r+s,p=r-s):(h=M+T,k=h+s,m=h,o=r-s,p=r+s);else{z==="left"?(k=M+w+s,h=k-s,m=k+s):z==="right"?(k=M+T-w-s,h=k-s,m=k+s):(k=g.caretX,h=k-s,m=k+s);if(D==="top")o=P,r=o-s,p=o;else{o=P+Y,r=o+s,p=o;var ga=m;m=h,h=ga}}return{x1:h,x2:k,x3:m,y1:o,y2:r,y3:p}},drawTitle:function(c,e,g){var h=e.title,k=h.length,m,o,r;if(k){var p=$f(e.rtl,e.x,e.width);for(c.x=ag(e,e._titleAlign),g.textAlign=p.textAlign(e._titleAlign),g.textBaseline="middle",m=e.titleFontSize,o=e.titleSpacing,g.fillStyle=e.titleFontColor,g.font=B.fontString(m,e._titleFontStyle,e._titleFontFamily),r=0;r<k;++r)g.fillText(h[r],p.x(c.x),c.y+m/2),c.y+=m+o,r+1===k&&(c.y+=e.titleMarginBottom-o)}},drawBody:function(c,e,g){var h=e.bodyFontSize,k=e.bodySpacing,m=e._bodyAlign,o=e.body,r=e.displayColors,p=0,s=r?ag(e,"left"):0,w=$f(e.rtl,e.x,e.width),z=function(Xa){g.fillText(Xa,w.x(c.x+p),c.y+h/2),c.y+=h+k},D,M,P,T,Y,ga,wa,Aa,Na=w.textAlign(m);for(g.textAlign=m,g.textBaseline="middle",g.font=B.fontString(h,e._bodyFontStyle,e._bodyFontFamily),c.x=ag(e,Na),g.fillStyle=e.bodyFontColor,B.each(e.beforeBody,z),p=r&&Na!=="right"?m==="center"?h/2+1:h+2:0,Y=0,wa=o.length;Y<wa;++Y){for(D=o[Y],M=e.labelTextColors[Y],P=e.labelColors[Y],g.fillStyle=M,B.each(D.before,z),T=D.lines,ga=0,Aa=T.length;ga<Aa;++ga){if(r){var Ha=w.x(s);g.fillStyle=e.legendColorBackground,g.fillRect(w.leftForLtr(Ha,h),c.y,h,h),g.lineWidth=1,g.strokeStyle=P.borderColor,g.strokeRect(w.leftForLtr(Ha,h),c.y,h,h),g.fillStyle=P.backgroundColor,g.fillRect(w.leftForLtr(w.xPlus(Ha,1),h-2),c.y+1,h-2,h-2),g.fillStyle=M}z(T[ga])}B.each(D.after,z)}p=0,B.each(e.afterBody,z),c.y-=k},drawFooter:function(c,e,g){var h=e.footer,k=h.length,m,o;if(k){var r=$f(e.rtl,e.x,e.width);for(c.x=ag(e,e._footerAlign),c.y+=e.footerMarginTop,g.textAlign=r.textAlign(e._footerAlign),g.textBaseline="middle",m=e.footerFontSize,g.fillStyle=e.footerFontColor,g.font=B.fontString(m,e._footerFontStyle,e._footerFontFamily),o=0;o<k;++o)g.fillText(h[o],r.x(c.x),c.y+m/2),c.y+=m+e.footerSpacing}},drawBackground:function(c,e,g,h){g.fillStyle=e.backgroundColor,g.strokeStyle=e.borderColor,g.lineWidth=e.borderWidth;var k=e.xAlign,m=e.yAlign,o=c.x,r=c.y,p=h.width,s=h.height,w=e.cornerRadius;g.beginPath(),g.moveTo(o+w,r),m==="top"&&this.drawCaret(c,h),g.lineTo(o+p-w,r),g.quadraticCurveTo(o+p,r,o+p,r+w),m==="center"&&k==="right"&&this.drawCaret(c,h),g.lineTo(o+p,r+s-w),g.quadraticCurveTo(o+p,r+s,o+p-w,r+s),m==="bottom"&&this.drawCaret(c,h),g.lineTo(o+w,r+s),g.quadraticCurveTo(o,r+s,o,r+s-w),m==="center"&&k==="left"&&this.drawCaret(c,h),g.lineTo(o,r+w),g.quadraticCurveTo(o,r,o+w,r),g.closePath(),g.fill(),e.borderWidth>0&&g.stroke()},draw:function(){var c=this._chart.ctx,e=this._view;if(e.opacity===0)return;var g={width:e.width,height:e.height},h={x:e.x,y:e.y},k=Math.abs(e.opacity<.001)?0:e.opacity,m=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;this._options.enabled&&m&&(c.save(),c.globalAlpha=k,this.drawBackground(h,e,c,g),h.y+=e.yPadding,B.rtl.overrideTextDirection(c,e.textDirection),this.drawTitle(h,e,c),this.drawBody(h,e,c),this.drawFooter(h,e,c),B.rtl.restoreTextDirection(c,e.textDirection),c.restore())},handleEvent:function(c){var e=this,g=e._options,h=!1;return e._lastActive=e._lastActive||[],c.type==="mouseout"?e._active=[]:(e._active=e._chart.getElementsAtEventForMode(c,g.mode,g),g.reverse&&e._active.reverse()),h=!B.arrayEquals(e._active,e._lastActive),h&&(e._lastActive=e._active,(g.enabled||g.custom)&&(e._eventPosition={x:c.x,y:c.y},e.update(!0),e.pivot())),h}}),Po=fk,Dh=Oo;Dh.positioners=Po;var je=B.valueOrDefault;S._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});function hf(){return B.merge({},[].slice.call(arguments),{merger:function(c,e,g,h){if(c==="xAxes"||c==="yAxes"){var k=g[c].length,m,o,r;for(e[c]||(e[c]=[]),m=0;m<k;++m)r=g[c][m],o=je(r.type,c==="xAxes"?"category":"linear"),m>=e[c].length&&e[c].push({}),!e[c][m].type||r.type&&r.type!==e[c][m].type?B.merge(e[c][m],[gf.getScaleDefaults(o),r]):B.merge(e[c][m],r)}else B._merger(c,e,g,h)}})}function jf(){return B.merge({},[].slice.call(arguments),{merger:function(c,e,g,h){var k=e[c]||{},m=g[c];c==="scales"?e[c]=hf(k,m):c==="scale"?e[c]=B.merge(k,[gf.getScaleDefaults(m.type),m]):B._merger(c,e,g,h)}})}function Qo(c){c=c||{};var e=c.data=c.data||{};return e.datasets=e.datasets||[],e.labels=e.labels||[],c.options=jf(S.global,S[c.type],c.options||{}),c}function ik(c){var e=c.options;B.each(c.scales,function(g){dc.removeBox(c,g)}),e=jf(S.global,S[c.config.type],e),c.options=c.config.options=e,c.ensureScalesHaveIDs(),c.buildOrUpdateScales(),c.tooltip._options=e.tooltips,c.tooltip.initialize()}function jk(c,e,g){var h,k=function(m){return m.id===h};do h=e+g++;while(B.findIndex(c,k)>=0);return h}function bg(c){return c==="top"||c==="bottom"}function cg(c,e){return function(g,h){return g[c]===h[c]?g[e]-h[e]:g[c]-h[c]}}var Dc=function(c,e){return this.construct(c,e),this};B.extend(Dc.prototype,{construct:function(c,e){var g=this;e=Qo(e);var h=he.acquireContext(c,e),k=h&&h.canvas,m=k&&k.height,o=k&&k.width;g.id=B.uid(),g.ctx=h,g.canvas=k,g.config=e,g.width=o,g.height=m,g.aspectRatio=m?o/m:null,g.options=e.options,g._bufferedRender=!1,g._layers=[],g.chart=g,g.controller=g,Dc.instances[g.id]=g,Object.defineProperty(g,"data",{get:function(){return g.config.data},set:function(r){g.config.data=r}});if(!h||!k){console.error("Failed to create chart: can't acquire context from the given item");return}g.initialize(),g.update()},initialize:function(){var c=this;return mb.notify(c,"beforeInit"),B.retinaScale(c,c.options.devicePixelRatio),c.bindEvents(),c.options.responsive&&c.resize(!0),c.initToolTip(),mb.notify(c,"afterInit"),c},clear:function(){return B.canvas.clear(this),this},stop:function(){return mh.cancelAnimation(this),this},resize:function(c){var e=this,g=e.options,h=e.canvas,k=g.maintainAspectRatio&&e.aspectRatio||null,m=Math.max(0,Math.floor(B.getMaximumWidth(h))),o=Math.max(0,Math.floor(k?m/k:B.getMaximumHeight(h)));if(e.width===m&&e.height===o)return;h.width=e.width=m,h.height=e.height=o,h.style.width=m+"px",h.style.height=o+"px",B.retinaScale(e,g.devicePixelRatio);if(!c){var r={width:m,height:o};mb.notify(e,"resize",[r]),g.onResize&&g.onResize(e,r),e.stop(),e.update({duration:g.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var c=this.options,e=c.scales||{},g=c.scale;B.each(e.xAxes,function(h,k){h.id||(h.id=jk(e.xAxes,"x-axis-",k))}),B.each(e.yAxes,function(h,k){h.id||(h.id=jk(e.yAxes,"y-axis-",k))}),g&&(g.id=g.id||"scale")},buildOrUpdateScales:function(){var c=this,e=c.options,g=c.scales||{},h=[],k=Object.keys(g).reduce(function(m,o){return m[o]=!1,m},{});e.scales&&(h=h.concat((e.scales.xAxes||[]).map(function(m){return{options:m,dtype:"category",dposition:"bottom"}}),(e.scales.yAxes||[]).map(function(m){return{options:m,dtype:"linear",dposition:"left"}}))),e.scale&&h.push({options:e.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),B.each(h,function(m){var o=m.options,r=o.id,p=je(o.type,m.dtype);bg(o.position)!==bg(m.dposition)&&(o.position=m.dposition),k[r]=!0;var s=null;if(r in g&&g[r].type===p)s=g[r],s.options=o,s.ctx=c.ctx,s.chart=c;else{var w=gf.getScaleConstructor(p);if(!w)return;s=new w({id:r,type:p,options:o,ctx:c.ctx,chart:c}),g[s.id]=s}s.mergeTicksOptions(),m.isDefault&&(c.scale=s)}),B.each(k,function(m,o){m||delete g[o]}),c.scales=g,gf.addScalesToLayout(this)},buildOrUpdateControllers:function(){var c=this,e=[],g=c.data.datasets,h,k;for(h=0,k=g.length;h<k;h++){var m=g[h],o=c.getDatasetMeta(h),r=m.type||c.config.type;o.type&&o.type!==r&&(c.destroyDatasetMeta(h),o=c.getDatasetMeta(h)),o.type=r,o.order=m.order||0,o.index=h;if(o.controller)o.controller.updateIndex(h),o.controller.linkScales();else{var p=Zj[o.type];if(p===void 0)throw new Error('"'+o.type+'" is not a chart type.');o.controller=new p(c,h),e.push(o.controller)}}return e},resetElements:function(){var c=this;B.each(c.data.datasets,function(e,g){c.getDatasetMeta(g).controller.reset()},c)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(c){var e=this,g,h;(!c||typeof c!=="object")&&(c={duration:c,lazy:arguments[1]}),ik(e),mb._invalidate(e);if(mb.notify(e,"beforeUpdate")===!1)return;e.tooltip._data=e.data;var k=e.buildOrUpdateControllers();for(g=0,h=e.data.datasets.length;g<h;g++)e.getDatasetMeta(g).controller.buildOrUpdateElements();e.updateLayout(),e.options.animation&&e.options.animation.duration&&B.each(k,function(m){m.reset()}),e.updateDatasets(),e.tooltip.initialize(),e.lastActive=[],mb.notify(e,"afterUpdate"),e._layers.sort(cg("z","_idx")),e._bufferedRender?e._bufferedRequest={duration:c.duration,easing:c.easing,lazy:c.lazy}:e.render(c)},updateLayout:function(){var c=this;if(mb.notify(c,"beforeLayout")===!1)return;dc.update(this,this.width,this.height),c._layers=[],B.each(c.boxes,function(e){e._configure&&e._configure(),c._layers.push.apply(c._layers,e._layers())},c),c._layers.forEach(function(e,g){e._idx=g}),mb.notify(c,"afterScaleUpdate"),mb.notify(c,"afterLayout")},updateDatasets:function(){var c=this;if(mb.notify(c,"beforeDatasetsUpdate")===!1)return;for(var e=0,g=c.data.datasets.length;e<g;++e)c.updateDataset(e);mb.notify(c,"afterDatasetsUpdate")},updateDataset:function(c){var e=this,g=e.getDatasetMeta(c),h={meta:g,index:c};if(mb.notify(e,"beforeDatasetUpdate",[h])===!1)return;g.controller._update(),mb.notify(e,"afterDatasetUpdate",[h])},render:function(c){var e=this;(!c||typeof c!=="object")&&(c={duration:c,lazy:arguments[1]});var g=e.options.animation,h=je(c.duration,g&&g.duration),k=c.lazy;if(mb.notify(e,"beforeRender")===!1)return;var m=function(r){mb.notify(e,"afterRender"),B.callback(g&&g.onComplete,[r],e)};if(g&&h){var o=new lh({numSteps:h/16.66,easing:c.easing||g.easing,render:function(r,p){var s=B.easing.effects[p.easing],w=p.currentStep,z=w/p.numSteps;r.draw(s(z),z,w)},onAnimationProgress:g.onProgress,onAnimationComplete:m});mh.addAnimation(e,o,h,k)}else e.draw(),m(new lh({numSteps:0,chart:e}));return e},draw:function(c){var e=this,g,h;e.clear(),B.isNullOrUndef(c)&&(c=1),e.transition(c);if(e.width<=0||e.height<=0)return;if(mb.notify(e,"beforeDraw",[c])===!1)return;for(h=e._layers,g=0;g<h.length&&h[g].z<=0;++g)h[g].draw(e.chartArea);for(e.drawDatasets(c);g<h.length;++g)h[g].draw(e.chartArea);e._drawTooltip(c),mb.notify(e,"afterDraw",[c])},transition:function(c){for(var e=this,g=0,h=(e.data.datasets||[]).length;g<h;++g)e.isDatasetVisible(g)&&e.getDatasetMeta(g).controller.transition(c);e.tooltip.transition(c)},_getSortedDatasetMetas:function(c){var e=this,g=e.data.datasets||[],h=[],k,m;for(k=0,m=g.length;k<m;++k)(!c||e.isDatasetVisible(k))&&h.push(e.getDatasetMeta(k));return h.sort(cg("order","index")),h},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(c){var e=this,g,h;if(mb.notify(e,"beforeDatasetsDraw",[c])===!1)return;for(g=e._getSortedVisibleDatasetMetas(),h=g.length-1;h>=0;--h)e.drawDataset(g[h],c);mb.notify(e,"afterDatasetsDraw",[c])},drawDataset:function(c,e){var g=this,h={meta:c,index:c.index,easingValue:e};if(mb.notify(g,"beforeDatasetDraw",[h])===!1)return;c.controller.draw(e),mb.notify(g,"afterDatasetDraw",[h])},_drawTooltip:function(c){var e=this,g=e.tooltip,h={tooltip:g,easingValue:c};if(mb.notify(e,"beforeTooltipDraw",[h])===!1)return;g.draw(),mb.notify(e,"afterTooltipDraw",[h])},getElementAtEvent:function(c){return dd.modes.single(this,c)},getElementsAtEvent:function(c){return dd.modes.label(this,c,{intersect:!0})},getElementsAtXAxis:function(c){return dd.modes["x-axis"](this,c,{intersect:!0})},getElementsAtEventForMode:function(c,e,g){var h=dd.modes[e];return typeof h==="function"?h(this,c,g):[]},getDatasetAtEvent:function(c){return dd.modes.dataset(this,c,{intersect:!0})},getDatasetMeta:function(c){var e=this,g=e.data.datasets[c];g._meta||(g._meta={});var h=g._meta[e.id];return h||(h=g._meta[e.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:g.order||0,index:c}),h},getVisibleDatasetCount:function(){for(var c=0,e=0,g=this.data.datasets.length;e<g;++e)this.isDatasetVisible(e)&&c++;return c},isDatasetVisible:function(c){var e=this.getDatasetMeta(c);return typeof e.hidden==="boolean"?!e.hidden:!this.data.datasets[c].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(c){var e=this.id,g=this.data.datasets[c],h=g._meta&&g._meta[e];h&&(h.controller.destroy(),delete g._meta[e])},destroy:function(){var c=this,e=c.canvas,g,h;for(c.stop(),g=0,h=c.data.datasets.length;g<h;++g)c.destroyDatasetMeta(g);e&&(c.unbindEvents(),B.canvas.clear(c),he.releaseContext(c.ctx),c.canvas=null,c.ctx=null),mb.notify(c,"destroy"),delete Dc.instances[c.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var c=this;c.tooltip=new Dh({_chart:c,_chartInstance:c,_data:c.data,_options:c.options.tooltips},c)},bindEvents:function(){var c=this,e=c._listeners={},g=function(){c.eventHandler.apply(c,arguments)};B.each(c.options.events,function(h){he.addEventListener(c,h,g),e[h]=g}),c.options.responsive&&(g=function(){c.resize()},he.addEventListener(c,"resize",g),e.resize=g)},unbindEvents:function(){var c=this,e=c._listeners;if(!e)return;delete c._listeners,B.each(e,function(g,h){he.removeEventListener(c,h,g)})},updateHoverStyle:function(c,e,g){var h=g?"set":"remove",k,m,o;for(m=0,o=c.length;m<o;++m)k=c[m],k&&this.getDatasetMeta(k._datasetIndex).controller[h+"HoverStyle"](k);e==="dataset"&&this.getDatasetMeta(c[0]._datasetIndex).controller["_"+h+"DatasetHoverStyle"]()},eventHandler:function(c){var e=this,g=e.tooltip;if(mb.notify(e,"beforeEvent",[c])===!1)return;e._bufferedRender=!0,e._bufferedRequest=null;var h=e.handleEvent(c);g&&(h=g._start?g.handleEvent(c):h|g.handleEvent(c)),mb.notify(e,"afterEvent",[c]);var k=e._bufferedRequest;return k?e.render(k):h&&!e.animating&&(e.stop(),e.render({duration:e.options.hover.animationDuration,lazy:!0})),e._bufferedRender=!1,e._bufferedRequest=null,e},handleEvent:function(c){var e=this,g=e.options||{},h=g.hover,k=!1;return e.lastActive=e.lastActive||[],c.type==="mouseout"?e.active=[]:e.active=e.getElementsAtEventForMode(c,h.mode,h),B.callback(g.onHover||g.hover.onHover,[c.native,e.active],e),(c.type==="mouseup"||c.type==="click")&&(g.onClick&&g.onClick.call(e,c.native,e.active)),e.lastActive.length&&e.updateHoverStyle(e.lastActive,h.mode,!1),e.active.length&&h.mode&&e.updateHoverStyle(e.active,h.mode,!0),k=!B.arrayEquals(e.active,e.lastActive),e.lastActive=e.active,k}}),Dc.instances={};var Ma=Dc;Dc.Controller=Dc,Dc.types={},B.configMerge=jf,B.scaleMerge=hf;var Ro=function(){B.where=function(h,k){if(B.isArray(h)&&Array.prototype.filter)return h.filter(k);var m=[];return B.each(h,function(o){k(o)&&m.push(o)}),m},B.findIndex=Array.prototype.findIndex?function(h,k,m){return h.findIndex(k,m)}:function(h,k,m){m=m===void 0?h:m;for(var o=0,r=h.length;o<r;++o)if(k.call(m,h[o],o,h))return o;return-1},B.findNextWhere=function(h,k,m){B.isNullOrUndef(m)&&(m=-1);for(var o=m+1;o<h.length;o++){var r=h[o];if(k(r))return r}},B.findPreviousWhere=function(h,k,m){B.isNullOrUndef(m)&&(m=h.length);for(var o=m-1;o>=0;o--){var r=h[o];if(k(r))return r}},B.isNumber=function(h){return!isNaN(parseFloat(h))&&isFinite(h)},B.almostEquals=function(h,k,m){return Math.abs(h-k)<m},B.almostWhole=function(h,k){var m=Math.round(h);return m-k<=h&&m+k>=h},B.max=function(h){return h.reduce(function(k,m){return isNaN(m)?k:Math.max(k,m)},Number.NEGATIVE_INFINITY)},B.min=function(h){return h.reduce(function(k,m){return isNaN(m)?k:Math.min(k,m)},Number.POSITIVE_INFINITY)},B.sign=Math.sign?function(h){return Math.sign(h)}:function(h){return h=+h,h===0||isNaN(h)?h:h>0?1:-1},B.toRadians=function(h){return h*(Math.PI/180)},B.toDegrees=function(h){return h*(180/Math.PI)},B._decimalPlaces=function(h){if(!B.isFinite(h))return;for(var k=1,m=0;Math.round(h*k)/k!==h;)k*=10,m++;return m},B.getAngleFromPoint=function(h,k){var m=k.x-h.x,o=k.y-h.y,r=Math.sqrt(m*m+o*o),p=Math.atan2(o,m);return p<-.5*Math.PI&&(p+=2*Math.PI),{angle:p,distance:r}},B.distanceBetweenPoints=function(h,k){return Math.sqrt(Math.pow(k.x-h.x,2)+Math.pow(k.y-h.y,2))},B.aliasPixel=function(h){return h%2===0?0:.5},B._alignPixel=function(h,k,m){var o=h.currentDevicePixelRatio,r=m/2;return Math.round((k-r)*o)/o+r},B.splineCurve=function(h,k,m,o){var r=h.skip?k:h,p=k,s=m.skip?k:m,w=Math.sqrt(Math.pow(p.x-r.x,2)+Math.pow(p.y-r.y,2)),z=Math.sqrt(Math.pow(s.x-p.x,2)+Math.pow(s.y-p.y,2)),D=w/(w+z),M=z/(w+z);D=isNaN(D)?0:D,M=isNaN(M)?0:M;var P=o*D,T=o*M;return{previous:{x:p.x-P*(s.x-r.x),y:p.y-P*(s.y-r.y)},next:{x:p.x+T*(s.x-r.x),y:p.y+T*(s.y-r.y)}}},B.EPSILON=Number.EPSILON||1e-14,B.splineCurveMonotone=function(h){var k=(h||[]).map(function(Y){return{model:Y._model,deltaK:0,mK:0}}),m=k.length,o,r,p,s;for(o=0;o<m;++o){p=k[o];if(p.model.skip)continue;r=o>0?k[o-1]:null,s=o<m-1?k[o+1]:null;if(s&&!s.model.skip){var w=s.model.x-p.model.x;p.deltaK=w!==0?(s.model.y-p.model.y)/w:0}!r||r.model.skip?p.mK=p.deltaK:!s||s.model.skip?p.mK=r.deltaK:this.sign(r.deltaK)!==this.sign(p.deltaK)?p.mK=0:p.mK=(r.deltaK+p.deltaK)/2}var z,D,M,P;for(o=0;o<m-1;++o){p=k[o],s=k[o+1];if(p.model.skip||s.model.skip)continue;if(B.almostEquals(p.deltaK,0,this.EPSILON)){p.mK=s.mK=0;continue}z=p.mK/p.deltaK,D=s.mK/p.deltaK,P=Math.pow(z,2)+Math.pow(D,2);if(P<=9)continue;M=3/Math.sqrt(P),p.mK=z*M*p.deltaK,s.mK=D*M*p.deltaK}var T;for(o=0;o<m;++o){p=k[o];if(p.model.skip)continue;r=o>0?k[o-1]:null,s=o<m-1?k[o+1]:null,r&&!r.model.skip&&(T=(p.model.x-r.model.x)/3,p.model.controlPointPreviousX=p.model.x-T,p.model.controlPointPreviousY=p.model.y-T*p.mK),s&&!s.model.skip&&(T=(s.model.x-p.model.x)/3,p.model.controlPointNextX=p.model.x+T,p.model.controlPointNextY=p.model.y+T*p.mK)}},B.nextItem=function(h,k,m){return m?k>=h.length-1?h[0]:h[k+1]:k>=h.length-1?h[h.length-1]:h[k+1]},B.previousItem=function(h,k,m){return m?k<=0?h[h.length-1]:h[k-1]:k<=0?h[0]:h[k-1]},B.niceNum=function(h,k){var m=Math.floor(B.log10(h)),o=h/Math.pow(10,m),r;return k?o<1.5?r=1:o<3?r=2:o<7?r=5:r=10:o<=1?r=1:o<=2?r=2:o<=5?r=5:r=10,r*Math.pow(10,m)},B.requestAnimFrame=function(){return typeof window==="undefined"?function(h){h()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(h){return window.setTimeout(h,1e3/60)}}(),B.getRelativePosition=function(h,k){var m,o,r=h.originalEvent||h,p=h.target||h.srcElement,s=p.getBoundingClientRect(),w=r.touches;w&&w.length>0?(m=w[0].clientX,o=w[0].clientY):(m=r.clientX,o=r.clientY);var z=parseFloat(B.getStyle(p,"padding-left")),D=parseFloat(B.getStyle(p,"padding-top")),M=parseFloat(B.getStyle(p,"padding-right")),P=parseFloat(B.getStyle(p,"padding-bottom")),T=s.right-s.left-z-M,Y=s.bottom-s.top-D-P;return m=Math.round((m-s.left-z)/T*p.width/k.currentDevicePixelRatio),o=Math.round((o-s.top-D)/Y*p.height/k.currentDevicePixelRatio),{x:m,y:o}};function c(h,k,m){var o;return typeof h==="string"?(o=parseInt(h,10),h.indexOf("%")!==-1&&(o=o/100*k.parentNode[m])):o=h,o}function e(h){return h!==void 0&&h!==null&&h!=="none"}function g(h,k,m){var o=document.defaultView,r=B._getParentNode(h),p=o.getComputedStyle(h)[k],s=o.getComputedStyle(r)[k],w=e(p),z=e(s),D=Number.POSITIVE_INFINITY;return w||z?Math.min(w?c(p,h,m):D,z?c(s,r,m):D):"none"}B.getConstraintWidth=function(h){return g(h,"max-width","clientWidth")},B.getConstraintHeight=function(h){return g(h,"max-height","clientHeight")},B._calculatePadding=function(h,k,m){return k=B.getStyle(h,k),k.indexOf("%")>-1?m*parseInt(k,10)/100:parseInt(k,10)},B._getParentNode=function(h){var k=h.parentNode;return k&&k.toString()==="[object ShadowRoot]"&&(k=k.host),k},B.getMaximumWidth=function(h){var k=B._getParentNode(h);if(!k)return h.clientWidth;var m=k.clientWidth,o=B._calculatePadding(k,"padding-left",m),r=B._calculatePadding(k,"padding-right",m),p=m-o-r,s=B.getConstraintWidth(h);return isNaN(s)?p:Math.min(p,s)},B.getMaximumHeight=function(h){var k=B._getParentNode(h);if(!k)return h.clientHeight;var m=k.clientHeight,o=B._calculatePadding(k,"padding-top",m),r=B._calculatePadding(k,"padding-bottom",m),p=m-o-r,s=B.getConstraintHeight(h);return isNaN(s)?p:Math.min(p,s)},B.getStyle=function(h,k){return h.currentStyle?h.currentStyle[k]:document.defaultView.getComputedStyle(h,null).getPropertyValue(k)},B.retinaScale=function(h,k){var m=h.currentDevicePixelRatio=k||typeof window!=="undefined"&&window.devicePixelRatio||1;if(m===1)return;var o=h.canvas,r=h.height,p=h.width;o.height=r*m,o.width=p*m,h.ctx.scale(m,m),!o.style.height&&!o.style.width&&(o.style.height=r+"px",o.style.width=p+"px")},B.fontString=function(h,k,m){return k+" "+h+"px "+m},B.longestText=function(h,k,m,o){o=o||{};var r=o.data=o.data||{},p=o.garbageCollect=o.garbageCollect||[];o.font!==k&&(r=o.data={},p=o.garbageCollect=[],o.font=k),h.font=k;var s=0,w=m.length,z,D,M,P,T;for(z=0;z<w;z++){P=m[z];if(P!==void 0&&P!==null&&B.isArray(P)!==!0)s=B.measureText(h,r,p,s,P);else if(B.isArray(P))for(D=0,M=P.length;D<M;D++)T=P[D],T!==void 0&&T!==null&&!B.isArray(T)&&(s=B.measureText(h,r,p,s,T))}var Y=p.length/2;if(Y>m.length){for(z=0;z<Y;z++)delete r[p[z]];p.splice(0,Y)}return s},B.measureText=function(h,k,m,o,r){var p=k[r];return p||(p=k[r]=h.measureText(r).width,m.push(r)),p>o&&(o=p),o},B.numberOfLabelLines=function(h){var k=1;return B.each(h,function(m){B.isArray(m)&&(m.length>k&&(k=m.length))}),k},B.color=bb?function(h){return h instanceof CanvasGradient&&(h=S.global.defaultColor),bb(h)}:function(h){return console.error("Color.js not found!"),h},B.getHoverColor=function(h){return h instanceof CanvasPattern||h instanceof CanvasGradient?h:B.color(h).saturate(.5).darken(.1).rgbString()}};function Ad(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function dg(c){this.options=c||{}}B.extend(dg.prototype,{formats:Ad,parse:Ad,format:Ad,add:Ad,diff:Ad,startOf:Ad,endOf:Ad,_create:function(c){return c}}),dg.override=function(c){B.extend(dg.prototype,c)};var So=dg,Eh={_date:So},kf={formatters:{values:function(c){return B.isArray(c)?c:""+c},linear:function(c,e,g){var h=g.length>3?g[2]-g[1]:g[1]-g[0];Math.abs(h)>1&&(c!==Math.floor(c)&&(h=c-Math.floor(c)));var k=B.log10(Math.abs(h)),m="";if(c!==0){var o=Math.max(Math.abs(g[0]),Math.abs(g[g.length-1]));if(o<1e-4){var r=B.log10(Math.abs(c)),p=Math.floor(r)-Math.floor(k);p=Math.max(Math.min(p,20),0),m=c.toExponential(p)}else{var s=-1*Math.floor(k);s=Math.max(Math.min(s,20),0),m=c.toFixed(s)}}else m="0";return m},logarithmic:function(c,e,g){var h=c/Math.pow(10,Math.floor(B.log10(c)));return c===0?"0":h===1||h===2||h===5||e===0||e===g.length-1?c.toExponential():""}}},Bd=B.isArray,lf=B.isNullOrUndef,Cd=B.valueOrDefault,Dd=B.valueAtIndexOrDefault;S._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:kf.formatters.values,minor:{},major:{}}});function To(c,e){for(var g=[],h=c.length/e,k=0,m=c.length;k<m;k+=h)g.push(c[Math.floor(k)]);return g}function Uo(c,e,g){var h=c.getTicks().length,k=Math.min(e,h-1),m=c.getPixelForTick(k),o=c._startPixel,r=c._endPixel,p=1e-6,s;if(g){h===1?s=Math.max(m-o,r-m):e===0?s=(c.getPixelForTick(1)-m)/2:s=(m-c.getPixelForTick(k-1))/2,m+=k<e?s:-s;if(m<o-p||m>r+p)return}return m}function sc(c,e){B.each(c,function(g){var h=g.gc,k=h.length/2,m;if(k>e){for(m=0;m<k;++m)delete g.data[h[m]];h.splice(0,k)}})}function Ed(c,e,g,h){var k=g.length,m=[],o=[],r=[],p,s,w,z,D,M,P,T,Y,ga,wa,Aa,Na;for(p=0;p<k;++p){z=g[p].label,D=g[p].major?e.major:e.minor,c.font=M=D.string,P=h[M]=h[M]||{data:{},gc:[]},T=D.lineHeight,Y=ga=0;if(!lf(z)&&!Bd(z))Y=B.measureText(c,P.data,P.gc,Y,z),ga=T;else if(Bd(z))for(s=0,w=z.length;s<w;++s)wa=z[s],!lf(wa)&&!Bd(wa)&&(Y=B.measureText(c,P.data,P.gc,Y,wa),ga+=T);m.push(Y),o.push(ga),r.push(T/2)}sc(h,k),Aa=m.indexOf(Math.max.apply(null,m)),Na=o.indexOf(Math.max.apply(null,o));function Ha(Xa){return{width:m[Xa]||0,height:o[Xa]||0,offset:r[Xa]||0}}return{first:Ha(0),last:Ha(k-1),widest:Ha(Aa),highest:Ha(Na)}}function ke(c){return c.drawTicks?c.tickMarkLength:0}function Fh(c){var e,g;return c.display?(e=B.options._parseFont(c),g=B.options.toPadding(c.padding),e.lineHeight+g.height):0}function Gh(c,e){return B.extend(B.options._parseFont({fontFamily:Cd(e.fontFamily,c.fontFamily),fontSize:Cd(e.fontSize,c.fontSize),fontStyle:Cd(e.fontStyle,c.fontStyle),lineHeight:Cd(e.lineHeight,c.lineHeight)}),{color:B.options.resolve([e.fontColor,c.fontColor,S.global.defaultFontColor])})}function eg(c){var e=Gh(c,c.minor),g=c.major.enabled?Gh(c,c.major):e;return{minor:e,major:g}}function Hh(c){var e=[],g,h,k;for(h=0,k=c.length;h<k;++h)g=c[h],typeof g._index!=="undefined"&&e.push(g);return e}function Vo(c){var e=c.length,g,h;if(e<2)return!1;for(h=c[0],g=1;g<e;++g)if(c[g]-c[g-1]!==h)return!1;return h}function kk(c,e,g,h){var k=Vo(c),m=(e.length-1)/h,o,r,p,s;if(!k)return Math.max(m,1);for(o=B.math._factorize(k),p=0,s=o.length-1;p<s;p++){r=o[p];if(r>m)return r}return Math.max(m,1)}function Wo(c){var e=[],g,h;for(g=0,h=c.length;g<h;g++)c[g].major&&e.push(g);return e}function Xo(c,e,g){var h=0,k=e[0],m,o;for(g=Math.ceil(g),m=0;m<c.length;m++)o=c[m],m===k?(o._index=m,h++,k=e[h*g]):delete o.label}function fg(c,e,g,h){var k=Cd(g,0),m=Math.min(Cd(h,c.length),c.length),o=0,r,p,s,w;for(e=Math.ceil(e),h&&(r=h-g,e=r/Math.floor(r/e)),w=k;w<0;)o++,w=Math.round(k+o*e);for(p=Math.max(k,0);p<m;p++)s=c[p],p===w?(s._index=p,o++,w=Math.round(k+o*e)):delete s.label}var Ih=cc.extend({zeroLineIndex:0,getPadding:function(){var c=this;return{left:c.paddingLeft||0,top:c.paddingTop||0,right:c.paddingRight||0,bottom:c.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var c=this.chart.data;return this.options.labels||(this.isHorizontal()?c.xLabels:c.yLabels)||c.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){B.callback(this.options.beforeUpdate,[this])},update:function(c,e,g){var h=this,k=h.options.ticks,m=k.sampleSize,o,r,p,s,w;h.beforeUpdate(),h.maxWidth=c,h.maxHeight=e,h.margins=B.extend({left:0,right:0,top:0,bottom:0},g),h._ticks=null,h.ticks=null,h._labelSizes=null,h._maxLabelLines=0,h.longestLabelWidth=0,h.longestTextCache=h.longestTextCache||{},h._gridLineItems=null,h._labelItems=null,h.beforeSetDimensions(),h.setDimensions(),h.afterSetDimensions(),h.beforeDataLimits(),h.determineDataLimits(),h.afterDataLimits(),h.beforeBuildTicks(),s=h.buildTicks()||[],s=h.afterBuildTicks(s)||s;if((!s||!s.length)&&h.ticks)for(s=[],o=0,r=h.ticks.length;o<r;++o)s.push({value:h.ticks[o],major:!1});return h._ticks=s,w=m<s.length,p=h._convertTicksToLabels(w?To(s,m):s),h._configure(),h.beforeCalculateTickRotation(),h.calculateTickRotation(),h.afterCalculateTickRotation(),h.beforeFit(),h.fit(),h.afterFit(),h._ticksToDraw=k.display&&(k.autoSkip||k.source==="auto")?h._autoSkip(s):s,w&&(p=h._convertTicksToLabels(h._ticksToDraw)),h.ticks=p,h.afterUpdate(),h.minSize},_configure:function(){var c=this,e=c.options.ticks.reverse,g,h;c.isHorizontal()?(g=c.left,h=c.right):(g=c.top,h=c.bottom,e=!e),c._startPixel=g,c._endPixel=h,c._reversePixels=e,c._length=h-g},afterUpdate:function(){B.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){B.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var c=this;c.isHorizontal()?(c.width=c.maxWidth,c.left=0,c.right=c.width):(c.height=c.maxHeight,c.top=0,c.bottom=c.height),c.paddingLeft=0,c.paddingTop=0,c.paddingRight=0,c.paddingBottom=0},afterSetDimensions:function(){B.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){B.callback(this.options.beforeDataLimits,[this])},determineDataLimits:B.noop,afterDataLimits:function(){B.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){B.callback(this.options.beforeBuildTicks,[this])},buildTicks:B.noop,afterBuildTicks:function(c){var e=this;return Bd(c)&&c.length?B.callback(e.options.afterBuildTicks,[e,c]):(e.ticks=B.callback(e.options.afterBuildTicks,[e,e.ticks])||e.ticks,c)},beforeTickToLabelConversion:function(){B.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var c=this,e=c.options.ticks;c.ticks=c.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){B.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){B.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var c=this,e=c.options,g=e.ticks,h=c.getTicks().length,k=g.minRotation||0,m=g.maxRotation,o=k,r,p,s,w,z,D,M;if(!c._isVisible()||!g.display||k>=m||h<=1||!c.isHorizontal()){c.labelRotation=k;return}r=c._getLabelSizes(),p=r.widest.width,s=r.highest.height-r.highest.offset,w=Math.min(c.maxWidth,c.chart.width-p),z=e.offset?c.maxWidth/h:w/(h-1),p+6>z&&(z=w/(h-(e.offset?.5:1)),D=c.maxHeight-ke(e.gridLines)-g.padding-Fh(e.scaleLabel),M=Math.sqrt(p*p+s*s),o=B.toDegrees(Math.min(Math.asin(Math.min((r.highest.height+6)/z,1)),Math.asin(Math.min(D/M,1))-Math.asin(s/M))),o=Math.max(k,Math.min(m,o))),c.labelRotation=o},afterCalculateTickRotation:function(){B.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){B.callback(this.options.beforeFit,[this])},fit:function(){var c=this,e=c.minSize={width:0,height:0},g=c.chart,h=c.options,k=h.ticks,m=h.scaleLabel,o=h.gridLines,r=c._isVisible(),p=h.position==="bottom",s=c.isHorizontal();s?e.width=c.maxWidth:r&&(e.width=ke(o)+Fh(m)),s?r&&(e.height=ke(o)+Fh(m)):e.height=c.maxHeight;if(k.display&&r){var w=eg(k),z=c._getLabelSizes(),D=z.first,M=z.last,P=z.widest,T=z.highest,Y=w.minor.lineHeight*.4,ga=k.padding;if(s){var wa=c.labelRotation!==0,Aa=B.toRadians(c.labelRotation),Na=Math.cos(Aa),Ha=Math.sin(Aa),Xa=Ha*P.width+Na*(T.height-(wa?T.offset:0))+(wa?0:Y);e.height=Math.min(c.maxHeight,e.height+Xa+ga);var hb=c.getPixelForTick(0)-c.left,$a=c.right-c.getPixelForTick(c.getTicks().length-1),cb,Kb;wa?(cb=p?Na*D.width+Ha*D.offset:Ha*(D.height-D.offset),Kb=p?Ha*(M.height-M.offset):Na*M.width+Ha*M.offset):(cb=D.width/2,Kb=M.width/2),c.paddingLeft=Math.max((cb-hb)*c.width/(c.width-hb),0)+3,c.paddingRight=Math.max((Kb-$a)*c.width/(c.width-$a),0)+3}else{var Fb=k.mirror?0:P.width+ga+Y;e.width=Math.min(c.maxWidth,e.width+Fb),c.paddingTop=D.height/2,c.paddingBottom=M.height/2}}c.handleMargins(),s?(c.width=c._length=g.width-c.margins.left-c.margins.right,c.height=e.height):(c.width=e.width,c.height=c._length=g.height-c.margins.top-c.margins.bottom)},handleMargins:function(){var c=this;c.margins&&(c.margins.left=Math.max(c.paddingLeft,c.margins.left),c.margins.top=Math.max(c.paddingTop,c.margins.top),c.margins.right=Math.max(c.paddingRight,c.margins.right),c.margins.bottom=Math.max(c.paddingBottom,c.margins.bottom))},afterFit:function(){B.callback(this.options.afterFit,[this])},isHorizontal:function(){var c=this.options.position;return c==="top"||c==="bottom"},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(c){if(lf(c))return NaN;if((typeof c==="number"||c instanceof Number)&&!isFinite(c))return NaN;if(c){if(this.isHorizontal()){if(c.x!==void 0)return this.getRightValue(c.x)}else if(c.y!==void 0)return this.getRightValue(c.y)}return c},_convertTicksToLabels:function(c){var e=this,g,h,k;for(e.ticks=c.map(function(m){return m.value}),e.beforeTickToLabelConversion(),g=e.convertTicksToLabels(c)||e.ticks,e.afterTickToLabelConversion(),h=0,k=c.length;h<k;++h)c[h].label=g[h];return g},_getLabelSizes:function(){var c=this,e=c._labelSizes;return e||(c._labelSizes=e=Ed(c.ctx,eg(c.options.ticks),c.getTicks(),c.longestTextCache),c.longestLabelWidth=e.widest.width),e},_parseValue:function(c){var e,g,h,k;return Bd(c)?(e=+this.getRightValue(c[0]),g=+this.getRightValue(c[1]),h=Math.min(e,g),k=Math.max(e,g)):(c=+this.getRightValue(c),e=void 0,g=c,h=c,k=c),{min:h,max:k,start:e,end:g}},_getScaleLabel:function(c){var e=this._parseValue(c);return e.start!==void 0?"["+e.start+", "+e.end+"]":+this.getRightValue(c)},getLabelForIndex:B.noop,getPixelForValue:B.noop,getValueForPixel:B.noop,getPixelForTick:function(c){var e=this,g=e.options.offset,h=e._ticks.length,k=1/Math.max(h-(g?0:1),1);return c<0||c>h-1?null:e.getPixelForDecimal(c*k+(g?k/2:0))},getPixelForDecimal:function(c){var e=this;return e._reversePixels&&(c=1-c),e._startPixel+c*e._length},getDecimalForPixel:function(c){var e=(c-this._startPixel)/this._length;return this._reversePixels?1-e:e},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var c=this,e=c.min,g=c.max;return c.beginAtZero?0:e<0&&g<0?g:e>0&&g>0?e:0},_autoSkip:function(c){var e=this,g=e.options.ticks,h=e._length,k=g.maxTicksLimit||h/e._tickSize()+1,m=g.major.enabled?Wo(c):[],o=m.length,r=m[0],p=m[o-1],s,w,z,D;if(o>k)return Xo(c,m,o/k),Hh(c);z=kk(m,c,h,k);if(o>0){for(s=0,w=o-1;s<w;s++)fg(c,z,m[s],m[s+1]);return D=o>1?(p-r)/(o-1):null,fg(c,z,B.isNullOrUndef(D)?0:r-D,r),fg(c,z,p,B.isNullOrUndef(D)?c.length:p+D),Hh(c)}return fg(c,z),Hh(c)},_tickSize:function(){var c=this,e=c.options.ticks,g=B.toRadians(c.labelRotation),h=Math.abs(Math.cos(g)),k=Math.abs(Math.sin(g)),m=c._getLabelSizes(),o=e.autoSkipPadding||0,r=m?m.widest.width+o:0,p=m?m.highest.height+o:0;return c.isHorizontal()?p*h>r*k?r/h:p/k:p*k<r*h?p/h:r/k},_isVisible:function(){var c=this,e=c.chart,g=c.options.display,h,k,m;if(g!=="auto")return!!g;for(h=0,k=e.data.datasets.length;h<k;++h)if(e.isDatasetVisible(h)){m=e.getDatasetMeta(h);if(m.xAxisID===c.id||m.yAxisID===c.id)return!0}return!1},_computeGridLineItems:function(c){var e=this,g=e.chart,h=e.options,k=h.gridLines,m=h.position,o=k.offsetGridLines,r=e.isHorizontal(),p=e._ticksToDraw,s=p.length+(o?1:0),w=ke(k),z=[],D=k.drawBorder?Dd(k.lineWidth,0,0):0,M=D/2,P=B._alignPixel,T=function(mg){return P(g,mg,D)},Y,ga,wa,Aa,Na,Ha,Xa,hb,$a,cb,Kb,Fb,Bb,Nb,ne,hd,id;for(m==="top"?(Y=T(e.bottom),Xa=e.bottom-w,$a=Y-M,Kb=T(c.top)+M,Bb=c.bottom):m==="bottom"?(Y=T(e.top),Kb=c.top,Bb=T(c.bottom)-M,Xa=Y+M,$a=e.top+w):m==="left"?(Y=T(e.right),Ha=e.right-w,hb=Y-M,cb=T(c.left)+M,Fb=c.right):(Y=T(e.left),cb=c.left,Fb=T(c.right)-M,Ha=Y+M,hb=e.left+w),ga=0;ga<s;++ga){wa=p[ga]||{};if(lf(wa.label)&&ga<p.length)continue;ga===e.zeroLineIndex&&h.offset===o?(Nb=k.zeroLineWidth,ne=k.zeroLineColor,hd=k.zeroLineBorderDash||[],id=k.zeroLineBorderDashOffset||0):(Nb=Dd(k.lineWidth,ga,1),ne=Dd(k.color,ga,"rgba(0,0,0,0.1)"),hd=k.borderDash||[],id=k.borderDashOffset||0),Aa=Uo(e,wa._index||ga,o);if(Aa===void 0)continue;Na=P(g,Aa,Nb),r?Ha=hb=cb=Fb=Na:Xa=$a=Kb=Bb=Na,z.push({tx1:Ha,ty1:Xa,tx2:hb,ty2:$a,x1:cb,y1:Kb,x2:Fb,y2:Bb,width:Nb,color:ne,borderDash:hd,borderDashOffset:id})}return z.ticksLength=s,z.borderValue=Y,z},_computeLabelItems:function(){var c=this,e=c.options,g=e.ticks,h=e.position,k=g.mirror,m=c.isHorizontal(),o=c._ticksToDraw,r=eg(g),p=g.padding,s=ke(e.gridLines),w=-B.toRadians(c.labelRotation),z=[],D,M,P,T,Y,ga,wa,Aa,Na,Ha,Xa,hb;for(h==="top"?(ga=c.bottom-s-p,wa=w?"left":"center"):h==="bottom"?(ga=c.top+s+p,wa=w?"right":"center"):h==="left"?(Y=c.right-(k?0:s)-p,wa=k?"left":"right"):(Y=c.left+(k?0:s)+p,wa=k?"right":"left"),D=0,M=o.length;D<M;++D){P=o[D],T=P.label;if(lf(T))continue;Aa=c.getPixelForTick(P._index||D)+g.labelOffset,Na=P.major?r.major:r.minor,Ha=Na.lineHeight,Xa=Bd(T)?T.length:1,m?(Y=Aa,hb=h==="top"?((w?1:.5)-Xa)*Ha:(w?0:.5)*Ha):(ga=Aa,hb=(1-Xa)*Ha/2),z.push({x:Y,y:ga,rotation:w,label:T,font:Na,textOffset:hb,textAlign:wa})}return z},_drawGrid:function(c){var e=this,g=e.options.gridLines;if(!g.display)return;var h=e.ctx,k=e.chart,m=B._alignPixel,o=g.drawBorder?Dd(g.lineWidth,0,0):0,r=e._gridLineItems||(e._gridLineItems=e._computeGridLineItems(c)),p,s,w,z,D;for(w=0,z=r.length;w<z;++w)D=r[w],p=D.width,s=D.color,p&&s&&(h.save(),h.lineWidth=p,h.strokeStyle=s,h.setLineDash&&(h.setLineDash(D.borderDash),h.lineDashOffset=D.borderDashOffset),h.beginPath(),g.drawTicks&&(h.moveTo(D.tx1,D.ty1),h.lineTo(D.tx2,D.ty2)),g.drawOnChartArea&&(h.moveTo(D.x1,D.y1),h.lineTo(D.x2,D.y2)),h.stroke(),h.restore());if(o){var M=o,P=Dd(g.lineWidth,r.ticksLength-1,1),T=r.borderValue,Y,ga,wa,Aa;e.isHorizontal()?(Y=m(k,e.left,M)-M/2,ga=m(k,e.right,P)+P/2,wa=Aa=T):(wa=m(k,e.top,M)-M/2,Aa=m(k,e.bottom,P)+P/2,Y=ga=T),h.lineWidth=o,h.strokeStyle=Dd(g.color,0),h.beginPath(),h.moveTo(Y,wa),h.lineTo(ga,Aa),h.stroke()}},_drawLabels:function(){var c=this,e=c.options.ticks;if(!e.display)return;var g=c.ctx,h=c._labelItems||(c._labelItems=c._computeLabelItems()),k,m,o,r,p,s,w,z;for(k=0,o=h.length;k<o;++k){p=h[k],s=p.font,g.save(),g.translate(p.x,p.y),g.rotate(p.rotation),g.font=s.string,g.fillStyle=s.color,g.textBaseline="middle",g.textAlign=p.textAlign,w=p.label,z=p.textOffset;if(Bd(w))for(m=0,r=w.length;m<r;++m)g.fillText(""+w[m],0,z),z+=s.lineHeight;else g.fillText(w,0,z);g.restore()}},_drawTitle:function(){var c=this,e=c.ctx,g=c.options,h=g.scaleLabel;if(!h.display)return;var k=Cd(h.fontColor,S.global.defaultFontColor),m=B.options._parseFont(h),o=B.options.toPadding(h.padding),r=m.lineHeight/2,p=g.position,s=0,w,z;if(c.isHorizontal())w=c.left+c.width/2,z=p==="bottom"?c.bottom-r-o.bottom:c.top+r+o.top;else{var D=p==="left";w=D?c.left+r+o.top:c.right-r-o.top,z=c.top+c.height/2,s=D?-.5*Math.PI:.5*Math.PI}e.save(),e.translate(w,z),e.rotate(s),e.textAlign="center",e.textBaseline="middle",e.fillStyle=k,e.font=m.string,e.fillText(h.labelString,0,0),e.restore()},draw:function(c){var e=this;if(!e._isVisible())return;e._drawGrid(c),e._drawTitle(),e._drawLabels()},_layers:function(){var c=this,e=c.options,g=e.ticks&&e.ticks.z||0,h=e.gridLines&&e.gridLines.z||0;return!c._isVisible()||g===h||c.draw!==c._draw?[{z:g,draw:function(){c.draw.apply(c,arguments)}}]:[{z:h,draw:function(){c._drawGrid.apply(c,arguments),c._drawTitle.apply(c,arguments)}},{z:g,draw:function(){c._drawLabels.apply(c,arguments)}}]},_getMatchingVisibleMetas:function(c){var e=this,g=e.isHorizontal();return e.chart._getSortedVisibleDatasetMetas().filter(function(h){return(!c||h.type===c)&&(g?h.xAxisID===e.id:h.yAxisID===e.id)})}});Ih.prototype._draw=Ih.prototype.draw;var Xb=Ih,Jh=B.isNullOrUndef,Yo={position:"bottom"},lk=Xb.extend({determineDataLimits:function(){var c=this,e=c._getLabels(),g=c.options.ticks,h=g.min,k=g.max,m=0,o=e.length-1,r;h!==void 0&&(r=e.indexOf(h),r>=0&&(m=r)),k!==void 0&&(r=e.indexOf(k),r>=0&&(o=r)),c.minIndex=m,c.maxIndex=o,c.min=e[m],c.max=e[o]},buildTicks:function(){var c=this,e=c._getLabels(),g=c.minIndex,h=c.maxIndex;c.ticks=g===0&&h===e.length-1?e:e.slice(g,h+1)},getLabelForIndex:function(c,e){var g=this,h=g.chart;return h.getDatasetMeta(e).controller._getValueScaleId()===g.id?g.getRightValue(h.data.datasets[e].data[c]):g._getLabels()[c]},_configure:function(){var c=this,e=c.options.offset,g=c.ticks;Xb.prototype._configure.call(c),c.isHorizontal()||(c._reversePixels=!c._reversePixels);if(!g)return;c._startValue=c.minIndex-(e?.5:0),c._valueRange=Math.max(g.length-(e?0:1),1)},getPixelForValue:function(c,e,g){var h=this,k,m,o;return!Jh(e)&&!Jh(g)&&(c=h.chart.data.datasets[g].data[e]),Jh(c)||(k=h.isHorizontal()?c.x:c.y),(k!==void 0||c!==void 0&&isNaN(e))&&(m=h._getLabels(),c=B.valueOrDefault(k,c),o=m.indexOf(c),e=o!==-1?o:e,isNaN(e)&&(e=c)),h.getPixelForDecimal((e-h._startValue)/h._valueRange)},getPixelForTick:function(c){var e=this.ticks;return c<0||c>e.length-1?null:this.getPixelForValue(e[c],c+this.minIndex)},getValueForPixel:function(c){var e=this,g=Math.round(e._startValue+e.getDecimalForPixel(c)*e._valueRange);return Math.min(Math.max(g,0),e.ticks.length-1)},getBasePixel:function(){return this.bottom}}),Zo=Yo;lk._defaults=Zo;var _o=B.noop,Fd=B.isNullOrUndef;function $o(c,e){var g=[],h=1e-14,k=c.stepSize,m=k||1,o=c.maxTicks-1,r=c.min,p=c.max,s=c.precision,w=e.min,z=e.max,D=B.niceNum((z-w)/o/m)*m,M,P,T,Y;if(D<h&&Fd(r)&&Fd(p))return[w,z];Y=Math.ceil(z/D)-Math.floor(w/D),Y>o&&(D=B.niceNum(Y*D/o/m)*m),k||Fd(s)?M=Math.pow(10,B._decimalPlaces(D)):(M=Math.pow(10,s),D=Math.ceil(D*M)/M),P=Math.floor(w/D)*D,T=Math.ceil(z/D)*D,k&&(!Fd(r)&&B.almostWhole(r/D,D/1e3)&&(P=r),!Fd(p)&&B.almostWhole(p/D,D/1e3)&&(T=p)),Y=(T-P)/D,B.almostEquals(Y,Math.round(Y),D/1e3)?Y=Math.round(Y):Y=Math.ceil(Y),P=Math.round(P*M)/M,T=Math.round(T*M)/M,g.push(Fd(r)?P:r);for(var ga=1;ga<Y;++ga)g.push(Math.round((P+ga*D)*M)/M);return g.push(Fd(p)?T:p),g}var gg=Xb.extend({getRightValue:function(c){return typeof c==="string"?+c:Xb.prototype.getRightValue.call(this,c)},handleTickRangeOptions:function(){var c=this,e=c.options,g=e.ticks;if(g.beginAtZero){var h=B.sign(c.min),k=B.sign(c.max);h<0&&k<0?c.max=0:h>0&&k>0&&(c.min=0)}var m=g.min!==void 0||g.suggestedMin!==void 0,o=g.max!==void 0||g.suggestedMax!==void 0;g.min!==void 0?c.min=g.min:g.suggestedMin!==void 0&&(c.min===null?c.min=g.suggestedMin:c.min=Math.min(c.min,g.suggestedMin)),g.max!==void 0?c.max=g.max:g.suggestedMax!==void 0&&(c.max===null?c.max=g.suggestedMax:c.max=Math.max(c.max,g.suggestedMax)),m!==o&&(c.min>=c.max&&(m?c.max=c.min+1:c.min=c.max-1)),c.min===c.max&&(c.max++,g.beginAtZero||c.min--)},getTickLimit:function(){var c=this,e=c.options.ticks,g=e.stepSize,h=e.maxTicksLimit,k;return g?k=Math.ceil(c.max/g)-Math.floor(c.min/g)+1:(k=c._computeTickLimit(),h=h||11),h&&(k=Math.min(h,k)),k},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:_o,buildTicks:function(){var c=this,e=c.options,g=e.ticks,h=c.getTickLimit();h=Math.max(2,h);var k={maxTicks:h,min:g.min,max:g.max,precision:g.precision,stepSize:B.valueOrDefault(g.fixedStepSize,g.stepSize)},m=c.ticks=$o(k,c);c.handleDirectionalChanges(),c.max=B.max(m),c.min=B.min(m),g.reverse?(m.reverse(),c.start=c.max,c.end=c.min):(c.start=c.min,c.end=c.max)},convertTicksToLabels:function(){var c=this;c.ticksAsNumbers=c.ticks.slice(),c.zeroLineIndex=c.ticks.indexOf(0),Xb.prototype.convertTicksToLabels.call(c)},_configure:function(){var c=this,e=c.getTicks(),g=c.min,h=c.max,k;Xb.prototype._configure.call(c),c.options.offset&&e.length&&(k=(h-g)/Math.max(e.length-1,1)/2,g-=k,h+=k),c._startValue=g,c._endValue=h,c._valueRange=h-g}}),ap={position:"left",ticks:{callback:kf.formatters.linear}},hg=0,bp=1;function cp(c,e,g){var h=[g.type,e===void 0&&g.stack===void 0?g.index:"",g.stack].join(".");return c[h]===void 0&&(c[h]={pos:[],neg:[]}),c[h]}function dp(c,e,g,h){var k=c.options,m=k.stacked,o=cp(e,m,g),r=o.pos,p=o.neg,s=h.length,w,z;for(w=0;w<s;++w){z=c._parseValue(h[w]);if(isNaN(z.min)||isNaN(z.max)||g.data[w].hidden)continue;r[w]=r[w]||0,p[w]=p[w]||0,k.relativePoints?r[w]=100:z.min<0||z.max<0?p[w]+=z.min:r[w]+=z.max}}function ep(c,e,g){var h=g.length,k,m;for(k=0;k<h;++k){m=c._parseValue(g[k]);if(isNaN(m.min)||isNaN(m.max)||e.data[k].hidden)continue;c.min=Math.min(c.min,m.min),c.max=Math.max(c.max,m.max)}}var mk=gg.extend({determineDataLimits:function(){var c=this,e=c.options,g=c.chart,h=g.data.datasets,k=c._getMatchingVisibleMetas(),m=e.stacked,o={},r=k.length,p,s,w,z;c.min=Number.POSITIVE_INFINITY,c.max=Number.NEGATIVE_INFINITY;if(m===void 0)for(p=0;!m&&p<r;++p)s=k[p],m=s.stack!==void 0;for(p=0;p<r;++p)s=k[p],w=h[s.index].data,m?dp(c,o,s,w):ep(c,s,w);B.each(o,function(D){z=D.pos.concat(D.neg),c.min=Math.min(c.min,B.min(z)),c.max=Math.max(c.max,B.max(z))}),c.min=B.isFinite(c.min)&&!isNaN(c.min)?c.min:hg,c.max=B.isFinite(c.max)&&!isNaN(c.max)?c.max:bp,c.handleTickRangeOptions()},_computeTickLimit:function(){var c=this,e;return c.isHorizontal()?Math.ceil(c.width/40):(e=B.options._parseFont(c.options.ticks),Math.ceil(c.height/e.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(c,e){return this._getScaleLabel(this.chart.data.datasets[e].data[c])},getPixelForValue:function(c){var e=this;return e.getPixelForDecimal((+e.getRightValue(c)-e._startValue)/e._valueRange)},getValueForPixel:function(c){return this._startValue+this.getDecimalForPixel(c)*this._valueRange},getPixelForTick:function(c){var e=this.ticksAsNumbers;return c<0||c>e.length-1?null:this.getPixelForValue(e[c])}}),fp=ap;mk._defaults=fp;var Kh=B.valueOrDefault,Yb=B.math.log10;function nk(c,e){var g=[],h=Kh(c.min,Math.pow(10,Math.floor(Yb(e.min)))),k=Math.floor(Yb(e.max)),m=Math.ceil(e.max/Math.pow(10,k)),o,r;h===0?(o=Math.floor(Yb(e.minNotZero)),r=Math.floor(e.minNotZero/Math.pow(10,o)),g.push(h),h=r*Math.pow(10,o)):(o=Math.floor(Yb(h)),r=Math.floor(h/Math.pow(10,o)));var p=o<0?Math.pow(10,Math.abs(o)):1;do g.push(h),++r,r===10&&(r=1,++o,p=o>=0?1:p),h=Math.round(r*Math.pow(10,o)*p)/p;while(o<k||o===k&&r<m);var s=Kh(c.max,h);return g.push(s),g}var ok={position:"left",ticks:{callback:kf.formatters.logarithmic}};function mf(c,e){return B.isFinite(c)&&c>=0?c:e}var nf=Xb.extend({determineDataLimits:function(){var c=this,e=c.options,g=c.chart,h=g.data.datasets,k=c.isHorizontal();function m(Y){return k?Y.xAxisID===c.id:Y.yAxisID===c.id}var o,r,p,s,w,z;c.min=Number.POSITIVE_INFINITY,c.max=Number.NEGATIVE_INFINITY,c.minNotZero=Number.POSITIVE_INFINITY;var D=e.stacked;if(D===void 0)for(o=0;o<h.length;o++){r=g.getDatasetMeta(o);if(g.isDatasetVisible(o)&&m(r)&&r.stack!==void 0){D=!0;break}}if(e.stacked||D){var M={};for(o=0;o<h.length;o++){r=g.getDatasetMeta(o);var P=[r.type,e.stacked===void 0&&r.stack===void 0?o:"",r.stack].join(".");if(g.isDatasetVisible(o)&&m(r))for(M[P]===void 0&&(M[P]=[]),s=h[o].data,w=0,z=s.length;w<z;w++){var T=M[P];p=c._parseValue(s[w]);if(isNaN(p.min)||isNaN(p.max)||r.data[w].hidden||p.min<0||p.max<0)continue;T[w]=T[w]||0,T[w]+=p.max}}B.each(M,function(Y){if(Y.length>0){var ga=B.min(Y),wa=B.max(Y);c.min=Math.min(c.min,ga),c.max=Math.max(c.max,wa)}})}else for(o=0;o<h.length;o++){r=g.getDatasetMeta(o);if(g.isDatasetVisible(o)&&m(r))for(s=h[o].data,w=0,z=s.length;w<z;w++){p=c._parseValue(s[w]);if(isNaN(p.min)||isNaN(p.max)||r.data[w].hidden||p.min<0||p.max<0)continue;c.min=Math.min(p.min,c.min),c.max=Math.max(p.max,c.max),p.min!==0&&(c.minNotZero=Math.min(p.min,c.minNotZero))}}c.min=B.isFinite(c.min)?c.min:null,c.max=B.isFinite(c.max)?c.max:null,c.minNotZero=B.isFinite(c.minNotZero)?c.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var c=this,e=c.options.ticks,g=1,h=10;c.min=mf(e.min,c.min),c.max=mf(e.max,c.max),c.min===c.max&&(c.min!==0&&c.min!==null?(c.min=Math.pow(10,Math.floor(Yb(c.min))-1),c.max=Math.pow(10,Math.floor(Yb(c.max))+1)):(c.min=g,c.max=h)),c.min===null&&(c.min=Math.pow(10,Math.floor(Yb(c.max))-1)),c.max===null&&(c.max=c.min!==0?Math.pow(10,Math.floor(Yb(c.min))+1):h),c.minNotZero===null&&(c.min>0?c.minNotZero=c.min:c.max<1?c.minNotZero=Math.pow(10,Math.floor(Yb(c.max))):c.minNotZero=g)},buildTicks:function(){var c=this,e=c.options.ticks,g=!c.isHorizontal(),h={min:mf(e.min),max:mf(e.max)},k=c.ticks=nk(h,c);c.max=B.max(k),c.min=B.min(k),e.reverse?(g=!g,c.start=c.max,c.end=c.min):(c.start=c.min,c.end=c.max),g&&k.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),Xb.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(c,e){return this._getScaleLabel(this.chart.data.datasets[e].data[c])},getPixelForTick:function(c){var e=this.tickValues;return c<0||c>e.length-1?null:this.getPixelForValue(e[c])},_getFirstTickValue:function(c){var e=Math.floor(Yb(c)),g=Math.floor(c/Math.pow(10,e));return g*Math.pow(10,e)},_configure:function(){var c=this,e=c.min,g=0;Xb.prototype._configure.call(c),e===0&&(e=c._getFirstTickValue(c.minNotZero),g=Kh(c.options.ticks.fontSize,S.global.defaultFontSize)/c._length),c._startValue=Yb(e),c._valueOffset=g,c._valueRange=(Yb(c.max)-Yb(e))/(1-g)},getPixelForValue:function(c){var e=this,g=0;return c=+e.getRightValue(c),c>e.min&&c>0&&(g=(Yb(c)-e._startValue)/e._valueRange+e._valueOffset),e.getPixelForDecimal(g)},getValueForPixel:function(c){var e=this,g=e.getDecimalForPixel(c);return g===0&&e.min===0?0:Math.pow(10,e._startValue+(g-e._valueOffset)*e._valueRange)}}),le=ok;nf._defaults=le;var Gd=B.valueOrDefault,ig=B.valueAtIndexOrDefault,Hd=B.options.resolve,pk={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:kf.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(c){return c}}};function jg(c){var e=c.ticks;return e.display&&c.display?Gd(e.fontSize,S.global.defaultFontSize)+e.backdropPaddingY*2:0}function gp(c,e,g){return B.isArray(g)?{w:B.longestText(c,c.font,g),h:g.length*e}:{w:c.measureText(g).width,h:e}}function qk(c,e,g,h,k){return c===h||c===k?{start:e-g/2,end:e+g/2}:c<h||c>k?{start:e-g,end:e}:{start:e,end:e+g}}function hp(c){var e=B.options._parseFont(c.options.pointLabels),g={l:0,r:c.width,t:0,b:c.height-c.paddingTop},h={},k,m,o;c.ctx.font=e.string,c._pointLabelSizes=[];var r=c.chart.data.labels.length;for(k=0;k<r;k++){o=c.getPointPosition(k,c.drawingArea+5),m=gp(c.ctx,e.lineHeight,c.pointLabels[k]),c._pointLabelSizes[k]=m;var p=c.getIndexAngle(k),s=B.toDegrees(p)%360,w=qk(s,o.x,m.w,0,180),z=qk(s,o.y,m.h,90,270);w.start<g.l&&(g.l=w.start,h.l=p),w.end>g.r&&(g.r=w.end,h.r=p),z.start<g.t&&(g.t=z.start,h.t=p),z.end>g.b&&(g.b=z.end,h.b=p)}c.setReductions(c.drawingArea,g,h)}function ip(c){return c===0||c===180?"center":c<180?"left":"right"}function jp(c,e,g,h){var k=g.y+h/2,m,o;if(B.isArray(e))for(m=0,o=e.length;m<o;++m)c.fillText(e[m],g.x,k),k+=h;else c.fillText(e,g.x,k)}function kp(c,e,g){c===90||c===270?g.y-=e.h/2:(c>270||c<90)&&(g.y-=e.h)}function lp(c){var e=c.ctx,g=c.options,h=g.pointLabels,k=jg(g),m=c.getDistanceFromCenterForValue(g.ticks.reverse?c.min:c.max),o=B.options._parseFont(h);e.save(),e.font=o.string,e.textBaseline="middle";for(var r=c.chart.data.labels.length-1;r>=0;r--){var p=r===0?k/2:0,s=c.getPointPosition(r,m+p+5),w=ig(h.fontColor,r,S.global.defaultFontColor);e.fillStyle=w;var z=c.getIndexAngle(r),D=B.toDegrees(z);e.textAlign=ip(D),kp(D,c._pointLabelSizes[r],s),jp(e,c.pointLabels[r],s,o.lineHeight)}e.restore()}function mp(c,e,g,h){var k=c.ctx,m=e.circular,o=c.chart.data.labels.length,r=ig(e.color,h-1),p=ig(e.lineWidth,h-1),s;if(!m&&!o||!r||!p)return;k.save(),k.strokeStyle=r,k.lineWidth=p,k.setLineDash&&(k.setLineDash(e.borderDash||[]),k.lineDashOffset=e.borderDashOffset||0),k.beginPath();if(m)k.arc(c.xCenter,c.yCenter,g,0,Math.PI*2);else{s=c.getPointPosition(0,g),k.moveTo(s.x,s.y);for(var w=1;w<o;w++)s=c.getPointPosition(w,g),k.lineTo(s.x,s.y)}k.closePath(),k.stroke(),k.restore()}function kg(c){return B.isNumber(c)?c:0}var rk=gg.extend({setDimensions:function(){var c=this;c.width=c.maxWidth,c.height=c.maxHeight,c.paddingTop=jg(c.options)/2,c.xCenter=Math.floor(c.width/2),c.yCenter=Math.floor((c.height-c.paddingTop)/2),c.drawingArea=Math.min(c.height-c.paddingTop,c.width)/2},determineDataLimits:function(){var c=this,e=c.chart,g=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;B.each(e.data.datasets,function(k,m){if(e.isDatasetVisible(m)){var o=e.getDatasetMeta(m);B.each(k.data,function(r,p){var s=+c.getRightValue(r);if(isNaN(s)||o.data[p].hidden)return;g=Math.min(s,g),h=Math.max(s,h)})}}),c.min=g===Number.POSITIVE_INFINITY?0:g,c.max=h===Number.NEGATIVE_INFINITY?0:h,c.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/jg(this.options))},convertTicksToLabels:function(){var c=this;gg.prototype.convertTicksToLabels.call(c),c.pointLabels=c.chart.data.labels.map(function(){var e=B.callback(c.options.pointLabels.callback,arguments,c);return e||e===0?e:""})},getLabelForIndex:function(c,e){return+this.getRightValue(this.chart.data.datasets[e].data[c])},fit:function(){var c=this,e=c.options;e.display&&e.pointLabels.display?hp(c):c.setCenterPoint(0,0,0,0)},setReductions:function(c,e,g){var h=this,k=e.l/Math.sin(g.l),m=Math.max(e.r-h.width,0)/Math.sin(g.r),o=-e.t/Math.cos(g.t),r=-Math.max(e.b-(h.height-h.paddingTop),0)/Math.cos(g.b);k=kg(k),m=kg(m),o=kg(o),r=kg(r),h.drawingArea=Math.min(Math.floor(c-(k+m)/2),Math.floor(c-(o+r)/2)),h.setCenterPoint(k,m,o,r)},setCenterPoint:function(c,e,g,h){var k=this,m=k.width-e-k.drawingArea,o=c+k.drawingArea,r=g+k.drawingArea,p=k.height-k.paddingTop-h-k.drawingArea;k.xCenter=Math.floor((o+m)/2+k.left),k.yCenter=Math.floor((r+p)/2+k.top+k.paddingTop)},getIndexAngle:function(c){var e=this.chart,g=360/e.data.labels.length,h=e.options||{},k=h.startAngle||0,m=(c*g+k)%360;return(m<0?m+360:m)*Math.PI*2/360},getDistanceFromCenterForValue:function(c){var e=this;if(B.isNullOrUndef(c))return NaN;var g=e.drawingArea/(e.max-e.min);return e.options.ticks.reverse?(e.max-c)*g:(c-e.min)*g},getPointPosition:function(c,e){var g=this,h=g.getIndexAngle(c)-Math.PI/2;return{x:Math.cos(h)*e+g.xCenter,y:Math.sin(h)*e+g.yCenter}},getPointPositionForValue:function(c,e){return this.getPointPosition(c,this.getDistanceFromCenterForValue(e))},getBasePosition:function(c){var e=this,g=e.min,h=e.max;return e.getPointPositionForValue(c||0,e.beginAtZero?0:g<0&&h<0?h:g>0&&h>0?g:0)},_drawGrid:function(){var c=this,e=c.ctx,g=c.options,h=g.gridLines,k=g.angleLines,m=Gd(k.lineWidth,h.lineWidth),o=Gd(k.color,h.color),r,p,s;g.pointLabels.display&&lp(c),h.display&&B.each(c.ticks,function(w,z){z!==0&&(p=c.getDistanceFromCenterForValue(c.ticksAsNumbers[z]),mp(c,h,p,z))});if(k.display&&m&&o){for(e.save(),e.lineWidth=m,e.strokeStyle=o,e.setLineDash&&(e.setLineDash(Hd([k.borderDash,h.borderDash,[]])),e.lineDashOffset=Hd([k.borderDashOffset,h.borderDashOffset,0])),r=c.chart.data.labels.length-1;r>=0;r--)p=c.getDistanceFromCenterForValue(g.ticks.reverse?c.min:c.max),s=c.getPointPosition(r,p),e.beginPath(),e.moveTo(c.xCenter,c.yCenter),e.lineTo(s.x,s.y),e.stroke();e.restore()}},_drawLabels:function(){var c=this,e=c.ctx,g=c.options,h=g.ticks;if(!h.display)return;var k=c.getIndexAngle(0),m=B.options._parseFont(h),o=Gd(h.fontColor,S.global.defaultFontColor),r,p;e.save(),e.font=m.string,e.translate(c.xCenter,c.yCenter),e.rotate(k),e.textAlign="center",e.textBaseline="middle",B.each(c.ticks,function(s,w){if(w===0&&!h.reverse)return;r=c.getDistanceFromCenterForValue(c.ticksAsNumbers[w]),h.showLabelBackdrop&&(p=e.measureText(s).width,e.fillStyle=h.backdropColor,e.fillRect(-p/2-h.backdropPaddingX,-r-m.size/2-h.backdropPaddingY,p+h.backdropPaddingX*2,m.size+h.backdropPaddingY*2)),e.fillStyle=o,e.fillText(s,0,-r)}),e.restore()},_drawTitle:B.noop}),np=pk;rk._defaults=np;var Lh=B._deprecated,sk=B.options.resolve,op=B.valueOrDefault,tk=Number.MIN_SAFE_INTEGER||-9007199254740991,Mh=Number.MAX_SAFE_INTEGER||9007199254740991,lg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Zb=Object.keys(lg);function uk(c,e){return c-e}function pp(c){var e={},g=[],h,k,m;for(h=0,k=c.length;h<k;++h)m=c[h],e[m]||(e[m]=!0,g.push(m));return g}function vk(c){return B.valueOrDefault(c.time.min,c.ticks.min)}function wk(c){return B.valueOrDefault(c.time.max,c.ticks.max)}function Nh(c,e,g,h){if(h==="linear"||!c.length)return[{time:e,pos:0},{time:g,pos:1}];var k=[],m=[e],o,r,p,s,w;for(o=0,r=c.length;o<r;++o)s=c[o],s>e&&s<g&&m.push(s);for(m.push(g),o=0,r=m.length;o<r;++o)w=m[o+1],p=m[o-1],s=m[o],(p===void 0||w===void 0||Math.round((w+p)/2)!==s)&&k.push({time:s,pos:o/(r-1)});return k}function qp(c,e,g){for(var h=0,k=c.length-1,m,o,r;h>=0&&h<=k;){m=h+k>>1,o=c[m-1]||null,r=c[m];if(o)if(r[e]<g)h=m+1;else if(o[e]>g)k=m-1;else return{lo:o,hi:r};else return{lo:null,hi:r}}return{lo:r,hi:null}}function me(c,e,g,h){var k=qp(c,e,g),m=k.lo?k.hi?k.lo:c[c.length-2]:c[0],o=k.lo?k.hi?k.hi:c[c.length-1]:c[1],r=o[e]-m[e],p=r?(g-m[e])/r:0,s=(o[h]-m[h])*p;return m[h]+s}function Oh(c,e){var g=c._adapter,h=c.options.time,k=h.parser,m=k||h.format,o=e;return typeof k==="function"&&(o=k(o)),B.isFinite(o)||(o=typeof m==="string"?g.parse(o,m):g.parse(o)),o!==null?+o:(!k&&typeof m==="function"&&(o=m(e),B.isFinite(o)||(o=g.parse(o))),o)}function Rc(c,e){if(B.isNullOrUndef(e))return null;var g=c.options.time,h=Oh(c,c.getRightValue(e));return h===null?h:(g.round&&(h=+c._adapter.startOf(h,g.round)),h)}function of(c,e,g,h){var k=Zb.length,m,o,r;for(m=Zb.indexOf(c);m<k-1;++m){o=lg[Zb[m]],r=o.steps?o.steps:Mh;if(o.common&&Math.ceil((g-e)/(r*o.size))<=h)return Zb[m]}return Zb[k-1]}function rp(c,e,g,h,k){var m,o;for(m=Zb.length-1;m>=Zb.indexOf(g);m--){o=Zb[m];if(lg[o].common&&c._adapter.diff(k,h,o)>=e-1)return o}return Zb[g?Zb.indexOf(g):0]}function sp(c){for(var e=Zb.indexOf(c)+1,g=Zb.length;e<g;++e)if(lg[Zb[e]].common)return Zb[e]}function tp(c,e,g,h){var k=c._adapter,m=c.options,o=m.time,r=o.unit||of(o.minUnit,e,g,h),p=sk([o.stepSize,o.unitStepSize,1]),s=r==="week"?o.isoWeekday:!1,w=e,z=[],D;s&&(w=+k.startOf(w,"isoWeek",s)),w=+k.startOf(w,s?"day":r);if(k.diff(g,e,r)>1e5*p)throw e+" and "+g+" are too far apart with stepSize of "+p+" "+r;for(D=w;D<g;D=+k.add(D,p,r))z.push(D);return(D===g||m.bounds==="ticks")&&z.push(D),z}function up(c,e,g,h,k){var m=0,o=0,r,p;return k.offset&&e.length&&(r=me(c,"time",e[0],"pos"),e.length===1?m=1-r:m=(me(c,"time",e[1],"pos")-r)/2,p=me(c,"time",e[e.length-1],"pos"),e.length===1?o=p:o=(p-me(c,"time",e[e.length-2],"pos"))/2),{start:m,end:o,factor:1/(m+1+o)}}function vp(c,e,g,h){var k=c._adapter,m=+k.startOf(e[0].value,h),o=e[e.length-1].value,r,p;for(r=m;r<=o;r=+k.add(r,1,h))p=g[r],p>=0&&(e[p].major=!0);return e}function xk(c,e,g){var h=[],k={},m=e.length,o,r;for(o=0;o<m;++o)r=e[o],k[r]=o,h.push({value:r,major:!1});return m===0||!g?h:vp(c,h,k,g)}var yk={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}},zk=Xb.extend({initialize:function(){this.mergeTicksOptions(),Xb.prototype.initialize.call(this)},update:function(){var c=this,e=c.options,g=e.time||(e.time={}),h=c._adapter=new Eh._date(e.adapters.date);return Lh("time scale",g.format,"time.format","time.parser"),Lh("time scale",g.min,"time.min","ticks.min"),Lh("time scale",g.max,"time.max","ticks.max"),B.mergeIf(g.displayFormats,h.formats()),Xb.prototype.update.apply(c,arguments)},getRightValue:function(c){return c&&c.t!==void 0&&(c=c.t),Xb.prototype.getRightValue.call(this,c)},determineDataLimits:function(){var c=this,e=c.chart,g=c._adapter,h=c.options,k=h.time.unit||"day",m=Mh,o=tk,r=[],p=[],s=[],w,z,D,M,P,T,Y,ga=c._getLabels();for(w=0,D=ga.length;w<D;++w)s.push(Rc(c,ga[w]));for(w=0,D=(e.data.datasets||[]).length;w<D;++w)if(e.isDatasetVisible(w)){P=e.data.datasets[w].data;if(B.isObject(P[0]))for(p[w]=[],z=0,M=P.length;z<M;++z)T=Rc(c,P[z]),r.push(T),p[w][z]=T;else p[w]=s.slice(0),Y||(r=r.concat(s),Y=!0)}else p[w]=[];s.length&&(m=Math.min(m,s[0]),o=Math.max(o,s[s.length-1])),r.length&&(r=D>1?pp(r).sort(uk):r.sort(uk),m=Math.min(m,r[0]),o=Math.max(o,r[r.length-1])),m=Rc(c,vk(h))||m,o=Rc(c,wk(h))||o,m=m===Mh?+g.startOf(Date.now(),k):m,o=o===tk?+g.endOf(Date.now(),k)+1:o,c.min=Math.min(m,o),c.max=Math.max(m+1,o),c._table=[],c._timestamps={data:r,datasets:p,labels:s}},buildTicks:function(){var c=this,e=c.min,g=c.max,h=c.options,k=h.ticks,m=h.time,o=c._timestamps,r=[],p=c.getLabelCapacity(e),s=k.source,w=h.distribution,z,D,M;for(s==="data"||s==="auto"&&w==="series"?o=o.data:s==="labels"?o=o.labels:o=tp(c,e,g,p),h.bounds==="ticks"&&o.length&&(e=o[0],g=o[o.length-1]),e=Rc(c,vk(h))||e,g=Rc(c,wk(h))||g,z=0,D=o.length;z<D;++z)M=o[z],M>=e&&M<=g&&r.push(M);return c.min=e,c.max=g,c._unit=m.unit||(k.autoSkip?of(m.minUnit,c.min,c.max,p):rp(c,r.length,m.minUnit,c.min,c.max)),c._majorUnit=!k.major.enabled||c._unit==="year"?void 0:sp(c._unit),c._table=Nh(c._timestamps.data,e,g,w),c._offsets=up(c._table,r,e,g,h),k.reverse&&r.reverse(),xk(c,r,c._majorUnit)},getLabelForIndex:function(c,e){var g=this,h=g._adapter,k=g.chart.data,m=g.options.time,o=k.labels&&c<k.labels.length?k.labels[c]:"",r=k.datasets[e].data[c];return B.isObject(r)&&(o=g.getRightValue(r)),m.tooltipFormat?h.format(Oh(g,o),m.tooltipFormat):typeof o==="string"?o:h.format(Oh(g,o),m.displayFormats.datetime)},tickFormatFunction:function(c,e,g,h){var k=this,m=k._adapter,o=k.options,r=o.time.displayFormats,p=r[k._unit],s=k._majorUnit,w=r[s],z=g[e],D=o.ticks,M=s&&w&&z&&z.major,P=m.format(c,h?h:M?w:p),T=M?D.major:D.minor,Y=sk([T.callback,T.userCallback,D.callback,D.userCallback]);return Y?Y(P,e,g):P},convertTicksToLabels:function(c){var e=[],g,h;for(g=0,h=c.length;g<h;++g)e.push(this.tickFormatFunction(c[g].value,g,c));return e},getPixelForOffset:function(c){var e=this,g=e._offsets,h=me(e._table,"time",c,"pos");return e.getPixelForDecimal((g.start+h)*g.factor)},getPixelForValue:function(c,e,g){var h=this,k=null;e!==void 0&&g!==void 0&&(k=h._timestamps.datasets[g][e]),k===null&&(k=Rc(h,c));if(k!==null)return h.getPixelForOffset(k)},getPixelForTick:function(c){var e=this.getTicks();return c>=0&&c<e.length?this.getPixelForOffset(e[c].value):null},getValueForPixel:function(c){var e=this,g=e._offsets,h=e.getDecimalForPixel(c)/g.factor-g.end,k=me(e._table,"pos",h,"time");return e._adapter._create(k)},_getLabelSize:function(c){var e=this,g=e.options.ticks,h=e.ctx.measureText(c).width,k=B.toRadians(e.isHorizontal()?g.maxRotation:g.minRotation),m=Math.cos(k),o=Math.sin(k),r=op(g.fontSize,S.global.defaultFontSize);return{w:h*m+r*o,h:h*o+r*m}},getLabelWidth:function(c){return this._getLabelSize(c).w},getLabelCapacity:function(c){var e=this,g=e.options.time,h=g.displayFormats,k=h[g.unit]||h.millisecond,m=e.tickFormatFunction(c,0,xk(e,[c],e._majorUnit),k),o=e._getLabelSize(m),r=Math.floor(e.isHorizontal()?e.width/o.w:e.height/o.h);return e.options.offset&&r--,r>0?r:1}}),wp=yk;zk._defaults=wp;var Ak={category:lk,linear:mk,logarithmic:nf,radialLinear:rk,time:zk},xp={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Eh._date.override(typeof d==="function"?{_id:"moment",formats:function(){return xp},parse:function(c,e){return typeof c==="string"&&typeof e==="string"?c=d(c,e):c instanceof d||(c=d(c)),c.isValid()?c.valueOf():null},format:function(c,e){return d(c).format(e)},add:function(c,e,g){return d(c).add(e,g).valueOf()},diff:function(c,e,g){return d(c).diff(d(e),g)},startOf:function(c,e,g){return c=d(c),e==="isoWeek"?c.isoWeekday(g).valueOf():c.startOf(e).valueOf()},endOf:function(c,e){return d(c).endOf(e).valueOf()},_create:function(c){return d(c)}}:{}),S._set("global",{plugins:{filler:{propagate:!0}}});var yp={dataset:function(c){var e=c.fill,g=c.chart,h=g.getDatasetMeta(e),k=h&&g.isDatasetVisible(e),m=k&&h.dataset._children||[],o=m.length||0;return o?function(r,p){return p<o&&m[p]._view||null}:null},boundary:function(c){var e=c.boundary,g=e?e.x:null,h=e?e.y:null;return B.isArray(e)?function(k,m){return e[m]}:function(k){return{x:g===null?k.x:g,y:h===null?k.y:h}}}};function zp(c,e,g){var h=c._model||{},k=h.fill,m;k===void 0&&(k=!!h.backgroundColor);if(k===!1||k===null)return!1;if(k===!0)return"origin";m=parseFloat(k,10);if(isFinite(m)&&Math.floor(m)===m)return(k[0]==="-"||k[0]==="+")&&(m=e+m),m===e||m<0||m>=g?!1:m;switch(k){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return k;default:return!1}}function gd(c){var e=c.el._model||{},g=c.el._scale||{},h=c.fill,k=null,m;if(isFinite(h))return null;h==="start"?k=e.scaleBottom===void 0?g.bottom:e.scaleBottom:h==="end"?k=e.scaleTop===void 0?g.top:e.scaleTop:e.scaleZero!==void 0?k=e.scaleZero:g.getBasePixel&&(k=g.getBasePixel());if(k!==void 0&&k!==null){if(k.x!==void 0&&k.y!==void 0)return k;if(B.isFinite(k))return m=g.isHorizontal(),{x:m?k:null,y:m?null:k}}return null}function Bk(c){var e=c.el._scale,g=e.options,h=e.chart.data.labels.length,k=c.fill,m=[],o,r,p,s,w;if(!h)return null;for(o=g.ticks.reverse?e.max:e.min,r=g.ticks.reverse?e.min:e.max,p=e.getPointPositionForValue(0,o),s=0;s<h;++s)w=k==="start"||k==="end"?e.getPointPositionForValue(s,k==="start"?o:r):e.getBasePosition(s),g.gridLines.circular&&(w.cx=p.x,w.cy=p.y,w.angle=e.getIndexAngle(s)-Math.PI/2),m.push(w);return m}function Ap(c){var e=c.el._scale||{};return e.getPointPositionForValue?Bk(c):gd(c)}function Bp(c,e,g){var h=c[e],k=h.fill,m=[e],o;if(!g)return k;for(;k!==!1&&m.indexOf(k)===-1;){if(!isFinite(k))return k;o=c[k];if(!o)return!1;if(o.visible)return k;m.push(k),k=o.fill}return!1}function Cp(c){var e=c.fill,g="dataset";return e===!1?null:(isFinite(e)||(g="boundary"),yp[g](c))}function ja(c){return c&&!c.skip}function Ck(c,e,g,h,k){var m,o,r,p;if(!h||!k)return;for(c.moveTo(e[0].x,e[0].y),m=1;m<h;++m)B.canvas.lineTo(c,e[m-1],e[m]);if(g[0].angle!==void 0){for(o=g[0].cx,r=g[0].cy,p=Math.sqrt(Math.pow(g[0].x-o,2)+Math.pow(g[0].y-r,2)),m=k-1;m>0;--m)c.arc(o,r,p,g[m].angle,g[m-1].angle,!0);return}for(c.lineTo(g[k-1].x,g[k-1].y),m=k-1;m>0;--m)B.canvas.lineTo(c,g[m],g[m-1],!0)}function Dp(c,e,g,h,k,m){var o=e.length,r=h.spanGaps,p=[],s=[],w=0,z=0,D,M,P,T,Y,ga,wa,Aa;for(c.beginPath(),D=0,M=o;D<M;++D)P=D%o,T=e[P]._view,Y=g(T,P,h),ga=ja(T),wa=ja(Y),m&&Aa===void 0&&ga&&(Aa=D+1,M=o+Aa),ga&&wa?(w=p.push(T),z=s.push(Y)):w&&z&&(r?(ga&&p.push(T),wa&&s.push(Y)):(Ck(c,p,s,w,z),w=z=0,p=[],s=[]));Ck(c,p,s,w,z),c.closePath(),c.fillStyle=k,c.fill()}var Dk={id:"filler",afterDatasetsUpdate:function(c,e){var g=(c.data.datasets||[]).length,h=e.propagate,k=[],m,o,r,p;for(o=0;o<g;++o)m=c.getDatasetMeta(o),r=m.dataset,p=null,r&&r._model&&r instanceof Wb.Line&&(p={visible:c.isDatasetVisible(o),fill:zp(r,o,g),chart:c,el:r}),m.$filler=p,k.push(p);for(o=0;o<g;++o){p=k[o];if(!p)continue;p.fill=Bp(k,o,h),p.boundary=Ap(p),p.mapper=Cp(p)}},beforeDatasetsDraw:function(c){var e=c._getSortedVisibleDatasetMetas(),g=c.ctx,h,k,m,o,r,p,s;for(k=e.length-1;k>=0;--k){h=e[k].$filler;if(!h||!h.visible)continue;m=h.el,o=m._view,r=m._children||[],p=h.mapper,s=o.backgroundColor||S.global.defaultColor,p&&s&&r.length&&(B.canvas.clipArea(g,c.chartArea),Dp(g,r,p,o,s,m._loop),B.canvas.unclipArea(g))}}},_a=B.rtl.getRtlAdapter,tc=B.noop,Sc=B.valueOrDefault;S._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(c,e){var g=e.datasetIndex,h=this.chart,k=h.getDatasetMeta(g);k.hidden=k.hidden===null?!h.data.datasets[g].hidden:null,h.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(c){var e=c.data.datasets,g=c.options.legend||{},h=g.labels&&g.labels.usePointStyle;return c._getSortedDatasetMetas().map(function(k){var m=k.controller.getStyle(h?0:void 0);return{text:e[k.index].label,fillStyle:m.backgroundColor,hidden:!c.isDatasetVisible(k.index),lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:m.borderWidth,strokeStyle:m.borderColor,pointStyle:m.pointStyle,rotation:m.rotation,datasetIndex:k.index}},this)}}},legendCallback:function(c){var e=document.createElement("ul"),g=c.data.datasets,h,k,m,o;for(e.setAttribute("class",c.id+"-legend"),h=0,k=g.length;h<k;h++)m=e.appendChild(document.createElement("li")),o=m.appendChild(document.createElement("span")),o.style.backgroundColor=g[h].backgroundColor,g[h].label&&m.appendChild(document.createTextNode(g[h].label));return e.outerHTML}});function pf(c,e){return c.usePointStyle&&c.boxWidth>e?e:c.boxWidth}var Ek=cc.extend({initialize:function(c){var e=this;B.extend(e,c),e.legendHitBoxes=[],e._hoveredItem=null,e.doughnutMode=!1},beforeUpdate:tc,update:function(c,e,g){var h=this;return h.beforeUpdate(),h.maxWidth=c,h.maxHeight=e,h.margins=g,h.beforeSetDimensions(),h.setDimensions(),h.afterSetDimensions(),h.beforeBuildLabels(),h.buildLabels(),h.afterBuildLabels(),h.beforeFit(),h.fit(),h.afterFit(),h.afterUpdate(),h.minSize},afterUpdate:tc,beforeSetDimensions:tc,setDimensions:function(){var c=this;c.isHorizontal()?(c.width=c.maxWidth,c.left=0,c.right=c.width):(c.height=c.maxHeight,c.top=0,c.bottom=c.height),c.paddingLeft=0,c.paddingTop=0,c.paddingRight=0,c.paddingBottom=0,c.minSize={width:0,height:0}},afterSetDimensions:tc,beforeBuildLabels:tc,buildLabels:function(){var c=this,e=c.options.labels||{},g=B.callback(e.generateLabels,[c.chart],c)||[];e.filter&&(g=g.filter(function(h){return e.filter(h,c.chart.data)})),c.options.reverse&&g.reverse(),c.legendItems=g},afterBuildLabels:tc,beforeFit:tc,fit:function(){var c=this,e=c.options,g=e.labels,h=e.display,k=c.ctx,m=B.options._parseFont(g),o=m.size,r=c.legendHitBoxes=[],p=c.minSize,s=c.isHorizontal();s?(p.width=c.maxWidth,p.height=h?10:0):(p.width=h?10:0,p.height=c.maxHeight);if(!h){c.width=p.width=c.height=p.height=0;return}k.font=m.string;if(s){var w=c.lineWidths=[0],z=0;k.textAlign="left",k.textBaseline="middle",B.each(c.legendItems,function(wa,Aa){var Na=pf(g,o),Ha=Na+o/2+k.measureText(wa.text).width;(Aa===0||w[w.length-1]+Ha+2*g.padding>p.width)&&(z+=o+g.padding,w[w.length-(Aa>0?0:1)]=0),r[Aa]={left:0,top:0,width:Ha,height:o},w[w.length-1]+=Ha+g.padding}),p.height+=z}else{var D=g.padding,M=c.columnWidths=[],P=c.columnHeights=[],T=g.padding,Y=0,ga=0;B.each(c.legendItems,function(wa,Aa){var Na=pf(g,o),Ha=Na+o/2+k.measureText(wa.text).width;Aa>0&&ga+o+2*D>p.height&&(T+=Y+g.padding,M.push(Y),P.push(ga),Y=0,ga=0),Y=Math.max(Y,Ha),ga+=o+D,r[Aa]={left:0,top:0,width:Ha,height:o}}),T+=Y,M.push(Y),P.push(ga),p.width+=T}c.width=p.width,c.height=p.height},afterFit:tc,isHorizontal:function(){return this.options.position==="top"||this.options.position==="bottom"},draw:function(){var c=this,e=c.options,g=e.labels,h=S.global,k=h.defaultColor,m=h.elements.line,o=c.height,r=c.columnHeights,p=c.width,s=c.lineWidths;if(!e.display)return;var w=_a(e.rtl,c.left,c.minSize.width),z=c.ctx,D=Sc(g.fontColor,h.defaultFontColor),M=B.options._parseFont(g),P=M.size,T;z.textAlign=w.textAlign("left"),z.textBaseline="middle",z.lineWidth=.5,z.strokeStyle=D,z.fillStyle=D,z.font=M.string;var Y=pf(g,P),ga=c.legendHitBoxes,wa=function(hb,$a,cb){if(isNaN(Y)||Y<=0)return;z.save();var Kb=Sc(cb.lineWidth,m.borderWidth);z.fillStyle=Sc(cb.fillStyle,k),z.lineCap=Sc(cb.lineCap,m.borderCapStyle),z.lineDashOffset=Sc(cb.lineDashOffset,m.borderDashOffset),z.lineJoin=Sc(cb.lineJoin,m.borderJoinStyle),z.lineWidth=Kb,z.strokeStyle=Sc(cb.strokeStyle,k),z.setLineDash&&z.setLineDash(Sc(cb.lineDash,m.borderDash));if(g&&g.usePointStyle){var Fb=Y*Math.SQRT2/2,Bb=w.xPlus(hb,Y/2),Nb=$a+P/2;B.canvas.drawPoint(z,cb.pointStyle,Fb,Bb,Nb,cb.rotation)}else z.fillRect(w.leftForLtr(hb,Y),$a,Y,P),Kb!==0&&z.strokeRect(w.leftForLtr(hb,Y),$a,Y,P);z.restore()},Aa=function(hb,$a,cb,Kb){var Fb=P/2,Bb=w.xPlus(hb,Y+Fb),Nb=$a+Fb;z.fillText(cb.text,Bb,Nb),cb.hidden&&(z.beginPath(),z.lineWidth=2,z.moveTo(Bb,Nb),z.lineTo(w.xPlus(Bb,Kb),Nb),z.stroke())},Na=function(hb,$a){switch(e.align){case"start":return g.padding;case"end":return hb-$a;default:return(hb-$a+g.padding)/2}},Ha=c.isHorizontal();Ha?T={x:c.left+Na(p,s[0]),y:c.top+g.padding,line:0}:T={x:c.left+g.padding,y:c.top+Na(o,r[0]),line:0},B.rtl.overrideTextDirection(c.ctx,e.textDirection);var Xa=P+g.padding;B.each(c.legendItems,function(hb,$a){var cb=z.measureText(hb.text).width,Kb=Y+P/2+cb,Fb=T.x,Bb=T.y;w.setWidth(c.minSize.width),Ha?$a>0&&Fb+Kb+g.padding>c.left+c.minSize.width&&(Bb=T.y+=Xa,T.line++,Fb=T.x=c.left+Na(p,s[T.line])):$a>0&&Bb+Xa>c.top+c.minSize.height&&(Fb=T.x=Fb+c.columnWidths[T.line]+g.padding,T.line++,Bb=T.y=c.top+Na(o,r[T.line]));var Nb=w.x(Fb);wa(Nb,Bb,hb),ga[$a].left=w.leftForLtr(Nb,ga[$a].width),ga[$a].top=Bb,Aa(Nb,Bb,hb,cb),Ha?T.x+=Kb+g.padding:T.y+=Xa}),B.rtl.restoreTextDirection(c.ctx,e.textDirection)},_getLegendItemAt:function(c,e){var g=this,h,k,m;if(c>=g.left&&c<=g.right&&e>=g.top&&e<=g.bottom)for(m=g.legendHitBoxes,h=0;h<m.length;++h){k=m[h];if(c>=k.left&&c<=k.left+k.width&&e>=k.top&&e<=k.top+k.height)return g.legendItems[h]}return null},handleEvent:function(c){var e=this,g=e.options,h=c.type==="mouseup"?"click":c.type,k;if(h==="mousemove"){if(!g.onHover&&!g.onLeave)return}else if(h==="click"){if(!g.onClick)return}else return;k=e._getLegendItemAt(c.x,c.y),h==="click"?k&&g.onClick&&g.onClick.call(e,c.native,k):(g.onLeave&&k!==e._hoveredItem&&(e._hoveredItem&&g.onLeave.call(e,c.native,e._hoveredItem),e._hoveredItem=k),g.onHover&&k&&g.onHover.call(e,c.native,k))}});function Fk(c,e){var g=new Ek({ctx:c.ctx,options:e,chart:c});dc.configure(c,g,e),dc.addBox(c,g),c.legend=g}var Ep={id:"legend",_element:Ek,beforeInit:function(c){var e=c.options.legend;e&&Fk(c,e)},beforeUpdate:function(c){var e=c.options.legend,g=c.legend;e?(B.mergeIf(e,S.global.legend),g?(dc.configure(c,g,e),g.options=e):Fk(c,e)):g&&(dc.removeBox(c,g),delete c.legend)},afterEvent:function(c,e){var g=c.legend;g&&g.handleEvent(e)}},Tc=B.noop;S._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Gk=cc.extend({initialize:function(c){var e=this;B.extend(e,c),e.legendHitBoxes=[]},beforeUpdate:Tc,update:function(c,e,g){var h=this;return h.beforeUpdate(),h.maxWidth=c,h.maxHeight=e,h.margins=g,h.beforeSetDimensions(),h.setDimensions(),h.afterSetDimensions(),h.beforeBuildLabels(),h.buildLabels(),h.afterBuildLabels(),h.beforeFit(),h.fit(),h.afterFit(),h.afterUpdate(),h.minSize},afterUpdate:Tc,beforeSetDimensions:Tc,setDimensions:function(){var c=this;c.isHorizontal()?(c.width=c.maxWidth,c.left=0,c.right=c.width):(c.height=c.maxHeight,c.top=0,c.bottom=c.height),c.paddingLeft=0,c.paddingTop=0,c.paddingRight=0,c.paddingBottom=0,c.minSize={width:0,height:0}},afterSetDimensions:Tc,beforeBuildLabels:Tc,buildLabels:Tc,afterBuildLabels:Tc,beforeFit:Tc,fit:function(){var c=this,e=c.options,g=c.minSize={},h=c.isHorizontal(),k,m;if(!e.display){c.width=g.width=c.height=g.height=0;return}k=B.isArray(e.text)?e.text.length:1,m=k*B.options._parseFont(e).lineHeight+e.padding*2,c.width=g.width=h?c.maxWidth:m,c.height=g.height=h?m:c.maxHeight},afterFit:Tc,isHorizontal:function(){var c=this.options.position;return c==="top"||c==="bottom"},draw:function(){var c=this,e=c.ctx,g=c.options;if(!g.display)return;var h=B.options._parseFont(g),k=h.lineHeight,m=k/2+g.padding,o=0,r=c.top,p=c.left,s=c.bottom,w=c.right,z,D,M;e.fillStyle=B.valueOrDefault(g.fontColor,S.global.defaultFontColor),e.font=h.string,c.isHorizontal()?(D=p+(w-p)/2,M=r+m,z=w-p):(D=g.position==="left"?p+m:w-m,M=r+(s-r)/2,z=s-r,o=Math.PI*(g.position==="left"?-.5:.5)),e.save(),e.translate(D,M),e.rotate(o),e.textAlign="center",e.textBaseline="middle";var P=g.text;if(B.isArray(P))for(var T=0,Y=0;Y<P.length;++Y)e.fillText(P[Y],0,T,z),T+=k;else e.fillText(P,0,0,z);e.restore()}});function Ec(c,e){var g=new Gk({ctx:c.ctx,options:e,chart:c});dc.configure(c,g,e),dc.addBox(c,g),c.titleBlock=g}var Fp={id:"title",_element:Gk,beforeInit:function(c){var e=c.options.title;e&&Ec(c,e)},beforeUpdate:function(c){var e=c.options.title,g=c.titleBlock;e?(B.mergeIf(e,S.global.title),g?(dc.configure(c,g,e),g.options=e):Ec(c,e)):g&&(dc.removeBox(c,g),delete c.titleBlock)}},Uc={},Gp=Dk,Hp=Ep,Hk=Fp;Uc.filler=Gp,Uc.legend=Hp,Uc.title=Hk,Ma.helpers=B,Ro(),Ma._adapters=Eh,Ma.Animation=lh,Ma.animationService=mh,Ma.controllers=Zj,Ma.DatasetController=lb,Ma.defaults=S,Ma.Element=cc,Ma.elements=Wb,Ma.Interaction=dd,Ma.layouts=dc,Ma.platform=he,Ma.plugins=mb,Ma.Scale=Xb,Ma.scaleService=gf,Ma.Ticks=kf,Ma.Tooltip=Dh,Ma.helpers.each(Ak,function(c,e){Ma.scaleService.registerScaleType(e,c,c._defaults)});for(var Ik in Uc)Uc.hasOwnProperty(Ik)&&Ma.plugins.register(Uc[Ik]);Ma.platform.initialize();var Jk=Ma;return typeof window!=="undefined"&&(window.Chart=Ma),Ma.Chart=Ma,Ma.Legend=Uc.legend._element,Ma.Title=Uc.title._element,Ma.pluginService=Ma.plugins,Ma.PluginBase=Ma.Element.extend({}),Ma.canvasHelpers=Ma.helpers.canvas,Ma.layoutService=Ma.layouts,Ma.LinearScaleBase=gg,Ma.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(c){Ma[c]=function(e,g){return new Ma(e,Ma.helpers.merge(g||{},{type:c.charAt(0).toLowerCase()+c.slice(1)}))}}),Jk})});var ql=Cc((a,b)=>{!function(d,f){"function"==typeof define&&define.amd?define([],f):"object"==typeof b&&"undefined"!=typeof a?b.exports=f():d.Papa=f()}(a,function d(){"use strict";var f="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==f?f:{},i=!f.document&&!!f.postMessage,l=i&&/blob:/i.test((f.location||{}).protocol),q={},u=0,v={parse:function(N,R){var x=(R=R||{}).dynamicTyping||!1;la(x)&&(R.dynamicTypingFunction=x,x={});if(R.dynamicTyping=x,R.transform=!!la(R.transform)&&R.transform,R.worker&&v.WORKERS_SUPPORTED){var G=function(){if(!v.WORKERS_SUPPORTED)return!1;var J=(K=f.URL||f.webkitURL||null,ca=d.toString(),v.BLOB_URL||(v.BLOB_URL=K.createObjectURL(new Blob(["(",ca,")();"],{type:"text/javascript"})))),U=new f.Worker(J),K,ca;return U.onmessage=ha,U.id=u++,q[U.id]=U}();return G.userStep=R.step,G.userChunk=R.chunk,G.userComplete=R.complete,G.userError=R.error,R.step=la(R.step),R.chunk=la(R.chunk),R.complete=la(R.complete),R.error=la(R.error),delete R.worker,void G.postMessage({input:N,config:R,workerId:G.id})}var F=null;return v.NODE_STREAM_INPUT,"string"==typeof N?F=R.download?new H(R):new I(R):!0===N.readable&&la(N.read)&&la(N.on)?F=new Q(R):(f.File&&N instanceof File||N instanceof Object)&&(F=new O(R)),F.stream(N)},unparse:function(N,R){var x=!1,G=!0,F=",",J=`\r
`,U='"',K=U+U,ca=!1,ba=null,Ba=!1;!function(){if("object"!=typeof R)return;"string"!=typeof R.delimiter||v.BAD_DELIMITERS.filter(function(ma){return-1!==R.delimiter.indexOf(ma)}).length||(F=R.delimiter),("boolean"==typeof R.quotes||"function"==typeof R.quotes||Array.isArray(R.quotes))&&(x=R.quotes),"boolean"!=typeof R.skipEmptyLines&&"string"!=typeof R.skipEmptyLines||(ca=R.skipEmptyLines),"string"==typeof R.newline&&(J=R.newline),"string"==typeof R.quoteChar&&(U=R.quoteChar),"boolean"==typeof R.header&&(G=R.header);if(Array.isArray(R.columns)){if(0===R.columns.length)throw new Error("Option columns is empty");ba=R.columns}void 0!==R.escapeChar&&(K=R.escapeChar+U),"boolean"==typeof R.escapeFormulae&&(Ba=R.escapeFormulae)}();var $=new RegExp(_(U),"g");"string"==typeof N&&(N=JSON.parse(N));if(Array.isArray(N)){if(!N.length||Array.isArray(N[0]))return pa(null,N,ca);if("object"==typeof N[0])return pa(ba||va(N[0]),N,ca)}else if("object"==typeof N)return"string"==typeof N.data&&(N.data=JSON.parse(N.data)),Array.isArray(N.data)&&(N.fields||(N.fields=N.meta&&N.meta.fields),N.fields||(N.fields=Array.isArray(N.data[0])?N.fields:va(N.data[0])),Array.isArray(N.data[0])||"object"==typeof N.data[0]||(N.data=[N.data])),pa(N.fields||[],N.data||[],ca);throw new Error("Unable to serialize unrecognized input");function va(ma){if("object"!=typeof ma)return[];var xa=[];for(var ka in ma)xa.push(ka);return xa}function pa(ma,xa,ka){var db="";"string"==typeof ma&&(ma=JSON.parse(ma)),"string"==typeof xa&&(xa=JSON.parse(xa));var fb=Array.isArray(ma)&&0<ma.length,gb=!Array.isArray(xa[0]);if(fb&&G){for(var Ca=0;Ca<ma.length;Ca++)0<Ca&&(db+=F),db+=da(ma[Ca],Ca);0<xa.length&&(db+=J)}for(var Ia=0;Ia<xa.length;Ia++){var Ya=fb?ma.length:xa[Ia].length,eb=!1,na=fb?0===Object.keys(xa[Ia]).length:0===xa[Ia].length;if(ka&&!fb&&(eb="greedy"===ka?""===xa[Ia].join("").trim():1===xa[Ia].length&&0===xa[Ia][0].length),"greedy"===ka&&fb){for(var ya=[],La=0;La<Ya;La++){var sa=gb?ma[La]:La;ya.push(xa[Ia][sa])}eb=""===ya.join("").trim()}if(!eb){for(var Ea=0;Ea<Ya;Ea++){0<Ea&&!na&&(db+=F);var bb=fb&&gb?ma[Ea]:Ea;db+=da(xa[Ia][bb],Ea)}Ia<xa.length-1&&(!ka||0<Ya&&!na)&&(db+=J)}}return db}function da(ma,xa){if(null==ma)return"";if(ma.constructor===Date)return JSON.stringify(ma).slice(1,25);!0===Ba&&"string"==typeof ma&&null!==ma.match(/^[=+\-@].*$/)&&(ma="'"+ma);var ka=ma.toString().replace($,K),db="boolean"==typeof x&&x||"function"==typeof x&&x(ma,xa)||Array.isArray(x)&&x[xa]||function(fb,gb){for(var Ca=0;Ca<gb.length;Ca++)if(-1<fb.indexOf(gb[Ca]))return!0;return!1}(ka,v.BAD_DELIMITERS)||-1<ka.indexOf(F)||" "===ka.charAt(0)||" "===ka.charAt(ka.length-1);return db?U+ka+U:ka}}};if(v.RECORD_SEP=String.fromCharCode(30),v.UNIT_SEP=String.fromCharCode(31),v.BYTE_ORDER_MARK="",v.BAD_DELIMITERS=["\r",`
`,'"',v.BYTE_ORDER_MARK],v.WORKERS_SUPPORTED=!i&&!!f.Worker,v.NODE_STREAM_INPUT=1,v.LocalChunkSize=10485760,v.RemoteChunkSize=5242880,v.DefaultDelimiter=",",v.Parser=fa,v.ParserHandle=W,v.NetworkStreamer=H,v.FileStreamer=O,v.StringStreamer=I,v.ReadableStreamStreamer=Q,f.jQuery){var A=f.jQuery;A.fn.parse=function(N){var R=N.config||{},x=[];return this.each(function(J){if(!("INPUT"===A(this).prop("tagName").toUpperCase()&&"file"===A(this).attr("type").toLowerCase()&&f.FileReader)||!this.files||0===this.files.length)return!0;for(var U=0;U<this.files.length;U++)x.push({file:this.files[U],inputElem:this,instanceConfig:A.extend({},R)})}),G(),this;function G(){if(0!==x.length){var J,U,K,ca,ba=x[0];if(la(N.before)){var Ba=N.before(ba.file,ba.inputElem);if("object"==typeof Ba){if("abort"===Ba.action)return J="AbortError",U=ba.file,K=ba.inputElem,ca=Ba.reason,void(la(N.error)&&N.error({name:J},U,K,ca));if("skip"===Ba.action)return void F();"object"==typeof Ba.config&&(ba.instanceConfig=A.extend(ba.instanceConfig,Ba.config))}else if("skip"===Ba)return void F()}var $=ba.instanceConfig.complete;ba.instanceConfig.complete=function(va){la($)&&$(va,ba.file,ba.inputElem),F()},v.parse(ba.file,ba.instanceConfig)}else la(N.complete)&&N.complete()}function F(){x.splice(0,1),G()}}}function E(N){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(R){var x=ra(R);x.chunkSize=parseInt(x.chunkSize),R.step||R.chunk||(x.chunkSize=null),this._handle=new W(x),(this._handle.streamer=this)._config=x}.call(this,N),this.parseChunk=function(R,x){if(this.isFirstChunk&&la(this._config.beforeFirstChunk)){var G=this._config.beforeFirstChunk(R);void 0!==G&&(R=G)}this.isFirstChunk=!1,this._halted=!1;var F=this._partialLine+R;this._partialLine="";var J=this._handle.parse(F,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var U=J.meta.cursor;this._finished||(this._partialLine=F.substring(U-this._baseIndex),this._baseIndex=U),J&&J.data&&(this._rowCount+=J.data.length);var K=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(l)f.postMessage({results:J,workerId:v.WORKER_ID,finished:K});else if(la(this._config.chunk)&&!x){if(this._config.chunk(J,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);J=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(J.data),this._completeResults.errors=this._completeResults.errors.concat(J.errors),this._completeResults.meta=J.meta),this._completed||!K||!la(this._config.complete)||J&&J.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),K||J&&J.meta.paused||this._nextChunk(),J}this._halted=!0},this._sendError=function(R){la(this._config.error)?this._config.error(R):l&&this._config.error&&f.postMessage({workerId:v.WORKER_ID,error:R,finished:!1})}}function H(N){var R;(N=N||{}).chunkSize||(N.chunkSize=v.RemoteChunkSize),E.call(this,N),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(x){this._input=x,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(R=new XMLHttpRequest(),this._config.withCredentials&&(R.withCredentials=this._config.withCredentials),i||(R.onload=ua(this._chunkLoaded,this),R.onerror=ua(this._chunkError,this)),R.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var x=this._config.downloadRequestHeaders;for(var G in x)R.setRequestHeader(G,x[G])}if(this._config.chunkSize){var F=this._start+this._config.chunkSize-1;R.setRequestHeader("Range","bytes="+this._start+"-"+F)}try{R.send(this._config.downloadRequestBody)}catch(J){this._chunkError(J.message)}i&&0===R.status&&this._chunkError()}},this._chunkLoaded=function(){4===R.readyState&&(R.status<200||400<=R.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:R.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(x){var G=x.getResponseHeader("Content-Range");return null===G?-1:parseInt(G.substring(G.lastIndexOf("/")+1))}(R),this.parseChunk(R.responseText)))},this._chunkError=function(x){var G=R.statusText||x;this._sendError(new Error(G))}}function O(N){var R,x;(N=N||{}).chunkSize||(N.chunkSize=v.LocalChunkSize),E.call(this,N);var G="undefined"!=typeof FileReader;this.stream=function(F){this._input=F,x=F.slice||F.webkitSlice||F.mozSlice,G?((R=new FileReader()).onload=ua(this._chunkLoaded,this),R.onerror=ua(this._chunkError,this)):R=new FileReaderSync(),this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var F=this._input;if(this._config.chunkSize){var J=Math.min(this._start+this._config.chunkSize,this._input.size);F=x.call(F,this._start,J)}var U=R.readAsText(F,this._config.encoding);G||this._chunkLoaded({target:{result:U}})},this._chunkLoaded=function(F){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(F.target.result)},this._chunkError=function(){this._sendError(R.error)}}function I(N){var R;E.call(this,N=N||{}),this.stream=function(x){return R=x,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var x,G=this._config.chunkSize;return G?(x=R.substring(0,G),R=R.substring(G)):(x=R,R=""),this._finished=!R,this.parseChunk(x)}}}function Q(N){E.call(this,N=N||{});var R=[],x=!0,G=!1;this.pause=function(){E.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){E.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(F){this._input=F,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){G&&1===R.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),R.length?this.parseChunk(R.shift()):x=!0},this._streamData=ua(function(F){try{R.push("string"==typeof F?F:F.toString(this._config.encoding)),x&&(x=!1,this._checkIsFinished(),this.parseChunk(R.shift()))}catch(J){this._streamError(J)}},this),this._streamError=ua(function(F){this._streamCleanUp(),this._sendError(F)},this),this._streamEnd=ua(function(){this._streamCleanUp(),G=!0,this._streamData("")},this),this._streamCleanUp=ua(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function W(N){var R,x,G,F=Math.pow(2,53),J=-F,U=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,K=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,ca=this,ba=0,Ba=0,$=!1,va=!1,pa=[],da={data:[],errors:[],meta:{}};if(la(N.step)){var ma=N.step;N.step=function(Ca){if(da=Ca,db())ka();else{if(ka(),0===da.data.length)return;ba+=Ca.data.length,N.preview&&ba>N.preview?x.abort():(da.data=da.data[0],ma(da,ca))}}}function xa(Ca){return"greedy"===N.skipEmptyLines?""===Ca.join("").trim():1===Ca.length&&0===Ca[0].length}function ka(){if(da&&G&&(gb("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+v.DefaultDelimiter+"'"),G=!1),N.skipEmptyLines)for(var Ca=0;Ca<da.data.length;Ca++)xa(da.data[Ca])&&da.data.splice(Ca--,1);return db()&&function(){if(!da)return;function Ia(eb,na){la(N.transformHeader)&&(eb=N.transformHeader(eb,na)),pa.push(eb)}if(Array.isArray(da.data[0])){for(var Ya=0;db()&&Ya<da.data.length;Ya++)da.data[Ya].forEach(Ia);da.data.splice(0,1)}else da.data.forEach(Ia)}(),function(){if(!da||!N.header&&!N.dynamicTyping&&!N.transform)return da;function Ia(eb,na){var ya,La=N.header?{}:[];for(ya=0;ya<eb.length;ya++){var sa=ya,Ea=eb[ya];N.header&&(sa=ya>=pa.length?"__parsed_extra":pa[ya]),N.transform&&(Ea=N.transform(Ea,sa)),Ea=fb(sa,Ea),"__parsed_extra"===sa?(La[sa]=La[sa]||[],La[sa].push(Ea)):La[sa]=Ea}return N.header&&(ya>pa.length?gb("FieldMismatch","TooManyFields","Too many fields: expected "+pa.length+" fields but parsed "+ya,Ba+na):ya<pa.length&&gb("FieldMismatch","TooFewFields","Too few fields: expected "+pa.length+" fields but parsed "+ya,Ba+na)),La}var Ya=1;return!da.data.length||Array.isArray(da.data[0])?(da.data=da.data.map(Ia),Ya=da.data.length):da.data=Ia(da.data,0),N.header&&da.meta&&(da.meta.fields=pa),Ba+=Ya,da}()}function db(){return N.header&&0===pa.length}function fb(Ca,Ia){return Ya=Ca,N.dynamicTypingFunction&&void 0===N.dynamicTyping[Ya]&&(N.dynamicTyping[Ya]=N.dynamicTypingFunction(Ya)),!0===(N.dynamicTyping[Ya]||N.dynamicTyping)?"true"===Ia||"TRUE"===Ia||"false"!==Ia&&"FALSE"!==Ia&&(function(eb){if(U.test(eb)){var na=parseFloat(eb);if(J<na&&na<F)return!0}return!1}(Ia)?parseFloat(Ia):K.test(Ia)?new Date(Ia):""===Ia?null:Ia):Ia;var Ya}function gb(Ca,Ia,Ya,eb){var na={type:Ca,code:Ia,message:Ya};void 0!==eb&&(na.row=eb),da.errors.push(na)}this.parse=function(Ca,Ia,Ya){var eb=N.quoteChar||'"';if(N.newline||(N.newline=function(La,sa){La=La.substring(0,1048576);var Ea=new RegExp(_(sa)+"([^]*?)"+_(sa),"gm"),bb=(La=La.replace(Ea,"")).split("\r"),Da=La.split(`
`),Sa=1<Da.length&&Da[0].length<bb[0].length;if(1===bb.length||Sa)return`
`;for(var Ja=0,Va=0;Va<bb.length;Va++)`
`===bb[Va][0]&&Ja++;return Ja>=bb.length/2?`\r
`:"\r"}(Ca,eb)),G=!1,N.delimiter)la(N.delimiter)&&(N.delimiter=N.delimiter(Ca),da.meta.delimiter=N.delimiter);else{var na=function(La,sa,Ea,bb,Da){var Sa,Ja,Va,ib;Da=Da||[",","	","|",";",v.RECORD_SEP,v.UNIT_SEP];for(var tb=0;tb<Da.length;tb++){var nb=Da[tb],qa=0,Za=0,X=0;Va=void 0;for(var L=new fa({comments:bb,delimiter:nb,newline:sa,preview:10}).parse(La),Z=0;Z<L.data.length;Z++)if(Ea&&xa(L.data[Z]))X++;else{var aa=L.data[Z].length;Za+=aa,void 0!==Va?0<aa&&(qa+=Math.abs(aa-Va),Va=aa):Va=aa}0<L.data.length&&(Za/=L.data.length-X),(void 0===Ja||qa<=Ja)&&(void 0===ib||ib<Za)&&1.99<Za&&(Ja=qa,Sa=nb,ib=Za)}return{successful:!!(N.delimiter=Sa),bestDelimiter:Sa}}(Ca,N.newline,N.skipEmptyLines,N.comments,N.delimitersToGuess);na.successful?N.delimiter=na.bestDelimiter:(G=!0,N.delimiter=v.DefaultDelimiter),da.meta.delimiter=N.delimiter}var ya=ra(N);return N.preview&&N.header&&ya.preview++,R=Ca,x=new fa(ya),da=x.parse(R,Ia,Ya),ka(),$?{meta:{paused:!0}}:da||{meta:{paused:!1}}},this.paused=function(){return $},this.pause=function(){$=!0,x.abort(),R=la(N.chunk)?"":R.substring(x.getCharIndex())},this.resume=function(){ca.streamer._halted?($=!1,ca.streamer.parseChunk(R,!0)):setTimeout(ca.resume,3)},this.aborted=function(){return va},this.abort=function(){va=!0,x.abort(),da.meta.aborted=!0,la(N.complete)&&N.complete(da),R=""}}function _(N){return N.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function fa(N){var R,x=(N=N||{}).delimiter,G=N.newline,F=N.comments,J=N.step,U=N.preview,K=N.fastMode,ca=R=void 0===N.quoteChar?'"':N.quoteChar;if(void 0!==N.escapeChar&&(ca=N.escapeChar),("string"!=typeof x||-1<v.BAD_DELIMITERS.indexOf(x))&&(x=","),F===x)throw new Error("Comment character same as delimiter");!0===F?F="#":("string"!=typeof F||-1<v.BAD_DELIMITERS.indexOf(F))&&(F=!1),`
`!==G&&"\r"!==G&&`\r
`!==G&&(G=`
`);var ba=0,Ba=!1;this.parse=function($,va,pa){if("string"!=typeof $)throw new Error("Input must be a string");var da=$.length,ma=x.length,xa=G.length,ka=F.length,db=la(J),fb=[],gb=[],Ca=[],Ia=ba=0;if(!$)return tb();if(K||!1!==K&&-1===$.indexOf(R)){for(var Ya=$.split(G),eb=0;eb<Ya.length;eb++){if(Ca=Ya[eb],ba+=Ca.length,eb!==Ya.length-1)ba+=G.length;else if(pa)return tb();if(!F||Ca.substring(0,ka)!==F){if(db){if(fb=[],Sa(Ca.split(x)),nb(),Ba)return tb()}else Sa(Ca.split(x));if(U&&U<=eb)return fb=fb.slice(0,U),tb(!0)}}return tb()}for(var na=$.indexOf(x,ba),ya=$.indexOf(G,ba),La=new RegExp(_(ca)+_(R),"g"),sa=$.indexOf(R,ba);;)if($[ba]!==R)if(F&&0===Ca.length&&$.substring(ba,ba+ka)===F){if(-1===ya)return tb();ba=ya+xa,ya=$.indexOf(G,ba),na=$.indexOf(x,ba)}else{if(-1!==na&&(na<ya||-1===ya)){if(!(na<sa)){Ca.push($.substring(ba,na)),ba=na+ma,na=$.indexOf(x,ba);continue}var Ea=qa(na,sa,ya);if(Ea&&void 0!==Ea.nextDelim){na=Ea.nextDelim,sa=Ea.quoteSearch,Ca.push($.substring(ba,na)),ba=na+ma,na=$.indexOf(x,ba);continue}}if(-1===ya)break;if(Ca.push($.substring(ba,ya)),ib(ya+xa),db&&(nb(),Ba))return tb();if(U&&fb.length>=U)return tb(!0)}else for(sa=ba,ba++;;){if(-1===(sa=$.indexOf(R,sa+1)))return pa||gb.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:fb.length,index:ba}),Va();if(sa===da-1)return Va($.substring(ba,sa).replace(La,R));if(R!==ca||$[sa+1]!==ca){if(R===ca||0===sa||$[sa-1]!==ca){-1!==na&&na<sa+1&&(na=$.indexOf(x,sa+1)),-1!==ya&&ya<sa+1&&(ya=$.indexOf(G,sa+1));var bb=Ja(-1===ya?na:Math.min(na,ya));if($[sa+1+bb]===x){Ca.push($.substring(ba,sa).replace(La,R)),$[ba=sa+1+bb+ma]!==R&&(sa=$.indexOf(R,ba)),na=$.indexOf(x,ba),ya=$.indexOf(G,ba);break}var Da=Ja(ya);if($.substring(sa+1+Da,sa+1+Da+xa)===G){if(Ca.push($.substring(ba,sa).replace(La,R)),ib(sa+1+Da+xa),na=$.indexOf(x,ba),sa=$.indexOf(R,ba),db&&(nb(),Ba))return tb();if(U&&fb.length>=U)return tb(!0);break}gb.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:fb.length,index:ba}),sa++}}else sa++}return Va();function Sa(Za){fb.push(Za),Ia=ba}function Ja(Za){var X=0;if(-1!==Za){var L=$.substring(sa+1,Za);L&&""===L.trim()&&(X=L.length)}return X}function Va(Za){return pa||(void 0===Za&&(Za=$.substring(ba)),Ca.push(Za),ba=da,Sa(Ca),db&&nb()),tb()}function ib(Za){ba=Za,Sa(Ca),Ca=[],ya=$.indexOf(G,ba)}function tb(Za){return{data:fb,errors:gb,meta:{delimiter:x,linebreak:G,aborted:Ba,truncated:!!Za,cursor:Ia+(va||0)}}}function nb(){J(tb()),fb=[],gb=[]}function qa(Za,X,L){var Z={nextDelim:void 0,quoteSearch:void 0},aa=$.indexOf(R,X+1);if(X<Za&&Za<aa&&(aa<L||-1===L)){var S=$.indexOf(x,aa);if(-1===S)return Z;aa<S&&(aa=$.indexOf(R,aa+1)),Z=qa(S,aa,L)}else Z={nextDelim:Za,quoteSearch:X};return Z}},this.abort=function(){Ba=!0},this.getCharIndex=function(){return ba}}function ha(N){var R=N.data,x=q[R.workerId],G=!1;if(R.error)x.userError(R.error,R.file);else if(R.results&&R.results.data){var F={abort:function(){G=!0,oa(R.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ia,resume:ia};if(la(x.userStep)){for(var J=0;J<R.results.data.length&&(x.userStep({data:R.results.data[J],errors:R.results.errors,meta:R.results.meta},F),!G);J++);delete R.results}else la(x.userChunk)&&(x.userChunk(R.results,F,R.file),delete R.results)}R.finished&&!G&&oa(R.workerId,R.results)}function oa(N,R){var x=q[N];la(x.userComplete)&&x.userComplete(R),x.terminate(),delete q[N]}function ia(){throw new Error("Not implemented.")}function ra(N){if("object"!=typeof N||null===N)return N;var R=Array.isArray(N)?[]:{};for(var x in N)R[x]=ra(N[x]);return R}function ua(N,R){return function(){N.apply(R,arguments)}}function la(N){return"function"==typeof N}return l&&(f.onmessage=function(N){var R=N.data;void 0===v.WORKER_ID&&R&&(v.WORKER_ID=R.workerId);if("string"==typeof R.input)f.postMessage({workerId:v.WORKER_ID,results:v.parse(R.input,R.config),finished:!0});else if(f.File&&R.input instanceof File||R.input instanceof Object){var x=v.parse(R.input,R.config);x&&f.postMessage({workerId:v.WORKER_ID,results:x,finished:!0})}}),(H.prototype=Object.create(E.prototype)).constructor=H,(O.prototype=Object.create(E.prototype)).constructor=O,(I.prototype=Object.create(I.prototype)).constructor=I,(Q.prototype=Object.create(E.prototype)).constructor=Q,v})});var Kp=Cc(N=>{$d(N,{__assign:()=>d,__asyncDelegator:()=>fa,__asyncGenerator:()=>_,__asyncValues:()=>ha,__await:()=>W,__awaiter:()=>u,__classPrivateFieldGet:()=>ua,__classPrivateFieldSet:()=>la,__createBinding:()=>A,__decorate:()=>i,__exportStar:()=>E,__extends:()=>b,__generator:()=>v,__importDefault:()=>ra,__importStar:()=>ia,__makeTemplateObject:()=>oa,__metadata:()=>q,__param:()=>l,__read:()=>O,__rest:()=>f,__spread:()=>I,__spreadArrays:()=>Q,__values:()=>H});var a=function(x,G){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,J){F.__proto__=J}||function(F,J){for(var U in J)J.hasOwnProperty(U)&&(F[U]=J[U])},a(x,G)};function b(x,G){a(x,G);function F(){this.constructor=x}x.prototype=G===null?Object.create(G):(F.prototype=G.prototype,new F())}var d=function(){return d=Object.assign||function x(G){for(var F,J=1,U=arguments.length;J<U;J++){F=arguments[J];for(var K in F)Object.prototype.hasOwnProperty.call(F,K)&&(G[K]=F[K])}return G},d.apply(this,arguments)};function f(x,G){var F={};for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&G.indexOf(J)<0&&(F[J]=x[J]);if(x!=null&&typeof Object.getOwnPropertySymbols==="function")for(var U=0,J=Object.getOwnPropertySymbols(x);U<J.length;U++)G.indexOf(J[U])<0&&Object.prototype.propertyIsEnumerable.call(x,J[U])&&(F[J[U]]=x[J[U]]);return F}function i(x,G,F,J){var U=arguments.length,K=U<3?G:J===null?J=Object.getOwnPropertyDescriptor(G,F):J,ca;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")K=Reflect.decorate(x,G,F,J);else for(var ba=x.length-1;ba>=0;ba--)(ca=x[ba])&&(K=(U<3?ca(K):U>3?ca(G,F,K):ca(G,F))||K);return U>3&&K&&Object.defineProperty(G,F,K),K}function l(x,G){return function(F,J){G(F,J,x)}}function q(x,G){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(x,G)}function u(x,G,F,J){function U(K){return K instanceof F?K:new F(function(ca){ca(K)})}return new(F||(F=Promise))(function(K,ca){function ba(va){try{$(J.next(va))}catch(pa){ca(pa)}}function Ba(va){try{$(J.throw(va))}catch(pa){ca(pa)}}function $(va){va.done?K(va.value):U(va.value).then(ba,Ba)}$((J=J.apply(x,G||[])).next())})}function v(x,G){var F={label:0,sent:function(){if(K[0]&1)throw K[1];return K[1]},trys:[],ops:[]},J,U,K,ca;return ca={next:ba(0),throw:ba(1),return:ba(2)},typeof Symbol==="function"&&(ca[Symbol.iterator]=function(){return this}),ca;function ba($){return function(va){return Ba([$,va])}}function Ba($){if(J)throw new TypeError("Generator is already executing.");for(;F;)try{if(J=1,U&&(K=$[0]&2?U.return:$[0]?U.throw||((K=U.return)&&K.call(U),0):U.next)&&!(K=K.call(U,$[1])).done)return K;(U=0,K)&&($=[$[0]&2,K.value]);switch($[0]){case 0:case 1:K=$;break;case 4:return F.label++,{value:$[1],done:!1};case 5:F.label++,U=$[1],$=[0];continue;case 7:$=F.ops.pop(),F.trys.pop();continue;default:if(!(K=F.trys,K=K.length>0&&K[K.length-1])&&($[0]===6||$[0]===2)){F=0;continue}if($[0]===3&&(!K||$[1]>K[0]&&$[1]<K[3])){F.label=$[1];break}if($[0]===6&&F.label<K[1]){F.label=K[1],K=$;break}if(K&&F.label<K[2]){F.label=K[2],F.ops.push($);break}K[2]&&F.ops.pop(),F.trys.pop();continue}$=G.call(x,F)}catch(va){$=[6,va],U=0}finally{J=K=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}}function A(x,G,F,J){J===void 0&&(J=F),x[J]=G[F]}function E(x,G){for(var F in x)F!=="default"&&!G.hasOwnProperty(F)&&(G[F]=x[F])}function H(x){var G=typeof Symbol==="function"&&Symbol.iterator,F=G&&x[G],J=0;if(F)return F.call(x);if(x&&typeof x.length==="number")return{next:function(){return x&&J>=x.length&&(x=void 0),{value:x&&x[J++],done:!x}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")}function O(x,G){var F=typeof Symbol==="function"&&x[Symbol.iterator];if(!F)return x;var J=F.call(x),U,K=[],ca;try{for(;(G===void 0||G-- >0)&&!(U=J.next()).done;)K.push(U.value)}catch(ba){ca={error:ba}}finally{try{U&&!U.done&&(F=J.return)&&F.call(J)}finally{if(ca)throw ca.error}}return K}function I(){for(var x=[],G=0;G<arguments.length;G++)x=x.concat(O(arguments[G]));return x}function Q(){for(var x=0,G=0,F=arguments.length;G<F;G++)x+=arguments[G].length;for(var J=Array(x),U=0,G=0;G<F;G++)for(var K=arguments[G],ca=0,ba=K.length;ca<ba;ca++,U++)J[U]=K[ca];return J}function W(x){return this instanceof W?(this.v=x,this):new W(x)}function _(x,G,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=F.apply(x,G||[]),U,K=[];return U={},ca("next"),ca("throw"),ca("return"),U[Symbol.asyncIterator]=function(){return this},U;function ca(da){J[da]&&(U[da]=function(ma){return new Promise(function(xa,ka){K.push([da,ma,xa,ka])>1||ba(da,ma)})})}function ba(da,ma){try{Ba(J[da](ma))}catch(xa){pa(K[0][3],xa)}}function Ba(da){da.value instanceof W?Promise.resolve(da.value.v).then($,va):pa(K[0][2],da)}function $(da){ba("next",da)}function va(da){ba("throw",da)}function pa(da,ma){(da(ma),K.shift(),K.length)&&ba(K[0][0],K[0][1])}}function fa(x){var G,F;return G={},J("next"),J("throw",function(U){throw U}),J("return"),G[Symbol.iterator]=function(){return this},G;function J(U,K){G[U]=x[U]?function(ca){return(F=!F)?{value:W(x[U](ca)),done:U==="return"}:K?K(ca):ca}:K}}function ha(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=x[Symbol.asyncIterator],F;return G?G.call(x):(x=typeof H==="function"?H(x):x[Symbol.iterator](),F={},J("next"),J("throw"),J("return"),F[Symbol.asyncIterator]=function(){return this},F);function J(K){F[K]=x[K]&&function(ca){return new Promise(function(ba,Ba){ca=x[K](ca),U(ba,Ba,ca.done,ca.value)})}}function U(K,ca,ba,Ba){Promise.resolve(Ba).then(function($){K({value:$,done:ba})},ca)}}function oa(x,G){return Object.defineProperty?Object.defineProperty(x,"raw",{value:G}):x.raw=G,x}function ia(x){if(x&&x.__esModule)return x;var G={};if(x!=null)for(var F in x)Object.hasOwnProperty.call(x,F)&&(G[F]=x[F]);return G.default=x,G}function ra(x){return x&&x.__esModule?x:{default:x}}function ua(x,G){if(!G.has(x))throw new TypeError("attempted to get private field on non-instance");return G.get(x)}function la(x,G,F){if(!G.has(x))throw new TypeError("attempted to set private field on non-instance");return G.set(x,F),F}});var Op=Cc(N=>{$d(N,{__assign:()=>d,__asyncDelegator:()=>fa,__asyncGenerator:()=>_,__asyncValues:()=>ha,__await:()=>W,__awaiter:()=>u,__classPrivateFieldGet:()=>ua,__classPrivateFieldSet:()=>la,__createBinding:()=>A,__decorate:()=>i,__exportStar:()=>E,__extends:()=>b,__generator:()=>v,__importDefault:()=>ra,__importStar:()=>ia,__makeTemplateObject:()=>oa,__metadata:()=>q,__param:()=>l,__read:()=>O,__rest:()=>f,__spread:()=>I,__spreadArrays:()=>Q,__values:()=>H});var a=function(x,G){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,J){F.__proto__=J}||function(F,J){for(var U in J)J.hasOwnProperty(U)&&(F[U]=J[U])},a(x,G)};function b(x,G){a(x,G);function F(){this.constructor=x}x.prototype=G===null?Object.create(G):(F.prototype=G.prototype,new F())}var d=function(){return d=Object.assign||function x(G){for(var F,J=1,U=arguments.length;J<U;J++){F=arguments[J];for(var K in F)Object.prototype.hasOwnProperty.call(F,K)&&(G[K]=F[K])}return G},d.apply(this,arguments)};function f(x,G){var F={};for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&G.indexOf(J)<0&&(F[J]=x[J]);if(x!=null&&typeof Object.getOwnPropertySymbols==="function")for(var U=0,J=Object.getOwnPropertySymbols(x);U<J.length;U++)G.indexOf(J[U])<0&&Object.prototype.propertyIsEnumerable.call(x,J[U])&&(F[J[U]]=x[J[U]]);return F}function i(x,G,F,J){var U=arguments.length,K=U<3?G:J===null?J=Object.getOwnPropertyDescriptor(G,F):J,ca;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")K=Reflect.decorate(x,G,F,J);else for(var ba=x.length-1;ba>=0;ba--)(ca=x[ba])&&(K=(U<3?ca(K):U>3?ca(G,F,K):ca(G,F))||K);return U>3&&K&&Object.defineProperty(G,F,K),K}function l(x,G){return function(F,J){G(F,J,x)}}function q(x,G){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(x,G)}function u(x,G,F,J){function U(K){return K instanceof F?K:new F(function(ca){ca(K)})}return new(F||(F=Promise))(function(K,ca){function ba(va){try{$(J.next(va))}catch(pa){ca(pa)}}function Ba(va){try{$(J.throw(va))}catch(pa){ca(pa)}}function $(va){va.done?K(va.value):U(va.value).then(ba,Ba)}$((J=J.apply(x,G||[])).next())})}function v(x,G){var F={label:0,sent:function(){if(K[0]&1)throw K[1];return K[1]},trys:[],ops:[]},J,U,K,ca;return ca={next:ba(0),throw:ba(1),return:ba(2)},typeof Symbol==="function"&&(ca[Symbol.iterator]=function(){return this}),ca;function ba($){return function(va){return Ba([$,va])}}function Ba($){if(J)throw new TypeError("Generator is already executing.");for(;F;)try{if(J=1,U&&(K=$[0]&2?U.return:$[0]?U.throw||((K=U.return)&&K.call(U),0):U.next)&&!(K=K.call(U,$[1])).done)return K;(U=0,K)&&($=[$[0]&2,K.value]);switch($[0]){case 0:case 1:K=$;break;case 4:return F.label++,{value:$[1],done:!1};case 5:F.label++,U=$[1],$=[0];continue;case 7:$=F.ops.pop(),F.trys.pop();continue;default:if(!(K=F.trys,K=K.length>0&&K[K.length-1])&&($[0]===6||$[0]===2)){F=0;continue}if($[0]===3&&(!K||$[1]>K[0]&&$[1]<K[3])){F.label=$[1];break}if($[0]===6&&F.label<K[1]){F.label=K[1],K=$;break}if(K&&F.label<K[2]){F.label=K[2],F.ops.push($);break}K[2]&&F.ops.pop(),F.trys.pop();continue}$=G.call(x,F)}catch(va){$=[6,va],U=0}finally{J=K=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}}function A(x,G,F,J){J===void 0&&(J=F),x[J]=G[F]}function E(x,G){for(var F in x)F!=="default"&&!G.hasOwnProperty(F)&&(G[F]=x[F])}function H(x){var G=typeof Symbol==="function"&&Symbol.iterator,F=G&&x[G],J=0;if(F)return F.call(x);if(x&&typeof x.length==="number")return{next:function(){return x&&J>=x.length&&(x=void 0),{value:x&&x[J++],done:!x}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")}function O(x,G){var F=typeof Symbol==="function"&&x[Symbol.iterator];if(!F)return x;var J=F.call(x),U,K=[],ca;try{for(;(G===void 0||G-- >0)&&!(U=J.next()).done;)K.push(U.value)}catch(ba){ca={error:ba}}finally{try{U&&!U.done&&(F=J.return)&&F.call(J)}finally{if(ca)throw ca.error}}return K}function I(){for(var x=[],G=0;G<arguments.length;G++)x=x.concat(O(arguments[G]));return x}function Q(){for(var x=0,G=0,F=arguments.length;G<F;G++)x+=arguments[G].length;for(var J=Array(x),U=0,G=0;G<F;G++)for(var K=arguments[G],ca=0,ba=K.length;ca<ba;ca++,U++)J[U]=K[ca];return J}function W(x){return this instanceof W?(this.v=x,this):new W(x)}function _(x,G,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=F.apply(x,G||[]),U,K=[];return U={},ca("next"),ca("throw"),ca("return"),U[Symbol.asyncIterator]=function(){return this},U;function ca(da){J[da]&&(U[da]=function(ma){return new Promise(function(xa,ka){K.push([da,ma,xa,ka])>1||ba(da,ma)})})}function ba(da,ma){try{Ba(J[da](ma))}catch(xa){pa(K[0][3],xa)}}function Ba(da){da.value instanceof W?Promise.resolve(da.value.v).then($,va):pa(K[0][2],da)}function $(da){ba("next",da)}function va(da){ba("throw",da)}function pa(da,ma){(da(ma),K.shift(),K.length)&&ba(K[0][0],K[0][1])}}function fa(x){var G,F;return G={},J("next"),J("throw",function(U){throw U}),J("return"),G[Symbol.iterator]=function(){return this},G;function J(U,K){G[U]=x[U]?function(ca){return(F=!F)?{value:W(x[U](ca)),done:U==="return"}:K?K(ca):ca}:K}}function ha(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=x[Symbol.asyncIterator],F;return G?G.call(x):(x=typeof H==="function"?H(x):x[Symbol.iterator](),F={},J("next"),J("throw"),J("return"),F[Symbol.asyncIterator]=function(){return this},F);function J(K){F[K]=x[K]&&function(ca){return new Promise(function(ba,Ba){ca=x[K](ca),U(ba,Ba,ca.done,ca.value)})}}function U(K,ca,ba,Ba){Promise.resolve(Ba).then(function($){K({value:$,done:ba})},ca)}}function oa(x,G){return Object.defineProperty?Object.defineProperty(x,"raw",{value:G}):x.raw=G,x}function ia(x){if(x&&x.__esModule)return x;var G={};if(x!=null)for(var F in x)Object.hasOwnProperty.call(x,F)&&(G[F]=x[F]);return G.default=x,G}function ra(x){return x&&x.__esModule?x:{default:x}}function ua(x,G){if(!G.has(x))throw new TypeError("attempted to get private field on non-instance");return G.get(x)}function la(x,G,F){if(!G.has(x))throw new TypeError("attempted to set private field on non-instance");return G.set(x,F),F}});var Qk=Cc(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});var a=Op();var b={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var d=function(X,L){if(!X)throw f(L)},f=function(X){return new Error("Firebase Database ("+b.SDK_VERSION+") INTERNAL ASSERT FAILED: "+X)};var i=function(X){for(var L=[],Z=0,aa=0;aa<X.length;aa++){var S=X.charCodeAt(aa);S<128?L[Z++]=S:S<2048?(L[Z++]=S>>6|192,L[Z++]=S&63|128):(S&64512)===55296&&aa+1<X.length&&(X.charCodeAt(aa+1)&64512)===56320?(S=65536+((S&1023)<<10)+(X.charCodeAt(++aa)&1023),L[Z++]=S>>18|240,L[Z++]=S>>12&63|128,L[Z++]=S>>6&63|128,L[Z++]=S&63|128):(L[Z++]=S>>12|224,L[Z++]=S>>6&63|128,L[Z++]=S&63|128)}return L},l=function(X){for(var L=[],Z=0,aa=0;Z<X.length;){var S=X[Z++];if(S<128)L[aa++]=String.fromCharCode(S);else if(S>191&&S<224){var za=X[Z++];L[aa++]=String.fromCharCode((S&31)<<6|za&63)}else if(S>239&&S<365){var za=X[Z++],Ra=X[Z++],ob=X[Z++],Ta=((S&7)<<18|(za&63)<<12|(Ra&63)<<6|ob&63)-65536;L[aa++]=String.fromCharCode(55296+(Ta>>10)),L[aa++]=String.fromCharCode(56320+(Ta&1023))}else{var za=X[Z++],Ra=X[Z++];L[aa++]=String.fromCharCode((S&15)<<12|(za&63)<<6|Ra&63)}}return L.join("")},q={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob==="function",encodeByteArray:function(X,L){if(!Array.isArray(X))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var Z=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,aa=[],S=0;S<X.length;S+=3){var za=X[S],Ra=S+1<X.length,ob=Ra?X[S+1]:0,Ta=S+2<X.length,kb=Ta?X[S+2]:0,Mb=za>>2,Db=(za&3)<<4|ob>>4,Ka=(ob&15)<<2|kb>>6,td=kb&63;Ta||(td=64,Ra||(Ka=64)),aa.push(Z[Mb],Z[Db],Z[Ka],Z[td])}return aa.join("")},encodeString:function(X,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(X):this.encodeByteArray(i(X),L)},decodeString:function(X,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(X):l(this.decodeStringToByteArray(X,L))},decodeStringToByteArray:function(X,L){this.init_();for(var Z=L?this.charToByteMapWebSafe_:this.charToByteMap_,aa=[],S=0;S<X.length;){var za=Z[X.charAt(S++)],Ra=S<X.length,ob=Ra?Z[X.charAt(S)]:0;++S;var Ta=S<X.length,kb=Ta?Z[X.charAt(S)]:64;++S;var Mb=S<X.length,Db=Mb?Z[X.charAt(S)]:64;++S;if(za==null||ob==null||kb==null||Db==null)throw Error();var Ka=za<<2|ob>>4;aa.push(Ka);if(kb!==64){var td=ob<<4&240|kb>>2;aa.push(td);if(Db!==64){var Pf=kb<<6&192|Db;aa.push(Pf)}}}return aa},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var X=0;X<this.ENCODED_VALS.length;X++)this.byteToCharMap_[X]=this.ENCODED_VALS.charAt(X),this.charToByteMap_[this.byteToCharMap_[X]]=X,this.byteToCharMapWebSafe_[X]=this.ENCODED_VALS_WEBSAFE.charAt(X),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[X]]=X,X>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(X)]=X,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(X)]=X)}}},u=function(X){var L=i(X);return q.encodeByteArray(L,!0)},v=function(X){try{return q.decodeString(X,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function A(X){return E(void 0,X)}function E(X,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:var Z=L;return new Date(Z.getTime());case Object:X===void 0&&(X={});break;case Array:X=[];break;default:return L}for(var aa in L){if(!L.hasOwnProperty(aa))continue;X[aa]=E(X[aa],L[aa])}return X}var H=function(){function X(){var L=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(Z,aa){L.resolve=Z,L.reject=aa})}return X.prototype.wrapCallback=function(L){var Z=this;return function(aa,S){aa?Z.reject(aa):Z.resolve(S),typeof L==="function"&&(Z.promise.catch(function(){}),L.length===1?L(aa):L(aa,S))}},X}();function O(){return typeof navigator!=="undefined"&&typeof navigator.userAgent==="string"?navigator.userAgent:""}function I(){return typeof window!=="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(O())}function Q(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(X){return!1}}function W(){return typeof self==="object"&&self.self===self}function _(){var X=typeof chrome==="object"?chrome.runtime:typeof browser==="object"?browser.runtime:void 0;return typeof X==="object"&&X.id!==void 0}function fa(){return typeof navigator==="object"&&navigator.product==="ReactNative"}function ha(){return O().indexOf("Electron/")>=0}function oa(){var X=O();return X.indexOf("MSIE ")>=0||X.indexOf("Trident/")>=0}function ia(){return O().indexOf("MSAppHost/")>=0}function ra(){return b.NODE_CLIENT===!0||b.NODE_ADMIN===!0}function ua(){return!Q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function la(){return"indexedDB"in self&&indexedDB!=null}function N(){return new Promise(function(X,L){try{var Z=!0,aa="validate-browser-context-for-indexeddb-analytics-module",S=window.indexedDB.open(aa);S.onsuccess=function(){S.result.close(),Z||window.indexedDB.deleteDatabase(aa),X(!0)},S.onupgradeneeded=function(){Z=!1},S.onerror=function(){var za;L(((za=S.error)===null||za===void 0?void 0:za.message)||"")}}catch(za){L(za)}})}function R(){return!navigator||!navigator.cookieEnabled?!1:!0}var x="FirebaseError",G=function(X){a.__extends(L,X);function L(Z,aa){var S=X.call(this,aa)||this;return S.code=Z,S.name=x,Object.setPrototypeOf(S,L.prototype),Error.captureStackTrace&&Error.captureStackTrace(S,F.prototype.create),S}return L}(Error),F=function(){function X(L,Z,aa){this.service=L,this.serviceName=Z,this.errors=aa}return X.prototype.create=function(L){for(var Z=[],aa=1;aa<arguments.length;aa++)Z[aa-1]=arguments[aa];for(var S=Z[0]||{},za=this.service+"/"+L,Ra=this.errors[L],ob=Ra?J(Ra,S):"Error",Ta=this.serviceName+": "+ob+" ("+za+").",kb=new G(za,Ta),Mb=0,Db=Object.keys(S);Mb<Db.length;Mb++){var Ka=Db[Mb];Ka.slice(-1)!=="_"&&(Ka in kb&&console.warn('Overwriting FirebaseError base field "'+Ka+'" can cause unexpected behavior.'),kb[Ka]=S[Ka])}return kb},X}();function J(X,L){return X.replace(U,function(Z,aa){var S=L[aa];return S!=null?String(S):"<"+aa+"?>"})}var U=/\{\$([^}]+)}/g;function K(X){return JSON.parse(X)}function ca(X){return JSON.stringify(X)}var ba=function(X){var L={},Z={},aa={},S="";try{var za=X.split(".");L=K(v(za[0])||""),Z=K(v(za[1])||""),S=za[2],aa=Z.d||{},delete Z.d}catch(Ra){}return{header:L,claims:Z,data:aa,signature:S}},Ba=function(X){var L=ba(X).claims,Z=Math.floor(new Date().getTime()/1e3),aa=0,S=0;return typeof L==="object"&&(L.hasOwnProperty("nbf")?aa=L.nbf:L.hasOwnProperty("iat")&&(aa=L.iat),L.hasOwnProperty("exp")?S=L.exp:S=aa+86400),!!Z&&!!aa&&!!S&&Z>=aa&&Z<=S},$=function(X){var L=ba(X).claims;return typeof L==="object"&&L.hasOwnProperty("iat")?L.iat:null},va=function(X){var L=ba(X),Z=L.claims;return!!Z&&typeof Z==="object"&&Z.hasOwnProperty("iat")},pa=function(X){var L=ba(X).claims;return typeof L==="object"&&L.admin===!0};function da(X,L){return Object.prototype.hasOwnProperty.call(X,L)}function ma(X,L){return Object.prototype.hasOwnProperty.call(X,L)?X[L]:void 0}function xa(X){for(var L in X)if(Object.prototype.hasOwnProperty.call(X,L))return!1;return!0}function ka(X,L,Z){var aa={};for(var S in X)Object.prototype.hasOwnProperty.call(X,S)&&(aa[S]=L.call(Z,X[S],S,X));return aa}function db(X){for(var L=[],Z=function(Ta,kb){Array.isArray(kb)?kb.forEach(function(Mb){L.push(encodeURIComponent(Ta)+"="+encodeURIComponent(Mb))}):L.push(encodeURIComponent(Ta)+"="+encodeURIComponent(kb))},aa=0,S=Object.entries(X);aa<S.length;aa++){var za=S[aa],Ra=za[0],ob=za[1];Z(Ra,ob)}return L.length?"&"+L.join("&"):""}function fb(X){var L={},Z=X.replace(/^\?/,"").split("&");return Z.forEach(function(aa){if(aa){var S=aa.split("=");L[S[0]]=S[1]}}),L}var gb=function(){function X(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var L=1;L<this.blockSize;++L)this.pad_[L]=0;this.reset()}return X.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},X.prototype.compress_=function(L,Z){Z||(Z=0);var aa=this.W_;if(typeof L==="string")for(var S=0;S<16;S++)aa[S]=L.charCodeAt(Z)<<24|L.charCodeAt(Z+1)<<16|L.charCodeAt(Z+2)<<8|L.charCodeAt(Z+3),Z+=4;else for(var S=0;S<16;S++)aa[S]=L[Z]<<24|L[Z+1]<<16|L[Z+2]<<8|L[Z+3],Z+=4;for(var S=16;S<80;S++){var za=aa[S-3]^aa[S-8]^aa[S-14]^aa[S-16];aa[S]=(za<<1|za>>>31)&4294967295}for(var Ra=this.chain_[0],ob=this.chain_[1],Ta=this.chain_[2],kb=this.chain_[3],Mb=this.chain_[4],Db,Ka,S=0;S<80;S++){S<40?S<20?(Db=kb^ob&(Ta^kb),Ka=1518500249):(Db=ob^Ta^kb,Ka=1859775393):S<60?(Db=ob&Ta|kb&(ob|Ta),Ka=2400959708):(Db=ob^Ta^kb,Ka=3395469782);var za=(Ra<<5|Ra>>>27)+Db+Mb+Ka+aa[S]&4294967295;Mb=kb,kb=Ta,Ta=(ob<<30|ob>>>2)&4294967295,ob=Ra,Ra=za}this.chain_[0]=this.chain_[0]+Ra&4294967295,this.chain_[1]=this.chain_[1]+ob&4294967295,this.chain_[2]=this.chain_[2]+Ta&4294967295,this.chain_[3]=this.chain_[3]+kb&4294967295,this.chain_[4]=this.chain_[4]+Mb&4294967295},X.prototype.update=function(L,Z){if(L==null)return;Z===void 0&&(Z=L.length);for(var aa=Z-this.blockSize,S=0,za=this.buf_,Ra=this.inbuf_;S<Z;){if(Ra===0)for(;S<=aa;)this.compress_(L,S),S+=this.blockSize;if(typeof L==="string")for(;S<Z;){za[Ra]=L.charCodeAt(S),++Ra,++S;if(Ra===this.blockSize){this.compress_(za),Ra=0;break}}else for(;S<Z;){za[Ra]=L[S],++Ra,++S;if(Ra===this.blockSize){this.compress_(za),Ra=0;break}}}this.inbuf_=Ra,this.total_+=Z},X.prototype.digest=function(){var L=[],Z=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var aa=this.blockSize-1;aa>=56;aa--)this.buf_[aa]=Z&255,Z/=256;this.compress_(this.buf_);for(var S=0,aa=0;aa<5;aa++)for(var za=24;za>=0;za-=8)L[S]=this.chain_[aa]>>za&255,++S;return L},X}();function Ca(X,L){var Z=new Ia(X,L);return Z.subscribe.bind(Z)}var Ia=function(){function X(L,Z){var aa=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(function(){L(aa)}).catch(function(S){aa.error(S)})}return X.prototype.next=function(L){this.forEachObserver(function(Z){Z.next(L)})},X.prototype.error=function(L){this.forEachObserver(function(Z){Z.error(L)}),this.close(L)},X.prototype.complete=function(){this.forEachObserver(function(L){L.complete()}),this.close()},X.prototype.subscribe=function(L,Z,aa){var S=this,za;if(L===void 0&&Z===void 0&&aa===void 0)throw new Error("Missing Observer.");eb(L,["next","error","complete"])?za=L:za={next:L,error:Z,complete:aa},za.next===void 0&&(za.next=na),za.error===void 0&&(za.error=na),za.complete===void 0&&(za.complete=na);var Ra=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{S.finalError?za.error(S.finalError):za.complete()}catch(ob){}return}),this.observers.push(za),Ra},X.prototype.unsubscribeOne=function(L){if(this.observers===void 0||this.observers[L]===void 0)return;delete this.observers[L],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this)},X.prototype.forEachObserver=function(L){if(this.finalized)return;for(var Z=0;Z<this.observers.length;Z++)this.sendOne(Z,L)},X.prototype.sendOne=function(L,Z){var aa=this;this.task.then(function(){if(aa.observers!==void 0&&aa.observers[L]!==void 0)try{Z(aa.observers[L])}catch(S){typeof console!=="undefined"&&console.error&&console.error(S)}})},X.prototype.close=function(L){var Z=this;if(this.finalized)return;this.finalized=!0,L!==void 0&&(this.finalError=L),this.task.then(function(){Z.observers=void 0,Z.onNoObservers=void 0})},X}();function Ya(X,L){return function(){for(var Z=[],aa=0;aa<arguments.length;aa++)Z[aa]=arguments[aa];Promise.resolve(!0).then(function(){X.apply(void 0,Z)}).catch(function(S){L&&L(S)})}}function eb(X,L){if(typeof X!=="object"||X===null)return!1;for(var Z=0,aa=L;Z<aa.length;Z++){var S=aa[Z];if(S in X&&typeof X[S]==="function")return!0}return!1}function na(){}var ya=function(X,L,Z,aa){var S;aa<L?S="at least "+L:aa>Z&&(S=Z===0?"none":"no more than "+Z);if(S){var za=X+" failed: Was called with "+aa+(aa===1?" argument.":" arguments.")+" Expects "+S+".";throw new Error(za)}};function La(X,L,Z){var aa="";switch(L){case 1:aa=Z?"first":"First";break;case 2:aa=Z?"second":"Second";break;case 3:aa=Z?"third":"Third";break;case 4:aa=Z?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var S=X+" failed: ";return S+=aa+" argument ",S}function sa(X,L,Z,aa){if(aa&&!Z)return;if(typeof Z!=="string")throw new Error(La(X,L,aa)+"must be a valid firebase namespace.")}function Ea(X,L,Z,aa){if(aa&&!Z)return;if(typeof Z!=="function")throw new Error(La(X,L,aa)+"must be a valid function.")}function bb(X,L,Z,aa){if(aa&&!Z)return;if(typeof Z!=="object"||Z===null)throw new Error(La(X,L,aa)+"must be a valid context object.")}var Da=function(X){for(var L=[],Z=0,aa=0;aa<X.length;aa++){var S=X.charCodeAt(aa);if(S>=55296&&S<=56319){var za=S-55296;aa++,d(aa<X.length,"Surrogate pair missing trail surrogate.");var Ra=X.charCodeAt(aa)-56320;S=65536+(za<<10)+Ra}S<128?L[Z++]=S:S<2048?(L[Z++]=S>>6|192,L[Z++]=S&63|128):S<65536?(L[Z++]=S>>12|224,L[Z++]=S>>6&63|128,L[Z++]=S&63|128):(L[Z++]=S>>18|240,L[Z++]=S>>12&63|128,L[Z++]=S>>6&63|128,L[Z++]=S&63|128)}return L},Sa=function(X){for(var L=0,Z=0;Z<X.length;Z++){var aa=X.charCodeAt(Z);aa<128?L++:aa<2048?L+=2:aa>=55296&&aa<=56319?(L+=4,Z++):L+=3}return L};var Ja=1e3,Va=2,ib=4*60*60*1e3,tb=.5;function nb(X,L,Z){L===void 0&&(L=Ja),Z===void 0&&(Z=Va);var aa=L*Math.pow(Z,X),S=Math.round(tb*aa*(Math.random()-.5)*2);return Math.min(ib,aa+S)}qa.CONSTANTS=b;qa.Deferred=H;qa.ErrorFactory=F;qa.FirebaseError=G;qa.MAX_VALUE_MILLIS=ib;qa.RANDOM_FACTOR=tb;qa.Sha1=gb;qa.areCookiesEnabled=R;qa.assert=d;qa.assertionError=f;qa.async=Ya;qa.base64=q;qa.base64Decode=v;qa.base64Encode=u;qa.calculateBackoffMillis=nb;qa.contains=da;qa.createSubscribe=Ca;qa.decode=ba;qa.deepCopy=A;qa.deepExtend=E;qa.errorPrefix=La;qa.getUA=O;qa.isAdmin=pa;qa.isBrowser=W;qa.isBrowserExtension=_;qa.isElectron=ha;qa.isEmpty=xa;qa.isIE=oa;qa.isIndexedDBAvailable=la;qa.isMobileCordova=I;qa.isNode=Q;qa.isNodeSdk=ra;qa.isReactNative=fa;qa.isSafari=ua;qa.isUWP=ia;qa.isValidFormat=va;qa.isValidTimestamp=Ba;qa.issuedAtTime=$;qa.jsonEval=K;qa.map=ka;qa.querystring=db;qa.querystringDecode=fb;qa.safeGet=ma;qa.stringLength=Sa;qa.stringToByteArray=Da;qa.stringify=ca;qa.validateArgCount=ya;qa.validateCallback=Ea;qa.validateContextObject=bb;qa.validateIndexedDBOpenable=N;qa.validateNamespace=sa});var Mp=Cc(N=>{$d(N,{__assign:()=>d,__asyncDelegator:()=>fa,__asyncGenerator:()=>_,__asyncValues:()=>ha,__await:()=>W,__awaiter:()=>u,__classPrivateFieldGet:()=>ua,__classPrivateFieldSet:()=>la,__createBinding:()=>A,__decorate:()=>i,__exportStar:()=>E,__extends:()=>b,__generator:()=>v,__importDefault:()=>ra,__importStar:()=>ia,__makeTemplateObject:()=>oa,__metadata:()=>q,__param:()=>l,__read:()=>O,__rest:()=>f,__spread:()=>I,__spreadArrays:()=>Q,__values:()=>H});var a=function(x,G){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,J){F.__proto__=J}||function(F,J){for(var U in J)J.hasOwnProperty(U)&&(F[U]=J[U])},a(x,G)};function b(x,G){a(x,G);function F(){this.constructor=x}x.prototype=G===null?Object.create(G):(F.prototype=G.prototype,new F())}var d=function(){return d=Object.assign||function x(G){for(var F,J=1,U=arguments.length;J<U;J++){F=arguments[J];for(var K in F)Object.prototype.hasOwnProperty.call(F,K)&&(G[K]=F[K])}return G},d.apply(this,arguments)};function f(x,G){var F={};for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&G.indexOf(J)<0&&(F[J]=x[J]);if(x!=null&&typeof Object.getOwnPropertySymbols==="function")for(var U=0,J=Object.getOwnPropertySymbols(x);U<J.length;U++)G.indexOf(J[U])<0&&Object.prototype.propertyIsEnumerable.call(x,J[U])&&(F[J[U]]=x[J[U]]);return F}function i(x,G,F,J){var U=arguments.length,K=U<3?G:J===null?J=Object.getOwnPropertyDescriptor(G,F):J,ca;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")K=Reflect.decorate(x,G,F,J);else for(var ba=x.length-1;ba>=0;ba--)(ca=x[ba])&&(K=(U<3?ca(K):U>3?ca(G,F,K):ca(G,F))||K);return U>3&&K&&Object.defineProperty(G,F,K),K}function l(x,G){return function(F,J){G(F,J,x)}}function q(x,G){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(x,G)}function u(x,G,F,J){function U(K){return K instanceof F?K:new F(function(ca){ca(K)})}return new(F||(F=Promise))(function(K,ca){function ba(va){try{$(J.next(va))}catch(pa){ca(pa)}}function Ba(va){try{$(J.throw(va))}catch(pa){ca(pa)}}function $(va){va.done?K(va.value):U(va.value).then(ba,Ba)}$((J=J.apply(x,G||[])).next())})}function v(x,G){var F={label:0,sent:function(){if(K[0]&1)throw K[1];return K[1]},trys:[],ops:[]},J,U,K,ca;return ca={next:ba(0),throw:ba(1),return:ba(2)},typeof Symbol==="function"&&(ca[Symbol.iterator]=function(){return this}),ca;function ba($){return function(va){return Ba([$,va])}}function Ba($){if(J)throw new TypeError("Generator is already executing.");for(;F;)try{if(J=1,U&&(K=$[0]&2?U.return:$[0]?U.throw||((K=U.return)&&K.call(U),0):U.next)&&!(K=K.call(U,$[1])).done)return K;(U=0,K)&&($=[$[0]&2,K.value]);switch($[0]){case 0:case 1:K=$;break;case 4:return F.label++,{value:$[1],done:!1};case 5:F.label++,U=$[1],$=[0];continue;case 7:$=F.ops.pop(),F.trys.pop();continue;default:if(!(K=F.trys,K=K.length>0&&K[K.length-1])&&($[0]===6||$[0]===2)){F=0;continue}if($[0]===3&&(!K||$[1]>K[0]&&$[1]<K[3])){F.label=$[1];break}if($[0]===6&&F.label<K[1]){F.label=K[1],K=$;break}if(K&&F.label<K[2]){F.label=K[2],F.ops.push($);break}K[2]&&F.ops.pop(),F.trys.pop();continue}$=G.call(x,F)}catch(va){$=[6,va],U=0}finally{J=K=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}}function A(x,G,F,J){J===void 0&&(J=F),x[J]=G[F]}function E(x,G){for(var F in x)F!=="default"&&!G.hasOwnProperty(F)&&(G[F]=x[F])}function H(x){var G=typeof Symbol==="function"&&Symbol.iterator,F=G&&x[G],J=0;if(F)return F.call(x);if(x&&typeof x.length==="number")return{next:function(){return x&&J>=x.length&&(x=void 0),{value:x&&x[J++],done:!x}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")}function O(x,G){var F=typeof Symbol==="function"&&x[Symbol.iterator];if(!F)return x;var J=F.call(x),U,K=[],ca;try{for(;(G===void 0||G-- >0)&&!(U=J.next()).done;)K.push(U.value)}catch(ba){ca={error:ba}}finally{try{U&&!U.done&&(F=J.return)&&F.call(J)}finally{if(ca)throw ca.error}}return K}function I(){for(var x=[],G=0;G<arguments.length;G++)x=x.concat(O(arguments[G]));return x}function Q(){for(var x=0,G=0,F=arguments.length;G<F;G++)x+=arguments[G].length;for(var J=Array(x),U=0,G=0;G<F;G++)for(var K=arguments[G],ca=0,ba=K.length;ca<ba;ca++,U++)J[U]=K[ca];return J}function W(x){return this instanceof W?(this.v=x,this):new W(x)}function _(x,G,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=F.apply(x,G||[]),U,K=[];return U={},ca("next"),ca("throw"),ca("return"),U[Symbol.asyncIterator]=function(){return this},U;function ca(da){J[da]&&(U[da]=function(ma){return new Promise(function(xa,ka){K.push([da,ma,xa,ka])>1||ba(da,ma)})})}function ba(da,ma){try{Ba(J[da](ma))}catch(xa){pa(K[0][3],xa)}}function Ba(da){da.value instanceof W?Promise.resolve(da.value.v).then($,va):pa(K[0][2],da)}function $(da){ba("next",da)}function va(da){ba("throw",da)}function pa(da,ma){(da(ma),K.shift(),K.length)&&ba(K[0][0],K[0][1])}}function fa(x){var G,F;return G={},J("next"),J("throw",function(U){throw U}),J("return"),G[Symbol.iterator]=function(){return this},G;function J(U,K){G[U]=x[U]?function(ca){return(F=!F)?{value:W(x[U](ca)),done:U==="return"}:K?K(ca):ca}:K}}function ha(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=x[Symbol.asyncIterator],F;return G?G.call(x):(x=typeof H==="function"?H(x):x[Symbol.iterator](),F={},J("next"),J("throw"),J("return"),F[Symbol.asyncIterator]=function(){return this},F);function J(K){F[K]=x[K]&&function(ca){return new Promise(function(ba,Ba){ca=x[K](ca),U(ba,Ba,ca.done,ca.value)})}}function U(K,ca,ba,Ba){Promise.resolve(Ba).then(function($){K({value:$,done:ba})},ca)}}function oa(x,G){return Object.defineProperty?Object.defineProperty(x,"raw",{value:G}):x.raw=G,x}function ia(x){if(x&&x.__esModule)return x;var G={};if(x!=null)for(var F in x)Object.hasOwnProperty.call(x,F)&&(G[F]=x[F]);return G.default=x,G}function ra(x){return x&&x.__esModule?x:{default:x}}function ua(x,G){if(!G.has(x))throw new TypeError("attempted to get private field on non-instance");return G.get(x)}function la(x,G,F){if(!G.has(x))throw new TypeError("attempted to set private field on non-instance");return G.set(x,F),F}});var Lp=Cc(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});var a=Mp(),b=Qk(),d=function(){function E(H,O,I){this.name=H,this.instanceFactory=O,this.type=I,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return E.prototype.setInstantiationMode=function(H){return this.instantiationMode=H,this},E.prototype.setMultipleInstances=function(H){return this.multipleInstances=H,this},E.prototype.setServiceProps=function(H){return this.serviceProps=H,this},E}();var f="[DEFAULT]";var i=function(){function E(H,O){this.name=H,this.container=O,this.component=null,this.instances=new Map(),this.instancesDeferred=new Map()}return E.prototype.get=function(H){H===void 0&&(H=f);var O=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(O)){var I=new b.Deferred();this.instancesDeferred.set(O,I);try{var Q=this.getOrInitializeService(O);Q&&I.resolve(Q)}catch(W){}}return this.instancesDeferred.get(O).promise},E.prototype.getImmediate=function(H){var O=a.__assign({identifier:f,optional:!1},H),I=O.identifier,Q=O.optional,W=this.normalizeInstanceIdentifier(I);try{var _=this.getOrInitializeService(W);if(!_){if(Q)return null;throw Error("Service "+this.name+" is not available")}return _}catch(fa){if(Q)return null;throw fa}},E.prototype.getComponent=function(){return this.component},E.prototype.setComponent=function(H){var O,I;if(H.name!==this.name)throw Error("Mismatching Component "+H.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");this.component=H;if(q(H))try{this.getOrInitializeService(f)}catch(ra){}try{for(var Q=a.__values(this.instancesDeferred.entries()),W=Q.next();!W.done;W=Q.next()){var _=a.__read(W.value,2),fa=_[0],ha=_[1],oa=this.normalizeInstanceIdentifier(fa);try{var ia=this.getOrInitializeService(oa);ha.resolve(ia)}catch(ra){}}}catch(ra){O={error:ra}}finally{try{W&&!W.done&&(I=Q.return)&&I.call(Q)}finally{if(O)throw O.error}}},E.prototype.clearInstance=function(H){H===void 0&&(H=f),this.instancesDeferred.delete(H),this.instances.delete(H)},E.prototype.delete=function(){return a.__awaiter(this,void 0,void 0,function(){var H;return a.__generator(this,function(O){switch(O.label){case 0:return H=Array.from(this.instances.values()),[4,Promise.all(a.__spread(H.filter(function(I){return"INTERNAL"in I}).map(function(I){return I.INTERNAL.delete()}),H.filter(function(I){return"_delete"in I}).map(function(I){return I._delete()})))];case 1:return O.sent(),[2]}})})},E.prototype.isComponentSet=function(){return this.component!=null},E.prototype.getOrInitializeService=function(H){var O=this.instances.get(H);return!O&&this.component&&(O=this.component.instanceFactory(this.container,l(H)),this.instances.set(H,O)),O||null},E.prototype.normalizeInstanceIdentifier=function(H){return this.component?this.component.multipleInstances?H:f:H},E}();function l(E){return E===f?void 0:E}function q(E){return E.instantiationMode==="EAGER"}var u=function(){function E(H){this.name=H,this.providers=new Map()}return E.prototype.addComponent=function(H){var O=this.getProvider(H.name);if(O.isComponentSet())throw new Error("Component "+H.name+" has already been registered with "+this.name);O.setComponent(H)},E.prototype.addOrOverwriteComponent=function(H){var O=this.getProvider(H.name);O.isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)},E.prototype.getProvider=function(H){if(this.providers.has(H))return this.providers.get(H);var O=new i(H,this);return this.providers.set(H,O),O},E.prototype.getProviders=function(){return Array.from(this.providers.values())},E}();v.Component=d;v.ComponentContainer=u;v.Provider=i});var Np=Cc(H=>{$d(H,{LogLevel:()=>f,Logger:()=>v,setLogLevel:()=>A,setUserLogHandler:()=>E});function a(){for(var I=0,Q=0,W=arguments.length;Q<W;Q++)I+=arguments[Q].length;for(var _=Array(I),fa=0,Q=0;Q<W;Q++)for(var ha=arguments[Q],oa=0,ia=ha.length;oa<ia;oa++,fa++)_[fa]=ha[oa];return _}var b,d=[],f;(function(I){I[I.DEBUG=0]="DEBUG",I[I.VERBOSE=1]="VERBOSE",I[I.INFO=2]="INFO",I[I.WARN=3]="WARN",I[I.ERROR=4]="ERROR",I[I.SILENT=5]="SILENT"})(f||(f={}));var i={debug:f.DEBUG,verbose:f.VERBOSE,info:f.INFO,warn:f.WARN,error:f.ERROR,silent:f.SILENT},l=f.INFO,q=(b={},b[f.DEBUG]="log",b[f.VERBOSE]="log",b[f.INFO]="info",b[f.WARN]="warn",b[f.ERROR]="error",b),u=function(I,Q){for(var W=[],_=2;_<arguments.length;_++)W[_-2]=arguments[_];if(Q<I.logLevel)return;var fa=new Date().toISOString(),ha=q[Q];if(ha)console[ha].apply(console,a(["["+fa+"]  "+I.name+":"],W));else throw new Error("Attempted to log a message with an invalid logType (value: "+Q+")")},v=function(){function I(Q){this.name=Q,this._logLevel=l,this._logHandler=u,this._userLogHandler=null,d.push(this)}return Object.defineProperty(I.prototype,"logLevel",{get:function(){return this._logLevel},set:function(Q){if(!(Q in f))throw new TypeError('Invalid value "'+Q+'" assigned to `logLevel`');this._logLevel=Q},enumerable:!1,configurable:!0}),I.prototype.setLogLevel=function(Q){this._logLevel=typeof Q==="string"?i[Q]:Q},Object.defineProperty(I.prototype,"logHandler",{get:function(){return this._logHandler},set:function(Q){if(typeof Q!=="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Q},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(Q){this._userLogHandler=Q},enumerable:!1,configurable:!0}),I.prototype.debug=function(){for(var Q=[],W=0;W<arguments.length;W++)Q[W]=arguments[W];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.DEBUG],Q)),this._logHandler.apply(this,a([this,f.DEBUG],Q))},I.prototype.log=function(){for(var Q=[],W=0;W<arguments.length;W++)Q[W]=arguments[W];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.VERBOSE],Q)),this._logHandler.apply(this,a([this,f.VERBOSE],Q))},I.prototype.info=function(){for(var Q=[],W=0;W<arguments.length;W++)Q[W]=arguments[W];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.INFO],Q)),this._logHandler.apply(this,a([this,f.INFO],Q))},I.prototype.warn=function(){for(var Q=[],W=0;W<arguments.length;W++)Q[W]=arguments[W];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.WARN],Q)),this._logHandler.apply(this,a([this,f.WARN],Q))},I.prototype.error=function(){for(var Q=[],W=0;W<arguments.length;W++)Q[W]=arguments[W];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.ERROR],Q)),this._logHandler.apply(this,a([this,f.ERROR],Q))},I}();function A(I){d.forEach(function(Q){Q.setLogLevel(I)})}function E(I,Q){for(var W=function(oa){var ia=null;Q&&Q.level&&(ia=i[Q.level]),I===null?oa.userLogHandler=null:oa.userLogHandler=function(ra,ua){for(var la=[],N=2;N<arguments.length;N++)la[N-2]=arguments[N];var R=la.map(function(x){if(x==null)return null;{if(typeof x==="string")return x;{if(typeof x==="number"||typeof x==="boolean")return x.toString();{if(x instanceof Error)return x.message;try{return JSON.stringify(x)}catch(G){return null}}}}}).filter(function(x){return x}).join(" ");ua>=(ia!==null&&ia!==void 0?ia:ra.logLevel)&&I({level:f[ua].toLowerCase(),message:R,args:la,type:ra.name})}},_=0,fa=d;_<fa.length;_++){var ha=fa[_];W(ha)}}});var Jp=Cc($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});var a=Kp(),b=Qk(),d=Lp(),f=Np();var i,l=(i={},i["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",i),q=new b.ErrorFactory("app","Firebase",l),u="@firebase/app",v="0.6.11",A="@firebase/analytics",E="@firebase/auth",H="@firebase/database",O="@firebase/functions",I="@firebase/installations",Q="@firebase/messaging",W="@firebase/performance",_="@firebase/remote-config",fa="@firebase/storage",ha="@firebase/firestore",oa="firebase-wrapper";var ia,ra="[DEFAULT]",ua=(ia={},ia[u]="fire-core",ia[A]="fire-analytics",ia[E]="fire-auth",ia[H]="fire-rtdb",ia[O]="fire-fn",ia[I]="fire-iid",ia[Q]="fire-fcm",ia[W]="fire-perf",ia[_]="fire-rc",ia[fa]="fire-gcs",ia[ha]="fire-fst",ia["fire-js"]="fire-js",ia[oa]="fire-js-all",ia);var la=new f.Logger("@firebase/app");var N=function(){function pa(da,ma,xa){var ka,db,fb=this;this.firebase_=xa,this.isDeleted_=!1,this.name_=ma.name,this.automaticDataCollectionEnabled_=ma.automaticDataCollectionEnabled||!1,this.options_=b.deepCopy(da),this.container=new d.ComponentContainer(ma.name),this._addComponent(new d.Component("app",function(){return fb},"PUBLIC"));try{for(var gb=a.__values(this.firebase_.INTERNAL.components.values()),Ca=gb.next();!Ca.done;Ca=gb.next()){var Ia=Ca.value;this._addComponent(Ia)}}catch(Ya){ka={error:Ya}}finally{try{Ca&&!Ca.done&&(db=gb.return)&&db.call(gb)}finally{if(ka)throw ka.error}}}return Object.defineProperty(pa.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(da){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=da},enumerable:!1,configurable:!0}),Object.defineProperty(pa.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(pa.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),pa.prototype.delete=function(){var da=this;return new Promise(function(ma){da.checkDestroyed_(),ma()}).then(function(){return da.firebase_.INTERNAL.removeApp(da.name_),Promise.all(da.container.getProviders().map(function(ma){return ma.delete()}))}).then(function(){da.isDeleted_=!0})},pa.prototype._getService=function(da,ma){return ma===void 0&&(ma=ra),this.checkDestroyed_(),this.container.getProvider(da).getImmediate({identifier:ma})},pa.prototype._removeServiceInstance=function(da,ma){ma===void 0&&(ma=ra),this.container.getProvider(da).clearInstance(ma)},pa.prototype._addComponent=function(da){try{this.container.addComponent(da)}catch(ma){la.debug("Component "+da.name+" failed to register with FirebaseApp "+this.name,ma)}},pa.prototype._addOrOverwriteComponent=function(da){this.container.addOrOverwriteComponent(da)},pa.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw q.create("app-deleted",{appName:this.name_})},pa}();N.prototype.name&&N.prototype.options||N.prototype.delete||console.log("dc");var R="7.20.0";function x(pa){var da={},ma=new Map(),xa={__esModule:!0,initializeApp:fb,app:db,registerVersion:Ia,setLogLevel:f.setLogLevel,onLog:Ya,apps:null,SDK_VERSION:R,INTERNAL:{registerComponent:Ca,removeApp:ka,components:ma,useAsService:eb}};xa.default=xa,Object.defineProperty(xa,"apps",{get:gb});function ka(na){delete da[na]}function db(na){na=na||ra;if(!b.contains(da,na))throw q.create("no-app",{appName:na});return da[na]}db.App=pa;function fb(na,ya){ya===void 0&&(ya={});if(typeof ya!=="object"||ya===null){var La=ya;ya={name:La}}var sa=ya;sa.name===void 0&&(sa.name=ra);var Ea=sa.name;if(typeof Ea!=="string"||!Ea)throw q.create("bad-app-name",{appName:String(Ea)});if(b.contains(da,Ea))throw q.create("duplicate-app",{appName:Ea});var bb=new pa(na,sa,xa);return da[Ea]=bb,bb}function gb(){return Object.keys(da).map(function(na){return da[na]})}function Ca(na){var ya,La,sa=na.name;if(ma.has(sa))return la.debug("There were multiple attempts to register component "+sa+"."),na.type==="PUBLIC"?xa[sa]:null;ma.set(sa,na);if(na.type==="PUBLIC"){var Ea=function(Ja){Ja===void 0&&(Ja=db());if(typeof Ja[sa]!=="function")throw q.create("invalid-app-argument",{appName:sa});return Ja[sa]()};na.serviceProps!==void 0&&b.deepExtend(Ea,na.serviceProps),xa[sa]=Ea,pa.prototype[sa]=function(){for(var Ja=[],Va=0;Va<arguments.length;Va++)Ja[Va]=arguments[Va];var ib=this._getService.bind(this,sa);return ib.apply(this,na.multipleInstances?Ja:[])}}try{for(var bb=a.__values(Object.keys(da)),Da=bb.next();!Da.done;Da=bb.next()){var Sa=Da.value;da[Sa]._addComponent(na)}}catch(Ja){ya={error:Ja}}finally{try{Da&&!Da.done&&(La=bb.return)&&La.call(bb)}finally{if(ya)throw ya.error}}return na.type==="PUBLIC"?xa[sa]:null}function Ia(na,ya,La){var sa,Ea=(sa=ua[na])!==null&&sa!==void 0?sa:na;La&&(Ea+="-"+La);var bb=Ea.match(/\s|\//),Da=ya.match(/\s|\//);if(bb||Da){var Sa=['Unable to register library "'+Ea+'" with version "'+ya+'":'];bb&&Sa.push('library name "'+Ea+'" contains illegal characters (whitespace or "/")'),bb&&Da&&Sa.push("and"),Da&&Sa.push('version name "'+ya+'" contains illegal characters (whitespace or "/")'),la.warn(Sa.join(" "));return}Ca(new d.Component(Ea+"-version",function(){return{library:Ea,version:ya}},"VERSION"))}function Ya(na,ya){if(na!==null&&typeof na!=="function")throw q.create("invalid-log-argument",{appName:name});f.setUserLogHandler(na,ya)}function eb(na,ya){if(ya==="serverAuth")return null;var La=ya;return La}return xa}function G(){var pa=x(N);pa.INTERNAL=a.__assign(a.__assign({},pa.INTERNAL),{createFirebaseNamespace:G,extendNamespace:da,createSubscribe:b.createSubscribe,ErrorFactory:b.ErrorFactory,deepExtend:b.deepExtend});function da(ma){b.deepExtend(pa,ma)}return pa}var F=G();var J=function(){function pa(da){this.container=da}return pa.prototype.getPlatformInfoString=function(){var da=this.container.getProviders();return da.map(function(ma){if(U(ma)){var xa=ma.getImmediate();return xa.library+"/"+xa.version}else return null}).filter(function(ma){return ma}).join(" ")},pa}();function U(pa){var da=pa.getComponent();return(da===null||da===void 0?void 0:da.type)==="VERSION"}function K(pa,da){pa.INTERNAL.registerComponent(new d.Component("platform-logger",function(ma){return new J(ma)},"PRIVATE")),pa.registerVersion(u,v,da),pa.registerVersion("fire-js","")}if(b.isBrowser()&&self.firebase!==void 0){la.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var ca=self.firebase.SDK_VERSION;ca&&ca.indexOf("LITE")>=0&&la.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var ba=F.initializeApp;F.initializeApp=function(){for(var pa=[],da=0;da<arguments.length;da++)pa[da]=arguments[da];return b.isNode()&&la.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/rollup-plugin-node-resolve
      `),ba.apply(void 0,pa)};var Ba=F;K(Ba);$.default=Ba;$.firebase=Ba});var ec=Cc((l,q)=>{"use strict";var a=Jp();function b(u){return u&&typeof u==="object"&&"default"in u?u:{default:u}}var d=b(a),f="firebase",i="7.22.1";d.default.registerVersion(f,i,"app");q.exports=d.default});var jw=Cc((b,d)=>{var a=function(){function f(A,E){if(!u[A]){u[A]={};for(var H=0;H<A.length;H++)u[A][A.charAt(H)]=H}return u[A][E]}var i=String.fromCharCode,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",u={},v={compressToBase64:function(A){if(null==A)return"";var E=v._compress(A,6,function(H){return l.charAt(H)});switch(E.length%4){default:case 0:return E;case 1:return E+"===";case 2:return E+"==";case 3:return E+"="}},decompressFromBase64:function(A){return null==A?"":""==A?null:v._decompress(A.length,32,function(E){return f(l,A.charAt(E))})},compressToUTF16:function(A){return null==A?"":v._compress(A,15,function(E){return i(E+32)})+" "},decompressFromUTF16:function(A){return null==A?"":""==A?null:v._decompress(A.length,16384,function(E){return A.charCodeAt(E)-32})},compressToUint8Array:function(A){for(var E=v.compress(A),H=new Uint8Array(2*E.length),O=0,I=E.length;I>O;O++){var Q=E.charCodeAt(O);H[2*O]=Q>>>8,H[2*O+1]=Q%256}return H},decompressFromUint8Array:function(A){if(null===A||void 0===A)return v.decompress(A);for(var E=new Array(A.length/2),H=0,O=E.length;O>H;H++)E[H]=256*A[2*H]+A[2*H+1];var I=[];return E.forEach(function(Q){I.push(i(Q))}),v.decompress(I.join(""))},compressToEncodedURIComponent:function(A){return null==A?"":v._compress(A,6,function(E){return q.charAt(E)})},decompressFromEncodedURIComponent:function(A){return null==A?"":""==A?null:(A=A.replace(/ /g,"+"),v._decompress(A.length,32,function(E){return f(q,A.charAt(E))}))},compress:function(A){return v._compress(A,16,function(E){return i(E)})},_compress:function(A,E,H){if(null==A)return"";var O,I,Q,W={},_={},fa="",ha="",oa="",ia=2,ra=3,ua=2,la=[],N=0,R=0;for(Q=0;Q<A.length;Q+=1)if(fa=A.charAt(Q),Object.prototype.hasOwnProperty.call(W,fa)||(W[fa]=ra++,_[fa]=!0),ha=oa+fa,Object.prototype.hasOwnProperty.call(W,ha))oa=ha;else{if(Object.prototype.hasOwnProperty.call(_,oa)){if(oa.charCodeAt(0)<256){for(O=0;ua>O;O++)N<<=1,R==E-1?(R=0,la.push(H(N)),N=0):R++;for(I=oa.charCodeAt(0),O=0;8>O;O++)N=N<<1|1&I,R==E-1?(R=0,la.push(H(N)),N=0):R++,I>>=1}else{for(I=1,O=0;ua>O;O++)N=N<<1|I,R==E-1?(R=0,la.push(H(N)),N=0):R++,I=0;for(I=oa.charCodeAt(0),O=0;16>O;O++)N=N<<1|1&I,R==E-1?(R=0,la.push(H(N)),N=0):R++,I>>=1}ia--,0==ia&&(ia=Math.pow(2,ua),ua++),delete _[oa]}else for(I=W[oa],O=0;ua>O;O++)N=N<<1|1&I,R==E-1?(R=0,la.push(H(N)),N=0):R++,I>>=1;ia--,0==ia&&(ia=Math.pow(2,ua),ua++),W[ha]=ra++,oa=String(fa)}if(""!==oa){if(Object.prototype.hasOwnProperty.call(_,oa)){if(oa.charCodeAt(0)<256){for(O=0;ua>O;O++)N<<=1,R==E-1?(R=0,la.push(H(N)),N=0):R++;for(I=oa.charCodeAt(0),O=0;8>O;O++)N=N<<1|1&I,R==E-1?(R=0,la.push(H(N)),N=0):R++,I>>=1}else{for(I=1,O=0;ua>O;O++)N=N<<1|I,R==E-1?(R=0,la.push(H(N)),N=0):R++,I=0;for(I=oa.charCodeAt(0),O=0;16>O;O++)N=N<<1|1&I,R==E-1?(R=0,la.push(H(N)),N=0):R++,I>>=1}ia--,0==ia&&(ia=Math.pow(2,ua),ua++),delete _[oa]}else for(I=W[oa],O=0;ua>O;O++)N=N<<1|1&I,R==E-1?(R=0,la.push(H(N)),N=0):R++,I>>=1;ia--,0==ia&&(ia=Math.pow(2,ua),ua++)}for(I=2,O=0;ua>O;O++)N=N<<1|1&I,R==E-1?(R=0,la.push(H(N)),N=0):R++,I>>=1;for(;;){if(N<<=1,R==E-1){la.push(H(N));break}R++}return la.join("")},decompress:function(A){return null==A?"":""==A?null:v._decompress(A.length,32768,function(E){return A.charCodeAt(E)})},_decompress:function(A,E,H){var O,I,Q,W,_,fa,ha,oa,ia=[],ra=4,ua=4,la=3,N="",R=[],x={val:H(0),position:E,index:1};for(I=0;3>I;I+=1)ia[I]=I;for(W=0,fa=Math.pow(2,2),ha=1;ha!=fa;)_=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),W|=(_>0?1:0)*ha,ha<<=1;switch(O=W){case 0:for(W=0,fa=Math.pow(2,8),ha=1;ha!=fa;)_=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),W|=(_>0?1:0)*ha,ha<<=1;oa=i(W);break;case 1:for(W=0,fa=Math.pow(2,16),ha=1;ha!=fa;)_=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),W|=(_>0?1:0)*ha,ha<<=1;oa=i(W);break;case 2:return""}for(ia[3]=oa,Q=oa,R.push(oa);;){if(x.index>A)return"";for(W=0,fa=Math.pow(2,la),ha=1;ha!=fa;)_=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),W|=(_>0?1:0)*ha,ha<<=1;switch(oa=W){case 0:for(W=0,fa=Math.pow(2,8),ha=1;ha!=fa;)_=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),W|=(_>0?1:0)*ha,ha<<=1;ia[ua++]=i(W),oa=ua-1,ra--;break;case 1:for(W=0,fa=Math.pow(2,16),ha=1;ha!=fa;)_=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),W|=(_>0?1:0)*ha,ha<<=1;ia[ua++]=i(W),oa=ua-1,ra--;break;case 2:return R.join("")}if(0==ra&&(ra=Math.pow(2,la),la++),ia[oa])N=ia[oa];else{if(oa!==ua)return null;N=Q+Q.charAt(0)}R.push(N),ia[ua++]=Q+N.charAt(0),ra--,Q=N,0==ra&&(ra=Math.pow(2,la),la++)}}};return v}();"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof d&&null!=d&&(d.exports=a)});let Tp,Up=0,Vp=0;const yb={get:()=>Tp,set:a=>{Tp=a},getFrame:()=>Up,setFrame:a=>{Up=a},getElapsed:()=>Vp,setElapsed:a=>{Vp=a}};let Zp=0;function Kk(a=0){return()=>{Zp=a}}function Rh(){return Zp}let Vk="Phaser",tw="https://phaser4.io",uw="#fff",vw="linear-gradient(#3e0081 40%, #00bcc3)";function Rk(){if(Vk!==""){const a=yb.get(),b=Vk==="Phaser"?" v"+a.VERSION:"";console.log(`%c${Vk}${b}%c ${tw}`,`padding: 4px 16px; color: ${uw}; background: ${vw}`,"")}}let cq=800,dq=600,eq=1;function Nk(a=800,b=600,d=1){return d===0&&(d=window.devicePixelRatio),()=>{cq=a,dq=b,eq=d}}function Jd(){return cq}function Kd(){return dq}function Ld(){return eq}const jl=[],sf={add:a=>{jl.push(a)},get:()=>jl,clear:()=>{jl.length=0}};let bq;function Sh(a){bq=a}function Sk(){return bq}let Wk=.5,Xk=.5;let _p=0;function Yk(a){_p=a}function ng(){return _p}function Th(a){let b;return a&&(typeof a==="string"?b=document.getElementById(a):typeof a==="object"&&a.nodeType===1&&(b=a)),b||(b=document.body),b}let $p;function Lk(a){return()=>{a&&($p=Th(a))}}function Tk(){return $p}let aq=[];function Mk(a){return()=>{aq=[].concat(a)}}function Zk(){return aq}let xw={alpha:!1,antialias:!1,depth:!1,premultipliedAlpha:!1};function _k(){return xw}class wq{constructor(a){this.stack=[],this.current=null,this.renderer=a}reset(){this.stack=[],this.current=null;const a=this.renderer,b=a.gl;b.bindFramebuffer(b.FRAMEBUFFER,null),b.viewport(0,0,a.width,a.height)}add(a,b=!0,d=0,f=0){this.stack.push({framebuffer:a,width:d,height:f}),this.set(a,b,d,f)}set(a,b=!0,d=0,f=0){const i=this.renderer,l=i.gl;l.bindFramebuffer(l.FRAMEBUFFER,a),b&&(l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT)),d>0&&l.viewport(0,0,d,f),this.current=a}pop(){this.stack.pop();const a=this.stack.length;if(a>0){const b=this.stack[a-1];this.set(b.framebuffer,!1,b.width,b.height)}else this.reset()}rebind(){const a=this.renderer.gl;a.bindFramebuffer(a.FRAMEBUFFER,this.current)}destroy(){this.stack=[]}}let vq;const Hb={get:()=>vq,set:a=>{vq=a}};function xq(a,b=[]){const d=a>>16&255,f=a>>8&255,i=a&255,l=a>16777215?a>>>24:255;return b[0]=d/255,b[1]=f/255,b[2]=i/255,b[3]=l/255,b}function sq(a,b){return a.a===b.a&&a.b===b.b&&a.c===b.c&&a.d===b.d&&a.tx===b.tx&&a.ty===b.ty}function ai(a,b){const d=Hb.get();b||(b=d.COLOR_ATTACHMENT0);const f=d.createFramebuffer();return d.bindFramebuffer(d.FRAMEBUFFER,f),d.framebufferTexture2D(d.FRAMEBUFFER,b,d.TEXTURE_2D,a,0),d.bindFramebuffer(d.FRAMEBUFFER,null),f}function gi(a){const b=Hb.get();if(!b)return;const{parent:d,flipY:f,unpackPremultiplyAlpha:i,minFilter:l,magFilter:q,wrapS:u,wrapT:v,generateMipmap:A,isPOT:E}=a,H=d.image;let O=d.width,I=d.height;const Q=b.createTexture();return b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,Q),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,f),b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),H?(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,H),O=H.width,I=H.height):b.texImage2D(b.TEXTURE_2D,0,b.RGBA,O,I,0,b.RGBA,b.UNSIGNED_BYTE,null),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,l),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,q),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,u),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,v),A&&E&&b.generateMipmap(b.TEXTURE_2D),a.texture=Q,Q}function xe(a){const b=Hb.get();b&&b.isFramebuffer(a)&&b.deleteFramebuffer(a)}function kl(a){const b=Hb.get();if(!b)return;b.isTexture(a)&&b.deleteTexture(a)}function tq(a,b){return a<1||b<1?!1:(a&a-1)===0&&(b&b-1)===0}function Gq(a,b=!0){const d=Hb.get();d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,a);const f=b?d.LINEAR:d.NEAREST;d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,f),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,f)}function Hq(a){const b=Hb.get(),d=a.parent.image,f=d.width,i=d.height;return f>0&&i>0&&(b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,a.texture),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,a.flipY),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,d)),a.texture}class rf{constructor(a,b={}){this.index=0,this.indexCounter=-1,this.dirtyIndex=!0,this.unpackPremultiplyAlpha=!0,this.flipY=!1,this.isPOT=!1,this.generateMipmap=!1;const d=Hb.get();this.parent=a,this.isPOT=tq(a.width,a.height);const{texture:f=null,framebuffer:i=null,unpackPremultiplyAlpha:l=!0,minFilter:q=d.LINEAR,magFilter:u=d.LINEAR,wrapS:v=d.CLAMP_TO_EDGE,wrapT:A=d.CLAMP_TO_EDGE,generateMipmap:E=this.isPOT,flipY:H=!1}=b;this.minFilter=q,this.magFilter=u,this.wrapS=v,this.wrapT=A,this.generateMipmap=E,this.flipY=H,this.unpackPremultiplyAlpha=l,i&&(this.framebuffer=i),f?this.texture=f:gi(this)}setFilter(a){this.texture&&Gq(this.texture,a)}create(){const a=this.texture;return a&&kl(a),gi(this)}update(){const a=this.texture;return a?Hq(this):gi(this)}setIndex(a){this.dirtyIndex=a!==this.index,this.index=a}destroy(){kl(this.texture),xe(this.framebuffer),this.parent=null,this.texture=null,this.framebuffer=null}}class Dq{constructor(a,b,d,f,i){this.batchSize=a,this.dataSize=b,this.indexSize=d,this.vertexElementSize=f,this.quadIndexSize=i,this.vertexByteSize=f*b,this.quadByteSize=this.vertexByteSize*4,this.quadElementSize=f*4,this.bufferByteSize=a*this.quadByteSize,this.create()}create(){let a=[];for(let d=0;d<this.batchSize*this.indexSize;d+=this.indexSize)a.push(d+0,d+1,d+2,d+2,d+3,d+0);this.data=new ArrayBuffer(this.bufferByteSize),this.index=new Uint16Array(a),this.vertexViewF32=new Float32Array(this.data),this.vertexViewU32=new Uint32Array(this.data);const b=Hb.get();this.vertexBuffer=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer),b.bufferData(b.ARRAY_BUFFER,this.data,b.DYNAMIC_DRAW),this.indexBuffer=b.createBuffer(),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.index,b.STATIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,null),a=[]}destroy(){}}class ll{constructor(a,b,d,f,i,l){this.trimmed=!1,this.texture=a,this.key=b,this.x=d,this.y=f,this.width=i,this.height=l,this.sourceSizeWidth=i,this.sourceSizeHeight=l,this.updateUVs()}setPivot(a,b){this.pivot={x:a,y:b}}setSize(a,b){this.width=a,this.height=b,this.sourceSizeWidth=a,this.sourceSizeHeight=b,this.updateUVs()}setSourceSize(a,b){this.sourceSizeWidth=a,this.sourceSizeHeight=b}setTrim(a,b,d,f,i,l){this.trimmed=!0,this.sourceSizeWidth=a,this.sourceSizeHeight=b,this.spriteSourceSizeX=d,this.spriteSourceSizeY=f,this.spriteSourceSizeWidth=i,this.spriteSourceSizeHeight=l}getExtent(a,b){const d=this.sourceSizeWidth,f=this.sourceSizeHeight;let i,l,q,u;return this.trimmed?(i=this.spriteSourceSizeX-a*d,l=i+this.spriteSourceSizeWidth,q=this.spriteSourceSizeY-b*f,u=q+this.spriteSourceSizeHeight):(i=-a*d,l=i+d,q=-b*f,u=q+f),{left:i,right:l,top:q,bottom:u}}setExtent(a){const b=a.transform,d=b.origin.x,f=b.origin.y,i=this.sourceSizeWidth,l=this.sourceSizeHeight;let q,u,v,A;this.trimmed?(q=this.spriteSourceSizeX-d*i,u=this.spriteSourceSizeY-f*l,v=this.spriteSourceSizeWidth,A=this.spriteSourceSizeHeight):(q=-d*i,u=-f*l,v=i,A=l),b.setExtent(q,u,v,A)}updateUVs(){const{x:a,y:b,width:d,height:f}=this,i=this.texture.width,l=this.texture.height;this.u0=a/i,this.v0=b/l,this.u1=(a+d)/i,this.v1=(b+f)/l}}class $b{constructor(a,b,d){this.key="",a&&(b=a.width,d=a.height),this.image=a,this.width=b,this.height=d,this.frames=new Map(),this.data={},this.addFrame("__BASE",0,0,b,d),sf.add(this)}addFrame(a,b,d,f,i){if(this.frames.has(a))return null;const l=new ll(this,a,b,d,f,i);return this.frames.set(a,l),(!this.firstFrame||this.firstFrame.key==="__BASE")&&(this.firstFrame=l),l}getFrame(a){if(!a)return this.firstFrame;a instanceof ll&&(a=a.key);let b=this.frames.get(a);return b||(console.warn(`Frame missing: ${a}`),b=this.firstFrame),b}setSize(a,b){this.width=a,this.height=b;const d=this.frames.get("__BASE");d.setSize(a,b)}destroy(){this.binding&&this.binding.destroy(),this.frames.clear(),this.data=null,this.image=null,this.firstFrame=null}}let Cq;const vg={get:()=>Cq,set:a=>{Cq=a}};const Fq={fragmentShader:`\r
#define SHADER_NAME SINGLE_QUAD_FRAG\r
\r
precision highp float;\r
\r
varying vec2 vTextureCoord;\r
varying float vTextureId;\r
varying vec4 vTintColor;\r
\r
uniform sampler2D uTexture;\r
\r
void main (void)\r
{\r
    vec4 color = texture2D(uTexture, vTextureCoord);\r
\r
    gl_FragColor = color * vec4(vTintColor.bgr * vTintColor.a, vTintColor.a);\r
}`,vertexShader:`\r
#define SHADER_NAME SINGLE_QUAD_VERT\r
\r
precision highp float;\r
\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
attribute float aTextureId;\r
attribute vec4 aTintColor;\r
\r
uniform mat4 uProjectionMatrix;\r
uniform mat4 uCameraMatrix;\r
\r
varying vec2 vTextureCoord;\r
varying float vTextureId;\r
varying vec4 vTintColor;\r
\r
void main (void)\r
{\r
    vTextureCoord = aTextureCoord;\r
    vTextureId = aTextureId;\r
    vTintColor = aTintColor;\r
\r
    gl_Position = uProjectionMatrix * uCameraMatrix * vec4(aVertexPosition, 0.0, 1.0);\r
}`};class fi{constructor(a={}){this.attribs={aVertexPosition:0,aTextureCoord:0,aTextureId:0,aTintColor:0},this.uniforms={uProjectionMatrix:0,uCameraMatrix:0,uTexture:0,uTime:0,uResolution:0},this.renderToFBO=!1,this.renderer=vg.get();const{batchSize:b=4096,dataSize:d=4,indexSize:f=4,vertexElementSize:i=6,quadIndexSize:l=6,fragmentShader:q=Fq.fragmentShader,vertexShader:u=Fq.vertexShader,width:v=Jd(),height:A=Kd(),resolution:E=Ld(),renderToFBO:H=!1}=a;this.buffer=new Dq(b,d,f,i,l),this.createShaders(q,u),this.count=0,this.renderToFBO=H;const O=new $b(null,v*E,A*E),I=new rf(O);O.binding=I,I.framebuffer=ai(I.texture),this.texture=O,this.framebuffer=I.framebuffer}createShaders(a,b){const d=this.renderer.gl,f=d.createShader(d.FRAGMENT_SHADER);d.shaderSource(f,a),d.compileShader(f);let i=!1,l=d.getShaderInfoLog(f);l.length>0&&(i=!0,console.error(l));const q=d.createShader(d.VERTEX_SHADER);d.shaderSource(q,b),d.compileShader(q),l=d.getShaderInfoLog(f),l.length>0&&(i=!0,console.error(l));if(i)return;const u=d.createProgram();d.attachShader(u,q),d.attachShader(u,f),d.linkProgram(u),d.useProgram(u),this.program=u;for(const v of Object.keys(this.attribs)){const A=d.getAttribLocation(u,v);d.enableVertexAttribArray(A),this.attribs[v]=A}for(const v of Object.keys(this.uniforms))this.uniforms[v]=d.getUniformLocation(u,v)}bind(a,b,d){if(!this.program)return!1;const f=this.renderer,i=f.gl,l=this.uniforms;return i.useProgram(this.program),i.uniformMatrix4fv(l.uProjectionMatrix,!1,a),i.uniformMatrix4fv(l.uCameraMatrix,!1,b),i.uniform1i(l.uTexture,f.textures.textureIndex[d]),i.uniform1f(l.uTime,performance.now()),i.uniform2f(l.uResolution,f.width,f.height),this.bindBuffers(this.buffer.indexBuffer,this.buffer.vertexBuffer),!0}bindBuffers(a,b){const d=this.renderer.gl,f=this.buffer.vertexByteSize,i=this.attribs;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),d.bindBuffer(d.ARRAY_BUFFER,b),d.vertexAttribPointer(i.aVertexPosition,2,d.FLOAT,!1,f,0),d.vertexAttribPointer(i.aTextureCoord,2,d.FLOAT,!1,f,8),d.vertexAttribPointer(i.aTextureId,1,d.FLOAT,!1,f,16),d.vertexAttribPointer(i.aTintColor,4,d.UNSIGNED_BYTE,!0,f,20),this.count=0}draw(a){const b=this.renderer,d=b.gl,f=this.buffer;if(a===f.batchSize)d.bufferData(d.ARRAY_BUFFER,f.data,d.DYNAMIC_DRAW);else{const i=f.vertexViewF32.subarray(0,a*f.quadElementSize);d.bufferSubData(d.ARRAY_BUFFER,0,i)}this.renderToFBO&&b.fbo.add(this.framebuffer,!0),d.drawElements(d.TRIANGLES,a*f.quadIndexSize,d.UNSIGNED_SHORT,0),this.renderToFBO&&b.fbo.pop()}flush(){const a=this.count;return a===0?!1:(this.draw(a),this.prevCount=a,this.count=0,!0)}}const Lw=`\r
#define SHADER_NAME MULTI_QUAD_FRAG\r
\r
precision highp float;\r
\r
varying vec2 vTextureCoord;\r
varying float vTextureId;\r
varying vec4 vTintColor;\r
\r
uniform sampler2D uTexture[%count%];\r
\r
void main (void)\r
{\r
    vec4 color;\r
\r
    %forloop%\r
\r
    gl_FragColor = color * vec4(vTintColor.bgr * vTintColor.a, vTintColor.a);\r
}`;class yq extends fi{constructor(a={fragmentShader:Lw}){super(a)}createShaders(a,b){const d=ng();let f="";for(let i=1;i<d;i++)i>1&&(f+=`
	else `),i<d-1&&(f+=`if (vTextureId < ${i}.5)`),f+=`
	{`,f+=`
		color = texture2D(uTexture[${i}], vTextureCoord);`,f+=`
	}`;a=a.replace(/%count%/gi,`${d}`),a=a.replace(/%forloop%/gi,f),super.createShaders(a,b)}bind(a,b){if(!this.program)return!1;const d=this.renderer,f=d.gl,i=this.uniforms;return f.useProgram(this.program),f.uniformMatrix4fv(i.uProjectionMatrix,!1,a),f.uniformMatrix4fv(i.uCameraMatrix,!1,b),f.uniform1iv(i.uTexture,d.textures.textureIndex),f.uniform1f(i.uTime,performance.now()),f.uniform2f(i.uResolution,d.width,d.height),this.bindBuffers(this.buffer.indexBuffer,this.buffer.vertexBuffer),!0}}function zq(a,b,d=-1,f=1){const i=-2*(1/-a),l=-2*(1/b),q=2*(1/(d-f));return new Float32Array([i,0,0,0,0,l,0,0,0,0,q,0,-1,1,0,1])}class Aq{constructor(a,b){this.renderer=a;const d={shader:new b()};this.stack=[d],this.currentEntry=d,this.current=d.shader,this.singleQuadShader=new fi()}add(a,b){const d={shader:a,textureID:b};return this.stack.push(d),d}set(a,b){this.flush();const d=this.renderer,f=d.projectionMatrix,i=d.currentCamera.matrix,l=a.bind(f,i,b);if(l){const q=this.add(a,b);this.currentEntry=q,this.current=a}return l}setDefault(a){this.set(this.singleQuadShader,a)}pop(){this.flush();const a=this.stack;a.length>1&&a.pop(),this.currentEntry=a[a.length-1],this.current=this.currentEntry.shader}reset(){this.pop(),this.rebind()}flush(){return this.current.flush()?(this.renderer.flushTotal++,!0):!1}rebind(){const a=this.renderer,b=a.projectionMatrix,d=a.currentCamera.matrix,f=this.currentEntry;f.shader.bind(b,d,f.textureID)}popAndRebind(){this.pop(),this.rebind()}clear(){}destroy(){}}const Jw=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Kw(a){let b="";for(let d=0;d<a;++d)d>0&&(b+=`
else `),d<a-1&&(b+=`if(test == ${d}.0){}`);return b}function Eq(a,b){const d=b.createShader(b.FRAGMENT_SHADER);for(;;){const f=Jw.replace(/%forloop%/gi,Kw(a));b.shaderSource(d,f),b.compileShader(d);if(!b.getShaderParameter(d,b.COMPILE_STATUS))a=a/2|0;else break}return a}class Bq{constructor(a){this.startActiveTexture=0,this.renderer=a,this.tempTextures=[],this.textureIndex=[]}init(){const a=this.renderer.gl;let b=Eq(a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),a);const d=ng();d===0||d>0&&d>b?Yk(b):d>0&&d<b&&(b=Math.max(8,d));const f=this.tempTextures;f.length&&f.forEach(l=>{a.deleteTexture(l)});const i=[];for(let l=0;l<b;l++){const q=a.createTexture();a.activeTexture(a.TEXTURE0+l),a.bindTexture(a.TEXTURE_2D,q),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),f[l]=q,i.push(l)}this.maxTextures=b,this.textureIndex=i,this.currentActiveTexture=1}update(){const a=sf.get();for(let b=0;b<a.length;b++){const d=a[b];d.binding||(d.binding=new rf(d))}sf.clear()}reset(){const a=this.renderer.gl,b=this.tempTextures;for(let d=0;d<b.length;d++)a.activeTexture(a.TEXTURE0+d),a.bindTexture(a.TEXTURE_2D,b[d]);this.currentActiveTexture=1,this.startActiveTexture++}bind(a,b=0){const d=this.renderer.gl,f=a.binding;f.setIndex(b),d.activeTexture(d.TEXTURE0+b),d.bindTexture(d.TEXTURE_2D,f.texture)}unbind(a=0){const b=this.renderer.gl;b.activeTexture(b.TEXTURE0+a),b.bindTexture(b.TEXTURE_2D,this.tempTextures[a]),a>0&&this.startActiveTexture++}request(a){const b=this.renderer.gl,d=a.binding,f=this.currentActiveTexture;return d.indexCounter>=this.startActiveTexture?!1:(d.indexCounter=this.startActiveTexture,f<this.maxTextures?(d.setIndex(f),b.activeTexture(b.TEXTURE0+f),b.bindTexture(b.TEXTURE_2D,d.texture),this.currentActiveTexture++):(this.renderer.flush(),this.startActiveTexture++,d.indexCounter=this.startActiveTexture,d.setIndex(1),b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,d.texture),this.currentActiveTexture=2),!0)}}class fq{constructor(){this.clearColor=[0,0,0,1],this.flushTotal=0,this.clearBeforeRender=!0,this.optimizeRedraw=!1,this.autoResize=!0,this.contextLost=!1,this.currentCamera=null,this.width=Jd(),this.height=Kd(),this.resolution=Ld(),this.setBackgroundColor(Rh());const a=document.createElement("canvas");a.addEventListener("webglcontextlost",b=>this.onContextLost(b),!1),a.addEventListener("webglcontextrestored",()=>this.onContextRestored(),!1),this.canvas=a,this.fbo=new wq(this),this.textures=new Bq(this),this.initContext(),vg.set(this),this.shaders=new Aq(this,yq)}initContext(){const a=this.canvas.getContext("webgl",_k());Hb.set(a),this.gl=a,a.disable(a.DEPTH_TEST),a.disable(a.CULL_FACE),this.resize(this.width,this.height,this.resolution),this.textures.init()}resize(a,b,d=1){this.width=a*d,this.height=b*d,this.resolution=d;const f=this.canvas;f.width=this.width,f.height=this.height,this.autoResize&&(f.style.width=(this.width/d).toString()+"px",f.style.height=(this.height/d).toString()+"px"),this.gl.viewport(0,0,this.width,this.height),this.projectionMatrix=zq(a,b)}onContextLost(a){a.preventDefault(),this.contextLost=!0}onContextRestored(){this.contextLost=!1,this.initContext()}setBackgroundColor(a){return xq(a,this.clearColor),this}reset(a=null,b=this.width,d=this.height){const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,a),f.viewport(0,0,b,d),f.enable(f.BLEND),f.blendFunc(f.ONE,f.ONE_MINUS_SRC_ALPHA),this.flushTotal=0,this.currentCamera=null,this.textures.update()}render(a){if(this.contextLost)return;this.reset();if(this.optimizeRedraw&&a.numDirtyFrames===0&&a.numDirtyCameras===0)return;const b=this.gl;if(this.clearBeforeRender){const f=this.clearColor;b.clearColor(f[0],f[1],f[2],f[3]),b.clear(b.COLOR_BUFFER_BIT)}const d=a.worldData;for(let f=0;f<d.length;f++){const{camera:i,renderList:l}=d[f];(!this.currentCamera||!sq(i.worldTransform,this.currentCamera.worldTransform))&&(this.flush(),this.currentCamera=i,this.shaders.rebind()),l.forEach(q=>{q.children.length?this.renderNode(q):q.node.renderGL(this)})}this.flush()}renderNode(a){a.node.renderGL(this),a.children.forEach(b=>{b.children.length>0?this.renderNode(b):b.node.renderGL(this)}),a.node.postRenderGL(this)}flush(){this.shaders.flush()}destroy(){vg.set(void 0)}}function Ok(){return()=>{Sh(fq)}}function Gb(a,b,...d){if(a.events.size===0||!a.events.has(b))return!1;const f=a.events.get(b);for(const i of f)i.callback.apply(i.context,d),i.once&&f.delete(i);return f.size===0&&a.events.delete(b),!0}function Pp(a,b){const d=Th(b);return d.appendChild(a),a}function Qp(a){const b=document.readyState;if(b==="complete"||b==="interactive"){a();return}const d=()=>{document.removeEventListener("deviceready",d,!0),document.removeEventListener("DOMContentLoaded",d,!0),window.removeEventListener("load",d,!0),a()};document.body?window.hasOwnProperty("cordova")?document.addEventListener("deviceready",d,!0):(document.addEventListener("DOMContentLoaded",d,!0),window.addEventListener("load",d,!0)):window.setTimeout(d,20)}class Uk{constructor(){this.events=new Map()}}class qg{constructor(a,b,d=!1){this.callback=a,this.context=b,this.once=d}}function lc(a,b,d,f=a,i=!1){if(typeof d!=="function")throw new TypeError("Listener not a function");const l=new qg(d,f,i),q=a.events.get(b);return q?q.add(l):a.events.set(b,new Set([l])),l}function ve(a,b,d,f=a){return lc(a,b,d,f,!0)}function Iq(){return{gameFrame:0,numTotalFrames:0,numDirtyFrames:0,numDirtyCameras:0,worldData:[]}}function Lq(a,b=0){a.gameFrame=b,a.numTotalFrames=0,a.numDirtyFrames=0,a.numDirtyCameras=0,a.worldData.length=0}let Mq;const hi={get:()=>Mq,set:a=>{Mq=a}};class Rp{constructor(){this.scenes=new Map(),this.sceneIndex=0,this.flush=!1,this.renderResult=Iq(),this.game=yb.get(),hi.set(this),ve(this.game,"boot",()=>this.boot())}boot(){Zk().forEach(a=>new a())}update(a,b){for(const d of this.scenes.values())Gb(d,"update",a,b)}render(a){const b=this.renderResult;Lq(b,a);for(const d of this.scenes.values())Gb(d,"render",b);return this.flush&&(b.numDirtyFrames++,this.flush=!1),b}}function wg(a,b){const d=document.createElement("canvas");return d.width=a,d.height=b,d.getContext("2d")}let Nq;const Tb={get:()=>Nq,set:a=>{Nq=a}};class Sp{constructor(){this.textures=new Map(),this.createDefaultTextures(),Tb.set(this)}createDefaultTextures(){this.add("__BLANK",new $b(wg(32,32).canvas));const a=wg(32,32);a.strokeStyle="#0f0",a.moveTo(0,0),a.lineTo(32,32),a.stroke(),a.strokeRect(.5,.5,31,31),this.add("__MISSING",new $b(a.canvas))}get(a){const b=this.textures;return b.has(a)?b.get(a):b.get("__MISSING")}has(a){return this.textures.has(a)}add(a,b){let d;const f=this.textures;return f.has(a)||(b instanceof $b?d=b:d=new $b(b),d.key=a,f.set(a,d)),d}}class Ip extends Uk{constructor(...a){super();this.VERSION="4.0.0-beta1",this.isBooted=!1,this.isPaused=!1,this.willUpdate=!0,this.willRender=!0,this.lastTick=0,this.elapsed=0,this.frame=0,yb.set(this),Qp(()=>this.boot(a))}boot(a){a.forEach(f=>f());const b=Sk();this.renderer=new b(),this.textureManager=new Sp(),this.sceneManager=new Rp();const d=Tk();d&&Pp(this.renderer.canvas,d),this.isBooted=!0,Rk(),Gb(this,"boot"),this.lastTick=performance.now(),this.step(this.lastTick)}pause(){this.isPaused=!0}resume(){this.isPaused=!1,this.lastTick=performance.now()}step(a){const b=a-this.lastTick;this.lastTick=a,this.elapsed+=b,this.isPaused||(this.willUpdate&&(this.sceneManager.update(b,a),Gb(this,"update",b,a)),this.willRender&&this.renderer.render(this.sceneManager.render(this.frame))),this.frame++,yb.setFrame(this.frame),yb.setElapsed(this.elapsed),requestAnimationFrame(d=>this.step(d))}destroy(){}}function Jq(a,b,d){return Object.prototype.hasOwnProperty.call(a,b)?a[b]:d}function Kq(a,b={}){const d=hi.get(),f=d.scenes.size,i=d.sceneIndex,l=f===0;typeof b==="string"?a.key=b:(b||!b&&l)&&(a.key=Jq(b,"key","scene"+i.toString())),d.scenes.has(a.key)?console.warn("Scene key already in use: "+a.key):(d.scenes.set(a.key,a),d.flush=!0,d.sceneIndex++)}class Ph{constructor(a){this.game=yb.get(),this.events=new Map(),Kq(this,a)}}function te(a){const b=[a],d=[];for(;b.length>0;){const f=b.shift();d.push(f);const i=f.numChildren;if(i>0)for(let l=i-1;l>=0;l--)b.unshift(f.children[l])}return d.shift(),d}function ld(a,b){return a.children.indexOf(b)}function Uh(a,b){const d=a.children;let f;if(b>=0&&b<d.length){const i=d.splice(b,1);i[0]&&(f=i[0],f.parent=null)}return f}function ue(a,b){const d=ld(a,b);return d>-1&&Uh(a,d),b}const dl="addedtoworld";const el="removedfromworld";function cl(a,...b){return b.forEach(d=>{d.world&&(Gb(d.world,el,d,d.world),Gb(d,el,d,d.world)),d.world=a,Gb(a,dl,d,a),Gb(d,dl,d,a)}),b}function se(a,...b){b.forEach(f=>{f.parent&&ue(f.parent,f),f.parent=a});const d=a.world;return d&&cl(d,...te(a)),b}function pe(a,b){return a.children.push(b),se(a,b),b.transform.updateWorld(),b}function $k(a,...b){return b.forEach(d=>{pe(a,d)}),b}const Ga={CLEAR:0,TRANSFORM:1,UPDATE:2,CHILD_CACHE:4,POST_RENDER:8,COLORS:16,BOUNDS:32,TEXTURE:64,FRAME:128,ALPHA:256,CHILD:512,DEFAULT:1+2+16+32,USER1:536870912,USER2:1073741824,USER3:2147483648,USER4:4294967296};function og(a,b=0,d){const f=a.children;d===void 0&&(d=f.length);const i=d-b;if(i>0&&i<=d){const l=f.splice(b,i);return l.forEach(q=>{q.parent=null}),l}else return[]}function al(a,b=0,d){const f=og(a,b,d);f.forEach(i=>{i.destroy()})}function pg(a,...b){return b.forEach(d=>{ue(a,d)}),b}function bl(a,b,d=0,f){const i=og(a,d,f);return se(b,...i),i.forEach(l=>{l.transform.updateWorld()}),i}class re{constructor(a=1,b=0,d=0,f=1,i=0,l=0){this.set(a,b,d,f,i,l)}set(a=1,b=0,d=0,f=1,i=0,l=0){return this.a=a,this.b=b,this.c=d,this.d=f,this.tx=i,this.ty=l,this}identity(){return this.set()}toArray(){return[this.a,this.b,this.c,this.d,this.tx,this.ty]}fromArray(a){return this.set(a[0],a[1],a[2],a[3],a[4],a[5])}}function ci(a,b,d){return a.width<=0||a.height<=0?!1:a.x<=b&&a.x+a.width>=b&&a.y<=d&&a.y+a.height>=d}class _b{constructor(a=0,b=0,d=0,f=0){this.set(a,b,d,f)}set(a=0,b=0,d=0,f=0){return this.x=a,this.y=b,this.width=d,this.height=f,this}contains(a,b){return ci(this,a,b)}set right(a){a<=this.x?this.width=0:this.width=a-this.x}get right(){return this.x+this.width}set bottom(a){a<=this.y?this.height=0:this.height=a-this.y}get bottom(){return this.y+this.height}}function uq(){}class kd{constructor(a,b=0,d=0,f=!1){this.compareValue=!1,this._x=b,this._y=d,this.callback=a,this.compareValue=f}set(a=0,b=0){return this._x=a,this._y=b,this.callback(this),this}destroy(){this.callback=uq}set x(a){(!this.compareValue||this.compareValue&&a!==this._x)&&(this._x=a,this.callback(this))}get x(){return this._x}set y(a){(!this.compareValue||this.compareValue&&a!==this._x)&&(this._y=a,this.callback(this))}get y(){return this._y}}function rq(a,b,d){const f=d-b;return b+((a-b)%f+f)%f}function Wp(a){return rq(a,-Math.PI,Math.PI)}class Xp{constructor(){this._rotation=0,this.type="Camera",this.dirtyRender=!0;const a=yb.get();this.renderer=a.renderer,this.matrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1]),this.bounds=new _b(),this.worldTransform=new re(),this.position=new kd(()=>this.updateTransform(),0,0),this.scale=new kd(()=>this.updateTransform(),1,1),this.origin=new kd(()=>this.updateTransform(),.5,.5),this.reset()}updateTransform(){const a=this.matrix,b=this.position.x,d=this.position.y,f=this.scale.x,i=this.scale.y,l=-b+this.width*this.origin.x,q=-d+this.height*this.origin.y,u=Math.sin(this.rotation),v=Math.cos(this.rotation),A=u+u,E=u*A,H=v*A,O=(1-E)*f,I=H*f,Q=-H*i,W=(1-E)*i;a[0]=O,a[1]=I,a[4]=Q,a[5]=W,a[12]=b+l-(O*l+Q*q),a[13]=d+q-(I*l+W*q),this.worldTransform.set(v*f,u*f,-u*i,v*i,-b,-d);const _=this.width*(1/f),fa=this.height*(1/i);this.bounds.set(l-_/2,q-fa/2,_,fa),this.dirtyRender=!0}reset(){const a=this.renderer.width,b=this.renderer.height;this.width=a,this.height=b,this.bounds.set(0,0,a,b)}set rotation(a){a!==this._rotation&&(this._rotation=Wp(a),this.updateTransform())}get rotation(){return this._rotation}destroy(){this.position.destroy(),this.scale.destroy(),this.origin.destroy(),this.world=null,this.worldTransform=null,this.renderer=null,this.matrix=null,this.bounds=null}}class Yp{constructor(){this.type="StaticCamera",this.dirtyRender=!0;const a=yb.get();this.renderer=a.renderer,this.matrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.bounds=new _b(),this.worldTransform=new re(),this.reset()}reset(){const a=this.renderer.width,b=this.renderer.height;this.width=a,this.height=b,this.bounds.set(0,0,a,b)}destroy(){this.world=null,this.worldTransform=null,this.renderer=null,this.matrix=null,this.bounds=null}}const Vh="destroy";const gq="postupdate";const hq="update";function md(a,b,d,f,i){const l=a.events,q=l.get(b);if(!d)l.delete(b);else if(d instanceof qg)q.delete(d);else{const u=!f,v=i!==void 0;for(const A of q)A.callback===d&&(u&&A.context===f)&&(v&&A.once===i)&&q.delete(A)}return q.size===0&&l.delete(b),a}function qf(a){const{a:b,b:d,c:f,d:i,tx:l,ty:q}=a.world,{x:u,y:v,right:A,bottom:E}=a.extent,H=u*b+v*f+l,O=u*d+v*i+q,I=u*b+E*f+l,Q=u*d+E*i+q,W=A*b+E*f+l,_=A*d+E*i+q,fa=A*b+v*f+l,ha=A*d+v*i+q;return{x0:H,y0:O,x1:I,y1:Q,x2:W,y2:_,x3:fa,y3:ha}}class Wh{constructor(a){this.fixed=!1,this.includeChildren=!0,this.visibleOnly=!0,this.entity=a,this.area=new _b()}set(a,b,d,f){this.area.set(a,b,d,f)}get(){return this.entity.isDirty(Ga.BOUNDS)&&!this.fixed&&this.update(),this.area}updateLocal(){const{x0:a,y0:b,x1:d,y1:f,x2:i,y2:l,x3:q,y3:u}=qf(this.entity.transform),v=Math.min(a,d,i,q),A=Math.min(b,f,l,u),E=Math.max(a,d,i,q),H=Math.max(b,f,l,u);return this.area.set(v,A,E-v,H-A)}update(){const a=this.updateLocal();this.entity.clearDirty(Ga.BOUNDS);if(!this.includeChildren||!this.entity.numChildren)return a;const b=this.visibleOnly,d=this.entity.children;let f=a.x,i=a.y,l=a.right,q=a.bottom;for(let u=0;u<d.length;u++){const v=d[u];if(!v||b&&!v.visible)continue;const A=v.bounds.get();A.x<f&&(f=A.x),A.y<i&&(i=A.y),A.right>l&&(l=A.right),A.bottom>q&&(q=A.bottom)}return a.set(f,i,l-f,q-i)}destroy(){this.entity=null,this.area=null}}class Xh{constructor(a){this.enabled=!1,this.enabledChildren=!0,this.entity=a}destroy(){this.entity=null,this.hitArea=null}}class Hc{constructor(a=0,b=0){this.set(a,b)}set(a=0,b=0){return this.x=a,this.y=b,this}getArray(){return[this.x,this.y]}fromArray(a){return this.set(a[0],a[1])}toString(){return`[x=${this.x}, y=${this.y}]`}}function Zh(a){const b=a.local,d=a.position.x,f=a.position.y,i=a.rotation,l=a.scale.x,q=a.scale.y,u=a.skew.x,v=a.skew.y;b.set(Math.cos(i+v)*l,Math.sin(i+v)*l,-Math.sin(i-u)*q,Math.cos(i-u)*q,d,f)}function gl(a,b){return b.set(a.a,a.b,a.c,a.d,a.tx,a.ty)}function _h(a){const b=a.parent,d=a.transform,f=d.local,i=d.world;if(!b)gl(f,i);else if(d.passthru)gl(b.transform.world,i);else{const{a:l,b:q,c:u,d:v,tx:A,ty:E}=f,{a:H,b:O,c:I,d:Q,tx:W,ty:_}=b.transform.world;i.set(l*H+q*I,l*O+q*Q,u*H+v*I,u*O+v*Q,A*H+E*I+W,A*O+E*Q+_)}}class Yh{constructor(a,b=0,d=0){this.passthru=!1,this._rotation=0,this.entity=a,this.local=new re(),this.world=new re(),this.position=new kd(()=>this.update(),b,d),this.scale=new kd(()=>this.update(),1,1,!0),this.skew=new kd(()=>this.update(),0,0,!0),this.origin=new kd(()=>this.updateExtent(),Wk,Xk),this.extent=new _b()}update(){this.updateLocal(),this.updateWorld()}updateLocal(){this.entity.setDirty(Ga.TRANSFORM,Ga.BOUNDS),Zh(this)}updateWorld(){const a=this.entity;a.setDirty(Ga.TRANSFORM,Ga.BOUNDS),_h(a),a.numChildren&&this.updateChildren()}updateChildren(){const a=this.entity.children;for(let b=0;b<a.length;b++){const d=a[b];d.transform.updateWorld()}}globalToLocal(a,b,d=new Hc()){const{a:f,b:i,c:l,d:q,tx:u,ty:v}=this.world,A=1/(f*q+l*-i);return d.x=q*A*a+-l*A*b+(v*l-u*q)*A,d.y=f*A*b+-i*A*a+(-v*f+u*i)*A,d}localToGlobal(a,b,d=new Hc()){const{a:f,b:i,c:l,d:q,tx:u,ty:v}=this.world;return d.x=f*a+l*b+u,d.y=i*a+q*b+v,d}setExtent(a,b,d,f){this.extent.set(a,b,d,f),this.entity.setDirty(Ga.TRANSFORM,Ga.BOUNDS)}updateExtent(a,b){const d=this.extent,f=this.entity;a!==void 0&&(d.width=a),b!==void 0&&(d.height=b),d.x=-this.origin.x*d.width,d.y=-this.origin.y*d.height,f.setDirty(Ga.TRANSFORM,Ga.BOUNDS)}set rotation(a){a!==this._rotation&&(this._rotation=a,this.update())}get rotation(){return this._rotation}destroy(){this.position.destroy(),this.scale.destroy(),this.skew.destroy(),this.origin.destroy(),this.entity=null,this.local=null,this.world=null,this.position=null,this.scale=null,this.skew=null,this.origin=null,this.extent=null}}class Gc{constructor(a=0,b=0){this.type="GameObject",this.name="",this.willUpdate=!0,this.willUpdateChildren=!0,this.willRender=!0,this.willRenderChildren=!0,this.willCacheChildren=!1,this.dirty=0,this.dirtyFrame=0,this.visible=!0,this.children=[],this.events=new Map(),this.transform=new Yh(this,a,b),this.bounds=new Wh(this),this.input=new Xh(this),this.dirty=Ga.DEFAULT,this.transform.update()}isRenderable(){return this.visible&&this.willRender}isDirty(a){return(this.dirty&a)!==0}clearDirty(a){return this.isDirty(a)&&(this.dirty^=a),this}setDirty(a,b){return this.isDirty(a)||(this.dirty^=a,this.dirtyFrame=yb.getFrame()),this.isDirty(b)||(this.dirty^=b),this}update(a,b){if(this.willUpdateChildren){const d=this.children;for(let f=0;f<d.length;f++){const i=d[f];i&&i.willUpdate&&i.update(a,b)}}this.postUpdate(a,b)}postUpdate(a,b){}renderGL(a){}renderCanvas(a){}postRenderGL(a){}postRenderCanvas(a){}get numChildren(){return this.children.length}destroy(a){a?bl(this,a):al(this),Gb(this,Vh,this),this.transform.destroy(),this.bounds.destroy(),this.input.destroy(),this.events.clear(),this.world=null,this.parent=null,this.children=null}}const di="worldrender";const ei="worldshutdown";var Iw=Object.freeze({__proto__:null,WorldRenderEvent:di,WorldShutdownEvent:ei});function ii(a,b){b.numRendered++,b.numRenderable++,a.node.dirtyFrame>=b.gameFrame&&b.dirtyFrame++,a.children.forEach(d=>{d.children.length>0&&ii(d,b)})}function pl(a){if(a.node.isDirty(Ga.CHILD_CACHE))return!0;const b=[a];for(;b.length>0;){const d=b.pop();if(d.node.isDirty(Ga.TRANSFORM))return!0;const f=d.children.length;if(f>0)for(let i=0;i<f;i++)b.push(d.children[i])}return b.length=0,!1}function ol(a,b){a.forEach(d=>{b||pl(d)?d.node.setDirty(Ga.CHILD_CACHE):d.children.length=0})}function ji(a,b,d=[]){for(let f=0;f<b.numChildren;f++){const i=b.children[f];if(i.isRenderable()){const l=[],q={node:i,children:l};d.push(q),i.willRenderChildren&&i.numChildren>0&&(i.willCacheChildren&&a.push(q),ji(a,i,l))}}return d}function ml(a){const b=[],d=[],f=ji(b,a,d),i=a.renderData;b.length>0&&ol(b,a.camera.dirtyRender),f.forEach(l=>{l.children.length?ii(l,i):(i.numRendered++,i.numRenderable++,l.node.dirtyFrame>=i.gameFrame&&i.dirtyFrame++)}),i.renderList=f,a.forceRefresh&&(i.dirtyFrame++,a.forceRefresh=!1)}function nl(a,b){a.numDirtyFrames+=b.dirtyFrame,a.numTotalFrames+=b.numRendered,b.camera.dirtyRender&&a.numDirtyCameras++,a.worldData.push(b)}function xg(a,b){a.gameFrame=b,a.dirtyFrame=0,a.numRendered=0,a.numRenderable=0,a.renderList.length=0}class ze extends Gc{constructor(a){super();this.forceRefresh=!1,this.type="BaseWorld",this.scene=a,this.world=this,this.events=new Map(),this._updateListener=lc(a,"update",(b,d)=>this.update(b,d)),this._renderListener=lc(a,"render",b=>this.render(b)),this._shutdownListener=lc(a,"shutdown",()=>this.shutdown()),ve(a,"destroy",()=>this.destroy())}update(a,b){if(!this.willUpdate)return;Gb(this,hq,a,b,this),super.update(a,b)}postUpdate(a,b){Gb(this,gq,a,b,this)}render(a){const b=this.renderData;xg(b,a.gameFrame);if(!this.willRender||!this.visible)return;ml(this),Gb(this,di,b,this),nl(a,b),this.camera&&(this.camera.dirtyRender=!1)}shutdown(){const a=this.scene;md(a,"update",this._updateListener),md(a,"render",this._renderListener),md(a,"shutdown",this._shutdownListener),pg(this),Gb(this,ei,this),xg(this.renderData,0),this.camera&&this.camera.reset()}destroy(a){super.destroy(a),Gb(this,Vh,this),xg(this.renderData,0),this.camera&&this.camera.destroy(),this.events.clear(),this.camera=null,this.renderData=null,this.events=null}}function yg(a){return{camera:a,gameFrame:0,dirtyFrame:0,numRendered:0,numRenderable:0,renderList:[]}}class Pk extends ze{constructor(a){super(a);this.type="StaticWorld",this.camera=new Yp(),this.renderData=yg(this.camera)}}class Mw extends ze{constructor(a){super(a);this.enableCameraCull=!0,this.type="World",this.camera=new Xp(),this.renderData=yg(this.camera)}}function jq(a,b){const d=a.texture,f=b.shaders.current,i=f.buffer,l=d.binding;f.count===i.batchSize&&b.flush();const q=a.vertexData;b.textures.request(d);const u=l.index;q[4]=u,q[10]=u,q[16]=u,q[22]=u;const v=f.count*i.quadElementSize;i.vertexViewF32.set(q,v);const A=a.vertexColor,E=i.vertexViewU32;E[v+5]=A[0],E[v+11]=A[2],E[v+17]=A[3],E[v+23]=A[1],f.count++}var Dw=Object.freeze({__proto__:null,BoundsComponent:Wh,InputComponent:Xh,GetVertices:qf,TransformComponent:Yh,UpdateLocalTransform:Zh,UpdateWorldTransform:_h});class we extends Gc{constructor(a=0,b=0){super(a,b);this._alpha=1,this.type="Container"}setSize(a,b=a){return this.transform.updateExtent(a,b),this}setPosition(a,b){return this.transform.position.set(a,b),this}setOrigin(a,b=a){return this.transform.origin.set(a,b),this}setSkew(a,b=a){return this.transform.skew.set(a,b),this}setScale(a,b=a){return this.transform.scale.set(a,b),this}setRotation(a){return this.transform.rotation=a,this}set width(a){this.transform.updateExtent(a)}get width(){return this.transform.extent.width}set height(a){this.transform.updateExtent(void 0,a)}get height(){return this.transform.extent.height}set x(a){this.transform.position.x=a}get x(){return this.transform.position.x}set y(a){this.transform.position.y=a}get y(){return this.transform.position.y}set originX(a){this.transform.origin.x=a}get originX(){return this.transform.origin.x}set originY(a){this.transform.origin.y=a}get originY(){return this.transform.origin.y}set skewX(a){this.transform.skew.x=a}get skewX(){return this.transform.skew.x}set skewY(a){this.transform.skew.y=a}get skewY(){return this.transform.skew.y}set scaleX(a){this.transform.scale.x=a}get scaleX(){return this.transform.scale.x}set scaleY(a){this.transform.scale.y=a}get scaleY(){return this.transform.scale.y}set rotation(a){this.transform.rotation=a}get rotation(){return this.transform.rotation}get alpha(){return this._alpha}set alpha(a){a!==this._alpha&&(this._alpha=a,this.setDirty(Ga.TRANSFORM))}}function kq(a,b){const d=a.frame;if(!d)return;const f=b.ctx,i=a.transform,{a:l,b:q,c:u,d:v,tx:A,ty:E}=i.world,{x:H,y:O}=i.extent;f.save(),f.setTransform(l,q,u,v,A,E),f.globalAlpha=a.alpha,f.drawImage(d.texture.image,d.x,d.y,d.width,d.height,H,O,d.width,d.height),f.restore()}function ye(a,b){const d=(b*255|0)&255;return(d<<24|a)>>>0}function lq(a){const b=a.vertexAlpha,d=a.vertexTint,f=a.vertexColor;return f[0]=ye(d[0],b[0]),f[1]=ye(d[1],b[1]),f[2]=ye(d[2],b[2]),f[3]=ye(d[3],b[3]),a}function bi(a,b,...d){const f=a.getFrame(b),{u0:i,u1:l,v0:q,v1:u,pivot:v}=f;return d.forEach(A=>{if(!A||f===A.frame)return;A.frame=f,v&&A.setOrigin(v.x,v.y),A.frame.setExtent(A),A.hasTexture=!0;const E=A.vertexData;E[2]=i,E[3]=q,E[8]=i,E[9]=u,E[14]=l,E[15]=u,E[20]=l,E[21]=q}),d}function iq(a,b,...d){if(!a)d.forEach(f=>{f.texture=null,f.frame=null,f.hasTexture=!1});else{let f;a instanceof $b?f=a:f=Tb.get().get(a),f?(d.forEach(i=>{i.texture=f}),bi(f,b,...d)):console.warn(`Invalid Texture key: ${a}`)}return d}function mq(a){const b=a.vertexData,{x0:d,y0:f,x1:i,y1:l,x2:q,y2:u,x3:v,y3:A}=qf(a.transform);return b[0]=d,b[1]=f,b[6]=i,b[7]=l,b[12]=q,b[13]=u,b[18]=v,b[19]=A,a}class nd extends we{constructor(a,b,d,f){super(a,b);this.hasTexture=!1,this._tint=16777215,this.type="Sprite",this.vertexData=new Float32Array(24).fill(0),this.vertexColor=new Uint32Array(4).fill(4294967295),this.vertexAlpha=new Float32Array(4).fill(1),this.vertexTint=new Uint32Array(4).fill(16777215),this.setTexture(d,f)}setTexture(a,b){return iq(a,b,this),this}setFrame(a){return bi(this.texture,a,this),this}isRenderable(){return this.visible&&this.willRender&&this.hasTexture&&this.alpha>0}preRender(){this.isDirty(Ga.COLORS)&&(lq(this),this.clearDirty(Ga.COLORS)),this.isDirty(Ga.TRANSFORM)&&(mq(this),this.clearDirty(Ga.TRANSFORM))}renderGL(a){this.preRender(),jq(this,a)}renderCanvas(a){this.preRender(),kq(this,a)}get alpha(){return this._alpha}set alpha(a){if(a!==this._alpha){this._alpha=a;const b=this.vertexAlpha;b[0]=a,b[1]=a,b[2]=a,b[3]=a,this.setDirty(Ga.ALPHA)}}get tint(){return this._tint}set tint(a){if(a!==this._tint){this._tint=a;const b=this.vertexTint;b[0]=a,b[1]=a,b[2]=a,b[3]=a,this.setDirty(Ga.COLORS)}}destroy(a){super.destroy(a),this.texture=null,this.frame=null,this.hasTexture=!1,this.vertexData=null,this.vertexColor=null,this.vertexAlpha=null,this.vertexTint=null}}class Bw extends nd{constructor(a,b,d,f){super(a,b,d,f);this.type="AnimatedSprite",this.anims=new Map(),this.animData={currentAnim:"",currentFrames:[],frameIndex:0,animSpeed:0,nextFrameTime:0,repeatCount:0,isPlaying:!1,yoyo:!1,pendingStart:!1,playingForward:!0,delay:0,repeatDelay:0,onStart:null,onRepeat:null,onComplete:null}}stop(){const a=this.animData;a.isPlaying=!1,a.currentAnim="",a.onComplete&&a.onComplete(this,a.currentAnim)}nextFrame(){const a=this.animData;a.frameIndex++;if(a.frameIndex===a.currentFrames.length)if(a.yoyo)a.frameIndex--,a.playingForward=!1;else if(a.repeatCount===-1||a.repeatCount>0)a.frameIndex=0,a.repeatCount!==-1&&a.repeatCount--,a.onRepeat&&a.onRepeat(this,a.currentAnim),a.nextFrameTime+=a.repeatDelay;else return a.frameIndex--,this.stop();this.setFrame(a.currentFrames[a.frameIndex]),a.nextFrameTime+=a.animSpeed}prevFrame(){const a=this.animData;a.frameIndex--;if(a.frameIndex===-1)if(a.repeatCount===-1||a.repeatCount>0)a.frameIndex=0,a.playingForward=!0,a.repeatCount!==-1&&a.repeatCount--,a.onRepeat&&a.onRepeat(this,a.currentAnim),a.nextFrameTime+=a.repeatDelay;else return a.frameIndex=0,this.stop();this.setFrame(a.currentFrames[a.frameIndex]),a.nextFrameTime+=a.animSpeed}update(a,b){super.update(a,b);const d=this.animData;if(!d.isPlaying)return;d.nextFrameTime-=a*1e3,d.nextFrameTime=Math.max(d.nextFrameTime,0),d.nextFrameTime===0&&(d.pendingStart?(d.onStart&&d.onStart(this,d.currentAnim),d.pendingStart=!1,d.nextFrameTime=d.animSpeed):d.playingForward?this.nextFrame():this.prevFrame())}get isPlaying(){return this.animData.isPlaying}get isPlayingForward(){return this.animData.isPlaying&&this.animData.playingForward}get currentAnimation(){return this.animData.currentAnim}destroy(a){super.destroy(a),this.anims.clear(),this.animData=null}}function fl(a,b,d,f,i,l,q=0,u=1,v=1,A=0,E=0){const H=Math.cos(q+E)*u,O=Math.sin(q+E)*u,I=-Math.sin(q-A)*v,Q=Math.cos(q-A)*v,W=a*H+d*I+i,_=a*O+d*Q+l,fa=a*H+f*I+i,ha=a*O+f*Q+l,oa=b*H+f*I+i,ia=b*O+f*Q+l,ra=b*H+d*I+i,ua=b*O+d*Q+l;return{x0:W,y0:_,x1:fa,y1:ha,x2:oa,y2:ia,x3:ra,y3:ua}}function $h(a,b,d,f,i,l,q,u,v,A=0,E=4294967295){const H=a.shaders.current,O=H.buffer,I=O.vertexViewF32,Q=O.vertexViewU32,W=H.count*O.quadElementSize;I[W+0]=b,I[W+1]=d,I[W+2]=l,I[W+3]=v,I[W+4]=A,Q[W+5]=E,I[W+6]=b,I[W+7]=d+i,I[W+8]=l,I[W+9]=q,I[W+10]=A,Q[W+11]=E,I[W+12]=b+f,I[W+13]=d+i,I[W+14]=u,I[W+15]=q,I[W+16]=A,Q[W+17]=E,I[W+18]=b+f,I[W+19]=d,I[W+20]=u,I[W+21]=v,I[W+22]=A,Q[W+23]=E,H.count++}function rg(a,b,d,f,i,l,q,u,v,A=0,E=4294967295){a.shaders.setDefault(A),$h(a,b,d,f,i,l,q,u,v,A,E),a.shaders.popAndRebind()}class sg extends Gc{constructor(){super();this.type="Layer",this.transform.passthru=!0,this.willRender=!1}}class hl extends sg{constructor(){super();this.type="RenderLayer",this.willRender=!0,this.willRenderChildren=!0,this.willCacheChildren=!0,this.setDirty(Ga.CHILD_CACHE);const a=Jd(),b=Kd(),d=Ld(),f=new $b(null,a*d,b*d);f.binding=new rf(f),f.binding.framebuffer=ai(f.binding.texture),this.texture=f,this.framebuffer=f.binding.framebuffer}renderGL(a){this.numChildren>0&&(a.flush(),this.isDirty(Ga.CHILD_CACHE)?(a.fbo.add(this.framebuffer,!0),this.clearDirty(Ga.CHILD_CACHE)):(a.fbo.add(this.framebuffer,!1),this.postRenderGL(a)))}postRenderGL(a){const b=this.texture;a.flush(),a.fbo.pop();const{u0:d,v0:f,u1:i,v1:l}=b.firstFrame;a.textures.bind(b),rg(a,0,0,b.width,b.height,d,f,i,l),a.textures.unbind(),this.clearDirty(Ga.TRANSFORM)}}class Cw extends hl{constructor(){super();this.shaders=[],this.type="EffectLayer"}postRenderGL(a){const b=this.shaders,d=this.texture;a.flush(),a.fbo.pop();if(b.length===0){const{u0:f,v0:i,u1:l,v1:q}=d.firstFrame;a.textures.bind(d),rg(a,0,0,d.width,d.height,f,i,l,q),a.textures.unbind()}else{let f=d;for(let v=0;v<b.length;v++){const A=b[v],{u0:E,v0:H,u1:O,v1:I}=f.firstFrame;a.shaders.set(A,0)&&(A.renderToFBO=!0,a.textures.bind(f),$h(a,0,0,f.width,f.height,E,H,O,I),a.shaders.pop(),a.textures.unbind(),f=A.texture)}const{u0:i,v0:l,u1:q,v1:u}=f.firstFrame;a.textures.bind(f),rg(a,0,0,f.width,f.height,i,l,q,u),a.textures.unbind()}this.clearDirty(Ga.TRANSFORM)}}function nq(a,b){const d=a.texture,f=b.shaders.current,i=f.buffer;b.flush(),b.textures.request(d),a.updateTextureIndex();const l=b.gl;f.bindBuffers(a.indexBuffer,a.vertexBuffer),l.bufferData(l.ARRAY_BUFFER,a.data,l.STATIC_DRAW),l.drawElements(l.TRIANGLES,a.count*i.quadIndexSize,l.UNSIGNED_SHORT,0),f.prevCount=a.count,b.flushTotal++,f.bindBuffers(i.indexBuffer,i.vertexBuffer)}function oq(a,b,d){return Math.max(b,Math.min(d,a))}class Ew extends sg{constructor(a,b){super();this.glTextureIndex=0,this.hasTexture=!1,this.type="SpriteBatch",this.willRender=!0,this.setTexture(b),this.setMaxSize(a)}resetBuffers(){let a=[];for(let d=0;d<this.maxSize*4;d+=4)a.push(d+0,d+1,d+2,d+2,d+3,d+0);this.data=new ArrayBuffer(this.maxSize*96),this.index=new Uint16Array(a),this.vertexViewF32=new Float32Array(this.data),this.vertexViewU32=new Uint32Array(this.data);const b=Hb.get();b&&(xe(this.vertexBuffer),xe(this.indexBuffer),this.vertexBuffer=b.createBuffer(),this.indexBuffer=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer),b.bufferData(b.ARRAY_BUFFER,this.data,b.STATIC_DRAW),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.index,b.STATIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,null)),a=[],this.count=0}setMaxSize(a){return this.maxSize=oq(a,0,65535),this.resetBuffers(),this}setTexture(a){let b;return a instanceof $b?b=a:b=Tb.get().get(a),b?(this.texture=b,this.hasTexture=!0,this.glTextureIndex=-1):console.warn(`Invalid Texture key: ${a}`),this}isRenderable(){return this.visible&&this.willRender&&this.hasTexture&&this.count>0}clear(){return this.count=0,this}addToBatch(a,b,d,f,i,l,q,u,v,A){if(this.count>=this.maxSize)return console.warn("SpriteBatch full"),this;const{u0:E,u1:H,v0:O,v1:I}=a,Q=this.vertexViewF32,W=this.vertexViewU32,_=this.count*24,fa=this.texture.binding?this.texture.binding.index:0;return Q[_+0]=d,Q[_+1]=f,Q[_+2]=E,Q[_+3]=O,Q[_+4]=fa,W[_+5]=b,Q[_+6]=i,Q[_+7]=l,Q[_+8]=E,Q[_+9]=I,Q[_+10]=fa,W[_+11]=b,Q[_+12]=q,Q[_+13]=u,Q[_+14]=H,Q[_+15]=I,Q[_+16]=fa,W[_+17]=b,Q[_+18]=v,Q[_+19]=A,Q[_+20]=H,Q[_+21]=O,Q[_+22]=fa,W[_+23]=b,this.setDirty(Ga.TRANSFORM),this.count++,this}add(a){const{frame:b=null,x:d=0,y:f=0,rotation:i=0,scaleX:l=1,scaleY:q=1,skewX:u=0,skewY:v=0,originX:A=0,originY:E=0,alpha:H=1,tint:O=16777215}=a,I=this.texture.getFrame(b),{left:Q,right:W,top:_,bottom:fa}=I.getExtent(A,E),{x0:ha,y0:oa,x1:ia,y1:ra,x2:ua,y2:la,x3:N,y3:R}=fl(Q,W,_,fa,d,f,i,l,q,u,v),x=ye(O,H);return this.addToBatch(I,x,ha,oa,ia,ra,ua,la,N,R)}addXY(a,b,d){const f=this.texture.getFrame(d),{left:i,right:l,top:q,bottom:u}=f.getExtent(0,0),{x0:v,y0:A,x1:E,y1:H,x2:O,y2:I,x3:Q,y3:W}=fl(i,l,q,u,a,b);return this.addToBatch(f,4294967295,v,A,E,H,O,I,Q,W)}updateTextureIndex(){const a=this.texture.binding.index;if(a===this.glTextureIndex)return;const b=this.vertexViewF32;this.glTextureIndex=a;for(let d=0;d<this.count;d++)b[d*24+4]=a,b[d*24+10]=a,b[d*24+16]=a,b[d*24+22]=a}renderGL(a){nq(this,a)}destroy(){super.destroy(),xe(this.vertexBuffer),xe(this.indexBuffer),this.data=null,this.vertexViewF32=null,this.vertexViewU32=null,this.index=null,this.texture=null,this.hasTexture=!1}}function Md(a=32,b=32){const d=wg(a,b);return new $b(d.canvas)}class Qh extends nd{constructor(a,b,d="",f,i){super(a,b,Md());this.splitRegExp=/(?:\r\n|\r|\n)/,this.padding={left:0,right:0,top:0,bottom:0},this.verticalAlign="ascent",this.lineSpacing=0,this.font="16px monospace",this.fillStyle="#fff",this.strokeStyle="",this.backgroundStyle="",this.cornerRadius=0,this.textAlign="left",this.textBaseline="alphabetic",this.lineWidth=0,this.lineDash=[],this.antialias=!1,this.type="Text";const l=yb.get();this.resolution=l.renderer.resolution,this.canvas=this.texture.image,this.context=this.canvas.getContext("2d"),f&&(this.font=f),i&&(this.fillStyle=i),this.setText(d)}syncContext(a,b){this.preRenderCallback&&this.preRenderCallback(a,b),b.font=this.font,b.textBaseline=this.textBaseline,b.textAlign=this.textAlign,b.fillStyle=this.fillStyle,b.strokeStyle=this.strokeStyle,b.lineWidth=this.lineWidth,b.lineCap="round",b.lineJoin="round",b.setLineDash(this.lineDash),b.imageSmoothingEnabled=this.antialias}updateText(){const a=this.canvas,b=this.context,d=this.resolution,f=this._text.split(this.splitRegExp),i=this.padding,l=this.fillStyle,q=this.strokeStyle,u=this.lineWidth,v=this.lineSpacing,A=u>0?u/2:0;b.clearRect(0,0,a.width,a.height),this.syncContext(a,b),b.textAlign="start";let E=0,H=0,O=0;const I=[],Q=this.verticalAlign==="ascent",W=b.measureText("|Mq"),_=Math.ceil(Math.abs(W.actualBoundingBoxAscent)+Math.abs(W.actualBoundingBoxDescent))+u;for(let x=0;x<f.length;x++){const G=b.measureText(f[x]),F=G.actualBoundingBoxLeft,J=G.actualBoundingBoxRight;let U=G.actualBoundingBoxAscent,K=G.actualBoundingBoxDescent;(!U&&!K||f[x]==="")&&(U=_,K=0);const ca=Math.ceil(Math.abs(F)+Math.abs(J))+u,ba=Math.ceil(Math.abs(U)+Math.abs(K))+u;Q?(O+=U+A,x>0&&(O+=v+A),H=O+K+A):(O=H+(ba-K-A),H+=ba,x<f.length-1&&(H+=v)),E=Math.max(E,ca),I.push({lineWidth:ca,lineHeight:ba,ascent:U,descent:K,left:F,right:J,y:O})}E+=i.left+i.right,H+=i.top+i.bottom;const fa=this.fixedWidth?this.fixedWidth:E,ha=this.fixedHeight?this.fixedHeight:H,oa=Math.ceil(fa*d),ia=Math.ceil(ha*d);(a.width!==oa||a.height!==ia)&&(a.width=oa,a.height=ia,this.texture.setSize(fa,ha),this.setSize(fa,ha)),b.save(),b.scale(d,d),this.syncContext(a,b);const ra=this.backgroundStyle;if(ra){b.save(),b.fillStyle=ra,b.strokeStyle=ra;const x=this.cornerRadius,G=x>0?x/2:0;x&&(b.lineWidth=x,b.strokeRect(G,G,fa-x,ha-x)),b.fillRect(G,G,fa-x,ha-x),b.restore()}const ua=this.textAlign,la=ua==="center",N=ua==="right"||ua==="end",R=(ha-H)/2+i.top;for(let x=0;x<f.length;x++){const G=f[x],F=I[x];let J=i.left+F.left+A;const U=R+F.y;la?J=fa/2:N&&(J=fa-A),q&&b.strokeText(G,J,U),l&&b.fillText(G,J,U)}return b.restore(),this.texture.binding&&this.texture.binding.update(),this.setDirty(Ga.TEXTURE),this}get text(){return this._text}set text(a){this.setText(a)}setText(a=""){return Array.isArray(a)&&(a=a.join(`
`)),a!==this._text&&(this._text=a.toString(),this.updateText()),this}destroy(a){this.texture.destroy(),this.fillStyle=null,this.strokeStyle=null,this.backgroundStyle=null,this.canvas=null,this.context=null,super.destroy(a)}}var Un;(function(a){a[a.IDLE=0]="IDLE",a[a.UPDATING=1]="UPDATING"})(Un||(Un={}));function jj(a,b,d){const f=Math.ceil(b*a.resolution),i=Math.ceil(d*a.resolution),l=a.canvas;if(l.width===f&&l.height===i){kj(a);return}l.width=f,l.height=i,a.texture.setSize(b,d),a.setSize(b,d),a.updateTexture()}function kj(a){a.context.clearRect(0,0,a.canvas.width,a.canvas.height),a.updateTexture()}function cn(a,b="#fff"){let d=a.context;d.fillStyle=b,d.fillRect(0,0,a.canvas.width,a.canvas.height),a.updateTexture()}function lj(a,b,d){const f=new Image();f.onload=function(){const i=a.resolution,l=f.width/i,q=f.height/i;jj(a,l,q),a.context.drawImage(f,0,0),a.updateTexture(),d&&d(),f.onload=null,f.src="",f.remove()},f.src=b}function dn(a,b){return new Promise(function(d,f){lj(a,b,d)})}function en(a,b,d){return a.canvas.toDataURL(b,d)}function fn(a,b,d,f=[0,0,0,0]){const i=a.context.getImageData(b,d,1,1).data;return f[0]=i[0],f[1]=i[1],f[2]=i[2],f[3]=i[3],f}function gn(a,b,d,f,i,l,q){q===void 0&&(q=f!==0||i!==0||l!==0?255:0);const u=a.context.createImageData(1,1);u.data[0]=f,u.data[1]=i,u.data[2]=l,u.data[3]=q,a.context.putImageData(u,b,d),a.updateTexture()}class yc extends nd{constructor(a=0,b=0,d=32,f=32){super(a,b,Md());this.type="rexCanvas";const i=yb.get();this.resolution=i.renderer.resolution,this.canvas=this.texture.image,this.context=this.canvas.getContext("2d"),this.resize(d,f)}updateTexture(){return this.texture.binding&&this.texture.binding.update(),this.setDirty(Ga.TEXTURE),this}destroy(a){this.texture.destroy(),this.canvas=null,this.context=null,super.destroy(a)}resize(a,b){return jj(this,a,b),this}clear(){return kj(this),this}}function Yd(a,b,d,f=1){let i;if(typeof a==="string"){let u=Tb.get();u.has(a)||u.add(a,Md()),i=u.get(a)}else i=a;let l=i.image,q=l.getContext("2d");return d?b.call(d,l,q):b(l,q),i.setSize(l.width/f,l.height/f),i.binding&&i.binding.update(),i}var hh;(function(a){a[a.left=1]="left",a[a.right=2]="right",a[a.both=3]="both"})(hh||(hh={}));function cw(a,b=0,d=" ",f=1){a=a.toString();let i=0;if(b+1>=a.length)switch(f){case 1:a=new Array(b+1-a.length).join(d)+a;break;case 3:i=b-a.length;let l=Math.ceil(i/2),q=i-l;a=new Array(q+1).join(d)+a+new Array(l+1).join(d);break;default:a=a+new Array(b+1-a.length).join(d);break}return a}function zc(a,b,d){switch(typeof a){case"number":return`#${cw(Math.floor(a).toString(16),6,"0",hh.left)}`;case"function":return a(b,d);default:return a}}function mn(a,b,d,f,i,l,q,u,v,A,E=!0){b.beginPath(),b.rect(d,f,i,l);if(q!==void 0){if(A!==void 0){let H;E?H=b.createLinearGradient(0,0,i,0):H=b.createLinearGradient(0,0,0,l),H.addColorStop(0,q),H.addColorStop(1,A),q=H}b.fillStyle=q,b.fill()}u!==void 0&&(b.strokeStyle=u,b.lineWidth=v,b.stroke())}class Zv{constructor(a=0,b=a,d=0,f=d,i=0){this._width=0;this._height=0;this.cornerRadius={tl:Bc(0),tr:Bc(0),bl:Bc(0),br:Bc(0)};this.setTo(a,b,d,f,i)}setTo(a=0,b=a,d=0,f=d,i=0){return this.setPosition(a,b),this.setRadius(i),this.setSize(d,f),this}setPosition(a=0,b=a){return this.x=a,this.y=b,this}setRadius(a=0){let b=this.cornerRadius;if(typeof a==="number"){const d=a,f=a;b.tl=Bc(void 0,d,f),b.tr=Bc(void 0,d,f),b.bl=Bc(void 0,d,f),b.br=Bc(void 0,d,f)}else{const d=a.x??0,f=a.y??0;b.tl=Bc(a.tl,d,f),b.tr=Bc(a.tr,d,f),b.bl=Bc(a.bl,d,f),b.br=Bc(a.br,d,f)}return this}setSize(a=0,b=a){return this.width=a,this.height=b,this}get minWidth(){let a=this.cornerRadius;return Math.max(a.tl.x+a.tr.x,a.bl.x+a.br.x)}get minHeight(){let a=this.cornerRadius;return Math.max(a.tl.y+a.bl.y,a.tr.y+a.br.y)}get width(){return this._width}set width(a){a==null&&(a=0),this._width=Math.max(a,this.minWidth)}get height(){return this._height}set height(a){a==null&&(a=0),this._height=Math.max(a,this.minHeight)}get radius(){let a=this.cornerRadius,b=Math.max(a.tl.x,a.tl.y,a.tr.x,a.tr.y,a.bl.x,a.bl.y,a.br.x,a.br.y);return b}}function Bc(a,b,d){return a===void 0?{x:b,y:d}:typeof a==="number"?{x:a,y:a}:a}const hz=Math.PI/180;function Qd(a){return a*hz}const _v=Qd(0),$v=Qd(90),aw=Qd(180),bw=Qd(270);function mj(a,b,d,f,i,l,q){const u=new Zv(b,d,f,i,l),v=u.minWidth,A=u.minHeight,E=f>=v?1:f/v,H=i>=A?1:i/A,O=u.cornerRadius;let I,Q,W,_,fa;a.beginPath(),a.translate(b,d),I=O.br,Q=I.x*E,W=I.y*H,_=f-Q,fa=i-W,Q>0&&W>0?Nj(a,_,fa,Q,W,_v,$v,q):(a.moveTo(f,fa),a.lineTo(f,i),a.lineTo(_,i)),I=O.bl,Q=I.x*E,W=I.y*H,_=Q,fa=i-W,a.lineTo(Q,i),Q>0&&W>0?Nj(a,_,fa,Q,W,$v,aw,q):(a.lineTo(0,i),a.lineTo(0,fa)),I=O.tl,Q=I.x*E,W=I.y*H,_=Q,fa=W,a.lineTo(0,fa),Q>0&&W>0?Nj(a,_,fa,Q,W,aw,bw,q):(a.lineTo(0,0),a.lineTo(_,0)),I=O.tr,Q=I.x*E,W=I.y*H,_=f-Q,fa=W,a.lineTo(_,0),Q>0&&W>0?Nj(a,_,fa,Q,W,bw,_v,q):(a.lineTo(f,0),a.lineTo(f,fa)),a.closePath()}var Nj=function(a,b,d,f,i,l,q,u){if(u===void 0)a.ellipse(b,d,f,i,0,l,q);else{u+=1;let v=(q-l)/u;for(let A=0;A<=u;A++){const E=l+v*A,H=b+f*Math.cos(E),O=d+i*Math.sin(E);a.lineTo(H,O)}}};function Vg(a,b,d,f,i,l,q,u,v,A,E,H=!0,O){mj(b,d,f,i,l,q,O);if(u!==void 0){if(E!==void 0){let I;H?I=b.createLinearGradient(0,0,i,0):I=b.createLinearGradient(0,0,0,l),I.addColorStop(0,u),I.addColorStop(1,E),u=I}b.fillStyle=u,b.fill()}v!==void 0&&(b.strokeStyle=v,b.lineWidth=A,b.stroke())}var Sv;(function(a){a[a.right=0]="right",a[a.down=1]="down",a[a.left=2]="left",a[a.up=3]="up"})(Sv||(Sv={}));function It(a,b){b.width!==a.width&&(b.width=a.width),b.height!==a.height&&(b.height=a.height);let d=b.getContext("2d");return d.drawImage(a.texture.image,a.x,a.y,a.width,a.height),b}function hn(a,b,d=0,f=0,i=a.width,l=a.height){const q=a.resolution,u=a.canvas,v=Math.ceil(i*q),A=Math.ceil(l*q);Yd(b,function(E,H){E.width!==v&&(E.width=v),E.height!==A&&(E.height=A),H.clearRect(0,0,v,A),H.drawImage(u,d,f,v,A)},void 0,a.resolution)}function jn(a,b,d){const f=Tb.get();if(!f.has(b))return;It(f.get(b).getFrame(d),a.canvas);const i=a.canvas.width,l=a.canvas.height,q=a.resolution,u=i/q,v=l/q;a.texture.setSize(u,v),a.setSize(u,v),a.updateTexture()}class kn extends yc{fill(a="#fff"){return cn(this,a),this}getCanvas(){return this.canvas}getContext(){return this.context}getDataURL(a,b){return en(this,a,b)}getPixel(a,b,d=[0,0,0,0]){return fn(this,a,b,d)}generateTexture(a,b=0,d=0,f=this.width,i=this.height){return hn(this,a,b,d,f,i),this}loadFromURL(a,b){return lj(this,a,b),this}loadFromURLPromise(a){return dn(this,a)}loadTexture(a,b){return jn(this,a,b),this}setPixel(a,b,d,f,i,l){return gn(this,a,b,d,f,i,l),this}}const bna=Rb(Oq());function Jt(a,b){const d=new bna.Chart(a.context,ry(a,b));return d}function ry(a,b={}){b.hasOwnProperty("options")||(b.options={});const d=b.options;d.responsive=!1,d.maintainAspectRatio=!1,d.hasOwnProperty("devicePixelRatio")||(d.devicePixelRatio=1);let f=!1;d.hasOwnProperty("animation")?d.animation===!1&&(f=!0,d.animation={}):d.animation={};const i=d.animation;f&&(i.duration=0);const l=i.onProgress;i.onProgress=function(u){l&&l(u),a.updateTexture()};const q=i.onComplete;return i.onComplete=function(u){q&&q(u),a.updateTexture()},b}function Kt(a,b,d){a.height=b,a.width=d,a.aspectRatio=a.height?a.width/a.height:null,a.update()}function Kf(a,b){if(typeof b==="string"){const d=a.data.datasets;for(let f=0,i=d.length;f<i;f++){const l=d[f];if(l.label===b)return l}}else return a.data.datasets[b];return null}function Lt(a,b,d){const f=Kf(a,b);if(!f)return;if(typeof d==="string"){const i=a.data.labels;d=i.indexOf(d);if(d===-1)return}return f.data[d]}function Mt(a,b,d,f){const i=Kf(a,b);if(!i)return;if(typeof d==="string"){const l=a.data.labels;d=l.indexOf(d);if(d===-1)return}i.data[d]=f}class Sg extends yc{constructor(a=0,b=0,d=1,f=1,i={}){super(a,b,d,f);this.type="rexChart";this.setChart(i)}destroy(a){this.chart&&(this.chart.destroy(),this.chart=null),super.destroy(a)}setChart(a={}){return this.chart&&this.chart.destroy(),this.chart=Jt(this,a),this}resize(a=this.width,b=this.height){return a===this.width&&b===this.height?this:(super.resize(a,b),this.chart&&Kt(this.chart,this.canvas.width,this.canvas.height),this)}getChartDataset(a){let b;return this.chart&&(b=Kf(this.chart,a)),b}getChartData(a,b){let d;return this.chart&&(d=Lt(this.chart,a,b)),d}setChartData(a,b,d){return this.chart&&Mt(this.chart,a,b,d),this}updateChart(){return this.chart&&this.chart.update(),this}}var Wc;(function(a){a[a.circle=0]="circle",a[a.ellipse=1]="ellipse",a[a.roundRectangle=2]="roundRectangle"})(Wc||(Wc={}));function ln(a,b,d,f=Wc.circle){let i,l,q,u;typeof f==="object"?{maskType:i,backgroundStyle:l,radius:q,iteration:u}=f:i=f,typeof i==="string"&&(i=Wc[i]);const v=a.canvas,A=a.context,E=Tb.get();if(!E.has(b))return;const H=E.get(b).getFrame(d),O=H.width,I=H.height;v.width!==O&&(v.width=O),v.height!==I&&(v.height=I),A.clearRect(0,0,O,I),l&&(A.fillStyle=l,A.fillRect(0,0,O,I)),A.beginPath();switch(i){case Wc.roundRectangle:mj(A,0,0,O,I,q,u);break;default:const Q=Math.floor(O/2),W=Math.floor(I/2);i===Wc.circle?A.arc(Q,W,Math.min(Q,W),0,2*Math.PI):A.ellipse(Q,W,Q,W,0,0,2*Math.PI);break}A.clip(),A.drawImage(H.texture.image,H.x,H.y,H.width,H.height),a.texture.setSize(O,I),a.setSize(O,I),a.updateTexture()}class Tg extends yc{constructor(a,b,d,f,i=Wc.circle){super(a,b);this.type="rexMaskedImage";ln(this,d,f,i)}maskImage(a,b,d=Wc.circle){return ln(this,a,b,d),this}}class Ug extends yc{constructor({x:a=0,y:b=0,width:d=1,height:f=1,fillStyle:i,fillColor2:l,isHorizontalGradient:q=!0,strokeStyle:u,lineWidth:v=2}={}){super(a,b);this.type="rexCanvasRoundRectangle";this.setFillStyle(i,l,q),this.setStrokeStyle(u,v),this.resize(d,f)}setFillStyle(a,b,d=!0){return this.fillStyle=a,this.fillColor2=b,this.isHorizontalGradient=d,this}setStrokeStyle(a,b){return this.strokeStyle=a,this.lineWidth=b,this}resize(a,b){return super.resize(a,b),this.refresh(),this}refresh(){let a=this.lineWidth;this.strokeStyle||(a=0);const b=a/2,d=b,f=b,i=this.width-a,l=this.height-a;return mn(this.canvas,this.context,d,f,i,l,zc(this.fillStyle,this.canvas,this.context),zc(this.strokeStyle,this.canvas,this.context),a,zc(this.fillColor2,this.canvas,this.context),this.isHorizontalGradient),this}}class Wg extends yc{constructor({x:a=0,y:b=0,width:d=1,height:f=1,radius:i=0,iteration:l,fillStyle:q,fillColor2:u,isHorizontalGradient:v=!0,strokeStyle:A,lineWidth:E=2}={}){super(a,b);this.type="rexCanvasRoundRectangle";this.setRadius(i),this.setIteration(l),this.setFillStyle(q,u,v),this.setStrokeStyle(A,E),this.resize(d,f)}setRadius(a){return this.radius=a,this}setIteration(a){return this.iteration=a,this}setFillStyle(a,b,d=!0){return this.fillStyle=a,this.fillColor2=b,this.isHorizontalGradient=d,this}setStrokeStyle(a,b){return this.strokeStyle=a,this.lineWidth=b,this}resize(a,b){return super.resize(a,b),this.refresh(),this}refresh(){let a=this.lineWidth;this.strokeStyle||(a=0);const b=a/2,d=b,f=b,i=this.width-a,l=this.height-a;return Vg(this.canvas,this.context,d,f,i,l,this.radius,zc(this.fillStyle,this.canvas,this.context),zc(this.strokeStyle,this.canvas,this.context),a,zc(this.fillColor2,this.canvas,this.context),this.isHorizontalGradient,this.iteration),this}}function kc(a,b){Array.isArray(b)?$k(a,...b):pe(a,b)}function Pb(a,b,d=!0){if(Array.isArray(b)){pg(a,...b);for(let f=0,i=b.length;f<i;f++)b[f].destroy()}else{const f=b;ue(a,f),d&&f.destroy()}}function Xc(a,b=!0){const d=a.children;for(let f=0,i=d.length;f<i;f++){const l=d[f];l.parent=null,b&&l.destroy()}d.length=0}class nn extends we{constructor(){super(...arguments);this.type="rexContainer"}add(a){return kc(this,a),this}remove(a,b=!0){return Pb(this,a,b),this}clear(a=!0){return Xc(this,a),this}}function Pe(a){return a.x+(0-a.originX)*a.width}function Re(a){return a.x+(.5-a.originX)*a.width}function Qe(a){return a.x+(1-a.originX)*a.width}function Se(a){return a.y+(0-a.originY)*a.height}function Ue(a){return a.y+(.5-a.originY)*a.height}function Te(a){return a.y+(1-a.originY)*a.height}function Zg(a,b){a.x+=b-Pe(a)}function $g(a,b){a.x+=b-Re(a)}function _g(a,b){a.x+=b-Qe(a)}function ah(a,b){a.y+=b-Se(a)}function ch(a,b){a.y+=b-Ue(a)}function bh(a,b){a.y+=b-Te(a)}function on(a,b){return b===void 0?a:a[b]}function pn(a,b,d){if(typeof b==="string")a[b]=d;else if(typeof b==="number")a.left=b,a.right=b,a.top=b,a.bottom=b;else{let f,i,l,q;({left:f=0,right:i=0,top:l=0,bottom:q=0}=b),a.left=f,a.right=i,a.top=l,a.bottom=q}}function Nt(a){let b;return a instanceof Oa?b=Math.max(a.minWidth,a.childrenWidth):a.hasOwnProperty("minWidth")?b=a.minWidth:b=a.width,b}function Ot(a){let b;return a instanceof Oa?b=Math.max(a.minHeight,a.childrenHeight):a.hasOwnProperty("minHeight")?b=a.minHeight:b=a.height,b}function Pt(a,b,d,f){if(a.ignoreLayout)return this;var i=!b;i&&a.preLayout();const l=a.resolveWidth(d);i&&(a.resolveChildrenWidth(l),a.runWidthWrap(l));const q=a.resolveHeight(f);a.resize(l,q),a.layoutChildren(),a.layoutBackgrounds(),a.postLayout()}function Lf(a,b){const d=Math.max(a.childrenWidth,a.minWidth);return b===void 0?b=d:d>b,b}function Mf(a,b){const d=Math.max(a.childrenHeight,a.minHeight);return b===void 0?b=d:d>b,b}function Qt(a,b){for(const d in a.sizerChildren){const f=a.sizerChildren[d];if(f&&f instanceof Oa&&!f.ignoreLayout){let i=a.getExpandedChildWidth(f,b);i=f.resolveWidth(i),f.resolveChildrenWidth(i)}}}function nj(a,b){for(let d in a.sizerChildren){let f=a.sizerChildren[d];if(!f||f instanceof Oa&&f.ignoreLayout)continue;let i=a.getExpandedChildWidth(f,b);i===void 0&&(i=a.resolveWidth()),f.runWidthWrap&&f.runWidthWrap(i)}}function Oe(a){a._childrenWidth=void 0,a._childrenHeight=void 0;const b=a.getChildrenSizers();for(var d=0,f=b.length;d<f;d++){const i=b[d];if(i.ignoreLayout)continue;Oe(i)}}function Zd(a,b,d){if(!a||b===void 0&&d===void 0)return;a.resize?(b===void 0&&(b=a.width),d===void 0&&(d=a.height),a.resize(b,d)):(b!==void 0&&(a.width=b),d!==void 0&&(a.height=d))}var sb;(function(a){a[a.left_top=0]="left_top",a[a.top_left=0]="top_left",a[a.center_top=1]="center_top",a[a.top_center=1]="top_center",a[a.right_top=2]="right_top",a[a.top_right=2]="top_right",a[a.left_center=3]="left_center",a[a.center_left=3]="center_left",a[a.center=4]="center",a[a.center_center=4]="center_center",a[a.right_center=5]="right_center",a[a.center_right=5]="center_right",a[a.left_bottom=6]="left_bottom",a[a.bottom_left=6]="bottom_left",a[a.center_bottom=7]="center_bottom",a[a.bottom_center=7]="bottom_center",a[a.right_bottom=8]="right_bottom",a[a.bottom_right=8]="bottom_right"})(sb||(sb={}));function ev(a,b,d=sb.center,f=0,i=0){const l=d%3;switch(l){case 0:Zg(a,Pe(b));break;case 1:$g(a,Re(b));break;default:_g(a,Qe(b));break}const q=Math.floor(d/3);switch(q){case 0:ah(a,Se(b));break;case 1:ch(a,Ue(b));break;default:bh(a,Te(b));break}a.x-=f,a.y-=i}class wy{constructor(){this.x=0;this.y=0;this.width=0;this.height=0;this.originX=0;this.originY=0}setTo(a=0,b=0,d=0,f=0){return this.x=a,this.y=b,this.width=d,this.height=f,this}alignIn(a,b=sb.center,d=0,f=0){return ev(a,this,b,d,f),this}}const Zc=new wy();function Rt(a){if(a.backgroundChildren===void 0)return;const b=a.left,d=a.top,f=a.width,i=a.height,l=a.backgroundChildren;for(let q=0,u=l.length;q<u;q++){const v=l[q],A=v.rexSizer;if(A.hidden)continue;const E=A.padding,H=b+E.left,O=d+E.top,I=f-E.left-E.right,Q=i-E.top-E.bottom;Zd(v,I,Q),Zc.setTo(H,O,I,Q).alignIn(v)}}function St(a,b,d,f){}function Tt(a,b){kc(a,b)}function Ut(a){return a.hasOwnProperty("rexSizer")||(a.rexSizer={}),a.rexSizer}function Yc(a=0,b={left:0,right:0,top:0,bottom:0}){if(typeof a==="number")b.left=a,b.right=a,b.top=a,b.bottom=a;else{let d,f,i,l;({left:d=0,right:f=0,top:i=0,bottom:l=0}=a),b.left=d,b.right=f,b.top=i,b.bottom=l}return b}function Vt(a,b,{padding:d=0,childKey:f}={}){a.backgroundChildren===void 0&&(a.backgroundChildren=[]),kc(a,b),a.backgroundChildren.push(b);const i=a.getSizerState(b);i.padding=Yc(d),f!==void 0&&a.addChildrenMap(f,b)}function Wt(a,b){return a.backgroundChildren===void 0?!1:a.backgroundChildren.includes(b)}function Xt(a,b,d){a.childrenMap===void 0&&(a.childrenMap={}),a.childrenMap[b]=d}function $t(a,b,d=!1){if(d){const f=[a];for(;f.length;){a=f.shift();for(let i=0,l=a.children.length;i<l;i++){const q=a.children[i];if(q.name===b)return q;f.push(q)}}}else for(let f=0,i=a.children.length;f<i;f++){const l=a.children[f];if(l.name===b)return l}return null}function qn(a,b,d){typeof b==="string"&&(b=b.split("."));if(b.length===0)return null;let f=b.shift(),i=null;if(f.charAt(0)==="#")f=f.substring(1),i=$t(a,f,d);else if(!f.includes("["))a.childrenMap&&(i=a.childrenMap[f]);else{const l=f.match(ty);if(l!=null){if(a.childrenMap){let q=a.childrenMap[l[1]];q&&(i=q[l[2]])}}}return b.length===0?i:i&&i.childrenMap?qn(i,b,d):null}const ty=/(\S+)\[(\d+)\]/i;function dh(a){let b=a.parent;for(;b;){if(b instanceof Oa)return b;b=b.parent}return null}function Yt(a,b){return dh(b)===a}function Zt(a,b){return a.backgroundChildren?a.backgroundChildren.includes(b):!1}function _t(a){let b,d=dh(a);for(;d;)b=d,d=dh(d);return b}class Oa extends nn{constructor({x:a=0,y:b=0,width:d=0,height:f=0,space:i=0,name:l=""}={}){super(a,b);this.type="rexBaseSizer";this.space={left:0,right:0,top:0,bottom:0};this.rexSizer={};this.needLayout=!0;this.setMinSize(d,f),this.setInnerPadding(i),this.name=l}destroy(a){this.sizerChildren=null,this.backgroundChildren=null,super.destroy(a)}get ignoreLayout(){return this.rexSizer.hidden||!this.needLayout}get left(){return Pe(this)}set left(a){Zg(this,a)}alignLeft(a){return this.left=a,this}get right(){return Qe(this)}set right(a){_g(this,a)}alignRight(a){return this.right=a,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get centerX(){return Re(this)}set centerX(a){$g(this,a)}alignCenterX(a){return this.centerX=a,this}get top(){return Se(this)}set top(a){ah(this,a)}alignTop(a){return this.top=a,this}get bottom(){return Te(this)}set bottom(a){bh(this,a)}alignBottom(a){return this.bottom=a,this}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get centerY(){return Ue(this)}set centerY(a){ch(this,a)}alignCenterY(a){return this.centerY=a,this}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}setMinSize(a,b){return this.setMinWidth(a).setMinHeight(b),this}setMinWidth(a=0){return this.minWidth=a,this}setMinHeight(a=0){return this.minHeight=a,this}getChildWidth(a){return Nt(a)}getChildHeight(a){return Ot(a)}getChildrenWidth(){return 0}getChildrenHeight(){return 0}getExpandedChildWidth(a,b){return b}getExpandedChildHeight(a,b){return b}getChildrenSizers(a=[]){return a}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}resize(a=this.width,b=this.height){return this.setSize(a,b),this}getSizerState(a){return Ut(a)}layout(){const a=this.x,b=this.y;return this.setPosition(0,0).runLayout().setPosition(a,b),this}getInnerPadding(a){return on(this.space,a)}setInnerPadding(a,b){return pn(this.space,a,b),this}getOutterPadding(a){return on(this.getSizerState(this).padding,a)}setOutterPadding(a,b){return pn(this.getSizerState(this).padding,a,b),this}runLayout(a,b,d){return Pt(this,a,b,d),this}preLayout(a,b,d){return Oe(this),this}resolveWidth(a){return Lf(this,a)}resolveHeight(a){return Mf(this,a)}resolveChildrenWidth(a){Qt(this,a)}runWidthWrap(a){nj(this,a)}layoutChildren(){}layoutBackgrounds(){return Rt(this),this}postLayout(a,b,d){return St(this,a,b,d),this}pin(a){return Tt(this,a),this}addBackground(a,b){return Vt(this,a,b),this}isBackground(a){return Wt(this,a)}addChildrenMap(a,b){return Xt(this,a,b),this}getElement(a,b=!1){return qn(this,a,b)}isChild(a){return Yt(this,a)}isBackgroundChild(a){return Zt(this,a)}getTopmostParentSizer(a=this){return _t(a)}}var Ac;(function(a){a[a.left=0]="left",a[a.top=0]="top",a[a.right=1]="right",a[a.bottom=1]="bottom",a[a.center=2]="center",a[a.justify=3]="justify",a[a["justify-left"]=3]="justify-left",a[a["justify-top"]=3]="justify-top",a[a["justify-right"]=4]="justify-right",a[a["justify-bottom"]=4]="justify-bottom",a[a["justify-center"]=5]="justify-center"})(Ac||(Ac={}));function au(a,b=a.sizerChildren){let d=0;for(let f=0,i=b.length;f<i;f++){const l=b[f];if(l===`
`)continue;const q=a.getChildWidth(l);d=Math.max(q,d)}return d}function bu(a,b=a.sizerChildren){let d=0;for(let f=0,i=b.length;f<i;f++){const l=b[f];if(l===`
`)continue;const q=a.getChildHeight(l);d=Math.max(q,d)}return d}function cu(a,b=[]){const d=a.sizerChildren;for(var f=0,i=d.length;f<i;f++){const l=d[f];if(l===`
`)continue;l instanceof Oa&&b.push(l)}return b}var xb;(function(a){a[a.x=0]="x",a[a.h=0]="h",a[a.horizontal=0]="horizontal",a[a["left-to-right"]=0]="left-to-right",a[a.y=1]="y",a[a.v=1]="v",a[a.vertical=1]="vertical",a[a["top-to-bottom"]=1]="top-to-bottom"})(xb||(xb={}));function du(a){if(a.rexSizer.hidden)return 0;let b;return a.orientation===xb.x?b=a.maxChildWidth:b=0,b+a.space.left+a.space.right}function eu(a){if(a.rexSizer.hidden)return 0;let b;return a.orientation===xb.x?b=0:b=a.maxChildHeight,b+a.space.top+a.space.bottom}function fu(a){a._maxChildWidth=void 0,a._maxChildHeight=void 0,Oe(a)}function nu(a,b,d){d===void 0?d={lines:[],width:0,height:0}:(d.lines.length=0,d.width=0,d.height=0);const f=d.lines,i=a.sizerChildren;let l=0,q;for(let u=0,v=i.length;u<v;u++){let A=i[u],E,H;if(A===`
`)A=void 0,E=0,H=!0;else{if(A.rexSizer.hidden)continue;A instanceof Oa&&A.layout(),E=uy(A),H=l<E}H&&(q&&(q.width=b-(l+a.space.item),d.width=Math.max(d.width,q.width),d.height+=q.height+a.space.line),q={children:[],width:0,height:0},f.push(q),l=b),l-=E+a.space.item;if(A){q.children.push(A);const O=vy(A);q.height=Math.max(q.height,O)}}return q&&(q.width=b-(l+a.space.item),d.width=Math.max(d.width,q.width),d.height+=q.height),d}function uy(a){const b=a.rexSizer.padding;return a.width+b.left+b.right}function vy(a){const b=a.rexSizer.padding;return a.height+b.top+b.bottom}function gu(a,b){const d=b-a.space.left-a.space.right;a.widthWrapResult=nu(a,d,a.widthWrapResult),nj(a,b)}function hu(a){const b=this.innerWidth,d=a.innerLeft,f=a.innerTop;let i=d,l=f;const q=a.widthWrapResult.lines;for(let A=0,E=q.length;A<E;A++){const H=q[A],O=H.children;a.rtl&&O.reverse();const I=b-H.width;let Q=0;switch(a.align){case Ac.left:break;case Ac.right:i+=I;break;case Ac.center:i+=I/2;break;case Ac["justify-left"]:Q=rn(b,I,O.length);break;case Ac["justify-right"]:Q=rn(b,I,O.length),Q===0&&(i+=I);break;case Ac["justify-center"]:Q=rn(b,I,O.length),Q===0&&(i+=I/2);break}for(var u=0,v=O.length;u<v;u++){const W=O[u],_=W.rexSizer,fa=_.padding;let ha,oa,ia,ra;ha=i+fa.left,u>0&&(ha+=a.space.item),oa=l+fa.top,ia=W.width,ra=W.height,i=ha+ia+fa.right+Q,Zc.setTo(ha,oa,ia,ra).alignIn(W,sb.center)}i=d,l+=H.height+a.space.line}}function rn(a,b,d){return b/a<=.25?b/(d-1):0}function iu(a,b,{padding:d=0,childKey:f,index:i}={}){kc(a,b);const l=a.getSizerState(b);l.padding=Yc(d),i===void 0||i>=a.sizerChildren.length?a.sizerChildren.push(b):a.sizerChildren.splice(i,0,b),f!==void 0&&a.addChildrenMap(f,b)}function ju(a){a.sizerChildren.push(`
`)}function Ng(a,b){if(b>=a.length)return;let d=a.length-1,f=a[b];for(let i=b;i<d;i++)a[i]=a[i+1];return a.length=d,f}function _c(a,b,d,f=a){if(!Array.isArray(b)){const l=a.indexOf(b);return l!==-1?(Ng(a,l),d&&d.call(f,b),b):null}let i=b.length-1;for(;i>=0;){const l=b[i],q=a.indexOf(l);q!==-1?(Ng(a,q),d&&d.call(f,l)):b.pop(),i--}return b}function ku(a,b,d=!0){Pb(a,b,d);const f=_c(a.sizerChildren,b);!f&&a.backgroundChildren&&_c(a.backgroundChildren,b)}function lu(a,b=!0){const d=a.sizerChildren;for(let f=0,i=d.length;f<i;f++){const l=d[f];if(l===`
`)continue;Pb(a,l,b)}a.sizerChildren.length=0}function mu(a,b=!0){Xc(a,b),a.sizerChildren.length=0,a.backgroundChildren&&(a.backgroundChildren.length=0)}class oj extends Oa{constructor({space:a={item:0,line:0},align:b=Ac.left,rtl:d=!1}={}){super(arguments[0]);this.type="rexFixedWidthSizer";this.sizerChildren=[];this.setItemSpacing(a.item),this.setLineSpacing(a.line),this.setAlign(b),this.setRTL(d)}setItemSpacing(a=0){return this.space.item=a,this}setLineSpacing(a=0){return this.space.line=a,this}setAlign(a){return typeof a==="string"&&(a=Ac[a]),this.align=a,this}setRTL(a=!0){return this.rtl=a,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=au(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=bu(this)),this._maxChildHeight}getChildrenSizers(a=[]){return cu(this,a)}getChildrenWidth(){return du(this)}getChildrenHeight(){return eu(this)}preLayout(){return fu(this),this}runWidthWrap(a){gu(this,a)}layoutChildren(){hu(this)}add(a,b){return iu(this,a,b),this}addNewLine(){return ju(this),this}remove(a,b=!0){return ku(this,a,b),this}removeAll(a=!0){return lu(this,a),this}clear(a=!0){return mu(this,a),this}}function $c(a,b,d=0,f=a.length-1){for(let i=d;i<=f;i++)a[i]=b;return a}function ou(a,{column:b=0,row:d=0,columnProportions:f=0,rowProportions:i=0,space:l}={}){a.columnCount=b,a.rowCount=d,a.sizerChildren.length=b*d,$c(a.sizerChildren,null),a.columnProportions.length=b;if(typeof f==="number")$c(a.columnProportions,f);else for(let v=0;v<b;v++)a.columnProportions[v]=f[v]??0;a.rowProportions.length=d;if(typeof i==="number")$c(a.rowProportions,i);else for(let v=0;v<d;v++)a.rowProportions[v]=i[v]??0;a.columnWidth.length=b,a.rowHeight.length=d,a.space.column=[],a.space.column.length=b-1;const q=l.column??0;if(typeof q==="number")$c(a.space.column,q);else for(let v=0,A=a.space.column.length;v<A;v++)a.space.column[v]=q[v]??0;a.space.row=[],a.space.row.length=d-1;const u=l.row??0;if(typeof u==="number")$c(a.space.row,u);else for(let v=0,A=a.space.row.length;v<A;v++)a.space.row[v]=u[v]??0}function pu(a,b=[]){const d=a.sizerChildren;for(var f=0,i=d.length;f<i;f++){const l=d[f];l&&l instanceof Oa&&b.push(l)}return b}function rj(...a){return Array.prototype.reduce.call(a,gz,0)}function gz(a,b){return a+b}function qu(a){if(a.rexSizer.hidden)return 0;let b=0;const d=a.sizerChildren;for(let f=0;f<a.columnCount;f++){const i=a.columnProportions[f];let l=0;if(i===0){for(let q=0;q<a.rowCount;q++){const u=d[q*a.columnCount+f];if(!u)continue;if(u.rexSizer.hidden)continue;const v=u.rexSizer.padding,A=a.getChildWidth(u)+v.left+v.right;l=Math.max(l,A)}b+=l}a.columnWidth[f]=l}return b+rj(a.space.left,...a.space.column,a.space.right)}function ru(a){if(a.rexSizer.hidden)return 0;let b=0;const d=a.sizerChildren;for(let i=0;i<a.rowCount;i++){const l=a.rowProportions[i];let q=0;if(l===0){for(var f=0;f<a.columnCount;f++){const u=d[i*a.columnCount+f];if(!u)continue;if(u.rexSizer.hidden)continue;const v=u.rexSizer.padding,A=a.getChildHeight(u)+v.top+v.bottom;q=Math.max(q,A)}b+=q}a.rowHeight[i]=q}return b+rj(a.space.top,...a.space.row,a.space.bottom)}function su(a,b){let d;const f=a.rexSizer;if(f.expand){const i=f.padding;d=b-i.left-i.right}return d}function tu(a,b){let d;const f=a.rexSizer;if(f.expand){const i=f.padding;d=b-i.top-i.bottom}return d}function uu(a,b){b=Lf(a,b);if(a.proportionWidthLength===void 0){const d=a.totalColumnProportions;if(d>0){const f=b-a.childrenWidth;f>=0&&(a.proportionWidthLength=f/d)}else a.proportionWidthLength=0}return b}function vu(a,b){b=Mf(a,b);if(a.proportionHeightLength===void 0){const d=a.totalRowProportions;if(d>0){const f=b-a.childrenHeight;f>=0&&(a.proportionHeightLength=f/d)}else a.proportionHeightLength=0}return b}function Nf(a,b){const d=a.columnProportions[b],f=d===0?a.columnWidth[b]:d*a.proportionWidthLength;return f}function wu(a,b){for(const d in a.sizerChildren){const f=a.sizerChildren[d];if(!f)continue;const i=Nf(a,parseInt(d)%a.columnCount);if(f instanceof Oa){let l=a.getExpandedChildWidth(f,i);l=f.resolveWidth(l),f.resolveChildrenWidth(l)}}}function xu(a,b){for(const d in this.sizerChildren){const f=this.sizerChildren[d];if(!f)continue;const i=Nf(a,parseInt(d)%a.columnCount);let l=a.getExpandedChildWidth(f,i);l===void 0&&(l=a.resolveWidth()),f.runWidthWrap&&f.runWidthWrap(l)}}function _d(a,b,d){return a.sizerChildren[d*a.columnCount+b]}function yu(a){const b=a.innerLeft,d=a.innerTop,f=a.space.column,i=a.space.row;let l=b,q=d;for(let v=0;v<a.rowCount;v++){const A=a.rowProportions[v],E=A===0?a.rowHeight[v]:A*a.proportionHeightLength;l=b;for(var u=0;u<a.columnCount;u++){const H=a.columnProportions[u],O=H===0?a.columnWidth[u]:H*a.proportionWidthLength,I=_d(a,u,v);if(!I||I.rexSizer.hidden){l+=O+f[u];continue}const Q=a.getExpandedChildWidth(I,O),W=a.getExpandedChildHeight(I,E);I instanceof Oa?I.runLayout(a,Q,W):Zd(I,Q,W);const _=I.rexSizer,fa=_.padding,ha=l+fa.left,oa=O-fa.left-fa.right,ia=q+fa.top,ra=E-fa.top-fa.bottom;Zc.setTo(ha,ia,oa,ra).alignIn(I,_.align),l+=O+f[u]}q+=E+i[v]}}function zu(a,b){const d=a.rowProportions[b],f=d===0?a.rowHeight[b]:d*a.proportionHeightLength;return f}function Hu(a,b,d,f,i){if(typeof a==="number"&&typeof b==="number"){let l=b*f+a;if(!d[l])return l}else if(b===void 0&&typeof a==="number")for(let l=0;l<i;l++){let q=l*f+a;if(!d[q])return q}else if(a===void 0&&typeof b==="number")for(let l=0;l<f;l++){let q=b*f+l;if(!d[q])return q}else if(b===!0)for(let l=0;l<f;l++)for(let q=0;q<i;q++){let u=q*f+l;if(!d[u])return u}else for(let l=0,q=d.length;l<q;l++)if(!d[l])return l;return null}function Au(a,b,{column:d,row:f,align:i=sb.center,padding:l=0,expand:q=!0,childKey:u}={}){const v=Hu(d,f,a.sizerChildren,a.columnCount,a.rowCount);if(v===null)return;kc(a,b),typeof i==="string"&&(i=sb[i]);const A=a.getSizerState(b);A.align=i,A.padding=Yc(l),A.expand=q,a.sizerChildren[v]=b,u!==void 0&&a.addChildrenMap(u,b)}function pj(a,b,d=!0){Pb(a,b,d);const f=a.sizerChildren.indexOf(b);f>=0?a.sizerChildren[f]=null:a.backgroundChildren&&_c(a.backgroundChildren,b)}function Bu(a,b,d,f=!0){const i=_d(a,b,d);i&&pj(a,i,f)}function Cu(a,b=!0){Pb(a,a.sizerChildren,b),$c(a.sizerChildren,null)}function Du(a,b=!0){Xc(a,b),$c(a.sizerChildren,null),a.backgroundChildren&&(a.backgroundChildren.length=0)}function Eu(a,b,d){if(!b)return null;const f=a.sizerChildren.indexOf(b);return f===-1?null:(d===void 0&&(d={x:0,y:0}),d.x=f%a.columnCount,d.y=Math.floor(f/a.columnCount),d)}function Fu(a,b,d){for(let f=0,i=a.rowCount;f<i;f++)for(let l=0,q=a.columnCount;l<q;l++){if(_d(a,l,f))continue;let u;d?u=b.call(d,l,f,a):u=b(l,f,a);if(u)return}}function Gu(a){const b=a.sizerChildren;let d=0;for(let f=0,i=b.length;f<i;f++)b[f]||d++;return d}class qj extends Oa{constructor(a={}){super(a);this.type="rexGridSizer";this.sizerChildren=[];this.columnProportions=[];this.rowProportions=[];this.columnWidth=[];this.rowHeight=[];ou(this,a)}setColumnProportion(a,b){return a<this.columnProportions.length&&(this.columnProportions[a]=b),this}setRowProportion(a,b){return a<this.rowProportions.length&&(this.rowProportions[a]=b),this}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=this.columnProportions.reduce((a,b)=>a+b)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=this.rowProportions.reduce((a,b)=>a+b)),this._totalRowProportions}getChildrenSizers(a=[]){return pu(this,a)}getChildrenWidth(){return qu(this)}getChildrenHeight(){return ru(this)}getExpandedChildWidth(a,b){return su(a,b)}getExpandedChildHeight(a,b){return tu(a,b)}preLayout(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,super.preLayout(),this}resolveWidth(a){return uu(this,a)}resolveHeight(a){return vu(this,a)}resolveChildrenWidth(a){wu(this,a)}runWidthWrap(a){xu(this,a)}layoutChildren(){return yu(this),this}add(a,b){return Au(this,a,b),this}remove(a,b=!0){return pj(this,a,b),this}removeAt(a,b,d=!0){return Bu(this,a,b,d),this}removeAll(a=!0){return Cu(this,a),this}clear(a=!0){return Du(this,a),this}getChildAt(a,b){return _d(this,a,b)}childToGridIndex(a,b){return Eu(this,a,b)}getColumnWidth(a){return Nf(this,a)}getRowHeight(a){return zu(this,a)}forEachEmptyGrid(a,b){return Fu(this,a,b),this}get gridCount(){return this.sizerChildren.length}get emptyGridCount(){return Gu(this)}}function Su(a,b=[]){const d=a.sizerChildren;for(var f=0,i=d.length;f<i;f++){const l=d[f];l instanceof Oa&&b.push(l)}return b}function Tu(a){const b=a.sizerChildren;let d=0;for(let f=0,i=b.length;f<i;f++){const l=b[f];if(l.rexSizer.hidden)continue;const q=l.rexSizer,u=q.proportion;u>0&&(d+=u)}return d}class wj extends we{}function xj(a){return a instanceof wj}function Uu(a,b=!0){if(a.rexSizer.hidden)return 0;b===void 0&&(b=!0);const d=a.sizerChildren;let f=0;if(a.orientation===xb.x)for(var i=0,l=d.length;i<l;i++){const q=d[i],u=q.rexSizer;if(u.hidden)continue;const v=u.padding;let A;u.proportion===0||b&&!xj(q)&&u.proportion>0?A=a.getChildWidth(q):A=0,A+=v.left+v.right,i>0&&(A+=a.space.item),f+=A}else for(var i=0,l=d.length;i<l;i++){const q=d[i];if(!q.hasOwnProperty("rexSizer"))continue;const u=q.rexSizer;if(u.hidden)continue;const v=u.padding,A=a.getChildWidth(q)+v.left+v.right;f=Math.max(A,f)}return f+a.space.left+a.space.right}function Vu(a,b=!0){if(a.rexSizer.hidden)return 0;const d=a.sizerChildren;let f=0;if(a.orientation===xb.x)for(var i=0,l=d.length;i<l;i++){const q=d[i],u=q.rexSizer;if(u.hidden)continue;const v=u.padding,A=a.getChildHeight(q)+v.top+v.bottom;f=Math.max(A,f)}else for(var i=0,l=d.length;i<l;i++){const q=d[i];if(!q.hasOwnProperty("rexSizer"))continue;const u=q.rexSizer;if(u.hidden)continue;const v=u.padding;let A;u.proportion===0||b&&!xj(q)&&u.proportion>0?A=a.getChildHeight(q):A=0,A+=v.top+v.bottom,i>0&&(A+=a.space.item),f+=A}return f+a.space.top+a.space.bottom}function Wu(a,b,d=a.width){let f;const i=b.rexSizer,l=i.padding;if(a.orientation===xb.x)i.proportion>0&&a.proportionLength>0&&(f=i.proportion*a.proportionLength);else if(i.expand){const q=d-a.space.left-a.space.right;f=q-l.left-l.right}return f}function Xu(a,b,d=a.height){let f;const i=b.rexSizer,l=i.padding;if(a.orientation===xb.x){if(i.expand){const q=d-a.space.top-a.space.bottom;f=q-l.top-l.bottom}}else i.proportion>0&&a.proportionLength>0&&(f=i.proportion*a.proportionLength);return f}function Yu(a){a._childrenProportion=void 0,Oe(a)}function Zu(a,b){b=Lf(a,b);if(a.proportionLength===void 0&&a.orientation===0){var d=b-a.childrenWidth;d>0?(d=b-a.getChildrenWidth(!1),a.proportionLength=d/a.childrenProportion):(a.proportionLength=0,d<0)}return b}function _u(a,b){b=Mf(a,b);if(a.proportionLength===void 0&&a.orientation===1){var d=b-a.childrenHeight;d>0?(d=b-a.getChildrenHeight(!1),a.proportionLength=d/a.childrenProportion):(a.proportionLength=0,d<0)}return b}function $u(a){const b=a.sizerChildren,d=a.innerLeft,f=a.innerTop,i=a.innerWidth,l=a.innerHeight;let q=d,u=f;for(let v=0,A=b.length;v<A;v++){const E=b[v];if(E.rexSizer.hidden)continue;const H=E.rexSizer,O=H.padding;let I=a.getExpandedChildWidth(E),Q=a.getExpandedChildHeight(E);E instanceof Oa?E.runLayout(a,I,Q):Zd(E,I,Q),I===void 0&&(I=E.width),Q===void 0&&(Q=E.height);let W,_,fa,ha;a.orientation===xb.x?(W=q+O.left,H.proportion===0||a.proportionLength===0?fa=I:fa=H.proportion*a.proportionLength,_=u+O.top,ha=l-O.top-O.bottom):(W=q+O.left,fa=i-O.left-O.right,_=u+O.top,H.proportion===0||a.proportionLength===0?ha=Q:ha=H.proportion*a.proportionLength),Zc.setTo(W,_,fa,ha).alignIn(E,H.align),a.orientation===xb.x?q+=fa+O.left+O.right+a.space.item:u+=ha+O.top+O.bottom+a.space.item}}function vj(a,b,{proportion:d=0,align:f=sb.center,padding:i=0,expand:l=!1,childKey:q,index:u}={}){kc(a,b),typeof f==="string"&&(f=sb[f]);const v=a.getSizerState(b);v.proportion=d,v.align=f,v.padding=Yc(i),v.expand=l,u===void 0||u>=a.sizerChildren.length?a.sizerChildren.push(b):a.sizerChildren.splice(u,0,b),q!==void 0&&a.addChildrenMap(q,b)}function av(a,b=1){const d=new wj();vj(a,d,{proportion:b})}function bv(a,b,d=!0){Pb(a,b,d);const f=_c(a.sizerChildren,b);!f&&a.backgroundChildren&&_c(a.backgroundChildren,b)}function cv(a,b=!0){Pb(a,a.sizerChildren,b),a.sizerChildren.length=0}function dv(a,b=!0){Xc(a,b),a.sizerChildren.length=0,a.backgroundChildren&&(a.backgroundChildren.length=0)}class Of extends Oa{constructor({space:a={item:0},orientation:b=xb.x}={}){super(arguments[0]);this.type="rexSizer";this.sizerChildren=[];this.setOrientation(b),this.setItemSpacing(a.item)}setOrientation(a){return typeof a==="string"&&(a=xb[a]),this.orientation=a,this}setItemSpacing(a=0){return this.space.item=a,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=Tu(this)),this._childrenProportion}getChildrenSizers(a=[]){return Su(this,a)}getChildrenWidth(a=!0){return Uu(this,a)}getChildrenHeight(a=!0){return Vu(this,a)}getExpandedChildWidth(a,b){return Wu(this,a,b)}getExpandedChildHeight(a,b){return Xu(this,a,b)}preLayout(){return Yu(this),this}resolveWidth(a){return Zu(this,a)}resolveHeight(a){return _u(this,a)}layoutChildren(){return $u(this),this}add(a,b){return vj(this,a,b),this}addSpace(a=1){return av(this,a),this}remove(a,b=!0){return bv(this,a,b),this}removeAll(a=!0){return cv(this,a),this}clear(a=!0){return dv(this,a),this}}class sj extends Of{constructor({background:a,icon:b,text:d,expandTextWidth:f=!1,expandTextHeight:i=!1,action:l,align:q,space:u={}}={}){super(arguments[0]);this.type="rexLabel";a&&this.addBackground(a),(q==="right"||q==="bottom"||q==="center")&&this.addSpace();if(b){let v;const A=u.icon??0;this.orientation===xb.x?(d||l)&&(v={right:A}):(d||l)&&(v={bottom:A}),this.add(b,{padding:v})}if(d){let v,A,E;const H=u.text??0;this.orientation===xb.x?(v=f?1:0,l&&(A={right:H}),E=i):(v=i?1:0,l&&(A={bottom:H}),E=f),this.add(d,{proportion:v,align:sb.center,padding:A,expand:E})}l&&this.add(l),q==="center"&&this.addSpace(),this.addChildrenMap("background",a),this.addChildrenMap("icon",b),this.addChildrenMap("text",d),this.addChildrenMap("action",l)}get text(){const a=this.childrenMap.text;if(a===void 0)return"";let b;return a.text?(b=a.text,typeof b!=="string"&&(b=b.join(`
`))):b="",b}set text(a){const b=this.childrenMap.text;b!==void 0&&(b.text=a)}setText(a){return typeof a!=="string"&&(a=a.join(`
`)),this.text=a,this}appendText(a){return typeof a!=="string"&&(a=a.join(`
`)),this.text+=a,this}}function Iu(a,b=[]){for(const[d,f]of a.sizerChildren)f instanceof Oa&&b.push(f);return b}function Ju(a){if(a.rexSizer.hidden)return 0;let b=0;for(const[d,f]of a.sizerChildren){const i=f.rexSizer.padding,l=a.getChildWidth(f)+i.left+i.right;b=Math.max(l,b)}return b+a.space.left+a.space.right}function Ku(a){if(a.rexSizer.hidden)return 0;let b=0;for(const[d,f]of a.sizerChildren){const i=f.rexSizer.padding,l=a.getChildHeight(f)+i.top+i.bottom;b=Math.max(l,b)}return b+a.space.top+a.space.bottom}function Lu(a,b){let d;const f=b.rexSizer;if(f.expandWidth){const i=f.padding;d=a.innerWidth-i.left-i.right}return d}function Mu(a,b){let d;const f=b.rexSizer;if(f.expandHeight){const i=f.padding;d=a.innerHeight-i.top-i.bottom}return d}function Nu(a){const b=a.innerLeft,d=a.innerTop,f=a.innerWidth,i=a.innerHeight;for(let[l,q]of a.sizerChildren){const u=q.rexSizer,v=u.padding;if(q instanceof Oa)q.runLayout(a,a.getExpandedChildWidth(q),a.getExpandedChildHeight(q));else{let I,Q;u.expandWidth&&(I=f-v.left-v.right),u.expandHeight&&(Q=i-v.top-v.bottom),Zd(q,I,Q)}const A=b+v.left,E=f-v.left-v.right,H=d+v.top,O=i-v.top-v.bottom;Zc.setTo(A,H,E,O).alignIn(q,u.align)}}function Ou(a,b,{key:d=Date.now(),padding:f=0,align:i=sb.center,expand:l=!0}={}){kc(a,b),typeof i==="string"&&(i=sb[i]);const q=a.getSizerState(b);q.key=d,q.align=i,q.padding=Yc(f);if(typeof l==="boolean")q.expandWidth=l,q.expandHeight=l;else{let{width:u=!1,height:v=!1}=l;q.expandWidth=u,q.expandHeight=v}a.sizerChildren.has(d)&&a.sizerChildren.get(d).destroy(),a.sizerChildren.set(d,b)}function uj(a,b){if(b instanceof Gc)if(b.parent===a&&b.hasOwnProperty("rexSizer")){const d=b.rexSizer;return d.key}else return null;else{const d=b;return a.sizerChildren.has(d)?d:null}}function Pu(a,b,d=!0){Pb(a,b,d);const f=uj(a,b);f?a.sizerChildren.delete(f):_c(a.backgroundChildren,b)}function Qu(a,b=!0){Pb(a,Array.from(a.sizerChildren.values()),b),a.sizerChildren.clear()}function Ru(a,b=!0){Xc(a,b),a.sizerChildren.clear(),a.backgroundChildren&&(a.backgroundChildren.length=0)}class tj extends Oa{constructor(a={}){super(a);this.type="rexOverlapSizer";this.sizerChildren=new Map()}getChildrenSizers(a=[]){return Iu(this,a)}getChildrenWidth(){return Ju(this)}getChildrenHeight(){return Ku(this)}getExpandedChildWidth(a,b){return Lu(this,a)}getExpandedChildHeight(a,b){return Mu(this,a)}layoutChildren(){return Nu(this),this}add(a,b){return Ou(this,a,b),this}getChildKey(a){return uj(this,a)}remove(a,b=!0){return Pu(this,a,b),this}removeAll(a=!0){return Qu(this,a),this}clear(a=!0){return Ru(this,a),this}}var Qb;(function(a){a[a.none=0]="none",a[a.word=1]="word",a[a.char=2]="char"})(Qb||(Qb={}));var Cb;(function(a){a[a.none=0]="none",a[a.raw=1]="raw",a[a.wrapped=2]="wrapped"})(Cb||(Cb={}));const Fn=/(?:\r\n|\r|\n)/;function vv(a,b,d,f,i,l=0){i<=0&&(f=0);let q=[];if(!a||!a.length)return q;let u=a.split(Fn),v=u.length-1;a.slice(-1)===`
`&&(u.length-=1);let A;for(let E=0,H=u.length;E<H;E++){let O=u[E],I=E===v?0:1;if(f===0){q.push(kh(O,b(O,d),I));continue}E===0?A=i-l:A=i;if(O.length<=100){let ha=b(O,d);if(ha<=A){q.push(kh(O,ha,I));continue}}let Q;f===1?Q=O.split(" "):Q=O;let W="",_="",fa=0;for(let ha=0,oa=Q.length;ha<oa;ha++){let ia=Q[ha];f===1?(W+=ia,ha<oa-1&&(W+=" ")):W+=ia;let ra=b(W,d);ra>A&&(ha===0?q.push(kh("",0,2)):(q.push(kh(_,fa,2)),W=ia,f===1&&(ha<oa-1&&(W+=" ")),ra=b(W,d)),A=i),_=W,fa=ra}q.push(kh(_,fa,I))}return q}let kh=function(a,b,d){return{text:a,width:b,newLineMode:d}};var eh;(function(a){a[a.left=0]="left",a[a.center=1]="center",a[a.right=2]="right"})(eh||(eh={}));var fh;(function(a){a[a.top=0]="top",a[a.center=1]="center",a[a.bottom=2]="bottom"})(fh||(fh={}));class Ve{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(a){return this.items.push(a),this}pushMultiple(a){return this.items.push.apply(this.items,a),a.length=0,this}clear(){return this.items.length=0,this}}class Hn{constructor(){this.pens=[]}destroy(){this.pens.length=0}addPen(a){return this.pens.push(a),this}get firstPen(){return this.pens[0]}get lastPen(){return this.pens[this.pens.length-1]}hasPen(){return this.pens.length>0}get pensCount(){return this.pens.length}get startIndex(){let a=this.pens[0];return a?a.startIndex:0}get width(){let a=this.lastPen;return a?a.lastX:0}}function Pj(a){if(Array.isArray(a))a.length=0;else for(let b in a)delete a[b]}function We(a,b=Array.isArray(a)?[]:{}){Pj(b);if(Array.isArray(a)){b.length=a.length;for(let d=0,f=a.length;d<f;d++)b[d]=a[d]}else for(let d in a)b[d]=a[d];return b}class In{constructor(){this.text="";this.x=0;this.y=0;this.width=0;this.height=0;this.ascent=0;this.descent=0;this.prop={};this.newLineMode=Cb.none;this.startIndex=0}set(a="",b=0,d=0,f=0,i=0,l=0,q=0,u={},v=Cb.none,A=0){return this.text=a,this.x=b,this.y=d,this.width=f,this.height=i,this.ascent=l,this.descent=q,this.prop=u,this.newLineMode=v,this.startIndex=A,this}clone(){let a=new In();return a.set(this.text,this.x,this.y,this.width,this.height,this.ascent,this.descent,We(this.prop),this.newLineMode,this.startIndex),a}get plainText(){return this.newLineMode===Cb.raw?`${this.text}
`:this.text}get wrapText(){return this.newLineMode!==Cb.none?`${this.text}
`:this.text}get plainTextLength(){let a=this.text.length;return this.newLineMode===Cb.raw&&(a+=1),a}get endIndex(){return this.startIndex+this.plainTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}}class gh{constructor({penPool:a}){this.pens=[];this.lines=[];this.pens=[],this.lines=[],this.penPool=a}destroy(){this.freePens()}freePens(){return this.penPool.pushMultiple(this.pens),this.lines.forEach(a=>{a.destroy()}),this.lines.length=0,this.maxLineWidth=0,this.totalLineHeight=0,this}addTextPen(a,b,d,f,i,l,q,u,v=Cb.none){let A=this.penPool.pop();return A==null&&(A=new In()),A.set(a,b,d,f,i,l,q,u,v),this.addPen(A),this}addImagePen(a,b,d,f,i){return this.addTextPen("",a,b,d,f,f,0,i,Cb.none),this}addNewLinePen(a){let b=this.lastPen;return b&&b.newLineMode===Cb.none&&(b.newLineMode=a),this}addPen(a){let b=this.lastPen;b==null?a.startIndex=0:a.startIndex=b.endIndex,this.pens.push(a);let d=this.lastLine;return d==null&&(d=new Hn(),this.lines.push(d)),d.addPen(a),a.newLineMode!==Cb.none&&(d=new Hn(),this.lines.push(d)),this}clone(a){a==null&&(a=new gh({penPool:this.penPool})),a.freePens();const b=this.pens;for(let i=0,l=b.length;i<l;i++)a.addPen(b[i].clone());const d=this.lines,f=a.lines;for(let i=0,l=d.length;i<l;i++){const q=d[i],u=f[i];u.y=q.y,u.height=q.height}return a}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(a){if(a>=this.lines.length)return this.getLineEndIndex(a);{let b=this.lines[a];if(!b)return 0;let d=b.firstPen;return d?d.startIndex:0}}getLineEndIndex(a){let b=this.lines.length;a>=b&&(a=b-1);for(let d=a;d>=0;d--){let f=this.lines[d];if(f&&f.hasPen())return f.lastPen.endIndex}return 0}getLineWidth(a){let b=this.lines[a];return b?b.width:0}getLineHeights(a=[]){return this.lines.forEach(function(b){a.push(b.height)}),a}get lineCount(){return this.lines.length}get plainText(){let a=[],b=this.pens;for(let d=0,f=b.length;d<f;d++)a.push(b[d].plainText);return a.join()}get plainTextLength(){let a=0;for(let b=0,d=this.pens.length;b<d;b++)a+=this.pens[b].plainTextLength;return a}getSliceTagText(a,b,d=0,f,i=!1){if(f===void 0){let A=this.lastPen;if(!A)return"";f=A.endIndex}let l=[],q;for(var u=0,v=this.pens.length;u<v;u++){let A=this.pens[u],E=A.endIndex;if(E<=d)continue;let H=i?A.wrapText:A.plainText,O=A.prop,I=A.startIndex,Q=I>=d&&E<=f;Q||(H=H.substring(d-I,f-I)),b?l.push(a.call(b,H,O,q)):l.push(a(H,O,q)),q=O;if(E>=f)break}return l.join()}}function sv(a,b,d){let f=We(a,d);for(let i in b)f.hasOwnProperty(i)&&(f[i]=b[i]);return f}function Dj(a,b,d={key:b}){d=sv(Ey,d);let f=Tb.get(),i=f.get(d.key);if(!i)return;let l=i.getFrame(d.frame);if(!l)return;let q=d.width,u=d.height;(q===void 0||u===void 0)&&(q===void 0&&u===void 0?(d.width=l.width,d.height=l.height):q===void 0?d.width=l.width*(u/l.height):u===void 0&&(d.height=l.height*(q/l.width))),a.images.set(b,d)}const Ey={key:void 0,frame:void 0,width:void 0,height:void 0,y:0,left:0,right:0,top:0,bottom:0};class ov{constructor(){this.images=new Map()}destroy(){this.images.clear()}add(a,b){if(typeof a==="string")Dj(this,a,b);else if(Array.isArray(a)){let d=a;for(let f=0,i=d.length;f<i;f++)Dj(this,d[f])}else{let d=a;for(a in d)Dj(this,a,d[a])}return this}remove(a){return this.images.delete(a),this}get(a){return this.images.get(a)}getOuterWidth(a){let b=this.images.get(a);return b?b.width+b.left+b.right:0}getOuterHeight(a){let b=this.images.get(a);return b?b.height+b.top+b.bottom:0}getFrame(a){let b=this.images.get(a);if(!b)return;let d=Tb.get(),f=d.get(b.key);if(!f)return;let i=f.getFrame(b.frame);return i}hasTexture(a){return!!this.getFrame(a)}}function Bj(a,b){a.font=b.font}function Cj(a,b){a.textBaseline="alphabetic",a.textAlign="start",a.fillStyle=b.fillStyle,a.strokeStyle=b.strokeStyle,a.lineWidth=b.strokeThickness,a.lineCap="round",a.lineJoin="round",a.imageSmoothingEnabled=b.antialias}function Gn(a,b,d){d?(a.shadowColor=b.shadowColor,a.shadowBlur=b.shadowBlur,a.shadowOffsetX=b.shadowOffsetX,a.shadowOffsetY=b.shadowOffsetY):(a.shadowColor="#000",a.shadowBlur=0,a.shadowOffsetX=0,a.shadowOffsetY=0)}function tv(a,b){return b.measureText(a).width}function uv(a,b,d=0){let f=b.measureText(a),i=f.actualBoundingBoxAscent,l=f.actualBoundingBoxDescent;return(!i&&!l||a==="")&&(i=d,l=0),Hj.ascent=i,Hj.descent=l,Hj.height=Math.ceil(Math.abs(i)+Math.abs(l)),Hj}let Hj={ascent:0,descent:0,height:0};function pv(a,b,d,f,i){a.freePens();if(b==="")return a;let l=d.canvas,q=d.context,u=d.parent,v=d.parser.splitText(b),A,E,H=0;for(var O=0,I=v.length;O<I;O++){let ha=d.parser.tagTextToProp(v[O],A),oa=ha.text;A=ha.prop;if(A.img){let ia,ra;d.imageManager?(ia=d.imageManager.getOuterWidth(A.img),ra=d.imageManager.getOuterHeight(A.img)):(ia=0,ra=0),i>0&&f!==Qb.none&&(i<H+ia&&(a.addNewLinePen(Cb.wrapped),H=0)),a.addImagePen(H,0,ia,ra,We(A)),H+=ia}else if(oa!==""){q.save();let ia=d.parser.propToStyle(u,A);Bj(q,ia),Cj(q,ia);let ra=ia.strokeThickness,ua=ra/2;E=vv(oa,tv,q,f,i,H);let la=uv("|Mq",q);for(let N=0,R=E.length;N<R;N++){const x=E[N],G=la.height+ra,F=la.ascent+ua,J=la.descent+ua;a.addTextPen(x.text,H,0,x.width,G,F,J,We(A),x.newLineMode),x.newLineMode!==Cb.none?H=0:H+=x.width}q.restore()}}let Q=a.lines,W=d.parent.lineSpacing,_=0,fa=0;for(let ha=0,oa=Q.length;ha<oa;ha++){const ia=Q[ha],ra=ia.pens,ua=ra.length;let la=0,N=0;for(let G=0;G<ua;G++){const F=ra[G];la=Math.max(la,F.ascent),N=Math.max(N,F.descent)}const R=la+N,x=fa+la;for(let G=0;G<ua;G++)ra[G].y+=x;ia.y=x,ia.height=R,_=Math.max(_,ia.width),fa+=R+W}return a.maxLineWidth=_,a.totalLineHeight=fa-W,a}const qq={PI2:Math.PI*2,HALF_PI:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};class Dy extends _b{constructor(a,b,d,f,i){super(a,b,d,f);this.name=i}}class rv{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return this.hitAreas.length=0,this}add(a,b,d,f,i){let l=new Dy(b,d,f,i,a);return this.hitAreas.push(l),this}getFirstHitArea(a,b){for(let d=0,f=this.hitAreas.length;d<f;d++){let i=this.hitAreas[d];if(i.contains(a,b))return i}return null}}function qv(a,b,d,f,i,l=0,q=0,u=a.penManager){a.hitAreaManager&&a.hitAreaManager.clear();let v=u.totalLineHeight;if(v===0)return;const A=f<a.textWidth||i<a.textHeight;let E=a.context;E.save();let H=a.parent;yy(a,H),zy(a,H),A&&(E.beginPath(),E.rect(b,d,f,i),E.clip());let O=H.align%3,I=Math.floor(H.align/3),Q=d-q;switch(I){case fh.center:Q+=(i-v)/2;break;case fh.bottom:Q+=i-v-2;break}let W=u.lines,_=Q;const fa=b+i;for(let ha=0,oa=W.length;ha<oa;ha++){let ia=W[ha];if(_>fa)break;const ra=_+ia.height;if(ra<d){_=ra;continue}let ua=ia.width;if(ua===0){_=ra;continue}let la=b-l;switch(O){case eh.center:la+=(f-ua)/2;break;case eh.right:la+=f-ua;break}let N=ia.pens;for(let R=0,x=N.length;R<x;R++)xy(a,N[R],la,Q);_=ra}E.restore()}function xy(a,b,d,f){d+=b.x,f+=b.y;let i=a.canvas,l=a.context,q=a.parent;l.save();let u=a.parser.propToStyle(q,b.prop);Bj(l,u),Cj(l,u),u.underlineThickness>0&&b.width>0&&Ay(a,d,f,b.width,u),b.isTextPen&&By(a,d,f,b.text,u),b.isImagePen&&Cy(a,d,f,b.prop.img,u),l.restore(),b.hasAreaMarker&&b.width>0&&(a.hitAreaManager||(a.hitAreaManager=new rv()),a.hitAreaManager.add(b.prop.area,d,f,b.width,b.height))}function yy(a,b){let d=a.canvas,f=a.context;f.clearRect(0,0,d.width,d.height)}function zy(a,b){let d=a.canvas,f=a.context;f.clearRect(0,0,d.width,d.height);const i=b.backgroundFillStyle,l=b.backgroundStrokeStyle;if(i||l){const q=b.backgroundStrokeThickness,u=q/2,v=b.cornerRadius,A=b.cornerIteration,E=u,H=u,O=d.width-q,I=d.height-q;Vg(d,f,E,H,O,I,v,i,l,q,b.backgroundFillColor2,b.backgroundIsHorizontalGradient,A)}else f.clearRect(0,0,d.width,d.height)}function Ay(a,b,d,f,i){d+=i.underlineOffsetY-i.underlineThickness/2;let l=a.context,q=l.lineCap;l.lineCap="butt",l.beginPath(),l.strokeStyle=i.underlineStyle,l.lineWidth=i.underlineThickness,l.moveTo(b,d),l.lineTo(b+f,d),l.stroke(),l.lineCap=q}function By(a,b,d,f,i){let l=a.context;i.strokeStyle&&i.strokeStyle!=="none"&&i.strokeThickness>0&&(Gn(l,i,i.shadowStroke),l.strokeText(f,b,d)),i.fillStyle&&i.fillStyle!=="none"&&(Gn(l,i,i.shadowFill),l.fillText(f,b,d))}function Cy(a,b,d,f,i){let l=a.imageManager;if(!l)return;let q=l.get(f),u=l.getFrame(f);b+=q.left,d+=q.y-q.height;let v=a.context;v.drawImage(u.texture.image,u.x,u.y,u.width,u.height,b,d,q.width,q.height)}class fv{constructor({canvas:a,context:b,parent:d,parser:f,penPool:i=new Ve()}){this.textScrollX=0;this.textScrollY=0;this.canvas=a,this.context=b,this.parser=f,this.parent=d,this.penPool=i,this.penManager=new gh({penPool:i})}destroy(){this.parser.destroy(),this.canvas=null,this.context=null,this.parser=null,this.parent=null,this.penManager&&(this.penManager.destroy(),this.penManager=null),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=null),this.imageManager&&(this.imageManager.destroy(),this.imageManager=null),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=null)}get textWidth(){return this.penManager.maxLineWidth}get textHeight(){return this.penManager.totalLineHeight}updatePenManager(a,b,d,f=this.penManager){return pv(f,a,this,b,d)}draw(a,b,d,f,i=0,l=0){return qv(this,a,b,d,f,i,l,this.penManager),this}get lines(){return this.penManager.lines}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=new gh({penPool:this.penPool})),this._tmpPenManager}getPlainText(a,b,d){let f;return a==null?f=this.penManager.plainText:f=this.parser.splitText(a,!0).join(""),(b!=null||d!=null)&&(b==null&&(b=0),d==null&&(d=f.length),f=f.substring(b,d)),f}getPenManager(a,b){return a===void 0?this.clonePenManager(b,this.penManager):(b===void 0&&(b=new gh({penPool:this.penPool})),this.updatePenManager(a,this.parent.wrapMode,this.parent.wrapWidth,b),b)}getText(a,b,d,f){if(a==null)return this.penManager.getSliceTagText(this.parser.propToTagText,this.parser,b,d,f);let i=this.tmpPenManager;return this.updatePenManager(a,this.parent.wrapMode,this.parent.wrapWidth,i),i.getSliceTagText(this.parser.propToTagText,this.parser,b,d,f)}clonePenManager(a,b=this.penManager){return b.clone(a)}getLastPen(a=this.penManager){return a.lastPen}addImageInfo(a,b){return this.imageManager===void 0&&(this.imageManager=new ov()),this.imageManager.add(a,b),this}}function tn(a,b=!0,d=!0){let f=a.canvasText;b&&f.updatePenManager(a.text,a.wrapMode,a.wrapWidth);if(d){let i=a.padding,l,q,u,v;a.fixedWidth===0?(l=f.textWidth,u=l+i.left+i.right):(u=a.fixedWidth,l=u-i.left-i.right,l>f.textWidth&&(l=f.textWidth)),a.fixedHeight===0?(q=f.textHeight,v=q+i.top+i.bottom):(v=a.fixedHeight,q=v-i.top-i.bottom,q>f.textHeight&&(q=f.textHeight));let A=a.resolution,E=Math.ceil(u*A),H=Math.ceil(v*A),O=a.canvas;(O.width!==E||O.height!==H)&&(O.width=E,O.height=H,a.texture.setSize(u,v),a.setSize(u,v));let I=a.context;I.save(),I.scale(A,A),f.draw(i.left,i.top,l,q,0,a.textScrollY),I.restore(),a.texture.binding&&a.texture.binding.update(),a.setDirty(Ga.TEXTURE)}}function yj(a,b=0,d=0){a.fixedWidth=b,a.fixedHeight=d,Aj(a)}function un(a,b,d,f,i){const l=a.padding;if(typeof b==="number")l.left=b,l.right=d===void 0?b:d,l.top=f===void 0?b:f,l.bottom=i===void 0?b:i;else{let q=b;l.left=q.left??0,l.right=q.right??0,l.top=q.top??0,l.bottom=q.bottom??0}Aj(a)}function Aj(a){const b=a.fixedWidth;if(a.wrapMode!==Qb.none){const d=a.padding,f=b-d.left-d.right;a.wrapWidth=Math.max(f,0)}else a.wrapWidth=0}function gv(a,b,d=!1){d?a.textScrollYPercentage=b:a.textScrollY=b}function vn(a,b){typeof b==="string"&&(b=sb[b]),a.align=b}function wn(a,b=0){a.lineSpacing=b}function xn(a,b,d,f=0,i=0,l,q=!0,u){d||(f=0),a.backgroundFillStyle=b,a.backgroundFillColor2=l,a.backgroundIsHorizontalGradient=q,a.backgroundStrokeStyle=d,a.backgroundStrokeThickness=f,a.cornerRadius=i,a.cornerIteration=u}function hv(a,b,d){b&&yn(a,b),d&&zn(a,d)}function yn(a,b){a.fontFamily=b}function zn(a,b){typeof b==="number"&&(b=`${b}px`),a.fontSize=b}function An(a,b){a.fillStyle=b}function Bn(a,b,d=2){a.strokeStyle=b,a.strokeThickness=d}function Cn(a,b="#000",d=5,f=0,i=0,l=!1,q=!1){a.shadowColor=b,a.shadowBlur=d,a.shadowOffsetX=f,a.shadowOffsetY=i,a.shadowFill=l,a.shadowStroke=q}function Dn(a,b,d){typeof b==="string"&&(b=Qb[b]),a.wrapMode=b,d===void 0?Aj(a):a.wrapWidth=d}function En(a,b,d=2,f=0){a.underlineStyle=b,a.underlineThickness=d,a.underlineOffsetY=f}function sn(a,b,d){a.canvasText.addImageInfo(b,d)}function iv(a,b,d,f){return b=a.canvasText.getText(b,d,f,!0),b.split(Fn)}function jv(a,b,d,f){return a.canvasText.getPlainText(b,d,f)}function kv(a,b,d,f){return a.canvasText.getText(b,d,f,!1)}function lv(a,b,d,f){return a.canvasText.getText(b,d,f,!1)}function mv(a,b){return a.canvasText.clonePenManager(b)}function nv(a,b,d){return a.canvasText.getPenManager(b,d)}class zj extends nd{constructor(a,b,d="",{width:f=0,height:i=0,padding:l,wrapMode:q=Qb.none,backgroundFillStyle:u,backgroundFillColor2:v,backgroundIsHorizontalGradient:A,backgroundStrokeStyle:E,backgroundStrokeThickness:H,cornerRadius:O=0,cornerIteration:I,align:Q=sb.top_left,lineSpacing:W=0,fontFamily:_="monospace",fontSize:fa="16px",fillStyle:ha="#fff",strokeStyle:oa,strokeThickness:ia=1,shadowColor:ra="#000",shadowBlur:ua=4,shadowOffsetX:la=0,shadowOffsetY:N=0,shadowFill:R=!1,shadowStroke:x=!1,underlineStyle:G="#fff",underlineThickness:F=1,underlineOffsetY:J=0,images:U}={},K){super(a,b,Md());this.antialias=!1;this.fontFamily="monospace";this.fontSize="16px";this.fillStyle="#fff";this.strokeThickness=1;this.shadowStroke=!1;this.shadowFill=!1;this.shadowColor="#000";this.shadowBlur=4;this.shadowOffsetX=0;this.shadowOffsetY=0;this.underlineStyle="#fff";this.underlineThickness=1;this.underlineOffsetY=0;this.align=sb.top_left;this.lineSpacing=0;this.wrapMode=Qb.none;this.wrapWidth=0;this.fixedWidth=0;this.fixedHeight=0;this.padding={left:0,right:0,top:0,bottom:0};this._textScrollY=0;this.type="rexText";const ca=yb.get();this.resolution=ca.renderer.resolution,this.canvas=this.texture.image,this.context=this.canvas.getContext("2d"),this.canvasText=new fv({canvas:this.canvas,context:this.context,parent:this,parser:K}),yj(this,f,i),l&&un(this,l),Dn(this,q),vn(this,Q),wn(this,W),xn(this,u,E,H,O,v,A,I),yn(this,_),zn(this,fa),An(this,ha),oa&&Bn(this,oa,ia),Cn(this,ra,ua,la,N,R,x),En(this,G,F,J),U&&sn(this,U),this.setText(d)}destroy(a){this.canvasText.destroy(),this.texture.destroy(),this.canvas=null,this.context=null,super.destroy(a)}updateText(a=!0,b=!0){return tn(this,a,b),this}get text(){return this._text}set text(a){this.setText(a)}setText(a="",b=!0){return Array.isArray(a)&&(a=a.join(`
`)),a!==this._text&&(this._text=a.toString(),b&&this.updateText()),this}setBackgroundStyle(a,b,d=2,f=0,i,l=!0){return xn(this,a,b,d,f,i,l),this}setFixedSize(a,b){return yj(this,a,b),this}setPadding(a,b,d,f){return un(this,a,b,d,f),this}setTextScrollY(a,b=!1){return gv(this,a,b),this}setAlign(a){return vn(this,a),this}setLineSpacing(a=0){return wn(this,a),this}setFont(a,b){return hv(this,a,b),this}setFillStyle(a){return An(this,a),this}setStrokeStyle(a,b=2){return Bn(this,a,b),this}setShadow(a="#000",b=5,d=0,f=0,i=!1,l=!1){return Cn(this,a,b,d,f,i,l),this}resize(a,b){return yj(this,a,b),tn(this),this}setWrapMode(a,b=0){return Dn(this,a,b),this}setUnderline(a,b=2,d=0){return En(this,a,b,d),this}addImageInfo(a,b){return sn(this,a,b),this}getWrappedText(a,b,d){return iv(this,a,b,d)}getPlainText(a,b,d){return jv(this,a,b,d)}getText(a,b,d){return kv(this,a,b,d)}getSubString(a,b,d){return lv(this,a,b,d)}clonePenManager(a){return mv(this,a)}getPenManager(a,b){return nv(this,a,b)}get textScrollY(){return this._textScrollY}set textScrollY(a){this._textScrollY=a}get textScrollYPercentage(){return this._textScrollY/(this.totalTextHeight-this.displayTextHeight)}set textScrollYPercentage(a){const b=this.displayTextHeight,d=this.totalTextHeight;d<=b?this._textScrollY=0:this._textScrollY=(d-b)*a}get totalTextHeight(){return this.canvasText.textHeight}get displayTextHeight(){const a=this.padding;return this.height-a.top-a.bottom}}class Ej{destroy(){}}const Fj={text:null,prop:null},Gj={font:void 0,fontFamily:void 0,fontStyle:void 0,fontSize:void 0,fillStyle:void 0,strokeStyle:void 0,strokeThickness:void 0,shadowColor:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,shadowBlur:void 0,shadowStroke:void 0,shadowFill:void 0,underlineStyle:void 0,underlineThickness:void 0,underlineOffsetY:void 0,image:void 0};class wv extends Ej{splitText(a,b=!1){const d=[];let f=0;for(;;){const l=Jn.exec(a);if(!l)break;const q=l[0],u=Jn.lastIndex-q.length;f<u&&d.push(a.substring(f,u)),b||d.push(q),f=Jn.lastIndex}const i=a.length;return f<i&&d.push(a.substring(f,i)),d}tagTextToProp(a,b){let d,f;b==null&&(b={}),b.img&&Ab(b,ad,"img"),Hy.test(a)?(Ab(b,nc,"b",!0),d=""):Iy.test(a)?(Ab(b,ad,"b"),d=""):Jy.test(a)?(Ab(b,nc,"i",!0),d=""):Ky.test(a)?(Ab(b,ad,"i"),d=""):xv.test(a)?(f=a.match(xv),Ab(b,nc,"size",f[1]+"px"),d=""):Ly.test(a)?(Ab(b,ad,"size"),d=""):yv.test(a)?(f=a.match(yv),Ab(b,nc,"color",f[1]),d=""):My.test(a)?(Ab(b,ad,"color"),d=""):zv.test(a)?(f=a.match(zv),Ab(b,nc,"u",!0),d=""):Av.test(a)?(f=a.match(Av),Ab(b,nc,"u",f[1]),d=""):Ny.test(a)?(Ab(b,ad,"u"),d=""):Oy.test(a)?(Ab(b,nc,"shadow",!0),d=""):Bv.test(a)?(f=a.match(Bv),Ab(b,nc,"shadow",f[1]),d=""):Py.test(a)?(Ab(b,ad,"shadow"),d=""):Qy.test(a)?(Ab(b,nc,"stroke",!0),d=""):Cv.test(a)?(f=a.match(Cv),Ab(b,nc,"stroke",f[1]),d=""):Ry.test(a)?(Ab(b,ad,"stroke"),d=""):Dv.test(a)?(f=a.match(Dv),Ab(b,nc,"img",f[1]),d=""):Sy.test(a)?(Ab(b,ad,"img"),d=""):Ev.test(a)?(f=a.match(Ev),Ab(b,nc,"area",f[1]),d=""):Ty.test(a)?(Ab(b,ad,"area"),d=""):d=a;const i=Fj;return i.text=d,i.prop=b,i}propToStyle(a,b){const d=Gj;return b.hasOwnProperty("img")?d.image=b.img:(d.image=null,d.fontFamily=a.fontFamily,d.fontSize=b.size??a.fontSize,d.fontStyle=Fy(b.b,b.i),d.font=`${d.fontStyle} ${d.fontSize} ${d.fontFamily}`,d.fillStyle=b.color??a.fillStyle,b.hasOwnProperty("stroke")?b.stroke===!0?(d.strokeStyle=a.strokeStyle,d.strokeThickness=a.strokeThickness):(d.strokeStyle=b.stroke,d.strokeThickness=a.strokeThickness):(d.strokeStyle=a.strokeStyle,d.strokeThickness=0)),b.hasOwnProperty("shadow")?b.shadow===!0?(d.shadowColor=a.shadowColor,d.shadowOffsetX=a.shadowOffsetX,d.shadowOffsetY=a.shadowOffsetY,d.shadowBlur=a.shadowBlur,d.shadowStroke=!0,d.shadowFill=!0):(d.shadowColor=b.shadow,d.shadowOffsetX=a.shadowOffsetX,d.shadowOffsetY=a.shadowOffsetY,d.shadowBlur=a.shadowBlur,d.shadowStroke=!0,d.shadowFill=!0):(d.shadowColor="#000",d.shadowOffsetX=0,d.shadowOffsetY=0,d.shadowBlur=0,d.shadowStroke=!1,d.shadowFill=!1),b.hasOwnProperty("u")?b.u===!0?(d.underlineStyle=a.underlineStyle,d.underlineThickness=a.underlineThickness,d.underlineOffsetY=a.underlineOffsetY):(d.underlineStyle=b.u,d.underlineThickness=a.underlineThickness,d.underlineOffsetY=a.underlineOffsetY):(d.underlineStyle="#000",d.underlineThickness=0,d.underlineOffsetY=0),d}propToTagText(a,b,d){d==null&&(d=Gy);let f=[];for(const l in d){if(b.hasOwnProperty(l))continue;f.push(`[/${l}]`)}a=`${f.join()}${a}`;let i=[];for(const l in b){if(d[l]===b[l])continue;switch(l){case"size":const q=b.size.replace("px","");i.push(`[size=${q}]`);break;case"color":case"img":case"area":i.push(`[${l}=${b[l]}]`);break;case"stroke":case"u":b[l]===!0?i.push(`[${l}]`):i.push(`[${l}=${b[l]}]`);break;default:i.push(`[${l}]`);break}}return a=`${a}${i.join()}`,a}}const Ab=function(a,b,d,f){return b===nc?a[d]=f:a.hasOwnProperty(d)&&delete a[d],a};var Fy=function(a,b){return a&&b?"bold italic":a?"bold":b?"italic":""};const Gy={},Jn=/\[b\]|\[\/b\]|\[i\]|\[\/i\]|\[size=(\d+)\]|\[\/size\]|\[color=([a-z]+|#[0-9abcdef]+)\]|\[\/color\]|\[u\]|\[u=([a-z]+|#[0-9abcdef]+)\]|\[\/u\]|\[shadow\]|\[shadow=([a-z]+|#[0-9abcdef]+)\]|\[\/shadow\]|\[stroke\]|\[stroke=([a-z]+|#[0-9abcdef]+)\]|\[\/stroke\]|\[img=([^\]]+)\]|\[\/img\]|\[area=([^\]]+)\]|\[\/area\]/ig;var Hy=/\[b\]/i,Iy=/\[\/b\]/i,Jy=/\[i\]/i,Ky=/\[\/i\]/i,xv=/\[size=(\d+)\]/i,Ly=/\[\/size\]/i,yv=/\[color=([a-z]+|#[0-9abcdef]+)\]/i,My=/\[\/color\]/i,zv=/\[u\]/i,Av=/\[u=([a-z]+|#[0-9abcdef]+)\]/i,Ny=/\[\/u\]/i,Oy=/\[shadow\]/i,Bv=/\[shadow=([a-z]+|#[0-9abcdef]+)\]/i,Py=/\[\/shadow\]/i,Qy=/\[stroke\]/i,Cv=/\[stroke=([a-z]+|#[0-9abcdef]+)\]/i,Ry=/\[\/stroke\]/i,Dv=/\[img=([^\]]+)\]/i,Sy=/\[\/img\]/i,Ev=/\[area=([^\]]+)\]/i,Ty=/\[\/area\]/i;const ad=!1,nc=!0;class Xg extends zj{constructor(a,b,d="",f){super(a,b,d,f,new wv());this.type="rexBBcodeText"}}class Fv extends Ej{constructor(a){super();this.tags=new Map();if(a)for(const b in a)this.addTag(b,a[b])}destroy(){this.tags.clear()}addTag(a,b){return this.tags.set(a,b),this}isTextTag(a){const b=this.tags.get(a);return b?b.img==null:!1}splitText(a,b=!1){const d=[];let f=0;for(;;){const l=Kn.exec(a);if(!l)break;const q=l[0],u=Kn.lastIndex-q.length;f<u&&d.push(a.substring(f,u));if(!b)d.push(q);else if(Hv.test(q)){const v=q.match(Iv);d.push(v[2])}else if(Jv.test(q)){const v=q.match(Kv);d.push(v[2])}f=Kn.lastIndex}const i=a.length;return f<i&&d.push(a.substring(f,i)),d}tagTextToProp(a,b){let d,f;if(Hv.test(a)){const l=a.match(Iv);if(l!=null){const q=l[1],u=this.tags;f=u.get(q)??{},f._class=q,d=l[2]}}else if(Jv.test(a)){const l=a.match(Kv);if(l!=null){const q=l[1];f=Uy(q),f._style=q,d=l[2]}}d===void 0&&(d=a),f===void 0&&(f={});const i=Fj;return i.text=d,i.prop=f,i}propToStyle(a,b){const d=Gj;if(b.hasOwnProperty("img"))d.image=b.img;else{d.image=null,d.fontFamily=b.family??b.fontFamily??b["font-family"]??a.fontFamily;let f=b.size??b.fontSize??b["font-size"]??a.fontSize;typeof f==="number"&&(f=`${f}px`),d.fontSize=f,d.fontStyle=b.style??b.fontStyle??b["font-style"]??"",d.font=`${d.fontStyle} ${d.fontSize} ${d.fontFamily}`,d.fillStyle=b.color??b["font-color"]??a.fillStyle;if(b.hasOwnProperty("stroke")){const i=b.stroke;d.strokeStyle=i.color??a.strokeStyle,d.strokeThickness=i.thinkness??a.strokeThickness}else d.strokeStyle=a.strokeStyle,d.strokeThickness=a.strokeThickness}if(b.hasOwnProperty("shadow")){const f=b.shadow;d.shadowColor=f.color??a.shadowColor,d.shadowOffsetX=f.offsetX??a.shadowOffsetX,d.shadowOffsetY=f.offsetY??a.shadowOffsetY,d.shadowBlur=f.blur??a.shadowBlur,d.shadowStroke=!0,d.shadowFill=!0}else d.shadowColor=a.shadowColor,d.shadowOffsetX=a.shadowOffsetX,d.shadowOffsetY=a.shadowOffsetY,d.shadowBlur=a.shadowBlur,d.shadowStroke=a.shadowStroke,d.shadowFill=a.shadowFill;if(b.hasOwnProperty("u")||b.hasOwnProperty("underline")){const f=b.u??b.underline;d.underlineStyle=f.color??a.underlineStyle,d.underlineThickness=f.thinkness??a.underlineThickness,d.underlineOffsetY=f.offset??a.underlineOffsetY}else d.underlineStyle="#000",d.underlineThickness=0,d.underlineOffsetY=0;return d}propToTagText(a,b,d){if(b.hasOwnProperty("_class")){if(a===""){if(this.isTextTag(b._class))return""}return`<class=${b._class}>${a}</class>`}else if(b.hasOwnProperty("_style"))return`<style=${b._style}>${a}</style>`}}function Uy(a){const b=a.split(";"),d={};for(var f=0,i=b.length;f<i;f++){const[l,q]=b[f].split(":");if(Gv(l)||Gv(q))continue;if(l==="stroke"){const u=q.split(" "),v={},A=u.length;A>=1&&(v.color=u[0]),A>=2&&(v.thinkness=parseInt(u[1].replace("px",""))),d.stroke=v}else if(l==="shadow"){const u=q.split(" "),v={},A=u.length;A>=1&&(v.color=u[0]),A>=2&&(v.offsetX=parseInt(u[1].replace("px",""))),A>=3&&(v.offsetY=parseInt(u[2].replace("px",""))),A>=4&&(v.blur=parseInt(u[3].replace("px",""))),d.shadow=v}else if(l==="u"||l==="underline"){const u=q.split(" "),v={},A=u.length;A>=1&&(v.color=u[0]),A>=2&&(v.thinkness=parseInt(u[1].replace("px",""))),A>=3&&(v.offset=parseInt(u[2].replace("px",""))),d[l]=v}else d[l]=q}return d}function Gv(a){return a=a.replace(Vy,""),a.length===0}const Kn=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,Hv=/<\s*class=/i,Iv=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,Jv=/<\s*style=/i,Kv=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,Vy=/^\s+|\s+$/;class Yg extends zj{constructor(a,b,d="",f){const i=f?f.tags:void 0;super(a,b,d,f,new Fv(i));this.type="rexTagText"}get parser(){return this.canvasText.parser}addTag(a,b){return this.parser.addTag(a,b),this}addTags(a){for(const b in a)this.parser.addTag(b,a[b]);return this}}const Fc={};$d(Fc,{BBCodeText:()=>Xg,BaseSizer:()=>Oa,Chart:()=>Sg,FixedWidthSizer:()=>oj,GridSizer:()=>qj,Label:()=>sj,MaskedImage:()=>Tg,OverlapSizer:()=>tj,RectangleCanvas:()=>Ug,RoundRectangleCanvas:()=>Wg,Sizer:()=>Of,TagText:()=>Yg});function mc(a,b){return a===void 0||b===void 0?void 0:`${a}|${b}`}function Rr(a,b){let d=a.split("|");return b===void 0&&(b=Kx),b.x=parseInt(d[0]),b.y=parseInt(d[1]),b}let Kx={x:0,y:0};let hw=new Ve();function Zq(){let a=hw.pop();return a===null&&(a=new Map()),a}function Bi(a){hw.push(a)}function Xq(a,b,d,f,i,l,q,u){if(d===l&&f===q&&i===u)return;let v=mc(d,f),A=mc(l,q);if(v){let E=b.get(v);E.delete(i);if(v===A){E.set(u,a);return}else E.size===0&&(Bi(E),b.delete(v))}if(A){let E=b.get(A);E?E.set(u,a):(E=Zq(),E.set(u,a),b.set(A,E))}}function Jl(a,b,d,f){let i=mc(b,d),l=a.get(i);l&&(f!==void 0?(l.delete(f),l.size===0&&(Bi(l),a.delete(i))):(l.clear(),Bi(l),a.delete(i)))}let iw=new Ve();function Yq(){let a=iw.pop();return a===null&&(a=new Set()),a}function Il(a){iw.push(a)}function Ai(a,b,d,f){if(d===f)return;if(d!==void 0){let i=b.get(d);i&&(i.delete(a),i.size===0&&(Il(i),b.delete(d)))}if(f!==void 0){let i=b.get(f);i?i.add(a):(i=Yq(),i.add(a),b.set(f,i))}}function De(a,b,d){let f=a.get(b);f&&(f.delete(d),f.size===0&&(Il(f),a.delete(b)))}function Sq(a,b,d,f,i){let l=a.chessToXYZ.get(b),q=l?l.x:void 0,u=l?l.y:void 0,v=l?l.y:void 0;l?(l.x=d,l.y=f,l.z=i):a.chessToXYZ.set(b,{x:d,y:f,z:i}),Xq(b,a.XYToZMap,q,u,v,d,f,i),Ai(b,a.XToChessSet,q,d),Ai(b,a.YToChessSet,u,f),Ai(b,a.ZToChessSet,v,i)}function Ce(a,b,d,f){let i=a.XYToZMap.get(mc(b,d));return i===void 0?null:f!==void 0?i.has(f)?i.get(f):null:i}function Tq(a,b,d,f){if(f!==void 0){let i=Ce(a,b,d,f);if(i===void 0)return;a.chessToXYZ.delete(i),Jl(a.XYToZMap,b,d,f),De(a.XToChessSet,b,i),De(a.YToChessSet,d,i),De(a.ZToChessSet,f,i)}else{let i=Ce(a,b,d);if(i){for(const[l,q]of i)a.chessToXYZ.delete(q),De(a.XToChessSet,b,q),De(a.YToChessSet,d,q),De(a.ZToChessSet,l,q);Jl(a.XYToZMap,b,d)}}}function Uq(a,b){return a.chessToXYZ.has(b)}function Vq(a,b,d,f){return Ce(a,b,d,f)!==null}function Wq(a,b){return a.chessToXYZ.get(b)||null}function Gl(a){let b=-Infinity;for(const[d,f]of a)b<d&&(b=d);return b}function Hl(a){let b=Infinity;for(const[d,f]of a)b>d&&(b=d);return b}class rl{constructor(){this.chessToXYZ=new Map();this.XYToZMap=new Map();this.XToChessSet=new Map();this.YToChessSet=new Map();this.ZToChessSet=new Map();this._xMax=void 0;this._xMin=void 0;this._yMax=void 0;this._yMin=void 0}destroy(){this.clear()}clear(){return this.chessToXYZ.clear(),this.XYToZMap.clear(),this.XToChessSet.clear(),this.YToChessSet.clear(),this.ZToChessSet.clear(),this.clearBounds(),this}clearBounds(){return this._xMax=void 0,this._xMin=void 0,this._yMax=void 0,this._yMin=void 0,this}addChess(a,b,d,f){return Sq(this,a,b,d,f),this.clearBounds(),this}getChess(a,b,d){return Ce(this,a,b,d)}removeChess(a,b,d){return Tq(this,a,b,d),this.clearBounds(),this}hasChess(a){return Uq(this,a)}contains(a,b,d){return Vq(this,a,b,d)}getXYZ(a){return Wq(this,a)}get xMax(){return this._xMax===void 0&&(this._xMax=Gl(this.XToChessSet)),this._xMax}get xMin(){return this._xMin===void 0&&(this._xMin=Hl(this.XToChessSet)),this._xMin}get yMax(){return this._yMax===void 0&&(this._yMax=Gl(this.YToChessSet)),this._yMax}get yMin(){return this._yMin===void 0&&(this._yMin=Hl(this.YToChessSet)),this._yMin}}function Ic(a,b=[]){let d=a.boardData.chessToXYZ;for(const[f,i]of d)b.push(f);return b}function Qi(a){if(typeof a!=="object"||a.nodeType||a===a.window)return!1;try{if(a.constructor&&!{}.hasOwnProperty.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0}function Eg(a){return Qi(a)?!0:typeof a==="object"?a.isTileXYZ:!1}function Pa(a,b){let d=a.boardData.getXYZ(b);return d?d:Eg(b)?b:null}function vb(a,b,d,f){return a.boardData.getChess(b,d,f)}class _q{constructor(a){this.board=null;this.blocker=!1;this.parent=a,this.boot()}boot(){typeof this.parent==="object"&&this.parent.on&&this.parent.on("destroy",this.destroy,this)}destroy(){if(this.board){let a=this.tileXYZ;this.board.boardData.removeChess(a.x,a.y,a.z)}this.parent=void 0,this.board=null}setBoard(a){return this.board=a,this}get tileXYZ(){return this.board==null?null:this.board.boardData.getXYZ(this.parent)}setBlocker(a=!0){return this.blocker=a,this}setBlockEdge(a,b=!0){typeof this.blocker==="boolean"&&(this.blocker={});let d=this.blocker;if(typeof a==="object"){let f=a;for(let i in f)d[i]=f[i]}else d[a]=b;return this}getBlockEdge(a){return typeof this.blocker==="boolean"?!1:this.blocker.hasOwnProperty(a)?this.blocker[a]:!1}}function vc(a){return a.hasOwnProperty("rexChess")||(a.rexChess=new _q(a)),a.rexChess}function gc(a,b,d,f,i,l=!1,q=!1){if(b){let u=Pa(a,b);if(u)d=u.x,f=u.y,i=u.z;else return}else{b=vb(a,d,f,i);if(!b)return}q||a.boardData.removeChess(d,f,i),a._isBoard&&vc(b).setBoard(null),l&&b.destroy&&b.destroy()}function Be(a,b){if(a.infinityMode)return;if(a.height===void 0||a.height<=b){a.height=b;return}let d=Ic(a);d.forEach(f=>{let i=Pa(a,f);i.y>b&&gc(a,f)}),a.height=b}function Ae(a,b){if(a.infinityMode)return;if(a.width===void 0||a.width<=b){a.width=b;return}let d=Ic(a);d.forEach(f=>{let i=Pa(a,f);i.x>b&&gc(a,f)}),a.width=b}class ki{constructor({grid:a=void 0,wrap:b=!1,inifinity:d=!1,width:f=0,height:i=0}={}){this.boardData=new rl(),this._isBoard=!0,this.setGrid(a),this.setWrapMode(b),this.setInfinityMode(d),this.setBoardSize(f,i)}destroy(){}setGrid(a){return this.grid=a,this}setWrapMode(a=!0){return this.wrapMode=a,this}setInfinityMode(a=!0){return this.infinityMode=a,this}setBoardSize(a=0,b=0){return Ae(this,a),Be(this,b),this}}function uc(a,b,d,f){let i;return a.infinityMode?i=!0:i=b>=0&&b<a.width&&d>=0&&d<a.height,i&&f!==void 0&&(i=a.boardData.contains(b,d,f)),i}function Ub(a,b,d,f){return a.grid.getWorldXY(b,d,f)}function yf(a,b,d,f){if(b===void 0){let i=Ic(a);for(let l=0,q=i.length;l<q;l++){let u=i[l],v=Pa(a,u);Ub(a,v.x,v.y,u)}}else{if(d===void 0){let i=Pa(a,b);d=i.x,f=i.y}Ub(a,d,f,b)}}function Nd(a,b,d,f,i,l=!0){if(!uc(a,d,f))return;let q=Pa(a,b);i===void 0&&(q?i=q.z:i=0);if(q&&q.x===d&&q.y===f&&q.z===i)return;let u=vb(a,d,f,i);u&&(gc(a,null,d,f,i),console.warn(`Chess at (${d},${f},${i}) has been removed because of overlapped`)),a.boardData.addChess(b,d,f,i),a._isBoard&&vc(b).setBoard(a),l&&yf(a,b,d,f)}function He(a,b,d,f){return Math.atan2(f-b,d-a)}function Od(a,b,d){let f=Pa(a,b),i=Pa(a,d),l=Ub(a,f.x,f.y,!0),q=l.x,u=l.y;l=Ub(a,i.x,i.y,!0);let v=l.x,A=l.y;return He(q,u,v,A)}function od(a,b,d){let f=d-b;return b+((a-b)%f+f)%f}function xf(a,b,d,f={x:0,y:0}){return f===!0&&(f=Sw),a.wrapMode?b=od(b,0,a.width):!a.infinityMode&&(b<0||b>=a.width)&&(b=null),a.wrapMode?d=od(d,0,a.height):!a.infinityMode&&(d<0||d>=a.height)&&(d=null),f.x=b,f.y=d,f}let Sw={x:0,y:0};function fc(a,b,d,f,i){let l=Pa(a,b);if(l===null)return null;typeof d==="string"&&(d.includes(",")?d=d.split(".").map(A=>parseInt(A,10)):d=parseInt(d));let q=typeof d==="number",u=typeof f==="number";if(q&&u){let A=a.grid.getTileXYAtDirection(l,d,f,i);return xf(a,A.x,A.y,A),(A.x===null||A.y===null)&&(A=null),A}Array.isArray(i)||(i=[]),d===null&&(d=a.grid.allDirections);let v;if(q)if(Array.isArray(f))for(let A=0,E=f.length;A<E;A++)v=fc(a,l,d,f[A]),v!==null&&i.push(v);else{let A,E,H;({end:A=1,start:E=A>0?1:-1,step:H=A>=E?1:-1}=f);if(E===A)v=fc(a,l,d,A),v!==null&&i.push(v);else if(E<A)for(let O=E;O<=A;O+=H)v=fc(a,l,d,O),v!==null&&i.push(v);else for(let O=E;O>=A;O+=H)v=fc(a,l,d,O),v!==null&&i.push(v)}else for(let A=0,E=d.length;A<E;A++)u?(v=fc(a,l,d[A],f),v!==null&&i.push(v)):fc(a,l,d[A],f,i);return i}function Vc(a,b,d=null,f={x:0,y:0}){return fc(a,b,d,1,f)}function uf(a,b,d){b===void 0&&(b=Ww);let f=a.wrapMode,i=a.infinityMode;a.wrapMode=!1,a.infinityMode=!0;let l=Vc(a,b,d,!0);return a.wrapMode=f,a.infinityMode=i,Od(a,b,l)}let Ww={x:0,y:0};const iz=180/Math.PI;function Bf(a){return a*iz}function cr(a,b){let d=b-a;if(d===0)return 0;let f=Math.floor((d- -180)/360);return d-f*360}function tf(a,b,d){d=Bf(d);let f=a.grid.allDirections,i=Infinity,l;for(let q=0,u=f.length;q<u;q++){let v=Bf(uf(a,b,f[q])),A=Math.abs(cr(d,v));A<i&&(i=A,l=q)}return l}function wf(a,b,d){if(b===null||d===null)return null;if(b.x===d.x&&b.y===d.y)return null;let f=a.grid.getNeighborTileDirection(b,d);if(a.wrapMode&&f===null){let i=Vc(a,b,null);for(let l=0,q=i.length;l<q;l++){let u=i[l];if(d.x===u.x&&d.y===u.y){f=l;break}}}return f}function vf(a,b,d){let f=Pa(a,b),i=Pa(a,d);return wf(a,f,i)}function mi(a,b,d){return vf(a,b,d)!==null}function ni(a,b,d,f=!0){let i=Pa(a,b),l=Pa(a,d);return i===null||l===null?null:a.grid.directionBetween(i,l,f)}function Bg(a,b,d=1,f=[]){let i=a.grid.ringToTileXYArray(b,d);for(let l=0,q=i.length;l<q;l++){let u=i[l];uc(a,u.x,u.y)&&f.push(u)}return f}function sl(a,b,d,f=!0,i=[]){for(let l=0;l<=d;l++){let q=f?l:d-l;Bg(a,b,q,i)}return i}function Jc(a,b,d,f,i={x:0,y:0}){return i===!0&&(i=Uw),d===0&&f===0?(i.x=b.x,i.y=b.y):a.grid.offset(b,d,f,i),i}let Uw={x:0,y:0};function tl(a,b){let d=Infinity,f=Infinity,i;for(let u=0,v=b.length;u<v;u++)i=b[u],d=Math.min(d,i.x),f=Math.min(f,i.y);if(d!==0||f!==0)for(let u=0,v=b.length;u<v;u++)i=b[u],Jc(a,i,-d,-f,i);let l=-Infinity,q=-Infinity;for(let u=0,v=b.length;u<v;u++)i=b[u],l=Math.max(l,i.x),q=Math.max(q,i.y);return Ae(a,l+1),Be(a,q+1),b}var Fe;(function(a){a[a["x+,y+"]=0]="x+,y+",a[a["x-,y+"]=1]="x-,y+",a[a["y+,x+"]=2]="y+,x+",a[a["y-,x+"]=3]="y-,x+"})(Fe||(Fe={}));function oi(a,b,d,f=0){let i={x:0,y:0};switch(f){case 0:for(let l=0;l<a.height;l++)for(let q=0;q<a.width;q++)i.x=q,i.y=l,d?b.call(d,i,a):b(i,a);break;case 1:for(let l=0;l<a.height;l++)for(let q=a.width-1;q>=0;q--)i.x=q,i.y=l,d?b.call(d,i,a):b(i,a);break;case 2:for(let l=0;l<a.width;l++)for(let q=0;q<a.height;q++)i.x=l,i.y=q,d?b.call(d,i,a):b(i,a);break;case 3:for(let l=0;l<a.width;l++)for(let q=a.height-1;q>=0;q--)i.x=l,i.y=q,d?b.call(d,i,a):b(i,a)}}function pi(a,b,d,f){return a.grid.getDistance(b,d,f)}function zg(a,b=0,d=[]){if(Array.isArray(b)){let f=b;for(let i=0;i<a.height;i++)for(let l=0;l<a.width;l++){let q=!0;for(let u=0,v=f.length;u<v;u++)if(vb(a,l,i,f[u])!==null){q=!1;break}q&&d.push({x:l,y:i})}}else for(let f=0;f<a.height;f++)for(let i=0;i<a.width;i++)vb(a,i,f,b)===null&&d.push({x:i,y:f});return d}function Ag(a,b,d,f){return a.grid.getGridPoints(b,d,f)}function hc(a,b,d,f=[]){let i=a.boardData.getChess(b,d);for(const[l,q]of i)f.push(q);return f}function zf(a,b,d,f=[]){let i=d!=null,l,q;for(let u=0,v=b.length;u<v;u++)l=b[u],i?(q=vb(a,l.x,l.y,d),q!==null&&f.push(q)):hc(a,l.x,l.y,f);return f}function qi(a,b,d,f,i){let l=Pa(a,b);if(l===null)return null;f==null&&(f=l.hasOwnProperty("z")?l.z:null);let q=Vc(a,l,d,!0);return q===null?null:Array.isArray(q)?(i===void 0&&(i=[]),zf(a,q,f,i)):f==null?(i===void 0&&(i=[]),hc(a,q.x,q.y,i)):vb(a,q.x,q.y,f)}function ri(a,b,d,f={x:0,y:0}){let i=tf(a,b,d);return fc(a,b,i,1,f)}function si(a,b,d,f){return a.grid.getOppositeDirection(b,d,f)}function Cg(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function Af(a,b=0,d=a.length){let f=b+Math.floor(Math.random()*d);return a[f]===void 0?null:a[f]}function ul(a,b=0,d={x:0,y:0}){d===!0&&(d=Pw);let f=Math.floor(a.width*a.height*.3);for(let l=0;l<f;l++){let q=Cg(0,a.width-1),u=Cg(0,a.height-1);if(vb(a,q,u,b)===null)return d.x=q,d.y=u,d}let i=zg(a,b);if(i.length===0)return null;{let l=Af(i);return d.x=l.x,d.y=l.y,d}}let Pw={x:0,y:0};function vl(a,b,d,f){if(f===void 0){let i=hc(a,b,d);for(let l=0,q=i.length;l<q;l++){let u=vc(i[l]).blocker;if(u===!0)return!0}return!1}else{let i=vb(a,b,d,f);if(i===null)return!1;let l=vc(i).blocker;return l===!0}}function wl(a,b){return a.boardData.chessToXYZ.has(b)}function xl(a,b,d,f,i){if(f===void 0){let l=hc(a,b,d);for(let q=0,u=l.length;q<u;q++)if(Rq(vc(l[q]).blocker,i))return!0;return!1}else{let l=vb(a,b,d,f);return l===null?!1:Rq(vc(l).blocker,i)}}function Rq(a,b){return a===!1||a===!0?a:a[b]===!0}function Ll(a){return a=a%ew,a>=0?a:a+ew}const ew=Math.PI*2;function dr(a,b,d=1e-4){return Math.abs(a-b)<d}function ti(a,b,d,f,i){let l=Pa(a,b),q=Pa(a,d),u=Od(a,l,q);u=Ll(u);let v=Math.abs(u-f);v=Math.min(v,Xw-v);let A=i/2;return dr(v,A)||v<A}const Xw=Math.PI*2;function ui(a,b,d,f,i){let l=Pa(a,b),q=Pa(a,d),u=a.grid.directions;a.grid.directions=a.grid.sides;let v=a.grid.directionBetween(l,q,!1);a.grid.directions=u;let A=Math.abs(v-f);return A=Math.min(A,a.grid.directions-A),A<=i/2}function ac(a,b,d,f={x:0,y:0}){return a.grid.getTileXY(b,d,f)}function vi(a,b,d,f){if(a.infinityMode&&f===void 0)return!0;let i=ac(a,b,d,!0);return uc(a,i.x,i.y,f)}function br(a,b,d,f){let i=a-d,l=b-f;return Math.sqrt(i*i+l*l)}function Kl(a,b,d){return(b-a)*d+a}function yl(a,b,d,f,i,l=[]){let q=br(b,d,f,i),u=Math.min(a.grid.width,a.grid.height),v=Math.ceil(q/(u/4)),A;for(let E=0;E<=v;E++){let H=E/v,O=Kl(b,f,H),I=Kl(d,i,H),Q=ac(a,O,I);if(!uc(a,Q.x,Q.y))continue;if(A&&A.x===Q.x&&A.y===Q.y)continue;l.push(Q),A=Q}return l}var Ge;(function(a){a[a.x=1]="x",a[a.horizontal=1]="horizontal",a[a.h=1]="h",a[a.y=2]="y",a[a.vertical=2]="vertical",a[a.v=2]="v",a[a.xy=3]="xy"})(Ge||(Ge={}));function zl(a,b,d,f=null,i={x:0,y:0}){return i===!0&&(i=Tw),f!==null?Jc(a,b,-f.x,-f.y,i):(i.x=b.x,i.y=b.y),a.grid.mirror(i,d,i),f!==null&&Jc(a,i,f.x,f.y,i),i}let Tw={x:0,y:0};function Al(a,b=!1,d=!1){let f=Ic(a);for(let i=0,l=f.length;i<l;i++)gc(a,f[i],void 0,void 0,void 0,b,d)}function Bl(a,b,d,f=null,i={x:0,y:0}){return i===!0&&(i=Vw),f!==null?Jc(a,b,-f.x,-f.y,i):(i.x=b.x,i.y=b.y),a.grid.rotate(i,d,i),f!==null&&Jc(a,i,f.x,f.y,i),i}let Vw={x:0,y:0};function Cl(a,b,d){let f=Pa(a,b);if(f===null)return;Nd(a,b,f.x,f.y,d)}function Dg(a,b,d){return Math.max(b,Math.min(d,a))}function Dl(a,b,d,f=[]){let i=ac(a,b.left,b.top,!0),l=i.x-1,q=i.y-1,u=ac(a,b.right,b.bottom,!0),v=u.x+1,A=u.y+1;a.infinityMode||(l=Dg(l,0,a.width-1),q=Dg(q,0,a.height-1),v=Dg(v,0,a.width-1),A=Dg(A,0,a.height-1));for(let E=l;E<=v;E++)for(let H=q;H<=A;H++){let O=Ub(a,E,H,!0);d(b,O.x,O.y)&&f.push({x:E,y:H})}return f}function El(a,b,d,f=!0){let i=Pa(a,b),l=Pa(a,d);if(i==null||l==null)return;gc(a,b),gc(a,d),Nd(a,b,l.x,l.y,l.z,f),Nd(a,d,i.x,i.y,i.z,f)}function wi(a,b,d=[]){let f=a.boardData.ZToChessSet.get(b);if(f)for(const i of f)d.push(i);return d}function xi(a,b,d=[]){for(let f=0,i=b.length;f<i;f++){let l=b[f];d.push(Ub(a,l.x,l.y))}return d}function yi(a,b,d,f={x:0,y:0}){return f===!0&&(f=Yw),ac(a,b,d,f),Ub(a,f.x,f.y,f),f}let Yw={x:0,y:0};function zi(a,b,d,f,i){let l=ac(a,b,d,!0);return f!==void 0?vb(a,l.x,l.y,f):hc(a,l.x,l.y,i)}class li extends ki{addChess(a,b,d,f,i=!0){return Nd(this,a,b,d,f,i),this}angleBetween(a,b){return Od(this,a,b)}angleSnapToDirection(a,b){return tf(this,a,b)}angleToward(a,b){return uf(this,a,b)}areNeighbors(a,b){return mi(this,a,b)}chessToTileXYZ(a){return Pa(this,a)}contains(a,b,d){return uc(this,a,b,d)}directionBetween(a,b,d=!0){return ni(this,a,b,d)}filledRingToTileXYArray(a,b,d=!0,f=[]){return sl(this,a,b,d,f)}fit(a){return tl(this,a)}forEachTileXY(a,b,d=0){return oi(this,a,b,d),this}getAllChess(a=[]){return Ic(this,a)}getChessData(a){return vc(a)}getDistance(a,b,d=!1){return pi(this,a,b,d)}getEmptyTileXYArray(a=0,b=[]){return zg(this,a,b)}getGridPoints(a,b,d){return Ag(this,a,b,d)}getNeighborChess(a,b,d,f){return qi(this,a,b,d,f)}getNeighborChessDirection(a,b){return vf(this,a,b)}getNeighborTileDirection(a,b){return wf(this,a,b)}getNeighborTileXY(a,b=null,d={x:0,y:0}){return Vc(this,a,b,d)}getNeighborTileXYAtAngle(a,b,d={x:0,y:0}){return ri(this,a,b,d)}getOppositeDirection(a,b,d){return si(this,a,b,d)}getRandomEmptyTileXY(a=0,b={x:0,y:0}){return ul(this,a,b)}getTileXYAtDirection(a,b,d,f){return fc(this,a,b,d,f)}getWrapTileXY(a,b,d={x:0,y:0}){return xf(this,a,b,d)}gridAlign(a,b,d){return yf(this,a,b,d),this}hasBlocker(a,b,d){return vl(this,a,b,d)}hasChess(a){return wl(this,a)}hasEdgeBlocker(a,b,d,f){return xl(this,a,b,d,f)}isAngleInCone(a,b,d,f){return ti(this,a,b,d,f)}isDirectionInCone(a,b,d,f){return ui(this,a,b,d,f)}isOverlappingPoint(a,b,d){return vi(this,a,b,d)}lineToTileXYArray(a,b,d,f,i=[]){return yl(this,a,b,d,f,i)}mirror(a,b,d=null,f={x:0,y:0}){return zl(this,a,b,d,f)}offset(a,b,d,f){return Jc(this,a,b,d,f)}removeAllChess(a=!1,b=!1){return Al(this,a,b),this}removeChess(a,b,d,f,i=!1,l=!1){return gc(this,a,b,d,f,i,l),this}ringToTileXYArray(a,b=1,d=[]){return Bg(this,a,b,d)}rotate(a,b,d=null,f={x:0,y:0}){return Bl(this,a,b,d,f)}setBoardWidth(a=0){return Ae(this,a),this}setBoardHeight(a=0){return Be(this,a),this}setTileZ(a,b){return Cl(this,a,b),this}shapeToTileXYArray(a,b,d=[]){return Dl(this,a,b,d)}swapChess(a,b,d=!0){return El(this,a,b,d),this}tileXYArrayToChessArray(a,b,d=[]){return zf(this,a,b,d)}tileXYToChessArray(a,b,d=[]){return hc(this,a,b,d)}tileXYZToChess(a,b,d){return vb(this,a,b,d)}tileZToChessArray(a,b=[]){return wi(this,a,b)}tileXYArrayToWorldXYArray(a,b=[]){return xi(this,a,b)}tileXYToWorldXY(a,b,d={x:0,y:0}){return Ub(this,a,b,d)}worldXYSnapToGrid(a,b,d={x:0,y:0}){return yi(this,a,b,d)}worldXYToChess(a,b,d,f){return zi(this,a,b,d,f)}worldXYToTileXY(a,b,d){return ac(this,a,b,d)}}class Qq extends li{}const wc={};$d(wc,{ChessToTileXYZ:()=>Pa,Contains:()=>uc,DirectionBetween:()=>ni,ForEachTileXY:()=>oi,GetDistance:()=>pi,GetOppositeDirection:()=>si,GetTileXYAtDirection:()=>fc,GetWrapTileXY:()=>xf,IsDirectionInCone:()=>ui,TileXYArrayToChessArray:()=>zf,TileXYToChessArray:()=>hc,TileXYZToChess:()=>vb,TileZToChessArray:()=>wi});const Pd={};$d(Pd,{AngleBetween:()=>Od,AngleSnapToDirection:()=>tf,AngleToward:()=>uf,GetGridPoints:()=>Ag,GridAlign:()=>yf,IsAngleInCone:()=>ti,IsOverlappingPoint:()=>vi,TileXYArrayToWorldXYArray:()=>xi,TileXYToWorldXY:()=>Ub,WorldXYSnapToGrid:()=>yi,WorldXYToChess:()=>zi,WorldXYToTileXY:()=>ac});const Ee={};$d(Ee,{AreNeighbors:()=>mi,GetNeighborChess:()=>qi,GetNeighborChessDirection:()=>vf,GetNeighborTileDirection:()=>wf,GetNeighborTileXY:()=>Vc,GetNeighborTileXYAtAngle:()=>ri});var rb;(function(a){a[a.orthogonal=0]="orthogonal",a[a.isometric=1]="isometric"})(rb||(rb={}));var pd;(function(a){a[a["4dir"]=4]="4dir",a[a["8dir"]=8]="8dir"})(pd||(pd={}));class Lr{constructor({x:a=0,y:b=0,cellWidth:d=0,cellHeight:f=0,type:i=rb.orthogonal,dir:l=pd["4dir"]}={}){this.setOriginPosition(a,b),this.setCellSize(d,f),this.setType(i),this.setDirectionMode(l)}fromJSON({x:a=0,y:b=0,cellWidth:d=0,cellHeight:f=0,type:i=rb.orthogonal,dir:l=pd["4dir"]}={}){return this.setType(i),this.setDirectionMode(l),this.setOriginPosition(a,b),this.setCellSize(d,f),this}toJSON(){return{x:this.x,y:this.y,cellWidth:this.cellWidth,cellHeight:this.cellHeight,type:this.mode,dir:this.directions}}setOriginPosition(a=0,b=0){return this.x=a,this.y=b,this}get width(){return this._width}set width(a){this._width=a,this._halfWidth=a/2}get height(){return this._height}set height(a){this._height=a,this._halfHeight=a/2}setCellSize(a=0,b=0){return this.width=a,this.height=b,this}get cellWidth(){return this.width}set cellWidth(a){this.width=a}get cellHeight(){return this.height}set cellHeight(a){this.height=a}setType(a=rb.orthogonal){return typeof a==="string"&&(a=rb[a]),this.mode=a,this}setDirectionMode(a=pd["4dir"]){return typeof a==="string"&&(a=pd[a]),this.directions=a,this}}function Dr(a,b,d,f=!0){let i;switch(a.mode){case rb.orthogonal:case rb.isometric:if(b.y===d.y)i=d.x>=b.x?0:2;else if(b.x===d.x)i=d.y>=b.y?1:3;else if(a.directions===pd["4dir"]){let l=Bf(He(b.x,b.y,d.x,d.y));l<0&&(l+=360),i=l/90,f&&(i=Math.round(i))}else{let l=d.x-b.x,q=d.y-b.y;if(l===q)i=l>0?4:6;else if(l===-q)i=l>0?7:5;else{let u=Bf(Math.atan2(q,l));u<0&&(u+=360);let v=u/45;f&&(v=Math.round(v)),v>=0&&v<1?i=v:v>=1&&v<2?i=v+3:v>=2&&v<3?i=v-1:v>=3&&v<4?i=v+2:v>=4&&v<5?i=v-2:v>=5&&v<6?i=v+1:v>=6&&v<7?i=v-3:i=v}}break}return i===a.directions&&(i=0),i}function Li(a,b){return od(b,0,a.directions)}function Er(a,b,d,f=!1){let i=d.x-b.x,l=d.y-b.y,q;return f?q=Math.abs(i)+Math.abs(l):q=Math.sqrt(i*i+l*l),q}function Hi(a,b=[]){if(!(b.length===a))if(b.length<a)for(let d=b.length;d<a;d++)b.push({x:0,y:0});else b.length=a;return b}function Oi(a,b,d,f={x:0,y:0}){typeof b==="object"&&(d=b.y,b=b.x),f===!0&&(f=rx);let i,l;switch(a.mode){case rb.orthogonal:i=b*a.width,l=d*a.height;break;case rb.isometric:i=(b-d)*a._halfWidth,l=(b+d)*a._halfHeight;break}return i+=a.x,l+=a.y,f.x=i,f.y=l,f}let rx={x:0,y:0};function Fr(a,b=0,d=0,f=[]){if(typeof b==="object"){let v=b;d=v.y,b=v.x}f===!0&&(f=nx),Hi(4,f);let i,l;({x:i,y:l}=Oi(a,b,d));let q=a._halfWidth,u=a._halfHeight;switch(a.mode){case rb.orthogonal:f[0].x=i+q,f[0].y=l-u,f[1].x=i+q,f[1].y=l+u,f[2].x=i-q,f[2].y=l+u,f[3].x=i-q,f[3].y=l-u;break;case rb.isometric:f[0].x=i+q,f[0].y=l,f[1].x=i,f[1].y=l+u,f[2].x=i-q,f[2].y=l,f[3].x=i,f[3].y=l-u;break}return f}let nx=[];const Cf=[[1,0],[0,1],[-1,0],[0,-1],[1,1],[-1,1],[-1,-1],[1,-1]],Fg=Cf;function Ar(a){let b={},d,f,i;for(let l in a)d=a[l],f=d[0],i=d[1],b.hasOwnProperty(f)||(b[f]={}),b[f][i]=parseInt(l);return b}const Br=Ar(Cf),Cr=Ar(Fg);function Gr(a,b,d){let f;switch(a.mode){case rb.orthogonal:f=Br;break;case rb.isometric:f=Cr;break}let i=d.x-b.x,l=d.y-b.y;if(f.hasOwnProperty(i)){let q=f[i];if(q.hasOwnProperty(l))return q[l]}return null}function Pi(a,b,d,f,i={x:0,y:0}){i===!0&&(i=qx);let l,q;switch(a.mode){case rb.orthogonal:l=Cf[d][0],q=Cf[d][1];break;case rb.isometric:l=Fg[d][0],q=Fg[d][1];break}return f===1?(i.x=b.x+l,i.y=b.y+q):(i.x=b.x+f*l,i.y=b.y+f*q),i}let qx={x:0,y:0};function Hr(a,b,d,f={x:0,y:0}){return Pi(a,b,d,1,f)}function Ir(a,b,d,f){return ox[f]}const ox={0:2,1:3,2:0,3:1,4:6,5:7,6:4,7:5};function Jr(a,b,d,f={x:0,y:0}){typeof b==="object"&&(d=b.y,b=b.x),f===!0&&(f=px),b-=a.x,d-=a.y;let i=b/a.width,l=d/a.height;switch(a.mode){case rb.orthogonal:f.x=Math.round(i),f.y=Math.round(l);break;case rb.isometric:f.x=Math.round(+i+l),f.y=Math.round(-i+l);break}return f}let px={x:0,y:0};function Kr(a,b,d,f={x:0,y:0}){return typeof d==="string"&&(d=Ge[d]),f===!0&&(f=sx),f.x=d&1?-b.x:b.x,f.y=d&2?-b.y:b.y,f}let sx={x:0,y:0};function Ie(a,b,d,f,i={x:0,y:0}){i===!0&&(i=tx);let l=b.x+d,q=b.y+f;return i.x=l,i.y=q,i}let tx={x:0,y:0};function Mr(a,b,d,f=[]){let i,l;for(i=d,l=-d;l<=d;l++)f.push(Ie(a,b,i,l));for(l=d,i=d-1;i>=-d;i--)f.push(Ie(a,b,i,l));for(i=-d,l=d-1;l>=-d;l--)f.push(Ie(a,b,i,l));for(l=-d,i=-d+1;i<=d-1;i++)f.push(Ie(a,b,i,l));return f}function Nr(a,b,d,f={x:0,y:0}){f===!0&&(f=yx),d=od(d,0,3);let i,l;switch(d){case 1:i=-b.y,l=b.x;break;case 2:i=-b.x,l=-b.y;break;case 3:i=b.y,l=-b.x;break;default:i=b.x,l=b.y;break}return f.x=i,f.y=l,f}let yx={x:0,y:0};function Mi(a){a._savedOriginX=a.x,a._savedOriginY=a.y}function Ni(a){a.x=a._savedOriginX,a.y=a._savedOriginY}class zr extends Lr{get sides(){return 4}get allDirections(){return this.directions===4?ux:vx}get halfDirections(){return this.directions===4?wx:xx}directionBetween(a,b,d=!0){return Dr(this,a,b,d)}directionNormalize(a){return Li(this,a)}getDistance(a,b,d=!1){return Er(this,a,b,d)}getGridPoints(a=0,b=0,d=[]){return Fr(this,a,b,d)}getNeighborTileDirection(a,b){return Gr(this,a,b)}getNeighborTileXY(a,b,d={x:0,y:0}){return Hr(this,a,b,d)}getOppositeDirection(a,b,d){return Ir(this,a,b,d)}getTileXY(a,b,d={x:0,y:0}){return Jr(this,a,b,d)}getTileXYAtDirection(a,b,d,f={x:0,y:0}){return Pi(this,a,b,d,f)}getWorldXY(a,b,d={x:0,y:0}){return Oi(this,a,b,d)}mirror(a,b,d={x:0,y:0}){return Kr(this,a,b,d)}offset(a,b,d,f={x:0,y:0}){return Ie(this,a,b,d,f)}ringToTileXYArray(a,b,d=[]){return Mr(this,a,b,d)}rotate(a,b,d={x:0,y:0}){return Nr(this,a,b,d)}restoreOrigin(){return Ni(this),this}saveOrigin(){return Mi(this),this}}const ux=[0,1,2,3],vx=[0,1,2,3,4,5,6,7],wx=[0,1],xx=[0,1,4,5];var Qa;(function(a){a[a.ODD_R=0]="ODD_R",a[a.EVEN_R=1]="EVEN_R",a[a.ODD_Q=2]="ODD_Q",a[a.EVEN_Q=3]="EVEN_Q"})(Qa||(Qa={}));var Kc;(function(a){a[a.y=0]="y",a[a.flat=0]="flat",a[a.x=1]="x",a[a.pointy=1]="pointy"})(Kc||(Kc={}));var Sd;(function(a){a[a.even=0]="even",a[a.odd=1]="odd"})(Sd||(Sd={}));class sr{constructor({x:a=0,y:b=0,radius:d=void 0,cellWidth:f=0,cellHeight:i=0,staggerAxis:l=Kc.x,staggerIndex:q=Sd.odd}={}){this.setType(l,q),this.setDirectionMode(),this.setOriginPosition(a,b),d!==void 0?this.setRadius(d):this.setCellSize(f,i)}fromJSON({x:a=0,y:b=0,radius:d=void 0,cellWidth:f=0,cellHeight:i=0,staggerAxis:l=Kc.x,staggerIndex:q=Sd.odd}={}){return this.setType(l,q),this.setDirectionMode(),this.setOriginPosition(a,b),d!==void 0?this.setRadius(d):this.setCellSize(f,i),this}toJSON(){return{x:this.x,y:this.y,radius:this.radius,cellWidth:this.cellWidth,cellHeight:this.cellHeight,staggerAxis:this.staggerAxis,staggerIndex:this.staggerIndex}}setOriginPosition(a,b){return this.x=a,this.y=b,this}get width(){return this._width}set width(a){this._width=a,this._halfWidth=a/2}get height(){return this._height}set height(a){this._height=a,this._halfHeight=a/2}setCellSize(a=0,b=0){return this.width=a,this.height=b,this.radius=void 0,this}get cellWidth(){return this.width}set cellWidth(a){this.width=a}get cellHeight(){return this.height}set cellHeight(a){this.height=a}setRadius(a=0){let b,d;return this.staggerAxis===Kc.y?(b=2*a,d=yr*a):(b=yr*a,d=2*a),this.setCellSize(b,d),this.radius=a,this}setDirectionMode(){return this.directions=6,this}setType(a=1,b=1){return typeof a==="string"&&(a=Kc[a]),typeof b==="string"&&(b=Sd[b]),this.staggerAxis=a,this.staggerIndex=b,a===Kc.y?this.mode=b===Sd.even?Qa.EVEN_Q:Qa.ODD_Q:this.mode=b===Sd.even?Qa.EVEN_R:Qa.ODD_R,this}}const yr=Math.sqrt(3);function ic(a,b,d,f={x:0,y:0,z:0}){f===!0&&(f=Ml);switch(a){case Qa.ODD_R:f.x=b-(d-(d&1))/2,f.z=d;break;case Qa.EVEN_R:f.x=b-(d+(d&1))/2,f.z=d;break;case Qa.ODD_Q:f.x=b,f.z=d-(b-(b&1))/2;break;case Qa.EVEN_Q:f.x=b,f.z=d-(b+(b&1))/2;break}return f.y=-f.x-f.z,f}function gr(a,b,d,f={x:0,y:0,z:0}){typeof a!=="number"&&(f=a,a=f.x,b=f.y,d=f.z),f===!0&&(f=Ml);let i=Math.round(a),l=Math.round(b),q=Math.round(d),u=Math.abs(i-a),v=Math.abs(l-b),A=Math.abs(q-d);return u>v&&u>A?i=-l-q:v>A?l=-i-q:q=-i-l,f.x=i,f.y=l,f.z=q,f}function Ob(a,b,d,f,i={x:0,y:0}){i===!0&&(i=_w);switch(a){case Qa.ODD_R:i.x=b+(f-(f&1))/2,i.y=f;break;case Qa.EVEN_R:i.x=b+(f+(f&1))/2,i.y=f;break;case Qa.ODD_Q:i.x=b,i.y=f+(b-(b&1))/2;break;case Qa.EVEN_Q:i.x=b,i.y=f+(b+(b&1))/2;break}return i}function hr(a,b,d={x:0,y:0,z:0}){return d===!0&&(d=Ml),d.x=a,d.y=-a-b,d.z=b,d}let Ml={x:0,y:0,z:0},_w={x:0,y:0};function jr(a,b,d,f=!0){let i;ic(a.mode,b.x,b.y,Di),ic(a.mode,d.x,d.y,Ei);let l=Ei.x-Di.x,q=Ei.y-Di.y,u=Ei.z-Di.z;return u===0?i=l>0?0:3:l===0?i=u>0?1:4:q===0?i=u>0?2:5:l>0&&q<0&&u>0?i=0+u/-q:l<0&&q<0&&u>0?i=1+-q/u:l<0&&q>0&&u>0?i=2+q/-l:l<0&&q>0&&u<0?i=3+-u/q:l>0&&q>0&&u<0?i=4+l/-u:i=5+-q/l,f&&(i=Math.round(i)),i}let Di={x:0,y:0,z:0},Ei={x:0,y:0,z:0};function kr(a,b,d,f=!1){ic(a.mode,b.x,b.y,Fi),ic(a.mode,d.x,d.y,Gi);let i=Gi.x-Fi.x,l=Gi.y-Fi.y,q=Gi.z-Fi.z;return(Math.abs(i)+Math.abs(l)+Math.abs(q))/2}let Fi={x:0,y:0,z:0},Gi={x:0,y:0,z:0};function Ii(a,b,d,f={x:0,y:0}){typeof b==="object"&&(d=b.y,b=b.x),f===!0&&(f=hx);let i=b*a.width,l=d*a.height;switch(a.mode){case Qa.ODD_R:d&1&&(i+=a._halfWidth),l*=.75;break;case Qa.EVEN_R:d&1&&(i-=a._halfWidth),l*=.75;break;case Qa.ODD_Q:i*=.75,b&1&&(l+=a._halfHeight);break;case Qa.EVEN_Q:i*=.75,b&1&&(l-=a._halfHeight);break}return i+=a.x,l+=a.y,f.x=i,f.y=l,f}let hx={x:0,y:0};function lr(a,b=0,d=0,f=[]){if(typeof b==="object"){let q=b;d=q.y,b=q.x}f===!0&&(f=dx),Hi(6,f);let i,l;({x:i,y:l}=Ii(a,b,d));if(a.radius!==void 0){let q=a.radius,u=a.staggerAxis===Kc.flat?0:-30;for(let v=0;v<6;v++){let A=60*v+u,E=Qd(A);f[v].x=i+q*Math.cos(E),f[v].y=l+q*Math.sin(E)}}else{let q=a._halfWidth,u=q/2,v=a._halfHeight,A=v/2;a.staggerAxis===Kc.flat?(f[0].x=i+q,f[0].y=l,f[1].x=i+u,f[1].y=l+v,f[2].x=i-u,f[2].y=l+v,f[3].x=i-q,f[3].y=l,f[4].x=i-u,f[4].y=l-v,f[5].x=i+u,f[5].y=l-v):(f[0].x=i+q,f[0].y=l-A,f[1].x=i+q,f[1].y=l+A,f[2].x=i,f[2].y=l+v,f[3].x=i-q,f[3].y=l+A,f[4].x=i-q,f[4].y=l-A,f[5].x=i,f[5].y=l-v)}return f}let dx=[];const $w=[[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]],[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]]],ax=[[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]],[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]]],bx=[[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]],[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]]],cx=[[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]],[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]]],xc=[$w,ax,bx,cx];function Rd(a){let b={},d,f;for(let i in a)[d,f]=a[i],b.hasOwnProperty(d)||(b[d]={}),b[d][f]=parseInt(i);return b}const ir=[[Rd(xc[0][0]),Rd(xc[0][1])],[Rd(xc[1][0]),Rd(xc[1][1])],[Rd(xc[2][0]),Rd(xc[2][1])],[Rd(xc[3][0]),Rd(xc[3][1])]];function Ji(a,b,d){let f;switch(a){case Qa.ODD_R:case Qa.EVEN_R:f=d&1;break;case Qa.ODD_Q:case Qa.EVEN_Q:f=b&1;break}return f}function mr(a,b,d){let f=a.mode,i=Ji(f,b.x,b.y),l=ir[f][i],q=d.x-b.x,u=d.y-b.y;if(l.hasOwnProperty(q)){let v=l[q];if(v.hasOwnProperty(u))return v[u]}return null}function Ki(a,b,d,f,i={x:0,y:0}){i===!0&&(i=gx);let l=a.mode,q=b.x,u=b.y;if(f===1){let v=Ji(l,q,u);i.x=q+xc[l][v][d][0],i.y=u+xc[l][v][d][1]}else if(f===0)i.x=q,i.y=u;else{let v=ic(l,q,u,!0),A,E,H;switch(d){case 1:A=v.x,E=v.y-f,H=v.z+f;break;case 2:A=v.x-f,E=v.y,H=v.z+f;break;case 3:A=v.x-f,E=v.y+f,H=v.z;break;case 4:A=v.x,E=v.y+f,H=v.z-f;break;case 5:A=v.x+f,E=v.y,H=v.z-f;break;default:A=v.x+f,E=v.y-f,H=v.z;break}Ob(l,A,E,H,i)}return i}let gx={x:0,y:0};function nr(a,b,d,f={x:0,y:0}){return Ki(a,b,d,1,f)}function or(a,b,d,f){return(f+3)%6}const pr=4/3,qr=2/3;function rr(a,b,d,f={x:0,y:0}){typeof b==="object"&&(d=b.y,b=b.x),f===!0&&(f=fx),b-=a.x,d-=a.y;let i,l;switch(a.mode){case Qa.ODD_R:case Qa.EVEN_R:l=d*pr/a.height,i=b/a.width-qr*(d/a.height);break;case Qa.ODD_Q:case Qa.EVEN_Q:l=d/a.height-qr*(b/a.width),i=b*pr/a.width;break}let q=hr(i,l,ex);return gr(q),Ob(a.mode,q.x,q.y,q.z,f),f}let ex={x:0,y:0,z:0},fx={x:0,y:0};function tr(a,b,d,f={x:0,y:0}){typeof d==="string"&&(d=Ge[d]),f===!0&&(f=kx);let i=ic(a.mode,b.x,b.y,!0),l=a.mode===Qa.ODD_R||a.mode===Qa.EVEN_R,q,u,v;return d&1&&(l?(q=i.y,u=i.x,v=i.z):(q=-i.x,u=-i.z,v=-i.y),i.x=q,i.y=u,i.z=v),d&2&&(l?(q=-i.y,u=-i.x,v=-i.z):(q=i.x,u=i.z,v=i.y)),Ob(a.mode,q,u,v,f),f}let kx={x:0,y:0};function ur(a,b,d,f,i={x:0,y:0}){i===!0&&(i=lx);let l=b.x+d,q=b.y+f;switch(a.mode){case Qa.ODD_R:(f&1)!==0&&((q&1)===0&&(l+=1));break;case Qa.EVEN_R:(f&1)!==0&&((q&1)===0&&(l-=1));break;case Qa.ODD_Q:(d&1)!==0&&((l&1)==0&&(q+=1));break;case Qa.EVEN_Q:(d&1)!==0&&((l&1)==0&&(q-=1));break}return i.x=l,i.y=q,i}let lx={x:0,y:0};function vr(a,b,d,f=[]){let i=ic(a.mode,b.x,b.y,!0),l=i.x,q=i.y,u=i.z,v,A,E;for(E=d,v=0;v>=-d;v--)A=-v-E,f.push(Ob(a.mode,l+v,q+A,u+E));for(v=-d,A=1;A<=d;A++)E=-v-A,f.push(Ob(a.mode,l+v,q+A,u+E));for(A=d,E=-1;E>=-d;E--)v=-A-E,f.push(Ob(a.mode,l+v,q+A,u+E));for(E=-d,v=1;v<=d;v++)A=-v-E,f.push(Ob(a.mode,l+v,q+A,u+E));for(v=d,A=-1;A>=-d;A--)E=-v-A,f.push(Ob(a.mode,l+v,q+A,u+E));for(A=-d,E=1;E<=d-1;E++)v=-A-E,f.push(Ob(a.mode,l+v,q+A,u+E));return f}function wr(a,b,d,f={x:0,y:0}){f===!0&&(f=mx),d=od(d,0,5);let i=ic(a.mode,b.x,b.y,!0),l,q,u;switch(d){case 1:l=-i.z,q=-i.x,u=-i.y;break;case 2:l=i.y,q=i.z,u=i.x;break;case 3:l=-i.x,q=-i.y,u=-i.z;break;case 4:l=i.z,q=i.x,u=i.y;break;case 5:l=-i.y,q=-i.z,u=-i.x;break;default:l=i.x,q=i.y,u=i.z;break}return Ob(a.mode,l,q,u,f),f}let mx={x:0,y:0};class xr extends sr{get sides(){return 6}get allDirections(){return ix}get halfDirections(){return jx}directionBetween(a,b,d=!0){return jr(this,a,b,d)}directionNormalize(a){return Li(this,a)}getDistance(a,b,d=!1){return kr(this,a,b,d)}getGridPoints(a=0,b=0,d=[]){return lr(this,a,b,d)}getNeighborTileDirection(a,b){return mr(this,a,b)}getNeighborTileXY(a,b,d={x:0,y:0}){return nr(this,a,b,d)}getOppositeDirection(a,b,d){return or(this,a,b,d)}getTileXY(a,b,d={x:0,y:0}){return rr(this,a,b,d)}getTileXYAtDirection(a,b,d,f={x:0,y:0}){return Ki(this,a,b,d,f)}getWorldXY(a,b,d={x:0,y:0}){return Ii(this,a,b,d)}mirror(a,b,d={x:0,y:0}){return tr(this,a,b,d)}offset(a,b,d,f={x:0,y:0}){return ur(this,a,b,d,f)}ringToTileXYArray(a,b,d=[]){return vr(this,a,b,d)}rotate(a,b,d={x:0,y:0}){return wr(this,a,b,d)}restoreOrigin(){return Ni(this),this}saveOrigin(){return Mi(this),this}}const ix=[0,1,2,3,4,5],jx=[0,1,2];var Lb;(function(a){a[a.random=0]="random",a[a.diagonal=1]="diagonal",a[a.straight=2]="straight",a[a.line=3]="line",a[a.astar=10]="astar",a[a["astar-random"]=11]="astar-random",a[a["astar-line"]=12]="astar-line"})(Lb||(Lb={}));const Je=null;class Uv{constructor(a){this.content=[],this.scoreFunction=a}clear(){this.content.length=0}push(a){this.content.push(a),this.sinkDown(this.content.length-1)}pop(){let a=this.content[0],b=this.content.pop();return this.content.length>0&&(this.content[0]=b,this.bubbleUp(0)),a}remove(a){const b=this.content.indexOf(a);let d=this.content.pop();b!==this.content.length-1&&(this.content[b]=d,this.scoreFunction(d)<this.scoreFunction(a)?this.sinkDown(b):this.bubbleUp(b))}get size(){return this.content.length}rescoreElement(a){this.sinkDown(this.content.indexOf(a))}sinkDown(a){let b=this.content[a];for(;a>0;){let d=(a+1>>1)-1,f=this.content[d];if(this.scoreFunction(b)<this.scoreFunction(f))this.content[d]=b,this.content[a]=f,a=d;else break}}bubbleUp(a){let b=this.content.length,d=this.content[a],f=this.scoreFunction(d);for(;;){let i=a+1<<1,l=i-1,q=null,u;if(l<b){let v=this.content[l];u=this.scoreFunction(v),u<f&&(q=l)}if(i<b){let v=this.content[i],A=this.scoreFunction(v);A<(q===null?f:u)&&(q=i)}if(q!==null)this.content[a]=this.content[q],this.content[q]=d,a=q;else break}}}let hAa=new Uv(a=>a.f);const Mj=function(a,b,d=[]){let f=b;for(;f.prevNodes.length>0;)d.push(f),f=f.prevNodes[0];return d.reverse()};const Xv=function(a,b,d=[]){let f=b;for(;f.prevNodes.length>0;)d.push(f),f.prevNodes.length===1?f=f.prevNodes[0]:f=Af(f.prevNodes);return d.reverse()};const Wv=function(a,b,d=[]){let f=b,i=b.angleTo(a);for(;f.prevNodes.length>0;){d.push(f);if(f.prevNodes.length===1)f=f.prevNodes[0];else{let l=Infinity;for(let q=1,u=f.prevNodes.length;q<u;q++){let v=f.prevNodes[q],A=Math.abs(b.angleTo(v)-i);A<l&&(l=A,f=v)}}}return d.reverse()};const Vv=function(a,b,d=[]){let f=b,i;for(;f.prevNodes.length>0;){d.push(f);if(f.prevNodes.length===1||i===void 0){let l=f.prevNodes[0];i=l.logicDirTo(f),f=l}else{let l,q;for(let u=0,v=f.prevNodes.length;u<v;u++){l=f.prevNodes[u],q=l.logicDirTo(f);if(q!==i)break}i=q,f=l}}return d.reverse()};const Yv=function(a,b,d=[]){let f=b,i;for(;f.prevNodes.length>0;){d.push(f);if(f.prevNodes.length===1||i===void 0){let l=f.prevNodes[0];i=l.logicDirTo(f),f=l}else{let l,q;for(let u=0,v=f.prevNodes.length;u<v;u++){l=f.prevNodes[u],q=l.logicDirTo(f);if(q===i)break}i=q,f=l}}return d.reverse()};let Xe={};Xe[Lb.astar]=Mj;Xe[Lb["astar-line"]]=Mj;Xe[Lb["astar-random"]]=Mj;Xe[Lb.random]=Xv;Xe[Lb.line]=Wv;Xe[Lb.diagonal]=Vv;Xe[Lb.straight]=Yv;class Qr{constructor(){this.prevNodes=[]}shutdown(){this.key=void 0,this.prevNodes.length=0}destroy(){this.shutdown()}reset(a){this.key=a,this.f=0,this.g=0,this.h=void 0,this.closerH=void 0,this.visited=!1,this.closed=!1}heuristic(a,b,d){if(b===null)return 0;let f,i=this.distanceTo(a)*this.manager.weight;switch(b){case Lb.astar:f=i;break;case Lb["astar-line"]:if(d!==void 0){let l=a.angleTo(d)-this.angleTo(d);f=i+Math.abs(l)}else f=i;case Lb["astar-random"]:f=i+Math.random();break;default:f=i;break}return f}getNextNodes(){return[]}getCost(a){return Je}distanceTo(a){return 0}angleTo(a){return 0}logicDirTo(a){return 0}getNode(a,b=!1){return this.manager.getNode(a,b)}}function Ke(a){for(let b=a.length-1;b>0;b--){let d=Math.floor(Math.random()*(b+1)),f=a[b];a[b]=a[d],a[d]=f}return a}class Jx extends Qr{constructor(a){super();this.isTileXYZ=!0;this.pathFinder=a}reset(a){super.reset(a),this.key=a,Rr(a,this),this._px=void 0,this._py=void 0,this.cost=void 0}getNextNodes(){let a=Ee.GetNeighborTileXY(this.board,this);this.pathFinder.shuffleNeighbors&&Ke(a);let b=[];return a.forEach(d=>{let f=this.getNode(mc(d.x,d.y),!0);b.push(f)}),b}getCost(a){return this.pathFinder.cacheCost?this.cost===void 0&&(this.cost=this.pathFinder.getCost(this,a)):this.cost=this.pathFinder.getCost(this,a),this.cost}distanceTo(a){return wc.GetDistance(this.board,this,a,!0)}angleTo(a){return He(this.worldX,this.wroldY,a.worldX,a.worldX)}logicDirTo(a){return Ee.GetNeighborTileDirection(this.board,this,a)}get board(){return this.pathFinder.board}get worldX(){if(this._px===void 0){let a=Pd.TileXYToWorldXY(this.board,this.x,this.y,!0);this._px=a.x,this._py=a.y}return this._px}get wroldY(){if(this._py===void 0){let a=Pd.TileXYToWorldXY(this.board,this.x,this.y,!0);this._px=a.x,this._py=a.y}return this._py}}class Ex{constructor(){this.data=[];this.visited=new Set()}push(a,b){if(Array.isArray(a)){let f=a;for(let i=0,l=f.length;i<l;i++)this.push(f[i]);return this}if(typeof a==="object"){let f=a;a=f.x,b=f.y}let d=`${a},${b}`;return this.visited.has(d)?this:(this.data.push({x:a,y:b}),this.visited.add(d),this)}pop(){return this.data.pop()}get length(){return this.data.length}clear(){return this.data.length=0,this.visited.clear(),this}}let z8=new Ex();var Ci;(function(a){a[a.direction=0]="direction",a[a.angle=1]="angle"})(Ci||(Ci={}));function Zn(a,b){return a.events.delete(b),a}function Yn(a,b,...d){if(a.events.size===0||!a.events.has(b))return!1;const f=a.events.get(b);let i=f.size;for(const l of f){l.callback.apply(l.context,d),l.once&&f.delete(l),i--;if(i===0)break}return f.size===0&&a.events.delete(b),!0}class jh{constructor(a,b,d=!1){this.callback=a,this.context=b,this.once=d}}function $n(a){return[...a.events.keys()]}function _n(a,b){const d=a.events.get(b);return d?d.size:0}function ao(a,b){const d=[],f=a.events.get(b);return f.forEach(i=>{d.push(i.callback)}),d}function Xn(a,b,d,f,i){const l=a.events,q=l.get(b);if(!d)l.delete(b);else if(d instanceof jh)q.delete(d);else{const u=!f,v=i!==void 0;for(const A of q)A.callback===d&&(u&&A.context===f)&&(v&&A.once===i)&&q.delete(A)}return q.size===0&&l.delete(b),a}function ih(a,b,d,f=a,i=!1){if(typeof d!=="function")throw new TypeError("Listener not a function");const l=new jh(d,f,i),q=a.events.get(b);return q?q.add(l):a.events.set(b,new Set([l])),l}function Wn(a,b,d,f=a){return ih(a,b,d,f,!0)}function Oj(a,b){b?a.events.delete(b):a.events.clear()}function dw(a){return class extends a{constructor(){super(...arguments);this.events=null}setEventEmitter(b){return this.destroyEventEmitter(),this.privateEE=b===void 0,this.privateEE?this.events=new Map():b?this.events=b.events:this.events=null,this.lastEventInstance=null,this}getEventEmitter(){return this}clearEventEmitter(){return this.setEventEmitter(null),this}destroyEventEmitter(){return this.lastEventInstance=null,this.events&&this.privateEE&&(Oj(this),this.events=null),this}on(b,d,f=this,i=!1){return this.lastEventInstance=null,this.events&&(this.lastEventInstance=ih(this,b,d,f,i)),this}once(b,d,f=this){return this.lastEventInstance=null,this.events&&(this.lastEventInstance=Wn(this,b,d,f)),this}off(b,d,f,i){return this.lastEventInstance=null,this.events&&Xn(this,b,d,f,i),this}emit(b,...d){return this.lastEventInstance=null,this.events&&Yn(this,b,...d),this}removeAllListeners(b){return this.lastEventInstance=null,this.events&&Oj(this,b),this}clearEvent(b){return this.lastEventInstance=null,this.events&&Zn(this,b),this}getListenerCount(b){return this.lastEventInstance=null,this.events?_n(this,b):0}getEventNames(){return this.lastEventInstance=null,this.events?$n(this):[]}getListeners(b){return this.lastEventInstance=null,this.events?ao(this,b):[]}}}const zb=dw(class{});var bd;(function(a){a[a.no=0]="no",a[a.lazy=1]="lazy",a[a.always=2]="always"})(bd||(bd={}));const eo="complete";class Kj extends zb{constructor(a,{eventEmitter:b,tickingMode:d=bd.lazy}={}){super();this._isRunning=!1;this.tickingState=!1;this.parent=a,this.setEventEmitter(b),this.setTickingMode(d)}boot(){this.tickingMode===bd.always&&!this.tickingState&&this.startTicking()}shutdown(){this.destroyEventEmitter(),this.tickingState&&this.stopTicking()}setTickingMode(a){typeof a==="string"&&(a=bd[a]),this.tickingMode=a}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(a){if(this._isRunning===a)return;this._isRunning=a,this.tickingMode===bd.lazy&&a!=this.tickingState&&(a?this.startTicking():this.stopTicking())}start(){return this.isRunning=!0,this}pause(){return this.isRunning=!1,this}resume(){return this.isRunning=!0,this}stop(){return this.isRunning=!1,this}complete(a=eo){this.isRunning=!1,this.emit(a,this.parent,this)}}class Tv extends Kj{constructor(a,{updater:b=a,isRunning:d=!1,timeScale:f=1,now:i=0,tickingMode:l=bd.lazy}={}){super(a,arguments[1]);this.updater=null;this.timeScale=1;this.now=0;this.parent=a,this.setUpdater(b),this.isRunning=d,this.timeScale=f,this.now=i,this.setTickingMode(l),this.boot()}resetFromJSON({isRunning:a=!1,timeScale:b=1,now:d=0,tickingMode:f=bd.lazy}={}){return this.isRunning=a,this.timeScale=b,this.now=d,this.setTickingMode(f),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}boot(){super.boot(),lc(this.parent,"destroy",this.destroy,this)}shutdown(){super.shutdown(),this.parent=void 0,this.updater=void 0}destroy(){this.shutdown()}setUpdater(a){return a instanceof Gc&&(a=a.world),a instanceof Ph||a instanceof ze?this.updater=a:this.updater=null,this}start(a=0){return this.now=a,super.start(),this}seek(a){return this.now=a,this}addDt(a){return a*=this.timeScale,this.now+=a,this}}class Ij extends Tv{startTicking(){this.update===null&&this.setUpdater(this.parent);if(this.update===null)return;super.startTicking(),this.updater&&lc(this.updater,"update",this.update,this)}stopTicking(){super.stopTicking(),this.updater&&md(this.updater,"update",this.update,this)}update(a){return!this.isRunning||this.timeScale===0?this:(this.addDt(a),this)}}const ZBa=Rb(ql());const Pl="receive";const Ur={receive:Pl};function Vr(a,b){(!a.sendToRef||a.sendToRef.key!==a.receiverID)&&(a.sendToRef=a.database.ref(a.rootPath).child(a.receiverID));if(b===void 0)return a.sendToRef.remove();let d={message:b,senderID:a.userID,stamp:a.stamp};return a.userName!==void 0&&(d.senderName=a.userName),a.skipFirst=!1,a.stamp=!a.stamp,a.sendToRef.set(d)}function Wr(a){if(a.isReceiving&&a.receiverRef.key===a.receiverID)return;Ol(a),a.isReceiving=!0,a.skipFirst=!0,a.receiverRef=a.database.ref(a.rootPath).child(a.receiverID),a.receiverRef.on("value",Yr,a),a.receiverRef.onDisconnect().remove()}function Ol(a){if(!a.isReceiving)return;a.isReceiving=!1,a.receiverRef.off("value",Yr,a),a.receiverRef.remove(),a.receiverRef.onDisconnect().cancel()}function Yr(a){if(this.skipFirst){this.skipFirst=!1;return}let b=a.val();if(b==null)return;delete b.stamp,this.history.add(b),this.emit(this.eventNames.receive,b)}class Xr{constructor({maxLength:a=-1}={}){this.maxLength=a,this.records=[]}add(a){return this.maxLength===0?this:(this.records.push(a),this.maxLength>0&&this.records.length>this.maxLength&&this.records.shift(),this)}clear(){return this.records.length=0,this}changeUserName(a,b){return this.maxLength===0?this:(this.records.forEach(d=>{d.senderID===a&&(d.senderName=b)}),this)}}const Jba=Rb(ec());class Ef extends zb{constructor({eventEmitter:a,root:b="",senderID:d="",senderName:f,receiverID:i="",history:l=0,eventNames:q=Ur}={}){super();this.setEventEmitter(a),this.eventNames=q,this.database=Jba.database(),this.setRootPath(b),this.skipFirst=!0,this.stamp=!1,this.userInfo={userID:"",userName:void 0},this.setSender(d,f),this.setReceiver(i),this.isReceiving=!1,l===!0?l=-1:l===!1&&(l=0),this.history=new Xr({maxLength:l})}destroy(){this.stopReceiving().destroyEventEmitter()}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.rootPath=a,this.sendToRef=void 0,this.receiverRef=void 0,this}setSender(a,b){return typeof a==="string"?(this.userID=a,this.userName=b):this.userInfo=a,this}setReceiver(a){return this.receiverID=a,this}changeUserName(a,b){return a===this.userID&&(this.userName=b),this.history.changeUserName(a,b),this}getHistory(){return this.history.records}clearHistory(){return this.history.clear(),this}send(a){return Vr(this,a)}startReceiving(){return Wr(this),this}stopReceiving(){return Ol(this),this}}const kz="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function qe(a,b,d=kz){let f=b===void 0?a:Cg(a,b),i="";for(let l=0;l<f;l++)i+=Af(Array.from(d));return i}const Vja=Rb(ec());var wb;(function(a){a[a["1d"]=1]="1d",a[a["2d"]=2]="2d",a[a["3d"]=3]="3d"})(wb||(wb={}));const Wl="init";const Xl="update";const Ql="addkey0";const Rl="addkey1";const Sl="addkey2";const Yl="removekey0";const Zl="removekey1";const _l="removekey2";const Tl="changekey0";const Ul="changekey1";const Vl="changekey2";const Zr={init:Wl,update:Xl,addkey0:Ql,removekey0:Yl,changekey0:Tl,addkey1:Rl,removekey1:Zl,changekey1:Ul,addkey2:Sl,removekey2:_l,changekey2:Vl};function fw(a){return a==null||a===""||a.length===0}function jz(a,b,d={}){let f=a;if(!fw(b)){typeof b==="string"&&(b=b.split("."));let i;for(let l=0,q=b.length;l<q;l++){i=b[l];if(f[i]==null||typeof f[i]!=="object"){let u;l===q-1?u=d:u={},f[i]=u}f=f[i]}}return f}function gw(a,b,d){if(typeof a!=="object")return;if(fw(b)){if(d==null)return;typeof d==="object"&&(a=d)}else{typeof b==="string"&&(b=b.split("."));let f=b.pop(),i=jz(a,b);i[f]=d}return a}function bo(a){if(typeof a!=="object"||a===null)return a;const b=Array.isArray(a)?[]:{};for(const d in a){const f=a[d];b[d]=bo(f)}return b}class _r{constructor(){this.data={}}setValue(a,b){return a==null?this.clear():typeof a==="object"?this.data=a:gw(this.data,a,b),this}getValue(a){if(a==null)return this.data;{typeof a==="string"&&(a=a.split("."));let b=this.data;for(let d=0,f=a.length;d<f;d++){if(!co(b))return;b=b[a[d]]}return b}}cloneValue(a){return bo(this.getValue(a))}removeKey(a){if(a==null)this.clear();else{typeof a==="string"&&(a=a.split("."));let b=a.pop(),d=this.data;for(let f=0,i=a.length;f<i;f++){if(!co(d))return this;d=d[a[f]]}co(d)&&delete d[b]}return this}clear(){return Pj(this.data),this}incValue(a,b=1){let d=this.getValue(a);return typeof d!=="number"&&(d=0),this.setValue(a,d+b),this}mulValue(a,b){let d=this.getValue(a);return typeof d!=="number"&&(d=1),this.setValue(a,d*b),this}}function co(a){return a!=null&&typeof a==="object"}const _ca=Rb(ec());class Le extends zb{constructor({eventEmitter:a,parent:b,key:d,type:f,eventNames:i,table:l}={}){super();this.setEventEmitter(a),this.parent=b,this.children=new Map(),this.key=d,this.parent?this.fullKeyPath=is(this.parent.fullKeyPath,this.key):this.fullKeyPath="",this.type=f,this.eventNames=i,this.table=l,this.database=_ca.database(),this.setRootPath()}destroy(){this.stopUpdate().clear().destroyEventEmitter()}setRootPath(a){if(a===void 0){let b=this.parent?this.parent.rootPath:"";a=`${b}/${this.key}`}this.rootPath=a,this.rootRef=a!==""?this.database.ref(a):void 0;for(const[b,d]of this.children)d instanceof Le&&d.setRootPath();return this}setData(a,b){if(arguments.length===0)this.clear();else if(typeof a=="string")this.setChildData(a,b);else{let d=a;for(const[f,i]of this.children)d.hasOwnProperty(f)||this.removeChild(f);for(let f in d)this.setChildData(f,d[f])}return this}clear(){this.table.removeKey(this.fullKeyPath);for(const[a,b]of this.children)this.removeChild(a);return this}get childClass(){return null}setChildData(a,b){const d=is(this.fullKeyPath,a);this.table.setValue(d,b);if(!(typeof b!=="object")){if(this.children.has(a))this.children.get(a).setData(b);else if(this.childClass){let f=new this.childClass({parent:this,key:a,type:this.type,eventEmitter:this.eventEmitter,eventNames:this.eventNames,table:this.table});f.startUpdate(),this.children.set(a,f)}}return this}removeChild(a){return this.children.has(a)&&(this.children.get(a).destroy(),this.children.delete(a)),this}startUpdate(){return this}stopUpdate(){return this}}function is(a,b){return a==null||a===""?b:b==null||b===""?a:`${a}.${b}`}class Gg extends Le{startUpdate(){return this.rootRef.on("child_added",this.addCol,this),this.rootRef.on("child_removed",this.removeCol,this),this.rootRef.on("child_changed",this.changeColValue,this),this}stopUpdate(){return this.rootRef.off("child_added",this.addCol,this),this.rootRef.off("child_removed",this.removeCol,this),this.rootRef.off("child_changed",this.changeColValue,this),this}addCol(a){const b=a.key,d=a.val();this.setData(b,d);switch(this.type){case wb["1d"]:this.emit(this.eventNames.addkey0,b,d);break;case wb["2d"]:this.emit(this.eventNames.addkey1,this.key,b,d);break;default:this.emit(this.eventNames.addkey2,this.pageKey,this.key,b,d);break}this.emit(this.eventNames.update,this.table.data)}removeCol(a){const b=a.key;this.removeChild(b);switch(this.type){case wb["1d"]:this.emit(this.eventNames.removekey0,b);break;case wb["2d"]:this.emit(this.eventNames.removekey1,this.key,b);break;default:this.emit(this.eventNames.removekey2,this.pageKey,this.key,b);break}this.emit(this.eventNames.update,this.table.data)}changeColValue(a){const b=a.key,d=a.val();this.setData(b,d);switch(this.type){case wb["1d"]:this.emit(this.eventNames.changekey0,b,d);break;case wb["2d"]:this.emit(this.eventNames.changekey1,this.key,b,d);break;default:this.emit(this.eventNames.changekey2,this.pageKey,this.key,b,d);break}this.emit(this.eventNames.update,this.table.data)}get pageKey(){return this.parent.key}}class Hg extends Le{startUpdate(){return this.rootRef.on("child_added",this.addRow,this),this.rootRef.on("child_removed",this.removeRow,this),this}stopUpdate(){return this.rootRef.off("child_added",this.addRow,this),this.rootRef.off("child_removed",this.removeRow,this),this}addRow(a){const b=a.key,d=a.val();this.setData(b,d);switch(this.type){case wb["2d"]:this.emit(this.eventNames.addkey0,b,d);break;default:this.emit(this.eventNames.addkey1,this.key,b,d);break}}removeRow(a){const b=a.key;this.removeChild(b);switch(this.type){case wb["2d"]:this.emit(this.eventNames.removekey0,b);break;default:this.emit(this.eventNames.removekey1,this.key,b);break}}get childClass(){return Gg}}class $l extends Le{startUpdate(){return this.rootRef.on("child_added",this.addPage,this),this.rootRef.on("child_removed",this.removePage,this),this}stopUpdate(){return this.rootRef.off("child_added",this.addPage,this),this.rootRef.off("child_removed",this.removePage,this),this}addPage(a){const b=a.key,d=a.val();this.setData(b,d),this.emit(this.eventNames.addkey0,b,d)}removePage(a){const b=a.key;this.removeChild(b),this.emit(this.eventNames.removekey0,b)}get childClass(){return Hg}}const Ti={};Ti[wb["1d"]]=Gg;Ti[wb["2d"]]=Hg;Ti[wb["3d"]]=$l;function $r(a){return new Ti[a.tableType]({type:a.tableType,eventEmitter:a.eventEmitter,eventNames:a.eventNames,table:a.table})}function as(a){return a.updater.clear(),a.initialFlag=!1,a.rootRef.once("value").then(function(b){let d=b.val()??{};return a.table.setValue(d),a.emit(a.eventNames.init,d),a.initialFlag=!0,Promise.resolve(d)})}function Vb(a,b,d,f){let i=a.rootRef;return i=b?i.child(b):i,i=d?i.child(d):i,i=f?i.child(f):i,i}function bs(a,...b){let d,f,i,l;switch(b.length){case 4:[d,f,i,l]=b;break;case 3:[d,f,l]=b;break;case 2:[d,l]=b;break;default:l=b[0];break}return Vb(a,d,f,i).set(l)}function cs(a,...b){let d,f,i;switch(b.length){case 3:[d,f,i]=b;break;case 2:[d,f]=b;break;default:d=b[0];break}return Vb(a,d,f,i).remove()}function ds(a,...b){let d,f,i,l;switch(b.length){case 4:[d,f,i,l]=b;break;case 3:[d,f,l]=b;break;case 2:[d,l]=b;break;default:l=b[0];break}return Vb(a,d,f,i).transaction(function(q){return q===null&&(q=0),q+l})}function es(a,...b){let d,f,i,l;switch(b.length){case 4:[d,f,i,l]=b;break;case 3:[d,f,l]=b;break;case 2:[d,l]=b;break;default:l=b[0];break}return Vb(a,d,f,i).transaction(l)}function fs(a,b){return Vb(a).update(b)}function gs(a,...b){let d,f,i;switch(b.length){case 3:[d,f,i]=b;break;case 2:[d,f]=b;break;case 1:d=b[0];break}return Vb(a,d,f,i).onDisconnect().remove()}function hs(a,...b){let d,f,i,l;switch(b.length){case 4:[d,f,i,l]=b;break;case 3:[d,f,l]=b;break;case 2:[d,l]=b;break;default:l=b[0];break}return Vb(a,d,f,i).onDisconnect().set(l)}const bca=Rb(ec());class Ff extends zb{constructor({eventEmitter:a,root:b="",type:d=wb["3d"],eventNames:f=Zr}={}){super();this.setEventEmitter(a),this.eventNames=f,this.database=bca.database(),this.table=new _r(),this.setTableType(d),this.setRootPath(b),this.initialFlag=!1}destroy(){this.updater.destroy(),this.destroyEventEmitter().stopUpdate()}setRootPath(a){return this.rootPath=a,this.rootRef=a!==""?this.database.ref(this.rootPath):null,this.updater.setRootPath(a),this}setTableType(a){return typeof a==="string"&&(a=wb[a]),this.tableType=a,this.updater&&this.updater.destroy(),this.updater=$r(this),this}startUpdate(){return as(this),this.updater.startUpdate(),this}stopUpdate(){return this.updater.stopUpdate(),this}clear(){return this.updater.clear(),this}getData(){return this.table.getValue(...arguments)}cloneData(){return this.table.cloneValue(...arguments)}getItemRef(a,b,d){return Vb(this,a,b,d)}setData(...a){return bs(this,...a)}removeData(...a){return cs(this,...a)}incValue(...a){return ds(this,...a)}transaction(...a){return es(this,...a)}updateData(a){return fs(this,a)}removeDataOnDisconnect(...a){return gs(this,...a)}setDataOnDisconnect(...a){return hs(this,...a)}}const dja=Rb(ec());var Zm;(function(a){a.d="d",a.w="w",a.m="m",a.y="y",a.a="a",a.day="d",a.week="w",a.month="m",a.year="y",a.all="a"})(Zm||(Zm={}));var Qg;(function(a){a.d="tagD",a.w="tagW",a.m="tagM",a.y="tagY",a.a="tagA"})(Qg||(Qg={}));var Rg;(function(a){a.d="scoreD",a.w="scoreW",a.m="scoreM",a.y="scoreY",a.a="scoreA"})(Rg||(Rg={}));var pt;(function(a){a.d="day",a.w="week",a.m="month",a.y="year",a.a="all"})(pt||(pt={}));function bn({query:a,totalLines:b=Infinity,linesPerPage:d=1e3,startDocRef:f,startMode:i,forEachPageCallback:l,resolveCallback:q}){return Ht({query:a,remainderLines:b,linesPerPage:d,startDocRef:f,startMode:i,forEachPageCallback:l,resolveCallback:q})}function Ht(a){let b=a.query;a.startDocRef&&(b=b[a.startMode](a.startDocRef));let d=Math.min(a.remainderLines,a.linesPerPage);return a.remainderLines-=d,b.limit(d).get().then(function(f){let i=a.remainderLines===0||f.size<d,l=!1;a.forEachPageCallback&&(l=a.forEachPageCallback(f)||!1),i=i||l;if(i){let q;return a.resolveCallback&&(q=a.resolveCallback()),Promise.resolve(q)}else return a.startDocRef=f.docs[f.size-1],a.startMode="startAfter",Ht(a)})}function bc(a,b=Infinity,d=0,f,i){let l=[],q=0;return bn({query:a,totalLines:d+b,startDocRef:f,startMode:i,forEachPageCallback:function(u){let v,A=u.size,E=d-q;E<=0?v=u.docs:E<A&&(v=u.docs.slice(E,A)),v&&l.push(...v),q+=A},resolveCallback:function(){return l}})}const ima=Rb(ec());function yt(a,b,d=0){return bc(a.nextQuery,b,d,a.baselineDocRef,a.baselineMode).then(function(f){let i=f.length;return a.cacheItems=f,a.pageIndex=void 0,a.startItemIndex=d,a.endItemIndex=a.startItemIndex+i-1,a.isFullPage=b===void 0?!0:i===b,Promise.resolve(a.cacheItems)})}const Ila=Rb(ec());class ij{constructor({query:a={next:void 0,previous:void 0},itemCount:b=100,baselineDoc:d,baselineMode:f="startAt"}={}){this.setQuery(a),this.setItemCount(b),this.setBaselineDoc(d,f),this.pageIndex=void 0,this.baselineDocRef=void 0,this.baselineMode="startAt",this.startItemIndex=void 0,this.endItemIndex=void 0,this.cacheItems=void 0,this.isFullPage=void 0}setQuery(a,b){if(a instanceof Ila.firestore.Query)this.nextQuery=a,this.prevQuery=b;else{var d=a;this.nextQuery=d.next,this.prevQuery=d.previous}return this.pageIndex=null,this.isFullPage=!0,this}setItemCount(a){return this.itemCount=a,this}setBaselineDoc(a,b){return a?(this.baselineDocRef=a.ref,this.baselineMode=b):this.baselineDocRef=void 0,this}load(a,b=0){return yt(this,a,b)}loadFirstPage(){return this._loadFirstPage()}loadNextPage(){return this.pageIndex==null?this._loadFirstPage():this._loadNextPage()}loadPreviousPage(){return this.pageIndex==null||this.pageIndex===1?this._loadFirstPage():this._loadPreviousPage()}loadCurrentPage(){return this.pageIndex==null||this.pageIndex===0?this._loadFirstPage():this._loadCurrentPage()}}function Et(a){return bc(a.nextQuery,a.itemCount,0,a.baselineDocRef,a.baselineMode).then(function(b){let d=b.length;return a.cacheItems=b,a.pageIndex=0,a.startItemIndex=0,a.endItemIndex=a.startItemIndex+d-1,a.isFullPage=d===a.itemCount,a.prevPageEndDocRef=null,a.currPageStartDocRef=b[0].ref,a.currPageEndDocRef=b[d-1].ref,Promise.resolve(a.cacheItems)})}function zt(a){return bc(a.nextQuery,a.itemCount,0,a.baselineDocRef,a.baselineMode).then(function(b){let d=b.length;return a.cacheItems=b,a.pageIndex=0,a.startItemIndex=0,a.endItemIndex=a.startItemIndex+d-1,a.isFullPage=d===a.itemCount,Promise.resolve(a.cacheItems)})}function Ft(a){return bc(a.nextQuery,a.itemCount,0,a.currPageEndDocRef,"startAfter").then(function(b){let d=b.length;return a.cacheItems=b,a.pageIndex+=1,a.startItemIndex=a.endItemIndex+1,a.endItemIndex=a.startItemIndex+d-1,a.isFullPage=d===a.itemCount,a.prevPageEndDocRef=a.currPageEndDocRef,a.currPageStartDocRef=b[0].ref,a.currPageEndDocRef=b[d-1].ref,Promise.resolve(a.cacheItems)})}function At(a){let b=(a.pageIndex+1)*a.itemCount;return bc(a.nextQuery,a.itemCount,b,a.baselineDocRef,a.baselineMode).then(function(d){let f=d.length;return a.cacheItems=d,a.pageIndex+=1,a.startItemIndex=a.endItemIndex+1,a.endItemIndex=a.startItemIndex+f-1,a.isFullPage=f===a.itemCount,Promise.resolve(a.cacheItems)})}function Gt(a){return bc(a.prevQuery,a.itemCount+1,0,a.currPageStartDocRef,"startAfter").then(function(b){let d=b.length-1;return a.cacheItems=b,a.cacheItems.pop(),a.cacheItems.reverse(),a.pageIndex-=1,a.endItemIndex=a.startItemIndex-1,a.startItemIndex=a.endItemIndex-d+1,a.isFullPage=d===a.itemCount,a.prevPageEndDocRef=b[d].ref,a.currPageStartDocRef=b[d-1].ref,a.currPageEndDocRef=b[0].ref,Promise.resolve(a.cacheItems)})}function Bt(a){let b=(a.pageIndex-1)*a.itemCount;return bc(a.nextQuery,a.itemCount,b,a.baselineDocRef,a.baselineMode).then(function(d){let f=d.length;return a.cacheItems=d,a.pageIndex-=1,a.endItemIndex=a.startItemIndex-1,a.startItemIndex=a.endItemIndex-f+1,a.isFullPage=f===a.itemCount,Promise.resolve(a.cacheItems)})}function Dt(a){return bc(a.nextQuery,a.itemCount,0,a.prevPageEndDocRef,"startAfter").then(function(b){let d=b.length;return a.cacheItems=b,a.endItemIndex=a.startItemIndex+d-1,a.isFullPage=d===a.itemCount,a.currPageStartDocRef=b[0].ref,a.currPageEndDocRef=b[d-1].ref,Promise.resolve(a.cacheItems)})}function Ct(a){let b=a.pageIndex*a.itemCount;return bc(a.nextQuery,a.itemCount,b,a.baselineDocRef,a.baselineMode).then(function(d){let f=d.length;return a.cacheItems=d,a.endItemIndex=a.startItemIndex+f-1,a.isFullPage=f===a.itemCount,Promise.resolve(a.cacheItems)})}class _m extends ij{_loadFirstPage(){return zt(this)}_loadNextPage(){return At(this)}_loadPreviousPage(){return Bt(this)}_loadCurrentPage(){return Ct(this)}}const Ika=Rb(ec());class hj extends ij{_loadFirstPage(){return Et(this)}_loadNextPage(){return Ft(this)}_loadPreviousPage(){return Gt(this)}_loadCurrentPage(){return Dt(this)}}const Bla=Rb(ec());function rt(a,b){let d={senderID:a.userID,message:b,timestamp:Bla.firestore.FieldValue.serverTimestamp()};return a.userName!==void 0&&(d.senderName=a.userName),a.receiverID!==void 0&&(d.receiverID=a.receiverID),a.rootRef.add(d)}function $m(a,b=a.receiverID){let d=a.rootRef;return d=b!==void 0?d.where("receiverID","==",b):d,d}function qt(a,b=a.receiverID){let d=$m(a,b),f=d.orderBy("timestamp"),i=d.orderBy("timestamp","desc");return{next:f,previous:i}}const an="receive";function st(a){let b=$m(a).orderBy("timestamp","desc").limit(1);a.unsubscribe=b.onSnapshot({includeMetadataChanges:!0},function(d){if(d.size>0){let f=d.docs[0];if(f.metadata.hasPendingWrites){a.skipFirst&&(a.skipFirst=!1);return}wt(a,a.receiverID,f);if(a.skipFirst)a.skipFirst=!1;else{let i=xt(f);a.cacheMessages.push(i),a.emit(an,i)}}else a.skipFirst&&(a.skipFirst=!1)},function(d){debugger})}function tt(a){a.unsubscribe&&a.unsubscribe(),a.resetQueryFlag=!0,a.cacheMessages.length=0}function ut(a){return wt(a),a.page.loadNextPage().then(function(b){let d=[];for(let f=0,i=b.length;f<i;f++)d.push(xt(b[f]));return a.cacheMessages.splice(0,0,...d),Promise.resolve(d)})}function wt(a,b=a.receiverID,d){if(!a.resetQueryFlag)return;a.resetQueryFlag=!1;let f=a.skipFirst?"startAt":"startAfter";a.page.setBaselineDoc(d,f).setQuery(qt(a,b));return}function xt(a){let b=a.data();return b.timestamp=b.timestamp.toDate(),b}const sla=Rb(ec());class vt extends zb{constructor({eventEmitter:a,root:b="",senderID:d="",senderName:f="",receiverID:i,pageItemCount:l=100}={}){super();this.setEventEmitter(a),this.database=sla.firestore(),this.setRootPath(b),this.userInfo={userID:"",userName:void 0},this.setSender(d,f),this.setReceiver(i),this.skipFirst=!0,this.unsubscribe=void 0,this.page=new hj(),this.setPageItemCount(l),this.resetQueryFlag=!0,this.cacheMessages=[]}destroy(){this.stopReceiving().destroyEventEmitter()}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.resetQueryFlag=this.resetQueryFlag||this.rootPath!==a,this.rootPath=a,this.rootRef=this.database.collection(a),this}setSender(a,b){return typeof a==="string"?(this.userID=a,this.userName=b):this.userInfo=a,this}setReceiver(a){return this.resetQueryFlag=this.resetQueryFlag||this.receiverID!==a,this.receiverID=a,this}setPageItemCount(a){return this.page.setItemCount(a),this}get hasPreviousMessage(){return this.page.isFullPage!==!1}send(a){return rt(this,a)}startReceiving(){return st(this),this}stopReceiving(){return tt(this),this}loadPreviousMessages(){return ut(this)}}const dm="join";const em="leave";const gm="init";const fm="update";const cm="changename";const bm="change";const ns={join:dm,leave:em,update:fm,change:bm,init:gm,changename:cm};var sd;(function(a){a[a.once=0]="once",a[a.child=1]="child",a[a.all=2]="all"})(sd||(sd={}));const Qm="add";const Sm="remove";const Rm="change";const Tm="update";const ft={add:Qm,remove:Sm,update:Tm,change:Rm};function fj(a){a.items.length=0,a.itemID2Index.clear()}function gt(a){return a.items}function ht(a,b){return a.itemID2Index.has(b)}function Pm(a,b){return b==null?null:a.itemID2Index.get(b)}function it(a,b){if(b==null)return null;let d=Pm(a,b);return d==null?null:a.items[d]}function jt(a,b,d){a.items.forEach(b,d)}function Xd(a){a.itemID2Index.clear();let b=a.items;for(var d=0,f=b.length;d<f;d++){let i=b[d][a.keyItemID];a.itemID2Index.set(i,d)}}function Um(a,b){let d=Wm.call(this,a,b);Xd(this),this.emit(this.eventNames.add,d),this.emit(this.eventNames.update,this.items)}function Og(a,b){let d=kt.call(this,a);Xd(this);let f=Wm.call(this,a,b);Xd(this),this.emit(this.eventNames.change,f,d),this.emit(this.eventNames.update,this.items)}function Vm(a){let b=kt.call(this,a);Xd(this),this.emit(this.eventNames.remove,b),this.emit(this.eventNames.update,this.items)}function Pg(a){fj(this),a.forEach(function(b){Wm.call(this,b,null,!0)}.bind(this)),Xd(this),this.emit(this.eventNames.update,this.items)}function Wm(a,b,d=!1){let f,i=this.getItemCallback,l=this.getItemCallbackScope;l?f=i.call(l,a):f=i(a);if(d)return this.items.push(f),f;if(b==null)this.items.unshift(f);else{let q=this.itemID2Index.get(b);q===this.items.length-1?this.items.push(f):this.items.splice(q+1,0,f)}return f}function kt(a){let b=this.itemID2Index.get(a.key),d=Ng(this.items,b);return d}const nt={start(a,b){a.isUpdating=!1,b.once("value",Pg,a)},stop(a){}};const mt={start(a,b){b.on("child_added",Um,a),b.on("child_removed",Vm,a),b.on("child_moved",Og,a),b.on("child_changed",Og,a)},stop(a){a.query.off("child_added",Um,a),a.query.off("child_removed",Vm,a),a.query.off("child_moved",Og,a),a.query.off("child_changed",Og,a)}};const lt={start(a,b){b.on("value",Pg,a)},stop(a){a.query.off("value",Pg,a)}};const Mg={};Mg[sd.all]=lt;Mg[sd.child]=mt;Mg[sd.once]=nt;class Me extends zb{constructor({eventEmitter:a,itemIDKey:b="__itemID__",mode:d=sd.child,getItemCallback:f=dy,getItemCallbackScope:i,query:l,eventNames:q=ft}={}){super();this.setEventEmitter(a),this.eventNames=q,this.isUpdating=!1,this.items=[],this.itemID2Index=new Map(),this.setItemIDKey(b),this.setMode(d),i===void 0&&(i=this),this.setGetitemCallback(f,i),this.setQuery(l)}destroy(){this.stopUpdate().clear()}setItemIDKey(a){return this.keyItemID=a,this}setMode(a){return typeof a==="string"&&(a=sd[a]),this.mode=a,this.updater=Mg[a],this}setGetitemCallback(a,b){return this.getItemCallback=a,this.getItemCallbackScope=b,this}setQuery(a){return this.query=a,this}startUpdate(a){if(a)this.setQuery(a);else if(this.query)a=this.query;else return this;return this.stopUpdate().clear(),this.isUpdating=!0,this.updater.start(this,a),this}stopUpdate(){return!this.query||!this.isUpdating?this:(this.isUpdating=!1,this.updater.stop(this),this)}clear(){return fj(this),this}getItems(){return gt(this)}hasItem(a){return ht(this,a)}getItemIndexFromItemID(a){return Pm(this,a)}getItemFromItemID(a){return it(this,a)}forEach(a,b){return jt(this,a,b),this}updateItemID2Index(){return Xd(this),this}}const dy=function(a){let b=a.val();return b[this.keyItemID]=a.key,b};function Td(a,b=a.userID){return a.userID2ItemID.has(b)}function Ui(a,b=a.userID){if(!Td(a,b))return null;let d=a.userID2ItemID.get(b);return a.rootRef.child(d)}function os(a,b=a.userID){if(!Td(a,b))return null;let d=a.userID2ItemID.get(b);return a.userList.getItemFromItemID(d)}function am(a){return a.userList.getItems()}function ps(a){a.userList.clear()}function qs(a,b,d){a.userList.forEach(b,d)}function rs(a,b=a.userID){let d=a.userList.getItems()[0];return d&&d.userID===b}function ss(a){return a.maxUsers===0?!1:a.userList.getItems().length>=a.maxUsers}function ks(a=0,b){return new Promise(function(d,f){setTimeout(function(){d(b)},a)})}function ls(a,b=a.userID,d=a.userName){if(Td(a,b))return Promise.resolve();let f={userID:b,userName:d},i=a.maxUsers,l=a.database.ref(a.rootPath),q=l.push();return q.onDisconnect().remove().then(function(){return q.set(f)}).then(function(){return ks(0)}).then(function(){return i===0?(a.isInList=!0,Promise.resolve()):l.limitToFirst(i).once("value").then(function(u){return Tx(u,b)?(a.isInList=!0,Promise.resolve()):(a.isInList=!1,q.remove().then(function(){return q.onDisconnect().cancel()}).then(function(){return Promise.reject()}))})})}function Tx(a,b){let d=!1;return a.forEach(function(f){let i=f.val();if(i.userID===b)return d=!0,!0}),d}function ms(a,b=a.userID){if(!Td(a,b))return Promise.resolve();let d=a.userID2ItemID.get(b),f=a.database.ref(a.rootPath).child(d);return f.remove()}function js(a,b){return new Promise(function(d,f){let i=Ui(a);if(i)return d(i);{let l=a.rootRef.orderByChild("userID").equalTo(a.userID);l.once("child_added").then(function(q){return d(q.ref)})}}).then(function(d){return d.child("userName").set(b)}).then(function(){return a.userName=b,Promise.resolve()})}const Kda=Rb(ec());class Gf extends zb{constructor({eventEmitter:a,root:b="",userID:d="",userName:f="",maxUsers:i=0,eventNames:l=ns}={}){super();this.setEventEmitter(a),this.eventNames=l,this.database=Kda.database(),this.setRootPath(b),this.userInfo={userID:"",userName:""},this.setUser(d,f),this.setMaxUsers(i),this.userList=new Me({eventEmitter:this.eventEmitter,itemIDKey:"joinAt",eventNames:{add:l.join,remove:l.leave,update:l.update,change:l.change}}),this.isInList=!1,this.userID2ItemID=new Map(),this.userList.on(this.eventNames.join,function(q){this.userID2ItemID.set(q.userID,q.joinAt),q.userID===this.userInfo.userID&&this.emit(this.eventNames.init,am(this))},this).on(this.eventNames.leave,function(q){this.userID2ItemID.delete(q.userID),q.userID===this.userID&&(this.isInList=!1)},this).on(this.eventNames.change,function(q,u){let v=q.userID,A=q.userName,E=u.userName;A!==E&&this.emit(this.eventNames.changename,v,A,E)},this)}destroy(){this.stopUpdate().destroyEventEmitter().leave(),this.userList.destroy()}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.rootPath=a,this.rootRef=a!==""?this.database.ref(this.rootPath):void 0,this}setUser(a,b){return typeof a==="string"?(this.userID=a,this.userName=b):this.userInfo=a,this}setMaxUsers(a){return this.maxUsers=a,this}clear(){return ps(this),this}forEach(a,b){return qs(this,a,b),this}isFull(){return ss(this)}isFirstUser(a=this.userID){return rs(this,a)}getUser(a=this.userID){return os(this,a)}getUsers(){return am(this)}getUserRef(a=this.userID){return Ui(this,a)}contains(a=this.userID){return Td(this,a)}join(a=this.userID,b=this.userName){return ls(this,a,b)}leave(a=this.userID){return ms(this,a)}changeUserName(a){return js(this,a)}startUpdate(){let a=this.rootRef;return this.maxUsers>0&&(a=a.limitToFirst(this.maxUsers)),this.userList.startUpdate(a),this}stopUpdate(){return this.userList.stopUpdate(),this}}const Ne="room.join";const Vd="room.leave";const wm="userlist.join";const xm="userlist.leave";const zm="userlist.init";const ym="userlist.update";const Jg="userlist.changename";const hm="broadcast.receive";function lm(a){return`tables.${a}.init`}function mm(a){return`tables.${a}.update`}function nm(a){return`tables.${a}.addkey0`}function om(a){return`tables.${a}.addkey1`}function pm(a){return`tables.${a}.addkey2`}function qm(a){return`tables.${a}.removekey0`}function rm(a){return`tables.${a}.removekey1`}function sm(a){return`tables.${a}.removekey2`}function tm(a){return`tables.${a}.changekey0`}function um(a){return`tables.${a}.changekey1`}function vm(a){return`tables.${a}.changekey2`}const im="roomlist.add";const jm="roomlist.remove";const km="roomlist.update";function Fs(a){const b=new Gf({eventEmitter:a.eventEmitter,eventNames:{join:wm,leave:xm,update:ym,change:"userlist.change",init:zm,changename:Jg},userID:a.userInfo});return b.on("userlist.leave",function(d){d.userID===a.userID&&Yx(a)}),a.on(Ne,function(){b.startUpdate()}).on(Vd,function(){b.stopUpdate().clear()}),b}function Yx(a){a.emit(Vd),setTimeout(function(){a.roomID=void 0,a.roomName=void 0,a.doorState=void 0,a.leftRoomFlag=!1},0)}function Cs(a){const b=new Me({eventEmitter:a.eventEmitter,itemIDKey:"roomID",eventNames:{update:km,add:im,remove:jm,change:"roomlist.change"},mode:"once"});return b}function Ms(a){return a.split("|")[0]}function Ls(a){return a.split("|")[1]}function Hf(a,b=""){return`${a}|${b}`}function Lc(a,b){let d=a.rootRef;return b&&(d=d.child(b)),d}function Kg(a,b,d){let f=Lc(a,"rooms");return b!==void 0&&(f=f.child(b),d!==void 0&&(f=f.child(d))),f}function Bs(a,b){return Kg(a,b,"alive")}function Gs(a,b){return Kg(a,b,"users")}function Ig(a,b){let d=Lc(a,"room-filters");return b!==void 0&&(d=d.child(b)),d}function If(a,b){let d=Lc(a,"room-metadata");return b!==void 0&&(d=d.child(b)),d}function Wi(a,b,d){let f=`${a.rootPath}/rooms/${b}`;return d&&(f+=`/${d}`),f}function Yi(a,b){return Wi(a,b,"users")}function Ds(a,b,d){let f=Wi(a,b,"tables");return d&&(f+=`/${d}`),f}function Hs(a,b,d="open"){let f=Ig(a);return f=f.orderByChild("filter"),b===void 0?f=f.startAt(d).endAt(`${d}~`):f=f.equalTo(Hf(d,b)),f}function ys(a,b){if(b)b===!0&&(b={history:!1});else return null;const d=new Ef({eventEmitter:a.eventEmitter,eventNames:{receive:hm},receiverID:"boradcast",senderID:a.userInfo,history:b.history});return a.on(Ne,function(f){d.setRootPath(Wi(a,f.roomID)).startReceiving()}).on(Vd,function(){d.stopReceiving()}).on(Jg,function(f,i){d.changeUserName(f,i)}),d}function Es(a,b){const d=new Map();return b?(b.forEach(f=>{d.set(f.key,Xx(a,f))}),a.on(Ne,function(f){for(const[i,l]of d)l.setRootPath(Ds(a,f.roomID,i)).startUpdate()}).on(Vd,function(){for(const[f,i]of d)i.stopUpdate().clear()}),d):d}function Xx(a,{key:b,type:d=wb["1d"]}){const f=new Ff({eventEmitter:a.eventEmitter,type:d,eventNames:{init:lm(b),update:mm(b),addkey0:nm(b),removekey0:qm(b),changekey0:tm(b),addkey1:om(b),removekey1:rm(b),changekey1:um(b),addkey2:pm(b),removekey2:sm(b),changekey2:vm(b)}});return f}function jc(a,b=a.roomID,d=a.roomName){return{roomID:b,roomName:d}}function aj(a,b){return b===void 0?a.roomID!==void 0:a.roomID===b}function Ps(a){return a.userList.isFull()}function Qs(a,b=a.userID){return a.userList.isFirstUser(b)}function Rs(a){return a.userList.getUsers()}function Zi(a,b,d,f){a.roomID=b,a.roomName=d,a.roomType=f,a.emit("room.join",jc(a))}function Xi(a,b={}){return b.roomID==null&&(b.roomID=Kg(a).push().key),Vx(a,b.roomID).then(function(){return Wx(a,b)})}function Vx(a,b){return Bs(a,b).transaction(function(d){return d===null?!0:void 0})}function Wx(a,{roomID:b,roomName:d="",roomType:f="",maxUsers:i=0,presisted:l=!1,door:q="open",join:u=!0,filterData:v}){let A=Kg(a,b),E=Ig(a,b),H=If(a,b);a.isRemoveRoomWhenLeft=!l,a.isRemoveRoomWhenLeft&&(A.onDisconnect().remove(),E.onDisconnect().remove(),H.onDisconnect().remove());const O=Hf(q,f),I={},Q={filter:O,name:d};v&&(Q.data=v),I[`room-filters/${b}`]=Q;const W={name:d,filter:O,maxUsers:i,moderators:{}};return W.moderators[a.userID]=a.userName,I[`room-metadata/${b}`]=W,new Promise(function(_,fa){if(u){const ha=a.userList.setRootPath(Yi(a,b)).setMaxUsers(0).join();return a.userList.setMaxUsers(i),ha.then(_,fa)}else return _()}).then(function(){return Lc(a).update(I)}).then(function(){return a.isRoomCreator=!0,u&&Zi(a,b,d,f),Promise.resolve(jc(a))})}function zs(a,{digits:b=10,candidates:d="0123456789",retry:f=1e3}){let i=arguments[1];return As(a,b,d,f,i)}function As(a,b,d,f,i){return i.roomID=qe(b,b,d),f<=0?Promise.reject(i):(f--,Xi(a,i).catch(function(){return As(a,b,d,f,i)}))}function bj(a,b=a.roomID){const d={};d[`room-filter/${b}`]=null,d[`room-metadata/${b}`]=null,d[`rooms/${b}`]=null;const f=jc(a);return Lc(a).update(d).then(function(){return Promise.resolve(f)})}function Jf(a){if(!aj(a))return Promise.resolve(jc(a));a.leftRoomFlag=!0;if(a.isRemoveRoomWhenLeft)return bj(a);{const b=jc(a);return a.userList.leave().then(function(){return Promise.resolve(b)})}}function $i(a,{leftThenJoin:b=!0,roomID:d}){return b?Jf(a).then(function(){return Ns(a,d)}):Ns(a,d)}function Ns(a,b){return b==null?Promise.reject(jc(a,b,"")):(a.isRemoveRoomWhenLeft=!1,Zx(a,b).then(function(d){return a.userList.setRootPath(Yi(a,b)).setMaxUsers(d.maxUsers).join().then(function(){return Promise.resolve(d)})}).then(function(d){return Zi(a,b,d.name,Ls(d.filter)),Promise.resolve(jc(a))}))}function Zx(a,b){return If(a,b).once("value").then(function(d){let f=d.val();return _x(a,f)?Promise.resolve(f):Promise.reject()})}function _x(a,b){if(b==null)return!1;if(Ms(b.filter)==="closed")return!1;const d=a.userID;if(b.moderators[d])return!0;switch(b.permission){case"blocklist":const f=b.blocklist;return!(f&&f[d]);case"allowlist":const i=b.allowlist;return i&&i[d];default:return!0}}function _i(a,b,d){return new Promise(function(f,i){a.roomList.once("roomlist.update",function(l){f(l)}).startUpdate(Hs(a,b,d))})}function Js(a,{roomType:b="",leftThenJoin:d=!0}={}){return _i(a,b,"open").then(function(f){if(f.length===0)return Promise.reject("No filtered room");Ke(f);const i={leftThenJoin:d,roomID:""};return Ks(a,i,f)})}function Ks(a,b,d,f=0){return f===d.length?Promise.reject("Can't join any room"):(b.roomID=d[f].roomID,f++,$i(a,b).catch(function(){return Ks(a,b,d,f)}))}function Os(a,b){return a.userList.contains(b)?b===a.userID?Jf(a):a.userList.leave(b):Promise.resolve()}function Ud(a,b){return b===a.roomID?Promise.resolve(!0):If(a,b).once("value").then(function(d){const f=d.val()!==null;return Promise.resolve(f)})}function Vi(a,b,d=a.roomID){return Ud(a,d).then(function(f){if(!f)return Promise.resolve();const i=Hf(b,a.roomType),l={};return l[`room-filters/${d}/filter`]=i,l[`room-metadata/${d}/filter`]=i,Lc(a).update(l)})}function vs(a,b=a.roomID){return Vi(a,"open",b)}function ws(a,b=a.roomID){return Vi(a,"closed",b)}function ts(a,b,d=a.roomID){return Ud(a,d).then(function(f){return f?Ig(a,d).child("data").update(b):Promise.resolve()})}function xs(a,b){return a.userList.changeUserName(b)}function us(a,b,d=a.roomID){return Ud(a,d).then(function(f){if(!f)return Promise.resolve();const i={};return i[`room-filters/${d}/name`]=b,i[`room-metadata/${d}/name`]=b,Lc(a).update(i)})}function Is(a,b=a.roomID){return b===a.roomID?a.userList.getUsers():new Promise(function(d,f){const i=new Me({itemIDKey:"joinAt",mode:"once"});i.once("update",function(l){d(l)}).startUpdate(Gs(a,b))})}const vfa=Rb(ec());class Ss extends zb{constructor({eventEmitter:a,root:b="",userID:d="",userName:f="",broadcast:i=!0,tables:l=!1}={}){super();this.setEventEmitter(a),this.database=vfa.database(),this.setRootPath(b),this.userInfo={userID:"",userName:""},this.setUser(d,f),this.isRoomCreator=!1,this.roomID=void 0,this.roomName=void 0,this.roomType=void 0,this.doorState=void 0,this.leftRoomFlag=!1,this.isRemoveRoomWhenLeft=void 0,this.userList=Fs(this),this.roomList=Cs(this),this.broadcast=ys(this,i),this.tables=Es(this,l)}destroy(){var a=this;this.destroyEventEmitter().leaveRoom().then(function(){a.userList.destroy(),a.userList=void 0,a.roomList.destroy(),a.roomList=void 0,a.broadcast.destroy(),a.broadcast=void 0})}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.rootPath=a,this.rootRef=a!==""?this.database.ref(this.rootPath):void 0,this}getRoomInfo(a,b){return jc(this,a,b)}setUser(a,b){return typeof a==="string"?(this.userID=a,this.userName=b):this.userInfo=a,this}isInRoom(a){return aj(this,a)}isFull(){return Ps(this)}isFirstUser(a=this.userID){return Qs(this,a)}getUsers(){return Rs(this)}get maxUsers(){return this.userList.maxUsers}getTable(a){return this.tables.get(a)}createRoom(a){return Xi(this,a)}createRandomRoom(a={}){return zs(this,a)}joinRoom(a){return $i(this,a)}joinRandomRoom(a={}){return Js(this,a)}leaveRoom(){return Jf(this)}removeRoom(a=this.roomID){return bj(this,a)}kickUser(a){return Os(this,a)}changeRoomState(a,b=this.roomID){return Vi(this,a,b)}openRoom(a=this.roomID){return vs(this,a)}closeRoom(a=this.roomID){return ws(this,a)}changeUserName(a){return xs(this,a)}changeFilterData(a,b=this.roomID){return ts(this,a,b)}changeRoomName(a,b,d=a.roomID){return us(this,b,d)}getUserList(a=this.roomID){return Is(this,a)}getRoomList(a,b){return _i(this,a,b)}HasRoom(a){return Ud(this,a)}}function Zs(a,b){let d=a.rootPath;return b&&(d+=`/${b}`),d}function Xs(a){return Zs(a,"users")}function Vs(a,b){return`${Zs(a,"tables")}/${b}`}const rd="room.join";const Wd="room.leave";const Mm="userlist.join";const cj="userlist.leave";const Om="userlist.init";const Nm="userlist.update";const Lg="userlist.changename";const Am="broadcast.receive";function Bm(a){return`tables.${a}.init`}function Cm(a){return`tables.${a}.update`}function Dm(a){return`tables.${a}.addkey0`}function Em(a){return`tables.${a}.addkey1`}function Fm(a){return`tables.${a}.addkey2`}function Gm(a){return`tables.${a}.removekey0`}function Hm(a){return`tables.${a}.removekey1`}function Im(a){return`tables.${a}.removekey2`}function Jm(a){return`tables.${a}.changekey0`}function Km(a){return`tables.${a}.changekey1`}function Lm(a){return`tables.${a}.changekey2`}function Ys(a,b=0){const d=new Gf({eventEmitter:a.eventEmitter,eventNames:{join:Mm,leave:cj,update:Nm,change:"userlist.change",init:Om,changename:Lg},root:Xs(a),userID:a.userInfo,maxUsers:b});return d.on(cj,function(f){f.userID===a.userID&&by(a)}),a.on(rd,function(){d.startUpdate()}).on(Wd,function(){d.stopUpdate().clear()}),d}function by(a){a.emit(Wd),setTimeout(function(){a.leftRoomFlag=!1},0)}function Us(a,b){if(b)b===!0&&(b={history:!1});else return null;const d=new Ef({eventEmitter:a.eventEmitter,eventNames:{receive:Am},receiverID:"broadcast",senderID:a.userInfo,history:b.history});return a.on(rd,function(){d.setRootPath(a.rootPath).startReceiving()}).on(Wd,function(){d.stopReceiving()}).on(Lg,function(f,i){d.changeUserName(f,i)}),d}function Ws(a,b){const d=new Map();return b?(b.forEach(f=>{d.set(f.key,ay(a,f))}),a.on(rd,function(){for(const[f,i]of d)i.setRootPath(Vs(a,f)).startUpdate()}).on(Wd,function(){for(const[f,i]of d)i.stopUpdate().clear()}),d):d}function ay(a,{key:b,type:d=wb["1d"]}){const f=new Ff({eventEmitter:a.eventEmitter,type:d,eventNames:{init:Bm(b),update:Cm(b),addkey0:Dm(b),removekey0:Gm(b),changekey0:Jm(b),addkey1:Em(b),removekey1:Hm(b),changekey1:Km(b),addkey2:Fm(b),removekey2:Im(b),changekey2:Lm(b)}});return f}function ej(a){return a.userList.isInList}function bt(a){return a.userList.isFull()}function ct(a,b=a.userID){return a.userList.isFirstUser(b)}function dt(a){return a.userList.getUsers()}function $s(a){return a.userList.join().then(function(){return a.emit(rd),Promise.resolve()})}function dj(a){return ej(a)?(a.leftRoomFlag=!0,a.userList.leave()):Promise.resolve()}function _s(a){return a.userList.getUsers()}function at(a,b){return a.userList.contains(b)?b===a.userID?dj(a):a.userList.leave(b):Promise.resolve()}function Ts(a,b){return a.userList.changeUserName(b)}const hha=Rb(ec());class et extends zb{constructor({eventEmitter:a,root:b="",userID:d="",userName:f="",maxUsers:i=0,broadcast:l=!0,tables:q=!1}={}){const u=arguments[0];super();this.setEventEmitter(a),this.database=hha.database(),this.setRootPath(b),this.userInfo={userID:"",userName:""},this.setUser(d,f),this.leftRoomFlag=!1,this.userList=Ys(this,i),this.broadcast=Us(this,l),this.tables=Ws(this,q)}shutdown(){}destroy(){this.shutdown()}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.rootPath=a,this.rootRef=a!==""?this.database.ref(this.rootPath):void 0,this}setUser(a,b){return typeof a==="string"?(this.userID=a,this.userName=b):this.userInfo=a,this}isInRoom(){return ej(this)}isFull(){return bt(this)}isFirstUser(a=this.userID){return ct(this,a)}getUsers(){return dt(this)}get maxUsers(){return this.userList.maxUsers}getTable(a){return this.tables.get(a)}joinRoom(){return $s(this)}leaveRoom(){return dj(this)}getUserList(){return _s(this)}kickUser(a){return at(this,a)}changeUserName(a){return Ts(this,a)}}const Pn="statechange";function Qn(a){return`exit_${a.toString()}`}function Rn(a){return`enter_${a.toString()}`}class Lv extends zb{constructor({eventEmitter:a}={}){super();this._states=new Map();this.enable=!0;this.setEventEmitter(a)}destroy(){this.destroyEventEmitter()}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(a=!0){return this.enable=a,this}getState(a){return this._states.get(a)}addState(a){return this._states.set(a.name,a),this}addStates(a){for(let b=0,d=a.length;b<d;b++)this.addState(a[b]);return this}removeState(a){return this._states.delete(a),this}removeAllStates(){return this._states.clear(),this}set state(a){if(!this.enable||this._stateLock)return;if(this._state===a)return;this._prevState=this._state,this._state=a,this._stateLock=!0,this.emit(Pn,this);if(this._prevState!=null){const b=this.getState(this._prevState);b&&b.exit&&b.exit(this),this.emit(Qn(this._prevState),this)}this._stateLock=!1;if(this._state!=null){const b=this.getState(this._state);b&&b.enter&&b.enter(this),this.emit(Rn(this._state),this)}}get state(){return this._state}get prevState(){return this._prevState}get stateList(){return Array.from(this._states.keys())}start(a){return this._start=a,this._prevState=void 0,this._state=a,this}goto(a){return a!=null&&(this.state=a),this}next(){const a=this.getState(this.state);if(!a||!a.next)return this;let b;return typeof a.next==="string"?b=a.next:b=a.next(this),this.goto(b),this}update(a,b,d="update"){const f=this.getState(this.state);f&&f[d]&&f[d](this,a,b)}preupdate(a,b){this.update(b,a,"preupdate")}postupdate(a,b){this.update(b,a,"postupdate")}}var Sn;(function(a){a[a.shuffle=0]="shuffle",a[a.random=1]="random"})(Sn||(Sn={}));const Vn="die";class Mv extends Ij{constructor(a,{lifeTime:b=1e3,destroy:d=!0}={}){super(a,arguments[1]);this.setLifeTime(b),this.setDestroyMode(d)}resetFromJSON({lifeTime:a=1e3,destroy:b=!0}={}){return super.resetFromJSON(arguments[0]),this.setLifeTime(a),this.setDestroyMode(b),this}toJSON(){const a=super.toJSON();return a.lifeTime=this.lifeTime,a.destroy=this.destroyMode,a}setLifeTime(a){return this.lifeTime=a,this}addToLifeTime(a){return this.lifeTime+=a,this}setDestroyMode(a=!0){return this.destroyMode=a,this}get isAlive(){return this.now<this.lifeTime}get remainder(){let a=this.lifeTime-this.now;return a<0&&(a=0),a}update(a){return this.isRunning?(super.update(a),this.isAlive||(this.complete(Vn),this.destroyMode&&this.gameObject.destroy&&this.gameObject.destroy()),this):this}get gameObject(){return this.parent}}class Jj{constructor(a,b,d,f,i){this.key=a,this.start=b,this.end=d,this.step=f,this.items=i,this._current=b}reset(){this._current=this.start}get isEnd(){return this.step>=0?this._current>=this.end:this._current<=this.end}get length(){return this.step>=0&&this.start>this.end||this.step<0&&this.start<this.end?0:Math.floor(this.end-this.start)+1}next(){return this.isEnd?this._current=this.start:this._current+=this.step,this}get current(){return this.items?this.items[this._current]:this._current}}class Ov{constructor(){this.indexes=[];this.length=0;this.firstPass=!0;this.currentCount=0}reset(){for(let a=0,b=this.indexes.length;a<b;a++)this.indexes[a].reset();return this.firstPass=!0,this.currentCount=0,this}addNumberLoop(a,b,d,f=d>=b?1:-1){return this.indexes.push(new Jj(a,b,d,f)),this.length=this._getLength(),this}addItemsLoop(a,b,d=!1){const f=b.length-1,i=d?f:0,l=d?0:f,q=d?-1:1;return this.indexes.push(new Jj(a,i,l,q,b)),this.length=this._getLength(),this}addLoop({key:a,start:b,end:d,step:f,items:i}){return this.indexes.push(new Jj(a,b,d,f,i)),this.length=this._getLength(),this}removeLoops(){return this.indexes.length=0,this.length=0,this}_getLength(){let a=this.indexes[0]?.length;for(let b=1,d=this.indexes.length;b<d;b++)a*=this.indexes[b].length;return a??0}get progress(){return this.currentCount/this.length}get isEnd(){for(let a=this.indexes.length-1;a>=0;a--)if(!this.indexes[a].isEnd)return!1;return!0}next(){for(let a=this.indexes.length-1;a>=0;a--){const b=this.indexes[a],d=b.isEnd;b.next();if(!d)break}return this}getCurrent(a={}){for(let b=this.indexes.length-1;b>=0;b--){const d=this.indexes[b];a[d.key]=d.current}return a}getNext(a={}){return this.firstPass?this.firstPass=!1:this.next(),this.getCurrent(a),this.currentCount++,a}}const Ln="tickstart";const Mn="tickend";const bz=1e3/60;class Nv extends Kj{constructor(a,{callback:b,scope:d,deltaPercentage:f=1}={}){super(a,arguments[1]);this.deltaPercentage=1;this.loopIndexGenerator=new Ov();this.currentIndexes={};this.scene=a,this.setCallback(b,d),this.setDeltaPercentage(f),this.boot()}boot(){super.boot(),ve(this.scene,"shutdown",this.destroy,this)}shutdown(){super.shutdown(),this.scene=void 0}destroy(){this.shutdown()}startTicking(){super.startTicking(),lc(this.scene,"update",this.preupdate,this)}stopTicking(){super.stopTicking(),this.scene&&md(this.scene,"update",this.preupdate,this)}setCallback(a,b){return this.callback=a,this.scope=b,this}setDeltaPercentage(a){return this.deltaPercentage=a,this}addNumberLoop(a,b,d,f){return this.loopIndexGenerator.addNumberLoop(a,b,d,f),this}addItemsLoop(a,b,d=!1){return this.loopIndexGenerator.addItemsLoop(a,b,d),this}addLoop(a){return this.loopIndexGenerator.addLoop(a),this}get curTime(){return new Date().getTime()}get progress(){return this.loopIndexGenerator.progress}preupdate(){if(!this.callback)return;const a=this.curTime,b=bz*this.deltaPercentage;let d;this.emit(Ln);do{if(this.loopIndexGenerator.isEnd){this.complete();return}this.currentIndexes=this.loopIndexGenerator.getNext(this.currentIndexes),this.scope?this.callback.call(this.scope,this.currentIndexes,this):this.callback(this.currentIndexes,this),d=this.curTime-a>=b}while(!d);this.emit(Mn)}}const XBa=Rb(jw());var Tn;(function(a){a[a.none=0]="none",a[a.base64=1]="base64",a[a.utf16=2]="utf16",a[a.uri=3]="uri"})(Tn||(Tn={}));let lz=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i;function Df(a){let b;return a===""?b=null:lz.test(a)?b=parseFloat(a):a==="false"?b=!1:a==="true"?b=!0:b=a,b}const mxa=Rb(ql());function Pv(a,{delimiter:b=",",convert:d=!0,types:f={}}={}){const i=mxa.default.parse(a,{header:!0,delimiter:b}).data,l=f.question??"q",q=f.option??"",u=d===!0?Df:d,v=[];let A,E;for(let H=0,O=i.length;H<O;H++){let I=i[H],Q=I.type;delete I.type,Q===l?(A=I,A.key===""&&delete A.key,Rv(A,u),A.options=[],v.push(A)):Q===q&&(A&&(E=I,E.key===""&&delete E.key,Rv(E,u),A.options.push(E)))}return v}function Rv(a,b){const d=a;if(!b)return d;for(const f in a)d[f]=b(a[f],f);return d}function On(a,b,d){typeof b==="string"&&(b=Pv(b,d));if(Array.isArray(b))for(let f=0,i=b.length;f<i;f++)Qv(a,b[f]);else Qv(a,b)}function Qv(a,b){const d=b.options;if(d)for(let f=0,i=d.length;f<i;f++){let l=d[f];l.hasOwnProperty("key")||(l.key=`_${f}`)}b.hasOwnProperty("key")||(b.key=`_${a.questions.size}`),a.questions.set(b.key,b)}class Nn{constructor({questions:a}={}){this.questions=new Map();a&&On(this,a,arguments[0])}add(a,b){return On(this,a,b),this}remove(a){return this.questions.delete(a),this}removeAll(){return this.questions.clear(),this}has(a){return this.questions.has(a)}get(a){return this.questions.get(a)}getKeys(a=[]){const b=this.questions.keys();for(const d of b)a.push(d);return a}getOption(a,b){typeof a==="string"&&(a=this.get(a));if(!a)return null;const d=a.options;if(d)for(let f=0,i=d.length;f<i;f++){let l=d[f];if(l.key===b)return l}return null}}const Lj="quest";class cz extends zb{constructor(a,{eventEmitter:b,shuffleQuestions:d=!1,shuffleOptions:f=!1}={}){super();this.questionKeys=[];this.setEventEmitter(b),Qi(a)&&(a=new Nn(a)),this.questionsManager=a,this.setShuffleQuestionsEnable(d),this.setShuffleOptionsEnable(f),this.init()}setShuffleQuestionsEnable(a=!0){return this.shuffleQuestionsEnable=a,this}setShuffleOptionsEnable(a=!0){return this.shuffleOptionsEnable=a,this}init(){return this.questionKeys.length=0,this.questionsManager.getKeys(this.questionKeys),this.shuffleQuestionsEnable&&Ke(this.questionKeys),this.nextIndex=-1,this.nextKey=void 0,this}setNextKey(a){return a===void 0?(this.nextIndex++,this.nextKey=this.questionKeys[this.nextIndex]):this.questionsManager.has(a)&&(this.nextKey=a,this.nextIndex=this.questionKeys.indexOf(a)),this}setPrevKey(){return this.nextIndex--,this.nextKey=this.questionKeys[this.nextIndex],this}getQuestion(){const a=this.questionsManager.get(this.nextKey);if(a&&this.shuffleOptionsEnable){const b=a.options;b&&Ke(b)}return a}getNextQuestion(a){return this.setNextKey(a).getQuestion()}getPrevQuestion(){return this.setPrevKey().getQuestion()}getOption(a,b){return b===void 0&&(b=a,a=this.getQuestion()),this.questionsManager.getOption(a,b)}next(a){const b=this.getNextQuestion(a);return b&&this.emit(Lj,b,this,this.questionsManager),this}prev(){const a=this.getPrevQuestion();return a&&this.emit(Lj,a,this,this.questionsManager),this}restart(a){return this.init(),this.next(a),this}get isLastQuestion(){return this.nextIndex===this.questionKeys.length-1}}var Nl;(function(a){a[a.ascending=0]="ascending",a[a.descending=1]="descending",a[a.logical_ascending=2]="logical_ascending",a[a.logical_descending=3]="logical_descending"})(Nl||(Nl={}));class mw extends Ph{constructor(){super();const a=new Fc.Sizer({x:400,y:300,width:750,height:500,orientation:"x"});for(let d=0;d<3;d++)a.add(pw(),{proportion:1,expand:!0});a.layout();const b=new Pk(this);pe(b,a)}}const nw=5125166,ow=8085079;function pw(){const a=new Fc.Sizer({orientation:"y"});return a.add(qw()).add(rw(),{proportion:1,expand:!0}),a}function qw(){const a=new Fc.Label({background:new Fc.RoundRectangleCanvas({radius:14,fillStyle:ow}),text:new Qh(0,0,qe(3,6),"20px monospace"),space:{left:14,right:14,top:14,bottom:14}});return a}function rw(){const a=new Fc.FixedWidthSizer({space:{left:3,right:3,top:3,bottom:3,item:8,line:8}});for(let b=0;b<20;b++)a.add(sw());return a}function sw(){const a=new Fc.Label({background:new Fc.RoundRectangleCanvas({radius:14,fillStyle:nw}),text:new Qh(0,0,qe(3,6),"18px monospace"),space:{left:10,right:10,top:10,bottom:10}});return a}new Ip(Ok(),Nk(800,600),Lk("game"),Kk(2960685),Mk(mw));})();
/* @license
Papa Parse
v5.3.0
https://github.com/mholt/PapaParse
License: MIT
*/
/*!
 * Chart.js v2.9.3
 * https://www.chartjs.org
 * (c) 2019 Chart.js Contributors
 * Released under the MIT License
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! moment.js
//! momentjs.com
//! version : 2.29.0
