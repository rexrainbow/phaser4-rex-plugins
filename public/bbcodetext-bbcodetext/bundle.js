(()=>{var Jj=Object.defineProperty,cw=Object.prototype.hasOwnProperty,Dc=(a,b)=>()=>(b||(b={exports:{}},a(b.exports,b)),b.exports),dw=a=>Jj(a,"__esModule",{value:!0}),Ue=(a,b)=>{dw(a);for(var d in b)Jj(a,d,{get:b[d],enumerable:!0})},Zy=(a,b)=>{dw(a);if(typeof b==="object"||typeof b==="function")for(let d in b)cw.call(b,d)&&!cw.call(a,d)&&d!=="default"&&Jj(a,d,{get:()=>b[d],enumerable:!0});return a},Sb=a=>a&&a.__esModule?a:Zy(Jj({},"default",{value:a,enumerable:!0}),a);var Qq=Dc((a,b)=>{(function(d,f){typeof a==="object"&&typeof b!=="undefined"?b.exports=f():typeof define==="function"&&define.amd?define(f):d.moment=f()})(a,function(){"use strict";var d;function f(){return d.apply(null,arguments)}function i(j){d=j}function l(j){return j instanceof Array||Object.prototype.toString.call(j)==="[object Array]"}function q(j){return j!=null&&Object.prototype.toString.call(j)==="[object Object]"}function u(j,n){return Object.prototype.hasOwnProperty.call(j,n)}function v(j){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(j).length===0;{var n;for(n in j)if(u(j,n))return!1;return!0}}function A(j){return j===void 0}function E(j){return typeof j==="number"||Object.prototype.toString.call(j)==="[object Number]"}function H(j){return j instanceof Date||Object.prototype.toString.call(j)==="[object Date]"}function R(j,n){var t=[],y;for(y=0;y<j.length;++y)t.push(n(j[y],y));return t}function L(j,n){for(var t in n)u(n,t)&&(j[t]=n[t]);return u(n,"toString")&&(j.toString=n.toString),u(n,"valueOf")&&(j.valueOf=n.valueOf),j}function O(j,n,t,y){return sc(j,n,t,y,!0).utc()}function V(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function X(j){return j._pf==null&&(j._pf=V()),j._pf}var ea;Array.prototype.some?ea=Array.prototype.some:ea=function(j){var n=Object(this),t=n.length>>>0,y;for(y=0;y<t;y++)if(y in n&&j.call(this,n[y],y,n))return!0;return!1};function ga(j){if(j._isValid==null){var n=X(j),t=ea.call(n.parsedDateParts,function(C){return C!=null}),y=!isNaN(j._d.getTime())&&n.overflow<0&&!n.empty&&!n.invalidEra&&!n.invalidMonth&&!n.invalidWeekday&&!n.weekdayMismatch&&!n.nullInput&&!n.invalidFormat&&!n.userInvalidated&&(!n.meridiem||n.meridiem&&t);j._strict&&(y=y&&n.charsLeftOver===0&&n.unusedTokens.length===0&&n.bigHour===void 0);if(Object.isFrozen==null||!Object.isFrozen(j))j._isValid=y;else return y}return j._isValid}function ka(j){var n=O(NaN);return j!=null?L(X(n),j):X(n).userInvalidated=!0,n}var ha=f.momentProperties=[],oa=!1;function pa(j,n){var t,y,C;A(n._isAMomentObject)||(j._isAMomentObject=n._isAMomentObject),A(n._i)||(j._i=n._i),A(n._f)||(j._f=n._f),A(n._l)||(j._l=n._l),A(n._strict)||(j._strict=n._strict),A(n._tzm)||(j._tzm=n._tzm),A(n._isUTC)||(j._isUTC=n._isUTC),A(n._offset)||(j._offset=n._offset),A(n._pf)||(j._pf=X(n)),A(n._locale)||(j._locale=n._locale);if(ha.length>0)for(t=0;t<ha.length;t++)y=ha[t],C=n[y],A(C)||(j[y]=C);return j}function ja(j){pa(this,j),this._d=new Date(j._d!=null?j._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),oa===!1&&(oa=!0,f.updateOffset(this),oa=!1)}function I(j){return j instanceof ja||j!=null&&j._isAMomentObject!=null}function P(j){f.suppressDeprecationWarnings===!1&&typeof console!=="undefined"&&console.warn&&console.warn("Deprecation warning: "+j)}function x(j,n){var t=!0;return L(function(){f.deprecationHandler!=null&&f.deprecationHandler(null,j);if(t){var y=[],C,W,fa;for(W=0;W<arguments.length;W++){C="";if(typeof arguments[W]==="object"){C+=`
[`+W+"] ";for(fa in arguments[0])u(arguments[0],fa)&&(C+=fa+": "+arguments[0][fa]+", ");C=C.slice(0,-2)}else C=arguments[W];y.push(C)}P(j+`
Arguments: `+Array.prototype.slice.call(y).join("")+`
`+new Error().stack),t=!1}return n.apply(this,arguments)},n)}var G={};function F(j,n){f.deprecationHandler!=null&&f.deprecationHandler(j,n),G[j]||(P(n),G[j]=!0)}f.suppressDeprecationWarnings=!1,f.deprecationHandler=null;function J(j){return typeof Function!=="undefined"&&j instanceof Function||Object.prototype.toString.call(j)==="[object Function]"}function U(j){var n,t;for(t in j)u(j,t)&&(n=j[t],J(n)?this[t]=n:this["_"+t]=n);this._config=j,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function K(j,n){var t=L({},j),y;for(y in n)u(n,y)&&(q(j[y])&&q(n[y])?(t[y]={},L(t[y],j[y]),L(t[y],n[y])):n[y]!=null?t[y]=n[y]:delete t[y]);for(y in j)u(j,y)&&!u(n,y)&&q(j[y])&&(t[y]=L({},t[y]));return t}function ca(j){j!=null&&this.set(j)}var ba;Object.keys?ba=Object.keys:ba=function(j){var n,t=[];for(n in j)u(j,n)&&t.push(n);return t};var Ba={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function $(j,n,t){var y=this._calendar[j]||this._calendar.sameElse;return J(y)?y.call(n,t):y}function va(j,n,t){var y=""+Math.abs(j),C=n-y.length,W=j>=0;return(W?t?"+":"":"-")+Math.pow(10,Math.max(0,C)).toString().substr(1)+y}var ra=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,da=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,na={},xa={};function ma(j,n,t,y){var C=y;typeof y==="string"&&(C=function(){return this[y]()}),j&&(xa[j]=C),n&&(xa[n[0]]=function(){return va(C.apply(this,arguments),n[1],n[2])}),t&&(xa[t]=function(){return this.localeData().ordinal(C.apply(this,arguments),j)})}function eb(j){return j.match(/\[[\s\S]/)?j.replace(/^\[|\]$/g,""):j.replace(/\\/g,"")}function gb(j){var n=j.match(ra),t,y;for(t=0,y=n.length;t<y;t++)xa[n[t]]?n[t]=xa[n[t]]:n[t]=eb(n[t]);return function(C){var W="",fa;for(fa=0;fa<y;fa++)W+=J(n[fa])?n[fa].call(C,j):n[fa];return W}}function hb(j,n){return j.isValid()?(n=Ca(n,j.localeData()),na[n]=na[n]||gb(n),na[n](j)):j.localeData().invalidDate()}function Ca(j,n){var t=5;function y(C){return n.longDateFormat(C)||C}for(da.lastIndex=0;t>=0&&da.test(j);)j=j.replace(da,y),da.lastIndex=0,t-=1;return j}var Ja={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Za(j){var n=this._longDateFormat[j],t=this._longDateFormat[j.toUpperCase()];return n||!t?n:(this._longDateFormat[j]=t.match(ra).map(function(y){return y==="MMMM"||y==="MM"||y==="DD"||y==="dddd"?y.slice(1):y}).join(""),this._longDateFormat[j])}var fb="Invalid date";function qa(){return this._invalidDate}var ya="%d",Ma=/\d{1,2}/;function ta(j){return this._ordinal.replace("%d",j)}var Ea={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function cb(j,n,t,y){var C=this._relativeTime[t];return J(C)?C(j,n,t,y):C.replace(/%d/i,j)}function Da(j,n){var t=this._relativeTime[j>0?"future":"past"];return J(t)?t(n):t.replace(/%s/i,n)}var Ta={};function Ka(j,n){var t=j.toLowerCase();Ta[t]=Ta[t+"s"]=Ta[n]=j}function Wa(j){return typeof j==="string"?Ta[j]||Ta[j.toLowerCase()]:void 0}function jb(j){var n={},t,y;for(y in j)u(j,y)&&(t=Wa(y),t&&(n[t]=j[y]));return n}var ub={};function ob(j,n){ub[j]=n}function sa(j){var n=[],t;for(t in j)u(j,t)&&n.push({unit:t,priority:ub[t]});return n.sort(function(y,C){return y.priority-C.priority}),n}function _a(j){return j%4===0&&j%100!==0||j%400===0}function Y(j){return j<0?Math.ceil(j)||0:Math.floor(j)}function M(j){var n=+j,t=0;return n!==0&&isFinite(n)&&(t=Y(n)),t}function _(j,n){return function(t){return t!=null?(S(this,j,t),f.updateOffset(this,n),this):aa(this,j)}}function aa(j,n){return j.isValid()?j._d["get"+(j._isUTC?"UTC":"")+n]():NaN}function S(j,n,t){j.isValid()&&!isNaN(t)&&(n==="FullYear"&&_a(j.year())&&j.month()===1&&j.date()===29?(t=M(t),j._d["set"+(j._isUTC?"UTC":"")+n](t,j.month(),Ve(t,j.month()))):j._d["set"+(j._isUTC?"UTC":"")+n](t))}function za(j){return j=Wa(j),J(this[j])?this[j]():this}function Sa(j,n){if(typeof j==="object"){j=jb(j);var t=sa(j),y;for(y=0;y<t.length;y++)this[t[y].unit](j[t[y].unit])}else{j=Wa(j);if(J(this[j]))return this[j](n)}return this}var pb=/\d/,Ua=/\d\d/,lb=/\d{3}/,Mb=/\d{4}/,Db=/[+-]?\d{6}/,La=/\d\d?/,td=/\d\d\d\d?/,Lf=/\d\d\d\d\d\d?/,Mf=/\d{1,3}/,B=/\d{1,4}/,Nf=/[+-]?\d{1,6}/,_d=/\d+/,Of=/[+-]?\d+/,bo=/Z|[+-]\d\d:?\d\d/gi,Pf=/Z|[+-]\d\d(?::?\d\d)?/gi,co=/[+-]?\d+(\.\d{1,3})?/,ud=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,cc;cc={};function ua(j,n,t){cc[j]=J(n)?n:function(y,C){return y&&t?t:n}}function bh(j,n){return u(cc,j)?cc[j](n._strict,n._locale):new RegExp(ch(j))}function ch(j){return Ib(j.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(n,t,y,C,W){return t||y||C||W}))}function Ib(j){return j.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Qf={};function kb(j,n){var t,y=n;for(typeof j==="string"&&(j=[j]),E(n)&&(y=function(C,W){W[n]=M(C)}),t=0;t<j.length;t++)Qf[j[t]]=y}function $d(j,n){kb(j,function(t,y,C,W){C._w=C._w||{},n(t,C._w,C,W)})}function dh(j,n,t){n!=null&&u(Qf,j)&&Qf[j](n,t._a,t,j)}var mb=0,Jb=1,pc=2,Eb=3,qc=4,Mc=5,bd=6,Kj=7,eo=8;function fo(j,n){return(j%n+n)%n}var vb;Array.prototype.indexOf?vb=Array.prototype.indexOf:vb=function(j){var n;for(n=0;n<this.length;++n)if(this[n]===j)return n;return-1};function Ve(j,n){if(isNaN(j)||isNaN(n))return NaN;var t=fo(n,12);return j+=(n-t)/12,t===1?_a(j)?29:28:31-t%7%2}ma("M",["MM",2],"Mo",function(){return this.month()+1}),ma("MMM",0,0,function(j){return this.localeData().monthsShort(this,j)}),ma("MMMM",0,0,function(j){return this.localeData().months(this,j)}),Ka("month","M"),ob("month",8),ua("M",La),ua("MM",La,Ua),ua("MMM",function(j,n){return n.monthsShortRegex(j)}),ua("MMMM",function(j,n){return n.monthsRegex(j)}),kb(["M","MM"],function(j,n){n[Jb]=M(j)-1}),kb(["MMM","MMMM"],function(j,n,t,y){var C=t._locale.monthsParse(j,y,t._strict);C!=null?n[Jb]=C:X(t).invalidMonth=j});var go="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Lj="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),eh=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Rf=ud,Mj=ud;function Nj(j,n){return j?l(this._months)?this._months[j.month()]:this._months[(this._months.isFormat||eh).test(n)?"format":"standalone"][j.month()]:l(this._months)?this._months:this._months.standalone}function ho(j,n){return j?l(this._monthsShort)?this._monthsShort[j.month()]:this._monthsShort[eh.test(n)?"format":"standalone"][j.month()]:l(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function io(j,n,t){var y,C,W,fa=j.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],y=0;y<12;++y)W=O([2e3,y]),this._shortMonthsParse[y]=this.monthsShort(W,"").toLocaleLowerCase(),this._longMonthsParse[y]=this.months(W,"").toLocaleLowerCase();return t?n==="MMM"?(C=vb.call(this._shortMonthsParse,fa),C!==-1?C:null):(C=vb.call(this._longMonthsParse,fa),C!==-1?C:null):n==="MMM"?(C=vb.call(this._shortMonthsParse,fa),C!==-1?C:(C=vb.call(this._longMonthsParse,fa),C!==-1?C:null)):(C=vb.call(this._longMonthsParse,fa),C!==-1?C:(C=vb.call(this._shortMonthsParse,fa),C!==-1?C:null))}function jo(j,n,t){var y,C,W;if(this._monthsParseExact)return io.call(this,j,n,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),y=0;y<12;y++){C=O([2e3,y]),t&&!this._longMonthsParse[y]&&(this._longMonthsParse[y]=new RegExp("^"+this.months(C,"").replace(".","")+"$","i"),this._shortMonthsParse[y]=new RegExp("^"+this.monthsShort(C,"").replace(".","")+"$","i")),!t&&!this._monthsParse[y]&&(W="^"+this.months(C,"")+"|^"+this.monthsShort(C,""),this._monthsParse[y]=new RegExp(W.replace(".",""),"i"));if(t&&n==="MMMM"&&this._longMonthsParse[y].test(j))return y;{if(t&&n==="MMM"&&this._shortMonthsParse[y].test(j))return y;if(!t&&this._monthsParse[y].test(j))return y}}}function ae(j,n){var t;if(!j.isValid())return j;if(typeof n==="string")if(/^\d+$/.test(n))n=M(n);else{n=j.localeData().monthsParse(n);if(!E(n))return j}return t=Math.min(j.date(),Ve(j.year(),n)),j._d["set"+(j._isUTC?"UTC":"")+"Month"](n,t),j}function Oj(j){return j!=null?(ae(this,j),f.updateOffset(this,!0),this):aa(this,"Month")}function Wb(){return Ve(this.year(),this.month())}function ko(j){return this._monthsParseExact?(u(this,"_monthsRegex")||Pj.call(this),j?this._monthsShortStrictRegex:this._monthsShortRegex):(u(this,"_monthsShortRegex")||(this._monthsShortRegex=Rf),this._monthsShortStrictRegex&&j?this._monthsShortStrictRegex:this._monthsShortRegex)}function lo(j){return this._monthsParseExact?(u(this,"_monthsRegex")||Pj.call(this),j?this._monthsStrictRegex:this._monthsRegex):(u(this,"_monthsRegex")||(this._monthsRegex=Mj),this._monthsStrictRegex&&j?this._monthsStrictRegex:this._monthsRegex)}function Pj(){function j(fa,Fa){return Fa.length-fa.length}var n=[],t=[],y=[],C,W;for(C=0;C<12;C++)W=O([2e3,C]),n.push(this.monthsShort(W,"")),t.push(this.months(W,"")),y.push(this.months(W,"")),y.push(this.monthsShort(W,""));for(n.sort(j),t.sort(j),y.sort(j),C=0;C<12;C++)n[C]=Ib(n[C]),t[C]=Ib(t[C]);for(C=0;C<24;C++)y[C]=Ib(y[C]);this._monthsRegex=new RegExp("^("+y.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}ma("Y",0,0,function(){var j=this.year();return j<=9999?va(j,4):"+"+j}),ma(0,["YY",2],0,function(){return this.year()%100}),ma(0,["YYYY",4],0,"year"),ma(0,["YYYYY",5],0,"year"),ma(0,["YYYYYY",6,!0],0,"year"),Ka("year","y"),ob("year",1),ua("Y",Of),ua("YY",La,Ua),ua("YYYY",B,Mb),ua("YYYYY",Nf,Db),ua("YYYYYY",Nf,Db),kb(["YYYYY","YYYYYY"],mb),kb("YYYY",function(j,n){n[mb]=j.length===2?f.parseTwoDigitYear(j):M(j)}),kb("YY",function(j,n){n[mb]=f.parseTwoDigitYear(j)}),kb("Y",function(j,n){n[mb]=parseInt(j,10)});function We(j){return _a(j)?366:365}f.parseTwoDigitYear=function(j){return M(j)+(M(j)>68?1900:2e3)};var be=_("FullYear",!0);function ce(){return _a(this.year())}function mo(j,n,t,y,C,W,fa){var Fa;return j<100&&j>=0?(Fa=new Date(j+400,n,t,y,C,W,fa),isFinite(Fa.getFullYear())&&Fa.setFullYear(j)):Fa=new Date(j,n,t,y,C,W,fa),Fa}function Xe(j){var n,t;return j<100&&j>=0?(t=Array.prototype.slice.call(arguments),t[0]=j+400,n=new Date(Date.UTC.apply(null,t)),isFinite(n.getUTCFullYear())&&n.setUTCFullYear(j)):n=new Date(Date.UTC.apply(null,arguments)),n}function Sf(j,n,t){var y=7+n-t,C=(7+Xe(j,0,y).getUTCDay()-n)%7;return-C+y-1}function fh(j,n,t,y,C){var W=(7+t-y)%7,fa=Sf(j,y,C),Fa=1+7*(n-1)+W+fa,Va,rb;return Fa<=0?(Va=j-1,rb=We(Va)+Fa):Fa>We(j)?(Va=j+1,rb=Fa-We(j)):(Va=j,rb=Fa),{year:Va,dayOfYear:rb}}function vd(j,n,t){var y=Sf(j.year(),n,t),C=Math.floor((j.dayOfYear()-y-1)/7)+1,W,fa;return C<1?(fa=j.year()-1,W=C+Nc(fa,n,t)):C>Nc(j.year(),n,t)?(W=C-Nc(j.year(),n,t),fa=j.year()+1):(fa=j.year(),W=C),{week:W,year:fa}}function Nc(j,n,t){var y=Sf(j,n,t),C=Sf(j+1,n,t);return(We(j)-y+C)/7}ma("w",["ww",2],"wo","week"),ma("W",["WW",2],"Wo","isoWeek"),Ka("week","w"),Ka("isoWeek","W"),ob("week",5),ob("isoWeek",5),ua("w",La),ua("ww",La,Ua),ua("W",La),ua("WW",La,Ua),$d(["w","ww","W","WW"],function(j,n,t,y){n[y.substr(0,1)]=M(j)});function no(j){return vd(j,this._week.dow,this._week.doy).week}var Tf={dow:0,doy:6};function wd(){return this._week.dow}function Oc(){return this._week.doy}function xd(j){var n=this.localeData().week(this);return j==null?n:this.add((j-n)*7,"d")}function Qj(j){var n=vd(this,1,4).week;return j==null?n:this.add((j-n)*7,"d")}ma("d",0,"do","day"),ma("dd",0,0,function(j){return this.localeData().weekdaysMin(this,j)}),ma("ddd",0,0,function(j){return this.localeData().weekdaysShort(this,j)}),ma("dddd",0,0,function(j){return this.localeData().weekdays(this,j)}),ma("e",0,0,"weekday"),ma("E",0,0,"isoWeekday"),Ka("day","d"),Ka("weekday","e"),Ka("isoWeekday","E"),ob("day",11),ob("weekday",11),ob("isoWeekday",11),ua("d",La),ua("e",La),ua("E",La),ua("dd",function(j,n){return n.weekdaysMinRegex(j)}),ua("ddd",function(j,n){return n.weekdaysShortRegex(j)}),ua("dddd",function(j,n){return n.weekdaysRegex(j)}),$d(["dd","ddd","dddd"],function(j,n,t,y){var C=t._locale.weekdaysParse(j,y,t._strict);C!=null?n.d=C:X(t).invalidWeekday=j}),$d(["d","e","E"],function(j,n,t,y){n[y]=M(j)});function oo(j,n){return typeof j!=="string"?j:isNaN(j)?(j=n.weekdaysParse(j),typeof j==="number"?j:null):parseInt(j,10)}function Pc(j,n){return typeof j==="string"?n.weekdaysParse(j)%7||7:isNaN(j)?null:j}function gh(j,n){return j.slice(n,7).concat(j.slice(0,n))}var hh="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ih="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),po="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),qo=ud,Rj=ud,ro=ud;function so(j,n){var t=l(this._weekdays)?this._weekdays:this._weekdays[j&&j!==!0&&this._weekdays.isFormat.test(n)?"format":"standalone"];return j===!0?gh(t,this._week.dow):j?t[j.day()]:t}function to(j){return j===!0?gh(this._weekdaysShort,this._week.dow):j?this._weekdaysShort[j.day()]:this._weekdaysShort}function yd(j){return j===!0?gh(this._weekdaysMin,this._week.dow):j?this._weekdaysMin[j.day()]:this._weekdaysMin}function uo(j,n,t){var y,C,W,fa=j.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],y=0;y<7;++y)W=O([2e3,1]).day(y),this._minWeekdaysParse[y]=this.weekdaysMin(W,"").toLocaleLowerCase(),this._shortWeekdaysParse[y]=this.weekdaysShort(W,"").toLocaleLowerCase(),this._weekdaysParse[y]=this.weekdays(W,"").toLocaleLowerCase();return t?n==="dddd"?(C=vb.call(this._weekdaysParse,fa),C!==-1?C:null):n==="ddd"?(C=vb.call(this._shortWeekdaysParse,fa),C!==-1?C:null):(C=vb.call(this._minWeekdaysParse,fa),C!==-1?C:null):n==="dddd"?(C=vb.call(this._weekdaysParse,fa),C!==-1?C:(C=vb.call(this._shortWeekdaysParse,fa),C!==-1?C:(C=vb.call(this._minWeekdaysParse,fa),C!==-1?C:null))):n==="ddd"?(C=vb.call(this._shortWeekdaysParse,fa),C!==-1?C:(C=vb.call(this._weekdaysParse,fa),C!==-1?C:(C=vb.call(this._minWeekdaysParse,fa),C!==-1?C:null))):(C=vb.call(this._minWeekdaysParse,fa),C!==-1?C:(C=vb.call(this._weekdaysParse,fa),C!==-1?C:(C=vb.call(this._shortWeekdaysParse,fa),C!==-1?C:null)))}function vo(j,n,t){var y,C,W;if(this._weekdaysParseExact)return uo.call(this,j,n,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),y=0;y<7;y++){C=O([2e3,1]).day(y),t&&!this._fullWeekdaysParse[y]&&(this._fullWeekdaysParse[y]=new RegExp("^"+this.weekdays(C,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[y]=new RegExp("^"+this.weekdaysShort(C,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[y]=new RegExp("^"+this.weekdaysMin(C,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[y]||(W="^"+this.weekdays(C,"")+"|^"+this.weekdaysShort(C,"")+"|^"+this.weekdaysMin(C,""),this._weekdaysParse[y]=new RegExp(W.replace(".",""),"i"));if(t&&n==="dddd"&&this._fullWeekdaysParse[y].test(j))return y;{if(t&&n==="ddd"&&this._shortWeekdaysParse[y].test(j))return y;{if(t&&n==="dd"&&this._minWeekdaysParse[y].test(j))return y;if(!t&&this._weekdaysParse[y].test(j))return y}}}}function Sj(j){if(!this.isValid())return j!=null?this:NaN;var n=this._isUTC?this._d.getUTCDay():this._d.getDay();return j!=null?(j=oo(j,this.localeData()),this.add(j-n,"d")):n}function zd(j){if(!this.isValid())return j!=null?this:NaN;var n=(this.day()+7-this.localeData()._week.dow)%7;return j==null?n:this.add(j-n,"d")}function Ye(j){if(!this.isValid())return j!=null?this:NaN;if(j!=null){var n=Pc(j,this.localeData());return this.day(this.day()%7?n:n-7)}else return this.day()||7}function jh(j){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||Ze.call(this),j?this._weekdaysStrictRegex:this._weekdaysRegex):(u(this,"_weekdaysRegex")||(this._weekdaysRegex=qo),this._weekdaysStrictRegex&&j?this._weekdaysStrictRegex:this._weekdaysRegex)}function kh(j){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||Ze.call(this),j?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(u(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Rj),this._weekdaysShortStrictRegex&&j?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function lh(j){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||Ze.call(this),j?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(u(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=ro),this._weekdaysMinStrictRegex&&j?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ze(){function j(id,Id){return Id.length-id.length}var n=[],t=[],y=[],C=[],W,fa,Fa,Va,rb;for(W=0;W<7;W++)fa=O([2e3,1]).day(W),Fa=Ib(this.weekdaysMin(fa,"")),Va=Ib(this.weekdaysShort(fa,"")),rb=Ib(this.weekdays(fa,"")),n.push(Fa),t.push(Va),y.push(rb),C.push(Fa),C.push(Va),C.push(rb);n.sort(j),t.sort(j),y.sort(j),C.sort(j),this._weekdaysRegex=new RegExp("^("+C.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+y.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+n.join("|")+")","i")}function cd(){return this.hours()%12||12}function mh(){return this.hours()||24}ma("H",["HH",2],0,"hour"),ma("h",["hh",2],0,cd),ma("k",["kk",2],0,mh),ma("hmm",0,0,function(){return""+cd.apply(this)+va(this.minutes(),2)}),ma("hmmss",0,0,function(){return""+cd.apply(this)+va(this.minutes(),2)+va(this.seconds(),2)}),ma("Hmm",0,0,function(){return""+this.hours()+va(this.minutes(),2)}),ma("Hmmss",0,0,function(){return""+this.hours()+va(this.minutes(),2)+va(this.seconds(),2)});function de(j,n){ma(j,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),n)})}de("a",!0),de("A",!1),Ka("hour","h"),ob("hour",13);function _e(j,n){return n._meridiemParse}ua("a",_e),ua("A",_e),ua("H",La),ua("h",La),ua("k",La),ua("HH",La,Ua),ua("hh",La,Ua),ua("kk",La,Ua),ua("hmm",td),ua("hmmss",Lf),ua("Hmm",td),ua("Hmmss",Lf),kb(["H","HH"],Eb),kb(["k","kk"],function(j,n,t){var y=M(j);n[Eb]=y===24?0:y}),kb(["a","A"],function(j,n,t){t._isPm=t._locale.isPM(j),t._meridiem=j}),kb(["h","hh"],function(j,n,t){n[Eb]=M(j),X(t).bigHour=!0}),kb("hmm",function(j,n,t){var y=j.length-2;n[Eb]=M(j.substr(0,y)),n[qc]=M(j.substr(y)),X(t).bigHour=!0}),kb("hmmss",function(j,n,t){var y=j.length-4,C=j.length-2;n[Eb]=M(j.substr(0,y)),n[qc]=M(j.substr(y,2)),n[Mc]=M(j.substr(C)),X(t).bigHour=!0}),kb("Hmm",function(j,n,t){var y=j.length-2;n[Eb]=M(j.substr(0,y)),n[qc]=M(j.substr(y))}),kb("Hmmss",function(j,n,t){var y=j.length-4,C=j.length-2;n[Eb]=M(j.substr(0,y)),n[qc]=M(j.substr(y,2)),n[Mc]=M(j.substr(C))});function wo(j){return(j+"").toLowerCase().charAt(0)==="p"}var xo=/[ap]\.?m?\.?/i,yo=_("Hours",!0);function Tj(j,n,t){return j>11?t?"pm":"PM":t?"am":"AM"}var Uj={calendar:Ba,longDateFormat:Ja,invalidDate:fb,ordinal:ya,dayOfMonthOrdinalParse:Ma,relativeTime:Ea,months:go,monthsShort:Lj,week:Tf,weekdays:hh,weekdaysMin:po,weekdaysShort:ih,meridiemParse:xo},qb={},$e={},dd;function Vj(j,n){var t,y=Math.min(j.length,n.length);for(t=0;t<y;t+=1)if(j[t]!==n[t])return t;return y}function dc(j){return j?j.toLowerCase().replace("_","-"):j}function zo(j){for(var n=0,t,y,C,W;n<j.length;){for(W=dc(j[n]).split("-"),t=W.length,y=dc(j[n+1]),y=y?y.split("-"):null;t>0;){C=Uf(W.slice(0,t).join("-"));if(C)return C;if(y&&y.length>=t&&Vj(W,y)>=t-1)break;t--}n++}return dd}function Uf(j){var n=null,t;if(qb[j]===void 0&&typeof b!=="undefined"&&b&&b.exports)try{n=dd._abbr,t=require,t("./locale/"+j),ed(n)}catch(y){qb[j]=null}return qb[j]}function ed(j,n){var t;return j&&(A(n)?t=rc(j):t=nh(j,n),t?dd=t:typeof console!=="undefined"&&console.warn&&console.warn("Locale "+j+" not found. Did you forget to load it?")),dd._abbr}function nh(j,n){if(n!==null){var t,y=Uj;n.abbr=j;if(qb[j]!=null)F("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),y=qb[j]._config;else if(n.parentLocale!=null)if(qb[n.parentLocale]!=null)y=qb[n.parentLocale]._config;else{t=Uf(n.parentLocale);if(t!=null)y=t._config;else return $e[n.parentLocale]||($e[n.parentLocale]=[]),$e[n.parentLocale].push({name:j,config:n}),null}return qb[j]=new ca(K(y,n)),$e[j]&&$e[j].forEach(function(C){nh(C.name,C.config)}),ed(j),qb[j]}else return delete qb[j],null}function Tb(j,n){if(n!=null){var t,y,C=Uj;qb[j]!=null&&qb[j].parentLocale!=null?qb[j].set(K(qb[j]._config,n)):(y=Uf(j),y!=null&&(C=y._config),n=K(C,n),y==null&&(n.abbr=j),t=new ca(n),t.parentLocale=qb[j],qb[j]=t),ed(j)}else qb[j]!=null&&(qb[j].parentLocale!=null?(qb[j]=qb[j].parentLocale,j===ed()&&ed(j)):qb[j]!=null&&delete qb[j]);return qb[j]}function rc(j){var n;j&&j._locale&&j._locale._abbr&&(j=j._locale._abbr);if(!j)return dd;if(!l(j)){n=Uf(j);if(n)return n;j=[j]}return zo(j)}function oh(){return ba(qb)}function Vf(j){var n,t=j._a;return t&&X(j).overflow===-2&&(n=t[Jb]<0||t[Jb]>11?Jb:t[pc]<1||t[pc]>Ve(t[mb],t[Jb])?pc:t[Eb]<0||t[Eb]>24||t[Eb]===24&&(t[qc]!==0||t[Mc]!==0||t[bd]!==0)?Eb:t[qc]<0||t[qc]>59?qc:t[Mc]<0||t[Mc]>59?Mc:t[bd]<0||t[bd]>999?bd:-1,X(j)._overflowDayOfYear&&(n<mb||n>pc)&&(n=pc),X(j)._overflowWeeks&&n===-1&&(n=Kj),X(j)._overflowWeekday&&n===-1&&(n=eo),X(j).overflow=n),j}var Ao=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Wj=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Bo=/Z|[+-]\d\d(?::?\d\d)?/,af=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ph=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Co=/^\/?Date\((-?\d+)/i,Xj=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,bf={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Wf(j){var n,t,y=j._i,C=Ao.exec(y)||Wj.exec(y),W,fa,Fa,Va;if(C){for(X(j).iso=!0,n=0,t=af.length;n<t;n++)if(af[n][1].exec(C[1])){fa=af[n][0],W=af[n][2]!==!1;break}if(fa==null){j._isValid=!1;return}if(C[3]){for(n=0,t=ph.length;n<t;n++)if(ph[n][1].exec(C[3])){Fa=(C[2]||" ")+ph[n][0];break}if(Fa==null){j._isValid=!1;return}}if(!W&&Fa!=null){j._isValid=!1;return}if(C[4])if(Bo.exec(C[4]))Va="Z";else{j._isValid=!1;return}j._f=fa+(Fa||"")+(Va||""),sh(j)}else j._isValid=!1}function qh(j,n,t,y,C,W){var fa=[Do(j),Lj.indexOf(n),parseInt(t,10),parseInt(y,10),parseInt(C,10)];return W&&fa.push(parseInt(W,10)),fa}function Do(j){var n=parseInt(j,10);return n<=49?2e3+n:n<=999?1900+n:n}function Eo(j){return j.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function cf(j,n,t){if(j){var y=ih.indexOf(j),C=new Date(n[0],n[1],n[2]).getDay();if(y!==C)return X(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function Fo(j,n,t){if(j)return bf[j];{if(n)return 0;{var y=parseInt(t,10),C=y%100,W=(y-C)/100;return W*60+C}}}function Yj(j){var n=Xj.exec(Eo(j._i)),t;if(n){t=qh(n[4],n[3],n[2],n[5],n[6],n[7]);if(!cf(n[1],t,j))return;j._a=t,j._tzm=Fo(n[8],n[9],n[10]),j._d=Xe.apply(null,j._a),j._d.setUTCMinutes(j._d.getUTCMinutes()-j._tzm),X(j).rfc2822=!0}else j._isValid=!1}function Go(j){var n=Co.exec(j._i);if(n!==null){j._d=new Date(+n[1]);return}Wf(j);if(j._isValid===!1)delete j._isValid;else return;Yj(j);if(j._isValid===!1)delete j._isValid;else return;j._strict?j._isValid=!1:f.createFromInputFallback(j)}f.createFromInputFallback=x("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(j){j._d=new Date(j._i+(j._useUTC?" UTC":""))});function ee(j,n,t){return j!=null?j:n!=null?n:t}function Ho(j){var n=new Date(f.now());return j._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function rh(j){var n,t,y=[],C,W,fa;if(j._d)return;for(C=Ho(j),j._w&&j._a[pc]==null&&j._a[Jb]==null&&Zj(j),j._dayOfYear!=null&&(fa=ee(j._a[mb],C[mb]),(j._dayOfYear>We(fa)||j._dayOfYear===0)&&(X(j)._overflowDayOfYear=!0),t=Xe(fa,0,j._dayOfYear),j._a[Jb]=t.getUTCMonth(),j._a[pc]=t.getUTCDate()),n=0;n<3&&j._a[n]==null;++n)j._a[n]=y[n]=C[n];for(;n<7;n++)j._a[n]=y[n]=j._a[n]==null?n===2?1:0:j._a[n];j._a[Eb]===24&&j._a[qc]===0&&j._a[Mc]===0&&j._a[bd]===0&&(j._nextDay=!0,j._a[Eb]=0),j._d=(j._useUTC?Xe:mo).apply(null,y),W=j._useUTC?j._d.getUTCDay():j._d.getDay(),j._tzm!=null&&j._d.setUTCMinutes(j._d.getUTCMinutes()-j._tzm),j._nextDay&&(j._a[Eb]=24),j._w&&typeof j._w.d!=="undefined"&&j._w.d!==W&&(X(j).weekdayMismatch=!0)}function Zj(j){var n,t,y,C,W,fa,Fa,Va,rb;n=j._w,n.GG!=null||n.W!=null||n.E!=null?(W=1,fa=4,t=ee(n.GG,j._a[mb],vd(Xa(),1,4).year),y=ee(n.W,1),C=ee(n.E,1),(C<1||C>7)&&(Va=!0)):(W=j._locale._week.dow,fa=j._locale._week.doy,rb=vd(Xa(),W,fa),t=ee(n.gg,j._a[mb],rb.year),y=ee(n.w,rb.week),n.d!=null?(C=n.d,(C<0||C>6)&&(Va=!0)):n.e!=null?(C=n.e+W,(n.e<0||n.e>6)&&(Va=!0)):C=W),y<1||y>Nc(t,W,fa)?X(j)._overflowWeeks=!0:Va!=null?X(j)._overflowWeekday=!0:(Fa=fh(t,y,C,W,fa),j._a[mb]=Fa.year,j._dayOfYear=Fa.dayOfYear)}f.ISO_8601=function(){},f.RFC_2822=function(){};function sh(j){if(j._f===f.ISO_8601){Wf(j);return}if(j._f===f.RFC_2822){Yj(j);return}j._a=[],X(j).empty=!0;var n=""+j._i,t,y,C,W,fa,Fa=n.length,Va=0,rb;for(C=Ca(j._f,j._locale).match(ra)||[],t=0;t<C.length;t++)W=C[t],y=(n.match(bh(W,j))||[])[0],y&&(fa=n.substr(0,n.indexOf(y)),fa.length>0&&X(j).unusedInput.push(fa),n=n.slice(n.indexOf(y)+y.length),Va+=y.length),xa[W]?(y?X(j).empty=!1:X(j).unusedTokens.push(W),dh(W,y,j)):j._strict&&!y&&X(j).unusedTokens.push(W);X(j).charsLeftOver=Fa-Va,n.length>0&&X(j).unusedInput.push(n),j._a[Eb]<=12&&X(j).bigHour===!0&&j._a[Eb]>0&&(X(j).bigHour=void 0),X(j).parsedDateParts=j._a.slice(0),X(j).meridiem=j._meridiem,j._a[Eb]=fe(j._locale,j._a[Eb],j._meridiem),rb=X(j).era,rb!==null&&(j._a[mb]=j._locale.erasConvertYear(rb,j._a[mb])),rh(j),Vf(j)}function fe(j,n,t){var y;return t==null?n:j.meridiemHour!=null?j.meridiemHour(n,t):j.isPM!=null?(y=j.isPM(t),y&&n<12&&(n+=12),!y&&n===12&&(n=0),n):n}function nb(j){var n,t,y,C,W,fa,Fa=!1;if(j._f.length===0){X(j).invalidFormat=!0,j._d=new Date(NaN);return}for(C=0;C<j._f.length;C++)W=0,fa=!1,n=pa({},j),j._useUTC!=null&&(n._useUTC=j._useUTC),n._f=j._f[C],sh(n),ga(n)&&(fa=!0),W+=X(n).charsLeftOver,W+=X(n).unusedTokens.length*10,X(n).score=W,Fa?W<y&&(y=W,t=n):(y==null||W<y||fa)&&(y=W,t=n,fa&&(Fa=!0));L(j,t||n)}function df(j){if(j._d)return;var n=jb(j._i),t=n.day===void 0?n.date:n.day;j._a=R([n.year,n.month,t,n.hour,n.minute,n.second,n.millisecond],function(y){return y&&parseInt(y,10)}),rh(j)}function Qc(j){var n=new ja(Vf(Xf(j)));return n._nextDay&&(n.add(1,"d"),n._nextDay=void 0),n}function Xf(j){var n=j._i,t=j._f;return j._locale=j._locale||rc(j._l),n===null||t===void 0&&n===""?ka({nullInput:!0}):(typeof n==="string"&&(j._i=n=j._locale.preparse(n)),I(n)?new ja(Vf(n)):(H(n)?j._d=n:l(t)?nb(j):t?sh(j):_j(j),ga(j)||(j._d=null),j))}function _j(j){var n=j._i;A(n)?j._d=new Date(f.now()):H(n)?j._d=new Date(n.valueOf()):typeof n==="string"?Go(j):l(n)?(j._a=R(n.slice(0),function(t){return parseInt(t,10)}),rh(j)):q(n)?df(j):E(n)?j._d=new Date(n):f.createFromInputFallback(j)}function sc(j,n,t,y,C){var W={};return(n===!0||n===!1)&&(y=n,n=void 0),(t===!0||t===!1)&&(y=t,t=void 0),(q(j)&&v(j)||l(j)&&j.length===0)&&(j=void 0),W._isAMomentObject=!0,W._useUTC=W._isUTC=C,W._l=t,W._i=j,W._f=n,W._strict=y,Qc(W)}function Xa(j,n,t,y){return sc(j,n,t,y,!1)}var Io=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var j=Xa.apply(null,arguments);return this.isValid()&&j.isValid()?j<this?this:j:ka()}),$j=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var j=Xa.apply(null,arguments);return this.isValid()&&j.isValid()?j>this?this:j:ka()});function ak(j,n){var t,y;n.length===1&&l(n[0])&&(n=n[0]);if(!n.length)return Xa();for(t=n[0],y=1;y<n.length;++y)(!n[y].isValid()||n[y][j](t))&&(t=n[y]);return t}function Jo(){var j=[].slice.call(arguments,0);return ak("isBefore",j)}function Ko(){var j=[].slice.call(arguments,0);return ak("isAfter",j)}var Yf=function(){return Date.now?Date.now():+new Date()},ge=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Lo(j){var n,t=!1,y;for(n in j)if(u(j,n)&&!(vb.call(ge,n)!==-1&&(j[n]==null||!isNaN(j[n]))))return!1;for(y=0;y<ge.length;++y)if(j[ge[y]]){if(t)return!1;parseFloat(j[ge[y]])!==M(j[ge[y]])&&(t=!0)}return!0}function Mo(){return this._isValid}function th(){return tc(NaN)}function he(j){var n=jb(j),t=n.year||0,y=n.quarter||0,C=n.month||0,W=n.week||n.isoWeek||0,fa=n.day||0,Fa=n.hour||0,Va=n.minute||0,rb=n.second||0,id=n.millisecond||0;this._isValid=Lo(n),this._milliseconds=+id+rb*1e3+Va*6e4+Fa*1e3*60*60,this._days=+fa+W*7,this._months=+C+y*3+t*12,this._data={},this._locale=rc(),this._bubble()}function ef(j){return j instanceof he}function ff(j){return j<0?Math.round(-1*j)*-1:Math.round(j)}function No(j,n,t){var y=Math.min(j.length,n.length),C=Math.abs(j.length-n.length),W=0,fa;for(fa=0;fa<y;fa++)(t&&j[fa]!==n[fa]||!t&&M(j[fa])!==M(n[fa]))&&W++;return W+C}function bk(j,n){ma(j,0,0,function(){var t=this.utcOffset(),y="+";return t<0&&(t=-t,y="-"),y+va(~~(t/60),2)+n+va(~~t%60,2)})}bk("Z",":"),bk("ZZ",""),ua("Z",Pf),ua("ZZ",Pf),kb(["Z","ZZ"],function(j,n,t){t._useUTC=!0,t._tzm=Zf(Pf,j)});var ck=/([\+\-]|\d\d)/gi;function Zf(j,n){var t=(n||"").match(j),y,C,W;return t===null?null:(y=t[t.length-1]||[],C=(y+"").match(ck)||["-",0,0],W=+(C[1]*60)+M(C[2]),W===0?0:C[0]==="+"?W:-W)}function _f(j,n){var t,y;return n._isUTC?(t=n.clone(),y=(I(j)||H(j)?j.valueOf():Xa(j).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+y),f.updateOffset(t,!1),t):Xa(j).local()}function Ec(j){return-Math.round(j._d.getTimezoneOffset())}f.updateOffset=function(){};function Na(j,n,t){var y=this._offset||0,C;if(!this.isValid())return j!=null?this:NaN;if(j!=null){if(typeof j==="string"){j=Zf(Pf,j);if(j===null)return this}else Math.abs(j)<16&&!t&&(j=j*60);return!this._isUTC&&n&&(C=Ec(this)),this._offset=j,this._isUTC=!0,C!=null&&this.add(C,"m"),y!==j&&(!n||this._changeInProgress?ag(this,tc(j-y,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,f.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?y:Ec(this)}function Oo(j,n){return j!=null?(typeof j!=="string"&&(j=-j),this.utcOffset(j,n),this):-this.utcOffset()}function Ad(j){return this.utcOffset(0,j)}function $f(j){return this._isUTC&&(this.utcOffset(0,j),this._isUTC=!1,j&&this.subtract(Ec(this),"m")),this}function Po(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i==="string"){var j=Zf(bo,this._i);j!=null?this.utcOffset(j):this.utcOffset(0,!0)}return this}function uh(j){return this.isValid()?(j=j?Xa(j).utcOffset():0,(this.utcOffset()-j)%60===0):!1}function gf(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Bd(){if(!A(this._isDSTShifted))return this._isDSTShifted;var j={},n;return pa(j,this),j=Xf(j),j._a?(n=j._isUTC?O(j._a):Xa(j._a),this._isDSTShifted=this.isValid()&&No(j._a,n.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function hf(){return this.isValid()?!this._isUTC:!1}function Cd(){return this.isValid()?this._isUTC:!1}function Dd(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Qo=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ro=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function tc(j,n){var t=j,y=null,C,W,fa;return ef(j)?t={ms:j._milliseconds,d:j._days,M:j._months}:E(j)||!isNaN(+j)?(t={},n?t[n]=+j:t.milliseconds=+j):(y=Qo.exec(j))?(C=y[1]==="-"?-1:1,t={y:0,d:M(y[pc])*C,h:M(y[Eb])*C,m:M(y[qc])*C,s:M(y[Mc])*C,ms:M(ff(y[bd]*1e3))*C}):(y=Ro.exec(j))?(C=y[1]==="-"?-1:1,t={y:Ed(y[2],C),M:Ed(y[3],C),w:Ed(y[4],C),d:Ed(y[5],C),h:Ed(y[6],C),m:Ed(y[7],C),s:Ed(y[8],C)}):t==null?t={}:typeof t==="object"&&("from"in t||"to"in t)&&(fa=vh(Xa(t.from),Xa(t.to)),t={},t.ms=fa.milliseconds,t.M=fa.months),W=new he(t),ef(j)&&u(j,"_locale")&&(W._locale=j._locale),ef(j)&&u(j,"_isValid")&&(W._isValid=j._isValid),W}tc.fn=he.prototype,tc.invalid=th;function Ed(j,n){var t=j&&parseFloat(j.replace(",","."));return(isNaN(t)?0:t)*n}function ie(j,n){var t={};return t.months=n.month()-j.month()+(n.year()-j.year())*12,j.clone().add(t.months,"M").isAfter(n)&&--t.months,t.milliseconds=+n-+j.clone().add(t.months,"M"),t}function vh(j,n){var t;return j.isValid()&&n.isValid()?(n=_f(n,j),j.isBefore(n)?t=ie(j,n):(t=ie(n,j),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function wh(j,n){return function(t,y){var C,W;return y!==null&&!isNaN(+y)&&(F(n,"moment()."+n+"(period, number) is deprecated. Please use moment()."+n+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),W=t,t=y,y=W),C=tc(t,y),ag(this,C,j),this}}function ag(j,n,t,y){var C=n._milliseconds,W=ff(n._days),fa=ff(n._months);if(!j.isValid())return;y=y==null?!0:y,fa&&ae(j,aa(j,"Month")+fa*t),W&&S(j,"Date",aa(j,"Date")+W*t),C&&j._d.setTime(j._d.valueOf()+C*t),y&&f.updateOffset(j,W||fa)}var xh=wh(1,"add"),So=wh(-1,"subtract");function dk(j){return typeof j==="string"||j instanceof String}function To(j){return I(j)||H(j)||dk(j)||E(j)||bg(j)||Uo(j)||j===null||j===void 0}function Uo(j){var n=q(j)&&!v(j),t=!1,y=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],C,W;for(C=0;C<y.length;C+=1)W=y[C],t=t||u(j,W);return n&&t}function bg(j){var n=l(j),t=!1;return n&&(t=j.filter(function(y){return!E(y)&&dk(j)}).length===0),n&&t}function yh(j){var n=q(j)&&!v(j),t=!1,y=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],C,W;for(C=0;C<y.length;C+=1)W=y[C],t=t||u(j,W);return n&&t}function Xb(j,n){var t=j.diff(n,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function zh(j,n){arguments.length===1&&(arguments[0]?To(arguments[0])?(j=arguments[0],n=void 0):yh(arguments[0])&&(n=arguments[0],j=void 0):(j=void 0,n=void 0));var t=j||Xa(),y=_f(t,this).startOf("day"),C=f.calendarFormat(this,y)||"sameElse",W=n&&(J(n[C])?n[C].call(this,t):n[C]);return this.format(W||this.localeData().calendar(C,this,Xa(t)))}function Vo(){return new ja(this)}function ek(j,n){var t=I(j)?j:Xa(j);return this.isValid()&&t.isValid()?(n=Wa(n)||"millisecond",n==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(n).valueOf()):!1}function Wo(j,n){var t=I(j)?j:Xa(j);return this.isValid()&&t.isValid()?(n=Wa(n)||"millisecond",n==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(n).valueOf()<t.valueOf()):!1}function Xo(j,n,t,y){var C=I(j)?j:Xa(j),W=I(n)?n:Xa(n);return this.isValid()&&C.isValid()&&W.isValid()?(y=y||"()",(y[0]==="("?this.isAfter(C,t):!this.isBefore(C,t))&&(y[1]===")"?this.isBefore(W,t):!this.isAfter(W,t))):!1}function Fd(j,n){var t=I(j)?j:Xa(j),y;return this.isValid()&&t.isValid()?(n=Wa(n)||"millisecond",n==="millisecond"?this.valueOf()===t.valueOf():(y=t.valueOf(),this.clone().startOf(n).valueOf()<=y&&y<=this.clone().endOf(n).valueOf())):!1}function Yo(j,n){return this.isSame(j,n)||this.isAfter(j,n)}function cg(j,n){return this.isSame(j,n)||this.isBefore(j,n)}function Zo(j,n,t){var y,C,W;if(!this.isValid())return NaN;y=_f(j,this);if(!y.isValid())return NaN;C=(y.utcOffset()-this.utcOffset())*6e4,n=Wa(n);switch(n){case"year":W=dg(this,y)/12;break;case"month":W=dg(this,y);break;case"quarter":W=dg(this,y)/3;break;case"second":W=(this-y)/1e3;break;case"minute":W=(this-y)/6e4;break;case"hour":W=(this-y)/36e5;break;case"day":W=(this-y-C)/864e5;break;case"week":W=(this-y-C)/6048e5;break;default:W=this-y}return t?W:Y(W)}function dg(j,n){if(j.date()<n.date())return-dg(n,j);var t=(n.year()-j.year())*12+(n.month()-j.month()),y=j.clone().add(t,"months"),C,W;return n-y<0?(C=j.clone().add(t-1,"months"),W=(n-y)/(y-C)):(C=j.clone().add(t+1,"months"),W=(n-y)/(C-y)),-(t+W)||0}f.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",f.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function _o(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function $o(j){if(!this.isValid())return null;var n=j!==!0,t=n?this.clone().utc():this;return t.year()<0||t.year()>9999?hb(t,n?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):J(Date.prototype.toISOString)?n?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",hb(t,"Z")):hb(t,n?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ap(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var j="moment",n="",t,y,C,W;return this.isLocal()||(j=this.utcOffset()===0?"moment.utc":"moment.parseZone",n="Z"),t="["+j+'("]',y=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",C="-MM-DD[T]HH:mm:ss.SSS",W=n+'[")]',this.format(t+y+C+W)}function bp(j){j||(j=this.isUtc()?f.defaultFormatUtc:f.defaultFormat);var n=hb(this,j);return this.localeData().postformat(n)}function fk(j,n){return this.isValid()&&(I(j)&&j.isValid()||Xa(j).isValid())?tc({to:this,from:j}).locale(this.locale()).humanize(!n):this.localeData().invalidDate()}function cp(j){return this.from(Xa(),j)}function Ah(j,n){return this.isValid()&&(I(j)&&j.isValid()||Xa(j).isValid())?tc({from:this,to:j}).locale(this.locale()).humanize(!n):this.localeData().invalidDate()}function Yb(j){return this.to(Xa(),j)}function gk(j){var n;return j===void 0?this._locale._abbr:(n=rc(j),n!=null&&(this._locale=n),this)}var hk=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(j){return j===void 0?this.localeData():this.locale(j)});function jf(){return this._locale}var kf=1e3,je=60*kf,Gd=60*je,eg=(365*400+97)*24*Gd;function Hd(j,n){return(j%n+n)%n}function ik(j,n,t){return j<100&&j>=0?new Date(j+400,n,t)-eg:new Date(j,n,t).valueOf()}function fg(j,n,t){return j<100&&j>=0?Date.UTC(j+400,n,t)-eg:Date.UTC(j,n,t)}function dp(j){var n,t;j=Wa(j);if(j===void 0||j==="millisecond"||!this.isValid())return this;t=this._isUTC?fg:ik;switch(j){case"year":n=t(this.year(),0,1);break;case"quarter":n=t(this.year(),this.month()-this.month()%3,1);break;case"month":n=t(this.year(),this.month(),1);break;case"week":n=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":n=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":n=t(this.year(),this.month(),this.date());break;case"hour":n=this._d.valueOf(),n-=Hd(n+(this._isUTC?0:this.utcOffset()*je),Gd);break;case"minute":n=this._d.valueOf(),n-=Hd(n,je);break;case"second":n=this._d.valueOf(),n-=Hd(n,kf);break}return this._d.setTime(n),f.updateOffset(this,!0),this}function jk(j){var n,t;j=Wa(j);if(j===void 0||j==="millisecond"||!this.isValid())return this;t=this._isUTC?fg:ik;switch(j){case"year":n=t(this.year()+1,0,1)-1;break;case"quarter":n=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":n=t(this.year(),this.month()+1,1)-1;break;case"week":n=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":n=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":n=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":n=this._d.valueOf(),n+=Gd-Hd(n+(this._isUTC?0:this.utcOffset()*je),Gd)-1;break;case"minute":n=this._d.valueOf(),n+=je-Hd(n,je)-1;break;case"second":n=this._d.valueOf(),n+=kf-Hd(n,kf)-1;break}return this._d.setTime(n),f.updateOffset(this,!0),this}function ep(){return this._d.valueOf()-(this._offset||0)*6e4}function fp(){return Math.floor(this.valueOf()/1e3)}function gp(){return new Date(this.valueOf())}function hp(){var j=this;return[j.year(),j.month(),j.date(),j.hour(),j.minute(),j.second(),j.millisecond()]}function ip(){var j=this;return{years:j.year(),months:j.month(),date:j.date(),hours:j.hours(),minutes:j.minutes(),seconds:j.seconds(),milliseconds:j.milliseconds()}}function jp(){return this.isValid()?this.toISOString():null}function gg(){return ga(this)}function kk(){return L({},X(this))}function kp(){return X(this).overflow}function Bh(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ma("N",0,0,"eraAbbr"),ma("NN",0,0,"eraAbbr"),ma("NNN",0,0,"eraAbbr"),ma("NNNN",0,0,"eraName"),ma("NNNNN",0,0,"eraNarrow"),ma("y",["y",1],"yo","eraYear"),ma("y",["yy",2],0,"eraYear"),ma("y",["yyy",3],0,"eraYear"),ma("y",["yyyy",4],0,"eraYear"),ua("N",Dh),ua("NN",Dh),ua("NNN",Dh),ua("NNNN",np),ua("NNNNN",ke),kb(["N","NN","NNN","NNNN","NNNNN"],function(j,n,t,y){var C=t._locale.erasParse(j,y,t._strict);C?X(t).era=C:X(t).invalidEra=j}),ua("y",_d),ua("yy",_d),ua("yyy",_d),ua("yyyy",_d),ua("yo",Eh),kb(["y","yy","yyy","yyyy"],mb),kb(["yo"],function(j,n,t,y){var C;t._locale._eraYearOrdinalRegex&&(C=j.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?n[mb]=t._locale.eraYearOrdinalParse(j,C):n[mb]=parseInt(j,10)});function lk(j,n){var t,y,C,W=this._eras||rc("en")._eras;for(t=0,y=W.length;t<y;++t){switch(typeof W[t].since){case"string":C=f(W[t].since).startOf("day"),W[t].since=C.valueOf();break}switch(typeof W[t].until){case"undefined":W[t].until=Infinity;break;case"string":C=f(W[t].until).startOf("day").valueOf(),W[t].until=C.valueOf();break}}return W}function lp(j,n,t){var y,C,W=this.eras(),fa,Fa,Va;for(j=j.toUpperCase(),y=0,C=W.length;y<C;++y){fa=W[y].name.toUpperCase(),Fa=W[y].abbr.toUpperCase(),Va=W[y].narrow.toUpperCase();if(t)switch(n){case"N":case"NN":case"NNN":if(Fa===j)return W[y];break;case"NNNN":if(fa===j)return W[y];break;case"NNNNN":if(Va===j)return W[y];break}else if([fa,Fa,Va].indexOf(j)>=0)return W[y]}}function mk(j,n){var t=j.since<=j.until?1:-1;return n===void 0?f(j.since).year():f(j.since).year()+(n-j.offset)*t}function Ch(){var j,n,t,y=this.localeData().eras();for(j=0,n=y.length;j<n;++j){t=this.clone().startOf("day").valueOf();if(y[j].since<=t&&t<=y[j].until)return y[j].name;if(y[j].until<=t&&t<=y[j].since)return y[j].name}return""}function hg(){var j,n,t,y=this.localeData().eras();for(j=0,n=y.length;j<n;++j){t=this.clone().startOf("day").valueOf();if(y[j].since<=t&&t<=y[j].until)return y[j].narrow;if(y[j].until<=t&&t<=y[j].since)return y[j].narrow}return""}function Zb(){var j,n,t,y=this.localeData().eras();for(j=0,n=y.length;j<n;++j){t=this.clone().startOf("day").valueOf();if(y[j].since<=t&&t<=y[j].until)return y[j].abbr;if(y[j].until<=t&&t<=y[j].since)return y[j].abbr}return""}function nk(){var j,n,t,y,C=this.localeData().eras();for(j=0,n=C.length;j<n;++j){t=C[j].since<=C[j].until?1:-1,y=this.clone().startOf("day").valueOf();if(C[j].since<=y&&y<=C[j].until||C[j].until<=y&&y<=C[j].since)return(this.year()-f(C[j].since).year())*t+C[j].offset}return this.year()}function mp(j){return u(this,"_erasNameRegex")||Rc.call(this),j?this._erasNameRegex:this._erasRegex}function ok(j){return u(this,"_erasAbbrRegex")||Rc.call(this),j?this._erasAbbrRegex:this._erasRegex}function pk(j){return u(this,"_erasNarrowRegex")||Rc.call(this),j?this._erasNarrowRegex:this._erasRegex}function Dh(j,n){return n.erasAbbrRegex(j)}function np(j,n){return n.erasNameRegex(j)}function ke(j,n){return n.erasNarrowRegex(j)}function Eh(j,n){return n._eraYearOrdinalRegex||_d}function Rc(){var j=[],n=[],t=[],y=[],C,W,fa=this.eras();for(C=0,W=fa.length;C<W;++C)n.push(Ib(fa[C].name)),j.push(Ib(fa[C].abbr)),t.push(Ib(fa[C].narrow)),y.push(Ib(fa[C].name)),y.push(Ib(fa[C].abbr)),y.push(Ib(fa[C].narrow));this._erasRegex=new RegExp("^("+y.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+n.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+j.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}ma(0,["gg",2],0,function(){return this.weekYear()%100}),ma(0,["GG",2],0,function(){return this.isoWeekYear()%100});function lf(j,n){ma(0,[j,j.length],0,n)}lf("gggg","weekYear"),lf("ggggg","weekYear"),lf("GGGG","isoWeekYear"),lf("GGGGG","isoWeekYear"),Ka("weekYear","gg"),Ka("isoWeekYear","GG"),ob("weekYear",1),ob("isoWeekYear",1),ua("G",Of),ua("g",Of),ua("GG",La,Ua),ua("gg",La,Ua),ua("GGGG",B,Mb),ua("gggg",B,Mb),ua("GGGGG",Nf,Db),ua("ggggg",Nf,Db),$d(["gggg","ggggg","GGGG","GGGGG"],function(j,n,t,y){n[y.substr(0,2)]=M(j)}),$d(["gg","GG"],function(j,n,t,y){n[y]=f.parseTwoDigitYear(j)});function op(j){return rk.call(this,j,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function pp(j){return rk.call(this,j,this.isoWeek(),this.isoWeekday(),1,4)}function qp(){return Nc(this.year(),1,4)}function rp(){return Nc(this.isoWeekYear(),1,4)}function sp(){var j=this.localeData()._week;return Nc(this.year(),j.dow,j.doy)}function qk(){var j=this.localeData()._week;return Nc(this.weekYear(),j.dow,j.doy)}function rk(j,n,t,y,C){var W;return j==null?vd(this,y,C).year:(W=Nc(j,y,C),n>W&&(n=W),sk.call(this,j,n,t,y,C))}function sk(j,n,t,y,C){var W=fh(j,n,t,y,C),fa=Xe(W.year,0,W.dayOfYear);return this.year(fa.getUTCFullYear()),this.month(fa.getUTCMonth()),this.date(fa.getUTCDate()),this}ma("Q",0,"Qo","quarter"),Ka("quarter","Q"),ob("quarter",7),ua("Q",pb),kb("Q",function(j,n){n[Jb]=(M(j)-1)*3});function tp(j){return j==null?Math.ceil((this.month()+1)/3):this.month((j-1)*3+this.month()%3)}ma("D",["DD",2],"Do","date"),Ka("date","D"),ob("date",9),ua("D",La),ua("DD",La,Ua),ua("Do",function(j,n){return j?n._dayOfMonthOrdinalParse||n._ordinalParse:n._dayOfMonthOrdinalParseLenient}),kb(["D","DD"],pc),kb("Do",function(j,n){n[pc]=M(j.match(La)[0])});var tk=_("Date",!0);ma("DDD",["DDDD",3],"DDDo","dayOfYear"),Ka("dayOfYear","DDD"),ob("dayOfYear",4),ua("DDD",Mf),ua("DDDD",lb),kb(["DDD","DDDD"],function(j,n,t){t._dayOfYear=M(j)});function up(j){var n=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return j==null?n:this.add(j-n,"d")}ma("m",["mm",2],0,"minute"),Ka("minute","m"),ob("minute",14),ua("m",La),ua("mm",La,Ua),kb(["m","mm"],qc);var vp=_("Minutes",!1);ma("s",["ss",2],0,"second"),Ka("second","s"),ob("second",15),ua("s",La),ua("ss",La,Ua),kb(["s","ss"],Mc);var wp=_("Seconds",!1);ma("S",0,0,function(){return~~(this.millisecond()/100)}),ma(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),ma(0,["SSS",3],0,"millisecond"),ma(0,["SSSS",4],0,function(){return this.millisecond()*10}),ma(0,["SSSSS",5],0,function(){return this.millisecond()*100}),ma(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),ma(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),ma(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),ma(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),Ka("millisecond","ms"),ob("millisecond",16),ua("S",Mf,pb),ua("SS",Mf,Ua),ua("SSS",Mf,lb);var fd,uk;for(fd="SSSS";fd.length<=9;fd+="S")ua(fd,_d);function xp(j,n){n[bd]=M(("0."+j)*1e3)}for(fd="S";fd.length<=9;fd+="S")kb(fd,xp);uk=_("Milliseconds",!1),ma("z",0,0,"zoneAbbr"),ma("zz",0,0,"zoneName");function yp(){return this._isUTC?"UTC":""}function zp(){return this._isUTC?"Coordinated Universal Time":""}var la=ja.prototype;la.add=xh,la.calendar=zh,la.clone=Vo,la.diff=Zo,la.endOf=jk,la.format=bp,la.from=fk,la.fromNow=cp,la.to=Ah,la.toNow=Yb,la.get=za,la.invalidAt=kp,la.isAfter=ek,la.isBefore=Wo,la.isBetween=Xo,la.isSame=Fd,la.isSameOrAfter=Yo,la.isSameOrBefore=cg,la.isValid=gg,la.lang=hk,la.locale=gk,la.localeData=jf,la.max=$j,la.min=Io,la.parsingFlags=kk,la.set=Sa,la.startOf=dp,la.subtract=So,la.toArray=hp,la.toObject=ip,la.toDate=gp,la.toISOString=$o,la.inspect=ap,typeof Symbol!=="undefined"&&Symbol.for!=null&&(la[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),la.toJSON=jp,la.toString=_o,la.unix=fp,la.valueOf=ep,la.creationData=Bh,la.eraName=Ch,la.eraNarrow=hg,la.eraAbbr=Zb,la.eraYear=nk,la.year=be,la.isLeapYear=ce,la.weekYear=op,la.isoWeekYear=pp,la.quarter=la.quarters=tp,la.month=Oj,la.daysInMonth=Wb,la.week=la.weeks=xd,la.isoWeek=la.isoWeeks=Qj,la.weeksInYear=sp,la.weeksInWeekYear=qk,la.isoWeeksInYear=qp,la.isoWeeksInISOWeekYear=rp,la.date=tk,la.day=la.days=Sj,la.weekday=zd,la.isoWeekday=Ye,la.dayOfYear=up,la.hour=la.hours=yo,la.minute=la.minutes=vp,la.second=la.seconds=wp,la.millisecond=la.milliseconds=uk,la.utcOffset=Na,la.utc=Ad,la.local=$f,la.parseZone=Po,la.hasAlignedHourOffset=uh,la.isDST=gf,la.isLocal=hf,la.isUtcOffset=Cd,la.isUtc=Dd,la.isUTC=Dd,la.zoneAbbr=yp,la.zoneName=zp,la.dates=x("dates accessor is deprecated. Use date instead.",tk),la.months=x("months accessor is deprecated. Use month instead",Oj),la.years=x("years accessor is deprecated. Use year instead",be),la.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Oo),la.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Bd);function vk(j){return Xa(j*1e3)}function Ap(){return Xa.apply(null,arguments).parseZone()}function wk(j){return j}var $a=ca.prototype;$a.calendar=$,$a.longDateFormat=Za,$a.invalidDate=qa,$a.ordinal=ta,$a.preparse=wk,$a.postformat=wk,$a.relativeTime=cb,$a.pastFuture=Da,$a.set=U,$a.eras=lk,$a.erasParse=lp,$a.erasConvertYear=mk,$a.erasAbbrRegex=ok,$a.erasNameRegex=mp,$a.erasNarrowRegex=pk,$a.months=Nj,$a.monthsShort=ho,$a.monthsParse=jo,$a.monthsRegex=lo,$a.monthsShortRegex=ko,$a.week=no,$a.firstDayOfYear=Oc,$a.firstDayOfWeek=wd,$a.weekdays=so,$a.weekdaysMin=yd,$a.weekdaysShort=to,$a.weekdaysParse=vo,$a.weekdaysRegex=jh,$a.weekdaysShortRegex=kh,$a.weekdaysMinRegex=lh,$a.isPM=wo,$a.meridiem=Tj;function uc(j,n,t,y){var C=rc(),W=O().set(y,n);return C[t](W,j)}function Sc(j,n,t){E(j)&&(n=j,j=void 0),j=j||"";if(n!=null)return uc(j,n,t,"month");var y,C=[];for(y=0;y<12;y++)C[y]=uc(j,y,t,"month");return C}function mf(j,n,t,y){typeof j==="boolean"?(E(n)&&(t=n,n=void 0),n=n||""):(n=j,t=n,j=!1,E(n)&&(t=n,n=void 0),n=n||"");var C=rc(),W=j?C._week.dow:0,fa,Fa=[];if(t!=null)return uc(n,(t+W)%7,y,"day");for(fa=0;fa<7;fa++)Fa[fa]=uc(n,(fa+W)%7,y,"day");return Fa}function xk(j,n){return Sc(j,n,"months")}function yk(j,n){return Sc(j,n,"monthsShort")}function Bp(j,n,t){return mf(j,n,t,"weekdays")}function Tc(j,n,t){return mf(j,n,t,"weekdaysShort")}function zk(j,n,t){return mf(j,n,t,"weekdaysMin")}ed("en",{eras:[{since:"0001-01-01",until:Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(j){var n=j%10,t=M(j%100/10)===1?"th":n===1?"st":n===2?"nd":n===3?"rd":"th";return j+t}}),f.lang=x("moment.lang is deprecated. Use moment.locale instead.",ed),f.langData=x("moment.langData is deprecated. Use moment.localeData instead.",rc);var Fc=Math.abs;function Cp(){var j=this._data;return this._milliseconds=Fc(this._milliseconds),this._days=Fc(this._days),this._months=Fc(this._months),j.milliseconds=Fc(j.milliseconds),j.seconds=Fc(j.seconds),j.minutes=Fc(j.minutes),j.hours=Fc(j.hours),j.months=Fc(j.months),j.years=Fc(j.years),this}function Uc(j,n,t,y){var C=tc(n,t);return j._milliseconds+=y*C._milliseconds,j._days+=y*C._days,j._months+=y*C._months,j._bubble()}function Dp(j,n){return Uc(this,j,n,1)}function Ep(j,n){return Uc(this,j,n,-1)}function Ak(j){return j<0?Math.floor(j):Math.ceil(j)}function Bk(){var j=this._milliseconds,n=this._days,t=this._months,y=this._data,C,W,fa,Fa,Va;return j>=0&&n>=0&&t>=0||j<=0&&n<=0&&t<=0||(j+=Ak(c(t)+n)*864e5,n=0,t=0),y.milliseconds=j%1e3,C=Y(j/1e3),y.seconds=C%60,W=Y(C/60),y.minutes=W%60,fa=Y(W/60),y.hours=fa%24,n+=Y(fa/24),Va=Y(Ck(n)),t+=Va,n-=Ak(c(Va)),Fa=Y(t/12),t%=12,y.days=n,y.months=t,y.years=Fa,this}function Ck(j){return j*4800/146097}function c(j){return j*146097/4800}function e(j){if(!this.isValid())return NaN;var n,t,y=this._milliseconds;j=Wa(j);if(j==="month"||j==="quarter"||j==="year"){n=this._days+y/864e5,t=this._months+Ck(n);switch(j){case"month":return t;case"quarter":return t/3;case"year":return t/12}}else{n=this._days+Math.round(c(this._months));switch(j){case"week":return n/7+y/6048e5;case"day":return n+y/864e5;case"hour":return n*24+y/36e5;case"minute":return n*1440+y/6e4;case"second":return n*86400+y/1e3;case"millisecond":return Math.floor(n*864e5)+y;default:throw new Error("Unknown unit "+j)}}}function g(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+M(this._months/12)*31536e6:NaN}function h(j){return function(){return this.as(j)}}var k=h("ms"),m=h("s"),o=h("m"),r=h("h"),p=h("d"),s=h("w"),w=h("M"),z=h("Q"),D=h("y");function N(){return tc(this)}function Q(j){return j=Wa(j),this.isValid()?this[j+"s"]():NaN}function T(j){return function(){return this.isValid()?this._data[j]:NaN}}var Z=T("milliseconds"),ia=T("seconds"),wa=T("minutes"),Aa=T("hours"),Oa=T("days"),Ha=T("months"),Ya=T("years");function ib(){return Y(this.days()/7)}var ab=Math.round,db={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Kb(j,n,t,y,C){return C.relativeTime(n||1,!!t,j,y)}function Fb(j,n,t,y){var C=tc(j).abs(),W=ab(C.as("s")),fa=ab(C.as("m")),Fa=ab(C.as("h")),Va=ab(C.as("d")),rb=ab(C.as("M")),id=ab(C.as("w")),Id=ab(C.as("y")),me=W<=t.ss&&["s",W]||W<t.s&&["ss",W]||fa<=1&&["m"]||fa<t.m&&["mm",fa]||Fa<=1&&["h"]||Fa<t.h&&["hh",Fa]||Va<=1&&["d"]||Va<t.d&&["dd",Va];return t.w!=null&&(me=me||id<=1&&["w"]||id<t.w&&["ww",id]),me=me||rb<=1&&["M"]||rb<t.M&&["MM",rb]||Id<=1&&["y"]||["yy",Id],me[2]=n,me[3]=+j>0,me[4]=y,Kb.apply(null,me)}function Bb(j){return j===void 0?ab:typeof j==="function"?(ab=j,!0):!1}function Nb(j,n){return db[j]===void 0?!1:n===void 0?db[j]:(db[j]=n,j==="s"&&(db.ss=n-1),!0)}function le(j,n){if(!this.isValid())return this.localeData().invalidDate();var t=!1,y=db,C,W;return typeof j==="object"&&(n=j,j=!1),typeof j==="boolean"&&(t=j),typeof n==="object"&&(y=Object.assign({},db,n),n.s!=null&&n.ss==null&&(y.ss=n.s-1)),C=this.localeData(),W=Fb(this,!t,y,C),t&&(W=C.pastFuture(+this,W)),C.postformat(W)}var gd=Math.abs;function hd(j){return(j>0)-(j<0)||+j}function ig(){if(!this.isValid())return this.localeData().invalidDate();var j=gd(this._milliseconds)/1e3,n=gd(this._days),t=gd(this._months),y,C,W,fa,Fa=this.asSeconds(),Va,rb,id,Id;return Fa?(y=Y(j/60),C=Y(y/60),j%=60,y%=60,W=Y(t/12),t%=12,fa=j?j.toFixed(3).replace(/\.?0+$/,""):"",Va=Fa<0?"-":"",rb=hd(this._months)!==hd(Fa)?"-":"",id=hd(this._days)!==hd(Fa)?"-":"",Id=hd(this._milliseconds)!==hd(Fa)?"-":"",Va+"P"+(W?rb+W+"Y":"")+(t?rb+t+"M":"")+(n?id+n+"D":"")+(C||y||j?"T":"")+(C?Id+C+"H":"")+(y?Id+y+"M":"")+(j?Id+fa+"S":"")):"P0D"}var bb=he.prototype;bb.isValid=Mo,bb.abs=Cp,bb.add=Dp,bb.subtract=Ep,bb.as=e,bb.asMilliseconds=k,bb.asSeconds=m,bb.asMinutes=o,bb.asHours=r,bb.asDays=p,bb.asWeeks=s,bb.asMonths=w,bb.asQuarters=z,bb.asYears=D,bb.valueOf=g,bb._bubble=Bk,bb.clone=N,bb.get=Q,bb.milliseconds=Z,bb.seconds=ia,bb.minutes=wa,bb.hours=Aa,bb.days=Oa,bb.weeks=ib,bb.months=Ha,bb.years=Ya,bb.humanize=le,bb.toISOString=ig,bb.toString=ig,bb.toJSON=ig,bb.locale=gk,bb.localeData=jf,bb.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ig),bb.lang=hk,ma("X",0,0,"unix"),ma("x",0,0,"valueOf"),ua("x",Of),ua("X",co),kb("X",function(j,n,t){t._d=new Date(parseFloat(j)*1e3)}),kb("x",function(j,n,t){t._d=new Date(M(j))});return f.version="2.29.0",i(Xa),f.fn=la,f.min=Jo,f.max=Ko,f.now=Yf,f.utc=O,f.unix=vk,f.months=xk,f.isDate=H,f.locale=ed,f.invalid=ka,f.duration=tc,f.isMoment=I,f.weekdays=Bp,f.parseZone=Ap,f.localeData=rc,f.isDuration=ef,f.monthsShort=yk,f.weekdaysMin=zk,f.defineLocale=nh,f.updateLocale=Tb,f.locales=oh,f.weekdaysShort=Tc,f.normalizeUnits=Wa,f.relativeTimeRounding=Bb,f.relativeTimeThreshold=Nb,f.calendarFormat=Xb,f.prototype=la,f.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},f})});var Pq=Dc((a,b)=>{(function(d,f){typeof a==="object"&&typeof b!=="undefined"?b.exports=f(function(){try{return Qq()}catch(i){}}()):typeof define==="function"&&define.amd?define(["require"],function(i){return f(function(){try{return i("moment")}catch(l){}}())}):(d=d||self,d.Chart=f(d.moment))})(a,function(d){"use strict";d=d&&d.hasOwnProperty("default")?d.default:d;function f(c,e){return e={exports:{}},c(e,e.exports),e.exports}function i(c){return c&&c.default||c}var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},q=f(function(c){var e={};for(var g in l)l.hasOwnProperty(g)&&(e[l[g]]=g);var h=c.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var k in h)if(h.hasOwnProperty(k)){if(!("channels"in h[k]))throw new Error("missing channels property: "+k);if(!("labels"in h[k]))throw new Error("missing channel labels property: "+k);if(h[k].labels.length!==h[k].channels)throw new Error("channel and label counts mismatch: "+k);var m=h[k].channels,o=h[k].labels;delete h[k].channels,delete h[k].labels,Object.defineProperty(h[k],"channels",{value:m}),Object.defineProperty(h[k],"labels",{value:o})}h.rgb.hsl=function(p){var s=p[0]/255,w=p[1]/255,z=p[2]/255,D=Math.min(s,w,z),N=Math.max(s,w,z),Q=N-D,T,Z,ia;return N===D?T=0:s===N?T=(w-z)/Q:w===N?T=2+(z-s)/Q:z===N&&(T=4+(s-w)/Q),T=Math.min(T*60,360),T<0&&(T+=360),ia=(D+N)/2,N===D?Z=0:ia<=.5?Z=Q/(N+D):Z=Q/(2-N-D),[T,Z*100,ia*100]},h.rgb.hsv=function(p){var s,w,z,D,N,Q=p[0]/255,T=p[1]/255,Z=p[2]/255,ia=Math.max(Q,T,Z),wa=ia-Math.min(Q,T,Z),Aa=function(Oa){return(ia-Oa)/6/wa+1/2};return wa===0?D=N=0:(N=wa/ia,s=Aa(Q),w=Aa(T),z=Aa(Z),Q===ia?D=z-w:T===ia?D=1/3+s-z:Z===ia&&(D=2/3+w-s),D<0?D+=1:D>1&&(D-=1)),[D*360,N*100,ia*100]},h.rgb.hwb=function(p){var s=p[0],w=p[1],z=p[2],D=h.rgb.hsl(p)[0],N=1/255*Math.min(s,Math.min(w,z));return z=1-1/255*Math.max(s,Math.max(w,z)),[D,N*100,z*100]},h.rgb.cmyk=function(p){var s=p[0]/255,w=p[1]/255,z=p[2]/255,D,N,Q,T;return T=Math.min(1-s,1-w,1-z),D=(1-s-T)/(1-T)||0,N=(1-w-T)/(1-T)||0,Q=(1-z-T)/(1-T)||0,[D*100,N*100,Q*100,T*100]};function r(p,s){return Math.pow(p[0]-s[0],2)+Math.pow(p[1]-s[1],2)+Math.pow(p[2]-s[2],2)}h.rgb.keyword=function(p){var s=e[p];if(s)return s;var w=Infinity,z;for(var D in l)if(l.hasOwnProperty(D)){var N=l[D],Q=r(p,N);Q<w&&(w=Q,z=D)}return z},h.keyword.rgb=function(p){return l[p]},h.rgb.xyz=function(p){var s=p[0]/255,w=p[1]/255,z=p[2]/255;s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,w=w>.04045?Math.pow((w+.055)/1.055,2.4):w/12.92,z=z>.04045?Math.pow((z+.055)/1.055,2.4):z/12.92;var D=s*.4124+w*.3576+z*.1805,N=s*.2126+w*.7152+z*.0722,Q=s*.0193+w*.1192+z*.9505;return[D*100,N*100,Q*100]},h.rgb.lab=function(p){var s=h.rgb.xyz(p),w=s[0],z=s[1],D=s[2],N,Q,T;return w/=95.047,z/=100,D/=108.883,w=w>.008856?Math.pow(w,1/3):7.787*w+16/116,z=z>.008856?Math.pow(z,1/3):7.787*z+16/116,D=D>.008856?Math.pow(D,1/3):7.787*D+16/116,N=116*z-16,Q=500*(w-z),T=200*(z-D),[N,Q,T]},h.hsl.rgb=function(p){var s=p[0]/360,w=p[1]/100,z=p[2]/100,D,N,Q,T,Z;if(w===0)return Z=z*255,[Z,Z,Z];z<.5?N=z*(1+w):N=z+w-z*w,D=2*z-N,T=[0,0,0];for(var ia=0;ia<3;ia++)Q=s+1/3*-(ia-1),Q<0&&Q++,Q>1&&Q--,6*Q<1?Z=D+(N-D)*6*Q:2*Q<1?Z=N:3*Q<2?Z=D+(N-D)*(2/3-Q)*6:Z=D,T[ia]=Z*255;return T},h.hsl.hsv=function(p){var s=p[0],w=p[1]/100,z=p[2]/100,D=w,N=Math.max(z,.01),Q,T;return z*=2,w*=z<=1?z:2-z,D*=N<=1?N:2-N,T=(z+w)/2,Q=z===0?2*D/(N+D):2*w/(z+w),[s,Q*100,T*100]},h.hsv.rgb=function(p){var s=p[0]/60,w=p[1]/100,z=p[2]/100,D=Math.floor(s)%6,N=s-Math.floor(s),Q=255*z*(1-w),T=255*z*(1-w*N),Z=255*z*(1-w*(1-N));z*=255;switch(D){case 0:return[z,Z,Q];case 1:return[T,z,Q];case 2:return[Q,z,Z];case 3:return[Q,T,z];case 4:return[Z,Q,z];case 5:return[z,Q,T]}},h.hsv.hsl=function(p){var s=p[0],w=p[1]/100,z=p[2]/100,D=Math.max(z,.01),N,Q,T;return T=(2-w)*z,N=(2-w)*D,Q=w*D,Q/=N<=1?N:2-N,Q=Q||0,T/=2,[s,Q*100,T*100]},h.hwb.rgb=function(p){var s=p[0]/360,w=p[1]/100,z=p[2]/100,D=w+z,N,Q,T,Z;D>1&&(w/=D,z/=D),N=Math.floor(6*s),Q=1-z,T=6*s-N,(N&1)!==0&&(T=1-T),Z=w+T*(Q-w);var ia,wa,Aa;switch(N){default:case 6:case 0:ia=Q,wa=Z,Aa=w;break;case 1:ia=Z,wa=Q,Aa=w;break;case 2:ia=w,wa=Q,Aa=Z;break;case 3:ia=w,wa=Z,Aa=Q;break;case 4:ia=Z,wa=w,Aa=Q;break;case 5:ia=Q,wa=w,Aa=Z;break}return[ia*255,wa*255,Aa*255]},h.cmyk.rgb=function(p){var s=p[0]/100,w=p[1]/100,z=p[2]/100,D=p[3]/100,N,Q,T;return N=1-Math.min(1,s*(1-D)+D),Q=1-Math.min(1,w*(1-D)+D),T=1-Math.min(1,z*(1-D)+D),[N*255,Q*255,T*255]},h.xyz.rgb=function(p){var s=p[0]/100,w=p[1]/100,z=p[2]/100,D,N,Q;return D=s*3.2406+w*-1.5372+z*-.4986,N=s*-.9689+w*1.8758+z*.0415,Q=s*.0557+w*-.204+z*1.057,D=D>.0031308?1.055*Math.pow(D,1/2.4)-.055:D*12.92,N=N>.0031308?1.055*Math.pow(N,1/2.4)-.055:N*12.92,Q=Q>.0031308?1.055*Math.pow(Q,1/2.4)-.055:Q*12.92,D=Math.min(Math.max(0,D),1),N=Math.min(Math.max(0,N),1),Q=Math.min(Math.max(0,Q),1),[D*255,N*255,Q*255]},h.xyz.lab=function(p){var s=p[0],w=p[1],z=p[2],D,N,Q;return s/=95.047,w/=100,z/=108.883,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,w=w>.008856?Math.pow(w,1/3):7.787*w+16/116,z=z>.008856?Math.pow(z,1/3):7.787*z+16/116,D=116*w-16,N=500*(s-w),Q=200*(w-z),[D,N,Q]},h.lab.xyz=function(p){var s=p[0],w=p[1],z=p[2],D,N,Q;N=(s+16)/116,D=w/500+N,Q=N-z/200;var T=Math.pow(N,3),Z=Math.pow(D,3),ia=Math.pow(Q,3);return N=T>.008856?T:(N-16/116)/7.787,D=Z>.008856?Z:(D-16/116)/7.787,Q=ia>.008856?ia:(Q-16/116)/7.787,D*=95.047,N*=100,Q*=108.883,[D,N,Q]},h.lab.lch=function(p){var s=p[0],w=p[1],z=p[2],D,N,Q;return D=Math.atan2(z,w),N=D*360/2/Math.PI,N<0&&(N+=360),Q=Math.sqrt(w*w+z*z),[s,Q,N]},h.lch.lab=function(p){var s=p[0],w=p[1],z=p[2],D,N,Q;return Q=z/360*2*Math.PI,D=w*Math.cos(Q),N=w*Math.sin(Q),[s,D,N]},h.rgb.ansi16=function(p){var s=p[0],w=p[1],z=p[2],D=1 in arguments?arguments[1]:h.rgb.hsv(p)[2];D=Math.round(D/50);if(D===0)return 30;var N=30+(Math.round(z/255)<<2|Math.round(w/255)<<1|Math.round(s/255));return D===2&&(N+=60),N},h.hsv.ansi16=function(p){return h.rgb.ansi16(h.hsv.rgb(p),p[2])},h.rgb.ansi256=function(p){var s=p[0],w=p[1],z=p[2];if(s===w&&w===z)return s<8?16:s>248?231:Math.round((s-8)/247*24)+232;var D=16+36*Math.round(s/255*5)+6*Math.round(w/255*5)+Math.round(z/255*5);return D},h.ansi16.rgb=function(p){var s=p%10;if(s===0||s===7)return p>50&&(s+=3.5),s=s/10.5*255,[s,s,s];var w=(~~(p>50)+1)*.5,z=(s&1)*w*255,D=(s>>1&1)*w*255,N=(s>>2&1)*w*255;return[z,D,N]},h.ansi256.rgb=function(p){if(p>=232){var s=(p-232)*10+8;return[s,s,s]}p-=16;var w,z=Math.floor(p/36)/5*255,D=Math.floor((w=p%36)/6)/5*255,N=w%6/5*255;return[z,D,N]},h.rgb.hex=function(p){var s=((Math.round(p[0])&255)<<16)+((Math.round(p[1])&255)<<8)+(Math.round(p[2])&255),w=s.toString(16).toUpperCase();return"000000".substring(w.length)+w},h.hex.rgb=function(p){var s=p.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!s)return[0,0,0];var w=s[0];s[0].length===3&&(w=w.split("").map(function(T){return T+T}).join(""));var z=parseInt(w,16),D=z>>16&255,N=z>>8&255,Q=z&255;return[D,N,Q]},h.rgb.hcg=function(p){var s=p[0]/255,w=p[1]/255,z=p[2]/255,D=Math.max(Math.max(s,w),z),N=Math.min(Math.min(s,w),z),Q=D-N,T,Z;return Q<1?T=N/(1-Q):T=0,Q<=0?Z=0:D===s?Z=(w-z)/Q%6:D===w?Z=2+(z-s)/Q:Z=4+(s-w)/Q+4,Z/=6,Z%=1,[Z*360,Q*100,T*100]},h.hsl.hcg=function(p){var s=p[1]/100,w=p[2]/100,z=1,D=0;return w<.5?z=2*s*w:z=2*s*(1-w),z<1&&(D=(w-.5*z)/(1-z)),[p[0],z*100,D*100]},h.hsv.hcg=function(p){var s=p[1]/100,w=p[2]/100,z=s*w,D=0;return z<1&&(D=(w-z)/(1-z)),[p[0],z*100,D*100]},h.hcg.rgb=function(p){var s=p[0]/360,w=p[1]/100,z=p[2]/100;if(w===0)return[z*255,z*255,z*255];var D=[0,0,0],N=s%1*6,Q=N%1,T=1-Q,Z=0;switch(Math.floor(N)){case 0:D[0]=1,D[1]=Q,D[2]=0;break;case 1:D[0]=T,D[1]=1,D[2]=0;break;case 2:D[0]=0,D[1]=1,D[2]=Q;break;case 3:D[0]=0,D[1]=T,D[2]=1;break;case 4:D[0]=Q,D[1]=0,D[2]=1;break;default:D[0]=1,D[1]=0,D[2]=T}return Z=(1-w)*z,[(w*D[0]+Z)*255,(w*D[1]+Z)*255,(w*D[2]+Z)*255]},h.hcg.hsv=function(p){var s=p[1]/100,w=p[2]/100,z=s+w*(1-s),D=0;return z>0&&(D=s/z),[p[0],D*100,z*100]},h.hcg.hsl=function(p){var s=p[1]/100,w=p[2]/100,z=w*(1-s)+.5*s,D=0;return z>0&&z<.5?D=s/(2*z):z>=.5&&z<1&&(D=s/(2*(1-z))),[p[0],D*100,z*100]},h.hcg.hwb=function(p){var s=p[1]/100,w=p[2]/100,z=s+w*(1-s);return[p[0],(z-s)*100,(1-z)*100]},h.hwb.hcg=function(p){var s=p[1]/100,w=p[2]/100,z=1-w,D=z-s,N=0;return D<1&&(N=(z-D)/(1-D)),[p[0],D*100,N*100]},h.apple.rgb=function(p){return[p[0]/65535*255,p[1]/65535*255,p[2]/65535*255]},h.rgb.apple=function(p){return[p[0]/255*65535,p[1]/255*65535,p[2]/255*65535]},h.gray.rgb=function(p){return[p[0]/100*255,p[0]/100*255,p[0]/100*255]},h.gray.hsl=h.gray.hsv=function(p){return[0,0,p[0]]},h.gray.hwb=function(p){return[0,100,p[0]]},h.gray.cmyk=function(p){return[0,0,0,p[0]]},h.gray.lab=function(p){return[p[0],0,0]},h.gray.hex=function(p){var s=Math.round(p[0]/100*255)&255,w=(s<<16)+(s<<8)+s,z=w.toString(16).toUpperCase();return"000000".substring(z.length)+z},h.rgb.gray=function(p){var s=(p[0]+p[1]+p[2])/3;return[s/255*100]}}),u=q.rgb,v=q.hsl,A=q.hsv,E=q.hwb,H=q.cmyk,R=q.xyz,L=q.lab,O=q.lch,V=q.hex,X=q.keyword,ea=q.ansi16,ga=q.ansi256,ka=q.hcg,ha=q.apple,oa=q.gray;function pa(){for(var c={},e=Object.keys(q),g=e.length,h=0;h<g;h++)c[e[h]]={distance:-1,parent:null};return c}function ja(c){var e=pa(),g=[c];for(e[c].distance=0;g.length;)for(var h=g.pop(),k=Object.keys(q[h]),m=k.length,o=0;o<m;o++){var r=k[o],p=e[r];p.distance===-1&&(p.distance=e[h].distance+1,p.parent=h,g.unshift(r))}return e}function I(c,e){return function(g){return e(c(g))}}function P(c,e){for(var g=[e[c].parent,c],h=q[e[c].parent][c],k=e[c].parent;e[k].parent;)g.unshift(e[k].parent),h=I(q[e[k].parent][k],h),k=e[k].parent;return h.conversion=g,h}var x=function(c){for(var e=ja(c),g={},h=Object.keys(e),k=h.length,m=0;m<k;m++){var o=h[m],r=e[o];if(r.parent===null)continue;g[o]=P(o,e)}return g},G={},F=Object.keys(q);function J(c){var e=function(g){return g===void 0||g===null?g:(arguments.length>1&&(g=Array.prototype.slice.call(arguments)),c(g))};return"conversion"in c&&(e.conversion=c.conversion),e}function U(c){var e=function(g){if(g===void 0||g===null)return g;arguments.length>1&&(g=Array.prototype.slice.call(arguments));var h=c(g);if(typeof h==="object")for(var k=h.length,m=0;m<k;m++)h[m]=Math.round(h[m]);return h};return"conversion"in c&&(e.conversion=c.conversion),e}F.forEach(function(c){G[c]={},Object.defineProperty(G[c],"channels",{value:q[c].channels}),Object.defineProperty(G[c],"labels",{value:q[c].labels});var e=x(c),g=Object.keys(e);g.forEach(function(h){var k=e[h];G[c][h]=U(k),G[c][h].raw=J(k)})});var K=G,ca={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ba={getRgba:Ba,getHsla:$,getRgb:ra,getHsl:da,getHwb:va,getAlpha:na,hexString:xa,rgbString:ma,rgbaString:eb,percentString:gb,percentaString:hb,hslString:Ca,hslaString:Ja,hwbString:Za,keyword:fb};function Ba(c){if(!c)return;var e=/^#([a-fA-F0-9]{3,4})$/i,g=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,h=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,k=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,m=/(\w+)/,o=[0,0,0],r=1,p=c.match(e),s="";if(p){p=p[1],s=p[3];for(var w=0;w<o.length;w++)o[w]=parseInt(p[w]+p[w],16);s&&(r=Math.round(parseInt(s+s,16)/255*100)/100)}else if(p=c.match(g)){s=p[2],p=p[1];for(var w=0;w<o.length;w++)o[w]=parseInt(p.slice(w*2,w*2+2),16);s&&(r=Math.round(parseInt(s,16)/255*100)/100)}else if(p=c.match(h)){for(var w=0;w<o.length;w++)o[w]=parseInt(p[w+1]);r=parseFloat(p[4])}else if(p=c.match(k)){for(var w=0;w<o.length;w++)o[w]=Math.round(parseFloat(p[w+1])*2.55);r=parseFloat(p[4])}else if(p=c.match(m)){if(p[1]=="transparent")return[0,0,0,0];o=ca[p[1]];if(!o)return}for(var w=0;w<o.length;w++)o[w]=qa(o[w],0,255);return!r&&r!=0?r=1:r=qa(r,0,1),o[3]=r,o}function $(c){if(!c)return;var e=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,g=c.match(e);if(g){var h=parseFloat(g[4]),k=qa(parseInt(g[1]),0,360),m=qa(parseFloat(g[2]),0,100),o=qa(parseFloat(g[3]),0,100),r=qa(isNaN(h)?1:h,0,1);return[k,m,o,r]}}function va(c){if(!c)return;var e=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,g=c.match(e);if(g){var h=parseFloat(g[4]),k=qa(parseInt(g[1]),0,360),m=qa(parseFloat(g[2]),0,100),o=qa(parseFloat(g[3]),0,100),r=qa(isNaN(h)?1:h,0,1);return[k,m,o,r]}}function ra(c){var e=Ba(c);return e&&e.slice(0,3)}function da(c){var e=$(c);return e&&e.slice(0,3)}function na(c){var e=Ba(c);if(e)return e[3];{if(e=$(c))return e[3];if(e=va(c))return e[3]}}function xa(c,e){var e=e!==void 0&&c.length===3?e:c[3];return"#"+ya(c[0])+ya(c[1])+ya(c[2])+(e>=0&&e<1?ya(Math.round(e*255)):"")}function ma(c,e){return e<1||c[3]&&c[3]<1?eb(c,e):"rgb("+c[0]+", "+c[1]+", "+c[2]+")"}function eb(c,e){return e===void 0&&(e=c[3]!==void 0?c[3]:1),"rgba("+c[0]+", "+c[1]+", "+c[2]+", "+e+")"}function gb(c,e){if(e<1||c[3]&&c[3]<1)return hb(c,e);var g=Math.round(c[0]/255*100),h=Math.round(c[1]/255*100),k=Math.round(c[2]/255*100);return"rgb("+g+"%, "+h+"%, "+k+"%)"}function hb(c,e){var g=Math.round(c[0]/255*100),h=Math.round(c[1]/255*100),k=Math.round(c[2]/255*100);return"rgba("+g+"%, "+h+"%, "+k+"%, "+(e||c[3]||1)+")"}function Ca(c,e){return e<1||c[3]&&c[3]<1?Ja(c,e):"hsl("+c[0]+", "+c[1]+"%, "+c[2]+"%)"}function Ja(c,e){return e===void 0&&(e=c[3]!==void 0?c[3]:1),"hsla("+c[0]+", "+c[1]+"%, "+c[2]+"%, "+e+")"}function Za(c,e){return e===void 0&&(e=c[3]!==void 0?c[3]:1),"hwb("+c[0]+", "+c[1]+"%, "+c[2]+"%"+(e!==void 0&&e!==1?", "+e:"")+")"}function fb(c){return Ma[c.slice(0,3)]}function qa(c,e,g){return Math.min(Math.max(e,c),g)}function ya(c){var e=c.toString(16).toUpperCase();return e.length<2?"0"+e:e}var Ma={};for(var ta in ca)Ma[ca[ta]]=ta;var Ea=function(c){if(c instanceof Ea)return c;if(!(this instanceof Ea))return new Ea(c);this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var e;typeof c==="string"?(e=ba.getRgba(c),e?this.setValues("rgb",e):(e=ba.getHsla(c))?this.setValues("hsl",e):(e=ba.getHwb(c))&&this.setValues("hwb",e)):typeof c==="object"&&(e=c,e.r!==void 0||e.red!==void 0?this.setValues("rgb",e):e.l!==void 0||e.lightness!==void 0?this.setValues("hsl",e):e.v!==void 0||e.value!==void 0?this.setValues("hsv",e):e.w!==void 0||e.whiteness!==void 0?this.setValues("hwb",e):(e.c!==void 0||e.cyan!==void 0)&&this.setValues("cmyk",e))};Ea.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var c=this.values;return c.alpha!==1?c.hwb.concat([c.alpha]):c.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var c=this.values;return c.rgb.concat([c.alpha])},hslaArray:function(){var c=this.values;return c.hsl.concat([c.alpha])},alpha:function(c){return c===void 0?this.values.alpha:(this.setValues("alpha",c),this)},red:function(c){return this.setChannel("rgb",0,c)},green:function(c){return this.setChannel("rgb",1,c)},blue:function(c){return this.setChannel("rgb",2,c)},hue:function(c){return c&&(c%=360,c=c<0?360+c:c),this.setChannel("hsl",0,c)},saturation:function(c){return this.setChannel("hsl",1,c)},lightness:function(c){return this.setChannel("hsl",2,c)},saturationv:function(c){return this.setChannel("hsv",1,c)},whiteness:function(c){return this.setChannel("hwb",1,c)},blackness:function(c){return this.setChannel("hwb",2,c)},value:function(c){return this.setChannel("hsv",2,c)},cyan:function(c){return this.setChannel("cmyk",0,c)},magenta:function(c){return this.setChannel("cmyk",1,c)},yellow:function(c){return this.setChannel("cmyk",2,c)},black:function(c){return this.setChannel("cmyk",3,c)},hexString:function(){return ba.hexString(this.values.rgb)},rgbString:function(){return ba.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return ba.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return ba.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return ba.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return ba.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return ba.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return ba.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var c=this.values.rgb;return c[0]<<16|c[1]<<8|c[2]},luminosity:function(){for(var c=this.values.rgb,e=[],g=0;g<c.length;g++){var h=c[g]/255;e[g]=h<=.03928?h/12.92:Math.pow((h+.055)/1.055,2.4)}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(c){var e=this.luminosity(),g=c.luminosity();return e>g?(e+.05)/(g+.05):(g+.05)/(e+.05)},level:function(c){var e=this.contrast(c);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var c=this.values.rgb,e=(c[0]*299+c[1]*587+c[2]*114)/1e3;return e<128},light:function(){return!this.dark()},negate:function(){for(var c=[],e=0;e<3;e++)c[e]=255-this.values.rgb[e];return this.setValues("rgb",c),this},lighten:function(c){var e=this.values.hsl;return e[2]+=e[2]*c,this.setValues("hsl",e),this},darken:function(c){var e=this.values.hsl;return e[2]-=e[2]*c,this.setValues("hsl",e),this},saturate:function(c){var e=this.values.hsl;return e[1]+=e[1]*c,this.setValues("hsl",e),this},desaturate:function(c){var e=this.values.hsl;return e[1]-=e[1]*c,this.setValues("hsl",e),this},whiten:function(c){var e=this.values.hwb;return e[1]+=e[1]*c,this.setValues("hwb",e),this},blacken:function(c){var e=this.values.hwb;return e[2]+=e[2]*c,this.setValues("hwb",e),this},greyscale:function(){var c=this.values.rgb,e=c[0]*.3+c[1]*.59+c[2]*.11;return this.setValues("rgb",[e,e,e]),this},clearer:function(c){var e=this.values.alpha;return this.setValues("alpha",e-e*c),this},opaquer:function(c){var e=this.values.alpha;return this.setValues("alpha",e+e*c),this},rotate:function(c){var e=this.values.hsl,g=(e[0]+c)%360;return e[0]=g<0?360+g:g,this.setValues("hsl",e),this},mix:function(c,e){var g=this,h=c,k=e===void 0?.5:e,m=2*k-1,o=g.alpha()-h.alpha(),r=((m*o===-1?m:(m+o)/(1+m*o))+1)/2,p=1-r;return this.rgb(r*g.red()+p*h.red(),r*g.green()+p*h.green(),r*g.blue()+p*h.blue()).alpha(g.alpha()*k+h.alpha()*(1-k))},toJSON:function(){return this.rgb()},clone:function(){var c=new Ea(),e=this.values,g=c.values,h,k;for(var m in e)e.hasOwnProperty(m)&&(h=e[m],k={}.toString.call(h),k==="[object Array]"?g[m]=h.slice(0):k==="[object Number]"?g[m]=h:console.error("unexpected color value:",h));return c}},Ea.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},Ea.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},Ea.prototype.getValues=function(c){for(var e=this.values,g={},h=0;h<c.length;h++)g[c.charAt(h)]=e[c][h];return e.alpha!==1&&(g.a=e.alpha),g},Ea.prototype.setValues=function(c,e){var g=this.values,h=this.spaces,k=this.maxes,m=1,o;this.valid=!0;if(c==="alpha")m=e;else if(e.length)g[c]=e.slice(0,c.length),m=e[c.length];else if(e[c.charAt(0)]!==void 0){for(o=0;o<c.length;o++)g[c][o]=e[c.charAt(o)];m=e.a}else if(e[h[c][0]]!==void 0){var r=h[c];for(o=0;o<c.length;o++)g[c][o]=e[r[o]];m=e.alpha}g.alpha=Math.max(0,Math.min(1,m===void 0?g.alpha:m));if(c==="alpha")return!1;var p;for(o=0;o<c.length;o++)p=Math.max(0,Math.min(k[c][o],g[c][o])),g[c][o]=Math.round(p);for(var s in h)s!==c&&(g[s]=K[c][s](g[c]));return!0},Ea.prototype.setSpace=function(c,e){var g=e[0];return g===void 0?this.getValues(c):(typeof g==="number"&&(g=Array.prototype.slice.call(e)),this.setValues(c,g),this)},Ea.prototype.setChannel=function(c,e,g){var h=this.values[c];return g===void 0?h[e]:g===h[e]?this:(h[e]=g,this.setValues(c,h),this)},typeof window!=="undefined"&&(window.Color=Ea);var cb=Ea,Da={noop:function(){},uid:function(){var c=0;return function(){return c++}}(),isNullOrUndef:function(c){return c===null||typeof c==="undefined"},isArray:function(c){if(Array.isArray&&Array.isArray(c))return!0;var e=Object.prototype.toString.call(c);return e.substr(0,7)==="[object"&&e.substr(-6)==="Array]"?!0:!1},isObject:function(c){return c!==null&&Object.prototype.toString.call(c)==="[object Object]"},isFinite:function(c){return(typeof c==="number"||c instanceof Number)&&isFinite(c)},valueOrDefault:function(c,e){return typeof c==="undefined"?e:c},valueAtIndexOrDefault:function(c,e,g){return Da.valueOrDefault(Da.isArray(c)?c[e]:c,g)},callback:function(c,e,g){if(c&&typeof c.call==="function")return c.apply(g,e)},each:function(c,e,g,h){var k,m,o;if(Da.isArray(c)){m=c.length;if(h)for(k=m-1;k>=0;k--)e.call(g,c[k],k);else for(k=0;k<m;k++)e.call(g,c[k],k)}else if(Da.isObject(c))for(o=Object.keys(c),m=o.length,k=0;k<m;k++)e.call(g,c[o[k]],o[k])},arrayEquals:function(c,e){var g,h,k,m;if(!c||!e||c.length!==e.length)return!1;for(g=0,h=c.length;g<h;++g){k=c[g],m=e[g];if(k instanceof Array&&m instanceof Array){if(!Da.arrayEquals(k,m))return!1}else if(k!==m)return!1}return!0},clone:function(c){if(Da.isArray(c))return c.map(Da.clone);if(Da.isObject(c)){for(var e={},g=Object.keys(c),h=g.length,k=0;k<h;++k)e[g[k]]=Da.clone(c[g[k]]);return e}return c},_merger:function(c,e,g,h){var k=e[c],m=g[c];Da.isObject(k)&&Da.isObject(m)?Da.merge(k,m,h):e[c]=Da.clone(m)},_mergerIf:function(c,e,g){var h=e[c],k=g[c];Da.isObject(h)&&Da.isObject(k)?Da.mergeIf(h,k):e.hasOwnProperty(c)||(e[c]=Da.clone(k))},merge:function(c,e,g){var h=Da.isArray(e)?e:[e],k=h.length,m,o,r,p,s;if(!Da.isObject(c))return c;for(g=g||{},m=g.merger||Da._merger,o=0;o<k;++o){e=h[o];if(!Da.isObject(e))continue;for(r=Object.keys(e),s=0,p=r.length;s<p;++s)m(r[s],c,e,g)}return c},mergeIf:function(c,e){return Da.merge(c,e,{merger:Da._mergerIf})},extend:Object.assign||function(c){return Da.merge(c,[].slice.call(arguments,1),{merger:function(e,g,h){g[e]=h[e]}})},inherits:function(c){var e=this,g=c&&c.hasOwnProperty("constructor")?c.constructor:function(){return e.apply(this,arguments)},h=function(){this.constructor=g};return h.prototype=e.prototype,g.prototype=new h(),g.extend=Da.inherits,c&&Da.extend(g.prototype,c),g.__super__=e.prototype,g},_deprecated:function(c,e,g,h){e!==void 0&&console.warn(c+': "'+g+'" is deprecated. Please use "'+h+'" instead')}},Ta=Da;Da.callCallback=Da.callback,Da.indexOf=function(c,e,g){return Array.prototype.indexOf.call(c,e,g)},Da.getValueOrDefault=Da.valueOrDefault,Da.getValueAtIndexOrDefault=Da.valueAtIndexOrDefault;var Ka={linear:function(c){return c},easeInQuad:function(c){return c*c},easeOutQuad:function(c){return-c*(c-2)},easeInOutQuad:function(c){return(c/=.5)<1?.5*c*c:-.5*(--c*(c-2)-1)},easeInCubic:function(c){return c*c*c},easeOutCubic:function(c){return(c=c-1)*c*c+1},easeInOutCubic:function(c){return(c/=.5)<1?.5*c*c*c:.5*((c-=2)*c*c+2)},easeInQuart:function(c){return c*c*c*c},easeOutQuart:function(c){return-((c=c-1)*c*c*c-1)},easeInOutQuart:function(c){return(c/=.5)<1?.5*c*c*c*c:-.5*((c-=2)*c*c*c-2)},easeInQuint:function(c){return c*c*c*c*c},easeOutQuint:function(c){return(c=c-1)*c*c*c*c+1},easeInOutQuint:function(c){return(c/=.5)<1?.5*c*c*c*c*c:.5*((c-=2)*c*c*c*c+2)},easeInSine:function(c){return-Math.cos(c*(Math.PI/2))+1},easeOutSine:function(c){return Math.sin(c*(Math.PI/2))},easeInOutSine:function(c){return-.5*(Math.cos(Math.PI*c)-1)},easeInExpo:function(c){return c===0?0:Math.pow(2,10*(c-1))},easeOutExpo:function(c){return c===1?1:-Math.pow(2,-10*c)+1},easeInOutExpo:function(c){return c===0?0:c===1?1:(c/=.5)<1?.5*Math.pow(2,10*(c-1)):.5*(-Math.pow(2,-10*--c)+2)},easeInCirc:function(c){return c>=1?c:-(Math.sqrt(1-c*c)-1)},easeOutCirc:function(c){return Math.sqrt(1-(c=c-1)*c)},easeInOutCirc:function(c){return(c/=.5)<1?-.5*(Math.sqrt(1-c*c)-1):.5*(Math.sqrt(1-(c-=2)*c)+1)},easeInElastic:function(c){var e=1.70158,g=0,h=1;return c===0?0:c===1?1:(g||(g=.3),h<1?(h=1,e=g/4):e=g/(2*Math.PI)*Math.asin(1/h),-(h*Math.pow(2,10*(c-=1))*Math.sin((c-e)*(2*Math.PI)/g)))},easeOutElastic:function(c){var e=1.70158,g=0,h=1;return c===0?0:c===1?1:(g||(g=.3),h<1?(h=1,e=g/4):e=g/(2*Math.PI)*Math.asin(1/h),h*Math.pow(2,-10*c)*Math.sin((c-e)*(2*Math.PI)/g)+1)},easeInOutElastic:function(c){var e=1.70158,g=0,h=1;return c===0?0:(c/=.5)===2?1:(g||(g=.45),h<1?(h=1,e=g/4):e=g/(2*Math.PI)*Math.asin(1/h),c<1?-.5*(h*Math.pow(2,10*(c-=1))*Math.sin((c-e)*(2*Math.PI)/g)):h*Math.pow(2,-10*(c-=1))*Math.sin((c-e)*(2*Math.PI)/g)*.5+1)},easeInBack:function(c){var e=1.70158;return c*c*((e+1)*c-e)},easeOutBack:function(c){var e=1.70158;return(c=c-1)*c*((e+1)*c+e)+1},easeInOutBack:function(c){var e=1.70158;return(c/=.5)<1?.5*(c*c*(((e*=1.525)+1)*c-e)):.5*((c-=2)*c*(((e*=1.525)+1)*c+e)+2)},easeInBounce:function(c){return 1-Ka.easeOutBounce(1-c)},easeOutBounce:function(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+.9375:7.5625*(c-=2.625/2.75)*c+.984375},easeInOutBounce:function(c){return c<.5?Ka.easeInBounce(c*2)*.5:Ka.easeOutBounce(c*2-1)*.5+.5}},Wa={effects:Ka};Ta.easingEffects=Ka;var jb=Math.PI,ub=jb/180,ob=jb*2,sa=jb/2,_a=jb/4,Y=jb*2/3,M={clear:function(c){c.ctx.clearRect(0,0,c.width,c.height)},roundedRect:function(c,e,g,h,k,m){if(m){var o=Math.min(m,k/2,h/2),r=e+o,p=g+o,s=e+h-o,w=g+k-o;c.moveTo(e,p),r<s&&p<w?(c.arc(r,p,o,-jb,-sa),c.arc(s,p,o,-sa,0),c.arc(s,w,o,0,sa),c.arc(r,w,o,sa,jb)):r<s?(c.moveTo(r,g),c.arc(s,p,o,-sa,sa),c.arc(r,p,o,sa,jb+sa)):p<w?(c.arc(r,p,o,-jb,0),c.arc(r,w,o,0,jb)):c.arc(r,p,o,-jb,jb),c.closePath(),c.moveTo(e,g)}else c.rect(e,g,h,k)},drawPoint:function(c,e,g,h,k,m){var o,r,p,s,w,z=(m||0)*ub;if(e&&typeof e==="object"){o=e.toString();if(o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]"){c.save(),c.translate(h,k),c.rotate(z),c.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),c.restore();return}}if(isNaN(g)||g<=0)return;c.beginPath();switch(e){default:c.arc(h,k,g,0,ob),c.closePath();break;case"triangle":c.moveTo(h+Math.sin(z)*g,k-Math.cos(z)*g),z+=Y,c.lineTo(h+Math.sin(z)*g,k-Math.cos(z)*g),z+=Y,c.lineTo(h+Math.sin(z)*g,k-Math.cos(z)*g),c.closePath();break;case"rectRounded":w=g*.516,s=g-w,r=Math.cos(z+_a)*s,p=Math.sin(z+_a)*s,c.arc(h-r,k-p,w,z-jb,z-sa),c.arc(h+p,k-r,w,z-sa,z),c.arc(h+r,k+p,w,z,z+sa),c.arc(h-p,k+r,w,z+sa,z+jb),c.closePath();break;case"rect":if(!m){s=Math.SQRT1_2*g,c.rect(h-s,k-s,2*s,2*s);break}z+=_a;case"rectRot":r=Math.cos(z)*g,p=Math.sin(z)*g,c.moveTo(h-r,k-p),c.lineTo(h+p,k-r),c.lineTo(h+r,k+p),c.lineTo(h-p,k+r),c.closePath();break;case"crossRot":z+=_a;case"cross":r=Math.cos(z)*g,p=Math.sin(z)*g,c.moveTo(h-r,k-p),c.lineTo(h+r,k+p),c.moveTo(h+p,k-r),c.lineTo(h-p,k+r);break;case"star":r=Math.cos(z)*g,p=Math.sin(z)*g,c.moveTo(h-r,k-p),c.lineTo(h+r,k+p),c.moveTo(h+p,k-r),c.lineTo(h-p,k+r),z+=_a,r=Math.cos(z)*g,p=Math.sin(z)*g,c.moveTo(h-r,k-p),c.lineTo(h+r,k+p),c.moveTo(h+p,k-r),c.lineTo(h-p,k+r);break;case"line":r=Math.cos(z)*g,p=Math.sin(z)*g,c.moveTo(h-r,k-p),c.lineTo(h+r,k+p);break;case"dash":c.moveTo(h,k),c.lineTo(h+Math.cos(z)*g,k+Math.sin(z)*g);break}c.fill(),c.stroke()},_isPointInArea:function(c,e){var g=1e-6;return c.x>e.left-g&&c.x<e.right+g&&c.y>e.top-g&&c.y<e.bottom+g},clipArea:function(c,e){c.save(),c.beginPath(),c.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),c.clip()},unclipArea:function(c){c.restore()},lineTo:function(c,e,g,h){var k=g.steppedLine;if(k){if(k==="middle"){var m=(e.x+g.x)/2;c.lineTo(m,h?g.y:e.y),c.lineTo(m,h?e.y:g.y)}else k==="after"&&!h||k!=="after"&&h?c.lineTo(e.x,g.y):c.lineTo(g.x,e.y);c.lineTo(g.x,g.y);return}if(!g.tension){c.lineTo(g.x,g.y);return}c.bezierCurveTo(h?e.controlPointPreviousX:e.controlPointNextX,h?e.controlPointPreviousY:e.controlPointNextY,h?g.controlPointNextX:g.controlPointPreviousX,h?g.controlPointNextY:g.controlPointPreviousY,g.x,g.y)}},_=M;Ta.clear=M.clear,Ta.drawRoundedRectangle=function(c){c.beginPath(),M.roundedRect.apply(M,arguments)};var aa={_set:function(c,e){return Ta.merge(this[c]||(this[c]={}),e)}};aa._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var S=aa,za=Ta.valueOrDefault;function Sa(c){return!c||Ta.isNullOrUndef(c.size)||Ta.isNullOrUndef(c.family)?null:(c.style?c.style+" ":"")+(c.weight?c.weight+" ":"")+c.size+"px "+c.family}var pb={toLineHeight:function(c,e){var g=(""+c).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!g||g[1]==="normal")return e*1.2;c=+g[2];switch(g[3]){case"px":return c;case"%":c/=100;break}return e*c},toPadding:function(c){var e,g,h,k;return Ta.isObject(c)?(e=+c.top||0,g=+c.right||0,h=+c.bottom||0,k=+c.left||0):e=g=h=k=+c||0,{top:e,right:g,bottom:h,left:k,height:e+h,width:k+g}},_parseFont:function(c){var e=S.global,g=za(c.fontSize,e.defaultFontSize),h={family:za(c.fontFamily,e.defaultFontFamily),lineHeight:Ta.options.toLineHeight(za(c.lineHeight,e.defaultLineHeight),g),size:g,style:za(c.fontStyle,e.defaultFontStyle),weight:null,string:""};return h.string=Sa(h),h},resolve:function(c,e,g,h){var k=!0,m,o,r;for(m=0,o=c.length;m<o;++m){r=c[m];if(r===void 0)continue;e!==void 0&&typeof r==="function"&&(r=r(e),k=!1),g!==void 0&&Ta.isArray(r)&&(r=r[g],k=!1);if(r!==void 0)return h&&!k&&(h.cacheable=!1),r}}},Ua={_factorize:function(c){var e=[],g=Math.sqrt(c),h;for(h=1;h<g;h++)c%h===0&&(e.push(h),e.push(c/h));return g===(g|0)&&e.push(g),e.sort(function(k,m){return k-m}).pop(),e},log10:Math.log10||function(c){var e=Math.log(c)*Math.LOG10E,g=Math.round(e),h=c===Math.pow(10,g);return h?g:e}},lb=Ua;Ta.log10=Ua.log10;var Mb=function(c,e){return{x:function(g){return c+c+e-g},setWidth:function(g){e=g},textAlign:function(g){return g==="center"?g:g==="right"?"left":"right"},xPlus:function(g,h){return g-h},leftForLtr:function(g,h){return g-h}}},Db=function(){return{x:function(c){return c},setWidth:function(c){},textAlign:function(c){return c},xPlus:function(c,e){return c+e},leftForLtr:function(c,e){return c}}},La=function(c,e,g){return c?Mb(e,g):Db()},td=function(c,e){var g,h;(e==="ltr"||e==="rtl")&&(g=c.canvas.style,h=[g.getPropertyValue("direction"),g.getPropertyPriority("direction")],g.setProperty("direction",e,"important"),c.prevTextDirection=h)},Lf=function(c){var e=c.prevTextDirection;e!==void 0&&(delete c.prevTextDirection,c.canvas.style.setProperty("direction",e[0],e[1]))},Mf={getRtlAdapter:La,overrideTextDirection:td,restoreTextDirection:Lf},B=Ta,Nf=Wa,_d=_,Of=pb,bo=lb,Pf=Mf;B.easing=Nf,B.canvas=_d,B.options=Of,B.math=bo,B.rtl=Pf;function co(c,e,g,h){var k=Object.keys(g),m,o,r,p,s,w,z,D,N;for(m=0,o=k.length;m<o;++m){r=k[m],w=g[r],e.hasOwnProperty(r)||(e[r]=w),p=e[r];if(p===w||r[0]==="_")continue;c.hasOwnProperty(r)||(c[r]=p),s=c[r],z=typeof w;if(z===typeof s){if(z==="string"){D=cb(s);if(D.valid){N=cb(w);if(N.valid){e[r]=N.mix(D,h).rgbString();continue}}}else if(B.isFinite(s)&&B.isFinite(w)){e[r]=s+(w-s)*h;continue}}e[r]=w}}var ud=function(c){B.extend(this,c),this.initialize.apply(this,arguments)};B.extend(ud.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var c=this;return c._view||(c._view=B.extend({},c._model)),c._start={},c},transition:function(c){var e=this,g=e._model,h=e._start,k=e._view;return!g||c===1?(e._view=B.extend({},g),e._start=null,e):(k||(k=e._view={}),h||(h=e._start={}),co(h,k,g,c),e)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return B.isNumber(this._model.x)&&B.isNumber(this._model.y)}}),ud.extend=B.inherits;var cc=ud,ua=cc.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),bh=ua;Object.defineProperty(ua.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(ua.prototype,"chartInstance",{get:function(){return this.chart},set:function(c){this.chart=c}}),S._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:B.noop,onComplete:B.noop}});var ch={animations:[],request:null,addAnimation:function(c,e,g,h){var k=this.animations,m,o;for(e.chart=c,e.startTime=Date.now(),e.duration=g,h||(c.animating=!0),m=0,o=k.length;m<o;++m)if(k[m].chart===c){k[m]=e;return}k.push(e),k.length===1&&this.requestAnimationFrame()},cancelAnimation:function(c){var e=B.findIndex(this.animations,function(g){return g.chart===c});e!==-1&&(this.animations.splice(e,1),c.animating=!1)},requestAnimationFrame:function(){var c=this;c.request===null&&(c.request=B.requestAnimFrame.call(window,function(){c.request=null,c.startDigest()}))},startDigest:function(){var c=this;c.advance(),c.animations.length>0&&c.requestAnimationFrame()},advance:function(){for(var c=this.animations,e,g,h,k,m=0;m<c.length;)e=c[m],g=e.chart,h=e.numSteps,k=Math.floor((Date.now()-e.startTime)/e.duration*h)+1,e.currentStep=Math.min(k,h),B.callback(e.render,[g,e],g),B.callback(e.onAnimationProgress,[e],g),e.currentStep>=h?(B.callback(e.onAnimationComplete,[e],g),g.animating=!1,c.splice(m,1)):++m}},Ib=B.options.resolve,Qf=["push","pop","shift","splice","unshift"];function kb(c,e){if(c._chartjs){c._chartjs.listeners.push(e);return}Object.defineProperty(c,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Qf.forEach(function(g){var h="onData"+g.charAt(0).toUpperCase()+g.slice(1),k=c[g];Object.defineProperty(c,g,{configurable:!0,enumerable:!1,value:function(){var m=Array.prototype.slice.call(arguments),o=k.apply(this,m);return B.each(c._chartjs.listeners,function(r){typeof r[h]==="function"&&r[h].apply(r,m)}),o}})})}function $d(c,e){var g=c._chartjs;if(!g)return;var h=g.listeners,k=h.indexOf(e);k!==-1&&h.splice(k,1);if(h.length>0)return;Qf.forEach(function(m){delete c[m]}),delete c._chartjs}var dh=function(c,e){this.initialize(c,e)};B.extend(dh.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(c,e){var g=this;g.chart=c,g.index=e,g.linkScales(),g.addElements(),g._type=g.getMeta().type},updateIndex:function(c){this.index=c},linkScales:function(){var c=this,e=c.getMeta(),g=c.chart,h=g.scales,k=c.getDataset(),m=g.options.scales;(e.xAxisID===null||!(e.xAxisID in h)||k.xAxisID)&&(e.xAxisID=k.xAxisID||m.xAxes[0].id),(e.yAxisID===null||!(e.yAxisID in h)||k.yAxisID)&&(e.yAxisID=k.yAxisID||m.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(c){return this.chart.scales[c]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&$d(this._data,this)},createMetaDataset:function(){var c=this,e=c.datasetElementType;return e&&new e({_chart:c.chart,_datasetIndex:c.index})},createMetaData:function(c){var e=this,g=e.dataElementType;return g&&new g({_chart:e.chart,_datasetIndex:e.index,_index:c})},addElements:function(){var c=this,e=c.getMeta(),g=c.getDataset().data||[],h=e.data,k,m;for(k=0,m=g.length;k<m;++k)h[k]=h[k]||c.createMetaData(k);e.dataset=e.dataset||c.createMetaDataset()},addElementAndReset:function(c){var e=this.createMetaData(c);this.getMeta().data.splice(c,0,e),this.updateElement(e,c,!0)},buildOrUpdateElements:function(){var c=this,e=c.getDataset(),g=e.data||(e.data=[]);c._data!==g&&(c._data&&$d(c._data,c),g&&Object.isExtensible(g)&&kb(g,c),c._data=g),c.resyncElements()},_configure:function(){var c=this;c._config=B.merge({},[c.chart.options.datasets[c._type],c.getDataset()],{merger:function(e,g,h){e!=="_meta"&&e!=="data"&&B._merger(e,g,h)}})},_update:function(c){var e=this;e._configure(),e._cachedDataOpts=null,e.update(c)},update:B.noop,transition:function(c){for(var e=this.getMeta(),g=e.data||[],h=g.length,k=0;k<h;++k)g[k].transition(c);e.dataset&&e.dataset.transition(c)},draw:function(){var c=this.getMeta(),e=c.data||[],g=e.length,h=0;for(c.dataset&&c.dataset.draw();h<g;++h)e[h].draw()},getStyle:function(c){var e=this,g=e.getMeta(),h=g.dataset,k;return e._configure(),h&&c===void 0?k=e._resolveDatasetElementOptions(h||{}):(c=c||0,k=e._resolveDataElementOptions(g.data[c]||{},c)),(k.fill===!1||k.fill===null)&&(k.backgroundColor=k.borderColor),k},_resolveDatasetElementOptions:function(c,e){var g=this,h=g.chart,k=g._config,m=c.custom||{},o=h.options.elements[g.datasetElementType.prototype._type]||{},r=g._datasetElementOptions,p={},s,w,z,D,N={chart:h,dataset:g.getDataset(),datasetIndex:g.index,hover:e};for(s=0,w=r.length;s<w;++s)z=r[s],D=e?"hover"+z.charAt(0).toUpperCase()+z.slice(1):z,p[z]=Ib([m[D],k[D],o[D]],N);return p},_resolveDataElementOptions:function(c,e){var g=this,h=c&&c.custom,k=g._cachedDataOpts;if(k&&!h)return k;var m=g.chart,o=g._config,r=m.options.elements[g.dataElementType.prototype._type]||{},p=g._dataElementOptions,s={},w={chart:m,dataIndex:e,dataset:g.getDataset(),datasetIndex:g.index},z={cacheable:!h},D,N,Q,T;h=h||{};if(B.isArray(p))for(N=0,Q=p.length;N<Q;++N)T=p[N],s[T]=Ib([h[T],o[T],r[T]],w,e,z);else for(D=Object.keys(p),N=0,Q=D.length;N<Q;++N)T=D[N],s[T]=Ib([h[T],o[p[T]],o[T],r[T]],w,e,z);return z.cacheable&&(g._cachedDataOpts=Object.freeze(s)),s},removeHoverStyle:function(c){B.merge(c._model,c.$previousStyle||{}),delete c.$previousStyle},setHoverStyle:function(c){var e=this.chart.data.datasets[c._datasetIndex],g=c._index,h=c.custom||{},k=c._model,m=B.getHoverColor;c.$previousStyle={backgroundColor:k.backgroundColor,borderColor:k.borderColor,borderWidth:k.borderWidth},k.backgroundColor=Ib([h.hoverBackgroundColor,e.hoverBackgroundColor,m(k.backgroundColor)],void 0,g),k.borderColor=Ib([h.hoverBorderColor,e.hoverBorderColor,m(k.borderColor)],void 0,g),k.borderWidth=Ib([h.hoverBorderWidth,e.hoverBorderWidth,k.borderWidth],void 0,g)},_removeDatasetHoverStyle:function(){var c=this.getMeta().dataset;c&&this.removeHoverStyle(c)},_setDatasetHoverStyle:function(){var c=this.getMeta().dataset,e={},g,h,k,m,o,r;if(!c)return;for(r=c._model,o=this._resolveDatasetElementOptions(c,!0),m=Object.keys(o),g=0,h=m.length;g<h;++g)k=m[g],e[k]=r[k],r[k]=o[k];c.$previousStyle=e},resyncElements:function(){var c=this,e=c.getMeta(),g=c.getDataset().data,h=e.data.length,k=g.length;k<h?e.data.splice(k,h-k):k>h&&c.insertElements(h,k-h)},insertElements:function(c,e){for(var g=0;g<e;++g)this.addElementAndReset(c+g)},onDataPush:function(){var c=arguments.length;this.insertElements(this.getDataset().data.length-c,c)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(c,e){this.getMeta().data.splice(c,e),this.insertElements(c,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),dh.extend=B.inherits;var mb=dh,Jb=Math.PI*2;S._set("global",{elements:{arc:{backgroundColor:S.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});function pc(c,e){var g=e.startAngle,h=e.endAngle,k=e.pixelMargin,m=k/e.outerRadius,o=e.x,r=e.y;c.beginPath(),c.arc(o,r,e.outerRadius,g-m,h+m),e.innerRadius>k?(m=k/e.innerRadius,c.arc(o,r,e.innerRadius-k,h+m,g-m,!0)):c.arc(o,r,k,h+Math.PI/2,g-Math.PI/2),c.closePath(),c.clip()}function Eb(c,e,g,h){var k=g.endAngle,m;for(h&&(g.endAngle=g.startAngle+Jb,pc(c,g),g.endAngle=k,g.endAngle===g.startAngle&&g.fullCircles&&(g.endAngle+=Jb,g.fullCircles--)),c.beginPath(),c.arc(g.x,g.y,g.innerRadius,g.startAngle+Jb,g.startAngle,!0),m=0;m<g.fullCircles;++m)c.stroke();for(c.beginPath(),c.arc(g.x,g.y,e.outerRadius,g.startAngle,g.startAngle+Jb),m=0;m<g.fullCircles;++m)c.stroke()}function qc(c,e,g){var h=e.borderAlign==="inner";h?(c.lineWidth=e.borderWidth*2,c.lineJoin="round"):(c.lineWidth=e.borderWidth,c.lineJoin="bevel"),g.fullCircles&&Eb(c,e,g,h),h&&pc(c,g),c.beginPath(),c.arc(g.x,g.y,e.outerRadius,g.startAngle,g.endAngle),c.arc(g.x,g.y,g.innerRadius,g.endAngle,g.startAngle,!0),c.closePath(),c.stroke()}var Mc=cc.extend({_type:"arc",inLabelRange:function(c){var e=this._view;return e?Math.pow(c-e.x,2)<Math.pow(e.radius+e.hoverRadius,2):!1},inRange:function(c,e){var g=this._view;if(g){for(var h=B.getAngleFromPoint(g,{x:c,y:e}),k=h.angle,m=h.distance,o=g.startAngle,r=g.endAngle;r<o;)r+=Jb;for(;k>r;)k-=Jb;for(;k<o;)k+=Jb;var p=k>=o&&k<=r,s=m>=g.innerRadius&&m<=g.outerRadius;return p&&s}return!1},getCenterPoint:function(){var c=this._view,e=(c.startAngle+c.endAngle)/2,g=(c.innerRadius+c.outerRadius)/2;return{x:c.x+Math.cos(e)*g,y:c.y+Math.sin(e)*g}},getArea:function(){var c=this._view;return Math.PI*((c.endAngle-c.startAngle)/(2*Math.PI))*(Math.pow(c.outerRadius,2)-Math.pow(c.innerRadius,2))},tooltipPosition:function(){var c=this._view,e=c.startAngle+(c.endAngle-c.startAngle)/2,g=(c.outerRadius-c.innerRadius)/2+c.innerRadius;return{x:c.x+Math.cos(e)*g,y:c.y+Math.sin(e)*g}},draw:function(){var c=this._chart.ctx,e=this._view,g=e.borderAlign==="inner"?.33:0,h={x:e.x,y:e.y,innerRadius:e.innerRadius,outerRadius:Math.max(e.outerRadius-g,0),pixelMargin:g,startAngle:e.startAngle,endAngle:e.endAngle,fullCircles:Math.floor(e.circumference/Jb)},k;c.save(),c.fillStyle=e.backgroundColor,c.strokeStyle=e.borderColor;if(h.fullCircles){for(h.endAngle=h.startAngle+Jb,c.beginPath(),c.arc(h.x,h.y,h.outerRadius,h.startAngle,h.endAngle),c.arc(h.x,h.y,h.innerRadius,h.endAngle,h.startAngle,!0),c.closePath(),k=0;k<h.fullCircles;++k)c.fill();h.endAngle=h.startAngle+e.circumference%Jb}c.beginPath(),c.arc(h.x,h.y,h.outerRadius,h.startAngle,h.endAngle),c.arc(h.x,h.y,h.innerRadius,h.endAngle,h.startAngle,!0),c.closePath(),c.fill(),e.borderWidth&&qc(c,e,h),c.restore()}}),bd=B.valueOrDefault,Kj=S.global.defaultColor;S._set("global",{elements:{line:{tension:.4,backgroundColor:Kj,borderWidth:3,borderColor:Kj,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var eo=cc.extend({_type:"line",draw:function(){var c=this,e=c._view,g=c._chart.ctx,h=e.spanGaps,k=c._children.slice(),m=S.global,o=m.elements.line,r=-1,p=c._loop,s,w,z;if(!k.length)return;if(c._loop){for(s=0;s<k.length;++s){w=B.previousItem(k,s);if(!k[s]._view.skip&&w._view.skip){k=k.slice(s).concat(k.slice(0,s)),p=h;break}}p&&k.push(k[0])}for(g.save(),g.lineCap=e.borderCapStyle||o.borderCapStyle,g.setLineDash&&g.setLineDash(e.borderDash||o.borderDash),g.lineDashOffset=bd(e.borderDashOffset,o.borderDashOffset),g.lineJoin=e.borderJoinStyle||o.borderJoinStyle,g.lineWidth=bd(e.borderWidth,o.borderWidth),g.strokeStyle=e.borderColor||m.defaultColor,g.beginPath(),z=k[0]._view,z.skip||(g.moveTo(z.x,z.y),r=0),s=1;s<k.length;++s)z=k[s]._view,w=r===-1?B.previousItem(k,s):k[r],z.skip||(r!==s-1&&!h||r===-1?g.moveTo(z.x,z.y):B.canvas.lineTo(g,w._view,z),r=s);p&&g.closePath(),g.stroke(),g.restore()}}),fo=B.valueOrDefault,vb=S.global.defaultColor;S._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:vb,borderColor:vb,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});function Ve(c){var e=this._view;return e?Math.abs(c-e.x)<e.radius+e.hitRadius:!1}function go(c){var e=this._view;return e?Math.abs(c-e.y)<e.radius+e.hitRadius:!1}var Lj=cc.extend({_type:"point",inRange:function(c,e){var g=this._view;return g?Math.pow(c-g.x,2)+Math.pow(e-g.y,2)<Math.pow(g.hitRadius+g.radius,2):!1},inLabelRange:Ve,inXRange:Ve,inYRange:go,getCenterPoint:function(){var c=this._view;return{x:c.x,y:c.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var c=this._view;return{x:c.x,y:c.y,padding:c.radius+c.borderWidth}},draw:function(c){var e=this._view,g=this._chart.ctx,h=e.pointStyle,k=e.rotation,m=e.radius,o=e.x,r=e.y,p=S.global,s=p.defaultColor;if(e.skip)return;(c===void 0||B.canvas._isPointInArea(e,c))&&(g.strokeStyle=e.borderColor||s,g.lineWidth=fo(e.borderWidth,p.elements.point.borderWidth),g.fillStyle=e.backgroundColor||s,B.canvas.drawPoint(g,h,m,o,r,k))}}),eh=S.global.defaultColor;S._set("global",{elements:{rectangle:{backgroundColor:eh,borderColor:eh,borderSkipped:"bottom",borderWidth:0}}});function Rf(c){return c&&c.width!==void 0}function Mj(c){var e,g,h,k,m;return Rf(c)?(m=c.width/2,e=c.x-m,g=c.x+m,h=Math.min(c.y,c.base),k=Math.max(c.y,c.base)):(m=c.height/2,e=Math.min(c.x,c.base),g=Math.max(c.x,c.base),h=c.y-m,k=c.y+m),{left:e,top:h,right:g,bottom:k}}function Nj(c,e,g){return c===e?g:c===g?e:c}function ho(c){var e=c.borderSkipped,g={};return e?(c.horizontal?c.base>c.x&&(e=Nj(e,"left","right")):c.base<c.y&&(e=Nj(e,"bottom","top")),g[e]=!0,g):g}function io(c,e,g){var h=c.borderWidth,k=ho(c),m,o,r,p;return B.isObject(h)?(m=+h.top||0,o=+h.right||0,r=+h.bottom||0,p=+h.left||0):m=o=r=p=+h||0,{t:k.top||m<0?0:m>g?g:m,r:k.right||o<0?0:o>e?e:o,b:k.bottom||r<0?0:r>g?g:r,l:k.left||p<0?0:p>e?e:p}}function jo(c){var e=Mj(c),g=e.right-e.left,h=e.bottom-e.top,k=io(c,g/2,h/2);return{outer:{x:e.left,y:e.top,w:g,h},inner:{x:e.left+k.l,y:e.top+k.t,w:g-k.l-k.r,h:h-k.t-k.b}}}function ae(c,e,g){var h=e===null,k=g===null,m=!c||h&&k?!1:Mj(c);return m&&(h||e>=m.left&&e<=m.right)&&(k||g>=m.top&&g<=m.bottom)}var Oj=cc.extend({_type:"rectangle",draw:function(){var c=this._chart.ctx,e=this._view,g=jo(e),h=g.outer,k=g.inner;c.fillStyle=e.backgroundColor,c.fillRect(h.x,h.y,h.w,h.h);if(h.w===k.w&&h.h===k.h)return;c.save(),c.beginPath(),c.rect(h.x,h.y,h.w,h.h),c.clip(),c.fillStyle=e.borderColor,c.rect(k.x,k.y,k.w,k.h),c.fill("evenodd"),c.restore()},height:function(){var c=this._view;return c.base-c.y},inRange:function(c,e){return ae(this._view,c,e)},inLabelRange:function(c,e){var g=this._view;return Rf(g)?ae(g,c,null):ae(g,null,e)},inXRange:function(c){return ae(this._view,c,null)},inYRange:function(c){return ae(this._view,null,c)},getCenterPoint:function(){var c=this._view,e,g;return Rf(c)?(e=c.x,g=(c.y+c.base)/2):(e=(c.x+c.base)/2,g=c.y),{x:e,y:g}},getArea:function(){var c=this._view;return Rf(c)?c.width*Math.abs(c.y-c.base):c.height*Math.abs(c.x-c.base)},tooltipPosition:function(){var c=this._view;return{x:c.x,y:c.y}}}),Wb={},ko=Mc,lo=eo,Pj=Lj,We=Oj;Wb.Arc=ko,Wb.Line=lo,Wb.Point=Pj,Wb.Rectangle=We;var be=B._deprecated,ce=B.valueOrDefault;S._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),S._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});function mo(c,e){var g=c._length,h,k,m,o;for(m=1,o=e.length;m<o;++m)g=Math.min(g,Math.abs(e[m]-e[m-1]));for(m=0,o=c.getTicks().length;m<o;++m)k=c.getPixelForTick(m),g=m>0?Math.min(g,Math.abs(k-h)):g,h=k;return g}function Xe(c,e,g){var h=g.barThickness,k=e.stackCount,m=e.pixels[c],o=B.isNullOrUndef(h)?mo(e.scale,e.pixels):-1,r,p;return B.isNullOrUndef(h)?(r=o*g.categoryPercentage,p=g.barPercentage):(r=h*k,p=1),{chunk:r/k,ratio:p,start:m-r/2}}function Sf(c,e,g){var h=e.pixels,k=h[c],m=c>0?h[c-1]:null,o=c<h.length-1?h[c+1]:null,r=g.categoryPercentage,p,s;return m===null&&(m=k-(o===null?e.end-e.start:o-k)),o===null&&(o=k+k-m),p=k-(k-Math.min(m,o))/2*r,s=Math.abs(o-m)/2*r,{chunk:s/e.stackCount,ratio:g.barPercentage,start:p}}var fh=mb.extend({dataElementType:Wb.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var c=this,e,g;mb.prototype.initialize.apply(c,arguments),e=c.getMeta(),e.stack=c.getDataset().stack,e.bar=!0,g=c._getIndexScale().options,be("bar chart",g.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),be("bar chart",g.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),be("bar chart",g.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),be("bar chart",c._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),be("bar chart",g.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(c){var e=this,g=e.getMeta().data,h,k;for(e._ruler=e.getRuler(),h=0,k=g.length;h<k;++h)e.updateElement(g[h],h,c)},updateElement:function(c,e,g){var h=this,k=h.getMeta(),m=h.getDataset(),o=h._resolveDataElementOptions(c,e);c._xScale=h.getScaleForId(k.xAxisID),c._yScale=h.getScaleForId(k.yAxisID),c._datasetIndex=h.index,c._index=e,c._model={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderSkipped:o.borderSkipped,borderWidth:o.borderWidth,datasetLabel:m.label,label:h.chart.data.labels[e]},B.isArray(m.data[e])&&(c._model.borderSkipped=null),h._updateElementGeometry(c,e,g,o),c.pivot()},_updateElementGeometry:function(c,e,g,h){var k=this,m=c._model,o=k._getValueScale(),r=o.getBasePixel(),p=o.isHorizontal(),s=k._ruler||k.getRuler(),w=k.calculateBarValuePixels(k.index,e,h),z=k.calculateBarIndexPixels(k.index,e,s,h);m.horizontal=p,m.base=g?r:w.base,m.x=p?g?r:w.head:z.center,m.y=p?z.center:g?r:w.head,m.height=p?z.size:void 0,m.width=p?void 0:z.size},_getStacks:function(c){var e=this,g=e._getIndexScale(),h=g._getMatchingVisibleMetas(e._type),k=g.options.stacked,m=h.length,o=[],r,p;for(r=0;r<m;++r){p=h[r],(k===!1||o.indexOf(p.stack)===-1||k===void 0&&p.stack===void 0)&&o.push(p.stack);if(p.index===c)break}return o},getStackCount:function(){return this._getStacks().length},getStackIndex:function(c,e){var g=this._getStacks(c),h=e!==void 0?g.indexOf(e):-1;return h===-1?g.length-1:h},getRuler:function(){var c=this,e=c._getIndexScale(),g=[],h,k;for(h=0,k=c.getMeta().data.length;h<k;++h)g.push(e.getPixelForValue(null,h,c.index));return{pixels:g,start:e._startPixel,end:e._endPixel,stackCount:c.getStackCount(),scale:e}},calculateBarValuePixels:function(c,e,g){var h=this,k=h.chart,m=h._getValueScale(),o=m.isHorizontal(),r=k.data.datasets,p=m._getMatchingVisibleMetas(h._type),s=m._parseValue(r[c].data[e]),w=g.minBarLength,z=m.options.stacked,D=h.getMeta().stack,N=s.start===void 0?0:s.max>=0&&s.min>=0?s.min:s.max,Q=s.start===void 0?s.end:s.max>=0&&s.min>=0?s.max-s.min:s.min-s.max,T=p.length,Z,ia,wa,Aa,Oa,Ha,Ya;if(z||z===void 0&&D!==void 0)for(Z=0;Z<T;++Z){ia=p[Z];if(ia.index===c)break;ia.stack===D&&(Ya=m._parseValue(r[ia.index].data[e]),wa=Ya.start===void 0?Ya.end:Ya.min>=0&&Ya.max>=0?Ya.max:Ya.min,(s.min<0&&wa<0||s.max>=0&&wa>0)&&(N+=wa))}return Aa=m.getPixelForValue(N),Oa=m.getPixelForValue(N+Q),Ha=Oa-Aa,w!==void 0&&Math.abs(Ha)<w&&(Ha=w,Q>=0&&!o||Q<0&&o?Oa=Aa-w:Oa=Aa+w),{size:Ha,base:Aa,head:Oa,center:Oa+Ha/2}},calculateBarIndexPixels:function(c,e,g,h){var k=this,m=h.barThickness==="flex"?Sf(e,g,h):Xe(e,g,h),o=k.getStackIndex(c,k.getMeta().stack),r=m.start+m.chunk*o+m.chunk/2,p=Math.min(ce(h.maxBarThickness,Infinity),m.chunk*m.ratio);return{base:r-p/2,head:r+p/2,center:r,size:p}},draw:function(){var c=this,e=c.chart,g=c._getValueScale(),h=c.getMeta().data,k=c.getDataset(),m=h.length,o=0;for(B.canvas.clipArea(e.ctx,e.chartArea);o<m;++o){var r=g._parseValue(k.data[o]);!isNaN(r.min)&&!isNaN(r.max)&&h[o].draw()}B.canvas.unclipArea(e.ctx)},_resolveDataElementOptions:function(){var c=this,e=B.extend({},mb.prototype._resolveDataElementOptions.apply(c,arguments)),g=c._getIndexScale().options,h=c._getValueScale().options;return e.barPercentage=ce(g.barPercentage,e.barPercentage),e.barThickness=ce(g.barThickness,e.barThickness),e.categoryPercentage=ce(g.categoryPercentage,e.categoryPercentage),e.maxBarThickness=ce(g.maxBarThickness,e.maxBarThickness),e.minBarLength=ce(h.minBarLength,e.minBarLength),e}}),vd=B.valueOrDefault,Nc=B.options.resolve;S._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(c,e){var g=e.datasets[c.datasetIndex].label||"",h=e.datasets[c.datasetIndex].data[c.index];return g+": ("+c.xLabel+", "+c.yLabel+", "+h.r+")"}}}});var no=mb.extend({dataElementType:Wb.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(c){var e=this,g=e.getMeta(),h=g.data;B.each(h,function(k,m){e.updateElement(k,m,c)})},updateElement:function(c,e,g){var h=this,k=h.getMeta(),m=c.custom||{},o=h.getScaleForId(k.xAxisID),r=h.getScaleForId(k.yAxisID),p=h._resolveDataElementOptions(c,e),s=h.getDataset().data[e],w=h.index,z=g?o.getPixelForDecimal(.5):o.getPixelForValue(typeof s==="object"?s:NaN,e,w),D=g?r.getBasePixel():r.getPixelForValue(s,e,w);c._xScale=o,c._yScale=r,c._options=p,c._datasetIndex=w,c._index=e,c._model={backgroundColor:p.backgroundColor,borderColor:p.borderColor,borderWidth:p.borderWidth,hitRadius:p.hitRadius,pointStyle:p.pointStyle,rotation:p.rotation,radius:g?0:p.radius,skip:m.skip||isNaN(z)||isNaN(D),x:z,y:D},c.pivot()},setHoverStyle:function(c){var e=c._model,g=c._options,h=B.getHoverColor;c.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=vd(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=vd(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=vd(g.hoverBorderWidth,g.borderWidth),e.radius=g.radius+g.hoverRadius},_resolveDataElementOptions:function(c,e){var g=this,h=g.chart,k=g.getDataset(),m=c.custom||{},o=k.data[e]||{},r=mb.prototype._resolveDataElementOptions.apply(g,arguments),p={chart:h,dataIndex:e,dataset:k,datasetIndex:g.index};return g._cachedDataOpts===r&&(r=B.extend({},r)),r.radius=Nc([m.radius,o.r,g._config.radius,h.options.elements.point.radius],p,e),r}}),Tf=B.valueOrDefault,wd=Math.PI,Oc=wd*2,xd=wd/2;S._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(c){var e=document.createElement("ul"),g=c.data,h=g.datasets,k=g.labels,m,o,r,p;e.setAttribute("class",c.id+"-legend");if(h.length)for(m=0,o=h[0].data.length;m<o;++m)r=e.appendChild(document.createElement("li")),p=r.appendChild(document.createElement("span")),p.style.backgroundColor=h[0].backgroundColor[m],k[m]&&r.appendChild(document.createTextNode(k[m]));return e.outerHTML},legend:{labels:{generateLabels:function(c){var e=c.data;return e.labels.length&&e.datasets.length?e.labels.map(function(g,h){var k=c.getDatasetMeta(0),m=k.controller.getStyle(h);return{text:g,fillStyle:m.backgroundColor,strokeStyle:m.borderColor,lineWidth:m.borderWidth,hidden:isNaN(e.datasets[0].data[h])||k.data[h].hidden,index:h}}):[]}},onClick:function(c,e){var g=e.index,h=this.chart,k,m,o;for(k=0,m=(h.data.datasets||[]).length;k<m;++k)o=h.getDatasetMeta(k),o.data[g]&&(o.data[g].hidden=!o.data[g].hidden);h.update()}},cutoutPercentage:50,rotation:-xd,circumference:Oc,tooltips:{callbacks:{title:function(){return""},label:function(c,e){var g=e.labels[c.index],h=": "+e.datasets[c.datasetIndex].data[c.index];return B.isArray(g)?(g=g.slice(),g[0]+=h):g+=h,g}}}});var Qj=mb.extend({dataElementType:Wb.Arc,linkScales:B.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(c){for(var e=0,g=0;g<c;++g)this.chart.isDatasetVisible(g)&&++e;return e},update:function(c){var e=this,g=e.chart,h=g.chartArea,k=g.options,m=1,o=1,r=0,p=0,s=e.getMeta(),w=s.data,z=k.cutoutPercentage/100||0,D=k.circumference,N=e._getRingWeight(e.index),Q,T,Z,ia;if(D<Oc){var wa=k.rotation%Oc;wa+=wa>=wd?-Oc:wa<-wd?Oc:0;var Aa=wa+D,Oa=Math.cos(wa),Ha=Math.sin(wa),Ya=Math.cos(Aa),ib=Math.sin(Aa),ab=wa<=0&&Aa>=0||Aa>=Oc,db=wa<=xd&&Aa>=xd||Aa>=Oc+xd,Kb=wa===-wd||Aa>=wd,Fb=wa<=-xd&&Aa>=-xd||Aa>=wd+xd,Bb=Kb?-1:Math.min(Oa,Oa*z,Ya,Ya*z),Nb=Fb?-1:Math.min(Ha,Ha*z,ib,ib*z),le=ab?1:Math.max(Oa,Oa*z,Ya,Ya*z),gd=db?1:Math.max(Ha,Ha*z,ib,ib*z);m=(le-Bb)/2,o=(gd-Nb)/2,r=-(le+Bb)/2,p=-(gd+Nb)/2}for(Z=0,ia=w.length;Z<ia;++Z)w[Z]._options=e._resolveDataElementOptions(w[Z],Z);for(g.borderWidth=e.getMaxBorderWidth(),Q=(h.right-h.left-g.borderWidth)/m,T=(h.bottom-h.top-g.borderWidth)/o,g.outerRadius=Math.max(Math.min(Q,T)/2,0),g.innerRadius=Math.max(g.outerRadius*z,0),g.radiusLength=(g.outerRadius-g.innerRadius)/(e._getVisibleDatasetWeightTotal()||1),g.offsetX=r*g.outerRadius,g.offsetY=p*g.outerRadius,s.total=e.calculateTotal(),e.outerRadius=g.outerRadius-g.radiusLength*e._getRingWeightOffset(e.index),e.innerRadius=Math.max(e.outerRadius-g.radiusLength*N,0),Z=0,ia=w.length;Z<ia;++Z)e.updateElement(w[Z],Z,c)},updateElement:function(c,e,g){var h=this,k=h.chart,m=k.chartArea,o=k.options,r=o.animation,p=(m.left+m.right)/2,s=(m.top+m.bottom)/2,w=o.rotation,z=o.rotation,D=h.getDataset(),N=g&&r.animateRotate?0:c.hidden?0:h.calculateCircumference(D.data[e])*(o.circumference/Oc),Q=g&&r.animateScale?0:h.innerRadius,T=g&&r.animateScale?0:h.outerRadius,Z=c._options||{};B.extend(c,{_datasetIndex:h.index,_index:e,_model:{backgroundColor:Z.backgroundColor,borderColor:Z.borderColor,borderWidth:Z.borderWidth,borderAlign:Z.borderAlign,x:p+k.offsetX,y:s+k.offsetY,startAngle:w,endAngle:z,circumference:N,outerRadius:T,innerRadius:Q,label:B.valueAtIndexOrDefault(D.label,e,k.data.labels[e])}});var ia=c._model;(!g||!r.animateRotate)&&(e===0?ia.startAngle=o.rotation:ia.startAngle=h.getMeta().data[e-1]._model.endAngle,ia.endAngle=ia.startAngle+ia.circumference),c.pivot()},calculateTotal:function(){var c=this.getDataset(),e=this.getMeta(),g=0,h;return B.each(e.data,function(k,m){h=c.data[m],!isNaN(h)&&!k.hidden&&(g+=Math.abs(h))}),g},calculateCircumference:function(c){var e=this.getMeta().total;return e>0&&!isNaN(c)?Oc*(Math.abs(c)/e):0},getMaxBorderWidth:function(c){var e=this,g=0,h=e.chart,k,m,o,r,p,s,w,z;if(!c){for(k=0,m=h.data.datasets.length;k<m;++k)if(h.isDatasetVisible(k)){o=h.getDatasetMeta(k),c=o.data,k!==e.index&&(p=o.controller);break}}if(!c)return 0;for(k=0,m=c.length;k<m;++k)r=c[k],p?(p._configure(),s=p._resolveDataElementOptions(r,k)):s=r._options,s.borderAlign!=="inner"&&(w=s.borderWidth,z=s.hoverBorderWidth,g=w>g?w:g,g=z>g?z:g);return g},setHoverStyle:function(c){var e=c._model,g=c._options,h=B.getHoverColor;c.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=Tf(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=Tf(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=Tf(g.hoverBorderWidth,g.borderWidth)},_getRingWeightOffset:function(c){for(var e=0,g=0;g<c;++g)this.chart.isDatasetVisible(g)&&(e+=this._getRingWeight(g));return e},_getRingWeight:function(c){return Math.max(Tf(this.chart.data.datasets[c].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});S._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),S._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var oo=fh.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Pc=B.valueOrDefault,gh=B.options.resolve,hh=B.canvas._isPointInArea;S._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});function ih(c,e){var g=c&&c.options.ticks||{},h=g.reverse,k=g.min===void 0?e:0,m=g.max===void 0?e:0;return{start:h?m:k,end:h?k:m}}function po(c,e,g){var h=g/2,k=ih(c,h),m=ih(e,h);return{top:m.end,right:k.end,bottom:m.start,left:k.start}}function qo(c){var e,g,h,k;return B.isObject(c)?(e=c.top,g=c.right,h=c.bottom,k=c.left):e=g=h=k=c,{top:e,right:g,bottom:h,left:k}}var Rj=mb.extend({datasetElementType:Wb.Line,dataElementType:Wb.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(c){var e=this,g=e.getMeta(),h=g.dataset,k=g.data||[],m=e.chart.options,o=e._config,r=e._showLine=Pc(o.showLine,m.showLines),p,s;for(e._xScale=e.getScaleForId(g.xAxisID),e._yScale=e.getScaleForId(g.yAxisID),r&&(o.tension!==void 0&&o.lineTension===void 0&&(o.lineTension=o.tension),h._scale=e._yScale,h._datasetIndex=e.index,h._children=k,h._model=e._resolveDatasetElementOptions(h),h.pivot()),p=0,s=k.length;p<s;++p)e.updateElement(k[p],p,c);for(r&&h._model.tension!==0&&e.updateBezierControlPoints(),p=0,s=k.length;p<s;++p)k[p].pivot()},updateElement:function(c,e,g){var h=this,k=h.getMeta(),m=c.custom||{},o=h.getDataset(),r=h.index,p=o.data[e],s=h._xScale,w=h._yScale,z=k.dataset._model,D,N,Q=h._resolveDataElementOptions(c,e);D=s.getPixelForValue(typeof p==="object"?p:NaN,e,r),N=g?w.getBasePixel():h.calculatePointY(p,e,r),c._xScale=s,c._yScale=w,c._options=Q,c._datasetIndex=r,c._index=e,c._model={x:D,y:N,skip:m.skip||isNaN(D)||isNaN(N),radius:Q.radius,pointStyle:Q.pointStyle,rotation:Q.rotation,backgroundColor:Q.backgroundColor,borderColor:Q.borderColor,borderWidth:Q.borderWidth,tension:Pc(m.tension,z?z.tension:0),steppedLine:z?z.steppedLine:!1,hitRadius:Q.hitRadius}},_resolveDatasetElementOptions:function(c){var e=this,g=e._config,h=c.custom||{},k=e.chart.options,m=k.elements.line,o=mb.prototype._resolveDatasetElementOptions.apply(e,arguments);return o.spanGaps=Pc(g.spanGaps,k.spanGaps),o.tension=Pc(g.lineTension,m.tension),o.steppedLine=gh([h.steppedLine,g.steppedLine,m.stepped]),o.clip=qo(Pc(g.clip,po(e._xScale,e._yScale,o.borderWidth))),o},calculatePointY:function(c,e,g){var h=this,k=h.chart,m=h._yScale,o=0,r=0,p,s,w,z,D,N,Q;if(m.options.stacked){for(D=+m.getRightValue(c),N=k._getSortedVisibleDatasetMetas(),Q=N.length,p=0;p<Q;++p){w=N[p];if(w.index===g)break;s=k.data.datasets[w.index],w.type==="line"&&w.yAxisID===m.id&&(z=+m.getRightValue(s.data[e]),z<0?r+=z||0:o+=z||0)}return D<0?m.getPixelForValue(r+D):m.getPixelForValue(o+D)}return m.getPixelForValue(c)},updateBezierControlPoints:function(){var c=this,e=c.chart,g=c.getMeta(),h=g.dataset._model,k=e.chartArea,m=g.data||[],o,r,p,s;h.spanGaps&&(m=m.filter(function(z){return!z._model.skip}));function w(z,D,N){return Math.max(Math.min(z,N),D)}if(h.cubicInterpolationMode==="monotone")B.splineCurveMonotone(m);else for(o=0,r=m.length;o<r;++o)p=m[o]._model,s=B.splineCurve(B.previousItem(m,o)._model,p,B.nextItem(m,o)._model,h.tension),p.controlPointPreviousX=s.previous.x,p.controlPointPreviousY=s.previous.y,p.controlPointNextX=s.next.x,p.controlPointNextY=s.next.y;if(e.options.elements.line.capBezierPoints)for(o=0,r=m.length;o<r;++o)p=m[o]._model,hh(p,k)&&(o>0&&hh(m[o-1]._model,k)&&(p.controlPointPreviousX=w(p.controlPointPreviousX,k.left,k.right),p.controlPointPreviousY=w(p.controlPointPreviousY,k.top,k.bottom)),o<m.length-1&&hh(m[o+1]._model,k)&&(p.controlPointNextX=w(p.controlPointNextX,k.left,k.right),p.controlPointNextY=w(p.controlPointNextY,k.top,k.bottom)))},draw:function(){var c=this,e=c.chart,g=c.getMeta(),h=g.data||[],k=e.chartArea,m=e.canvas,o=0,r=h.length,p;for(c._showLine&&(p=g.dataset._model.clip,B.canvas.clipArea(e.ctx,{left:p.left===!1?0:k.left-p.left,right:p.right===!1?m.width:k.right+p.right,top:p.top===!1?0:k.top-p.top,bottom:p.bottom===!1?m.height:k.bottom+p.bottom}),g.dataset.draw(),B.canvas.unclipArea(e.ctx));o<r;++o)h[o].draw(k)},setHoverStyle:function(c){var e=c._model,g=c._options,h=B.getHoverColor;c.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=Pc(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=Pc(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=Pc(g.hoverBorderWidth,g.borderWidth),e.radius=Pc(g.hoverRadius,g.radius)}}),ro=B.options.resolve;S._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(c){var e=document.createElement("ul"),g=c.data,h=g.datasets,k=g.labels,m,o,r,p;e.setAttribute("class",c.id+"-legend");if(h.length)for(m=0,o=h[0].data.length;m<o;++m)r=e.appendChild(document.createElement("li")),p=r.appendChild(document.createElement("span")),p.style.backgroundColor=h[0].backgroundColor[m],k[m]&&r.appendChild(document.createTextNode(k[m]));return e.outerHTML},legend:{labels:{generateLabels:function(c){var e=c.data;return e.labels.length&&e.datasets.length?e.labels.map(function(g,h){var k=c.getDatasetMeta(0),m=k.controller.getStyle(h);return{text:g,fillStyle:m.backgroundColor,strokeStyle:m.borderColor,lineWidth:m.borderWidth,hidden:isNaN(e.datasets[0].data[h])||k.data[h].hidden,index:h}}):[]}},onClick:function(c,e){var g=e.index,h=this.chart,k,m,o;for(k=0,m=(h.data.datasets||[]).length;k<m;++k)o=h.getDatasetMeta(k),o.data[g].hidden=!o.data[g].hidden;h.update()}},tooltips:{callbacks:{title:function(){return""},label:function(c,e){return e.labels[c.index]+": "+c.yLabel}}}});var so=mb.extend({dataElementType:Wb.Arc,linkScales:B.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(c){var e=this,g=e.getDataset(),h=e.getMeta(),k=e.chart.options.startAngle||0,m=e._starts=[],o=e._angles=[],r=h.data,p,s,w;for(e._updateRadius(),h.count=e.countVisibleElements(),p=0,s=g.data.length;p<s;p++)m[p]=k,w=e._computeAngle(p),o[p]=w,k+=w;for(p=0,s=r.length;p<s;++p)r[p]._options=e._resolveDataElementOptions(r[p],p),e.updateElement(r[p],p,c)},_updateRadius:function(){var c=this,e=c.chart,g=e.chartArea,h=e.options,k=Math.min(g.right-g.left,g.bottom-g.top);e.outerRadius=Math.max(k/2,0),e.innerRadius=Math.max(h.cutoutPercentage?e.outerRadius/100*h.cutoutPercentage:1,0),e.radiusLength=(e.outerRadius-e.innerRadius)/e.getVisibleDatasetCount(),c.outerRadius=e.outerRadius-e.radiusLength*c.index,c.innerRadius=c.outerRadius-e.radiusLength},updateElement:function(c,e,g){var h=this,k=h.chart,m=h.getDataset(),o=k.options,r=o.animation,p=k.scale,s=k.data.labels,w=p.xCenter,z=p.yCenter,D=o.startAngle,N=c.hidden?0:p.getDistanceFromCenterForValue(m.data[e]),Q=h._starts[e],T=Q+(c.hidden?0:h._angles[e]),Z=r.animateScale?0:p.getDistanceFromCenterForValue(m.data[e]),ia=c._options||{};B.extend(c,{_datasetIndex:h.index,_index:e,_scale:p,_model:{backgroundColor:ia.backgroundColor,borderColor:ia.borderColor,borderWidth:ia.borderWidth,borderAlign:ia.borderAlign,x:w,y:z,innerRadius:0,outerRadius:g?Z:N,startAngle:g&&r.animateRotate?D:Q,endAngle:g&&r.animateRotate?D:T,label:B.valueAtIndexOrDefault(s,e,s[e])}}),c.pivot()},countVisibleElements:function(){var c=this.getDataset(),e=this.getMeta(),g=0;return B.each(e.data,function(h,k){!isNaN(c.data[k])&&!h.hidden&&g++}),g},setHoverStyle:function(c){var e=c._model,g=c._options,h=B.getHoverColor,k=B.valueOrDefault;c.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth},e.backgroundColor=k(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=k(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=k(g.hoverBorderWidth,g.borderWidth)},_computeAngle:function(c){var e=this,g=this.getMeta().count,h=e.getDataset(),k=e.getMeta();if(isNaN(h.data[c])||k.data[c].hidden)return 0;var m={chart:e.chart,dataIndex:c,dataset:h,datasetIndex:e.index};return ro([e.chart.options.elements.arc.angle,2*Math.PI/g],m,c)}});S._set("pie",B.clone(S.doughnut)),S._set("pie",{cutoutPercentage:0});var to=Qj,yd=B.valueOrDefault;S._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var uo=mb.extend({datasetElementType:Wb.Line,dataElementType:Wb.Point,linkScales:B.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(c){var e=this,g=e.getMeta(),h=g.dataset,k=g.data||[],m=e.chart.scale,o=e._config,r,p;for(o.tension!==void 0&&o.lineTension===void 0&&(o.lineTension=o.tension),h._scale=m,h._datasetIndex=e.index,h._children=k,h._loop=!0,h._model=e._resolveDatasetElementOptions(h),h.pivot(),r=0,p=k.length;r<p;++r)e.updateElement(k[r],r,c);for(e.updateBezierControlPoints(),r=0,p=k.length;r<p;++r)k[r].pivot()},updateElement:function(c,e,g){var h=this,k=c.custom||{},m=h.getDataset(),o=h.chart.scale,r=o.getPointPositionForValue(e,m.data[e]),p=h._resolveDataElementOptions(c,e),s=h.getMeta().dataset._model,w=g?o.xCenter:r.x,z=g?o.yCenter:r.y;c._scale=o,c._options=p,c._datasetIndex=h.index,c._index=e,c._model={x:w,y:z,skip:k.skip||isNaN(w)||isNaN(z),radius:p.radius,pointStyle:p.pointStyle,rotation:p.rotation,backgroundColor:p.backgroundColor,borderColor:p.borderColor,borderWidth:p.borderWidth,tension:yd(k.tension,s?s.tension:0),hitRadius:p.hitRadius}},_resolveDatasetElementOptions:function(){var c=this,e=c._config,g=c.chart.options,h=mb.prototype._resolveDatasetElementOptions.apply(c,arguments);return h.spanGaps=yd(e.spanGaps,g.spanGaps),h.tension=yd(e.lineTension,g.elements.line.tension),h},updateBezierControlPoints:function(){var c=this,e=c.getMeta(),g=c.chart.chartArea,h=e.data||[],k,m,o,r;e.dataset._model.spanGaps&&(h=h.filter(function(s){return!s._model.skip}));function p(s,w,z){return Math.max(Math.min(s,z),w)}for(k=0,m=h.length;k<m;++k)o=h[k]._model,r=B.splineCurve(B.previousItem(h,k,!0)._model,o,B.nextItem(h,k,!0)._model,o.tension),o.controlPointPreviousX=p(r.previous.x,g.left,g.right),o.controlPointPreviousY=p(r.previous.y,g.top,g.bottom),o.controlPointNextX=p(r.next.x,g.left,g.right),o.controlPointNextY=p(r.next.y,g.top,g.bottom)},setHoverStyle:function(c){var e=c._model,g=c._options,h=B.getHoverColor;c.$previousStyle={backgroundColor:e.backgroundColor,borderColor:e.borderColor,borderWidth:e.borderWidth,radius:e.radius},e.backgroundColor=yd(g.hoverBackgroundColor,h(g.backgroundColor)),e.borderColor=yd(g.hoverBorderColor,h(g.borderColor)),e.borderWidth=yd(g.hoverBorderWidth,g.borderWidth),e.radius=yd(g.hoverRadius,g.radius)}});S._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(c){return"("+c.xLabel+", "+c.yLabel+")"}}}}),S._set("global",{datasets:{scatter:{showLine:!1}}});var vo=Rj,Sj={bar:fh,bubble:no,doughnut:Qj,horizontalBar:oo,line:Rj,polarArea:so,pie:to,radar:uo,scatter:vo};function zd(c,e){return c.native?{x:c.x,y:c.y}:B.getRelativePosition(c,e)}function Ye(c,e){var g=c._getSortedVisibleDatasetMetas(),h,k,m,o,r,p;for(k=0,o=g.length;k<o;++k)for(h=g[k].data,m=0,r=h.length;m<r;++m)p=h[m],p._view.skip||e(p)}function jh(c,e){var g=[];return Ye(c,function(h){h.inRange(e.x,e.y)&&g.push(h)}),g}function kh(c,e,g,h){var k=Number.POSITIVE_INFINITY,m=[];return Ye(c,function(o){if(g&&!o.inRange(e.x,e.y))return;var r=o.getCenterPoint(),p=h(e,r);p<k?(m=[o],k=p):p===k&&m.push(o)}),m}function lh(c){var e=c.indexOf("x")!==-1,g=c.indexOf("y")!==-1;return function(h,k){var m=e?Math.abs(h.x-k.x):0,o=g?Math.abs(h.y-k.y):0;return Math.sqrt(Math.pow(m,2)+Math.pow(o,2))}}function Ze(c,e,g){var h=zd(e,c);g.axis=g.axis||"x";var k=lh(g.axis),m=g.intersect?jh(c,h):kh(c,h,!1,k),o=[];return m.length?(c._getSortedVisibleDatasetMetas().forEach(function(r){var p=r.data[m[0]._index];p&&!p._view.skip&&o.push(p)}),o):[]}var cd={modes:{single:function(c,e){var g=zd(e,c),h=[];return Ye(c,function(k){if(k.inRange(g.x,g.y))return h.push(k),h}),h.slice(0,1)},label:Ze,index:Ze,dataset:function(c,e,g){var h=zd(e,c);g.axis=g.axis||"xy";var k=lh(g.axis),m=g.intersect?jh(c,h):kh(c,h,!1,k);return m.length>0&&(m=c.getDatasetMeta(m[0]._datasetIndex).data),m},"x-axis":function(c,e){return Ze(c,e,{intersect:!1})},point:function(c,e){var g=zd(e,c);return jh(c,g)},nearest:function(c,e,g){var h=zd(e,c);g.axis=g.axis||"xy";var k=lh(g.axis);return kh(c,h,g.intersect,k)},x:function(c,e,g){var h=zd(e,c),k=[],m=!1;return Ye(c,function(o){o.inXRange(h.x)&&k.push(o),o.inRange(h.x,h.y)&&(m=!0)}),g.intersect&&!m&&(k=[]),k},y:function(c,e,g){var h=zd(e,c),k=[],m=!1;return Ye(c,function(o){o.inYRange(h.y)&&k.push(o),o.inRange(h.x,h.y)&&(m=!0)}),g.intersect&&!m&&(k=[]),k}}},mh=B.extend;function de(c,e){return B.where(c,function(g){return g.pos===e})}function _e(c,e){return c.sort(function(g,h){var k=e?h:g,m=e?g:h;return k.weight===m.weight?k.index-m.index:k.weight-m.weight})}function wo(c){var e=[],g,h,k;for(g=0,h=(c||[]).length;g<h;++g)k=c[g],e.push({index:g,box:k,pos:k.position,horizontal:k.isHorizontal(),weight:k.weight});return e}function xo(c,e){var g,h,k;for(g=0,h=c.length;g<h;++g)k=c[g],k.width=k.horizontal?k.box.fullWidth&&e.availableWidth:e.vBoxMaxWidth,k.height=k.horizontal&&e.hBoxMaxHeight}function yo(c){var e=wo(c),g=_e(de(e,"left"),!0),h=_e(de(e,"right")),k=_e(de(e,"top"),!0),m=_e(de(e,"bottom"));return{leftAndTop:g.concat(k),rightAndBottom:h.concat(m),chartArea:de(e,"chartArea"),vertical:g.concat(h),horizontal:k.concat(m)}}function Tj(c,e,g,h){return Math.max(c[g],e[g])+Math.max(c[h],e[h])}function Uj(c,e,g){var h=g.box,k=c.maxPadding,m,o;g.size&&(c[g.pos]-=g.size),g.size=g.horizontal?h.height:h.width,c[g.pos]+=g.size;if(h.getPadding){var r=h.getPadding();k.top=Math.max(k.top,r.top),k.left=Math.max(k.left,r.left),k.bottom=Math.max(k.bottom,r.bottom),k.right=Math.max(k.right,r.right)}m=e.outerWidth-Tj(k,c,"left","right"),o=e.outerHeight-Tj(k,c,"top","bottom");if(m!==c.w||o!==c.h)return c.w=m,c.h=o,g.horizontal?m!==c.w:o!==c.h}function qb(c){var e=c.maxPadding;function g(h){var k=Math.max(e[h]-c[h],0);return c[h]+=k,k}c.y+=g("top"),c.x+=g("left"),g("right"),g("bottom")}function $e(c,e){var g=e.maxPadding;function h(k){var m={left:0,top:0,right:0,bottom:0};return k.forEach(function(o){m[o]=Math.max(e[o],g[o])}),m}return c?h(["left","right"]):h(["top","bottom"])}function dd(c,e,g){var h=[],k,m,o,r,p,s;for(k=0,m=c.length;k<m;++k)o=c[k],r=o.box,r.update(o.width||e.w,o.height||e.h,$e(o.horizontal,e)),Uj(e,g,o)&&(s=!0,h.length&&(p=!0)),r.fullWidth||h.push(o);return p?dd(h,e,g)||s:s}function Vj(c,e,g){var h=g.padding,k=e.x,m=e.y,o,r,p,s;for(o=0,r=c.length;o<r;++o)p=c[o],s=p.box,p.horizontal?(s.left=s.fullWidth?h.left:e.left,s.right=s.fullWidth?g.outerWidth-h.right:e.left+e.w,s.top=m,s.bottom=m+s.height,s.width=s.right-s.left,m=s.bottom):(s.left=k,s.right=k+s.width,s.top=e.top,s.bottom=e.top+e.h,s.height=s.bottom-s.top,k=s.right);e.x=k,e.y=m}S._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var dc={defaults:{},addBox:function(c,e){c.boxes||(c.boxes=[]),e.fullWidth=e.fullWidth||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw:function(){e.draw.apply(e,arguments)}}]},c.boxes.push(e)},removeBox:function(c,e){var g=c.boxes?c.boxes.indexOf(e):-1;g!==-1&&c.boxes.splice(g,1)},configure:function(c,e,g){for(var h=["fullWidth","position","weight"],k=h.length,m=0,o;m<k;++m)o=h[m],g.hasOwnProperty(o)&&(e[o]=g[o])},update:function(c,e,g){if(!c)return;var h=c.options.layout||{},k=B.options.toPadding(h.padding),m=e-k.width,o=g-k.height,r=yo(c.boxes),p=r.vertical,s=r.horizontal,w=Object.freeze({outerWidth:e,outerHeight:g,padding:k,availableWidth:m,vBoxMaxWidth:m/2/p.length,hBoxMaxHeight:o/2}),z=mh({maxPadding:mh({},k),w:m,h:o,x:k.left,y:k.top},k);xo(p.concat(s),w),dd(p,z,w),dd(s,z,w)&&dd(p,z,w),qb(z),Vj(r.leftAndTop,z,w),z.x+=z.w,z.y+=z.h,Vj(r.rightAndBottom,z,w),c.chartArea={left:z.left,top:z.top,right:z.left+z.w,bottom:z.top+z.h},B.each(r.chartArea,function(D){var N=D.box;mh(N,c.chartArea),N.update(z.w,z.h)})}},zo={acquireContext:function(c){return c&&c.canvas&&(c=c.canvas),c&&c.getContext("2d")||null}},Uf=`/*
 * DOM element rendering detection
 * https://davidwalsh.name/detect-node-insertion
 */
@keyframes chartjs-render-animation {
	from { opacity: 0.99; }
	to { opacity: 1; }
}

.chartjs-render-monitor {
	animation: chartjs-render-animation 0.001s;
}

/*
 * DOM element resizing detection
 * https://github.com/marcj/css-element-queries
 */
.chartjs-size-monitor,
.chartjs-size-monitor-expand,
.chartjs-size-monitor-shrink {
	position: absolute;
	direction: ltr;
	left: 0;
	top: 0;
	right: 0;
	bottom: 0;
	overflow: hidden;
	pointer-events: none;
	visibility: hidden;
	z-index: -1;
}

.chartjs-size-monitor-expand > div {
	position: absolute;
	width: 1000000px;
	height: 1000000px;
	left: 0;
	top: 0;
}

.chartjs-size-monitor-shrink > div {
	position: absolute;
	width: 200%;
	height: 200%;
	left: 0;
	top: 0;
}
`,ed=Object.freeze({__proto__:null,default:Uf}),nh=i(ed),Tb="$chartjs",rc="chartjs-",oh=rc+"size-monitor",Vf=rc+"render-monitor",Ao=rc+"render-animation",Wj=["animationstart","webkitAnimationStart"],Bo={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function af(c,e){var g=B.getStyle(c,e),h=g&&g.match(/^(\d+)(\.\d+)?px$/);return h?Number(h[1]):void 0}function ph(c,e){var g=c.style,h=c.getAttribute("height"),k=c.getAttribute("width");c[Tb]={initial:{height:h,width:k,style:{display:g.display,height:g.height,width:g.width}}},g.display=g.display||"block";if(k===null||k===""){var m=af(c,"width");m!==void 0&&(c.width=m)}if(h===null||h==="")if(c.style.height==="")c.height=c.width/(e.options.aspectRatio||2);else{var o=af(c,"height");m!==void 0&&(c.height=o)}return c}var Co=function(){var c=!1;try{var e=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("e",null,e)}catch(g){}return c}(),Xj=Co?{passive:!0}:!1;function bf(c,e,g){c.addEventListener(e,g,Xj)}function Wf(c,e,g){c.removeEventListener(e,g,Xj)}function qh(c,e,g,h,k){return{type:c,chart:e,native:k||null,x:g!==void 0?g:null,y:h!==void 0?h:null}}function Do(c,e){var g=Bo[c.type]||c.type,h=B.getRelativePosition(c,e);return qh(g,e,h.x,h.y,c)}function Eo(c,e){var g=!1,h=[];return function(){h=Array.prototype.slice.call(arguments),e=e||this,g||(g=!0,B.requestAnimFrame.call(window,function(){g=!1,c.apply(e,h)}))}}function cf(c){var e=document.createElement("div");return e.className=c||"",e}function Fo(c){var e=1e6,g=cf(oh),h=cf(oh+"-expand"),k=cf(oh+"-shrink");h.appendChild(cf()),k.appendChild(cf()),g.appendChild(h),g.appendChild(k),g._reset=function(){h.scrollLeft=e,h.scrollTop=e,k.scrollLeft=e,k.scrollTop=e};var m=function(){g._reset(),c()};return bf(h,"scroll",m.bind(h,"expand")),bf(k,"scroll",m.bind(k,"shrink")),g}function Yj(c,e){var g=c[Tb]||(c[Tb]={}),h=g.renderProxy=function(k){k.animationName===Ao&&e()};B.each(Wj,function(k){bf(c,k,h)}),g.reflow=!!c.offsetParent,c.classList.add(Vf)}function Go(c){var e=c[Tb]||{},g=e.renderProxy;g&&(B.each(Wj,function(h){Wf(c,h,g)}),delete e.renderProxy),c.classList.remove(Vf)}function ee(c,e,g){var h=c[Tb]||(c[Tb]={}),k=h.resizer=Fo(Eo(function(){if(h.resizer){var m=g.options.maintainAspectRatio&&c.parentNode,o=m?m.clientWidth:0;e(qh("resize",g)),m&&m.clientWidth<o&&g.canvas&&e(qh("resize",g))}}));Yj(c,function(){if(h.resizer){var m=c.parentNode;m&&m!==k.parentNode&&m.insertBefore(k,m.firstChild),k._reset()}})}function Ho(c){var e=c[Tb]||{},g=e.resizer;delete e.resizer,Go(c),g&&g.parentNode&&g.parentNode.removeChild(g)}function rh(c,e){var g=c[Tb]||(c[Tb]={});if(!g.containsStyles){g.containsStyles=!0,e=`/* Chart.js */
`+e;var h=document.createElement("style");h.setAttribute("type","text/css"),h.appendChild(document.createTextNode(e)),c.appendChild(h)}}var Zj={disableCSSInjection:!1,_enabled:typeof window!=="undefined"&&typeof document!=="undefined",_ensureLoaded:function(c){if(!this.disableCSSInjection){var e=c.getRootNode?c.getRootNode():document,g=e.host?e:document.head;rh(g,nh)}},acquireContext:function(c,e){typeof c==="string"?c=document.getElementById(c):c.length&&(c=c[0]),c&&c.canvas&&(c=c.canvas);var g=c&&c.getContext&&c.getContext("2d");return g&&g.canvas===c?(this._ensureLoaded(c),ph(c,e),g):null},releaseContext:function(c){var e=c.canvas;if(!e[Tb])return;var g=e[Tb].initial;["height","width"].forEach(function(h){var k=g[h];B.isNullOrUndef(k)?e.removeAttribute(h):e.setAttribute(h,k)}),B.each(g.style||{},function(h,k){e.style[k]=h}),e.width=e.width,delete e[Tb]},addEventListener:function(c,e,g){var h=c.canvas;if(e==="resize"){ee(h,g,c);return}var k=g[Tb]||(g[Tb]={}),m=k.proxies||(k.proxies={}),o=m[c.id+"_"+e]=function(r){g(Do(r,c))};bf(h,e,o)},removeEventListener:function(c,e,g){var h=c.canvas;if(e==="resize"){Ho(h);return}var k=g[Tb]||{},m=k.proxies||{},o=m[c.id+"_"+e];if(!o)return;Wf(h,e,o)}};B.addEvent=bf,B.removeEvent=Wf;var sh=Zj._enabled?Zj:zo,fe=B.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},sh);S._set("global",{plugins:{}});var nb={_plugins:[],_cacheId:0,register:function(c){var e=this._plugins;[].concat(c).forEach(function(g){e.indexOf(g)===-1&&e.push(g)}),this._cacheId++},unregister:function(c){var e=this._plugins;[].concat(c).forEach(function(g){var h=e.indexOf(g);h!==-1&&e.splice(h,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(c,e,g){var h=this.descriptors(c),k=h.length,m,o,r,p,s;for(m=0;m<k;++m){o=h[m],r=o.plugin,s=r[e];if(typeof s==="function"){p=[c].concat(g||[]),p.push(o.options);if(s.apply(r,p)===!1)return!1}}return!0},descriptors:function(c){var e=c.$plugins||(c.$plugins={});if(e.id===this._cacheId)return e.descriptors;var g=[],h=[],k=c&&c.config||{},m=k.options&&k.options.plugins||{};return this._plugins.concat(k.plugins||[]).forEach(function(o){var r=g.indexOf(o);if(r!==-1)return;var p=o.id,s=m[p];if(s===!1)return;s===!0&&(s=B.clone(S.global.plugins[p])),g.push(o),h.push({plugin:o,options:s||{}})}),e.descriptors=h,e.id=this._cacheId,h},_invalidate:function(c){delete c.$plugins}},df={constructors:{},defaults:{},registerScaleType:function(c,e,g){this.constructors[c]=e,this.defaults[c]=B.clone(g)},getScaleConstructor:function(c){return this.constructors.hasOwnProperty(c)?this.constructors[c]:void 0},getScaleDefaults:function(c){return this.defaults.hasOwnProperty(c)?B.merge({},[S.scale,this.defaults[c]]):{}},updateScaleDefaults:function(c,e){var g=this;g.defaults.hasOwnProperty(c)&&(g.defaults[c]=B.extend(g.defaults[c],e))},addScalesToLayout:function(c){B.each(c.scales,function(e){e.fullWidth=e.options.fullWidth,e.position=e.options.position,e.weight=e.options.weight,dc.addBox(c,e)})}},Qc=B.valueOrDefault,Xf=B.rtl.getRtlAdapter;S._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:B.noop,title:function(c,e){var g="",h=e.labels,k=h?h.length:0;if(c.length>0){var m=c[0];m.label?g=m.label:m.xLabel?g=m.xLabel:k>0&&m.index<k&&(g=h[m.index])}return g},afterTitle:B.noop,beforeBody:B.noop,beforeLabel:B.noop,label:function(c,e){var g=e.datasets[c.datasetIndex].label||"";return g&&(g+=": "),B.isNullOrUndef(c.value)?g+=c.yLabel:g+=c.value,g},labelColor:function(c,e){var g=e.getDatasetMeta(c.datasetIndex),h=g.data[c.index],k=h._view;return{borderColor:k.borderColor,backgroundColor:k.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:B.noop,afterBody:B.noop,beforeFooter:B.noop,footer:B.noop,afterFooter:B.noop}}});var _j={average:function(c){if(!c.length)return!1;var e,g,h=0,k=0,m=0;for(e=0,g=c.length;e<g;++e){var o=c[e];if(o&&o.hasValue()){var r=o.tooltipPosition();h+=r.x,k+=r.y,++m}}return{x:h/m,y:k/m}},nearest:function(c,e){var g=e.x,h=e.y,k=Number.POSITIVE_INFINITY,m,o,r;for(m=0,o=c.length;m<o;++m){var p=c[m];if(p&&p.hasValue()){var s=p.getCenterPoint(),w=B.distanceBetweenPoints(e,s);w<k&&(k=w,r=p)}}if(r){var z=r.tooltipPosition();g=z.x,h=z.y}return{x:g,y:h}}};function sc(c,e){return e&&(B.isArray(e)?Array.prototype.push.apply(c,e):c.push(e)),c}function Xa(c){return(typeof c==="string"||c instanceof String)&&c.indexOf(`
`)>-1?c.split(`
`):c}function Io(c){var e=c._xScale,g=c._yScale||c._scale,h=c._index,k=c._datasetIndex,m=c._chart.getDatasetMeta(k).controller,o=m._getIndexScale(),r=m._getValueScale();return{xLabel:e?e.getLabelForIndex(h,k):"",yLabel:g?g.getLabelForIndex(h,k):"",label:o?""+o.getLabelForIndex(h,k):"",value:r?""+r.getLabelForIndex(h,k):"",index:h,datasetIndex:k,x:c._model.x,y:c._model.y}}function $j(c){var e=S.global;return{xPadding:c.xPadding,yPadding:c.yPadding,xAlign:c.xAlign,yAlign:c.yAlign,rtl:c.rtl,textDirection:c.textDirection,bodyFontColor:c.bodyFontColor,_bodyFontFamily:Qc(c.bodyFontFamily,e.defaultFontFamily),_bodyFontStyle:Qc(c.bodyFontStyle,e.defaultFontStyle),_bodyAlign:c.bodyAlign,bodyFontSize:Qc(c.bodyFontSize,e.defaultFontSize),bodySpacing:c.bodySpacing,titleFontColor:c.titleFontColor,_titleFontFamily:Qc(c.titleFontFamily,e.defaultFontFamily),_titleFontStyle:Qc(c.titleFontStyle,e.defaultFontStyle),titleFontSize:Qc(c.titleFontSize,e.defaultFontSize),_titleAlign:c.titleAlign,titleSpacing:c.titleSpacing,titleMarginBottom:c.titleMarginBottom,footerFontColor:c.footerFontColor,_footerFontFamily:Qc(c.footerFontFamily,e.defaultFontFamily),_footerFontStyle:Qc(c.footerFontStyle,e.defaultFontStyle),footerFontSize:Qc(c.footerFontSize,e.defaultFontSize),_footerAlign:c.footerAlign,footerSpacing:c.footerSpacing,footerMarginTop:c.footerMarginTop,caretSize:c.caretSize,cornerRadius:c.cornerRadius,backgroundColor:c.backgroundColor,opacity:0,legendColorBackground:c.multiKeyBackground,displayColors:c.displayColors,borderColor:c.borderColor,borderWidth:c.borderWidth}}function ak(c,e){var g=c._chart.ctx,h=e.yPadding*2,k=0,m=e.body,o=m.reduce(function(Q,T){return Q+T.before.length+T.lines.length+T.after.length},0);o+=e.beforeBody.length+e.afterBody.length;var r=e.title.length,p=e.footer.length,s=e.titleFontSize,w=e.bodyFontSize,z=e.footerFontSize;h+=r*s,h+=r?(r-1)*e.titleSpacing:0,h+=r?e.titleMarginBottom:0,h+=o*w,h+=o?(o-1)*e.bodySpacing:0,h+=p?e.footerMarginTop:0,h+=p*z,h+=p?(p-1)*e.footerSpacing:0;var D=0,N=function(Q){k=Math.max(k,g.measureText(Q).width+D)};return g.font=B.fontString(s,e._titleFontStyle,e._titleFontFamily),B.each(e.title,N),g.font=B.fontString(w,e._bodyFontStyle,e._bodyFontFamily),B.each(e.beforeBody.concat(e.afterBody),N),D=e.displayColors?w+2:0,B.each(m,function(Q){B.each(Q.before,N),B.each(Q.lines,N),B.each(Q.after,N)}),D=0,g.font=B.fontString(z,e._footerFontStyle,e._footerFontFamily),B.each(e.footer,N),k+=2*e.xPadding,{width:k,height:h}}function Jo(c,e){var g=c._model,h=c._chart,k=c._chart.chartArea,m="center",o="center";g.y<e.height?o="top":g.y>h.height-e.height&&(o="bottom");var r,p,s,w,z,D=(k.left+k.right)/2,N=(k.top+k.bottom)/2;o==="center"?(r=function(T){return T<=D},p=function(T){return T>D}):(r=function(T){return T<=e.width/2},p=function(T){return T>=h.width-e.width/2}),s=function(T){return T+e.width+g.caretSize+g.caretPadding>h.width},w=function(T){return T-e.width-g.caretSize-g.caretPadding<0},z=function(T){return T<=N?"top":"bottom"},r(g.x)?(m="left",s(g.x)&&(m="center",o=z(g.y))):p(g.x)&&(m="right",w(g.x)&&(m="center",o=z(g.y)));var Q=c._options;return{xAlign:Q.xAlign?Q.xAlign:m,yAlign:Q.yAlign?Q.yAlign:o}}function Ko(c,e,g,h){var k=c.x,m=c.y,o=c.caretSize,r=c.caretPadding,p=c.cornerRadius,s=g.xAlign,w=g.yAlign,z=o+r,D=p+r;return s==="right"?k-=e.width:s==="center"&&(k-=e.width/2,k+e.width>h.width&&(k=h.width-e.width),k<0&&(k=0)),w==="top"?m+=z:w==="bottom"?m-=e.height+z:m-=e.height/2,w==="center"?s==="left"?k+=z:s==="right"&&(k-=z):s==="left"?k-=D:s==="right"&&(k+=D),{x:k,y:m}}function Yf(c,e){return e==="center"?c.x+c.width/2:e==="right"?c.x+c.width-c.xPadding:c.x+c.xPadding}function ge(c){return sc([],Xa(c))}var Lo=cc.extend({initialize:function(){this._model=$j(this._options),this._lastActive=[]},getTitle:function(){var c=this,e=c._options,g=e.callbacks,h=g.beforeTitle.apply(c,arguments),k=g.title.apply(c,arguments),m=g.afterTitle.apply(c,arguments),o=[];return o=sc(o,Xa(h)),o=sc(o,Xa(k)),o=sc(o,Xa(m)),o},getBeforeBody:function(){return ge(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(c,e){var g=this,h=g._options.callbacks,k=[];return B.each(c,function(m){var o={before:[],lines:[],after:[]};sc(o.before,Xa(h.beforeLabel.call(g,m,e))),sc(o.lines,h.label.call(g,m,e)),sc(o.after,Xa(h.afterLabel.call(g,m,e))),k.push(o)}),k},getAfterBody:function(){return ge(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var c=this,e=c._options.callbacks,g=e.beforeFooter.apply(c,arguments),h=e.footer.apply(c,arguments),k=e.afterFooter.apply(c,arguments),m=[];return m=sc(m,Xa(g)),m=sc(m,Xa(h)),m=sc(m,Xa(k)),m},update:function(c){var e=this,g=e._options,h=e._model,k=e._model=$j(g),m=e._active,o=e._data,r={xAlign:h.xAlign,yAlign:h.yAlign},p={x:h.x,y:h.y},s={width:h.width,height:h.height},w={x:h.caretX,y:h.caretY},z,D;if(m.length){k.opacity=1;var N=[],Q=[];w=_j[g.position].call(e,m,e._eventPosition);var T=[];for(z=0,D=m.length;z<D;++z)T.push(Io(m[z]));g.filter&&(T=T.filter(function(Z){return g.filter(Z,o)})),g.itemSort&&(T=T.sort(function(Z,ia){return g.itemSort(Z,ia,o)})),B.each(T,function(Z){N.push(g.callbacks.labelColor.call(e,Z,e._chart)),Q.push(g.callbacks.labelTextColor.call(e,Z,e._chart))}),k.title=e.getTitle(T,o),k.beforeBody=e.getBeforeBody(T,o),k.body=e.getBody(T,o),k.afterBody=e.getAfterBody(T,o),k.footer=e.getFooter(T,o),k.x=w.x,k.y=w.y,k.caretPadding=g.caretPadding,k.labelColors=N,k.labelTextColors=Q,k.dataPoints=T,s=ak(this,k),r=Jo(this,s),p=Ko(k,s,r,e._chart)}else k.opacity=0;return k.xAlign=r.xAlign,k.yAlign=r.yAlign,k.x=p.x,k.y=p.y,k.width=s.width,k.height=s.height,k.caretX=w.x,k.caretY=w.y,e._model=k,c&&g.custom&&g.custom.call(e,k),e},drawCaret:function(c,e){var g=this._chart.ctx,h=this._view,k=this.getCaretPosition(c,e,h);g.lineTo(k.x1,k.y1),g.lineTo(k.x2,k.y2),g.lineTo(k.x3,k.y3)},getCaretPosition:function(c,e,g){var h,k,m,o,r,p,s=g.caretSize,w=g.cornerRadius,z=g.xAlign,D=g.yAlign,N=c.x,Q=c.y,T=e.width,Z=e.height;if(D==="center")r=Q+Z/2,z==="left"?(h=N,k=h-s,m=h,o=r+s,p=r-s):(h=N+T,k=h+s,m=h,o=r-s,p=r+s);else{z==="left"?(k=N+w+s,h=k-s,m=k+s):z==="right"?(k=N+T-w-s,h=k-s,m=k+s):(k=g.caretX,h=k-s,m=k+s);if(D==="top")o=Q,r=o-s,p=o;else{o=Q+Z,r=o+s,p=o;var ia=m;m=h,h=ia}}return{x1:h,x2:k,x3:m,y1:o,y2:r,y3:p}},drawTitle:function(c,e,g){var h=e.title,k=h.length,m,o,r;if(k){var p=Xf(e.rtl,e.x,e.width);for(c.x=Yf(e,e._titleAlign),g.textAlign=p.textAlign(e._titleAlign),g.textBaseline="middle",m=e.titleFontSize,o=e.titleSpacing,g.fillStyle=e.titleFontColor,g.font=B.fontString(m,e._titleFontStyle,e._titleFontFamily),r=0;r<k;++r)g.fillText(h[r],p.x(c.x),c.y+m/2),c.y+=m+o,r+1===k&&(c.y+=e.titleMarginBottom-o)}},drawBody:function(c,e,g){var h=e.bodyFontSize,k=e.bodySpacing,m=e._bodyAlign,o=e.body,r=e.displayColors,p=0,s=r?Yf(e,"left"):0,w=Xf(e.rtl,e.x,e.width),z=function(Ya){g.fillText(Ya,w.x(c.x+p),c.y+h/2),c.y+=h+k},D,N,Q,T,Z,ia,wa,Aa,Oa=w.textAlign(m);for(g.textAlign=m,g.textBaseline="middle",g.font=B.fontString(h,e._bodyFontStyle,e._bodyFontFamily),c.x=Yf(e,Oa),g.fillStyle=e.bodyFontColor,B.each(e.beforeBody,z),p=r&&Oa!=="right"?m==="center"?h/2+1:h+2:0,Z=0,wa=o.length;Z<wa;++Z){for(D=o[Z],N=e.labelTextColors[Z],Q=e.labelColors[Z],g.fillStyle=N,B.each(D.before,z),T=D.lines,ia=0,Aa=T.length;ia<Aa;++ia){if(r){var Ha=w.x(s);g.fillStyle=e.legendColorBackground,g.fillRect(w.leftForLtr(Ha,h),c.y,h,h),g.lineWidth=1,g.strokeStyle=Q.borderColor,g.strokeRect(w.leftForLtr(Ha,h),c.y,h,h),g.fillStyle=Q.backgroundColor,g.fillRect(w.leftForLtr(w.xPlus(Ha,1),h-2),c.y+1,h-2,h-2),g.fillStyle=N}z(T[ia])}B.each(D.after,z)}p=0,B.each(e.afterBody,z),c.y-=k},drawFooter:function(c,e,g){var h=e.footer,k=h.length,m,o;if(k){var r=Xf(e.rtl,e.x,e.width);for(c.x=Yf(e,e._footerAlign),c.y+=e.footerMarginTop,g.textAlign=r.textAlign(e._footerAlign),g.textBaseline="middle",m=e.footerFontSize,g.fillStyle=e.footerFontColor,g.font=B.fontString(m,e._footerFontStyle,e._footerFontFamily),o=0;o<k;++o)g.fillText(h[o],r.x(c.x),c.y+m/2),c.y+=m+e.footerSpacing}},drawBackground:function(c,e,g,h){g.fillStyle=e.backgroundColor,g.strokeStyle=e.borderColor,g.lineWidth=e.borderWidth;var k=e.xAlign,m=e.yAlign,o=c.x,r=c.y,p=h.width,s=h.height,w=e.cornerRadius;g.beginPath(),g.moveTo(o+w,r),m==="top"&&this.drawCaret(c,h),g.lineTo(o+p-w,r),g.quadraticCurveTo(o+p,r,o+p,r+w),m==="center"&&k==="right"&&this.drawCaret(c,h),g.lineTo(o+p,r+s-w),g.quadraticCurveTo(o+p,r+s,o+p-w,r+s),m==="bottom"&&this.drawCaret(c,h),g.lineTo(o+w,r+s),g.quadraticCurveTo(o,r+s,o,r+s-w),m==="center"&&k==="left"&&this.drawCaret(c,h),g.lineTo(o,r+w),g.quadraticCurveTo(o,r,o+w,r),g.closePath(),g.fill(),e.borderWidth>0&&g.stroke()},draw:function(){var c=this._chart.ctx,e=this._view;if(e.opacity===0)return;var g={width:e.width,height:e.height},h={x:e.x,y:e.y},k=Math.abs(e.opacity<.001)?0:e.opacity,m=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;this._options.enabled&&m&&(c.save(),c.globalAlpha=k,this.drawBackground(h,e,c,g),h.y+=e.yPadding,B.rtl.overrideTextDirection(c,e.textDirection),this.drawTitle(h,e,c),this.drawBody(h,e,c),this.drawFooter(h,e,c),B.rtl.restoreTextDirection(c,e.textDirection),c.restore())},handleEvent:function(c){var e=this,g=e._options,h=!1;return e._lastActive=e._lastActive||[],c.type==="mouseout"?e._active=[]:(e._active=e._chart.getElementsAtEventForMode(c,g.mode,g),g.reverse&&e._active.reverse()),h=!B.arrayEquals(e._active,e._lastActive),h&&(e._lastActive=e._active,(g.enabled||g.custom)&&(e._eventPosition={x:c.x,y:c.y},e.update(!0),e.pivot())),h}}),Mo=_j,th=Lo;th.positioners=Mo;var he=B.valueOrDefault;S._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});function ef(){return B.merge({},[].slice.call(arguments),{merger:function(c,e,g,h){if(c==="xAxes"||c==="yAxes"){var k=g[c].length,m,o,r;for(e[c]||(e[c]=[]),m=0;m<k;++m)r=g[c][m],o=he(r.type,c==="xAxes"?"category":"linear"),m>=e[c].length&&e[c].push({}),!e[c][m].type||r.type&&r.type!==e[c][m].type?B.merge(e[c][m],[df.getScaleDefaults(o),r]):B.merge(e[c][m],r)}else B._merger(c,e,g,h)}})}function ff(){return B.merge({},[].slice.call(arguments),{merger:function(c,e,g,h){var k=e[c]||{},m=g[c];c==="scales"?e[c]=ef(k,m):c==="scale"?e[c]=B.merge(k,[df.getScaleDefaults(m.type),m]):B._merger(c,e,g,h)}})}function No(c){c=c||{};var e=c.data=c.data||{};return e.datasets=e.datasets||[],e.labels=e.labels||[],c.options=ff(S.global,S[c.type],c.options||{}),c}function bk(c){var e=c.options;B.each(c.scales,function(g){dc.removeBox(c,g)}),e=ff(S.global,S[c.config.type],e),c.options=c.config.options=e,c.ensureScalesHaveIDs(),c.buildOrUpdateScales(),c.tooltip._options=e.tooltips,c.tooltip.initialize()}function ck(c,e,g){var h,k=function(m){return m.id===h};do h=e+g++;while(B.findIndex(c,k)>=0);return h}function Zf(c){return c==="top"||c==="bottom"}function _f(c,e){return function(g,h){return g[c]===h[c]?g[e]-h[e]:g[c]-h[c]}}var Ec=function(c,e){return this.construct(c,e),this};B.extend(Ec.prototype,{construct:function(c,e){var g=this;e=No(e);var h=fe.acquireContext(c,e),k=h&&h.canvas,m=k&&k.height,o=k&&k.width;g.id=B.uid(),g.ctx=h,g.canvas=k,g.config=e,g.width=o,g.height=m,g.aspectRatio=m?o/m:null,g.options=e.options,g._bufferedRender=!1,g._layers=[],g.chart=g,g.controller=g,Ec.instances[g.id]=g,Object.defineProperty(g,"data",{get:function(){return g.config.data},set:function(r){g.config.data=r}});if(!h||!k){console.error("Failed to create chart: can't acquire context from the given item");return}g.initialize(),g.update()},initialize:function(){var c=this;return nb.notify(c,"beforeInit"),B.retinaScale(c,c.options.devicePixelRatio),c.bindEvents(),c.options.responsive&&c.resize(!0),c.initToolTip(),nb.notify(c,"afterInit"),c},clear:function(){return B.canvas.clear(this),this},stop:function(){return ch.cancelAnimation(this),this},resize:function(c){var e=this,g=e.options,h=e.canvas,k=g.maintainAspectRatio&&e.aspectRatio||null,m=Math.max(0,Math.floor(B.getMaximumWidth(h))),o=Math.max(0,Math.floor(k?m/k:B.getMaximumHeight(h)));if(e.width===m&&e.height===o)return;h.width=e.width=m,h.height=e.height=o,h.style.width=m+"px",h.style.height=o+"px",B.retinaScale(e,g.devicePixelRatio);if(!c){var r={width:m,height:o};nb.notify(e,"resize",[r]),g.onResize&&g.onResize(e,r),e.stop(),e.update({duration:g.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var c=this.options,e=c.scales||{},g=c.scale;B.each(e.xAxes,function(h,k){h.id||(h.id=ck(e.xAxes,"x-axis-",k))}),B.each(e.yAxes,function(h,k){h.id||(h.id=ck(e.yAxes,"y-axis-",k))}),g&&(g.id=g.id||"scale")},buildOrUpdateScales:function(){var c=this,e=c.options,g=c.scales||{},h=[],k=Object.keys(g).reduce(function(m,o){return m[o]=!1,m},{});e.scales&&(h=h.concat((e.scales.xAxes||[]).map(function(m){return{options:m,dtype:"category",dposition:"bottom"}}),(e.scales.yAxes||[]).map(function(m){return{options:m,dtype:"linear",dposition:"left"}}))),e.scale&&h.push({options:e.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),B.each(h,function(m){var o=m.options,r=o.id,p=he(o.type,m.dtype);Zf(o.position)!==Zf(m.dposition)&&(o.position=m.dposition),k[r]=!0;var s=null;if(r in g&&g[r].type===p)s=g[r],s.options=o,s.ctx=c.ctx,s.chart=c;else{var w=df.getScaleConstructor(p);if(!w)return;s=new w({id:r,type:p,options:o,ctx:c.ctx,chart:c}),g[s.id]=s}s.mergeTicksOptions(),m.isDefault&&(c.scale=s)}),B.each(k,function(m,o){m||delete g[o]}),c.scales=g,df.addScalesToLayout(this)},buildOrUpdateControllers:function(){var c=this,e=[],g=c.data.datasets,h,k;for(h=0,k=g.length;h<k;h++){var m=g[h],o=c.getDatasetMeta(h),r=m.type||c.config.type;o.type&&o.type!==r&&(c.destroyDatasetMeta(h),o=c.getDatasetMeta(h)),o.type=r,o.order=m.order||0,o.index=h;if(o.controller)o.controller.updateIndex(h),o.controller.linkScales();else{var p=Sj[o.type];if(p===void 0)throw new Error('"'+o.type+'" is not a chart type.');o.controller=new p(c,h),e.push(o.controller)}}return e},resetElements:function(){var c=this;B.each(c.data.datasets,function(e,g){c.getDatasetMeta(g).controller.reset()},c)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(c){var e=this,g,h;(!c||typeof c!=="object")&&(c={duration:c,lazy:arguments[1]}),bk(e),nb._invalidate(e);if(nb.notify(e,"beforeUpdate")===!1)return;e.tooltip._data=e.data;var k=e.buildOrUpdateControllers();for(g=0,h=e.data.datasets.length;g<h;g++)e.getDatasetMeta(g).controller.buildOrUpdateElements();e.updateLayout(),e.options.animation&&e.options.animation.duration&&B.each(k,function(m){m.reset()}),e.updateDatasets(),e.tooltip.initialize(),e.lastActive=[],nb.notify(e,"afterUpdate"),e._layers.sort(_f("z","_idx")),e._bufferedRender?e._bufferedRequest={duration:c.duration,easing:c.easing,lazy:c.lazy}:e.render(c)},updateLayout:function(){var c=this;if(nb.notify(c,"beforeLayout")===!1)return;dc.update(this,this.width,this.height),c._layers=[],B.each(c.boxes,function(e){e._configure&&e._configure(),c._layers.push.apply(c._layers,e._layers())},c),c._layers.forEach(function(e,g){e._idx=g}),nb.notify(c,"afterScaleUpdate"),nb.notify(c,"afterLayout")},updateDatasets:function(){var c=this;if(nb.notify(c,"beforeDatasetsUpdate")===!1)return;for(var e=0,g=c.data.datasets.length;e<g;++e)c.updateDataset(e);nb.notify(c,"afterDatasetsUpdate")},updateDataset:function(c){var e=this,g=e.getDatasetMeta(c),h={meta:g,index:c};if(nb.notify(e,"beforeDatasetUpdate",[h])===!1)return;g.controller._update(),nb.notify(e,"afterDatasetUpdate",[h])},render:function(c){var e=this;(!c||typeof c!=="object")&&(c={duration:c,lazy:arguments[1]});var g=e.options.animation,h=he(c.duration,g&&g.duration),k=c.lazy;if(nb.notify(e,"beforeRender")===!1)return;var m=function(r){nb.notify(e,"afterRender"),B.callback(g&&g.onComplete,[r],e)};if(g&&h){var o=new bh({numSteps:h/16.66,easing:c.easing||g.easing,render:function(r,p){var s=B.easing.effects[p.easing],w=p.currentStep,z=w/p.numSteps;r.draw(s(z),z,w)},onAnimationProgress:g.onProgress,onAnimationComplete:m});ch.addAnimation(e,o,h,k)}else e.draw(),m(new bh({numSteps:0,chart:e}));return e},draw:function(c){var e=this,g,h;e.clear(),B.isNullOrUndef(c)&&(c=1),e.transition(c);if(e.width<=0||e.height<=0)return;if(nb.notify(e,"beforeDraw",[c])===!1)return;for(h=e._layers,g=0;g<h.length&&h[g].z<=0;++g)h[g].draw(e.chartArea);for(e.drawDatasets(c);g<h.length;++g)h[g].draw(e.chartArea);e._drawTooltip(c),nb.notify(e,"afterDraw",[c])},transition:function(c){for(var e=this,g=0,h=(e.data.datasets||[]).length;g<h;++g)e.isDatasetVisible(g)&&e.getDatasetMeta(g).controller.transition(c);e.tooltip.transition(c)},_getSortedDatasetMetas:function(c){var e=this,g=e.data.datasets||[],h=[],k,m;for(k=0,m=g.length;k<m;++k)(!c||e.isDatasetVisible(k))&&h.push(e.getDatasetMeta(k));return h.sort(_f("order","index")),h},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(c){var e=this,g,h;if(nb.notify(e,"beforeDatasetsDraw",[c])===!1)return;for(g=e._getSortedVisibleDatasetMetas(),h=g.length-1;h>=0;--h)e.drawDataset(g[h],c);nb.notify(e,"afterDatasetsDraw",[c])},drawDataset:function(c,e){var g=this,h={meta:c,index:c.index,easingValue:e};if(nb.notify(g,"beforeDatasetDraw",[h])===!1)return;c.controller.draw(e),nb.notify(g,"afterDatasetDraw",[h])},_drawTooltip:function(c){var e=this,g=e.tooltip,h={tooltip:g,easingValue:c};if(nb.notify(e,"beforeTooltipDraw",[h])===!1)return;g.draw(),nb.notify(e,"afterTooltipDraw",[h])},getElementAtEvent:function(c){return cd.modes.single(this,c)},getElementsAtEvent:function(c){return cd.modes.label(this,c,{intersect:!0})},getElementsAtXAxis:function(c){return cd.modes["x-axis"](this,c,{intersect:!0})},getElementsAtEventForMode:function(c,e,g){var h=cd.modes[e];return typeof h==="function"?h(this,c,g):[]},getDatasetAtEvent:function(c){return cd.modes.dataset(this,c,{intersect:!0})},getDatasetMeta:function(c){var e=this,g=e.data.datasets[c];g._meta||(g._meta={});var h=g._meta[e.id];return h||(h=g._meta[e.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:g.order||0,index:c}),h},getVisibleDatasetCount:function(){for(var c=0,e=0,g=this.data.datasets.length;e<g;++e)this.isDatasetVisible(e)&&c++;return c},isDatasetVisible:function(c){var e=this.getDatasetMeta(c);return typeof e.hidden==="boolean"?!e.hidden:!this.data.datasets[c].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(c){var e=this.id,g=this.data.datasets[c],h=g._meta&&g._meta[e];h&&(h.controller.destroy(),delete g._meta[e])},destroy:function(){var c=this,e=c.canvas,g,h;for(c.stop(),g=0,h=c.data.datasets.length;g<h;++g)c.destroyDatasetMeta(g);e&&(c.unbindEvents(),B.canvas.clear(c),fe.releaseContext(c.ctx),c.canvas=null,c.ctx=null),nb.notify(c,"destroy"),delete Ec.instances[c.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var c=this;c.tooltip=new th({_chart:c,_chartInstance:c,_data:c.data,_options:c.options.tooltips},c)},bindEvents:function(){var c=this,e=c._listeners={},g=function(){c.eventHandler.apply(c,arguments)};B.each(c.options.events,function(h){fe.addEventListener(c,h,g),e[h]=g}),c.options.responsive&&(g=function(){c.resize()},fe.addEventListener(c,"resize",g),e.resize=g)},unbindEvents:function(){var c=this,e=c._listeners;if(!e)return;delete c._listeners,B.each(e,function(g,h){fe.removeEventListener(c,h,g)})},updateHoverStyle:function(c,e,g){var h=g?"set":"remove",k,m,o;for(m=0,o=c.length;m<o;++m)k=c[m],k&&this.getDatasetMeta(k._datasetIndex).controller[h+"HoverStyle"](k);e==="dataset"&&this.getDatasetMeta(c[0]._datasetIndex).controller["_"+h+"DatasetHoverStyle"]()},eventHandler:function(c){var e=this,g=e.tooltip;if(nb.notify(e,"beforeEvent",[c])===!1)return;e._bufferedRender=!0,e._bufferedRequest=null;var h=e.handleEvent(c);g&&(h=g._start?g.handleEvent(c):h|g.handleEvent(c)),nb.notify(e,"afterEvent",[c]);var k=e._bufferedRequest;return k?e.render(k):h&&!e.animating&&(e.stop(),e.render({duration:e.options.hover.animationDuration,lazy:!0})),e._bufferedRender=!1,e._bufferedRequest=null,e},handleEvent:function(c){var e=this,g=e.options||{},h=g.hover,k=!1;return e.lastActive=e.lastActive||[],c.type==="mouseout"?e.active=[]:e.active=e.getElementsAtEventForMode(c,h.mode,h),B.callback(g.onHover||g.hover.onHover,[c.native,e.active],e),(c.type==="mouseup"||c.type==="click")&&(g.onClick&&g.onClick.call(e,c.native,e.active)),e.lastActive.length&&e.updateHoverStyle(e.lastActive,h.mode,!1),e.active.length&&h.mode&&e.updateHoverStyle(e.active,h.mode,!0),k=!B.arrayEquals(e.active,e.lastActive),e.lastActive=e.active,k}}),Ec.instances={};var Na=Ec;Ec.Controller=Ec,Ec.types={},B.configMerge=ff,B.scaleMerge=ef;var Oo=function(){B.where=function(h,k){if(B.isArray(h)&&Array.prototype.filter)return h.filter(k);var m=[];return B.each(h,function(o){k(o)&&m.push(o)}),m},B.findIndex=Array.prototype.findIndex?function(h,k,m){return h.findIndex(k,m)}:function(h,k,m){m=m===void 0?h:m;for(var o=0,r=h.length;o<r;++o)if(k.call(m,h[o],o,h))return o;return-1},B.findNextWhere=function(h,k,m){B.isNullOrUndef(m)&&(m=-1);for(var o=m+1;o<h.length;o++){var r=h[o];if(k(r))return r}},B.findPreviousWhere=function(h,k,m){B.isNullOrUndef(m)&&(m=h.length);for(var o=m-1;o>=0;o--){var r=h[o];if(k(r))return r}},B.isNumber=function(h){return!isNaN(parseFloat(h))&&isFinite(h)},B.almostEquals=function(h,k,m){return Math.abs(h-k)<m},B.almostWhole=function(h,k){var m=Math.round(h);return m-k<=h&&m+k>=h},B.max=function(h){return h.reduce(function(k,m){return isNaN(m)?k:Math.max(k,m)},Number.NEGATIVE_INFINITY)},B.min=function(h){return h.reduce(function(k,m){return isNaN(m)?k:Math.min(k,m)},Number.POSITIVE_INFINITY)},B.sign=Math.sign?function(h){return Math.sign(h)}:function(h){return h=+h,h===0||isNaN(h)?h:h>0?1:-1},B.toRadians=function(h){return h*(Math.PI/180)},B.toDegrees=function(h){return h*(180/Math.PI)},B._decimalPlaces=function(h){if(!B.isFinite(h))return;for(var k=1,m=0;Math.round(h*k)/k!==h;)k*=10,m++;return m},B.getAngleFromPoint=function(h,k){var m=k.x-h.x,o=k.y-h.y,r=Math.sqrt(m*m+o*o),p=Math.atan2(o,m);return p<-.5*Math.PI&&(p+=2*Math.PI),{angle:p,distance:r}},B.distanceBetweenPoints=function(h,k){return Math.sqrt(Math.pow(k.x-h.x,2)+Math.pow(k.y-h.y,2))},B.aliasPixel=function(h){return h%2===0?0:.5},B._alignPixel=function(h,k,m){var o=h.currentDevicePixelRatio,r=m/2;return Math.round((k-r)*o)/o+r},B.splineCurve=function(h,k,m,o){var r=h.skip?k:h,p=k,s=m.skip?k:m,w=Math.sqrt(Math.pow(p.x-r.x,2)+Math.pow(p.y-r.y,2)),z=Math.sqrt(Math.pow(s.x-p.x,2)+Math.pow(s.y-p.y,2)),D=w/(w+z),N=z/(w+z);D=isNaN(D)?0:D,N=isNaN(N)?0:N;var Q=o*D,T=o*N;return{previous:{x:p.x-Q*(s.x-r.x),y:p.y-Q*(s.y-r.y)},next:{x:p.x+T*(s.x-r.x),y:p.y+T*(s.y-r.y)}}},B.EPSILON=Number.EPSILON||1e-14,B.splineCurveMonotone=function(h){var k=(h||[]).map(function(Z){return{model:Z._model,deltaK:0,mK:0}}),m=k.length,o,r,p,s;for(o=0;o<m;++o){p=k[o];if(p.model.skip)continue;r=o>0?k[o-1]:null,s=o<m-1?k[o+1]:null;if(s&&!s.model.skip){var w=s.model.x-p.model.x;p.deltaK=w!==0?(s.model.y-p.model.y)/w:0}!r||r.model.skip?p.mK=p.deltaK:!s||s.model.skip?p.mK=r.deltaK:this.sign(r.deltaK)!==this.sign(p.deltaK)?p.mK=0:p.mK=(r.deltaK+p.deltaK)/2}var z,D,N,Q;for(o=0;o<m-1;++o){p=k[o],s=k[o+1];if(p.model.skip||s.model.skip)continue;if(B.almostEquals(p.deltaK,0,this.EPSILON)){p.mK=s.mK=0;continue}z=p.mK/p.deltaK,D=s.mK/p.deltaK,Q=Math.pow(z,2)+Math.pow(D,2);if(Q<=9)continue;N=3/Math.sqrt(Q),p.mK=z*N*p.deltaK,s.mK=D*N*p.deltaK}var T;for(o=0;o<m;++o){p=k[o];if(p.model.skip)continue;r=o>0?k[o-1]:null,s=o<m-1?k[o+1]:null,r&&!r.model.skip&&(T=(p.model.x-r.model.x)/3,p.model.controlPointPreviousX=p.model.x-T,p.model.controlPointPreviousY=p.model.y-T*p.mK),s&&!s.model.skip&&(T=(s.model.x-p.model.x)/3,p.model.controlPointNextX=p.model.x+T,p.model.controlPointNextY=p.model.y+T*p.mK)}},B.nextItem=function(h,k,m){return m?k>=h.length-1?h[0]:h[k+1]:k>=h.length-1?h[h.length-1]:h[k+1]},B.previousItem=function(h,k,m){return m?k<=0?h[h.length-1]:h[k-1]:k<=0?h[0]:h[k-1]},B.niceNum=function(h,k){var m=Math.floor(B.log10(h)),o=h/Math.pow(10,m),r;return k?o<1.5?r=1:o<3?r=2:o<7?r=5:r=10:o<=1?r=1:o<=2?r=2:o<=5?r=5:r=10,r*Math.pow(10,m)},B.requestAnimFrame=function(){return typeof window==="undefined"?function(h){h()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(h){return window.setTimeout(h,1e3/60)}}(),B.getRelativePosition=function(h,k){var m,o,r=h.originalEvent||h,p=h.target||h.srcElement,s=p.getBoundingClientRect(),w=r.touches;w&&w.length>0?(m=w[0].clientX,o=w[0].clientY):(m=r.clientX,o=r.clientY);var z=parseFloat(B.getStyle(p,"padding-left")),D=parseFloat(B.getStyle(p,"padding-top")),N=parseFloat(B.getStyle(p,"padding-right")),Q=parseFloat(B.getStyle(p,"padding-bottom")),T=s.right-s.left-z-N,Z=s.bottom-s.top-D-Q;return m=Math.round((m-s.left-z)/T*p.width/k.currentDevicePixelRatio),o=Math.round((o-s.top-D)/Z*p.height/k.currentDevicePixelRatio),{x:m,y:o}};function c(h,k,m){var o;return typeof h==="string"?(o=parseInt(h,10),h.indexOf("%")!==-1&&(o=o/100*k.parentNode[m])):o=h,o}function e(h){return h!==void 0&&h!==null&&h!=="none"}function g(h,k,m){var o=document.defaultView,r=B._getParentNode(h),p=o.getComputedStyle(h)[k],s=o.getComputedStyle(r)[k],w=e(p),z=e(s),D=Number.POSITIVE_INFINITY;return w||z?Math.min(w?c(p,h,m):D,z?c(s,r,m):D):"none"}B.getConstraintWidth=function(h){return g(h,"max-width","clientWidth")},B.getConstraintHeight=function(h){return g(h,"max-height","clientHeight")},B._calculatePadding=function(h,k,m){return k=B.getStyle(h,k),k.indexOf("%")>-1?m*parseInt(k,10)/100:parseInt(k,10)},B._getParentNode=function(h){var k=h.parentNode;return k&&k.toString()==="[object ShadowRoot]"&&(k=k.host),k},B.getMaximumWidth=function(h){var k=B._getParentNode(h);if(!k)return h.clientWidth;var m=k.clientWidth,o=B._calculatePadding(k,"padding-left",m),r=B._calculatePadding(k,"padding-right",m),p=m-o-r,s=B.getConstraintWidth(h);return isNaN(s)?p:Math.min(p,s)},B.getMaximumHeight=function(h){var k=B._getParentNode(h);if(!k)return h.clientHeight;var m=k.clientHeight,o=B._calculatePadding(k,"padding-top",m),r=B._calculatePadding(k,"padding-bottom",m),p=m-o-r,s=B.getConstraintHeight(h);return isNaN(s)?p:Math.min(p,s)},B.getStyle=function(h,k){return h.currentStyle?h.currentStyle[k]:document.defaultView.getComputedStyle(h,null).getPropertyValue(k)},B.retinaScale=function(h,k){var m=h.currentDevicePixelRatio=k||typeof window!=="undefined"&&window.devicePixelRatio||1;if(m===1)return;var o=h.canvas,r=h.height,p=h.width;o.height=r*m,o.width=p*m,h.ctx.scale(m,m),!o.style.height&&!o.style.width&&(o.style.height=r+"px",o.style.width=p+"px")},B.fontString=function(h,k,m){return k+" "+h+"px "+m},B.longestText=function(h,k,m,o){o=o||{};var r=o.data=o.data||{},p=o.garbageCollect=o.garbageCollect||[];o.font!==k&&(r=o.data={},p=o.garbageCollect=[],o.font=k),h.font=k;var s=0,w=m.length,z,D,N,Q,T;for(z=0;z<w;z++){Q=m[z];if(Q!==void 0&&Q!==null&&B.isArray(Q)!==!0)s=B.measureText(h,r,p,s,Q);else if(B.isArray(Q))for(D=0,N=Q.length;D<N;D++)T=Q[D],T!==void 0&&T!==null&&!B.isArray(T)&&(s=B.measureText(h,r,p,s,T))}var Z=p.length/2;if(Z>m.length){for(z=0;z<Z;z++)delete r[p[z]];p.splice(0,Z)}return s},B.measureText=function(h,k,m,o,r){var p=k[r];return p||(p=k[r]=h.measureText(r).width,m.push(r)),p>o&&(o=p),o},B.numberOfLabelLines=function(h){var k=1;return B.each(h,function(m){B.isArray(m)&&(m.length>k&&(k=m.length))}),k},B.color=cb?function(h){return h instanceof CanvasGradient&&(h=S.global.defaultColor),cb(h)}:function(h){return console.error("Color.js not found!"),h},B.getHoverColor=function(h){return h instanceof CanvasPattern||h instanceof CanvasGradient?h:B.color(h).saturate(.5).darken(.1).rgbString()}};function Ad(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function $f(c){this.options=c||{}}B.extend($f.prototype,{formats:Ad,parse:Ad,format:Ad,add:Ad,diff:Ad,startOf:Ad,endOf:Ad,_create:function(c){return c}}),$f.override=function(c){B.extend($f.prototype,c)};var Po=$f,uh={_date:Po},gf={formatters:{values:function(c){return B.isArray(c)?c:""+c},linear:function(c,e,g){var h=g.length>3?g[2]-g[1]:g[1]-g[0];Math.abs(h)>1&&(c!==Math.floor(c)&&(h=c-Math.floor(c)));var k=B.log10(Math.abs(h)),m="";if(c!==0){var o=Math.max(Math.abs(g[0]),Math.abs(g[g.length-1]));if(o<1e-4){var r=B.log10(Math.abs(c)),p=Math.floor(r)-Math.floor(k);p=Math.max(Math.min(p,20),0),m=c.toExponential(p)}else{var s=-1*Math.floor(k);s=Math.max(Math.min(s,20),0),m=c.toFixed(s)}}else m="0";return m},logarithmic:function(c,e,g){var h=c/Math.pow(10,Math.floor(B.log10(c)));return c===0?"0":h===1||h===2||h===5||e===0||e===g.length-1?c.toExponential():""}}},Bd=B.isArray,hf=B.isNullOrUndef,Cd=B.valueOrDefault,Dd=B.valueAtIndexOrDefault;S._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:gf.formatters.values,minor:{},major:{}}});function Qo(c,e){for(var g=[],h=c.length/e,k=0,m=c.length;k<m;k+=h)g.push(c[Math.floor(k)]);return g}function Ro(c,e,g){var h=c.getTicks().length,k=Math.min(e,h-1),m=c.getPixelForTick(k),o=c._startPixel,r=c._endPixel,p=1e-6,s;if(g){h===1?s=Math.max(m-o,r-m):e===0?s=(c.getPixelForTick(1)-m)/2:s=(m-c.getPixelForTick(k-1))/2,m+=k<e?s:-s;if(m<o-p||m>r+p)return}return m}function tc(c,e){B.each(c,function(g){var h=g.gc,k=h.length/2,m;if(k>e){for(m=0;m<k;++m)delete g.data[h[m]];h.splice(0,k)}})}function Ed(c,e,g,h){var k=g.length,m=[],o=[],r=[],p,s,w,z,D,N,Q,T,Z,ia,wa,Aa,Oa;for(p=0;p<k;++p){z=g[p].label,D=g[p].major?e.major:e.minor,c.font=N=D.string,Q=h[N]=h[N]||{data:{},gc:[]},T=D.lineHeight,Z=ia=0;if(!hf(z)&&!Bd(z))Z=B.measureText(c,Q.data,Q.gc,Z,z),ia=T;else if(Bd(z))for(s=0,w=z.length;s<w;++s)wa=z[s],!hf(wa)&&!Bd(wa)&&(Z=B.measureText(c,Q.data,Q.gc,Z,wa),ia+=T);m.push(Z),o.push(ia),r.push(T/2)}tc(h,k),Aa=m.indexOf(Math.max.apply(null,m)),Oa=o.indexOf(Math.max.apply(null,o));function Ha(Ya){return{width:m[Ya]||0,height:o[Ya]||0,offset:r[Ya]||0}}return{first:Ha(0),last:Ha(k-1),widest:Ha(Aa),highest:Ha(Oa)}}function ie(c){return c.drawTicks?c.tickMarkLength:0}function vh(c){var e,g;return c.display?(e=B.options._parseFont(c),g=B.options.toPadding(c.padding),e.lineHeight+g.height):0}function wh(c,e){return B.extend(B.options._parseFont({fontFamily:Cd(e.fontFamily,c.fontFamily),fontSize:Cd(e.fontSize,c.fontSize),fontStyle:Cd(e.fontStyle,c.fontStyle),lineHeight:Cd(e.lineHeight,c.lineHeight)}),{color:B.options.resolve([e.fontColor,c.fontColor,S.global.defaultFontColor])})}function ag(c){var e=wh(c,c.minor),g=c.major.enabled?wh(c,c.major):e;return{minor:e,major:g}}function xh(c){var e=[],g,h,k;for(h=0,k=c.length;h<k;++h)g=c[h],typeof g._index!=="undefined"&&e.push(g);return e}function So(c){var e=c.length,g,h;if(e<2)return!1;for(h=c[0],g=1;g<e;++g)if(c[g]-c[g-1]!==h)return!1;return h}function dk(c,e,g,h){var k=So(c),m=(e.length-1)/h,o,r,p,s;if(!k)return Math.max(m,1);for(o=B.math._factorize(k),p=0,s=o.length-1;p<s;p++){r=o[p];if(r>m)return r}return Math.max(m,1)}function To(c){var e=[],g,h;for(g=0,h=c.length;g<h;g++)c[g].major&&e.push(g);return e}function Uo(c,e,g){var h=0,k=e[0],m,o;for(g=Math.ceil(g),m=0;m<c.length;m++)o=c[m],m===k?(o._index=m,h++,k=e[h*g]):delete o.label}function bg(c,e,g,h){var k=Cd(g,0),m=Math.min(Cd(h,c.length),c.length),o=0,r,p,s,w;for(e=Math.ceil(e),h&&(r=h-g,e=r/Math.floor(r/e)),w=k;w<0;)o++,w=Math.round(k+o*e);for(p=Math.max(k,0);p<m;p++)s=c[p],p===w?(s._index=p,o++,w=Math.round(k+o*e)):delete s.label}var yh=cc.extend({zeroLineIndex:0,getPadding:function(){var c=this;return{left:c.paddingLeft||0,top:c.paddingTop||0,right:c.paddingRight||0,bottom:c.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var c=this.chart.data;return this.options.labels||(this.isHorizontal()?c.xLabels:c.yLabels)||c.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){B.callback(this.options.beforeUpdate,[this])},update:function(c,e,g){var h=this,k=h.options.ticks,m=k.sampleSize,o,r,p,s,w;h.beforeUpdate(),h.maxWidth=c,h.maxHeight=e,h.margins=B.extend({left:0,right:0,top:0,bottom:0},g),h._ticks=null,h.ticks=null,h._labelSizes=null,h._maxLabelLines=0,h.longestLabelWidth=0,h.longestTextCache=h.longestTextCache||{},h._gridLineItems=null,h._labelItems=null,h.beforeSetDimensions(),h.setDimensions(),h.afterSetDimensions(),h.beforeDataLimits(),h.determineDataLimits(),h.afterDataLimits(),h.beforeBuildTicks(),s=h.buildTicks()||[],s=h.afterBuildTicks(s)||s;if((!s||!s.length)&&h.ticks)for(s=[],o=0,r=h.ticks.length;o<r;++o)s.push({value:h.ticks[o],major:!1});return h._ticks=s,w=m<s.length,p=h._convertTicksToLabels(w?Qo(s,m):s),h._configure(),h.beforeCalculateTickRotation(),h.calculateTickRotation(),h.afterCalculateTickRotation(),h.beforeFit(),h.fit(),h.afterFit(),h._ticksToDraw=k.display&&(k.autoSkip||k.source==="auto")?h._autoSkip(s):s,w&&(p=h._convertTicksToLabels(h._ticksToDraw)),h.ticks=p,h.afterUpdate(),h.minSize},_configure:function(){var c=this,e=c.options.ticks.reverse,g,h;c.isHorizontal()?(g=c.left,h=c.right):(g=c.top,h=c.bottom,e=!e),c._startPixel=g,c._endPixel=h,c._reversePixels=e,c._length=h-g},afterUpdate:function(){B.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){B.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var c=this;c.isHorizontal()?(c.width=c.maxWidth,c.left=0,c.right=c.width):(c.height=c.maxHeight,c.top=0,c.bottom=c.height),c.paddingLeft=0,c.paddingTop=0,c.paddingRight=0,c.paddingBottom=0},afterSetDimensions:function(){B.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){B.callback(this.options.beforeDataLimits,[this])},determineDataLimits:B.noop,afterDataLimits:function(){B.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){B.callback(this.options.beforeBuildTicks,[this])},buildTicks:B.noop,afterBuildTicks:function(c){var e=this;return Bd(c)&&c.length?B.callback(e.options.afterBuildTicks,[e,c]):(e.ticks=B.callback(e.options.afterBuildTicks,[e,e.ticks])||e.ticks,c)},beforeTickToLabelConversion:function(){B.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var c=this,e=c.options.ticks;c.ticks=c.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){B.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){B.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var c=this,e=c.options,g=e.ticks,h=c.getTicks().length,k=g.minRotation||0,m=g.maxRotation,o=k,r,p,s,w,z,D,N;if(!c._isVisible()||!g.display||k>=m||h<=1||!c.isHorizontal()){c.labelRotation=k;return}r=c._getLabelSizes(),p=r.widest.width,s=r.highest.height-r.highest.offset,w=Math.min(c.maxWidth,c.chart.width-p),z=e.offset?c.maxWidth/h:w/(h-1),p+6>z&&(z=w/(h-(e.offset?.5:1)),D=c.maxHeight-ie(e.gridLines)-g.padding-vh(e.scaleLabel),N=Math.sqrt(p*p+s*s),o=B.toDegrees(Math.min(Math.asin(Math.min((r.highest.height+6)/z,1)),Math.asin(Math.min(D/N,1))-Math.asin(s/N))),o=Math.max(k,Math.min(m,o))),c.labelRotation=o},afterCalculateTickRotation:function(){B.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){B.callback(this.options.beforeFit,[this])},fit:function(){var c=this,e=c.minSize={width:0,height:0},g=c.chart,h=c.options,k=h.ticks,m=h.scaleLabel,o=h.gridLines,r=c._isVisible(),p=h.position==="bottom",s=c.isHorizontal();s?e.width=c.maxWidth:r&&(e.width=ie(o)+vh(m)),s?r&&(e.height=ie(o)+vh(m)):e.height=c.maxHeight;if(k.display&&r){var w=ag(k),z=c._getLabelSizes(),D=z.first,N=z.last,Q=z.widest,T=z.highest,Z=w.minor.lineHeight*.4,ia=k.padding;if(s){var wa=c.labelRotation!==0,Aa=B.toRadians(c.labelRotation),Oa=Math.cos(Aa),Ha=Math.sin(Aa),Ya=Ha*Q.width+Oa*(T.height-(wa?T.offset:0))+(wa?0:Z);e.height=Math.min(c.maxHeight,e.height+Ya+ia);var ib=c.getPixelForTick(0)-c.left,ab=c.right-c.getPixelForTick(c.getTicks().length-1),db,Kb;wa?(db=p?Oa*D.width+Ha*D.offset:Ha*(D.height-D.offset),Kb=p?Ha*(N.height-N.offset):Oa*N.width+Ha*N.offset):(db=D.width/2,Kb=N.width/2),c.paddingLeft=Math.max((db-ib)*c.width/(c.width-ib),0)+3,c.paddingRight=Math.max((Kb-ab)*c.width/(c.width-ab),0)+3}else{var Fb=k.mirror?0:Q.width+ia+Z;e.width=Math.min(c.maxWidth,e.width+Fb),c.paddingTop=D.height/2,c.paddingBottom=N.height/2}}c.handleMargins(),s?(c.width=c._length=g.width-c.margins.left-c.margins.right,c.height=e.height):(c.width=e.width,c.height=c._length=g.height-c.margins.top-c.margins.bottom)},handleMargins:function(){var c=this;c.margins&&(c.margins.left=Math.max(c.paddingLeft,c.margins.left),c.margins.top=Math.max(c.paddingTop,c.margins.top),c.margins.right=Math.max(c.paddingRight,c.margins.right),c.margins.bottom=Math.max(c.paddingBottom,c.margins.bottom))},afterFit:function(){B.callback(this.options.afterFit,[this])},isHorizontal:function(){var c=this.options.position;return c==="top"||c==="bottom"},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(c){if(hf(c))return NaN;if((typeof c==="number"||c instanceof Number)&&!isFinite(c))return NaN;if(c){if(this.isHorizontal()){if(c.x!==void 0)return this.getRightValue(c.x)}else if(c.y!==void 0)return this.getRightValue(c.y)}return c},_convertTicksToLabels:function(c){var e=this,g,h,k;for(e.ticks=c.map(function(m){return m.value}),e.beforeTickToLabelConversion(),g=e.convertTicksToLabels(c)||e.ticks,e.afterTickToLabelConversion(),h=0,k=c.length;h<k;++h)c[h].label=g[h];return g},_getLabelSizes:function(){var c=this,e=c._labelSizes;return e||(c._labelSizes=e=Ed(c.ctx,ag(c.options.ticks),c.getTicks(),c.longestTextCache),c.longestLabelWidth=e.widest.width),e},_parseValue:function(c){var e,g,h,k;return Bd(c)?(e=+this.getRightValue(c[0]),g=+this.getRightValue(c[1]),h=Math.min(e,g),k=Math.max(e,g)):(c=+this.getRightValue(c),e=void 0,g=c,h=c,k=c),{min:h,max:k,start:e,end:g}},_getScaleLabel:function(c){var e=this._parseValue(c);return e.start!==void 0?"["+e.start+", "+e.end+"]":+this.getRightValue(c)},getLabelForIndex:B.noop,getPixelForValue:B.noop,getValueForPixel:B.noop,getPixelForTick:function(c){var e=this,g=e.options.offset,h=e._ticks.length,k=1/Math.max(h-(g?0:1),1);return c<0||c>h-1?null:e.getPixelForDecimal(c*k+(g?k/2:0))},getPixelForDecimal:function(c){var e=this;return e._reversePixels&&(c=1-c),e._startPixel+c*e._length},getDecimalForPixel:function(c){var e=(c-this._startPixel)/this._length;return this._reversePixels?1-e:e},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var c=this,e=c.min,g=c.max;return c.beginAtZero?0:e<0&&g<0?g:e>0&&g>0?e:0},_autoSkip:function(c){var e=this,g=e.options.ticks,h=e._length,k=g.maxTicksLimit||h/e._tickSize()+1,m=g.major.enabled?To(c):[],o=m.length,r=m[0],p=m[o-1],s,w,z,D;if(o>k)return Uo(c,m,o/k),xh(c);z=dk(m,c,h,k);if(o>0){for(s=0,w=o-1;s<w;s++)bg(c,z,m[s],m[s+1]);return D=o>1?(p-r)/(o-1):null,bg(c,z,B.isNullOrUndef(D)?0:r-D,r),bg(c,z,p,B.isNullOrUndef(D)?c.length:p+D),xh(c)}return bg(c,z),xh(c)},_tickSize:function(){var c=this,e=c.options.ticks,g=B.toRadians(c.labelRotation),h=Math.abs(Math.cos(g)),k=Math.abs(Math.sin(g)),m=c._getLabelSizes(),o=e.autoSkipPadding||0,r=m?m.widest.width+o:0,p=m?m.highest.height+o:0;return c.isHorizontal()?p*h>r*k?r/h:p/k:p*k<r*h?p/h:r/k},_isVisible:function(){var c=this,e=c.chart,g=c.options.display,h,k,m;if(g!=="auto")return!!g;for(h=0,k=e.data.datasets.length;h<k;++h)if(e.isDatasetVisible(h)){m=e.getDatasetMeta(h);if(m.xAxisID===c.id||m.yAxisID===c.id)return!0}return!1},_computeGridLineItems:function(c){var e=this,g=e.chart,h=e.options,k=h.gridLines,m=h.position,o=k.offsetGridLines,r=e.isHorizontal(),p=e._ticksToDraw,s=p.length+(o?1:0),w=ie(k),z=[],D=k.drawBorder?Dd(k.lineWidth,0,0):0,N=D/2,Q=B._alignPixel,T=function(ig){return Q(g,ig,D)},Z,ia,wa,Aa,Oa,Ha,Ya,ib,ab,db,Kb,Fb,Bb,Nb,le,gd,hd;for(m==="top"?(Z=T(e.bottom),Ya=e.bottom-w,ab=Z-N,Kb=T(c.top)+N,Bb=c.bottom):m==="bottom"?(Z=T(e.top),Kb=c.top,Bb=T(c.bottom)-N,Ya=Z+N,ab=e.top+w):m==="left"?(Z=T(e.right),Ha=e.right-w,ib=Z-N,db=T(c.left)+N,Fb=c.right):(Z=T(e.left),db=c.left,Fb=T(c.right)-N,Ha=Z+N,ib=e.left+w),ia=0;ia<s;++ia){wa=p[ia]||{};if(hf(wa.label)&&ia<p.length)continue;ia===e.zeroLineIndex&&h.offset===o?(Nb=k.zeroLineWidth,le=k.zeroLineColor,gd=k.zeroLineBorderDash||[],hd=k.zeroLineBorderDashOffset||0):(Nb=Dd(k.lineWidth,ia,1),le=Dd(k.color,ia,"rgba(0,0,0,0.1)"),gd=k.borderDash||[],hd=k.borderDashOffset||0),Aa=Ro(e,wa._index||ia,o);if(Aa===void 0)continue;Oa=Q(g,Aa,Nb),r?Ha=ib=db=Fb=Oa:Ya=ab=Kb=Bb=Oa,z.push({tx1:Ha,ty1:Ya,tx2:ib,ty2:ab,x1:db,y1:Kb,x2:Fb,y2:Bb,width:Nb,color:le,borderDash:gd,borderDashOffset:hd})}return z.ticksLength=s,z.borderValue=Z,z},_computeLabelItems:function(){var c=this,e=c.options,g=e.ticks,h=e.position,k=g.mirror,m=c.isHorizontal(),o=c._ticksToDraw,r=ag(g),p=g.padding,s=ie(e.gridLines),w=-B.toRadians(c.labelRotation),z=[],D,N,Q,T,Z,ia,wa,Aa,Oa,Ha,Ya,ib;for(h==="top"?(ia=c.bottom-s-p,wa=w?"left":"center"):h==="bottom"?(ia=c.top+s+p,wa=w?"right":"center"):h==="left"?(Z=c.right-(k?0:s)-p,wa=k?"left":"right"):(Z=c.left+(k?0:s)+p,wa=k?"right":"left"),D=0,N=o.length;D<N;++D){Q=o[D],T=Q.label;if(hf(T))continue;Aa=c.getPixelForTick(Q._index||D)+g.labelOffset,Oa=Q.major?r.major:r.minor,Ha=Oa.lineHeight,Ya=Bd(T)?T.length:1,m?(Z=Aa,ib=h==="top"?((w?1:.5)-Ya)*Ha:(w?0:.5)*Ha):(ia=Aa,ib=(1-Ya)*Ha/2),z.push({x:Z,y:ia,rotation:w,label:T,font:Oa,textOffset:ib,textAlign:wa})}return z},_drawGrid:function(c){var e=this,g=e.options.gridLines;if(!g.display)return;var h=e.ctx,k=e.chart,m=B._alignPixel,o=g.drawBorder?Dd(g.lineWidth,0,0):0,r=e._gridLineItems||(e._gridLineItems=e._computeGridLineItems(c)),p,s,w,z,D;for(w=0,z=r.length;w<z;++w)D=r[w],p=D.width,s=D.color,p&&s&&(h.save(),h.lineWidth=p,h.strokeStyle=s,h.setLineDash&&(h.setLineDash(D.borderDash),h.lineDashOffset=D.borderDashOffset),h.beginPath(),g.drawTicks&&(h.moveTo(D.tx1,D.ty1),h.lineTo(D.tx2,D.ty2)),g.drawOnChartArea&&(h.moveTo(D.x1,D.y1),h.lineTo(D.x2,D.y2)),h.stroke(),h.restore());if(o){var N=o,Q=Dd(g.lineWidth,r.ticksLength-1,1),T=r.borderValue,Z,ia,wa,Aa;e.isHorizontal()?(Z=m(k,e.left,N)-N/2,ia=m(k,e.right,Q)+Q/2,wa=Aa=T):(wa=m(k,e.top,N)-N/2,Aa=m(k,e.bottom,Q)+Q/2,Z=ia=T),h.lineWidth=o,h.strokeStyle=Dd(g.color,0),h.beginPath(),h.moveTo(Z,wa),h.lineTo(ia,Aa),h.stroke()}},_drawLabels:function(){var c=this,e=c.options.ticks;if(!e.display)return;var g=c.ctx,h=c._labelItems||(c._labelItems=c._computeLabelItems()),k,m,o,r,p,s,w,z;for(k=0,o=h.length;k<o;++k){p=h[k],s=p.font,g.save(),g.translate(p.x,p.y),g.rotate(p.rotation),g.font=s.string,g.fillStyle=s.color,g.textBaseline="middle",g.textAlign=p.textAlign,w=p.label,z=p.textOffset;if(Bd(w))for(m=0,r=w.length;m<r;++m)g.fillText(""+w[m],0,z),z+=s.lineHeight;else g.fillText(w,0,z);g.restore()}},_drawTitle:function(){var c=this,e=c.ctx,g=c.options,h=g.scaleLabel;if(!h.display)return;var k=Cd(h.fontColor,S.global.defaultFontColor),m=B.options._parseFont(h),o=B.options.toPadding(h.padding),r=m.lineHeight/2,p=g.position,s=0,w,z;if(c.isHorizontal())w=c.left+c.width/2,z=p==="bottom"?c.bottom-r-o.bottom:c.top+r+o.top;else{var D=p==="left";w=D?c.left+r+o.top:c.right-r-o.top,z=c.top+c.height/2,s=D?-.5*Math.PI:.5*Math.PI}e.save(),e.translate(w,z),e.rotate(s),e.textAlign="center",e.textBaseline="middle",e.fillStyle=k,e.font=m.string,e.fillText(h.labelString,0,0),e.restore()},draw:function(c){var e=this;if(!e._isVisible())return;e._drawGrid(c),e._drawTitle(),e._drawLabels()},_layers:function(){var c=this,e=c.options,g=e.ticks&&e.ticks.z||0,h=e.gridLines&&e.gridLines.z||0;return!c._isVisible()||g===h||c.draw!==c._draw?[{z:g,draw:function(){c.draw.apply(c,arguments)}}]:[{z:h,draw:function(){c._drawGrid.apply(c,arguments),c._drawTitle.apply(c,arguments)}},{z:g,draw:function(){c._drawLabels.apply(c,arguments)}}]},_getMatchingVisibleMetas:function(c){var e=this,g=e.isHorizontal();return e.chart._getSortedVisibleDatasetMetas().filter(function(h){return(!c||h.type===c)&&(g?h.xAxisID===e.id:h.yAxisID===e.id)})}});yh.prototype._draw=yh.prototype.draw;var Xb=yh,zh=B.isNullOrUndef,Vo={position:"bottom"},ek=Xb.extend({determineDataLimits:function(){var c=this,e=c._getLabels(),g=c.options.ticks,h=g.min,k=g.max,m=0,o=e.length-1,r;h!==void 0&&(r=e.indexOf(h),r>=0&&(m=r)),k!==void 0&&(r=e.indexOf(k),r>=0&&(o=r)),c.minIndex=m,c.maxIndex=o,c.min=e[m],c.max=e[o]},buildTicks:function(){var c=this,e=c._getLabels(),g=c.minIndex,h=c.maxIndex;c.ticks=g===0&&h===e.length-1?e:e.slice(g,h+1)},getLabelForIndex:function(c,e){var g=this,h=g.chart;return h.getDatasetMeta(e).controller._getValueScaleId()===g.id?g.getRightValue(h.data.datasets[e].data[c]):g._getLabels()[c]},_configure:function(){var c=this,e=c.options.offset,g=c.ticks;Xb.prototype._configure.call(c),c.isHorizontal()||(c._reversePixels=!c._reversePixels);if(!g)return;c._startValue=c.minIndex-(e?.5:0),c._valueRange=Math.max(g.length-(e?0:1),1)},getPixelForValue:function(c,e,g){var h=this,k,m,o;return!zh(e)&&!zh(g)&&(c=h.chart.data.datasets[g].data[e]),zh(c)||(k=h.isHorizontal()?c.x:c.y),(k!==void 0||c!==void 0&&isNaN(e))&&(m=h._getLabels(),c=B.valueOrDefault(k,c),o=m.indexOf(c),e=o!==-1?o:e,isNaN(e)&&(e=c)),h.getPixelForDecimal((e-h._startValue)/h._valueRange)},getPixelForTick:function(c){var e=this.ticks;return c<0||c>e.length-1?null:this.getPixelForValue(e[c],c+this.minIndex)},getValueForPixel:function(c){var e=this,g=Math.round(e._startValue+e.getDecimalForPixel(c)*e._valueRange);return Math.min(Math.max(g,0),e.ticks.length-1)},getBasePixel:function(){return this.bottom}}),Wo=Vo;ek._defaults=Wo;var Xo=B.noop,Fd=B.isNullOrUndef;function Yo(c,e){var g=[],h=1e-14,k=c.stepSize,m=k||1,o=c.maxTicks-1,r=c.min,p=c.max,s=c.precision,w=e.min,z=e.max,D=B.niceNum((z-w)/o/m)*m,N,Q,T,Z;if(D<h&&Fd(r)&&Fd(p))return[w,z];Z=Math.ceil(z/D)-Math.floor(w/D),Z>o&&(D=B.niceNum(Z*D/o/m)*m),k||Fd(s)?N=Math.pow(10,B._decimalPlaces(D)):(N=Math.pow(10,s),D=Math.ceil(D*N)/N),Q=Math.floor(w/D)*D,T=Math.ceil(z/D)*D,k&&(!Fd(r)&&B.almostWhole(r/D,D/1e3)&&(Q=r),!Fd(p)&&B.almostWhole(p/D,D/1e3)&&(T=p)),Z=(T-Q)/D,B.almostEquals(Z,Math.round(Z),D/1e3)?Z=Math.round(Z):Z=Math.ceil(Z),Q=Math.round(Q*N)/N,T=Math.round(T*N)/N,g.push(Fd(r)?Q:r);for(var ia=1;ia<Z;++ia)g.push(Math.round((Q+ia*D)*N)/N);return g.push(Fd(p)?T:p),g}var cg=Xb.extend({getRightValue:function(c){return typeof c==="string"?+c:Xb.prototype.getRightValue.call(this,c)},handleTickRangeOptions:function(){var c=this,e=c.options,g=e.ticks;if(g.beginAtZero){var h=B.sign(c.min),k=B.sign(c.max);h<0&&k<0?c.max=0:h>0&&k>0&&(c.min=0)}var m=g.min!==void 0||g.suggestedMin!==void 0,o=g.max!==void 0||g.suggestedMax!==void 0;g.min!==void 0?c.min=g.min:g.suggestedMin!==void 0&&(c.min===null?c.min=g.suggestedMin:c.min=Math.min(c.min,g.suggestedMin)),g.max!==void 0?c.max=g.max:g.suggestedMax!==void 0&&(c.max===null?c.max=g.suggestedMax:c.max=Math.max(c.max,g.suggestedMax)),m!==o&&(c.min>=c.max&&(m?c.max=c.min+1:c.min=c.max-1)),c.min===c.max&&(c.max++,g.beginAtZero||c.min--)},getTickLimit:function(){var c=this,e=c.options.ticks,g=e.stepSize,h=e.maxTicksLimit,k;return g?k=Math.ceil(c.max/g)-Math.floor(c.min/g)+1:(k=c._computeTickLimit(),h=h||11),h&&(k=Math.min(h,k)),k},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:Xo,buildTicks:function(){var c=this,e=c.options,g=e.ticks,h=c.getTickLimit();h=Math.max(2,h);var k={maxTicks:h,min:g.min,max:g.max,precision:g.precision,stepSize:B.valueOrDefault(g.fixedStepSize,g.stepSize)},m=c.ticks=Yo(k,c);c.handleDirectionalChanges(),c.max=B.max(m),c.min=B.min(m),g.reverse?(m.reverse(),c.start=c.max,c.end=c.min):(c.start=c.min,c.end=c.max)},convertTicksToLabels:function(){var c=this;c.ticksAsNumbers=c.ticks.slice(),c.zeroLineIndex=c.ticks.indexOf(0),Xb.prototype.convertTicksToLabels.call(c)},_configure:function(){var c=this,e=c.getTicks(),g=c.min,h=c.max,k;Xb.prototype._configure.call(c),c.options.offset&&e.length&&(k=(h-g)/Math.max(e.length-1,1)/2,g-=k,h+=k),c._startValue=g,c._endValue=h,c._valueRange=h-g}}),Zo={position:"left",ticks:{callback:gf.formatters.linear}},dg=0,_o=1;function $o(c,e,g){var h=[g.type,e===void 0&&g.stack===void 0?g.index:"",g.stack].join(".");return c[h]===void 0&&(c[h]={pos:[],neg:[]}),c[h]}function ap(c,e,g,h){var k=c.options,m=k.stacked,o=$o(e,m,g),r=o.pos,p=o.neg,s=h.length,w,z;for(w=0;w<s;++w){z=c._parseValue(h[w]);if(isNaN(z.min)||isNaN(z.max)||g.data[w].hidden)continue;r[w]=r[w]||0,p[w]=p[w]||0,k.relativePoints?r[w]=100:z.min<0||z.max<0?p[w]+=z.min:r[w]+=z.max}}function bp(c,e,g){var h=g.length,k,m;for(k=0;k<h;++k){m=c._parseValue(g[k]);if(isNaN(m.min)||isNaN(m.max)||e.data[k].hidden)continue;c.min=Math.min(c.min,m.min),c.max=Math.max(c.max,m.max)}}var fk=cg.extend({determineDataLimits:function(){var c=this,e=c.options,g=c.chart,h=g.data.datasets,k=c._getMatchingVisibleMetas(),m=e.stacked,o={},r=k.length,p,s,w,z;c.min=Number.POSITIVE_INFINITY,c.max=Number.NEGATIVE_INFINITY;if(m===void 0)for(p=0;!m&&p<r;++p)s=k[p],m=s.stack!==void 0;for(p=0;p<r;++p)s=k[p],w=h[s.index].data,m?ap(c,o,s,w):bp(c,s,w);B.each(o,function(D){z=D.pos.concat(D.neg),c.min=Math.min(c.min,B.min(z)),c.max=Math.max(c.max,B.max(z))}),c.min=B.isFinite(c.min)&&!isNaN(c.min)?c.min:dg,c.max=B.isFinite(c.max)&&!isNaN(c.max)?c.max:_o,c.handleTickRangeOptions()},_computeTickLimit:function(){var c=this,e;return c.isHorizontal()?Math.ceil(c.width/40):(e=B.options._parseFont(c.options.ticks),Math.ceil(c.height/e.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(c,e){return this._getScaleLabel(this.chart.data.datasets[e].data[c])},getPixelForValue:function(c){var e=this;return e.getPixelForDecimal((+e.getRightValue(c)-e._startValue)/e._valueRange)},getValueForPixel:function(c){return this._startValue+this.getDecimalForPixel(c)*this._valueRange},getPixelForTick:function(c){var e=this.ticksAsNumbers;return c<0||c>e.length-1?null:this.getPixelForValue(e[c])}}),cp=Zo;fk._defaults=cp;var Ah=B.valueOrDefault,Yb=B.math.log10;function gk(c,e){var g=[],h=Ah(c.min,Math.pow(10,Math.floor(Yb(e.min)))),k=Math.floor(Yb(e.max)),m=Math.ceil(e.max/Math.pow(10,k)),o,r;h===0?(o=Math.floor(Yb(e.minNotZero)),r=Math.floor(e.minNotZero/Math.pow(10,o)),g.push(h),h=r*Math.pow(10,o)):(o=Math.floor(Yb(h)),r=Math.floor(h/Math.pow(10,o)));var p=o<0?Math.pow(10,Math.abs(o)):1;do g.push(h),++r,r===10&&(r=1,++o,p=o>=0?1:p),h=Math.round(r*Math.pow(10,o)*p)/p;while(o<k||o===k&&r<m);var s=Ah(c.max,h);return g.push(s),g}var hk={position:"left",ticks:{callback:gf.formatters.logarithmic}};function jf(c,e){return B.isFinite(c)&&c>=0?c:e}var kf=Xb.extend({determineDataLimits:function(){var c=this,e=c.options,g=c.chart,h=g.data.datasets,k=c.isHorizontal();function m(Z){return k?Z.xAxisID===c.id:Z.yAxisID===c.id}var o,r,p,s,w,z;c.min=Number.POSITIVE_INFINITY,c.max=Number.NEGATIVE_INFINITY,c.minNotZero=Number.POSITIVE_INFINITY;var D=e.stacked;if(D===void 0)for(o=0;o<h.length;o++){r=g.getDatasetMeta(o);if(g.isDatasetVisible(o)&&m(r)&&r.stack!==void 0){D=!0;break}}if(e.stacked||D){var N={};for(o=0;o<h.length;o++){r=g.getDatasetMeta(o);var Q=[r.type,e.stacked===void 0&&r.stack===void 0?o:"",r.stack].join(".");if(g.isDatasetVisible(o)&&m(r))for(N[Q]===void 0&&(N[Q]=[]),s=h[o].data,w=0,z=s.length;w<z;w++){var T=N[Q];p=c._parseValue(s[w]);if(isNaN(p.min)||isNaN(p.max)||r.data[w].hidden||p.min<0||p.max<0)continue;T[w]=T[w]||0,T[w]+=p.max}}B.each(N,function(Z){if(Z.length>0){var ia=B.min(Z),wa=B.max(Z);c.min=Math.min(c.min,ia),c.max=Math.max(c.max,wa)}})}else for(o=0;o<h.length;o++){r=g.getDatasetMeta(o);if(g.isDatasetVisible(o)&&m(r))for(s=h[o].data,w=0,z=s.length;w<z;w++){p=c._parseValue(s[w]);if(isNaN(p.min)||isNaN(p.max)||r.data[w].hidden||p.min<0||p.max<0)continue;c.min=Math.min(p.min,c.min),c.max=Math.max(p.max,c.max),p.min!==0&&(c.minNotZero=Math.min(p.min,c.minNotZero))}}c.min=B.isFinite(c.min)?c.min:null,c.max=B.isFinite(c.max)?c.max:null,c.minNotZero=B.isFinite(c.minNotZero)?c.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var c=this,e=c.options.ticks,g=1,h=10;c.min=jf(e.min,c.min),c.max=jf(e.max,c.max),c.min===c.max&&(c.min!==0&&c.min!==null?(c.min=Math.pow(10,Math.floor(Yb(c.min))-1),c.max=Math.pow(10,Math.floor(Yb(c.max))+1)):(c.min=g,c.max=h)),c.min===null&&(c.min=Math.pow(10,Math.floor(Yb(c.max))-1)),c.max===null&&(c.max=c.min!==0?Math.pow(10,Math.floor(Yb(c.min))+1):h),c.minNotZero===null&&(c.min>0?c.minNotZero=c.min:c.max<1?c.minNotZero=Math.pow(10,Math.floor(Yb(c.max))):c.minNotZero=g)},buildTicks:function(){var c=this,e=c.options.ticks,g=!c.isHorizontal(),h={min:jf(e.min),max:jf(e.max)},k=c.ticks=gk(h,c);c.max=B.max(k),c.min=B.min(k),e.reverse?(g=!g,c.start=c.max,c.end=c.min):(c.start=c.min,c.end=c.max),g&&k.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),Xb.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(c,e){return this._getScaleLabel(this.chart.data.datasets[e].data[c])},getPixelForTick:function(c){var e=this.tickValues;return c<0||c>e.length-1?null:this.getPixelForValue(e[c])},_getFirstTickValue:function(c){var e=Math.floor(Yb(c)),g=Math.floor(c/Math.pow(10,e));return g*Math.pow(10,e)},_configure:function(){var c=this,e=c.min,g=0;Xb.prototype._configure.call(c),e===0&&(e=c._getFirstTickValue(c.minNotZero),g=Ah(c.options.ticks.fontSize,S.global.defaultFontSize)/c._length),c._startValue=Yb(e),c._valueOffset=g,c._valueRange=(Yb(c.max)-Yb(e))/(1-g)},getPixelForValue:function(c){var e=this,g=0;return c=+e.getRightValue(c),c>e.min&&c>0&&(g=(Yb(c)-e._startValue)/e._valueRange+e._valueOffset),e.getPixelForDecimal(g)},getValueForPixel:function(c){var e=this,g=e.getDecimalForPixel(c);return g===0&&e.min===0?0:Math.pow(10,e._startValue+(g-e._valueOffset)*e._valueRange)}}),je=hk;kf._defaults=je;var Gd=B.valueOrDefault,eg=B.valueAtIndexOrDefault,Hd=B.options.resolve,ik={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:gf.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(c){return c}}};function fg(c){var e=c.ticks;return e.display&&c.display?Gd(e.fontSize,S.global.defaultFontSize)+e.backdropPaddingY*2:0}function dp(c,e,g){return B.isArray(g)?{w:B.longestText(c,c.font,g),h:g.length*e}:{w:c.measureText(g).width,h:e}}function jk(c,e,g,h,k){return c===h||c===k?{start:e-g/2,end:e+g/2}:c<h||c>k?{start:e-g,end:e}:{start:e,end:e+g}}function ep(c){var e=B.options._parseFont(c.options.pointLabels),g={l:0,r:c.width,t:0,b:c.height-c.paddingTop},h={},k,m,o;c.ctx.font=e.string,c._pointLabelSizes=[];var r=c.chart.data.labels.length;for(k=0;k<r;k++){o=c.getPointPosition(k,c.drawingArea+5),m=dp(c.ctx,e.lineHeight,c.pointLabels[k]),c._pointLabelSizes[k]=m;var p=c.getIndexAngle(k),s=B.toDegrees(p)%360,w=jk(s,o.x,m.w,0,180),z=jk(s,o.y,m.h,90,270);w.start<g.l&&(g.l=w.start,h.l=p),w.end>g.r&&(g.r=w.end,h.r=p),z.start<g.t&&(g.t=z.start,h.t=p),z.end>g.b&&(g.b=z.end,h.b=p)}c.setReductions(c.drawingArea,g,h)}function fp(c){return c===0||c===180?"center":c<180?"left":"right"}function gp(c,e,g,h){var k=g.y+h/2,m,o;if(B.isArray(e))for(m=0,o=e.length;m<o;++m)c.fillText(e[m],g.x,k),k+=h;else c.fillText(e,g.x,k)}function hp(c,e,g){c===90||c===270?g.y-=e.h/2:(c>270||c<90)&&(g.y-=e.h)}function ip(c){var e=c.ctx,g=c.options,h=g.pointLabels,k=fg(g),m=c.getDistanceFromCenterForValue(g.ticks.reverse?c.min:c.max),o=B.options._parseFont(h);e.save(),e.font=o.string,e.textBaseline="middle";for(var r=c.chart.data.labels.length-1;r>=0;r--){var p=r===0?k/2:0,s=c.getPointPosition(r,m+p+5),w=eg(h.fontColor,r,S.global.defaultFontColor);e.fillStyle=w;var z=c.getIndexAngle(r),D=B.toDegrees(z);e.textAlign=fp(D),hp(D,c._pointLabelSizes[r],s),gp(e,c.pointLabels[r],s,o.lineHeight)}e.restore()}function jp(c,e,g,h){var k=c.ctx,m=e.circular,o=c.chart.data.labels.length,r=eg(e.color,h-1),p=eg(e.lineWidth,h-1),s;if(!m&&!o||!r||!p)return;k.save(),k.strokeStyle=r,k.lineWidth=p,k.setLineDash&&(k.setLineDash(e.borderDash||[]),k.lineDashOffset=e.borderDashOffset||0),k.beginPath();if(m)k.arc(c.xCenter,c.yCenter,g,0,Math.PI*2);else{s=c.getPointPosition(0,g),k.moveTo(s.x,s.y);for(var w=1;w<o;w++)s=c.getPointPosition(w,g),k.lineTo(s.x,s.y)}k.closePath(),k.stroke(),k.restore()}function gg(c){return B.isNumber(c)?c:0}var kk=cg.extend({setDimensions:function(){var c=this;c.width=c.maxWidth,c.height=c.maxHeight,c.paddingTop=fg(c.options)/2,c.xCenter=Math.floor(c.width/2),c.yCenter=Math.floor((c.height-c.paddingTop)/2),c.drawingArea=Math.min(c.height-c.paddingTop,c.width)/2},determineDataLimits:function(){var c=this,e=c.chart,g=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;B.each(e.data.datasets,function(k,m){if(e.isDatasetVisible(m)){var o=e.getDatasetMeta(m);B.each(k.data,function(r,p){var s=+c.getRightValue(r);if(isNaN(s)||o.data[p].hidden)return;g=Math.min(s,g),h=Math.max(s,h)})}}),c.min=g===Number.POSITIVE_INFINITY?0:g,c.max=h===Number.NEGATIVE_INFINITY?0:h,c.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/fg(this.options))},convertTicksToLabels:function(){var c=this;cg.prototype.convertTicksToLabels.call(c),c.pointLabels=c.chart.data.labels.map(function(){var e=B.callback(c.options.pointLabels.callback,arguments,c);return e||e===0?e:""})},getLabelForIndex:function(c,e){return+this.getRightValue(this.chart.data.datasets[e].data[c])},fit:function(){var c=this,e=c.options;e.display&&e.pointLabels.display?ep(c):c.setCenterPoint(0,0,0,0)},setReductions:function(c,e,g){var h=this,k=e.l/Math.sin(g.l),m=Math.max(e.r-h.width,0)/Math.sin(g.r),o=-e.t/Math.cos(g.t),r=-Math.max(e.b-(h.height-h.paddingTop),0)/Math.cos(g.b);k=gg(k),m=gg(m),o=gg(o),r=gg(r),h.drawingArea=Math.min(Math.floor(c-(k+m)/2),Math.floor(c-(o+r)/2)),h.setCenterPoint(k,m,o,r)},setCenterPoint:function(c,e,g,h){var k=this,m=k.width-e-k.drawingArea,o=c+k.drawingArea,r=g+k.drawingArea,p=k.height-k.paddingTop-h-k.drawingArea;k.xCenter=Math.floor((o+m)/2+k.left),k.yCenter=Math.floor((r+p)/2+k.top+k.paddingTop)},getIndexAngle:function(c){var e=this.chart,g=360/e.data.labels.length,h=e.options||{},k=h.startAngle||0,m=(c*g+k)%360;return(m<0?m+360:m)*Math.PI*2/360},getDistanceFromCenterForValue:function(c){var e=this;if(B.isNullOrUndef(c))return NaN;var g=e.drawingArea/(e.max-e.min);return e.options.ticks.reverse?(e.max-c)*g:(c-e.min)*g},getPointPosition:function(c,e){var g=this,h=g.getIndexAngle(c)-Math.PI/2;return{x:Math.cos(h)*e+g.xCenter,y:Math.sin(h)*e+g.yCenter}},getPointPositionForValue:function(c,e){return this.getPointPosition(c,this.getDistanceFromCenterForValue(e))},getBasePosition:function(c){var e=this,g=e.min,h=e.max;return e.getPointPositionForValue(c||0,e.beginAtZero?0:g<0&&h<0?h:g>0&&h>0?g:0)},_drawGrid:function(){var c=this,e=c.ctx,g=c.options,h=g.gridLines,k=g.angleLines,m=Gd(k.lineWidth,h.lineWidth),o=Gd(k.color,h.color),r,p,s;g.pointLabels.display&&ip(c),h.display&&B.each(c.ticks,function(w,z){z!==0&&(p=c.getDistanceFromCenterForValue(c.ticksAsNumbers[z]),jp(c,h,p,z))});if(k.display&&m&&o){for(e.save(),e.lineWidth=m,e.strokeStyle=o,e.setLineDash&&(e.setLineDash(Hd([k.borderDash,h.borderDash,[]])),e.lineDashOffset=Hd([k.borderDashOffset,h.borderDashOffset,0])),r=c.chart.data.labels.length-1;r>=0;r--)p=c.getDistanceFromCenterForValue(g.ticks.reverse?c.min:c.max),s=c.getPointPosition(r,p),e.beginPath(),e.moveTo(c.xCenter,c.yCenter),e.lineTo(s.x,s.y),e.stroke();e.restore()}},_drawLabels:function(){var c=this,e=c.ctx,g=c.options,h=g.ticks;if(!h.display)return;var k=c.getIndexAngle(0),m=B.options._parseFont(h),o=Gd(h.fontColor,S.global.defaultFontColor),r,p;e.save(),e.font=m.string,e.translate(c.xCenter,c.yCenter),e.rotate(k),e.textAlign="center",e.textBaseline="middle",B.each(c.ticks,function(s,w){if(w===0&&!h.reverse)return;r=c.getDistanceFromCenterForValue(c.ticksAsNumbers[w]),h.showLabelBackdrop&&(p=e.measureText(s).width,e.fillStyle=h.backdropColor,e.fillRect(-p/2-h.backdropPaddingX,-r-m.size/2-h.backdropPaddingY,p+h.backdropPaddingX*2,m.size+h.backdropPaddingY*2)),e.fillStyle=o,e.fillText(s,0,-r)}),e.restore()},_drawTitle:B.noop}),kp=ik;kk._defaults=kp;var Bh=B._deprecated,lk=B.options.resolve,lp=B.valueOrDefault,mk=Number.MIN_SAFE_INTEGER||-9007199254740991,Ch=Number.MAX_SAFE_INTEGER||9007199254740991,hg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Zb=Object.keys(hg);function nk(c,e){return c-e}function mp(c){var e={},g=[],h,k,m;for(h=0,k=c.length;h<k;++h)m=c[h],e[m]||(e[m]=!0,g.push(m));return g}function ok(c){return B.valueOrDefault(c.time.min,c.ticks.min)}function pk(c){return B.valueOrDefault(c.time.max,c.ticks.max)}function Dh(c,e,g,h){if(h==="linear"||!c.length)return[{time:e,pos:0},{time:g,pos:1}];var k=[],m=[e],o,r,p,s,w;for(o=0,r=c.length;o<r;++o)s=c[o],s>e&&s<g&&m.push(s);for(m.push(g),o=0,r=m.length;o<r;++o)w=m[o+1],p=m[o-1],s=m[o],(p===void 0||w===void 0||Math.round((w+p)/2)!==s)&&k.push({time:s,pos:o/(r-1)});return k}function np(c,e,g){for(var h=0,k=c.length-1,m,o,r;h>=0&&h<=k;){m=h+k>>1,o=c[m-1]||null,r=c[m];if(o)if(r[e]<g)h=m+1;else if(o[e]>g)k=m-1;else return{lo:o,hi:r};else return{lo:null,hi:r}}return{lo:r,hi:null}}function ke(c,e,g,h){var k=np(c,e,g),m=k.lo?k.hi?k.lo:c[c.length-2]:c[0],o=k.lo?k.hi?k.hi:c[c.length-1]:c[1],r=o[e]-m[e],p=r?(g-m[e])/r:0,s=(o[h]-m[h])*p;return m[h]+s}function Eh(c,e){var g=c._adapter,h=c.options.time,k=h.parser,m=k||h.format,o=e;return typeof k==="function"&&(o=k(o)),B.isFinite(o)||(o=typeof m==="string"?g.parse(o,m):g.parse(o)),o!==null?+o:(!k&&typeof m==="function"&&(o=m(e),B.isFinite(o)||(o=g.parse(o))),o)}function Rc(c,e){if(B.isNullOrUndef(e))return null;var g=c.options.time,h=Eh(c,c.getRightValue(e));return h===null?h:(g.round&&(h=+c._adapter.startOf(h,g.round)),h)}function lf(c,e,g,h){var k=Zb.length,m,o,r;for(m=Zb.indexOf(c);m<k-1;++m){o=hg[Zb[m]],r=o.steps?o.steps:Ch;if(o.common&&Math.ceil((g-e)/(r*o.size))<=h)return Zb[m]}return Zb[k-1]}function op(c,e,g,h,k){var m,o;for(m=Zb.length-1;m>=Zb.indexOf(g);m--){o=Zb[m];if(hg[o].common&&c._adapter.diff(k,h,o)>=e-1)return o}return Zb[g?Zb.indexOf(g):0]}function pp(c){for(var e=Zb.indexOf(c)+1,g=Zb.length;e<g;++e)if(hg[Zb[e]].common)return Zb[e]}function qp(c,e,g,h){var k=c._adapter,m=c.options,o=m.time,r=o.unit||lf(o.minUnit,e,g,h),p=lk([o.stepSize,o.unitStepSize,1]),s=r==="week"?o.isoWeekday:!1,w=e,z=[],D;s&&(w=+k.startOf(w,"isoWeek",s)),w=+k.startOf(w,s?"day":r);if(k.diff(g,e,r)>1e5*p)throw e+" and "+g+" are too far apart with stepSize of "+p+" "+r;for(D=w;D<g;D=+k.add(D,p,r))z.push(D);return(D===g||m.bounds==="ticks")&&z.push(D),z}function rp(c,e,g,h,k){var m=0,o=0,r,p;return k.offset&&e.length&&(r=ke(c,"time",e[0],"pos"),e.length===1?m=1-r:m=(ke(c,"time",e[1],"pos")-r)/2,p=ke(c,"time",e[e.length-1],"pos"),e.length===1?o=p:o=(p-ke(c,"time",e[e.length-2],"pos"))/2),{start:m,end:o,factor:1/(m+1+o)}}function sp(c,e,g,h){var k=c._adapter,m=+k.startOf(e[0].value,h),o=e[e.length-1].value,r,p;for(r=m;r<=o;r=+k.add(r,1,h))p=g[r],p>=0&&(e[p].major=!0);return e}function qk(c,e,g){var h=[],k={},m=e.length,o,r;for(o=0;o<m;++o)r=e[o],k[r]=o,h.push({value:r,major:!1});return m===0||!g?h:sp(c,h,k,g)}var rk={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}},sk=Xb.extend({initialize:function(){this.mergeTicksOptions(),Xb.prototype.initialize.call(this)},update:function(){var c=this,e=c.options,g=e.time||(e.time={}),h=c._adapter=new uh._date(e.adapters.date);return Bh("time scale",g.format,"time.format","time.parser"),Bh("time scale",g.min,"time.min","ticks.min"),Bh("time scale",g.max,"time.max","ticks.max"),B.mergeIf(g.displayFormats,h.formats()),Xb.prototype.update.apply(c,arguments)},getRightValue:function(c){return c&&c.t!==void 0&&(c=c.t),Xb.prototype.getRightValue.call(this,c)},determineDataLimits:function(){var c=this,e=c.chart,g=c._adapter,h=c.options,k=h.time.unit||"day",m=Ch,o=mk,r=[],p=[],s=[],w,z,D,N,Q,T,Z,ia=c._getLabels();for(w=0,D=ia.length;w<D;++w)s.push(Rc(c,ia[w]));for(w=0,D=(e.data.datasets||[]).length;w<D;++w)if(e.isDatasetVisible(w)){Q=e.data.datasets[w].data;if(B.isObject(Q[0]))for(p[w]=[],z=0,N=Q.length;z<N;++z)T=Rc(c,Q[z]),r.push(T),p[w][z]=T;else p[w]=s.slice(0),Z||(r=r.concat(s),Z=!0)}else p[w]=[];s.length&&(m=Math.min(m,s[0]),o=Math.max(o,s[s.length-1])),r.length&&(r=D>1?mp(r).sort(nk):r.sort(nk),m=Math.min(m,r[0]),o=Math.max(o,r[r.length-1])),m=Rc(c,ok(h))||m,o=Rc(c,pk(h))||o,m=m===Ch?+g.startOf(Date.now(),k):m,o=o===mk?+g.endOf(Date.now(),k)+1:o,c.min=Math.min(m,o),c.max=Math.max(m+1,o),c._table=[],c._timestamps={data:r,datasets:p,labels:s}},buildTicks:function(){var c=this,e=c.min,g=c.max,h=c.options,k=h.ticks,m=h.time,o=c._timestamps,r=[],p=c.getLabelCapacity(e),s=k.source,w=h.distribution,z,D,N;for(s==="data"||s==="auto"&&w==="series"?o=o.data:s==="labels"?o=o.labels:o=qp(c,e,g,p),h.bounds==="ticks"&&o.length&&(e=o[0],g=o[o.length-1]),e=Rc(c,ok(h))||e,g=Rc(c,pk(h))||g,z=0,D=o.length;z<D;++z)N=o[z],N>=e&&N<=g&&r.push(N);return c.min=e,c.max=g,c._unit=m.unit||(k.autoSkip?lf(m.minUnit,c.min,c.max,p):op(c,r.length,m.minUnit,c.min,c.max)),c._majorUnit=!k.major.enabled||c._unit==="year"?void 0:pp(c._unit),c._table=Dh(c._timestamps.data,e,g,w),c._offsets=rp(c._table,r,e,g,h),k.reverse&&r.reverse(),qk(c,r,c._majorUnit)},getLabelForIndex:function(c,e){var g=this,h=g._adapter,k=g.chart.data,m=g.options.time,o=k.labels&&c<k.labels.length?k.labels[c]:"",r=k.datasets[e].data[c];return B.isObject(r)&&(o=g.getRightValue(r)),m.tooltipFormat?h.format(Eh(g,o),m.tooltipFormat):typeof o==="string"?o:h.format(Eh(g,o),m.displayFormats.datetime)},tickFormatFunction:function(c,e,g,h){var k=this,m=k._adapter,o=k.options,r=o.time.displayFormats,p=r[k._unit],s=k._majorUnit,w=r[s],z=g[e],D=o.ticks,N=s&&w&&z&&z.major,Q=m.format(c,h?h:N?w:p),T=N?D.major:D.minor,Z=lk([T.callback,T.userCallback,D.callback,D.userCallback]);return Z?Z(Q,e,g):Q},convertTicksToLabels:function(c){var e=[],g,h;for(g=0,h=c.length;g<h;++g)e.push(this.tickFormatFunction(c[g].value,g,c));return e},getPixelForOffset:function(c){var e=this,g=e._offsets,h=ke(e._table,"time",c,"pos");return e.getPixelForDecimal((g.start+h)*g.factor)},getPixelForValue:function(c,e,g){var h=this,k=null;e!==void 0&&g!==void 0&&(k=h._timestamps.datasets[g][e]),k===null&&(k=Rc(h,c));if(k!==null)return h.getPixelForOffset(k)},getPixelForTick:function(c){var e=this.getTicks();return c>=0&&c<e.length?this.getPixelForOffset(e[c].value):null},getValueForPixel:function(c){var e=this,g=e._offsets,h=e.getDecimalForPixel(c)/g.factor-g.end,k=ke(e._table,"pos",h,"time");return e._adapter._create(k)},_getLabelSize:function(c){var e=this,g=e.options.ticks,h=e.ctx.measureText(c).width,k=B.toRadians(e.isHorizontal()?g.maxRotation:g.minRotation),m=Math.cos(k),o=Math.sin(k),r=lp(g.fontSize,S.global.defaultFontSize);return{w:h*m+r*o,h:h*o+r*m}},getLabelWidth:function(c){return this._getLabelSize(c).w},getLabelCapacity:function(c){var e=this,g=e.options.time,h=g.displayFormats,k=h[g.unit]||h.millisecond,m=e.tickFormatFunction(c,0,qk(e,[c],e._majorUnit),k),o=e._getLabelSize(m),r=Math.floor(e.isHorizontal()?e.width/o.w:e.height/o.h);return e.options.offset&&r--,r>0?r:1}}),tp=rk;sk._defaults=tp;var tk={category:ek,linear:fk,logarithmic:kf,radialLinear:kk,time:sk},up={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};uh._date.override(typeof d==="function"?{_id:"moment",formats:function(){return up},parse:function(c,e){return typeof c==="string"&&typeof e==="string"?c=d(c,e):c instanceof d||(c=d(c)),c.isValid()?c.valueOf():null},format:function(c,e){return d(c).format(e)},add:function(c,e,g){return d(c).add(e,g).valueOf()},diff:function(c,e,g){return d(c).diff(d(e),g)},startOf:function(c,e,g){return c=d(c),e==="isoWeek"?c.isoWeekday(g).valueOf():c.startOf(e).valueOf()},endOf:function(c,e){return d(c).endOf(e).valueOf()},_create:function(c){return d(c)}}:{}),S._set("global",{plugins:{filler:{propagate:!0}}});var vp={dataset:function(c){var e=c.fill,g=c.chart,h=g.getDatasetMeta(e),k=h&&g.isDatasetVisible(e),m=k&&h.dataset._children||[],o=m.length||0;return o?function(r,p){return p<o&&m[p]._view||null}:null},boundary:function(c){var e=c.boundary,g=e?e.x:null,h=e?e.y:null;return B.isArray(e)?function(k,m){return e[m]}:function(k){return{x:g===null?k.x:g,y:h===null?k.y:h}}}};function wp(c,e,g){var h=c._model||{},k=h.fill,m;k===void 0&&(k=!!h.backgroundColor);if(k===!1||k===null)return!1;if(k===!0)return"origin";m=parseFloat(k,10);if(isFinite(m)&&Math.floor(m)===m)return(k[0]==="-"||k[0]==="+")&&(m=e+m),m===e||m<0||m>=g?!1:m;switch(k){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return k;default:return!1}}function fd(c){var e=c.el._model||{},g=c.el._scale||{},h=c.fill,k=null,m;if(isFinite(h))return null;h==="start"?k=e.scaleBottom===void 0?g.bottom:e.scaleBottom:h==="end"?k=e.scaleTop===void 0?g.top:e.scaleTop:e.scaleZero!==void 0?k=e.scaleZero:g.getBasePixel&&(k=g.getBasePixel());if(k!==void 0&&k!==null){if(k.x!==void 0&&k.y!==void 0)return k;if(B.isFinite(k))return m=g.isHorizontal(),{x:m?k:null,y:m?null:k}}return null}function uk(c){var e=c.el._scale,g=e.options,h=e.chart.data.labels.length,k=c.fill,m=[],o,r,p,s,w;if(!h)return null;for(o=g.ticks.reverse?e.max:e.min,r=g.ticks.reverse?e.min:e.max,p=e.getPointPositionForValue(0,o),s=0;s<h;++s)w=k==="start"||k==="end"?e.getPointPositionForValue(s,k==="start"?o:r):e.getBasePosition(s),g.gridLines.circular&&(w.cx=p.x,w.cy=p.y,w.angle=e.getIndexAngle(s)-Math.PI/2),m.push(w);return m}function xp(c){var e=c.el._scale||{};return e.getPointPositionForValue?uk(c):fd(c)}function yp(c,e,g){var h=c[e],k=h.fill,m=[e],o;if(!g)return k;for(;k!==!1&&m.indexOf(k)===-1;){if(!isFinite(k))return k;o=c[k];if(!o)return!1;if(o.visible)return k;m.push(k),k=o.fill}return!1}function zp(c){var e=c.fill,g="dataset";return e===!1?null:(isFinite(e)||(g="boundary"),vp[g](c))}function la(c){return c&&!c.skip}function vk(c,e,g,h,k){var m,o,r,p;if(!h||!k)return;for(c.moveTo(e[0].x,e[0].y),m=1;m<h;++m)B.canvas.lineTo(c,e[m-1],e[m]);if(g[0].angle!==void 0){for(o=g[0].cx,r=g[0].cy,p=Math.sqrt(Math.pow(g[0].x-o,2)+Math.pow(g[0].y-r,2)),m=k-1;m>0;--m)c.arc(o,r,p,g[m].angle,g[m-1].angle,!0);return}for(c.lineTo(g[k-1].x,g[k-1].y),m=k-1;m>0;--m)B.canvas.lineTo(c,g[m],g[m-1],!0)}function Ap(c,e,g,h,k,m){var o=e.length,r=h.spanGaps,p=[],s=[],w=0,z=0,D,N,Q,T,Z,ia,wa,Aa;for(c.beginPath(),D=0,N=o;D<N;++D)Q=D%o,T=e[Q]._view,Z=g(T,Q,h),ia=la(T),wa=la(Z),m&&Aa===void 0&&ia&&(Aa=D+1,N=o+Aa),ia&&wa?(w=p.push(T),z=s.push(Z)):w&&z&&(r?(ia&&p.push(T),wa&&s.push(Z)):(vk(c,p,s,w,z),w=z=0,p=[],s=[]));vk(c,p,s,w,z),c.closePath(),c.fillStyle=k,c.fill()}var wk={id:"filler",afterDatasetsUpdate:function(c,e){var g=(c.data.datasets||[]).length,h=e.propagate,k=[],m,o,r,p;for(o=0;o<g;++o)m=c.getDatasetMeta(o),r=m.dataset,p=null,r&&r._model&&r instanceof Wb.Line&&(p={visible:c.isDatasetVisible(o),fill:wp(r,o,g),chart:c,el:r}),m.$filler=p,k.push(p);for(o=0;o<g;++o){p=k[o];if(!p)continue;p.fill=yp(k,o,h),p.boundary=xp(p),p.mapper=zp(p)}},beforeDatasetsDraw:function(c){var e=c._getSortedVisibleDatasetMetas(),g=c.ctx,h,k,m,o,r,p,s;for(k=e.length-1;k>=0;--k){h=e[k].$filler;if(!h||!h.visible)continue;m=h.el,o=m._view,r=m._children||[],p=h.mapper,s=o.backgroundColor||S.global.defaultColor,p&&s&&r.length&&(B.canvas.clipArea(g,c.chartArea),Ap(g,r,p,o,s,m._loop),B.canvas.unclipArea(g))}}},$a=B.rtl.getRtlAdapter,uc=B.noop,Sc=B.valueOrDefault;S._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(c,e){var g=e.datasetIndex,h=this.chart,k=h.getDatasetMeta(g);k.hidden=k.hidden===null?!h.data.datasets[g].hidden:null,h.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(c){var e=c.data.datasets,g=c.options.legend||{},h=g.labels&&g.labels.usePointStyle;return c._getSortedDatasetMetas().map(function(k){var m=k.controller.getStyle(h?0:void 0);return{text:e[k.index].label,fillStyle:m.backgroundColor,hidden:!c.isDatasetVisible(k.index),lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:m.borderWidth,strokeStyle:m.borderColor,pointStyle:m.pointStyle,rotation:m.rotation,datasetIndex:k.index}},this)}}},legendCallback:function(c){var e=document.createElement("ul"),g=c.data.datasets,h,k,m,o;for(e.setAttribute("class",c.id+"-legend"),h=0,k=g.length;h<k;h++)m=e.appendChild(document.createElement("li")),o=m.appendChild(document.createElement("span")),o.style.backgroundColor=g[h].backgroundColor,g[h].label&&m.appendChild(document.createTextNode(g[h].label));return e.outerHTML}});function mf(c,e){return c.usePointStyle&&c.boxWidth>e?e:c.boxWidth}var xk=cc.extend({initialize:function(c){var e=this;B.extend(e,c),e.legendHitBoxes=[],e._hoveredItem=null,e.doughnutMode=!1},beforeUpdate:uc,update:function(c,e,g){var h=this;return h.beforeUpdate(),h.maxWidth=c,h.maxHeight=e,h.margins=g,h.beforeSetDimensions(),h.setDimensions(),h.afterSetDimensions(),h.beforeBuildLabels(),h.buildLabels(),h.afterBuildLabels(),h.beforeFit(),h.fit(),h.afterFit(),h.afterUpdate(),h.minSize},afterUpdate:uc,beforeSetDimensions:uc,setDimensions:function(){var c=this;c.isHorizontal()?(c.width=c.maxWidth,c.left=0,c.right=c.width):(c.height=c.maxHeight,c.top=0,c.bottom=c.height),c.paddingLeft=0,c.paddingTop=0,c.paddingRight=0,c.paddingBottom=0,c.minSize={width:0,height:0}},afterSetDimensions:uc,beforeBuildLabels:uc,buildLabels:function(){var c=this,e=c.options.labels||{},g=B.callback(e.generateLabels,[c.chart],c)||[];e.filter&&(g=g.filter(function(h){return e.filter(h,c.chart.data)})),c.options.reverse&&g.reverse(),c.legendItems=g},afterBuildLabels:uc,beforeFit:uc,fit:function(){var c=this,e=c.options,g=e.labels,h=e.display,k=c.ctx,m=B.options._parseFont(g),o=m.size,r=c.legendHitBoxes=[],p=c.minSize,s=c.isHorizontal();s?(p.width=c.maxWidth,p.height=h?10:0):(p.width=h?10:0,p.height=c.maxHeight);if(!h){c.width=p.width=c.height=p.height=0;return}k.font=m.string;if(s){var w=c.lineWidths=[0],z=0;k.textAlign="left",k.textBaseline="middle",B.each(c.legendItems,function(wa,Aa){var Oa=mf(g,o),Ha=Oa+o/2+k.measureText(wa.text).width;(Aa===0||w[w.length-1]+Ha+2*g.padding>p.width)&&(z+=o+g.padding,w[w.length-(Aa>0?0:1)]=0),r[Aa]={left:0,top:0,width:Ha,height:o},w[w.length-1]+=Ha+g.padding}),p.height+=z}else{var D=g.padding,N=c.columnWidths=[],Q=c.columnHeights=[],T=g.padding,Z=0,ia=0;B.each(c.legendItems,function(wa,Aa){var Oa=mf(g,o),Ha=Oa+o/2+k.measureText(wa.text).width;Aa>0&&ia+o+2*D>p.height&&(T+=Z+g.padding,N.push(Z),Q.push(ia),Z=0,ia=0),Z=Math.max(Z,Ha),ia+=o+D,r[Aa]={left:0,top:0,width:Ha,height:o}}),T+=Z,N.push(Z),Q.push(ia),p.width+=T}c.width=p.width,c.height=p.height},afterFit:uc,isHorizontal:function(){return this.options.position==="top"||this.options.position==="bottom"},draw:function(){var c=this,e=c.options,g=e.labels,h=S.global,k=h.defaultColor,m=h.elements.line,o=c.height,r=c.columnHeights,p=c.width,s=c.lineWidths;if(!e.display)return;var w=$a(e.rtl,c.left,c.minSize.width),z=c.ctx,D=Sc(g.fontColor,h.defaultFontColor),N=B.options._parseFont(g),Q=N.size,T;z.textAlign=w.textAlign("left"),z.textBaseline="middle",z.lineWidth=.5,z.strokeStyle=D,z.fillStyle=D,z.font=N.string;var Z=mf(g,Q),ia=c.legendHitBoxes,wa=function(ib,ab,db){if(isNaN(Z)||Z<=0)return;z.save();var Kb=Sc(db.lineWidth,m.borderWidth);z.fillStyle=Sc(db.fillStyle,k),z.lineCap=Sc(db.lineCap,m.borderCapStyle),z.lineDashOffset=Sc(db.lineDashOffset,m.borderDashOffset),z.lineJoin=Sc(db.lineJoin,m.borderJoinStyle),z.lineWidth=Kb,z.strokeStyle=Sc(db.strokeStyle,k),z.setLineDash&&z.setLineDash(Sc(db.lineDash,m.borderDash));if(g&&g.usePointStyle){var Fb=Z*Math.SQRT2/2,Bb=w.xPlus(ib,Z/2),Nb=ab+Q/2;B.canvas.drawPoint(z,db.pointStyle,Fb,Bb,Nb,db.rotation)}else z.fillRect(w.leftForLtr(ib,Z),ab,Z,Q),Kb!==0&&z.strokeRect(w.leftForLtr(ib,Z),ab,Z,Q);z.restore()},Aa=function(ib,ab,db,Kb){var Fb=Q/2,Bb=w.xPlus(ib,Z+Fb),Nb=ab+Fb;z.fillText(db.text,Bb,Nb),db.hidden&&(z.beginPath(),z.lineWidth=2,z.moveTo(Bb,Nb),z.lineTo(w.xPlus(Bb,Kb),Nb),z.stroke())},Oa=function(ib,ab){switch(e.align){case"start":return g.padding;case"end":return ib-ab;default:return(ib-ab+g.padding)/2}},Ha=c.isHorizontal();Ha?T={x:c.left+Oa(p,s[0]),y:c.top+g.padding,line:0}:T={x:c.left+g.padding,y:c.top+Oa(o,r[0]),line:0},B.rtl.overrideTextDirection(c.ctx,e.textDirection);var Ya=Q+g.padding;B.each(c.legendItems,function(ib,ab){var db=z.measureText(ib.text).width,Kb=Z+Q/2+db,Fb=T.x,Bb=T.y;w.setWidth(c.minSize.width),Ha?ab>0&&Fb+Kb+g.padding>c.left+c.minSize.width&&(Bb=T.y+=Ya,T.line++,Fb=T.x=c.left+Oa(p,s[T.line])):ab>0&&Bb+Ya>c.top+c.minSize.height&&(Fb=T.x=Fb+c.columnWidths[T.line]+g.padding,T.line++,Bb=T.y=c.top+Oa(o,r[T.line]));var Nb=w.x(Fb);wa(Nb,Bb,ib),ia[ab].left=w.leftForLtr(Nb,ia[ab].width),ia[ab].top=Bb,Aa(Nb,Bb,ib,db),Ha?T.x+=Kb+g.padding:T.y+=Ya}),B.rtl.restoreTextDirection(c.ctx,e.textDirection)},_getLegendItemAt:function(c,e){var g=this,h,k,m;if(c>=g.left&&c<=g.right&&e>=g.top&&e<=g.bottom)for(m=g.legendHitBoxes,h=0;h<m.length;++h){k=m[h];if(c>=k.left&&c<=k.left+k.width&&e>=k.top&&e<=k.top+k.height)return g.legendItems[h]}return null},handleEvent:function(c){var e=this,g=e.options,h=c.type==="mouseup"?"click":c.type,k;if(h==="mousemove"){if(!g.onHover&&!g.onLeave)return}else if(h==="click"){if(!g.onClick)return}else return;k=e._getLegendItemAt(c.x,c.y),h==="click"?k&&g.onClick&&g.onClick.call(e,c.native,k):(g.onLeave&&k!==e._hoveredItem&&(e._hoveredItem&&g.onLeave.call(e,c.native,e._hoveredItem),e._hoveredItem=k),g.onHover&&k&&g.onHover.call(e,c.native,k))}});function yk(c,e){var g=new xk({ctx:c.ctx,options:e,chart:c});dc.configure(c,g,e),dc.addBox(c,g),c.legend=g}var Bp={id:"legend",_element:xk,beforeInit:function(c){var e=c.options.legend;e&&yk(c,e)},beforeUpdate:function(c){var e=c.options.legend,g=c.legend;e?(B.mergeIf(e,S.global.legend),g?(dc.configure(c,g,e),g.options=e):yk(c,e)):g&&(dc.removeBox(c,g),delete c.legend)},afterEvent:function(c,e){var g=c.legend;g&&g.handleEvent(e)}},Tc=B.noop;S._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var zk=cc.extend({initialize:function(c){var e=this;B.extend(e,c),e.legendHitBoxes=[]},beforeUpdate:Tc,update:function(c,e,g){var h=this;return h.beforeUpdate(),h.maxWidth=c,h.maxHeight=e,h.margins=g,h.beforeSetDimensions(),h.setDimensions(),h.afterSetDimensions(),h.beforeBuildLabels(),h.buildLabels(),h.afterBuildLabels(),h.beforeFit(),h.fit(),h.afterFit(),h.afterUpdate(),h.minSize},afterUpdate:Tc,beforeSetDimensions:Tc,setDimensions:function(){var c=this;c.isHorizontal()?(c.width=c.maxWidth,c.left=0,c.right=c.width):(c.height=c.maxHeight,c.top=0,c.bottom=c.height),c.paddingLeft=0,c.paddingTop=0,c.paddingRight=0,c.paddingBottom=0,c.minSize={width:0,height:0}},afterSetDimensions:Tc,beforeBuildLabels:Tc,buildLabels:Tc,afterBuildLabels:Tc,beforeFit:Tc,fit:function(){var c=this,e=c.options,g=c.minSize={},h=c.isHorizontal(),k,m;if(!e.display){c.width=g.width=c.height=g.height=0;return}k=B.isArray(e.text)?e.text.length:1,m=k*B.options._parseFont(e).lineHeight+e.padding*2,c.width=g.width=h?c.maxWidth:m,c.height=g.height=h?m:c.maxHeight},afterFit:Tc,isHorizontal:function(){var c=this.options.position;return c==="top"||c==="bottom"},draw:function(){var c=this,e=c.ctx,g=c.options;if(!g.display)return;var h=B.options._parseFont(g),k=h.lineHeight,m=k/2+g.padding,o=0,r=c.top,p=c.left,s=c.bottom,w=c.right,z,D,N;e.fillStyle=B.valueOrDefault(g.fontColor,S.global.defaultFontColor),e.font=h.string,c.isHorizontal()?(D=p+(w-p)/2,N=r+m,z=w-p):(D=g.position==="left"?p+m:w-m,N=r+(s-r)/2,z=s-r,o=Math.PI*(g.position==="left"?-.5:.5)),e.save(),e.translate(D,N),e.rotate(o),e.textAlign="center",e.textBaseline="middle";var Q=g.text;if(B.isArray(Q))for(var T=0,Z=0;Z<Q.length;++Z)e.fillText(Q[Z],0,T,z),T+=k;else e.fillText(Q,0,0,z);e.restore()}});function Fc(c,e){var g=new zk({ctx:c.ctx,options:e,chart:c});dc.configure(c,g,e),dc.addBox(c,g),c.titleBlock=g}var Cp={id:"title",_element:zk,beforeInit:function(c){var e=c.options.title;e&&Fc(c,e)},beforeUpdate:function(c){var e=c.options.title,g=c.titleBlock;e?(B.mergeIf(e,S.global.title),g?(dc.configure(c,g,e),g.options=e):Fc(c,e)):g&&(dc.removeBox(c,g),delete c.titleBlock)}},Uc={},Dp=wk,Ep=Bp,Ak=Cp;Uc.filler=Dp,Uc.legend=Ep,Uc.title=Ak,Na.helpers=B,Oo(),Na._adapters=uh,Na.Animation=bh,Na.animationService=ch,Na.controllers=Sj,Na.DatasetController=mb,Na.defaults=S,Na.Element=cc,Na.elements=Wb,Na.Interaction=cd,Na.layouts=dc,Na.platform=fe,Na.plugins=nb,Na.Scale=Xb,Na.scaleService=df,Na.Ticks=gf,Na.Tooltip=th,Na.helpers.each(tk,function(c,e){Na.scaleService.registerScaleType(e,c,c._defaults)});for(var Bk in Uc)Uc.hasOwnProperty(Bk)&&Na.plugins.register(Uc[Bk]);Na.platform.initialize();var Ck=Na;return typeof window!=="undefined"&&(window.Chart=Na),Na.Chart=Na,Na.Legend=Uc.legend._element,Na.Title=Uc.title._element,Na.pluginService=Na.plugins,Na.PluginBase=Na.Element.extend({}),Na.canvasHelpers=Na.helpers.canvas,Na.layoutService=Na.layouts,Na.LinearScaleBase=cg,Na.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(c){Na[c]=function(e,g){return new Na(e,Na.helpers.merge(g||{},{type:c.charAt(0).toLowerCase()+c.slice(1)}))}}),Ck})});var jl=Dc((a,b)=>{!function(d,f){"function"==typeof define&&define.amd?define([],f):"object"==typeof b&&"undefined"!=typeof a?b.exports=f():d.Papa=f()}(a,function d(){"use strict";var f="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==f?f:{},i=!f.document&&!!f.postMessage,l=i&&/blob:/i.test((f.location||{}).protocol),q={},u=0,v={parse:function(I,P){var x=(P=P||{}).dynamicTyping||!1;ja(x)&&(P.dynamicTypingFunction=x,x={});if(P.dynamicTyping=x,P.transform=!!ja(P.transform)&&P.transform,P.worker&&v.WORKERS_SUPPORTED){var G=function(){if(!v.WORKERS_SUPPORTED)return!1;var J=(K=f.URL||f.webkitURL||null,ca=d.toString(),v.BLOB_URL||(v.BLOB_URL=K.createObjectURL(new Blob(["(",ca,")();"],{type:"text/javascript"})))),U=new f.Worker(J),K,ca;return U.onmessage=ga,U.id=u++,q[U.id]=U}();return G.userStep=P.step,G.userChunk=P.chunk,G.userComplete=P.complete,G.userError=P.error,P.step=ja(P.step),P.chunk=ja(P.chunk),P.complete=ja(P.complete),P.error=ja(P.error),delete P.worker,void G.postMessage({input:I,config:P,workerId:G.id})}var F=null;return v.NODE_STREAM_INPUT,"string"==typeof I?F=P.download?new H(P):new L(P):!0===I.readable&&ja(I.read)&&ja(I.on)?F=new O(P):(f.File&&I instanceof File||I instanceof Object)&&(F=new R(P)),F.stream(I)},unparse:function(I,P){var x=!1,G=!0,F=",",J=`\r
`,U='"',K=U+U,ca=!1,ba=null,Ba=!1;!function(){if("object"!=typeof P)return;"string"!=typeof P.delimiter||v.BAD_DELIMITERS.filter(function(na){return-1!==P.delimiter.indexOf(na)}).length||(F=P.delimiter),("boolean"==typeof P.quotes||"function"==typeof P.quotes||Array.isArray(P.quotes))&&(x=P.quotes),"boolean"!=typeof P.skipEmptyLines&&"string"!=typeof P.skipEmptyLines||(ca=P.skipEmptyLines),"string"==typeof P.newline&&(J=P.newline),"string"==typeof P.quoteChar&&(U=P.quoteChar),"boolean"==typeof P.header&&(G=P.header);if(Array.isArray(P.columns)){if(0===P.columns.length)throw new Error("Option columns is empty");ba=P.columns}void 0!==P.escapeChar&&(K=P.escapeChar+U),"boolean"==typeof P.escapeFormulae&&(Ba=P.escapeFormulae)}();var $=new RegExp(X(U),"g");"string"==typeof I&&(I=JSON.parse(I));if(Array.isArray(I)){if(!I.length||Array.isArray(I[0]))return ra(null,I,ca);if("object"==typeof I[0])return ra(ba||va(I[0]),I,ca)}else if("object"==typeof I)return"string"==typeof I.data&&(I.data=JSON.parse(I.data)),Array.isArray(I.data)&&(I.fields||(I.fields=I.meta&&I.meta.fields),I.fields||(I.fields=Array.isArray(I.data[0])?I.fields:va(I.data[0])),Array.isArray(I.data[0])||"object"==typeof I.data[0]||(I.data=[I.data])),ra(I.fields||[],I.data||[],ca);throw new Error("Unable to serialize unrecognized input");function va(na){if("object"!=typeof na)return[];var xa=[];for(var ma in na)xa.push(ma);return xa}function ra(na,xa,ma){var eb="";"string"==typeof na&&(na=JSON.parse(na)),"string"==typeof xa&&(xa=JSON.parse(xa));var gb=Array.isArray(na)&&0<na.length,hb=!Array.isArray(xa[0]);if(gb&&G){for(var Ca=0;Ca<na.length;Ca++)0<Ca&&(eb+=F),eb+=da(na[Ca],Ca);0<xa.length&&(eb+=J)}for(var Ja=0;Ja<xa.length;Ja++){var Za=gb?na.length:xa[Ja].length,fb=!1,qa=gb?0===Object.keys(xa[Ja]).length:0===xa[Ja].length;if(ma&&!gb&&(fb="greedy"===ma?""===xa[Ja].join("").trim():1===xa[Ja].length&&0===xa[Ja][0].length),"greedy"===ma&&gb){for(var ya=[],Ma=0;Ma<Za;Ma++){var ta=hb?na[Ma]:Ma;ya.push(xa[Ja][ta])}fb=""===ya.join("").trim()}if(!fb){for(var Ea=0;Ea<Za;Ea++){0<Ea&&!qa&&(eb+=F);var cb=gb&&hb?na[Ea]:Ea;eb+=da(xa[Ja][cb],Ea)}Ja<xa.length-1&&(!ma||0<Za&&!qa)&&(eb+=J)}}return eb}function da(na,xa){if(null==na)return"";if(na.constructor===Date)return JSON.stringify(na).slice(1,25);!0===Ba&&"string"==typeof na&&null!==na.match(/^[=+\-@].*$/)&&(na="'"+na);var ma=na.toString().replace($,K),eb="boolean"==typeof x&&x||"function"==typeof x&&x(na,xa)||Array.isArray(x)&&x[xa]||function(gb,hb){for(var Ca=0;Ca<hb.length;Ca++)if(-1<gb.indexOf(hb[Ca]))return!0;return!1}(ma,v.BAD_DELIMITERS)||-1<ma.indexOf(F)||" "===ma.charAt(0)||" "===ma.charAt(ma.length-1);return eb?U+ma+U:ma}}};if(v.RECORD_SEP=String.fromCharCode(30),v.UNIT_SEP=String.fromCharCode(31),v.BYTE_ORDER_MARK="﻿",v.BAD_DELIMITERS=["\r",`
`,'"',v.BYTE_ORDER_MARK],v.WORKERS_SUPPORTED=!i&&!!f.Worker,v.NODE_STREAM_INPUT=1,v.LocalChunkSize=10485760,v.RemoteChunkSize=5242880,v.DefaultDelimiter=",",v.Parser=ea,v.ParserHandle=V,v.NetworkStreamer=H,v.FileStreamer=R,v.StringStreamer=L,v.ReadableStreamStreamer=O,f.jQuery){var A=f.jQuery;A.fn.parse=function(I){var P=I.config||{},x=[];return this.each(function(J){if(!("INPUT"===A(this).prop("tagName").toUpperCase()&&"file"===A(this).attr("type").toLowerCase()&&f.FileReader)||!this.files||0===this.files.length)return!0;for(var U=0;U<this.files.length;U++)x.push({file:this.files[U],inputElem:this,instanceConfig:A.extend({},P)})}),G(),this;function G(){if(0!==x.length){var J,U,K,ca,ba=x[0];if(ja(I.before)){var Ba=I.before(ba.file,ba.inputElem);if("object"==typeof Ba){if("abort"===Ba.action)return J="AbortError",U=ba.file,K=ba.inputElem,ca=Ba.reason,void(ja(I.error)&&I.error({name:J},U,K,ca));if("skip"===Ba.action)return void F();"object"==typeof Ba.config&&(ba.instanceConfig=A.extend(ba.instanceConfig,Ba.config))}else if("skip"===Ba)return void F()}var $=ba.instanceConfig.complete;ba.instanceConfig.complete=function(va){ja($)&&$(va,ba.file,ba.inputElem),F()},v.parse(ba.file,ba.instanceConfig)}else ja(I.complete)&&I.complete()}function F(){x.splice(0,1),G()}}}function E(I){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(P){var x=oa(P);x.chunkSize=parseInt(x.chunkSize),P.step||P.chunk||(x.chunkSize=null),this._handle=new V(x),(this._handle.streamer=this)._config=x}.call(this,I),this.parseChunk=function(P,x){if(this.isFirstChunk&&ja(this._config.beforeFirstChunk)){var G=this._config.beforeFirstChunk(P);void 0!==G&&(P=G)}this.isFirstChunk=!1,this._halted=!1;var F=this._partialLine+P;this._partialLine="";var J=this._handle.parse(F,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var U=J.meta.cursor;this._finished||(this._partialLine=F.substring(U-this._baseIndex),this._baseIndex=U),J&&J.data&&(this._rowCount+=J.data.length);var K=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(l)f.postMessage({results:J,workerId:v.WORKER_ID,finished:K});else if(ja(this._config.chunk)&&!x){if(this._config.chunk(J,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);J=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(J.data),this._completeResults.errors=this._completeResults.errors.concat(J.errors),this._completeResults.meta=J.meta),this._completed||!K||!ja(this._config.complete)||J&&J.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),K||J&&J.meta.paused||this._nextChunk(),J}this._halted=!0},this._sendError=function(P){ja(this._config.error)?this._config.error(P):l&&this._config.error&&f.postMessage({workerId:v.WORKER_ID,error:P,finished:!1})}}function H(I){var P;(I=I||{}).chunkSize||(I.chunkSize=v.RemoteChunkSize),E.call(this,I),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(x){this._input=x,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(P=new XMLHttpRequest(),this._config.withCredentials&&(P.withCredentials=this._config.withCredentials),i||(P.onload=pa(this._chunkLoaded,this),P.onerror=pa(this._chunkError,this)),P.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var x=this._config.downloadRequestHeaders;for(var G in x)P.setRequestHeader(G,x[G])}if(this._config.chunkSize){var F=this._start+this._config.chunkSize-1;P.setRequestHeader("Range","bytes="+this._start+"-"+F)}try{P.send(this._config.downloadRequestBody)}catch(J){this._chunkError(J.message)}i&&0===P.status&&this._chunkError()}},this._chunkLoaded=function(){4===P.readyState&&(P.status<200||400<=P.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:P.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(x){var G=x.getResponseHeader("Content-Range");return null===G?-1:parseInt(G.substring(G.lastIndexOf("/")+1))}(P),this.parseChunk(P.responseText)))},this._chunkError=function(x){var G=P.statusText||x;this._sendError(new Error(G))}}function R(I){var P,x;(I=I||{}).chunkSize||(I.chunkSize=v.LocalChunkSize),E.call(this,I);var G="undefined"!=typeof FileReader;this.stream=function(F){this._input=F,x=F.slice||F.webkitSlice||F.mozSlice,G?((P=new FileReader()).onload=pa(this._chunkLoaded,this),P.onerror=pa(this._chunkError,this)):P=new FileReaderSync(),this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var F=this._input;if(this._config.chunkSize){var J=Math.min(this._start+this._config.chunkSize,this._input.size);F=x.call(F,this._start,J)}var U=P.readAsText(F,this._config.encoding);G||this._chunkLoaded({target:{result:U}})},this._chunkLoaded=function(F){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(F.target.result)},this._chunkError=function(){this._sendError(P.error)}}function L(I){var P;E.call(this,I=I||{}),this.stream=function(x){return P=x,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var x,G=this._config.chunkSize;return G?(x=P.substring(0,G),P=P.substring(G)):(x=P,P=""),this._finished=!P,this.parseChunk(x)}}}function O(I){E.call(this,I=I||{});var P=[],x=!0,G=!1;this.pause=function(){E.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){E.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(F){this._input=F,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){G&&1===P.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),P.length?this.parseChunk(P.shift()):x=!0},this._streamData=pa(function(F){try{P.push("string"==typeof F?F:F.toString(this._config.encoding)),x&&(x=!1,this._checkIsFinished(),this.parseChunk(P.shift()))}catch(J){this._streamError(J)}},this),this._streamError=pa(function(F){this._streamCleanUp(),this._sendError(F)},this),this._streamEnd=pa(function(){this._streamCleanUp(),G=!0,this._streamData("")},this),this._streamCleanUp=pa(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function V(I){var P,x,G,F=Math.pow(2,53),J=-F,U=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,K=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,ca=this,ba=0,Ba=0,$=!1,va=!1,ra=[],da={data:[],errors:[],meta:{}};if(ja(I.step)){var na=I.step;I.step=function(Ca){if(da=Ca,eb())ma();else{if(ma(),0===da.data.length)return;ba+=Ca.data.length,I.preview&&ba>I.preview?x.abort():(da.data=da.data[0],na(da,ca))}}}function xa(Ca){return"greedy"===I.skipEmptyLines?""===Ca.join("").trim():1===Ca.length&&0===Ca[0].length}function ma(){if(da&&G&&(hb("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+v.DefaultDelimiter+"'"),G=!1),I.skipEmptyLines)for(var Ca=0;Ca<da.data.length;Ca++)xa(da.data[Ca])&&da.data.splice(Ca--,1);return eb()&&function(){if(!da)return;function Ja(fb,qa){ja(I.transformHeader)&&(fb=I.transformHeader(fb,qa)),ra.push(fb)}if(Array.isArray(da.data[0])){for(var Za=0;eb()&&Za<da.data.length;Za++)da.data[Za].forEach(Ja);da.data.splice(0,1)}else da.data.forEach(Ja)}(),function(){if(!da||!I.header&&!I.dynamicTyping&&!I.transform)return da;function Ja(fb,qa){var ya,Ma=I.header?{}:[];for(ya=0;ya<fb.length;ya++){var ta=ya,Ea=fb[ya];I.header&&(ta=ya>=ra.length?"__parsed_extra":ra[ya]),I.transform&&(Ea=I.transform(Ea,ta)),Ea=gb(ta,Ea),"__parsed_extra"===ta?(Ma[ta]=Ma[ta]||[],Ma[ta].push(Ea)):Ma[ta]=Ea}return I.header&&(ya>ra.length?hb("FieldMismatch","TooManyFields","Too many fields: expected "+ra.length+" fields but parsed "+ya,Ba+qa):ya<ra.length&&hb("FieldMismatch","TooFewFields","Too few fields: expected "+ra.length+" fields but parsed "+ya,Ba+qa)),Ma}var Za=1;return!da.data.length||Array.isArray(da.data[0])?(da.data=da.data.map(Ja),Za=da.data.length):da.data=Ja(da.data,0),I.header&&da.meta&&(da.meta.fields=ra),Ba+=Za,da}()}function eb(){return I.header&&0===ra.length}function gb(Ca,Ja){return Za=Ca,I.dynamicTypingFunction&&void 0===I.dynamicTyping[Za]&&(I.dynamicTyping[Za]=I.dynamicTypingFunction(Za)),!0===(I.dynamicTyping[Za]||I.dynamicTyping)?"true"===Ja||"TRUE"===Ja||"false"!==Ja&&"FALSE"!==Ja&&(function(fb){if(U.test(fb)){var qa=parseFloat(fb);if(J<qa&&qa<F)return!0}return!1}(Ja)?parseFloat(Ja):K.test(Ja)?new Date(Ja):""===Ja?null:Ja):Ja;var Za}function hb(Ca,Ja,Za,fb){var qa={type:Ca,code:Ja,message:Za};void 0!==fb&&(qa.row=fb),da.errors.push(qa)}this.parse=function(Ca,Ja,Za){var fb=I.quoteChar||'"';if(I.newline||(I.newline=function(Ma,ta){Ma=Ma.substring(0,1048576);var Ea=new RegExp(X(ta)+"([^]*?)"+X(ta),"gm"),cb=(Ma=Ma.replace(Ea,"")).split("\r"),Da=Ma.split(`
`),Ta=1<Da.length&&Da[0].length<cb[0].length;if(1===cb.length||Ta)return`
`;for(var Ka=0,Wa=0;Wa<cb.length;Wa++)`
`===cb[Wa][0]&&Ka++;return Ka>=cb.length/2?`\r
`:"\r"}(Ca,fb)),G=!1,I.delimiter)ja(I.delimiter)&&(I.delimiter=I.delimiter(Ca),da.meta.delimiter=I.delimiter);else{var qa=function(Ma,ta,Ea,cb,Da){var Ta,Ka,Wa,jb;Da=Da||[",","	","|",";",v.RECORD_SEP,v.UNIT_SEP];for(var ub=0;ub<Da.length;ub++){var ob=Da[ub],sa=0,_a=0,Y=0;Wa=void 0;for(var M=new ea({comments:cb,delimiter:ob,newline:ta,preview:10}).parse(Ma),_=0;_<M.data.length;_++)if(Ea&&xa(M.data[_]))Y++;else{var aa=M.data[_].length;_a+=aa,void 0!==Wa?0<aa&&(sa+=Math.abs(aa-Wa),Wa=aa):Wa=aa}0<M.data.length&&(_a/=M.data.length-Y),(void 0===Ka||sa<=Ka)&&(void 0===jb||jb<_a)&&1.99<_a&&(Ka=sa,Ta=ob,jb=_a)}return{successful:!!(I.delimiter=Ta),bestDelimiter:Ta}}(Ca,I.newline,I.skipEmptyLines,I.comments,I.delimitersToGuess);qa.successful?I.delimiter=qa.bestDelimiter:(G=!0,I.delimiter=v.DefaultDelimiter),da.meta.delimiter=I.delimiter}var ya=oa(I);return I.preview&&I.header&&ya.preview++,P=Ca,x=new ea(ya),da=x.parse(P,Ja,Za),ma(),$?{meta:{paused:!0}}:da||{meta:{paused:!1}}},this.paused=function(){return $},this.pause=function(){$=!0,x.abort(),P=ja(I.chunk)?"":P.substring(x.getCharIndex())},this.resume=function(){ca.streamer._halted?($=!1,ca.streamer.parseChunk(P,!0)):setTimeout(ca.resume,3)},this.aborted=function(){return va},this.abort=function(){va=!0,x.abort(),da.meta.aborted=!0,ja(I.complete)&&I.complete(da),P=""}}function X(I){return I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ea(I){var P,x=(I=I||{}).delimiter,G=I.newline,F=I.comments,J=I.step,U=I.preview,K=I.fastMode,ca=P=void 0===I.quoteChar?'"':I.quoteChar;if(void 0!==I.escapeChar&&(ca=I.escapeChar),("string"!=typeof x||-1<v.BAD_DELIMITERS.indexOf(x))&&(x=","),F===x)throw new Error("Comment character same as delimiter");!0===F?F="#":("string"!=typeof F||-1<v.BAD_DELIMITERS.indexOf(F))&&(F=!1),`
`!==G&&"\r"!==G&&`\r
`!==G&&(G=`
`);var ba=0,Ba=!1;this.parse=function($,va,ra){if("string"!=typeof $)throw new Error("Input must be a string");var da=$.length,na=x.length,xa=G.length,ma=F.length,eb=ja(J),gb=[],hb=[],Ca=[],Ja=ba=0;if(!$)return ub();if(K||!1!==K&&-1===$.indexOf(P)){for(var Za=$.split(G),fb=0;fb<Za.length;fb++){if(Ca=Za[fb],ba+=Ca.length,fb!==Za.length-1)ba+=G.length;else if(ra)return ub();if(!F||Ca.substring(0,ma)!==F){if(eb){if(gb=[],Ta(Ca.split(x)),ob(),Ba)return ub()}else Ta(Ca.split(x));if(U&&U<=fb)return gb=gb.slice(0,U),ub(!0)}}return ub()}for(var qa=$.indexOf(x,ba),ya=$.indexOf(G,ba),Ma=new RegExp(X(ca)+X(P),"g"),ta=$.indexOf(P,ba);;)if($[ba]!==P)if(F&&0===Ca.length&&$.substring(ba,ba+ma)===F){if(-1===ya)return ub();ba=ya+xa,ya=$.indexOf(G,ba),qa=$.indexOf(x,ba)}else{if(-1!==qa&&(qa<ya||-1===ya)){if(!(qa<ta)){Ca.push($.substring(ba,qa)),ba=qa+na,qa=$.indexOf(x,ba);continue}var Ea=sa(qa,ta,ya);if(Ea&&void 0!==Ea.nextDelim){qa=Ea.nextDelim,ta=Ea.quoteSearch,Ca.push($.substring(ba,qa)),ba=qa+na,qa=$.indexOf(x,ba);continue}}if(-1===ya)break;if(Ca.push($.substring(ba,ya)),jb(ya+xa),eb&&(ob(),Ba))return ub();if(U&&gb.length>=U)return ub(!0)}else for(ta=ba,ba++;;){if(-1===(ta=$.indexOf(P,ta+1)))return ra||hb.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:gb.length,index:ba}),Wa();if(ta===da-1)return Wa($.substring(ba,ta).replace(Ma,P));if(P!==ca||$[ta+1]!==ca){if(P===ca||0===ta||$[ta-1]!==ca){-1!==qa&&qa<ta+1&&(qa=$.indexOf(x,ta+1)),-1!==ya&&ya<ta+1&&(ya=$.indexOf(G,ta+1));var cb=Ka(-1===ya?qa:Math.min(qa,ya));if($[ta+1+cb]===x){Ca.push($.substring(ba,ta).replace(Ma,P)),$[ba=ta+1+cb+na]!==P&&(ta=$.indexOf(P,ba)),qa=$.indexOf(x,ba),ya=$.indexOf(G,ba);break}var Da=Ka(ya);if($.substring(ta+1+Da,ta+1+Da+xa)===G){if(Ca.push($.substring(ba,ta).replace(Ma,P)),jb(ta+1+Da+xa),qa=$.indexOf(x,ba),ta=$.indexOf(P,ba),eb&&(ob(),Ba))return ub();if(U&&gb.length>=U)return ub(!0);break}hb.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:gb.length,index:ba}),ta++}}else ta++}return Wa();function Ta(_a){gb.push(_a),Ja=ba}function Ka(_a){var Y=0;if(-1!==_a){var M=$.substring(ta+1,_a);M&&""===M.trim()&&(Y=M.length)}return Y}function Wa(_a){return ra||(void 0===_a&&(_a=$.substring(ba)),Ca.push(_a),ba=da,Ta(Ca),eb&&ob()),ub()}function jb(_a){ba=_a,Ta(Ca),Ca=[],ya=$.indexOf(G,ba)}function ub(_a){return{data:gb,errors:hb,meta:{delimiter:x,linebreak:G,aborted:Ba,truncated:!!_a,cursor:Ja+(va||0)}}}function ob(){J(ub()),gb=[],hb=[]}function sa(_a,Y,M){var _={nextDelim:void 0,quoteSearch:void 0},aa=$.indexOf(P,Y+1);if(Y<_a&&_a<aa&&(aa<M||-1===M)){var S=$.indexOf(x,aa);if(-1===S)return _;aa<S&&(aa=$.indexOf(P,aa+1)),_=sa(S,aa,M)}else _={nextDelim:_a,quoteSearch:Y};return _}},this.abort=function(){Ba=!0},this.getCharIndex=function(){return ba}}function ga(I){var P=I.data,x=q[P.workerId],G=!1;if(P.error)x.userError(P.error,P.file);else if(P.results&&P.results.data){var F={abort:function(){G=!0,ka(P.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ha,resume:ha};if(ja(x.userStep)){for(var J=0;J<P.results.data.length&&(x.userStep({data:P.results.data[J],errors:P.results.errors,meta:P.results.meta},F),!G);J++);delete P.results}else ja(x.userChunk)&&(x.userChunk(P.results,F,P.file),delete P.results)}P.finished&&!G&&ka(P.workerId,P.results)}function ka(I,P){var x=q[I];ja(x.userComplete)&&x.userComplete(P),x.terminate(),delete q[I]}function ha(){throw new Error("Not implemented.")}function oa(I){if("object"!=typeof I||null===I)return I;var P=Array.isArray(I)?[]:{};for(var x in I)P[x]=oa(I[x]);return P}function pa(I,P){return function(){I.apply(P,arguments)}}function ja(I){return"function"==typeof I}return l&&(f.onmessage=function(I){var P=I.data;void 0===v.WORKER_ID&&P&&(v.WORKER_ID=P.workerId);if("string"==typeof P.input)f.postMessage({workerId:v.WORKER_ID,results:v.parse(P.input,P.config),finished:!0});else if(f.File&&P.input instanceof File||P.input instanceof Object){var x=v.parse(P.input,P.config);x&&f.postMessage({workerId:v.WORKER_ID,results:x,finished:!0})}}),(H.prototype=Object.create(E.prototype)).constructor=H,(R.prototype=Object.create(E.prototype)).constructor=R,(L.prototype=Object.create(L.prototype)).constructor=L,(O.prototype=Object.create(E.prototype)).constructor=O,v})});var Ip=Dc(I=>{Ue(I,{__assign:()=>d,__asyncDelegator:()=>ea,__asyncGenerator:()=>X,__asyncValues:()=>ga,__await:()=>V,__awaiter:()=>u,__classPrivateFieldGet:()=>pa,__classPrivateFieldSet:()=>ja,__createBinding:()=>A,__decorate:()=>i,__exportStar:()=>E,__extends:()=>b,__generator:()=>v,__importDefault:()=>oa,__importStar:()=>ha,__makeTemplateObject:()=>ka,__metadata:()=>q,__param:()=>l,__read:()=>R,__rest:()=>f,__spread:()=>L,__spreadArrays:()=>O,__values:()=>H});var a=function(x,G){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,J){F.__proto__=J}||function(F,J){for(var U in J)J.hasOwnProperty(U)&&(F[U]=J[U])},a(x,G)};function b(x,G){a(x,G);function F(){this.constructor=x}x.prototype=G===null?Object.create(G):(F.prototype=G.prototype,new F())}var d=function(){return d=Object.assign||function x(G){for(var F,J=1,U=arguments.length;J<U;J++){F=arguments[J];for(var K in F)Object.prototype.hasOwnProperty.call(F,K)&&(G[K]=F[K])}return G},d.apply(this,arguments)};function f(x,G){var F={};for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&G.indexOf(J)<0&&(F[J]=x[J]);if(x!=null&&typeof Object.getOwnPropertySymbols==="function")for(var U=0,J=Object.getOwnPropertySymbols(x);U<J.length;U++)G.indexOf(J[U])<0&&Object.prototype.propertyIsEnumerable.call(x,J[U])&&(F[J[U]]=x[J[U]]);return F}function i(x,G,F,J){var U=arguments.length,K=U<3?G:J===null?J=Object.getOwnPropertyDescriptor(G,F):J,ca;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")K=Reflect.decorate(x,G,F,J);else for(var ba=x.length-1;ba>=0;ba--)(ca=x[ba])&&(K=(U<3?ca(K):U>3?ca(G,F,K):ca(G,F))||K);return U>3&&K&&Object.defineProperty(G,F,K),K}function l(x,G){return function(F,J){G(F,J,x)}}function q(x,G){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(x,G)}function u(x,G,F,J){function U(K){return K instanceof F?K:new F(function(ca){ca(K)})}return new(F||(F=Promise))(function(K,ca){function ba(va){try{$(J.next(va))}catch(ra){ca(ra)}}function Ba(va){try{$(J.throw(va))}catch(ra){ca(ra)}}function $(va){va.done?K(va.value):U(va.value).then(ba,Ba)}$((J=J.apply(x,G||[])).next())})}function v(x,G){var F={label:0,sent:function(){if(K[0]&1)throw K[1];return K[1]},trys:[],ops:[]},J,U,K,ca;return ca={next:ba(0),throw:ba(1),return:ba(2)},typeof Symbol==="function"&&(ca[Symbol.iterator]=function(){return this}),ca;function ba($){return function(va){return Ba([$,va])}}function Ba($){if(J)throw new TypeError("Generator is already executing.");for(;F;)try{if(J=1,U&&(K=$[0]&2?U.return:$[0]?U.throw||((K=U.return)&&K.call(U),0):U.next)&&!(K=K.call(U,$[1])).done)return K;(U=0,K)&&($=[$[0]&2,K.value]);switch($[0]){case 0:case 1:K=$;break;case 4:return F.label++,{value:$[1],done:!1};case 5:F.label++,U=$[1],$=[0];continue;case 7:$=F.ops.pop(),F.trys.pop();continue;default:if(!(K=F.trys,K=K.length>0&&K[K.length-1])&&($[0]===6||$[0]===2)){F=0;continue}if($[0]===3&&(!K||$[1]>K[0]&&$[1]<K[3])){F.label=$[1];break}if($[0]===6&&F.label<K[1]){F.label=K[1],K=$;break}if(K&&F.label<K[2]){F.label=K[2],F.ops.push($);break}K[2]&&F.ops.pop(),F.trys.pop();continue}$=G.call(x,F)}catch(va){$=[6,va],U=0}finally{J=K=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}}function A(x,G,F,J){J===void 0&&(J=F),x[J]=G[F]}function E(x,G){for(var F in x)F!=="default"&&!G.hasOwnProperty(F)&&(G[F]=x[F])}function H(x){var G=typeof Symbol==="function"&&Symbol.iterator,F=G&&x[G],J=0;if(F)return F.call(x);if(x&&typeof x.length==="number")return{next:function(){return x&&J>=x.length&&(x=void 0),{value:x&&x[J++],done:!x}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(x,G){var F=typeof Symbol==="function"&&x[Symbol.iterator];if(!F)return x;var J=F.call(x),U,K=[],ca;try{for(;(G===void 0||G-- >0)&&!(U=J.next()).done;)K.push(U.value)}catch(ba){ca={error:ba}}finally{try{U&&!U.done&&(F=J.return)&&F.call(J)}finally{if(ca)throw ca.error}}return K}function L(){for(var x=[],G=0;G<arguments.length;G++)x=x.concat(R(arguments[G]));return x}function O(){for(var x=0,G=0,F=arguments.length;G<F;G++)x+=arguments[G].length;for(var J=Array(x),U=0,G=0;G<F;G++)for(var K=arguments[G],ca=0,ba=K.length;ca<ba;ca++,U++)J[U]=K[ca];return J}function V(x){return this instanceof V?(this.v=x,this):new V(x)}function X(x,G,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=F.apply(x,G||[]),U,K=[];return U={},ca("next"),ca("throw"),ca("return"),U[Symbol.asyncIterator]=function(){return this},U;function ca(da){J[da]&&(U[da]=function(na){return new Promise(function(xa,ma){K.push([da,na,xa,ma])>1||ba(da,na)})})}function ba(da,na){try{Ba(J[da](na))}catch(xa){ra(K[0][3],xa)}}function Ba(da){da.value instanceof V?Promise.resolve(da.value.v).then($,va):ra(K[0][2],da)}function $(da){ba("next",da)}function va(da){ba("throw",da)}function ra(da,na){(da(na),K.shift(),K.length)&&ba(K[0][0],K[0][1])}}function ea(x){var G,F;return G={},J("next"),J("throw",function(U){throw U}),J("return"),G[Symbol.iterator]=function(){return this},G;function J(U,K){G[U]=x[U]?function(ca){return(F=!F)?{value:V(x[U](ca)),done:U==="return"}:K?K(ca):ca}:K}}function ga(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=x[Symbol.asyncIterator],F;return G?G.call(x):(x=typeof H==="function"?H(x):x[Symbol.iterator](),F={},J("next"),J("throw"),J("return"),F[Symbol.asyncIterator]=function(){return this},F);function J(K){F[K]=x[K]&&function(ca){return new Promise(function(ba,Ba){ca=x[K](ca),U(ba,Ba,ca.done,ca.value)})}}function U(K,ca,ba,Ba){Promise.resolve(Ba).then(function($){K({value:$,done:ba})},ca)}}function ka(x,G){return Object.defineProperty?Object.defineProperty(x,"raw",{value:G}):x.raw=G,x}function ha(x){if(x&&x.__esModule)return x;var G={};if(x!=null)for(var F in x)Object.hasOwnProperty.call(x,F)&&(G[F]=x[F]);return G.default=x,G}function oa(x){return x&&x.__esModule?x:{default:x}}function pa(x,G){if(!G.has(x))throw new TypeError("attempted to get private field on non-instance");return G.get(x)}function ja(x,G,F){if(!G.has(x))throw new TypeError("attempted to set private field on non-instance");return G.set(x,F),F}});var Mp=Dc(I=>{Ue(I,{__assign:()=>d,__asyncDelegator:()=>ea,__asyncGenerator:()=>X,__asyncValues:()=>ga,__await:()=>V,__awaiter:()=>u,__classPrivateFieldGet:()=>pa,__classPrivateFieldSet:()=>ja,__createBinding:()=>A,__decorate:()=>i,__exportStar:()=>E,__extends:()=>b,__generator:()=>v,__importDefault:()=>oa,__importStar:()=>ha,__makeTemplateObject:()=>ka,__metadata:()=>q,__param:()=>l,__read:()=>R,__rest:()=>f,__spread:()=>L,__spreadArrays:()=>O,__values:()=>H});var a=function(x,G){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,J){F.__proto__=J}||function(F,J){for(var U in J)J.hasOwnProperty(U)&&(F[U]=J[U])},a(x,G)};function b(x,G){a(x,G);function F(){this.constructor=x}x.prototype=G===null?Object.create(G):(F.prototype=G.prototype,new F())}var d=function(){return d=Object.assign||function x(G){for(var F,J=1,U=arguments.length;J<U;J++){F=arguments[J];for(var K in F)Object.prototype.hasOwnProperty.call(F,K)&&(G[K]=F[K])}return G},d.apply(this,arguments)};function f(x,G){var F={};for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&G.indexOf(J)<0&&(F[J]=x[J]);if(x!=null&&typeof Object.getOwnPropertySymbols==="function")for(var U=0,J=Object.getOwnPropertySymbols(x);U<J.length;U++)G.indexOf(J[U])<0&&Object.prototype.propertyIsEnumerable.call(x,J[U])&&(F[J[U]]=x[J[U]]);return F}function i(x,G,F,J){var U=arguments.length,K=U<3?G:J===null?J=Object.getOwnPropertyDescriptor(G,F):J,ca;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")K=Reflect.decorate(x,G,F,J);else for(var ba=x.length-1;ba>=0;ba--)(ca=x[ba])&&(K=(U<3?ca(K):U>3?ca(G,F,K):ca(G,F))||K);return U>3&&K&&Object.defineProperty(G,F,K),K}function l(x,G){return function(F,J){G(F,J,x)}}function q(x,G){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(x,G)}function u(x,G,F,J){function U(K){return K instanceof F?K:new F(function(ca){ca(K)})}return new(F||(F=Promise))(function(K,ca){function ba(va){try{$(J.next(va))}catch(ra){ca(ra)}}function Ba(va){try{$(J.throw(va))}catch(ra){ca(ra)}}function $(va){va.done?K(va.value):U(va.value).then(ba,Ba)}$((J=J.apply(x,G||[])).next())})}function v(x,G){var F={label:0,sent:function(){if(K[0]&1)throw K[1];return K[1]},trys:[],ops:[]},J,U,K,ca;return ca={next:ba(0),throw:ba(1),return:ba(2)},typeof Symbol==="function"&&(ca[Symbol.iterator]=function(){return this}),ca;function ba($){return function(va){return Ba([$,va])}}function Ba($){if(J)throw new TypeError("Generator is already executing.");for(;F;)try{if(J=1,U&&(K=$[0]&2?U.return:$[0]?U.throw||((K=U.return)&&K.call(U),0):U.next)&&!(K=K.call(U,$[1])).done)return K;(U=0,K)&&($=[$[0]&2,K.value]);switch($[0]){case 0:case 1:K=$;break;case 4:return F.label++,{value:$[1],done:!1};case 5:F.label++,U=$[1],$=[0];continue;case 7:$=F.ops.pop(),F.trys.pop();continue;default:if(!(K=F.trys,K=K.length>0&&K[K.length-1])&&($[0]===6||$[0]===2)){F=0;continue}if($[0]===3&&(!K||$[1]>K[0]&&$[1]<K[3])){F.label=$[1];break}if($[0]===6&&F.label<K[1]){F.label=K[1],K=$;break}if(K&&F.label<K[2]){F.label=K[2],F.ops.push($);break}K[2]&&F.ops.pop(),F.trys.pop();continue}$=G.call(x,F)}catch(va){$=[6,va],U=0}finally{J=K=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}}function A(x,G,F,J){J===void 0&&(J=F),x[J]=G[F]}function E(x,G){for(var F in x)F!=="default"&&!G.hasOwnProperty(F)&&(G[F]=x[F])}function H(x){var G=typeof Symbol==="function"&&Symbol.iterator,F=G&&x[G],J=0;if(F)return F.call(x);if(x&&typeof x.length==="number")return{next:function(){return x&&J>=x.length&&(x=void 0),{value:x&&x[J++],done:!x}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(x,G){var F=typeof Symbol==="function"&&x[Symbol.iterator];if(!F)return x;var J=F.call(x),U,K=[],ca;try{for(;(G===void 0||G-- >0)&&!(U=J.next()).done;)K.push(U.value)}catch(ba){ca={error:ba}}finally{try{U&&!U.done&&(F=J.return)&&F.call(J)}finally{if(ca)throw ca.error}}return K}function L(){for(var x=[],G=0;G<arguments.length;G++)x=x.concat(R(arguments[G]));return x}function O(){for(var x=0,G=0,F=arguments.length;G<F;G++)x+=arguments[G].length;for(var J=Array(x),U=0,G=0;G<F;G++)for(var K=arguments[G],ca=0,ba=K.length;ca<ba;ca++,U++)J[U]=K[ca];return J}function V(x){return this instanceof V?(this.v=x,this):new V(x)}function X(x,G,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=F.apply(x,G||[]),U,K=[];return U={},ca("next"),ca("throw"),ca("return"),U[Symbol.asyncIterator]=function(){return this},U;function ca(da){J[da]&&(U[da]=function(na){return new Promise(function(xa,ma){K.push([da,na,xa,ma])>1||ba(da,na)})})}function ba(da,na){try{Ba(J[da](na))}catch(xa){ra(K[0][3],xa)}}function Ba(da){da.value instanceof V?Promise.resolve(da.value.v).then($,va):ra(K[0][2],da)}function $(da){ba("next",da)}function va(da){ba("throw",da)}function ra(da,na){(da(na),K.shift(),K.length)&&ba(K[0][0],K[0][1])}}function ea(x){var G,F;return G={},J("next"),J("throw",function(U){throw U}),J("return"),G[Symbol.iterator]=function(){return this},G;function J(U,K){G[U]=x[U]?function(ca){return(F=!F)?{value:V(x[U](ca)),done:U==="return"}:K?K(ca):ca}:K}}function ga(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=x[Symbol.asyncIterator],F;return G?G.call(x):(x=typeof H==="function"?H(x):x[Symbol.iterator](),F={},J("next"),J("throw"),J("return"),F[Symbol.asyncIterator]=function(){return this},F);function J(K){F[K]=x[K]&&function(ca){return new Promise(function(ba,Ba){ca=x[K](ca),U(ba,Ba,ca.done,ca.value)})}}function U(K,ca,ba,Ba){Promise.resolve(Ba).then(function($){K({value:$,done:ba})},ca)}}function ka(x,G){return Object.defineProperty?Object.defineProperty(x,"raw",{value:G}):x.raw=G,x}function ha(x){if(x&&x.__esModule)return x;var G={};if(x!=null)for(var F in x)Object.hasOwnProperty.call(x,F)&&(G[F]=x[F]);return G.default=x,G}function oa(x){return x&&x.__esModule?x:{default:x}}function pa(x,G){if(!G.has(x))throw new TypeError("attempted to get private field on non-instance");return G.get(x)}function ja(x,G,F){if(!G.has(x))throw new TypeError("attempted to set private field on non-instance");return G.set(x,F),F}});var Jk=Dc(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});var a=Mp();var b={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var d=function(Y,M){if(!Y)throw f(M)},f=function(Y){return new Error("Firebase Database ("+b.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Y)};var i=function(Y){for(var M=[],_=0,aa=0;aa<Y.length;aa++){var S=Y.charCodeAt(aa);S<128?M[_++]=S:S<2048?(M[_++]=S>>6|192,M[_++]=S&63|128):(S&64512)===55296&&aa+1<Y.length&&(Y.charCodeAt(aa+1)&64512)===56320?(S=65536+((S&1023)<<10)+(Y.charCodeAt(++aa)&1023),M[_++]=S>>18|240,M[_++]=S>>12&63|128,M[_++]=S>>6&63|128,M[_++]=S&63|128):(M[_++]=S>>12|224,M[_++]=S>>6&63|128,M[_++]=S&63|128)}return M},l=function(Y){for(var M=[],_=0,aa=0;_<Y.length;){var S=Y[_++];if(S<128)M[aa++]=String.fromCharCode(S);else if(S>191&&S<224){var za=Y[_++];M[aa++]=String.fromCharCode((S&31)<<6|za&63)}else if(S>239&&S<365){var za=Y[_++],Sa=Y[_++],pb=Y[_++],Ua=((S&7)<<18|(za&63)<<12|(Sa&63)<<6|pb&63)-65536;M[aa++]=String.fromCharCode(55296+(Ua>>10)),M[aa++]=String.fromCharCode(56320+(Ua&1023))}else{var za=Y[_++],Sa=Y[_++];M[aa++]=String.fromCharCode((S&15)<<12|(za&63)<<6|Sa&63)}}return M.join("")},q={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob==="function",encodeByteArray:function(Y,M){if(!Array.isArray(Y))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var _=M?this.byteToCharMapWebSafe_:this.byteToCharMap_,aa=[],S=0;S<Y.length;S+=3){var za=Y[S],Sa=S+1<Y.length,pb=Sa?Y[S+1]:0,Ua=S+2<Y.length,lb=Ua?Y[S+2]:0,Mb=za>>2,Db=(za&3)<<4|pb>>4,La=(pb&15)<<2|lb>>6,td=lb&63;Ua||(td=64,Sa||(La=64)),aa.push(_[Mb],_[Db],_[La],_[td])}return aa.join("")},encodeString:function(Y,M){return this.HAS_NATIVE_SUPPORT&&!M?btoa(Y):this.encodeByteArray(i(Y),M)},decodeString:function(Y,M){return this.HAS_NATIVE_SUPPORT&&!M?atob(Y):l(this.decodeStringToByteArray(Y,M))},decodeStringToByteArray:function(Y,M){this.init_();for(var _=M?this.charToByteMapWebSafe_:this.charToByteMap_,aa=[],S=0;S<Y.length;){var za=_[Y.charAt(S++)],Sa=S<Y.length,pb=Sa?_[Y.charAt(S)]:0;++S;var Ua=S<Y.length,lb=Ua?_[Y.charAt(S)]:64;++S;var Mb=S<Y.length,Db=Mb?_[Y.charAt(S)]:64;++S;if(za==null||pb==null||lb==null||Db==null)throw Error();var La=za<<2|pb>>4;aa.push(La);if(lb!==64){var td=pb<<4&240|lb>>2;aa.push(td);if(Db!==64){var Lf=lb<<6&192|Db;aa.push(Lf)}}}return aa},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var Y=0;Y<this.ENCODED_VALS.length;Y++)this.byteToCharMap_[Y]=this.ENCODED_VALS.charAt(Y),this.charToByteMap_[this.byteToCharMap_[Y]]=Y,this.byteToCharMapWebSafe_[Y]=this.ENCODED_VALS_WEBSAFE.charAt(Y),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Y]]=Y,Y>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Y)]=Y,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Y)]=Y)}}},u=function(Y){var M=i(Y);return q.encodeByteArray(M,!0)},v=function(Y){try{return q.decodeString(Y,!0)}catch(M){console.error("base64Decode failed: ",M)}return null};function A(Y){return E(void 0,Y)}function E(Y,M){if(!(M instanceof Object))return M;switch(M.constructor){case Date:var _=M;return new Date(_.getTime());case Object:Y===void 0&&(Y={});break;case Array:Y=[];break;default:return M}for(var aa in M){if(!M.hasOwnProperty(aa))continue;Y[aa]=E(Y[aa],M[aa])}return Y}var H=function(){function Y(){var M=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(_,aa){M.resolve=_,M.reject=aa})}return Y.prototype.wrapCallback=function(M){var _=this;return function(aa,S){aa?_.reject(aa):_.resolve(S),typeof M==="function"&&(_.promise.catch(function(){}),M.length===1?M(aa):M(aa,S))}},Y}();function R(){return typeof navigator!=="undefined"&&typeof navigator.userAgent==="string"?navigator.userAgent:""}function L(){return typeof window!=="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(R())}function O(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(Y){return!1}}function V(){return typeof self==="object"&&self.self===self}function X(){var Y=typeof chrome==="object"?chrome.runtime:typeof browser==="object"?browser.runtime:void 0;return typeof Y==="object"&&Y.id!==void 0}function ea(){return typeof navigator==="object"&&navigator.product==="ReactNative"}function ga(){return R().indexOf("Electron/")>=0}function ka(){var Y=R();return Y.indexOf("MSIE ")>=0||Y.indexOf("Trident/")>=0}function ha(){return R().indexOf("MSAppHost/")>=0}function oa(){return b.NODE_CLIENT===!0||b.NODE_ADMIN===!0}function pa(){return!O()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ja(){return"indexedDB"in self&&indexedDB!=null}function I(){return new Promise(function(Y,M){try{var _=!0,aa="validate-browser-context-for-indexeddb-analytics-module",S=window.indexedDB.open(aa);S.onsuccess=function(){S.result.close(),_||window.indexedDB.deleteDatabase(aa),Y(!0)},S.onupgradeneeded=function(){_=!1},S.onerror=function(){var za;M(((za=S.error)===null||za===void 0?void 0:za.message)||"")}}catch(za){M(za)}})}function P(){return!navigator||!navigator.cookieEnabled?!1:!0}var x="FirebaseError",G=function(Y){a.__extends(M,Y);function M(_,aa){var S=Y.call(this,aa)||this;return S.code=_,S.name=x,Object.setPrototypeOf(S,M.prototype),Error.captureStackTrace&&Error.captureStackTrace(S,F.prototype.create),S}return M}(Error),F=function(){function Y(M,_,aa){this.service=M,this.serviceName=_,this.errors=aa}return Y.prototype.create=function(M){for(var _=[],aa=1;aa<arguments.length;aa++)_[aa-1]=arguments[aa];for(var S=_[0]||{},za=this.service+"/"+M,Sa=this.errors[M],pb=Sa?J(Sa,S):"Error",Ua=this.serviceName+": "+pb+" ("+za+").",lb=new G(za,Ua),Mb=0,Db=Object.keys(S);Mb<Db.length;Mb++){var La=Db[Mb];La.slice(-1)!=="_"&&(La in lb&&console.warn('Overwriting FirebaseError base field "'+La+'" can cause unexpected behavior.'),lb[La]=S[La])}return lb},Y}();function J(Y,M){return Y.replace(U,function(_,aa){var S=M[aa];return S!=null?String(S):"<"+aa+"?>"})}var U=/\{\$([^}]+)}/g;function K(Y){return JSON.parse(Y)}function ca(Y){return JSON.stringify(Y)}var ba=function(Y){var M={},_={},aa={},S="";try{var za=Y.split(".");M=K(v(za[0])||""),_=K(v(za[1])||""),S=za[2],aa=_.d||{},delete _.d}catch(Sa){}return{header:M,claims:_,data:aa,signature:S}},Ba=function(Y){var M=ba(Y).claims,_=Math.floor(new Date().getTime()/1e3),aa=0,S=0;return typeof M==="object"&&(M.hasOwnProperty("nbf")?aa=M.nbf:M.hasOwnProperty("iat")&&(aa=M.iat),M.hasOwnProperty("exp")?S=M.exp:S=aa+86400),!!_&&!!aa&&!!S&&_>=aa&&_<=S},$=function(Y){var M=ba(Y).claims;return typeof M==="object"&&M.hasOwnProperty("iat")?M.iat:null},va=function(Y){var M=ba(Y),_=M.claims;return!!_&&typeof _==="object"&&_.hasOwnProperty("iat")},ra=function(Y){var M=ba(Y).claims;return typeof M==="object"&&M.admin===!0};function da(Y,M){return Object.prototype.hasOwnProperty.call(Y,M)}function na(Y,M){return Object.prototype.hasOwnProperty.call(Y,M)?Y[M]:void 0}function xa(Y){for(var M in Y)if(Object.prototype.hasOwnProperty.call(Y,M))return!1;return!0}function ma(Y,M,_){var aa={};for(var S in Y)Object.prototype.hasOwnProperty.call(Y,S)&&(aa[S]=M.call(_,Y[S],S,Y));return aa}function eb(Y){for(var M=[],_=function(Ua,lb){Array.isArray(lb)?lb.forEach(function(Mb){M.push(encodeURIComponent(Ua)+"="+encodeURIComponent(Mb))}):M.push(encodeURIComponent(Ua)+"="+encodeURIComponent(lb))},aa=0,S=Object.entries(Y);aa<S.length;aa++){var za=S[aa],Sa=za[0],pb=za[1];_(Sa,pb)}return M.length?"&"+M.join("&"):""}function gb(Y){var M={},_=Y.replace(/^\?/,"").split("&");return _.forEach(function(aa){if(aa){var S=aa.split("=");M[S[0]]=S[1]}}),M}var hb=function(){function Y(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var M=1;M<this.blockSize;++M)this.pad_[M]=0;this.reset()}return Y.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Y.prototype.compress_=function(M,_){_||(_=0);var aa=this.W_;if(typeof M==="string")for(var S=0;S<16;S++)aa[S]=M.charCodeAt(_)<<24|M.charCodeAt(_+1)<<16|M.charCodeAt(_+2)<<8|M.charCodeAt(_+3),_+=4;else for(var S=0;S<16;S++)aa[S]=M[_]<<24|M[_+1]<<16|M[_+2]<<8|M[_+3],_+=4;for(var S=16;S<80;S++){var za=aa[S-3]^aa[S-8]^aa[S-14]^aa[S-16];aa[S]=(za<<1|za>>>31)&4294967295}for(var Sa=this.chain_[0],pb=this.chain_[1],Ua=this.chain_[2],lb=this.chain_[3],Mb=this.chain_[4],Db,La,S=0;S<80;S++){S<40?S<20?(Db=lb^pb&(Ua^lb),La=1518500249):(Db=pb^Ua^lb,La=1859775393):S<60?(Db=pb&Ua|lb&(pb|Ua),La=2400959708):(Db=pb^Ua^lb,La=3395469782);var za=(Sa<<5|Sa>>>27)+Db+Mb+La+aa[S]&4294967295;Mb=lb,lb=Ua,Ua=(pb<<30|pb>>>2)&4294967295,pb=Sa,Sa=za}this.chain_[0]=this.chain_[0]+Sa&4294967295,this.chain_[1]=this.chain_[1]+pb&4294967295,this.chain_[2]=this.chain_[2]+Ua&4294967295,this.chain_[3]=this.chain_[3]+lb&4294967295,this.chain_[4]=this.chain_[4]+Mb&4294967295},Y.prototype.update=function(M,_){if(M==null)return;_===void 0&&(_=M.length);for(var aa=_-this.blockSize,S=0,za=this.buf_,Sa=this.inbuf_;S<_;){if(Sa===0)for(;S<=aa;)this.compress_(M,S),S+=this.blockSize;if(typeof M==="string")for(;S<_;){za[Sa]=M.charCodeAt(S),++Sa,++S;if(Sa===this.blockSize){this.compress_(za),Sa=0;break}}else for(;S<_;){za[Sa]=M[S],++Sa,++S;if(Sa===this.blockSize){this.compress_(za),Sa=0;break}}}this.inbuf_=Sa,this.total_+=_},Y.prototype.digest=function(){var M=[],_=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var aa=this.blockSize-1;aa>=56;aa--)this.buf_[aa]=_&255,_/=256;this.compress_(this.buf_);for(var S=0,aa=0;aa<5;aa++)for(var za=24;za>=0;za-=8)M[S]=this.chain_[aa]>>za&255,++S;return M},Y}();function Ca(Y,M){var _=new Ja(Y,M);return _.subscribe.bind(_)}var Ja=function(){function Y(M,_){var aa=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=_,this.task.then(function(){M(aa)}).catch(function(S){aa.error(S)})}return Y.prototype.next=function(M){this.forEachObserver(function(_){_.next(M)})},Y.prototype.error=function(M){this.forEachObserver(function(_){_.error(M)}),this.close(M)},Y.prototype.complete=function(){this.forEachObserver(function(M){M.complete()}),this.close()},Y.prototype.subscribe=function(M,_,aa){var S=this,za;if(M===void 0&&_===void 0&&aa===void 0)throw new Error("Missing Observer.");fb(M,["next","error","complete"])?za=M:za={next:M,error:_,complete:aa},za.next===void 0&&(za.next=qa),za.error===void 0&&(za.error=qa),za.complete===void 0&&(za.complete=qa);var Sa=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{S.finalError?za.error(S.finalError):za.complete()}catch(pb){}return}),this.observers.push(za),Sa},Y.prototype.unsubscribeOne=function(M){if(this.observers===void 0||this.observers[M]===void 0)return;delete this.observers[M],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this)},Y.prototype.forEachObserver=function(M){if(this.finalized)return;for(var _=0;_<this.observers.length;_++)this.sendOne(_,M)},Y.prototype.sendOne=function(M,_){var aa=this;this.task.then(function(){if(aa.observers!==void 0&&aa.observers[M]!==void 0)try{_(aa.observers[M])}catch(S){typeof console!=="undefined"&&console.error&&console.error(S)}})},Y.prototype.close=function(M){var _=this;if(this.finalized)return;this.finalized=!0,M!==void 0&&(this.finalError=M),this.task.then(function(){_.observers=void 0,_.onNoObservers=void 0})},Y}();function Za(Y,M){return function(){for(var _=[],aa=0;aa<arguments.length;aa++)_[aa]=arguments[aa];Promise.resolve(!0).then(function(){Y.apply(void 0,_)}).catch(function(S){M&&M(S)})}}function fb(Y,M){if(typeof Y!=="object"||Y===null)return!1;for(var _=0,aa=M;_<aa.length;_++){var S=aa[_];if(S in Y&&typeof Y[S]==="function")return!0}return!1}function qa(){}var ya=function(Y,M,_,aa){var S;aa<M?S="at least "+M:aa>_&&(S=_===0?"none":"no more than "+_);if(S){var za=Y+" failed: Was called with "+aa+(aa===1?" argument.":" arguments.")+" Expects "+S+".";throw new Error(za)}};function Ma(Y,M,_){var aa="";switch(M){case 1:aa=_?"first":"First";break;case 2:aa=_?"second":"Second";break;case 3:aa=_?"third":"Third";break;case 4:aa=_?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var S=Y+" failed: ";return S+=aa+" argument ",S}function ta(Y,M,_,aa){if(aa&&!_)return;if(typeof _!=="string")throw new Error(Ma(Y,M,aa)+"must be a valid firebase namespace.")}function Ea(Y,M,_,aa){if(aa&&!_)return;if(typeof _!=="function")throw new Error(Ma(Y,M,aa)+"must be a valid function.")}function cb(Y,M,_,aa){if(aa&&!_)return;if(typeof _!=="object"||_===null)throw new Error(Ma(Y,M,aa)+"must be a valid context object.")}var Da=function(Y){for(var M=[],_=0,aa=0;aa<Y.length;aa++){var S=Y.charCodeAt(aa);if(S>=55296&&S<=56319){var za=S-55296;aa++,d(aa<Y.length,"Surrogate pair missing trail surrogate.");var Sa=Y.charCodeAt(aa)-56320;S=65536+(za<<10)+Sa}S<128?M[_++]=S:S<2048?(M[_++]=S>>6|192,M[_++]=S&63|128):S<65536?(M[_++]=S>>12|224,M[_++]=S>>6&63|128,M[_++]=S&63|128):(M[_++]=S>>18|240,M[_++]=S>>12&63|128,M[_++]=S>>6&63|128,M[_++]=S&63|128)}return M},Ta=function(Y){for(var M=0,_=0;_<Y.length;_++){var aa=Y.charCodeAt(_);aa<128?M++:aa<2048?M+=2:aa>=55296&&aa<=56319?(M+=4,_++):M+=3}return M};var Ka=1e3,Wa=2,jb=4*60*60*1e3,ub=.5;function ob(Y,M,_){M===void 0&&(M=Ka),_===void 0&&(_=Wa);var aa=M*Math.pow(_,Y),S=Math.round(ub*aa*(Math.random()-.5)*2);return Math.min(jb,aa+S)}sa.CONSTANTS=b;sa.Deferred=H;sa.ErrorFactory=F;sa.FirebaseError=G;sa.MAX_VALUE_MILLIS=jb;sa.RANDOM_FACTOR=ub;sa.Sha1=hb;sa.areCookiesEnabled=P;sa.assert=d;sa.assertionError=f;sa.async=Za;sa.base64=q;sa.base64Decode=v;sa.base64Encode=u;sa.calculateBackoffMillis=ob;sa.contains=da;sa.createSubscribe=Ca;sa.decode=ba;sa.deepCopy=A;sa.deepExtend=E;sa.errorPrefix=Ma;sa.getUA=R;sa.isAdmin=ra;sa.isBrowser=V;sa.isBrowserExtension=X;sa.isElectron=ga;sa.isEmpty=xa;sa.isIE=ka;sa.isIndexedDBAvailable=ja;sa.isMobileCordova=L;sa.isNode=O;sa.isNodeSdk=oa;sa.isReactNative=ea;sa.isSafari=pa;sa.isUWP=ha;sa.isValidFormat=va;sa.isValidTimestamp=Ba;sa.issuedAtTime=$;sa.jsonEval=K;sa.map=ma;sa.querystring=eb;sa.querystringDecode=gb;sa.safeGet=na;sa.stringLength=Ta;sa.stringToByteArray=Da;sa.stringify=ca;sa.validateArgCount=ya;sa.validateCallback=Ea;sa.validateContextObject=cb;sa.validateIndexedDBOpenable=I;sa.validateNamespace=ta});var Kp=Dc(I=>{Ue(I,{__assign:()=>d,__asyncDelegator:()=>ea,__asyncGenerator:()=>X,__asyncValues:()=>ga,__await:()=>V,__awaiter:()=>u,__classPrivateFieldGet:()=>pa,__classPrivateFieldSet:()=>ja,__createBinding:()=>A,__decorate:()=>i,__exportStar:()=>E,__extends:()=>b,__generator:()=>v,__importDefault:()=>oa,__importStar:()=>ha,__makeTemplateObject:()=>ka,__metadata:()=>q,__param:()=>l,__read:()=>R,__rest:()=>f,__spread:()=>L,__spreadArrays:()=>O,__values:()=>H});var a=function(x,G){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,J){F.__proto__=J}||function(F,J){for(var U in J)J.hasOwnProperty(U)&&(F[U]=J[U])},a(x,G)};function b(x,G){a(x,G);function F(){this.constructor=x}x.prototype=G===null?Object.create(G):(F.prototype=G.prototype,new F())}var d=function(){return d=Object.assign||function x(G){for(var F,J=1,U=arguments.length;J<U;J++){F=arguments[J];for(var K in F)Object.prototype.hasOwnProperty.call(F,K)&&(G[K]=F[K])}return G},d.apply(this,arguments)};function f(x,G){var F={};for(var J in x)Object.prototype.hasOwnProperty.call(x,J)&&G.indexOf(J)<0&&(F[J]=x[J]);if(x!=null&&typeof Object.getOwnPropertySymbols==="function")for(var U=0,J=Object.getOwnPropertySymbols(x);U<J.length;U++)G.indexOf(J[U])<0&&Object.prototype.propertyIsEnumerable.call(x,J[U])&&(F[J[U]]=x[J[U]]);return F}function i(x,G,F,J){var U=arguments.length,K=U<3?G:J===null?J=Object.getOwnPropertyDescriptor(G,F):J,ca;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")K=Reflect.decorate(x,G,F,J);else for(var ba=x.length-1;ba>=0;ba--)(ca=x[ba])&&(K=(U<3?ca(K):U>3?ca(G,F,K):ca(G,F))||K);return U>3&&K&&Object.defineProperty(G,F,K),K}function l(x,G){return function(F,J){G(F,J,x)}}function q(x,G){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(x,G)}function u(x,G,F,J){function U(K){return K instanceof F?K:new F(function(ca){ca(K)})}return new(F||(F=Promise))(function(K,ca){function ba(va){try{$(J.next(va))}catch(ra){ca(ra)}}function Ba(va){try{$(J.throw(va))}catch(ra){ca(ra)}}function $(va){va.done?K(va.value):U(va.value).then(ba,Ba)}$((J=J.apply(x,G||[])).next())})}function v(x,G){var F={label:0,sent:function(){if(K[0]&1)throw K[1];return K[1]},trys:[],ops:[]},J,U,K,ca;return ca={next:ba(0),throw:ba(1),return:ba(2)},typeof Symbol==="function"&&(ca[Symbol.iterator]=function(){return this}),ca;function ba($){return function(va){return Ba([$,va])}}function Ba($){if(J)throw new TypeError("Generator is already executing.");for(;F;)try{if(J=1,U&&(K=$[0]&2?U.return:$[0]?U.throw||((K=U.return)&&K.call(U),0):U.next)&&!(K=K.call(U,$[1])).done)return K;(U=0,K)&&($=[$[0]&2,K.value]);switch($[0]){case 0:case 1:K=$;break;case 4:return F.label++,{value:$[1],done:!1};case 5:F.label++,U=$[1],$=[0];continue;case 7:$=F.ops.pop(),F.trys.pop();continue;default:if(!(K=F.trys,K=K.length>0&&K[K.length-1])&&($[0]===6||$[0]===2)){F=0;continue}if($[0]===3&&(!K||$[1]>K[0]&&$[1]<K[3])){F.label=$[1];break}if($[0]===6&&F.label<K[1]){F.label=K[1],K=$;break}if(K&&F.label<K[2]){F.label=K[2],F.ops.push($);break}K[2]&&F.ops.pop(),F.trys.pop();continue}$=G.call(x,F)}catch(va){$=[6,va],U=0}finally{J=K=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}}function A(x,G,F,J){J===void 0&&(J=F),x[J]=G[F]}function E(x,G){for(var F in x)F!=="default"&&!G.hasOwnProperty(F)&&(G[F]=x[F])}function H(x){var G=typeof Symbol==="function"&&Symbol.iterator,F=G&&x[G],J=0;if(F)return F.call(x);if(x&&typeof x.length==="number")return{next:function(){return x&&J>=x.length&&(x=void 0),{value:x&&x[J++],done:!x}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(x,G){var F=typeof Symbol==="function"&&x[Symbol.iterator];if(!F)return x;var J=F.call(x),U,K=[],ca;try{for(;(G===void 0||G-- >0)&&!(U=J.next()).done;)K.push(U.value)}catch(ba){ca={error:ba}}finally{try{U&&!U.done&&(F=J.return)&&F.call(J)}finally{if(ca)throw ca.error}}return K}function L(){for(var x=[],G=0;G<arguments.length;G++)x=x.concat(R(arguments[G]));return x}function O(){for(var x=0,G=0,F=arguments.length;G<F;G++)x+=arguments[G].length;for(var J=Array(x),U=0,G=0;G<F;G++)for(var K=arguments[G],ca=0,ba=K.length;ca<ba;ca++,U++)J[U]=K[ca];return J}function V(x){return this instanceof V?(this.v=x,this):new V(x)}function X(x,G,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=F.apply(x,G||[]),U,K=[];return U={},ca("next"),ca("throw"),ca("return"),U[Symbol.asyncIterator]=function(){return this},U;function ca(da){J[da]&&(U[da]=function(na){return new Promise(function(xa,ma){K.push([da,na,xa,ma])>1||ba(da,na)})})}function ba(da,na){try{Ba(J[da](na))}catch(xa){ra(K[0][3],xa)}}function Ba(da){da.value instanceof V?Promise.resolve(da.value.v).then($,va):ra(K[0][2],da)}function $(da){ba("next",da)}function va(da){ba("throw",da)}function ra(da,na){(da(na),K.shift(),K.length)&&ba(K[0][0],K[0][1])}}function ea(x){var G,F;return G={},J("next"),J("throw",function(U){throw U}),J("return"),G[Symbol.iterator]=function(){return this},G;function J(U,K){G[U]=x[U]?function(ca){return(F=!F)?{value:V(x[U](ca)),done:U==="return"}:K?K(ca):ca}:K}}function ga(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var G=x[Symbol.asyncIterator],F;return G?G.call(x):(x=typeof H==="function"?H(x):x[Symbol.iterator](),F={},J("next"),J("throw"),J("return"),F[Symbol.asyncIterator]=function(){return this},F);function J(K){F[K]=x[K]&&function(ca){return new Promise(function(ba,Ba){ca=x[K](ca),U(ba,Ba,ca.done,ca.value)})}}function U(K,ca,ba,Ba){Promise.resolve(Ba).then(function($){K({value:$,done:ba})},ca)}}function ka(x,G){return Object.defineProperty?Object.defineProperty(x,"raw",{value:G}):x.raw=G,x}function ha(x){if(x&&x.__esModule)return x;var G={};if(x!=null)for(var F in x)Object.hasOwnProperty.call(x,F)&&(G[F]=x[F]);return G.default=x,G}function oa(x){return x&&x.__esModule?x:{default:x}}function pa(x,G){if(!G.has(x))throw new TypeError("attempted to get private field on non-instance");return G.get(x)}function ja(x,G,F){if(!G.has(x))throw new TypeError("attempted to set private field on non-instance");return G.set(x,F),F}});var Jp=Dc(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});var a=Kp(),b=Jk(),d=function(){function E(H,R,L){this.name=H,this.instanceFactory=R,this.type=L,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return E.prototype.setInstantiationMode=function(H){return this.instantiationMode=H,this},E.prototype.setMultipleInstances=function(H){return this.multipleInstances=H,this},E.prototype.setServiceProps=function(H){return this.serviceProps=H,this},E}();var f="[DEFAULT]";var i=function(){function E(H,R){this.name=H,this.container=R,this.component=null,this.instances=new Map(),this.instancesDeferred=new Map()}return E.prototype.get=function(H){H===void 0&&(H=f);var R=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(R)){var L=new b.Deferred();this.instancesDeferred.set(R,L);try{var O=this.getOrInitializeService(R);O&&L.resolve(O)}catch(V){}}return this.instancesDeferred.get(R).promise},E.prototype.getImmediate=function(H){var R=a.__assign({identifier:f,optional:!1},H),L=R.identifier,O=R.optional,V=this.normalizeInstanceIdentifier(L);try{var X=this.getOrInitializeService(V);if(!X){if(O)return null;throw Error("Service "+this.name+" is not available")}return X}catch(ea){if(O)return null;throw ea}},E.prototype.getComponent=function(){return this.component},E.prototype.setComponent=function(H){var R,L;if(H.name!==this.name)throw Error("Mismatching Component "+H.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");this.component=H;if(q(H))try{this.getOrInitializeService(f)}catch(oa){}try{for(var O=a.__values(this.instancesDeferred.entries()),V=O.next();!V.done;V=O.next()){var X=a.__read(V.value,2),ea=X[0],ga=X[1],ka=this.normalizeInstanceIdentifier(ea);try{var ha=this.getOrInitializeService(ka);ga.resolve(ha)}catch(oa){}}}catch(oa){R={error:oa}}finally{try{V&&!V.done&&(L=O.return)&&L.call(O)}finally{if(R)throw R.error}}},E.prototype.clearInstance=function(H){H===void 0&&(H=f),this.instancesDeferred.delete(H),this.instances.delete(H)},E.prototype.delete=function(){return a.__awaiter(this,void 0,void 0,function(){var H;return a.__generator(this,function(R){switch(R.label){case 0:return H=Array.from(this.instances.values()),[4,Promise.all(a.__spread(H.filter(function(L){return"INTERNAL"in L}).map(function(L){return L.INTERNAL.delete()}),H.filter(function(L){return"_delete"in L}).map(function(L){return L._delete()})))];case 1:return R.sent(),[2]}})})},E.prototype.isComponentSet=function(){return this.component!=null},E.prototype.getOrInitializeService=function(H){var R=this.instances.get(H);return!R&&this.component&&(R=this.component.instanceFactory(this.container,l(H)),this.instances.set(H,R)),R||null},E.prototype.normalizeInstanceIdentifier=function(H){return this.component?this.component.multipleInstances?H:f:H},E}();function l(E){return E===f?void 0:E}function q(E){return E.instantiationMode==="EAGER"}var u=function(){function E(H){this.name=H,this.providers=new Map()}return E.prototype.addComponent=function(H){var R=this.getProvider(H.name);if(R.isComponentSet())throw new Error("Component "+H.name+" has already been registered with "+this.name);R.setComponent(H)},E.prototype.addOrOverwriteComponent=function(H){var R=this.getProvider(H.name);R.isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)},E.prototype.getProvider=function(H){if(this.providers.has(H))return this.providers.get(H);var R=new i(H,this);return this.providers.set(H,R),R},E.prototype.getProviders=function(){return Array.from(this.providers.values())},E}();v.Component=d;v.ComponentContainer=u;v.Provider=i});var Lp=Dc(H=>{Ue(H,{LogLevel:()=>f,Logger:()=>v,setLogLevel:()=>A,setUserLogHandler:()=>E});function a(){for(var L=0,O=0,V=arguments.length;O<V;O++)L+=arguments[O].length;for(var X=Array(L),ea=0,O=0;O<V;O++)for(var ga=arguments[O],ka=0,ha=ga.length;ka<ha;ka++,ea++)X[ea]=ga[ka];return X}var b,d=[],f;(function(L){L[L.DEBUG=0]="DEBUG",L[L.VERBOSE=1]="VERBOSE",L[L.INFO=2]="INFO",L[L.WARN=3]="WARN",L[L.ERROR=4]="ERROR",L[L.SILENT=5]="SILENT"})(f||(f={}));var i={debug:f.DEBUG,verbose:f.VERBOSE,info:f.INFO,warn:f.WARN,error:f.ERROR,silent:f.SILENT},l=f.INFO,q=(b={},b[f.DEBUG]="log",b[f.VERBOSE]="log",b[f.INFO]="info",b[f.WARN]="warn",b[f.ERROR]="error",b),u=function(L,O){for(var V=[],X=2;X<arguments.length;X++)V[X-2]=arguments[X];if(O<L.logLevel)return;var ea=new Date().toISOString(),ga=q[O];if(ga)console[ga].apply(console,a(["["+ea+"]  "+L.name+":"],V));else throw new Error("Attempted to log a message with an invalid logType (value: "+O+")")},v=function(){function L(O){this.name=O,this._logLevel=l,this._logHandler=u,this._userLogHandler=null,d.push(this)}return Object.defineProperty(L.prototype,"logLevel",{get:function(){return this._logLevel},set:function(O){if(!(O in f))throw new TypeError('Invalid value "'+O+'" assigned to `logLevel`');this._logLevel=O},enumerable:!1,configurable:!0}),L.prototype.setLogLevel=function(O){this._logLevel=typeof O==="string"?i[O]:O},Object.defineProperty(L.prototype,"logHandler",{get:function(){return this._logHandler},set:function(O){if(typeof O!=="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=O},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(O){this._userLogHandler=O},enumerable:!1,configurable:!0}),L.prototype.debug=function(){for(var O=[],V=0;V<arguments.length;V++)O[V]=arguments[V];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.DEBUG],O)),this._logHandler.apply(this,a([this,f.DEBUG],O))},L.prototype.log=function(){for(var O=[],V=0;V<arguments.length;V++)O[V]=arguments[V];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.VERBOSE],O)),this._logHandler.apply(this,a([this,f.VERBOSE],O))},L.prototype.info=function(){for(var O=[],V=0;V<arguments.length;V++)O[V]=arguments[V];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.INFO],O)),this._logHandler.apply(this,a([this,f.INFO],O))},L.prototype.warn=function(){for(var O=[],V=0;V<arguments.length;V++)O[V]=arguments[V];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.WARN],O)),this._logHandler.apply(this,a([this,f.WARN],O))},L.prototype.error=function(){for(var O=[],V=0;V<arguments.length;V++)O[V]=arguments[V];this._userLogHandler&&this._userLogHandler.apply(this,a([this,f.ERROR],O)),this._logHandler.apply(this,a([this,f.ERROR],O))},L}();function A(L){d.forEach(function(O){O.setLogLevel(L)})}function E(L,O){for(var V=function(ka){var ha=null;O&&O.level&&(ha=i[O.level]),L===null?ka.userLogHandler=null:ka.userLogHandler=function(oa,pa){for(var ja=[],I=2;I<arguments.length;I++)ja[I-2]=arguments[I];var P=ja.map(function(x){if(x==null)return null;{if(typeof x==="string")return x;{if(typeof x==="number"||typeof x==="boolean")return x.toString();{if(x instanceof Error)return x.message;try{return JSON.stringify(x)}catch(G){return null}}}}}).filter(function(x){return x}).join(" ");pa>=(ha!==null&&ha!==void 0?ha:oa.logLevel)&&L({level:f[pa].toLowerCase(),message:P,args:ja,type:oa.name})}},X=0,ea=d;X<ea.length;X++){var ga=ea[X];V(ga)}}});var Hp=Dc($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});var a=Ip(),b=Jk(),d=Jp(),f=Lp();var i,l=(i={},i["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",i),q=new b.ErrorFactory("app","Firebase",l),u="@firebase/app",v="0.6.11",A="@firebase/analytics",E="@firebase/auth",H="@firebase/database",R="@firebase/functions",L="@firebase/installations",O="@firebase/messaging",V="@firebase/performance",X="@firebase/remote-config",ea="@firebase/storage",ga="@firebase/firestore",ka="firebase-wrapper";var ha,oa="[DEFAULT]",pa=(ha={},ha[u]="fire-core",ha[A]="fire-analytics",ha[E]="fire-auth",ha[H]="fire-rtdb",ha[R]="fire-fn",ha[L]="fire-iid",ha[O]="fire-fcm",ha[V]="fire-perf",ha[X]="fire-rc",ha[ea]="fire-gcs",ha[ga]="fire-fst",ha["fire-js"]="fire-js",ha[ka]="fire-js-all",ha);var ja=new f.Logger("@firebase/app");var I=function(){function ra(da,na,xa){var ma,eb,gb=this;this.firebase_=xa,this.isDeleted_=!1,this.name_=na.name,this.automaticDataCollectionEnabled_=na.automaticDataCollectionEnabled||!1,this.options_=b.deepCopy(da),this.container=new d.ComponentContainer(na.name),this._addComponent(new d.Component("app",function(){return gb},"PUBLIC"));try{for(var hb=a.__values(this.firebase_.INTERNAL.components.values()),Ca=hb.next();!Ca.done;Ca=hb.next()){var Ja=Ca.value;this._addComponent(Ja)}}catch(Za){ma={error:Za}}finally{try{Ca&&!Ca.done&&(eb=hb.return)&&eb.call(hb)}finally{if(ma)throw ma.error}}}return Object.defineProperty(ra.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(da){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=da},enumerable:!1,configurable:!0}),Object.defineProperty(ra.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(ra.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),ra.prototype.delete=function(){var da=this;return new Promise(function(na){da.checkDestroyed_(),na()}).then(function(){return da.firebase_.INTERNAL.removeApp(da.name_),Promise.all(da.container.getProviders().map(function(na){return na.delete()}))}).then(function(){da.isDeleted_=!0})},ra.prototype._getService=function(da,na){return na===void 0&&(na=oa),this.checkDestroyed_(),this.container.getProvider(da).getImmediate({identifier:na})},ra.prototype._removeServiceInstance=function(da,na){na===void 0&&(na=oa),this.container.getProvider(da).clearInstance(na)},ra.prototype._addComponent=function(da){try{this.container.addComponent(da)}catch(na){ja.debug("Component "+da.name+" failed to register with FirebaseApp "+this.name,na)}},ra.prototype._addOrOverwriteComponent=function(da){this.container.addOrOverwriteComponent(da)},ra.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw q.create("app-deleted",{appName:this.name_})},ra}();I.prototype.name&&I.prototype.options||I.prototype.delete||console.log("dc");var P="7.20.0";function x(ra){var da={},na=new Map(),xa={__esModule:!0,initializeApp:gb,app:eb,registerVersion:Ja,setLogLevel:f.setLogLevel,onLog:Za,apps:null,SDK_VERSION:P,INTERNAL:{registerComponent:Ca,removeApp:ma,components:na,useAsService:fb}};xa.default=xa,Object.defineProperty(xa,"apps",{get:hb});function ma(qa){delete da[qa]}function eb(qa){qa=qa||oa;if(!b.contains(da,qa))throw q.create("no-app",{appName:qa});return da[qa]}eb.App=ra;function gb(qa,ya){ya===void 0&&(ya={});if(typeof ya!=="object"||ya===null){var Ma=ya;ya={name:Ma}}var ta=ya;ta.name===void 0&&(ta.name=oa);var Ea=ta.name;if(typeof Ea!=="string"||!Ea)throw q.create("bad-app-name",{appName:String(Ea)});if(b.contains(da,Ea))throw q.create("duplicate-app",{appName:Ea});var cb=new ra(qa,ta,xa);return da[Ea]=cb,cb}function hb(){return Object.keys(da).map(function(qa){return da[qa]})}function Ca(qa){var ya,Ma,ta=qa.name;if(na.has(ta))return ja.debug("There were multiple attempts to register component "+ta+"."),qa.type==="PUBLIC"?xa[ta]:null;na.set(ta,qa);if(qa.type==="PUBLIC"){var Ea=function(Ka){Ka===void 0&&(Ka=eb());if(typeof Ka[ta]!=="function")throw q.create("invalid-app-argument",{appName:ta});return Ka[ta]()};qa.serviceProps!==void 0&&b.deepExtend(Ea,qa.serviceProps),xa[ta]=Ea,ra.prototype[ta]=function(){for(var Ka=[],Wa=0;Wa<arguments.length;Wa++)Ka[Wa]=arguments[Wa];var jb=this._getService.bind(this,ta);return jb.apply(this,qa.multipleInstances?Ka:[])}}try{for(var cb=a.__values(Object.keys(da)),Da=cb.next();!Da.done;Da=cb.next()){var Ta=Da.value;da[Ta]._addComponent(qa)}}catch(Ka){ya={error:Ka}}finally{try{Da&&!Da.done&&(Ma=cb.return)&&Ma.call(cb)}finally{if(ya)throw ya.error}}return qa.type==="PUBLIC"?xa[ta]:null}function Ja(qa,ya,Ma){var ta,Ea=(ta=pa[qa])!==null&&ta!==void 0?ta:qa;Ma&&(Ea+="-"+Ma);var cb=Ea.match(/\s|\//),Da=ya.match(/\s|\//);if(cb||Da){var Ta=['Unable to register library "'+Ea+'" with version "'+ya+'":'];cb&&Ta.push('library name "'+Ea+'" contains illegal characters (whitespace or "/")'),cb&&Da&&Ta.push("and"),Da&&Ta.push('version name "'+ya+'" contains illegal characters (whitespace or "/")'),ja.warn(Ta.join(" "));return}Ca(new d.Component(Ea+"-version",function(){return{library:Ea,version:ya}},"VERSION"))}function Za(qa,ya){if(qa!==null&&typeof qa!=="function")throw q.create("invalid-log-argument",{appName:name});f.setUserLogHandler(qa,ya)}function fb(qa,ya){if(ya==="serverAuth")return null;var Ma=ya;return Ma}return xa}function G(){var ra=x(I);ra.INTERNAL=a.__assign(a.__assign({},ra.INTERNAL),{createFirebaseNamespace:G,extendNamespace:da,createSubscribe:b.createSubscribe,ErrorFactory:b.ErrorFactory,deepExtend:b.deepExtend});function da(na){b.deepExtend(ra,na)}return ra}var F=G();var J=function(){function ra(da){this.container=da}return ra.prototype.getPlatformInfoString=function(){var da=this.container.getProviders();return da.map(function(na){if(U(na)){var xa=na.getImmediate();return xa.library+"/"+xa.version}else return null}).filter(function(na){return na}).join(" ")},ra}();function U(ra){var da=ra.getComponent();return(da===null||da===void 0?void 0:da.type)==="VERSION"}function K(ra,da){ra.INTERNAL.registerComponent(new d.Component("platform-logger",function(na){return new J(na)},"PRIVATE")),ra.registerVersion(u,v,da),ra.registerVersion("fire-js","")}if(b.isBrowser()&&self.firebase!==void 0){ja.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var ca=self.firebase.SDK_VERSION;ca&&ca.indexOf("LITE")>=0&&ja.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var ba=F.initializeApp;F.initializeApp=function(){for(var ra=[],da=0;da<arguments.length;da++)ra[da]=arguments[da];return b.isNode()&&ja.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/rollup-plugin-node-resolve
      `),ba.apply(void 0,ra)};var Ba=F;K(Ba);$.default=Ba;$.firebase=Ba});var ec=Dc((l,q)=>{"use strict";var a=Hp();function b(u){return u&&typeof u==="object"&&"default"in u?u:{default:u}}var d=b(a),f="firebase",i="7.22.1";d.default.registerVersion(f,i,"app");q.exports=d.default});var bw=Dc((b,d)=>{var a=function(){function f(A,E){if(!u[A]){u[A]={};for(var H=0;H<A.length;H++)u[A][A.charAt(H)]=H}return u[A][E]}var i=String.fromCharCode,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",u={},v={compressToBase64:function(A){if(null==A)return"";var E=v._compress(A,6,function(H){return l.charAt(H)});switch(E.length%4){default:case 0:return E;case 1:return E+"===";case 2:return E+"==";case 3:return E+"="}},decompressFromBase64:function(A){return null==A?"":""==A?null:v._decompress(A.length,32,function(E){return f(l,A.charAt(E))})},compressToUTF16:function(A){return null==A?"":v._compress(A,15,function(E){return i(E+32)})+" "},decompressFromUTF16:function(A){return null==A?"":""==A?null:v._decompress(A.length,16384,function(E){return A.charCodeAt(E)-32})},compressToUint8Array:function(A){for(var E=v.compress(A),H=new Uint8Array(2*E.length),R=0,L=E.length;L>R;R++){var O=E.charCodeAt(R);H[2*R]=O>>>8,H[2*R+1]=O%256}return H},decompressFromUint8Array:function(A){if(null===A||void 0===A)return v.decompress(A);for(var E=new Array(A.length/2),H=0,R=E.length;R>H;H++)E[H]=256*A[2*H]+A[2*H+1];var L=[];return E.forEach(function(O){L.push(i(O))}),v.decompress(L.join(""))},compressToEncodedURIComponent:function(A){return null==A?"":v._compress(A,6,function(E){return q.charAt(E)})},decompressFromEncodedURIComponent:function(A){return null==A?"":""==A?null:(A=A.replace(/ /g,"+"),v._decompress(A.length,32,function(E){return f(q,A.charAt(E))}))},compress:function(A){return v._compress(A,16,function(E){return i(E)})},_compress:function(A,E,H){if(null==A)return"";var R,L,O,V={},X={},ea="",ga="",ka="",ha=2,oa=3,pa=2,ja=[],I=0,P=0;for(O=0;O<A.length;O+=1)if(ea=A.charAt(O),Object.prototype.hasOwnProperty.call(V,ea)||(V[ea]=oa++,X[ea]=!0),ga=ka+ea,Object.prototype.hasOwnProperty.call(V,ga))ka=ga;else{if(Object.prototype.hasOwnProperty.call(X,ka)){if(ka.charCodeAt(0)<256){for(R=0;pa>R;R++)I<<=1,P==E-1?(P=0,ja.push(H(I)),I=0):P++;for(L=ka.charCodeAt(0),R=0;8>R;R++)I=I<<1|1&L,P==E-1?(P=0,ja.push(H(I)),I=0):P++,L>>=1}else{for(L=1,R=0;pa>R;R++)I=I<<1|L,P==E-1?(P=0,ja.push(H(I)),I=0):P++,L=0;for(L=ka.charCodeAt(0),R=0;16>R;R++)I=I<<1|1&L,P==E-1?(P=0,ja.push(H(I)),I=0):P++,L>>=1}ha--,0==ha&&(ha=Math.pow(2,pa),pa++),delete X[ka]}else for(L=V[ka],R=0;pa>R;R++)I=I<<1|1&L,P==E-1?(P=0,ja.push(H(I)),I=0):P++,L>>=1;ha--,0==ha&&(ha=Math.pow(2,pa),pa++),V[ga]=oa++,ka=String(ea)}if(""!==ka){if(Object.prototype.hasOwnProperty.call(X,ka)){if(ka.charCodeAt(0)<256){for(R=0;pa>R;R++)I<<=1,P==E-1?(P=0,ja.push(H(I)),I=0):P++;for(L=ka.charCodeAt(0),R=0;8>R;R++)I=I<<1|1&L,P==E-1?(P=0,ja.push(H(I)),I=0):P++,L>>=1}else{for(L=1,R=0;pa>R;R++)I=I<<1|L,P==E-1?(P=0,ja.push(H(I)),I=0):P++,L=0;for(L=ka.charCodeAt(0),R=0;16>R;R++)I=I<<1|1&L,P==E-1?(P=0,ja.push(H(I)),I=0):P++,L>>=1}ha--,0==ha&&(ha=Math.pow(2,pa),pa++),delete X[ka]}else for(L=V[ka],R=0;pa>R;R++)I=I<<1|1&L,P==E-1?(P=0,ja.push(H(I)),I=0):P++,L>>=1;ha--,0==ha&&(ha=Math.pow(2,pa),pa++)}for(L=2,R=0;pa>R;R++)I=I<<1|1&L,P==E-1?(P=0,ja.push(H(I)),I=0):P++,L>>=1;for(;;){if(I<<=1,P==E-1){ja.push(H(I));break}P++}return ja.join("")},decompress:function(A){return null==A?"":""==A?null:v._decompress(A.length,32768,function(E){return A.charCodeAt(E)})},_decompress:function(A,E,H){var R,L,O,V,X,ea,ga,ka,ha=[],oa=4,pa=4,ja=3,I="",P=[],x={val:H(0),position:E,index:1};for(L=0;3>L;L+=1)ha[L]=L;for(V=0,ea=Math.pow(2,2),ga=1;ga!=ea;)X=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),V|=(X>0?1:0)*ga,ga<<=1;switch(R=V){case 0:for(V=0,ea=Math.pow(2,8),ga=1;ga!=ea;)X=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),V|=(X>0?1:0)*ga,ga<<=1;ka=i(V);break;case 1:for(V=0,ea=Math.pow(2,16),ga=1;ga!=ea;)X=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),V|=(X>0?1:0)*ga,ga<<=1;ka=i(V);break;case 2:return""}for(ha[3]=ka,O=ka,P.push(ka);;){if(x.index>A)return"";for(V=0,ea=Math.pow(2,ja),ga=1;ga!=ea;)X=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),V|=(X>0?1:0)*ga,ga<<=1;switch(ka=V){case 0:for(V=0,ea=Math.pow(2,8),ga=1;ga!=ea;)X=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),V|=(X>0?1:0)*ga,ga<<=1;ha[pa++]=i(V),ka=pa-1,oa--;break;case 1:for(V=0,ea=Math.pow(2,16),ga=1;ga!=ea;)X=x.val&x.position,x.position>>=1,0==x.position&&(x.position=E,x.val=H(x.index++)),V|=(X>0?1:0)*ga,ga<<=1;ha[pa++]=i(V),ka=pa-1,oa--;break;case 2:return P.join("")}if(0==oa&&(oa=Math.pow(2,ja),ja++),ha[ka])I=ha[ka];else{if(ka!==pa)return null;I=O+O.charAt(0)}P.push(I),ha[pa++]=O+I.charAt(0),oa--,O=I,0==oa&&(oa=Math.pow(2,ja),ja++)}}};return v}();"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof d&&null!=d&&(d.exports=a)});let Rp,Sp=0,Tp=0;const yb={get:()=>Rp,set:a=>{Rp=a},getFrame:()=>Sp,setFrame:a=>{Sp=a},getElapsed:()=>Tp,setElapsed:a=>{Tp=a}};let Xp=0;function Dk(a=0){return()=>{Xp=a}}function Gh(){return Xp}let Ok="Phaser",fw="https://phaser4.io",gw="#fff",hw="linear-gradient(#3e0081 40%, #00bcc3)";function Kk(){if(Ok!==""){const a=yb.get(),b=Ok==="Phaser"?" v"+a.VERSION:"";console.log(`%c${Ok}${b}%c ${fw}`,`padding: 4px 16px; color: ${gw}; background: ${hw}`,"")}}let aq=800,bq=600,cq=1;function Gk(a=800,b=600,d=1){return d===0&&(d=window.devicePixelRatio),()=>{aq=a,bq=b,cq=d}}function Jd(){return aq}function Kd(){return bq}function Ld(){return cq}const cl=[],qf={add:a=>{cl.push(a)},get:()=>cl,clear:()=>{cl.length=0}};let $p;function Hh(a){$p=a}function Lk(){return $p}let Pk=.5,Qk=.5;let Yp=0;function Rk(a){Yp=a}function jg(){return Yp}function Ih(a){let b;return a&&(typeof a==="string"?b=document.getElementById(a):typeof a==="object"&&a.nodeType===1&&(b=a)),b||(b=document.body),b}let Zp;function Ek(a){return()=>{a&&(Zp=Ih(a))}}function Mk(){return Zp}let _p=[];function Fk(a){return()=>{_p=[].concat(a)}}function Sk(){return _p}let jw={alpha:!1,antialias:!1,depth:!1,premultipliedAlpha:!1};function Tk(){return jw}class xq{constructor(a){this.stack=[],this.current=null,this.renderer=a}reset(){this.stack=[],this.current=null;const a=this.renderer,b=a.gl;b.bindFramebuffer(b.FRAMEBUFFER,null),b.viewport(0,0,a.width,a.height)}add(a,b=!0,d=0,f=0){this.stack.push({framebuffer:a,width:d,height:f}),this.set(a,b,d,f)}set(a,b=!0,d=0,f=0){const i=this.renderer,l=i.gl;l.bindFramebuffer(l.FRAMEBUFFER,a),b&&(l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT)),d>0&&l.viewport(0,0,d,f),this.current=a}pop(){this.stack.pop();const a=this.stack.length;if(a>0){const b=this.stack[a-1];this.set(b.framebuffer,!1,b.width,b.height)}else this.reset()}rebind(){const a=this.renderer.gl;a.bindFramebuffer(a.FRAMEBUFFER,this.current)}destroy(){this.stack=[]}}let wq;const Hb={get:()=>wq,set:a=>{wq=a}};function yq(a,b=[]){const d=a>>16&255,f=a>>8&255,i=a&255,l=a>16777215?a>>>24:255;return b[0]=d/255,b[1]=f/255,b[2]=i/255,b[3]=l/255,b}function tq(a,b){return a.a===b.a&&a.b===b.b&&a.c===b.c&&a.d===b.d&&a.tx===b.tx&&a.ty===b.ty}function Rh(a,b){const d=Hb.get();b||(b=d.COLOR_ATTACHMENT0);const f=d.createFramebuffer();return d.bindFramebuffer(d.FRAMEBUFFER,f),d.framebufferTexture2D(d.FRAMEBUFFER,b,d.TEXTURE_2D,a,0),d.bindFramebuffer(d.FRAMEBUFFER,null),f}function Xh(a){const b=Hb.get();if(!b)return;const{parent:d,flipY:f,unpackPremultiplyAlpha:i,minFilter:l,magFilter:q,wrapS:u,wrapT:v,generateMipmap:A,isPOT:E}=a,H=d.image;let R=d.width,L=d.height;const O=b.createTexture();return b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,O),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,f),b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),H?(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,H),R=H.width,L=H.height):b.texImage2D(b.TEXTURE_2D,0,b.RGBA,R,L,0,b.RGBA,b.UNSIGNED_BYTE,null),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,l),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,q),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,u),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,v),A&&E&&b.generateMipmap(b.TEXTURE_2D),a.texture=O,O}function ue(a){const b=Hb.get();b&&b.isFramebuffer(a)&&b.deleteFramebuffer(a)}function dl(a){const b=Hb.get();if(!b)return;b.isTexture(a)&&b.deleteTexture(a)}function uq(a,b){return a<1||b<1?!1:(a&a-1)===0&&(b&b-1)===0}function Hq(a,b=!0){const d=Hb.get();d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,a);const f=b?d.LINEAR:d.NEAREST;d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,f),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,f)}function Iq(a){const b=Hb.get(),d=a.parent.image,f=d.width,i=d.height;return f>0&&i>0&&(b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,a.texture),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,a.flipY),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,d)),a.texture}class pf{constructor(a,b={}){this.index=0,this.indexCounter=-1,this.dirtyIndex=!0,this.unpackPremultiplyAlpha=!0,this.flipY=!1,this.isPOT=!1,this.generateMipmap=!1;const d=Hb.get();this.parent=a,this.isPOT=uq(a.width,a.height);const{texture:f=null,framebuffer:i=null,unpackPremultiplyAlpha:l=!0,minFilter:q=d.LINEAR,magFilter:u=d.LINEAR,wrapS:v=d.CLAMP_TO_EDGE,wrapT:A=d.CLAMP_TO_EDGE,generateMipmap:E=this.isPOT,flipY:H=!1}=b;this.minFilter=q,this.magFilter=u,this.wrapS=v,this.wrapT=A,this.generateMipmap=E,this.flipY=H,this.unpackPremultiplyAlpha=l,i&&(this.framebuffer=i),f?this.texture=f:Xh(this)}setFilter(a){this.texture&&Hq(this.texture,a)}create(){const a=this.texture;return a&&dl(a),Xh(this)}update(){const a=this.texture;return a?Iq(this):Xh(this)}setIndex(a){this.dirtyIndex=a!==this.index,this.index=a}destroy(){dl(this.texture),ue(this.framebuffer),this.parent=null,this.texture=null,this.framebuffer=null}}class Eq{constructor(a,b,d,f,i){this.batchSize=a,this.dataSize=b,this.indexSize=d,this.vertexElementSize=f,this.quadIndexSize=i,this.vertexByteSize=f*b,this.quadByteSize=this.vertexByteSize*4,this.quadElementSize=f*4,this.bufferByteSize=a*this.quadByteSize,this.create()}create(){let a=[];for(let d=0;d<this.batchSize*this.indexSize;d+=this.indexSize)a.push(d+0,d+1,d+2,d+2,d+3,d+0);this.data=new ArrayBuffer(this.bufferByteSize),this.index=new Uint16Array(a),this.vertexViewF32=new Float32Array(this.data),this.vertexViewU32=new Uint32Array(this.data);const b=Hb.get();this.vertexBuffer=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer),b.bufferData(b.ARRAY_BUFFER,this.data,b.DYNAMIC_DRAW),this.indexBuffer=b.createBuffer(),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.index,b.STATIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,null),a=[]}destroy(){}}class el{constructor(a,b,d,f,i,l){this.trimmed=!1,this.texture=a,this.key=b,this.x=d,this.y=f,this.width=i,this.height=l,this.sourceSizeWidth=i,this.sourceSizeHeight=l,this.updateUVs()}setPivot(a,b){this.pivot={x:a,y:b}}setSize(a,b){this.width=a,this.height=b,this.sourceSizeWidth=a,this.sourceSizeHeight=b,this.updateUVs()}setSourceSize(a,b){this.sourceSizeWidth=a,this.sourceSizeHeight=b}setTrim(a,b,d,f,i,l){this.trimmed=!0,this.sourceSizeWidth=a,this.sourceSizeHeight=b,this.spriteSourceSizeX=d,this.spriteSourceSizeY=f,this.spriteSourceSizeWidth=i,this.spriteSourceSizeHeight=l}getExtent(a,b){const d=this.sourceSizeWidth,f=this.sourceSizeHeight;let i,l,q,u;return this.trimmed?(i=this.spriteSourceSizeX-a*d,l=i+this.spriteSourceSizeWidth,q=this.spriteSourceSizeY-b*f,u=q+this.spriteSourceSizeHeight):(i=-a*d,l=i+d,q=-b*f,u=q+f),{left:i,right:l,top:q,bottom:u}}setExtent(a){const b=a.transform,d=b.origin.x,f=b.origin.y,i=this.sourceSizeWidth,l=this.sourceSizeHeight;let q,u,v,A;this.trimmed?(q=this.spriteSourceSizeX-d*i,u=this.spriteSourceSizeY-f*l,v=this.spriteSourceSizeWidth,A=this.spriteSourceSizeHeight):(q=-d*i,u=-f*l,v=i,A=l),b.setExtent(q,u,v,A)}updateUVs(){const{x:a,y:b,width:d,height:f}=this,i=this.texture.width,l=this.texture.height;this.u0=a/i,this.v0=b/l,this.u1=(a+d)/i,this.v1=(b+f)/l}}class $b{constructor(a,b,d){this.key="",a&&(b=a.width,d=a.height),this.image=a,this.width=b,this.height=d,this.frames=new Map(),this.data={},this.addFrame("__BASE",0,0,b,d),qf.add(this)}addFrame(a,b,d,f,i){if(this.frames.has(a))return null;const l=new el(this,a,b,d,f,i);return this.frames.set(a,l),(!this.firstFrame||this.firstFrame.key==="__BASE")&&(this.firstFrame=l),l}getFrame(a){if(!a)return this.firstFrame;a instanceof el&&(a=a.key);let b=this.frames.get(a);return b||(console.warn(`Frame missing: ${a}`),b=this.firstFrame),b}setSize(a,b){this.width=a,this.height=b;const d=this.frames.get("__BASE");d.setSize(a,b)}destroy(){this.binding&&this.binding.destroy(),this.frames.clear(),this.data=null,this.image=null,this.firstFrame=null}}let Dq;const rg={get:()=>Dq,set:a=>{Dq=a}};const Gq={fragmentShader:`\r
#define SHADER_NAME SINGLE_QUAD_FRAG\r
\r
precision highp float;\r
\r
varying vec2 vTextureCoord;\r
varying float vTextureId;\r
varying vec4 vTintColor;\r
\r
uniform sampler2D uTexture;\r
\r
void main (void)\r
{\r
    vec4 color = texture2D(uTexture, vTextureCoord);\r
\r
    gl_FragColor = color * vec4(vTintColor.bgr * vTintColor.a, vTintColor.a);\r
}`,vertexShader:`\r
#define SHADER_NAME SINGLE_QUAD_VERT\r
\r
precision highp float;\r
\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
attribute float aTextureId;\r
attribute vec4 aTintColor;\r
\r
uniform mat4 uProjectionMatrix;\r
uniform mat4 uCameraMatrix;\r
\r
varying vec2 vTextureCoord;\r
varying float vTextureId;\r
varying vec4 vTintColor;\r
\r
void main (void)\r
{\r
    vTextureCoord = aTextureCoord;\r
    vTextureId = aTextureId;\r
    vTintColor = aTintColor;\r
\r
    gl_Position = uProjectionMatrix * uCameraMatrix * vec4(aVertexPosition, 0.0, 1.0);\r
}`};class Wh{constructor(a={}){this.attribs={aVertexPosition:0,aTextureCoord:0,aTextureId:0,aTintColor:0},this.uniforms={uProjectionMatrix:0,uCameraMatrix:0,uTexture:0,uTime:0,uResolution:0},this.renderToFBO=!1,this.renderer=rg.get();const{batchSize:b=4096,dataSize:d=4,indexSize:f=4,vertexElementSize:i=6,quadIndexSize:l=6,fragmentShader:q=Gq.fragmentShader,vertexShader:u=Gq.vertexShader,width:v=Jd(),height:A=Kd(),resolution:E=Ld(),renderToFBO:H=!1}=a;this.buffer=new Eq(b,d,f,i,l),this.createShaders(q,u),this.count=0,this.renderToFBO=H;const R=new $b(null,v*E,A*E),L=new pf(R);R.binding=L,L.framebuffer=Rh(L.texture),this.texture=R,this.framebuffer=L.framebuffer}createShaders(a,b){const d=this.renderer.gl,f=d.createShader(d.FRAGMENT_SHADER);d.shaderSource(f,a),d.compileShader(f);let i=!1,l=d.getShaderInfoLog(f);l.length>0&&(i=!0,console.error(l));const q=d.createShader(d.VERTEX_SHADER);d.shaderSource(q,b),d.compileShader(q),l=d.getShaderInfoLog(f),l.length>0&&(i=!0,console.error(l));if(i)return;const u=d.createProgram();d.attachShader(u,q),d.attachShader(u,f),d.linkProgram(u),d.useProgram(u),this.program=u;for(const v of Object.keys(this.attribs)){const A=d.getAttribLocation(u,v);d.enableVertexAttribArray(A),this.attribs[v]=A}for(const v of Object.keys(this.uniforms))this.uniforms[v]=d.getUniformLocation(u,v)}bind(a,b,d){if(!this.program)return!1;const f=this.renderer,i=f.gl,l=this.uniforms;return i.useProgram(this.program),i.uniformMatrix4fv(l.uProjectionMatrix,!1,a),i.uniformMatrix4fv(l.uCameraMatrix,!1,b),i.uniform1i(l.uTexture,f.textures.textureIndex[d]),i.uniform1f(l.uTime,performance.now()),i.uniform2f(l.uResolution,f.width,f.height),this.bindBuffers(this.buffer.indexBuffer,this.buffer.vertexBuffer),!0}bindBuffers(a,b){const d=this.renderer.gl,f=this.buffer.vertexByteSize,i=this.attribs;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),d.bindBuffer(d.ARRAY_BUFFER,b),d.vertexAttribPointer(i.aVertexPosition,2,d.FLOAT,!1,f,0),d.vertexAttribPointer(i.aTextureCoord,2,d.FLOAT,!1,f,8),d.vertexAttribPointer(i.aTextureId,1,d.FLOAT,!1,f,16),d.vertexAttribPointer(i.aTintColor,4,d.UNSIGNED_BYTE,!0,f,20),this.count=0}draw(a){const b=this.renderer,d=b.gl,f=this.buffer;if(a===f.batchSize)d.bufferData(d.ARRAY_BUFFER,f.data,d.DYNAMIC_DRAW);else{const i=f.vertexViewF32.subarray(0,a*f.quadElementSize);d.bufferSubData(d.ARRAY_BUFFER,0,i)}this.renderToFBO&&b.fbo.add(this.framebuffer,!0),d.drawElements(d.TRIANGLES,a*f.quadIndexSize,d.UNSIGNED_SHORT,0),this.renderToFBO&&b.fbo.pop()}flush(){const a=this.count;return a===0?!1:(this.draw(a),this.prevCount=a,this.count=0,!0)}}const yw=`\r
#define SHADER_NAME MULTI_QUAD_FRAG\r
\r
precision highp float;\r
\r
varying vec2 vTextureCoord;\r
varying float vTextureId;\r
varying vec4 vTintColor;\r
\r
uniform sampler2D uTexture[%count%];\r
\r
void main (void)\r
{\r
    vec4 color;\r
\r
    %forloop%\r
\r
    gl_FragColor = color * vec4(vTintColor.bgr * vTintColor.a, vTintColor.a);\r
}`;class zq extends Wh{constructor(a={fragmentShader:yw}){super(a)}createShaders(a,b){const d=jg();let f="";for(let i=1;i<d;i++)i>1&&(f+=`
	else `),i<d-1&&(f+=`if (vTextureId < ${i}.5)`),f+=`
	{`,f+=`
		color = texture2D(uTexture[${i}], vTextureCoord);`,f+=`
	}`;a=a.replace(/%count%/gi,`${d}`),a=a.replace(/%forloop%/gi,f),super.createShaders(a,b)}bind(a,b){if(!this.program)return!1;const d=this.renderer,f=d.gl,i=this.uniforms;return f.useProgram(this.program),f.uniformMatrix4fv(i.uProjectionMatrix,!1,a),f.uniformMatrix4fv(i.uCameraMatrix,!1,b),f.uniform1iv(i.uTexture,d.textures.textureIndex),f.uniform1f(i.uTime,performance.now()),f.uniform2f(i.uResolution,d.width,d.height),this.bindBuffers(this.buffer.indexBuffer,this.buffer.vertexBuffer),!0}}function Aq(a,b,d=-1,f=1){const i=-2*(1/-a),l=-2*(1/b),q=2*(1/(d-f));return new Float32Array([i,0,0,0,0,l,0,0,0,0,q,0,-1,1,0,1])}class Bq{constructor(a,b){this.renderer=a;const d={shader:new b()};this.stack=[d],this.currentEntry=d,this.current=d.shader,this.singleQuadShader=new Wh()}add(a,b){const d={shader:a,textureID:b};return this.stack.push(d),d}set(a,b){this.flush();const d=this.renderer,f=d.projectionMatrix,i=d.currentCamera.matrix,l=a.bind(f,i,b);if(l){const q=this.add(a,b);this.currentEntry=q,this.current=a}return l}setDefault(a){this.set(this.singleQuadShader,a)}pop(){this.flush();const a=this.stack;a.length>1&&a.pop(),this.currentEntry=a[a.length-1],this.current=this.currentEntry.shader}reset(){this.pop(),this.rebind()}flush(){return this.current.flush()?(this.renderer.flushTotal++,!0):!1}rebind(){const a=this.renderer,b=a.projectionMatrix,d=a.currentCamera.matrix,f=this.currentEntry;f.shader.bind(b,d,f.textureID)}popAndRebind(){this.pop(),this.rebind()}clear(){}destroy(){}}const ww=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function xw(a){let b="";for(let d=0;d<a;++d)d>0&&(b+=`
else `),d<a-1&&(b+=`if(test == ${d}.0){}`);return b}function Fq(a,b){const d=b.createShader(b.FRAGMENT_SHADER);for(;;){const f=ww.replace(/%forloop%/gi,xw(a));b.shaderSource(d,f),b.compileShader(d);if(!b.getShaderParameter(d,b.COMPILE_STATUS))a=a/2|0;else break}return a}class Cq{constructor(a){this.startActiveTexture=0,this.renderer=a,this.tempTextures=[],this.textureIndex=[]}init(){const a=this.renderer.gl;let b=Fq(a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),a);const d=jg();d===0||d>0&&d>b?Rk(b):d>0&&d<b&&(b=Math.max(8,d));const f=this.tempTextures;f.length&&f.forEach(l=>{a.deleteTexture(l)});const i=[];for(let l=0;l<b;l++){const q=a.createTexture();a.activeTexture(a.TEXTURE0+l),a.bindTexture(a.TEXTURE_2D,q),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),f[l]=q,i.push(l)}this.maxTextures=b,this.textureIndex=i,this.currentActiveTexture=1}update(){const a=qf.get();for(let b=0;b<a.length;b++){const d=a[b];d.binding||(d.binding=new pf(d))}qf.clear()}reset(){const a=this.renderer.gl,b=this.tempTextures;for(let d=0;d<b.length;d++)a.activeTexture(a.TEXTURE0+d),a.bindTexture(a.TEXTURE_2D,b[d]);this.currentActiveTexture=1,this.startActiveTexture++}bind(a,b=0){const d=this.renderer.gl,f=a.binding;f.setIndex(b),d.activeTexture(d.TEXTURE0+b),d.bindTexture(d.TEXTURE_2D,f.texture)}unbind(a=0){const b=this.renderer.gl;b.activeTexture(b.TEXTURE0+a),b.bindTexture(b.TEXTURE_2D,this.tempTextures[a]),a>0&&this.startActiveTexture++}request(a){const b=this.renderer.gl,d=a.binding,f=this.currentActiveTexture;return d.indexCounter>=this.startActiveTexture?!1:(d.indexCounter=this.startActiveTexture,f<this.maxTextures?(d.setIndex(f),b.activeTexture(b.TEXTURE0+f),b.bindTexture(b.TEXTURE_2D,d.texture),this.currentActiveTexture++):(this.renderer.flush(),this.startActiveTexture++,d.indexCounter=this.startActiveTexture,d.setIndex(1),b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,d.texture),this.currentActiveTexture=2),!0)}}class dq{constructor(){this.clearColor=[0,0,0,1],this.flushTotal=0,this.clearBeforeRender=!0,this.optimizeRedraw=!1,this.autoResize=!0,this.contextLost=!1,this.currentCamera=null,this.width=Jd(),this.height=Kd(),this.resolution=Ld(),this.setBackgroundColor(Gh());const a=document.createElement("canvas");a.addEventListener("webglcontextlost",b=>this.onContextLost(b),!1),a.addEventListener("webglcontextrestored",()=>this.onContextRestored(),!1),this.canvas=a,this.fbo=new xq(this),this.textures=new Cq(this),this.initContext(),rg.set(this),this.shaders=new Bq(this,zq)}initContext(){const a=this.canvas.getContext("webgl",Tk());Hb.set(a),this.gl=a,a.disable(a.DEPTH_TEST),a.disable(a.CULL_FACE),this.resize(this.width,this.height,this.resolution),this.textures.init()}resize(a,b,d=1){this.width=a*d,this.height=b*d,this.resolution=d;const f=this.canvas;f.width=this.width,f.height=this.height,this.autoResize&&(f.style.width=(this.width/d).toString()+"px",f.style.height=(this.height/d).toString()+"px"),this.gl.viewport(0,0,this.width,this.height),this.projectionMatrix=Aq(a,b)}onContextLost(a){a.preventDefault(),this.contextLost=!0}onContextRestored(){this.contextLost=!1,this.initContext()}setBackgroundColor(a){return yq(a,this.clearColor),this}reset(a=null,b=this.width,d=this.height){const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,a),f.viewport(0,0,b,d),f.enable(f.BLEND),f.blendFunc(f.ONE,f.ONE_MINUS_SRC_ALPHA),this.flushTotal=0,this.currentCamera=null,this.textures.update()}render(a){if(this.contextLost)return;this.reset();if(this.optimizeRedraw&&a.numDirtyFrames===0&&a.numDirtyCameras===0)return;const b=this.gl;if(this.clearBeforeRender){const f=this.clearColor;b.clearColor(f[0],f[1],f[2],f[3]),b.clear(b.COLOR_BUFFER_BIT)}const d=a.worldData;for(let f=0;f<d.length;f++){const{camera:i,renderList:l}=d[f];(!this.currentCamera||!tq(i.worldTransform,this.currentCamera.worldTransform))&&(this.flush(),this.currentCamera=i,this.shaders.rebind()),l.forEach(q=>{q.children.length?this.renderNode(q):q.node.renderGL(this)})}this.flush()}renderNode(a){a.node.renderGL(this),a.children.forEach(b=>{b.children.length>0?this.renderNode(b):b.node.renderGL(this)}),a.node.postRenderGL(this)}flush(){this.shaders.flush()}destroy(){rg.set(void 0)}}function Hk(){return()=>{Hh(dq)}}function Gb(a,b,...d){if(a.events.size===0||!a.events.has(b))return!1;const f=a.events.get(b);for(const i of f)i.callback.apply(i.context,d),i.once&&f.delete(i);return f.size===0&&a.events.delete(b),!0}function Np(a,b){const d=Ih(b);return d.appendChild(a),a}function Op(a){const b=document.readyState;if(b==="complete"||b==="interactive"){a();return}const d=()=>{document.removeEventListener("deviceready",d,!0),document.removeEventListener("DOMContentLoaded",d,!0),window.removeEventListener("load",d,!0),a()};document.body?window.hasOwnProperty("cordova")?document.addEventListener("deviceready",d,!0):(document.addEventListener("DOMContentLoaded",d,!0),window.addEventListener("load",d,!0)):window.setTimeout(d,20)}class Nk{constructor(){this.events=new Map()}}class mg{constructor(a,b,d=!1){this.callback=a,this.context=b,this.once=d}}function mc(a,b,d,f=a,i=!1){if(typeof d!=="function")throw new TypeError("Listener not a function");const l=new mg(d,f,i),q=a.events.get(b);return q?q.add(l):a.events.set(b,new Set([l])),l}function se(a,b,d,f=a){return mc(a,b,d,f,!0)}function Jq(){return{gameFrame:0,numTotalFrames:0,numDirtyFrames:0,numDirtyCameras:0,worldData:[]}}function Mq(a,b=0){a.gameFrame=b,a.numTotalFrames=0,a.numDirtyFrames=0,a.numDirtyCameras=0,a.worldData.length=0}let Nq;const Yh={get:()=>Nq,set:a=>{Nq=a}};class Pp{constructor(){this.scenes=new Map(),this.sceneIndex=0,this.flush=!1,this.renderResult=Jq(),this.game=yb.get(),Yh.set(this),se(this.game,"boot",()=>this.boot())}boot(){Sk().forEach(a=>new a())}update(a,b){for(const d of this.scenes.values())Gb(d,"update",a,b)}render(a){const b=this.renderResult;Mq(b,a);for(const d of this.scenes.values())Gb(d,"render",b);return this.flush&&(b.numDirtyFrames++,this.flush=!1),b}}function sg(a,b){const d=document.createElement("canvas");return d.width=a,d.height=b,d.getContext("2d")}let Oq;const Ob={get:()=>Oq,set:a=>{Oq=a}};class Qp{constructor(){this.textures=new Map(),this.createDefaultTextures(),Ob.set(this)}createDefaultTextures(){this.add("__BLANK",new $b(sg(32,32).canvas));const a=sg(32,32);a.strokeStyle="#0f0",a.moveTo(0,0),a.lineTo(32,32),a.stroke(),a.strokeRect(.5,.5,31,31),this.add("__MISSING",new $b(a.canvas))}get(a){const b=this.textures;return b.has(a)?b.get(a):b.get("__MISSING")}has(a){return this.textures.has(a)}add(a,b){let d;const f=this.textures;return f.has(a)||(b instanceof $b?d=b:d=new $b(b),d.key=a,f.set(a,d)),d}}class Fp extends Nk{constructor(...a){super();this.VERSION="4.0.0-beta1",this.isBooted=!1,this.isPaused=!1,this.willUpdate=!0,this.willRender=!0,this.lastTick=0,this.elapsed=0,this.frame=0,yb.set(this),Op(()=>this.boot(a))}boot(a){a.forEach(f=>f());const b=Lk();this.renderer=new b(),this.textureManager=new Qp(),this.sceneManager=new Pp();const d=Mk();d&&Np(this.renderer.canvas,d),this.isBooted=!0,Kk(),Gb(this,"boot"),this.lastTick=performance.now(),this.step(this.lastTick)}pause(){this.isPaused=!0}resume(){this.isPaused=!1,this.lastTick=performance.now()}step(a){const b=a-this.lastTick;this.lastTick=a,this.elapsed+=b,this.isPaused||(this.willUpdate&&(this.sceneManager.update(b,a),Gb(this,"update",b,a)),this.willRender&&this.renderer.render(this.sceneManager.render(this.frame))),this.frame++,yb.setFrame(this.frame),yb.setElapsed(this.elapsed),requestAnimationFrame(d=>this.step(d))}destroy(){}}function Kq(a,b,d){return Object.prototype.hasOwnProperty.call(a,b)?a[b]:d}function Lq(a,b={}){const d=Yh.get(),f=d.scenes.size,i=d.sceneIndex,l=f===0;typeof b==="string"?a.key=b:(b||!b&&l)&&(a.key=Kq(b,"key","scene"+i.toString())),d.scenes.has(a.key)?console.warn("Scene key already in use: "+a.key):(d.scenes.set(a.key,a),d.flush=!0,d.sceneIndex++)}class Fh{constructor(a){this.game=yb.get(),this.events=new Map(),Lq(this,a)}}class oe{constructor(a=1,b=0,d=0,f=1,i=0,l=0){this.set(a,b,d,f,i,l)}set(a=1,b=0,d=0,f=1,i=0,l=0){return this.a=a,this.b=b,this.c=d,this.d=f,this.tx=i,this.ty=l,this}identity(){return this.set()}toArray(){return[this.a,this.b,this.c,this.d,this.tx,this.ty]}fromArray(a){return this.set(a[0],a[1],a[2],a[3],a[4],a[5])}}function Th(a,b,d){return a.width<=0||a.height<=0?!1:a.x<=b&&a.x+a.width>=b&&a.y<=d&&a.y+a.height>=d}class _b{constructor(a=0,b=0,d=0,f=0){this.set(a,b,d,f)}set(a=0,b=0,d=0,f=0){return this.x=a,this.y=b,this.width=d,this.height=f,this}contains(a,b){return Th(this,a,b)}set right(a){a<=this.x?this.width=0:this.width=a-this.x}get right(){return this.x+this.width}set bottom(a){a<=this.y?this.height=0:this.height=a-this.y}get bottom(){return this.y+this.height}}function vq(){}class jd{constructor(a,b=0,d=0,f=!1){this.compareValue=!1,this._x=b,this._y=d,this.callback=a,this.compareValue=f}set(a=0,b=0){return this._x=a,this._y=b,this.callback(this),this}destroy(){this.callback=vq}set x(a){(!this.compareValue||this.compareValue&&a!==this._x)&&(this._x=a,this.callback(this))}get x(){return this._x}set y(a){(!this.compareValue||this.compareValue&&a!==this._x)&&(this._y=a,this.callback(this))}get y(){return this._y}}function sq(a,b,d){const f=d-b;return b+((a-b)%f+f)%f}function Up(a){return sq(a,-Math.PI,Math.PI)}class Vp{constructor(){this._rotation=0,this.type="Camera",this.dirtyRender=!0;const a=yb.get();this.renderer=a.renderer,this.matrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1]),this.bounds=new _b(),this.worldTransform=new oe(),this.position=new jd(()=>this.updateTransform(),0,0),this.scale=new jd(()=>this.updateTransform(),1,1),this.origin=new jd(()=>this.updateTransform(),.5,.5),this.reset()}updateTransform(){const a=this.matrix,b=this.position.x,d=this.position.y,f=this.scale.x,i=this.scale.y,l=-b+this.width*this.origin.x,q=-d+this.height*this.origin.y,u=Math.sin(this.rotation),v=Math.cos(this.rotation),A=u+u,E=u*A,H=v*A,R=(1-E)*f,L=H*f,O=-H*i,V=(1-E)*i;a[0]=R,a[1]=L,a[4]=O,a[5]=V,a[12]=b+l-(R*l+O*q),a[13]=d+q-(L*l+V*q),this.worldTransform.set(v*f,u*f,-u*i,v*i,-b,-d);const X=this.width*(1/f),ea=this.height*(1/i);this.bounds.set(l-X/2,q-ea/2,X,ea),this.dirtyRender=!0}reset(){const a=this.renderer.width,b=this.renderer.height;this.width=a,this.height=b,this.bounds.set(0,0,a,b)}set rotation(a){a!==this._rotation&&(this._rotation=Up(a),this.updateTransform())}get rotation(){return this._rotation}destroy(){this.position.destroy(),this.scale.destroy(),this.origin.destroy(),this.world=null,this.worldTransform=null,this.renderer=null,this.matrix=null,this.bounds=null}}class Wp{constructor(){this.type="StaticCamera",this.dirtyRender=!0;const a=yb.get();this.renderer=a.renderer,this.matrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.bounds=new _b(),this.worldTransform=new oe(),this.reset()}reset(){const a=this.renderer.width,b=this.renderer.height;this.width=a,this.height=b,this.bounds.set(0,0,a,b)}destroy(){this.world=null,this.worldTransform=null,this.renderer=null,this.matrix=null,this.bounds=null}}function qe(a){const b=[a],d=[];for(;b.length>0;){const f=b.shift();d.push(f);const i=f.numChildren;if(i>0)for(let l=i-1;l>=0;l--)b.unshift(f.children[l])}return d.shift(),d}function kd(a,b){return a.children.indexOf(b)}function Jh(a,b){const d=a.children;let f;if(b>=0&&b<d.length){const i=d.splice(b,1);i[0]&&(f=i[0],f.parent=null)}return f}function re(a,b){const d=kd(a,b);return d>-1&&Jh(a,d),b}const Yk="addedtoworld";const Kh="destroy";const eq="postupdate";const Zk="removedfromworld";const fq="update";function Xk(a,...b){return b.forEach(d=>{d.world&&(Gb(d.world,Zk,d,d.world),Gb(d,Zk,d,d.world)),d.world=a,Gb(a,Yk,d,a),Gb(d,Yk,d,a)}),b}function pe(a,...b){b.forEach(f=>{f.parent&&re(f.parent,f),f.parent=a});const d=a.world;return d&&Xk(d,...qe(a)),b}const Ga={CLEAR:0,TRANSFORM:1,UPDATE:2,CHILD_CACHE:4,POST_RENDER:8,COLORS:16,BOUNDS:32,TEXTURE:64,FRAME:128,ALPHA:256,CHILD:512,DEFAULT:1+2+16+32,USER1:536870912,USER2:1073741824,USER3:2147483648,USER4:4294967296};function kg(a,b=0,d){const f=a.children;d===void 0&&(d=f.length);const i=d-b;if(i>0&&i<=d){const l=f.splice(b,i);return l.forEach(q=>{q.parent=null}),l}else return[]}function Vk(a,b=0,d){const f=kg(a,b,d);f.forEach(i=>{i.destroy()})}function lg(a,...b){return b.forEach(d=>{re(a,d)}),b}function Wk(a,b,d=0,f){const i=kg(a,d,f);return pe(b,...i),i.forEach(l=>{l.transform.updateWorld()}),i}function ld(a,b,d,f,i){const l=a.events,q=l.get(b);if(!d)l.delete(b);else if(d instanceof mg)q.delete(d);else{const u=!f,v=i!==void 0;for(const A of q)A.callback===d&&(u&&A.context===f)&&(v&&A.once===i)&&q.delete(A)}return q.size===0&&l.delete(b),a}function of(a){const{a:b,b:d,c:f,d:i,tx:l,ty:q}=a.world,{x:u,y:v,right:A,bottom:E}=a.extent,H=u*b+v*f+l,R=u*d+v*i+q,L=u*b+E*f+l,O=u*d+E*i+q,V=A*b+E*f+l,X=A*d+E*i+q,ea=A*b+v*f+l,ga=A*d+v*i+q;return{x0:H,y0:R,x1:L,y1:O,x2:V,y2:X,x3:ea,y3:ga}}class Lh{constructor(a){this.fixed=!1,this.includeChildren=!0,this.visibleOnly=!0,this.entity=a,this.area=new _b()}set(a,b,d,f){this.area.set(a,b,d,f)}get(){return this.entity.isDirty(Ga.BOUNDS)&&!this.fixed&&this.update(),this.area}updateLocal(){const{x0:a,y0:b,x1:d,y1:f,x2:i,y2:l,x3:q,y3:u}=of(this.entity.transform),v=Math.min(a,d,i,q),A=Math.min(b,f,l,u),E=Math.max(a,d,i,q),H=Math.max(b,f,l,u);return this.area.set(v,A,E-v,H-A)}update(){const a=this.updateLocal();this.entity.clearDirty(Ga.BOUNDS);if(!this.includeChildren||!this.entity.numChildren)return a;const b=this.visibleOnly,d=this.entity.children;let f=a.x,i=a.y,l=a.right,q=a.bottom;for(let u=0;u<d.length;u++){const v=d[u];if(!v||b&&!v.visible)continue;const A=v.bounds.get();A.x<f&&(f=A.x),A.y<i&&(i=A.y),A.right>l&&(l=A.right),A.bottom>q&&(q=A.bottom)}return a.set(f,i,l-f,q-i)}destroy(){this.entity=null,this.area=null}}class Mh{constructor(a){this.enabled=!1,this.enabledChildren=!0,this.entity=a}destroy(){this.entity=null,this.hitArea=null}}class Hc{constructor(a=0,b=0){this.set(a,b)}set(a=0,b=0){return this.x=a,this.y=b,this}getArray(){return[this.x,this.y]}fromArray(a){return this.set(a[0],a[1])}toString(){return`[x=${this.x}, y=${this.y}]`}}function Oh(a){const b=a.local,d=a.position.x,f=a.position.y,i=a.rotation,l=a.scale.x,q=a.scale.y,u=a.skew.x,v=a.skew.y;b.set(Math.cos(i+v)*l,Math.sin(i+v)*l,-Math.sin(i-u)*q,Math.cos(i-u)*q,d,f)}function $k(a,b){return b.set(a.a,a.b,a.c,a.d,a.tx,a.ty)}function Ph(a){const b=a.parent,d=a.transform,f=d.local,i=d.world;if(!b)$k(f,i);else if(d.passthru)$k(b.transform.world,i);else{const{a:l,b:q,c:u,d:v,tx:A,ty:E}=f,{a:H,b:R,c:L,d:O,tx:V,ty:X}=b.transform.world;i.set(l*H+q*L,l*R+q*O,u*H+v*L,u*R+v*O,A*H+E*L+V,A*R+E*O+X)}}class Nh{constructor(a,b=0,d=0){this.passthru=!1,this._rotation=0,this.entity=a,this.local=new oe(),this.world=new oe(),this.position=new jd(()=>this.update(),b,d),this.scale=new jd(()=>this.update(),1,1,!0),this.skew=new jd(()=>this.update(),0,0,!0),this.origin=new jd(()=>this.updateExtent(),Pk,Qk),this.extent=new _b()}update(){this.updateLocal(),this.updateWorld()}updateLocal(){this.entity.setDirty(Ga.TRANSFORM,Ga.BOUNDS),Oh(this)}updateWorld(){const a=this.entity;a.setDirty(Ga.TRANSFORM,Ga.BOUNDS),Ph(a),a.numChildren&&this.updateChildren()}updateChildren(){const a=this.entity.children;for(let b=0;b<a.length;b++){const d=a[b];d.transform.updateWorld()}}globalToLocal(a,b,d=new Hc()){const{a:f,b:i,c:l,d:q,tx:u,ty:v}=this.world,A=1/(f*q+l*-i);return d.x=q*A*a+-l*A*b+(v*l-u*q)*A,d.y=f*A*b+-i*A*a+(-v*f+u*i)*A,d}localToGlobal(a,b,d=new Hc()){const{a:f,b:i,c:l,d:q,tx:u,ty:v}=this.world;return d.x=f*a+l*b+u,d.y=i*a+q*b+v,d}setExtent(a,b,d,f){this.extent.set(a,b,d,f),this.entity.setDirty(Ga.TRANSFORM,Ga.BOUNDS)}updateExtent(a,b){const d=this.extent,f=this.entity;a!==void 0&&(d.width=a),b!==void 0&&(d.height=b),d.x=-this.origin.x*d.width,d.y=-this.origin.y*d.height,f.setDirty(Ga.TRANSFORM,Ga.BOUNDS)}set rotation(a){a!==this._rotation&&(this._rotation=a,this.update())}get rotation(){return this._rotation}destroy(){this.position.destroy(),this.scale.destroy(),this.skew.destroy(),this.origin.destroy(),this.entity=null,this.local=null,this.world=null,this.position=null,this.scale=null,this.skew=null,this.origin=null,this.extent=null}}class Gc{constructor(a=0,b=0){this.type="GameObject",this.name="",this.willUpdate=!0,this.willUpdateChildren=!0,this.willRender=!0,this.willRenderChildren=!0,this.willCacheChildren=!1,this.dirty=0,this.dirtyFrame=0,this.visible=!0,this.children=[],this.events=new Map(),this.transform=new Nh(this,a,b),this.bounds=new Lh(this),this.input=new Mh(this),this.dirty=Ga.DEFAULT,this.transform.update()}isRenderable(){return this.visible&&this.willRender}isDirty(a){return(this.dirty&a)!==0}clearDirty(a){return this.isDirty(a)&&(this.dirty^=a),this}setDirty(a,b){return this.isDirty(a)||(this.dirty^=a,this.dirtyFrame=yb.getFrame()),this.isDirty(b)||(this.dirty^=b),this}update(a,b){if(this.willUpdateChildren){const d=this.children;for(let f=0;f<d.length;f++){const i=d[f];i&&i.willUpdate&&i.update(a,b)}}this.postUpdate(a,b)}postUpdate(a,b){}renderGL(a){}renderCanvas(a){}postRenderGL(a){}postRenderCanvas(a){}get numChildren(){return this.children.length}destroy(a){a?Wk(this,a):Vk(this),Gb(this,Kh,this),this.transform.destroy(),this.bounds.destroy(),this.input.destroy(),this.events.clear(),this.world=null,this.parent=null,this.children=null}}const Uh="worldrender";const Vh="worldshutdown";var vw=Object.freeze({__proto__:null,WorldRenderEvent:Uh,WorldShutdownEvent:Vh});function Zh(a,b){b.numRendered++,b.numRenderable++,a.node.dirtyFrame>=b.gameFrame&&b.dirtyFrame++,a.children.forEach(d=>{d.children.length>0&&Zh(d,b)})}function il(a){if(a.node.isDirty(Ga.CHILD_CACHE))return!0;const b=[a];for(;b.length>0;){const d=b.pop();if(d.node.isDirty(Ga.TRANSFORM))return!0;const f=d.children.length;if(f>0)for(let i=0;i<f;i++)b.push(d.children[i])}return b.length=0,!1}function hl(a,b){a.forEach(d=>{b||il(d)?d.node.setDirty(Ga.CHILD_CACHE):d.children.length=0})}function _h(a,b,d=[]){for(let f=0;f<b.numChildren;f++){const i=b.children[f];if(i.isRenderable()){const l=[],q={node:i,children:l};d.push(q),i.willRenderChildren&&i.numChildren>0&&(i.willCacheChildren&&a.push(q),_h(a,i,l))}}return d}function fl(a){const b=[],d=[],f=_h(b,a,d),i=a.renderData;b.length>0&&hl(b,a.camera.dirtyRender),f.forEach(l=>{l.children.length?Zh(l,i):(i.numRendered++,i.numRenderable++,l.node.dirtyFrame>=i.gameFrame&&i.dirtyFrame++)}),i.renderList=f,a.forceRefresh&&(i.dirtyFrame++,a.forceRefresh=!1)}function gl(a,b){a.numDirtyFrames+=b.dirtyFrame,a.numTotalFrames+=b.numRendered,b.camera.dirtyRender&&a.numDirtyCameras++,a.worldData.push(b)}function tg(a,b){a.gameFrame=b,a.dirtyFrame=0,a.numRendered=0,a.numRenderable=0,a.renderList.length=0}class we extends Gc{constructor(a){super();this.forceRefresh=!1,this.type="BaseWorld",this.scene=a,this.world=this,this.events=new Map(),this._updateListener=mc(a,"update",(b,d)=>this.update(b,d)),this._renderListener=mc(a,"render",b=>this.render(b)),this._shutdownListener=mc(a,"shutdown",()=>this.shutdown()),se(a,"destroy",()=>this.destroy())}update(a,b){if(!this.willUpdate)return;Gb(this,fq,a,b,this),super.update(a,b)}postUpdate(a,b){Gb(this,eq,a,b,this)}render(a){const b=this.renderData;tg(b,a.gameFrame);if(!this.willRender||!this.visible)return;fl(this),Gb(this,Uh,b,this),gl(a,b),this.camera&&(this.camera.dirtyRender=!1)}shutdown(){const a=this.scene;ld(a,"update",this._updateListener),ld(a,"render",this._renderListener),ld(a,"shutdown",this._shutdownListener),lg(this),Gb(this,Vh,this),tg(this.renderData,0),this.camera&&this.camera.reset()}destroy(a){super.destroy(a),Gb(this,Kh,this),tg(this.renderData,0),this.camera&&this.camera.destroy(),this.events.clear(),this.camera=null,this.renderData=null,this.events=null}}function ug(a){return{camera:a,gameFrame:0,dirtyFrame:0,numRendered:0,numRenderable:0,renderList:[]}}class Ik extends we{constructor(a){super(a);this.type="StaticWorld",this.camera=new Wp(),this.renderData=ug(this.camera)}}class zw extends we{constructor(a){super(a);this.enableCameraCull=!0,this.type="World",this.camera=new Vp(),this.renderData=ug(this.camera)}}function ne(a,b){return a.children.push(b),pe(a,b),b.transform.updateWorld(),b}function Uk(a,...b){return b.forEach(d=>{ne(a,d)}),b}class pq{constructor(a,b,d){this.responseType="text",this.crossOrigin=void 0,this.skipCache=!1,this.hasLoaded=!1,this.key=a,this.url=b,this.config=d}}function qq(a,b,d,f){return b||(b=a+d),/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/.exec(b)?b:f?f.baseURL+f.path+b:b}function rq(a){return a.data=new Image(),a.crossOrigin&&(a.data.crossOrigin=a.crossOrigin),new Promise((b,d)=>{a.data.onload=()=>{a.data.onload&&(a.data.onload=null,a.data.onerror=null,b(a))},a.data.onerror=f=>{a.data.onload&&(a.data.onload=null,a.data.onerror=null,a.error=f,d(a))},a.data.src=a.url,a.data.complete&&a.data.width&&a.data.height&&(a.data.onload=null,a.data.onerror=null,b(a))})}function Gp(a,b){const d=new pq(a,b);return d.load=()=>(d.url=qq(d.key,d.url,".png",d.loader),d.loader&&(d.crossOrigin=d.loader.crossOrigin),new Promise((f,i)=>{const l=Ob.get();l.has(d.key)?f(d):rq(d).then(q=>{l.add(q.key,q.data),f(q)}).catch(q=>{i(q)})})),d}var Rn;(function(a){a[a.IDLE=0]="IDLE",a[a.UPDATING=1]="UPDATING"})(Rn||(Rn={}));function Md(a=32,b=32){const d=sg(a,b);return new $b(d.canvas)}function hq(a,b){const d=a.texture,f=b.shaders.current,i=f.buffer,l=d.binding;f.count===i.batchSize&&b.flush();const q=a.vertexData;b.textures.request(d);const u=l.index;q[4]=u,q[10]=u,q[16]=u,q[22]=u;const v=f.count*i.quadElementSize;i.vertexViewF32.set(q,v);const A=a.vertexColor,E=i.vertexViewU32;E[v+5]=A[0],E[v+11]=A[2],E[v+17]=A[3],E[v+23]=A[1],f.count++}class te extends Gc{constructor(a=0,b=0){super(a,b);this._alpha=1,this.type="Container"}setSize(a,b=a){return this.transform.updateExtent(a,b),this}setPosition(a,b){return this.transform.position.set(a,b),this}setOrigin(a,b=a){return this.transform.origin.set(a,b),this}setSkew(a,b=a){return this.transform.skew.set(a,b),this}setScale(a,b=a){return this.transform.scale.set(a,b),this}setRotation(a){return this.transform.rotation=a,this}set width(a){this.transform.updateExtent(a)}get width(){return this.transform.extent.width}set height(a){this.transform.updateExtent(void 0,a)}get height(){return this.transform.extent.height}set x(a){this.transform.position.x=a}get x(){return this.transform.position.x}set y(a){this.transform.position.y=a}get y(){return this.transform.position.y}set originX(a){this.transform.origin.x=a}get originX(){return this.transform.origin.x}set originY(a){this.transform.origin.y=a}get originY(){return this.transform.origin.y}set skewX(a){this.transform.skew.x=a}get skewX(){return this.transform.skew.x}set skewY(a){this.transform.skew.y=a}get skewY(){return this.transform.skew.y}set scaleX(a){this.transform.scale.x=a}get scaleX(){return this.transform.scale.x}set scaleY(a){this.transform.scale.y=a}get scaleY(){return this.transform.scale.y}set rotation(a){this.transform.rotation=a}get rotation(){return this.transform.rotation}get alpha(){return this._alpha}set alpha(a){a!==this._alpha&&(this._alpha=a,this.setDirty(Ga.TRANSFORM))}}function iq(a,b){const d=a.frame;if(!d)return;const f=b.ctx,i=a.transform,{a:l,b:q,c:u,d:v,tx:A,ty:E}=i.world,{x:H,y:R}=i.extent;f.save(),f.setTransform(l,q,u,v,A,E),f.globalAlpha=a.alpha,f.drawImage(d.texture.image,d.x,d.y,d.width,d.height,H,R,d.width,d.height),f.restore()}function ve(a,b){const d=(b*255|0)&255;return(d<<24|a)>>>0}function jq(a){const b=a.vertexAlpha,d=a.vertexTint,f=a.vertexColor;return f[0]=ve(d[0],b[0]),f[1]=ve(d[1],b[1]),f[2]=ve(d[2],b[2]),f[3]=ve(d[3],b[3]),a}function Sh(a,b,...d){const f=a.getFrame(b),{u0:i,u1:l,v0:q,v1:u,pivot:v}=f;return d.forEach(A=>{if(!A||f===A.frame)return;A.frame=f,v&&A.setOrigin(v.x,v.y),A.frame.setExtent(A),A.hasTexture=!0;const E=A.vertexData;E[2]=i,E[3]=q,E[8]=i,E[9]=u,E[14]=l,E[15]=u,E[20]=l,E[21]=q}),d}function gq(a,b,...d){if(!a)d.forEach(f=>{f.texture=null,f.frame=null,f.hasTexture=!1});else{let f;a instanceof $b?f=a:f=Ob.get().get(a),f?(d.forEach(i=>{i.texture=f}),Sh(f,b,...d)):console.warn(`Invalid Texture key: ${a}`)}return d}function kq(a){const b=a.vertexData,{x0:d,y0:f,x1:i,y1:l,x2:q,y2:u,x3:v,y3:A}=of(a.transform);return b[0]=d,b[1]=f,b[6]=i,b[7]=l,b[12]=q,b[13]=u,b[18]=v,b[19]=A,a}class md extends te{constructor(a,b,d,f){super(a,b);this.hasTexture=!1,this._tint=16777215,this.type="Sprite",this.vertexData=new Float32Array(24).fill(0),this.vertexColor=new Uint32Array(4).fill(4294967295),this.vertexAlpha=new Float32Array(4).fill(1),this.vertexTint=new Uint32Array(4).fill(16777215),this.setTexture(d,f)}setTexture(a,b){return gq(a,b,this),this}setFrame(a){return Sh(this.texture,a,this),this}isRenderable(){return this.visible&&this.willRender&&this.hasTexture&&this.alpha>0}preRender(){this.isDirty(Ga.COLORS)&&(jq(this),this.clearDirty(Ga.COLORS)),this.isDirty(Ga.TRANSFORM)&&(kq(this),this.clearDirty(Ga.TRANSFORM))}renderGL(a){this.preRender(),hq(this,a)}renderCanvas(a){this.preRender(),iq(this,a)}get alpha(){return this._alpha}set alpha(a){if(a!==this._alpha){this._alpha=a;const b=this.vertexAlpha;b[0]=a,b[1]=a,b[2]=a,b[3]=a,this.setDirty(Ga.ALPHA)}}get tint(){return this._tint}set tint(a){if(a!==this._tint){this._tint=a;const b=this.vertexTint;b[0]=a,b[1]=a,b[2]=a,b[3]=a,this.setDirty(Ga.COLORS)}}destroy(a){super.destroy(a),this.texture=null,this.frame=null,this.hasTexture=!1,this.vertexData=null,this.vertexColor=null,this.vertexAlpha=null,this.vertexTint=null}}function aj(a,b,d){const f=Math.ceil(b*a.resolution),i=Math.ceil(d*a.resolution),l=a.canvas;if(l.width===f&&l.height===i){bj(a);return}l.width=f,l.height=i,a.texture.setSize(b,d),a.setSize(b,d),a.updateTexture()}function bj(a){a.context.clearRect(0,0,a.canvas.width,a.canvas.height),a.updateTexture()}function Ym(a,b="#fff"){let d=a.context;d.fillStyle=b,d.fillRect(0,0,a.canvas.width,a.canvas.height),a.updateTexture()}function cj(a,b,d){const f=new Image();f.onload=function(){const i=a.resolution,l=f.width/i,q=f.height/i;aj(a,l,q),a.context.drawImage(f,0,0),a.updateTexture(),d&&d(),f.onload=null,f.src="",f.remove()},f.src=b}function Zm(a,b){return new Promise(function(d,f){cj(a,b,d)})}function _m(a,b,d){return a.canvas.toDataURL(b,d)}function $m(a,b,d,f=[0,0,0,0]){const i=a.context.getImageData(b,d,1,1).data;return f[0]=i[0],f[1]=i[1],f[2]=i[2],f[3]=i[3],f}function an(a,b,d,f,i,l,q){q===void 0&&(q=f!==0||i!==0||l!==0?255:0);const u=a.context.createImageData(1,1);u.data[0]=f,u.data[1]=i,u.data[2]=l,u.data[3]=q,a.context.putImageData(u,b,d),a.updateTexture()}class zc extends md{constructor(a=0,b=0,d=32,f=32){super(a,b,Md());this.type="rexCanvas";const i=yb.get();this.resolution=i.renderer.resolution,this.canvas=this.texture.image,this.context=this.canvas.getContext("2d"),this.resize(d,f)}updateTexture(){return this.texture.binding&&this.texture.binding.update(),this.setDirty(Ga.TEXTURE),this}destroy(a){this.texture.destroy(),this.canvas=null,this.context=null,super.destroy(a)}resize(a,b){return aj(this,a,b),this}clear(){return bj(this),this}}function sd(a,b,d,f=1){let i;if(typeof a==="string"){let u=Ob.get();u.has(a)||u.add(a,Md()),i=u.get(a)}else i=a;let l=i.image,q=l.getContext("2d");return d?b.call(d,l,q):b(l,q),i.setSize(l.width/f,l.height/f),i.binding&&i.binding.update(),i}var Zg;(function(a){a[a.left=1]="left",a[a.right=2]="right",a[a.both=3]="both"})(Zg||(Zg={}));function Wv(a,b=0,d=" ",f=1){a=a.toString();let i=0;if(b+1>=a.length)switch(f){case 1:a=new Array(b+1-a.length).join(d)+a;break;case 3:i=b-a.length;let l=Math.ceil(i/2),q=i-l;a=new Array(q+1).join(d)+a+new Array(l+1).join(d);break;default:a=a+new Array(b+1-a.length).join(d);break}return a}function kc(a,b,d){switch(typeof a){case"number":return`#${Wv(Math.floor(a).toString(16),6,"0",Zg.left)}`;case"function":return a(b,d);default:return a}}function fn(a,b,d,f,i,l,q,u,v,A,E=!0){b.beginPath(),b.rect(d,f,i,l);if(q!==void 0){if(A!==void 0){let H;E?H=b.createLinearGradient(0,0,i,0):H=b.createLinearGradient(0,0,0,l),H.addColorStop(0,q),H.addColorStop(1,A),q=H}b.fillStyle=q,b.fill()}u!==void 0&&(b.strokeStyle=u,b.lineWidth=v,b.stroke())}class Rv{constructor(a=0,b=a,d=0,f=d,i=0){this._width=0;this._height=0;this.cornerRadius={tl:Cc(0),tr:Cc(0),bl:Cc(0),br:Cc(0)};this.setTo(a,b,d,f,i)}setTo(a=0,b=a,d=0,f=d,i=0){return this.setPosition(a,b),this.setRadius(i),this.setSize(d,f),this}setPosition(a=0,b=a){return this.x=a,this.y=b,this}setRadius(a=0){let b=this.cornerRadius;if(typeof a==="number"){const d=a,f=a;b.tl=Cc(void 0,d,f),b.tr=Cc(void 0,d,f),b.bl=Cc(void 0,d,f),b.br=Cc(void 0,d,f)}else{const d=a.x??0,f=a.y??0;b.tl=Cc(a.tl,d,f),b.tr=Cc(a.tr,d,f),b.bl=Cc(a.bl,d,f),b.br=Cc(a.br,d,f)}return this}setSize(a=0,b=a){return this.width=a,this.height=b,this}get minWidth(){let a=this.cornerRadius;return Math.max(a.tl.x+a.tr.x,a.bl.x+a.br.x)}get minHeight(){let a=this.cornerRadius;return Math.max(a.tl.y+a.bl.y,a.tr.y+a.br.y)}get width(){return this._width}set width(a){a==null&&(a=0),this._width=Math.max(a,this.minWidth)}get height(){return this._height}set height(a){a==null&&(a=0),this._height=Math.max(a,this.minHeight)}get radius(){let a=this.cornerRadius,b=Math.max(a.tl.x,a.tl.y,a.tr.x,a.tr.y,a.bl.x,a.bl.y,a.br.x,a.br.y);return b}}function Cc(a,b,d){return a===void 0?{x:b,y:d}:typeof a==="number"?{x:a,y:a}:a}const Uy=Math.PI/180;function Qd(a){return a*Uy}const Sv=Qd(0),Tv=Qd(90),Uv=Qd(180),Vv=Qd(270);function ej(a,b,d,f,i,l,q){const u=new Rv(b,d,f,i,l),v=u.minWidth,A=u.minHeight,E=f>=v?1:f/v,H=i>=A?1:i/A,R=u.cornerRadius;let L,O,V,X,ea;a.beginPath(),a.translate(b,d),L=R.br,O=L.x*E,V=L.y*H,X=f-O,ea=i-V,O>0&&V>0?Gj(a,X,ea,O,V,Sv,Tv,q):(a.moveTo(f,ea),a.lineTo(f,i),a.lineTo(X,i)),L=R.bl,O=L.x*E,V=L.y*H,X=O,ea=i-V,a.lineTo(O,i),O>0&&V>0?Gj(a,X,ea,O,V,Tv,Uv,q):(a.lineTo(0,i),a.lineTo(0,ea)),L=R.tl,O=L.x*E,V=L.y*H,X=O,ea=V,a.lineTo(0,ea),O>0&&V>0?Gj(a,X,ea,O,V,Uv,Vv,q):(a.lineTo(0,0),a.lineTo(X,0)),L=R.tr,O=L.x*E,V=L.y*H,X=f-O,ea=V,a.lineTo(X,0),O>0&&V>0?Gj(a,X,ea,O,V,Vv,Sv,q):(a.lineTo(f,0),a.lineTo(f,ea)),a.closePath()}var Gj=function(a,b,d,f,i,l,q,u){if(u===void 0)a.ellipse(b,d,f,i,0,l,q);else{u+=1;let v=(q-l)/u;for(let A=0;A<=u;A++){const E=l+v*A,H=b+f*Math.cos(E),R=d+i*Math.sin(E);a.lineTo(H,R)}}};function Ng(a,b,d,f,i,l,q,u,v,A,E,H=!0,R){ej(b,d,f,i,l,q,R);if(u!==void 0){if(E!==void 0){let L;H?L=b.createLinearGradient(0,0,i,0):L=b.createLinearGradient(0,0,0,l),L.addColorStop(0,u),L.addColorStop(1,E),u=L}b.fillStyle=u,b.fill()}v!==void 0&&(b.strokeStyle=v,b.lineWidth=A,b.stroke())}function Iv(a,b,d,f,i,l=2,q="round"){b.beginPath(),b.lineJoin=q;let u=d[0];b.moveTo(u.x,u.y);for(let v=1,A=d.length;v<A;v++)u=d[v],b.lineTo(u.x,u.y);b.closePath(),f!==void 0&&(b.fillStyle=f,b.fill()),i!==void 0&&(b.strokeStyle=i,b.lineWidth=l,b.stroke())}function ri(a,{points:b,fillStyle:d,strokeStyle:f,lineWidth:i=2,lineJoin:l="round"}={}){return sd(a,function(q,u){if(!b||b.length===0){q.width=1,q.height=1;return}f||(i=0);let v=Infinity,A=Infinity,E=-Infinity,H=-Infinity;for(let ga=0,ka=b.length;ga<ka;ga++){const ha=b[ga],oa=ha.x,pa=ha.y;v=Math.min(v,oa),A=Math.min(A,pa),E=Math.max(E,oa),H=Math.max(H,pa)}const R=E-v,L=H-A,O=R/2,V=L/2,X=i/2;q.width=Math.ceil(R),q.height=Math.ceil(L);let ea=[];for(let ga=0,ka=b.length;ga<ka;ga++){const ha=b[ga];ea.push({x:Jv(ha.x-v,O,X),y:Jv(ha.y-A,V,X)})}Iv(q,u,ea,kc(d,q,u),kc(f,q,u),i,l)})}function Jv(a,b,d){return a<b?a+d:a>b?a-d:a}var Kv;(function(a){a[a.right=0]="right",a[a.down=1]="down",a[a.left=2]="left",a[a.up=3]="up"})(Kv||(Kv={}));function It(a,b){b.width!==a.width&&(b.width=a.width),b.height!==a.height&&(b.height=a.height);let d=b.getContext("2d");return d.drawImage(a.texture.image,a.x,a.y,a.width,a.height),b}function bn(a,b,d=0,f=0,i=a.width,l=a.height){const q=a.resolution,u=a.canvas,v=Math.ceil(i*q),A=Math.ceil(l*q);sd(b,function(E,H){E.width!==v&&(E.width=v),E.height!==A&&(E.height=A),H.clearRect(0,0,v,A),H.drawImage(u,d,f,v,A)},void 0,a.resolution)}function cn(a,b,d){const f=Ob.get();if(!f.has(b))return;It(f.get(b).getFrame(d),a.canvas);const i=a.canvas.width,l=a.canvas.height,q=a.resolution,u=i/q,v=l/q;a.texture.setSize(u,v),a.setSize(u,v),a.updateTexture()}class dn extends zc{fill(a="#fff"){return Ym(this,a),this}getCanvas(){return this.canvas}getContext(){return this.context}getDataURL(a,b){return _m(this,a,b)}getPixel(a,b,d=[0,0,0,0]){return $m(this,a,b,d)}generateTexture(a,b=0,d=0,f=this.width,i=this.height){return bn(this,a,b,d,f,i),this}loadFromURL(a,b){return cj(this,a,b),this}loadFromURLPromise(a){return Zm(this,a)}loadTexture(a,b){return cn(this,a,b),this}setPixel(a,b,d,f,i,l){return an(this,a,b,d,f,i,l),this}}const Tma=Sb(Pq());function Jt(a,b){const d=new Tma.Chart(a.context,ey(a,b));return d}function ey(a,b={}){b.hasOwnProperty("options")||(b.options={});const d=b.options;d.responsive=!1,d.maintainAspectRatio=!1,d.hasOwnProperty("devicePixelRatio")||(d.devicePixelRatio=1);let f=!1;d.hasOwnProperty("animation")?d.animation===!1&&(f=!0,d.animation={}):d.animation={};const i=d.animation;f&&(i.duration=0);const l=i.onProgress;i.onProgress=function(u){l&&l(u),a.updateTexture()};const q=i.onComplete;return i.onComplete=function(u){q&&q(u),a.updateTexture()},b}function Kt(a,b,d){a.height=b,a.width=d,a.aspectRatio=a.height?a.width/a.height:null,a.update()}function Jf(a,b){if(typeof b==="string"){const d=a.data.datasets;for(let f=0,i=d.length;f<i;f++){const l=d[f];if(l.label===b)return l}}else return a.data.datasets[b];return null}function Lt(a,b,d){const f=Jf(a,b);if(!f)return;if(typeof d==="string"){const i=a.data.labels;d=i.indexOf(d);if(d===-1)return}return f.data[d]}function Mt(a,b,d,f){const i=Jf(a,b);if(!i)return;if(typeof d==="string"){const l=a.data.labels;d=l.indexOf(d);if(d===-1)return}i.data[d]=f}class dj extends zc{constructor(a=0,b=0,d=1,f=1,i={}){super(a,b,d,f);this.type="rexChart";this.setChart(i)}destroy(a){this.chart&&(this.chart.destroy(),this.chart=null),super.destroy(a)}setChart(a={}){return this.chart&&this.chart.destroy(),this.chart=Jt(this,a),this}resize(a=this.width,b=this.height){return a===this.width&&b===this.height?this:(super.resize(a,b),this.chart&&Kt(this.chart,this.canvas.width,this.canvas.height),this)}getChartDataset(a){let b;return this.chart&&(b=Jf(this.chart,a)),b}getChartData(a,b){let d;return this.chart&&(d=Lt(this.chart,a,b)),d}setChartData(a,b,d){return this.chart&&Mt(this.chart,a,b,d),this}updateChart(){return this.chart&&this.chart.update(),this}}var Wc;(function(a){a[a.circle=0]="circle",a[a.ellipse=1]="ellipse",a[a.roundRectangle=2]="roundRectangle"})(Wc||(Wc={}));function en(a,b,d,f=Wc.circle){let i,l,q,u;typeof f==="object"?{maskType:i,backgroundStyle:l,radius:q,iteration:u}=f:i=f,typeof i==="string"&&(i=Wc[i]);const v=a.canvas,A=a.context,E=Ob.get();if(!E.has(b))return;const H=E.get(b).getFrame(d),R=H.width,L=H.height;v.width!==R&&(v.width=R),v.height!==L&&(v.height=L),A.clearRect(0,0,R,L),l&&(A.fillStyle=l,A.fillRect(0,0,R,L)),A.beginPath();switch(i){case Wc.roundRectangle:ej(A,0,0,R,L,q,u);break;default:const O=Math.floor(R/2),V=Math.floor(L/2);i===Wc.circle?A.arc(O,V,Math.min(O,V),0,2*Math.PI):A.ellipse(O,V,O,V,0,0,2*Math.PI);break}A.clip(),A.drawImage(H.texture.image,H.x,H.y,H.width,H.height),a.texture.setSize(R,L),a.setSize(R,L),a.updateTexture()}class fj extends zc{constructor(a,b,d,f,i=Wc.circle){super(a,b);this.type="rexMaskedImage";en(this,d,f,i)}maskImage(a,b,d=Wc.circle){return en(this,a,b,d),this}}class gj extends zc{constructor({x:a=0,y:b=0,width:d=1,height:f=1,fillStyle:i,fillColor2:l,isHorizontalGradient:q=!0,strokeStyle:u,lineWidth:v=2}={}){super(a,b);this.type="rexCanvasRoundRectangle";this.setFillStyle(i,l,q),this.setStrokeStyle(u,v),this.resize(d,f)}setFillStyle(a,b,d=!0){return this.fillStyle=a,this.fillColor2=b,this.isHorizontalGradient=d,this}setStrokeStyle(a,b){return this.strokeStyle=a,this.lineWidth=b,this}resize(a,b){return super.resize(a,b),this.refresh(),this}refresh(){let a=this.lineWidth;this.strokeStyle||(a=0);const b=a/2,d=b,f=b,i=this.width-a,l=this.height-a;return fn(this.canvas,this.context,d,f,i,l,kc(this.fillStyle,this.canvas,this.context),kc(this.strokeStyle,this.canvas,this.context),a,kc(this.fillColor2,this.canvas,this.context),this.isHorizontalGradient),this}}class hj extends zc{constructor({x:a=0,y:b=0,width:d=1,height:f=1,radius:i=0,iteration:l,fillStyle:q,fillColor2:u,isHorizontalGradient:v=!0,strokeStyle:A,lineWidth:E=2}={}){super(a,b);this.type="rexCanvasRoundRectangle";this.setRadius(i),this.setIteration(l),this.setFillStyle(q,u,v),this.setStrokeStyle(A,E),this.resize(d,f)}setRadius(a){return this.radius=a,this}setIteration(a){return this.iteration=a,this}setFillStyle(a,b,d=!0){return this.fillStyle=a,this.fillColor2=b,this.isHorizontalGradient=d,this}setStrokeStyle(a,b){return this.strokeStyle=a,this.lineWidth=b,this}resize(a,b){return super.resize(a,b),this.refresh(),this}refresh(){let a=this.lineWidth;this.strokeStyle||(a=0);const b=a/2,d=b,f=b,i=this.width-a,l=this.height-a;return Ng(this.canvas,this.context,d,f,i,l,this.radius,kc(this.fillStyle,this.canvas,this.context),kc(this.strokeStyle,this.canvas,this.context),a,kc(this.fillColor2,this.canvas,this.context),this.isHorizontalGradient,this.iteration),this}}var pw=Object.freeze({__proto__:null,BoundsComponent:Lh,InputComponent:Mh,GetVertices:of,TransformComponent:Nh,UpdateLocalTransform:Oh,UpdateWorldTransform:Ph});class nw extends md{constructor(a,b,d,f){super(a,b,d,f);this.type="AnimatedSprite",this.anims=new Map(),this.animData={currentAnim:"",currentFrames:[],frameIndex:0,animSpeed:0,nextFrameTime:0,repeatCount:0,isPlaying:!1,yoyo:!1,pendingStart:!1,playingForward:!0,delay:0,repeatDelay:0,onStart:null,onRepeat:null,onComplete:null}}stop(){const a=this.animData;a.isPlaying=!1,a.currentAnim="",a.onComplete&&a.onComplete(this,a.currentAnim)}nextFrame(){const a=this.animData;a.frameIndex++;if(a.frameIndex===a.currentFrames.length)if(a.yoyo)a.frameIndex--,a.playingForward=!1;else if(a.repeatCount===-1||a.repeatCount>0)a.frameIndex=0,a.repeatCount!==-1&&a.repeatCount--,a.onRepeat&&a.onRepeat(this,a.currentAnim),a.nextFrameTime+=a.repeatDelay;else return a.frameIndex--,this.stop();this.setFrame(a.currentFrames[a.frameIndex]),a.nextFrameTime+=a.animSpeed}prevFrame(){const a=this.animData;a.frameIndex--;if(a.frameIndex===-1)if(a.repeatCount===-1||a.repeatCount>0)a.frameIndex=0,a.playingForward=!0,a.repeatCount!==-1&&a.repeatCount--,a.onRepeat&&a.onRepeat(this,a.currentAnim),a.nextFrameTime+=a.repeatDelay;else return a.frameIndex=0,this.stop();this.setFrame(a.currentFrames[a.frameIndex]),a.nextFrameTime+=a.animSpeed}update(a,b){super.update(a,b);const d=this.animData;if(!d.isPlaying)return;d.nextFrameTime-=a*1e3,d.nextFrameTime=Math.max(d.nextFrameTime,0),d.nextFrameTime===0&&(d.pendingStart?(d.onStart&&d.onStart(this,d.currentAnim),d.pendingStart=!1,d.nextFrameTime=d.animSpeed):d.playingForward?this.nextFrame():this.prevFrame())}get isPlaying(){return this.animData.isPlaying}get isPlayingForward(){return this.animData.isPlaying&&this.animData.playingForward}get currentAnimation(){return this.animData.currentAnim}destroy(a){super.destroy(a),this.anims.clear(),this.animData=null}}function _k(a,b,d,f,i,l,q=0,u=1,v=1,A=0,E=0){const H=Math.cos(q+E)*u,R=Math.sin(q+E)*u,L=-Math.sin(q-A)*v,O=Math.cos(q-A)*v,V=a*H+d*L+i,X=a*R+d*O+l,ea=a*H+f*L+i,ga=a*R+f*O+l,ka=b*H+f*L+i,ha=b*R+f*O+l,oa=b*H+d*L+i,pa=b*R+d*O+l;return{x0:V,y0:X,x1:ea,y1:ga,x2:ka,y2:ha,x3:oa,y3:pa}}function Qh(a,b,d,f,i,l,q,u,v,A=0,E=4294967295){const H=a.shaders.current,R=H.buffer,L=R.vertexViewF32,O=R.vertexViewU32,V=H.count*R.quadElementSize;L[V+0]=b,L[V+1]=d,L[V+2]=l,L[V+3]=v,L[V+4]=A,O[V+5]=E,L[V+6]=b,L[V+7]=d+i,L[V+8]=l,L[V+9]=q,L[V+10]=A,O[V+11]=E,L[V+12]=b+f,L[V+13]=d+i,L[V+14]=u,L[V+15]=q,L[V+16]=A,O[V+17]=E,L[V+18]=b+f,L[V+19]=d,L[V+20]=u,L[V+21]=v,L[V+22]=A,O[V+23]=E,H.count++}function ng(a,b,d,f,i,l,q,u,v,A=0,E=4294967295){a.shaders.setDefault(A),Qh(a,b,d,f,i,l,q,u,v,A,E),a.shaders.popAndRebind()}class og extends Gc{constructor(){super();this.type="Layer",this.transform.passthru=!0,this.willRender=!1}}class al extends og{constructor(){super();this.type="RenderLayer",this.willRender=!0,this.willRenderChildren=!0,this.willCacheChildren=!0,this.setDirty(Ga.CHILD_CACHE);const a=Jd(),b=Kd(),d=Ld(),f=new $b(null,a*d,b*d);f.binding=new pf(f),f.binding.framebuffer=Rh(f.binding.texture),this.texture=f,this.framebuffer=f.binding.framebuffer}renderGL(a){this.numChildren>0&&(a.flush(),this.isDirty(Ga.CHILD_CACHE)?(a.fbo.add(this.framebuffer,!0),this.clearDirty(Ga.CHILD_CACHE)):(a.fbo.add(this.framebuffer,!1),this.postRenderGL(a)))}postRenderGL(a){const b=this.texture;a.flush(),a.fbo.pop();const{u0:d,v0:f,u1:i,v1:l}=b.firstFrame;a.textures.bind(b),ng(a,0,0,b.width,b.height,d,f,i,l),a.textures.unbind(),this.clearDirty(Ga.TRANSFORM)}}class ow extends al{constructor(){super();this.shaders=[],this.type="EffectLayer"}postRenderGL(a){const b=this.shaders,d=this.texture;a.flush(),a.fbo.pop();if(b.length===0){const{u0:f,v0:i,u1:l,v1:q}=d.firstFrame;a.textures.bind(d),ng(a,0,0,d.width,d.height,f,i,l,q),a.textures.unbind()}else{let f=d;for(let v=0;v<b.length;v++){const A=b[v],{u0:E,v0:H,u1:R,v1:L}=f.firstFrame;a.shaders.set(A,0)&&(A.renderToFBO=!0,a.textures.bind(f),Qh(a,0,0,f.width,f.height,E,H,R,L),a.shaders.pop(),a.textures.unbind(),f=A.texture)}const{u0:i,v0:l,u1:q,v1:u}=f.firstFrame;a.textures.bind(f),ng(a,0,0,f.width,f.height,i,l,q,u),a.textures.unbind()}this.clearDirty(Ga.TRANSFORM)}}function lq(a,b){const d=a.texture,f=b.shaders.current,i=f.buffer;b.flush(),b.textures.request(d),a.updateTextureIndex();const l=b.gl;f.bindBuffers(a.indexBuffer,a.vertexBuffer),l.bufferData(l.ARRAY_BUFFER,a.data,l.STATIC_DRAW),l.drawElements(l.TRIANGLES,a.count*i.quadIndexSize,l.UNSIGNED_SHORT,0),f.prevCount=a.count,b.flushTotal++,f.bindBuffers(i.indexBuffer,i.vertexBuffer)}function mq(a,b,d){return Math.max(b,Math.min(d,a))}class qw extends og{constructor(a,b){super();this.glTextureIndex=0,this.hasTexture=!1,this.type="SpriteBatch",this.willRender=!0,this.setTexture(b),this.setMaxSize(a)}resetBuffers(){let a=[];for(let d=0;d<this.maxSize*4;d+=4)a.push(d+0,d+1,d+2,d+2,d+3,d+0);this.data=new ArrayBuffer(this.maxSize*96),this.index=new Uint16Array(a),this.vertexViewF32=new Float32Array(this.data),this.vertexViewU32=new Uint32Array(this.data);const b=Hb.get();b&&(ue(this.vertexBuffer),ue(this.indexBuffer),this.vertexBuffer=b.createBuffer(),this.indexBuffer=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer),b.bufferData(b.ARRAY_BUFFER,this.data,b.STATIC_DRAW),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.index,b.STATIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,null)),a=[],this.count=0}setMaxSize(a){return this.maxSize=mq(a,0,65535),this.resetBuffers(),this}setTexture(a){let b;return a instanceof $b?b=a:b=Ob.get().get(a),b?(this.texture=b,this.hasTexture=!0,this.glTextureIndex=-1):console.warn(`Invalid Texture key: ${a}`),this}isRenderable(){return this.visible&&this.willRender&&this.hasTexture&&this.count>0}clear(){return this.count=0,this}addToBatch(a,b,d,f,i,l,q,u,v,A){if(this.count>=this.maxSize)return console.warn("SpriteBatch full"),this;const{u0:E,u1:H,v0:R,v1:L}=a,O=this.vertexViewF32,V=this.vertexViewU32,X=this.count*24,ea=this.texture.binding?this.texture.binding.index:0;return O[X+0]=d,O[X+1]=f,O[X+2]=E,O[X+3]=R,O[X+4]=ea,V[X+5]=b,O[X+6]=i,O[X+7]=l,O[X+8]=E,O[X+9]=L,O[X+10]=ea,V[X+11]=b,O[X+12]=q,O[X+13]=u,O[X+14]=H,O[X+15]=L,O[X+16]=ea,V[X+17]=b,O[X+18]=v,O[X+19]=A,O[X+20]=H,O[X+21]=R,O[X+22]=ea,V[X+23]=b,this.setDirty(Ga.TRANSFORM),this.count++,this}add(a){const{frame:b=null,x:d=0,y:f=0,rotation:i=0,scaleX:l=1,scaleY:q=1,skewX:u=0,skewY:v=0,originX:A=0,originY:E=0,alpha:H=1,tint:R=16777215}=a,L=this.texture.getFrame(b),{left:O,right:V,top:X,bottom:ea}=L.getExtent(A,E),{x0:ga,y0:ka,x1:ha,y1:oa,x2:pa,y2:ja,x3:I,y3:P}=_k(O,V,X,ea,d,f,i,l,q,u,v),x=ve(R,H);return this.addToBatch(L,x,ga,ka,ha,oa,pa,ja,I,P)}addXY(a,b,d){const f=this.texture.getFrame(d),{left:i,right:l,top:q,bottom:u}=f.getExtent(0,0),{x0:v,y0:A,x1:E,y1:H,x2:R,y2:L,x3:O,y3:V}=_k(i,l,q,u,a,b);return this.addToBatch(f,4294967295,v,A,E,H,R,L,O,V)}updateTextureIndex(){const a=this.texture.binding.index;if(a===this.glTextureIndex)return;const b=this.vertexViewF32;this.glTextureIndex=a;for(let d=0;d<this.count;d++)b[d*24+4]=a,b[d*24+10]=a,b[d*24+16]=a,b[d*24+22]=a}renderGL(a){lq(this,a)}destroy(){super.destroy(),ue(this.vertexBuffer),ue(this.indexBuffer),this.data=null,this.vertexViewF32=null,this.vertexViewU32=null,this.index=null,this.texture=null,this.hasTexture=!1}}class rw extends md{constructor(a,b,d="",f,i){super(a,b,Md());this.splitRegExp=/(?:\r\n|\r|\n)/,this.padding={left:0,right:0,top:0,bottom:0},this.verticalAlign="ascent",this.lineSpacing=0,this.font="16px monospace",this.fillStyle="#fff",this.strokeStyle="",this.backgroundStyle="",this.cornerRadius=0,this.textAlign="left",this.textBaseline="alphabetic",this.lineWidth=0,this.lineDash=[],this.antialias=!1,this.type="Text";const l=yb.get();this.resolution=l.renderer.resolution,this.canvas=this.texture.image,this.context=this.canvas.getContext("2d"),f&&(this.font=f),i&&(this.fillStyle=i),this.setText(d)}syncContext(a,b){this.preRenderCallback&&this.preRenderCallback(a,b),b.font=this.font,b.textBaseline=this.textBaseline,b.textAlign=this.textAlign,b.fillStyle=this.fillStyle,b.strokeStyle=this.strokeStyle,b.lineWidth=this.lineWidth,b.lineCap="round",b.lineJoin="round",b.setLineDash(this.lineDash),b.imageSmoothingEnabled=this.antialias}updateText(){const a=this.canvas,b=this.context,d=this.resolution,f=this._text.split(this.splitRegExp),i=this.padding,l=this.fillStyle,q=this.strokeStyle,u=this.lineWidth,v=this.lineSpacing,A=u>0?u/2:0;b.clearRect(0,0,a.width,a.height),this.syncContext(a,b),b.textAlign="start";let E=0,H=0,R=0;const L=[],O=this.verticalAlign==="ascent",V=b.measureText("|MÉq"),X=Math.ceil(Math.abs(V.actualBoundingBoxAscent)+Math.abs(V.actualBoundingBoxDescent))+u;for(let x=0;x<f.length;x++){const G=b.measureText(f[x]),F=G.actualBoundingBoxLeft,J=G.actualBoundingBoxRight;let U=G.actualBoundingBoxAscent,K=G.actualBoundingBoxDescent;(!U&&!K||f[x]==="")&&(U=X,K=0);const ca=Math.ceil(Math.abs(F)+Math.abs(J))+u,ba=Math.ceil(Math.abs(U)+Math.abs(K))+u;O?(R+=U+A,x>0&&(R+=v+A),H=R+K+A):(R=H+(ba-K-A),H+=ba,x<f.length-1&&(H+=v)),E=Math.max(E,ca),L.push({lineWidth:ca,lineHeight:ba,ascent:U,descent:K,left:F,right:J,y:R})}E+=i.left+i.right,H+=i.top+i.bottom;const ea=this.fixedWidth?this.fixedWidth:E,ga=this.fixedHeight?this.fixedHeight:H,ka=Math.ceil(ea*d),ha=Math.ceil(ga*d);(a.width!==ka||a.height!==ha)&&(a.width=ka,a.height=ha,this.texture.setSize(ea,ga),this.setSize(ea,ga)),b.save(),b.scale(d,d),this.syncContext(a,b);const oa=this.backgroundStyle;if(oa){b.save(),b.fillStyle=oa,b.strokeStyle=oa;const x=this.cornerRadius,G=x>0?x/2:0;x&&(b.lineWidth=x,b.strokeRect(G,G,ea-x,ga-x)),b.fillRect(G,G,ea-x,ga-x),b.restore()}const pa=this.textAlign,ja=pa==="center",I=pa==="right"||pa==="end",P=(ga-H)/2+i.top;for(let x=0;x<f.length;x++){const G=f[x],F=L[x];let J=i.left+F.left+A;const U=P+F.y;ja?J=ea/2:I&&(J=ea-A),q&&b.strokeText(G,J,U),l&&b.fillText(G,J,U)}return b.restore(),this.texture.binding&&this.texture.binding.update(),this.setDirty(Ga.TEXTURE),this}get text(){return this._text}set text(a){this.setText(a)}setText(a=""){return Array.isArray(a)&&(a=a.join(`
`)),a!==this._text&&(this._text=a.toString(),this.updateText()),this}destroy(a){this.texture.destroy(),this.fillStyle=null,this.strokeStyle=null,this.backgroundStyle=null,this.canvas=null,this.context=null,super.destroy(a)}}function lc(a,b){Array.isArray(b)?Uk(a,...b):ne(a,b)}function Qb(a,b,d=!0){if(Array.isArray(b)){lg(a,...b);for(let f=0,i=b.length;f<i;f++)b[f].destroy()}else{const f=b;re(a,f),d&&f.destroy()}}function Xc(a,b=!0){const d=a.children;for(let f=0,i=d.length;f<i;f++){const l=d[f];l.parent=null,b&&l.destroy()}d.length=0}class gn extends te{constructor(){super(...arguments);this.type="rexContainer"}add(a){return lc(this,a),this}remove(a,b=!0){return Qb(this,a,b),this}clear(a=!0){return Xc(this,a),this}}function Ac(a=0,b={left:0,right:0,top:0,bottom:0}){if(typeof a==="number")b.left=a,b.right=a,b.top=a,b.bottom=a;else{let d,f,i,l;({left:d=0,right:f=0,top:i=0,bottom:l=0}=a),b.left=d,b.right=f,b.top=i,b.bottom=l}return b}function Le(a){return a.x+(0-a.originX)*a.width}function Ne(a){return a.x+(.5-a.originX)*a.width}function Me(a){return a.x+(1-a.originX)*a.width}function Oe(a){return a.y+(0-a.originY)*a.height}function Qe(a){return a.y+(.5-a.originY)*a.height}function Pe(a){return a.y+(1-a.originY)*a.height}function Og(a,b){a.x+=b-Le(a)}function Qg(a,b){a.x+=b-Ne(a)}function Pg(a,b){a.x+=b-Me(a)}function Rg(a,b){a.y+=b-Oe(a)}function Tg(a,b){a.y+=b-Qe(a)}function Sg(a,b){a.y+=b-Pe(a)}function Ot(a,b,d,f){if(a.rexSizer.hidden||!a.needLayout)return a;a.preLayout(b,d,f),d===void 0&&(d=Math.max(a.childrenWidth,a.minWidth)),f===void 0&&(f=Math.max(a.childrenHeight,a.minHeight)),a.resize(d,f),a.layoutBackgrounds(),a.postLayout(b,d,f)}function hn(a,b,d,f){if(b)return;a.layoutInit();const i=a.getChildrenSizers();for(var l=0,q=i.length;l<q;l++){const u=i[l];if(u.rexSizer.hidden||!u.needLayout)continue;hn(u)}}function Kf(a){a._childrenWidth=void 0,a._childrenHeight=void 0}function Yd(a,b,d){if(!a||b===void 0&&d===void 0)return;a.resize?(b===void 0&&(b=a.width),d===void 0&&(d=a.height),a.resize(b,d)):(b!==void 0&&(a.width=b),d!==void 0&&(a.height=d))}var tb;(function(a){a[a.left_top=0]="left_top",a[a.top_left=0]="top_left",a[a.center_top=1]="center_top",a[a.top_center=1]="top_center",a[a.right_top=2]="right_top",a[a.top_right=2]="top_right",a[a.left_center=3]="left_center",a[a.center_left=3]="center_left",a[a.center=4]="center",a[a.center_center=4]="center_center",a[a.right_center=5]="right_center",a[a.center_right=5]="center_right",a[a.left_bottom=6]="left_bottom",a[a.bottom_left=6]="bottom_left",a[a.center_bottom=7]="center_bottom",a[a.bottom_center=7]="bottom_center",a[a.right_bottom=8]="right_bottom",a[a.bottom_right=8]="bottom_right"})(tb||(tb={}));function Wu(a,b,d=tb.center,f=0,i=0){const l=d%3;switch(l){case 0:Og(a,Le(b));break;case 1:Qg(a,Ne(b));break;default:Pg(a,Me(b));break}const q=Math.floor(d/3);switch(q){case 0:Rg(a,Oe(b));break;case 1:Tg(a,Qe(b));break;default:Sg(a,Pe(b));break}a.x-=f,a.y-=i}class hy{constructor(){this.x=0;this.y=0;this.width=0;this.height=0;this.originX=0;this.originY=0}setTo(a=0,b=0,d=0,f=0){return this.x=a,this.y=b,this.width=d,this.height=f,this}alignIn(a,b=tb.center,d=0,f=0){return Wu(a,this,b,d,f),this}}const Yc=new hy();function Pt(a){if(a.backgroundChildren===void 0)return;const b=a.left,d=a.top,f=a.width,i=a.height,l=a.backgroundChildren;for(let q=0,u=l.length;q<u;q++){const v=l[q],A=v.rexSizer;if(A.hidden)continue;const E=A.padding,H=b+E.left,R=d+E.top,L=f-E.left-E.right,O=i-E.top-E.bottom;Yd(v,L,O),Yc.setTo(H,R,L,O).alignIn(v)}}function Qt(a,b,d,f){}function Rt(a,b){lc(a,b)}function St(a){return a.hasOwnProperty("rexSizer")||(a.rexSizer={}),a.rexSizer}function Tt(a,b,{padding:d=0,childKey:f}={}){a.backgroundChildren===void 0&&(a.backgroundChildren=[]),lc(a,b),a.backgroundChildren.push(b);const i=a.getSizerState(b);i.padding=Ac(d),f!==void 0&&a.addChildrenMap(f,b)}function Ut(a,b){return a.backgroundChildren===void 0?!1:a.backgroundChildren.includes(b)}function Vt(a,b,d){a.childrenMap===void 0&&(a.childrenMap={}),a.childrenMap[b]=d}function Zt(a,b,d=!1){if(d){const f=[a];for(;f.length;){a=f.shift();for(let i=0,l=a.children.length;i<l;i++){const q=a.children[i];if(q.name===b)return q;f.push(q)}}}else for(let f=0,i=a.children.length;f<i;f++){const l=a.children[f];if(l.name===b)return l}return null}function jn(a,b,d){typeof b==="string"&&(b=b.split("."));if(b.length===0)return null;let f=b.shift(),i=null;if(f.charAt(0)==="#")f=f.substring(1),i=Zt(a,f,d);else if(!f.includes("["))a.childrenMap&&(i=a.childrenMap[f]);else{const l=f.match(gy);if(l!=null){if(a.childrenMap){let q=a.childrenMap[l[1]];q&&(i=q[l[2]])}}}return b.length===0?i:i&&i.childrenMap?jn(i,b,d):null}const gy=/(\S+)\[(\d+)\]/i;function Ug(a){let b=a.parent;for(;b;){if(b instanceof Ia)return b;b=b.parent}return null}function Wt(a,b){return Ug(b)===a}function Xt(a,b){return a.backgroundChildren?a.backgroundChildren.includes(b):!1}function Yt(a){let b,d=Ug(a);for(;d;)b=d,d=Ug(d);return b}class Ia extends gn{constructor({x:a=0,y:b=0,width:d=0,height:f=0,space:i=0,name:l=""}={}){super(a,b);this.type="rexBaseSizer";this.rexSizer={};this.needLayout=!0;this.setMinSize(d,f),this.space=Ac(i),this.name=l}destroy(a){this.sizerChildren=null,this.backgroundChildren=null,super.destroy(a)}get left(){return Le(this)}set left(a){Og(this,a)}alignLeft(a){return this.left=a,this}get right(){return Me(this)}set right(a){Pg(this,a)}alignRight(a){return this.right=a,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get centerX(){return Ne(this)}set centerX(a){Qg(this,a)}alignCenterX(a){return this.centerX=a,this}get top(){return Oe(this)}set top(a){Rg(this,a)}alignTop(a){return this.top=a,this}get bottom(){return Pe(this)}set bottom(a){Sg(this,a)}alignBottom(a){return this.bottom=a,this}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get centerY(){return Qe(this)}set centerY(a){Tg(this,a)}alignCenterY(a){return this.centerY=a,this}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}setMinSize(a,b){return this.setMinWidth(a).setMinHeight(b),this}setMinWidth(a=0){return this.minWidth=a,this}setMinHeight(a=0){return this.minHeight=a,this}getChildrenWidth(){return 0}getChildrenHeight(){return 0}getChildrenSizers(a=[]){return a}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}resize(a=this.width,b=this.height){return this.setSize(a,b),this}getSizerState(a){return St(a)}layout(){const a=this.x,b=this.y;return this.setPosition(0,0)._layout().setPosition(a,b),this}_layout(a,b,d){return Ot(this,a,b,d),this}preLayout(a,b,d){return hn(this,a,b,d),this}layoutInit(){return Kf(this),this}layoutBackgrounds(){return Pt(this),this}postLayout(a,b,d){return Qt(this,a,b,d),this}pin(a){return Rt(this,a),this}addBackground(a,b){return Tt(this,a,b),this}isBackground(a){return Ut(this,a)}addChildrenMap(a,b){return Vt(this,a,b),this}getElement(a,b=!1){return jn(this,a,b)}isChild(a){return Wt(this,a)}isBackgroundChild(a){return Xt(this,a)}getTopmostParentSizer(a=this){return Yt(a)}}var Bc;(function(a){a[a.left=0]="left",a[a.top=0]="top",a[a.right=1]="right",a[a.bottom=1]="bottom",a[a.center=2]="center",a[a.justify=3]="justify",a[a["justify-left"]=3]="justify-left",a[a["justify-top"]=3]="justify-top",a[a["justify-right"]=4]="justify-right",a[a["justify-bottom"]=4]="justify-bottom",a[a["justify-center"]=5]="justify-center"})(Bc||(Bc={}));var Pa;(function(a){a[a.x=0]="x",a[a.h=0]="h",a[a.horizontal=0]="horizontal",a[a["left-to-right"]=0]="left-to-right",a[a.y=1]="y",a[a.v=1]="v",a[a.vertical=1]="vertical",a[a["top-to-bottom"]=1]="top-to-bottom"})(Pa||(Pa={}));function _t(a,b=a.sizerChildren){let d=0;for(let f=0,i=b.length;f<i;f++){const l=b[f];if(l===`
`)continue;const q=l instanceof Ia?Math.max(l.minWidth,l.childrenWidth):l.width;d=Math.max(q,d)}return d}function $t(a,b=a.sizerChildren){let d=0;for(let f=0,i=b.length;f<i;f++){const l=b[f];if(l===`
`)continue;const q=l instanceof Ia?Math.max(l.minHeight,l.childrenHeight):l.height;d=Math.max(q,d)}return d}function au(a,b=[]){const d=a.sizerChildren;for(var f=0,i=d.length;f<i;f++){const l=d[f];if(l===`
`)continue;l instanceof Ia&&b.push(l)}return b}function bu(a){if(a.rexSizer.hidden)return 0;let b;return a.orientation===Pa.x?b=a.maxChildWidth:b=0,b+a.space.left+a.space.right}function cu(a){if(a.rexSizer.hidden)return 0;let b;return a.orientation===Pa.x?b=0:b=a.maxChildHeight,b+a.space.top+a.space.bottom}function ku(a,b){const d={lines:[],width:0,height:0},f=d.lines,i=a.sizerChildren;let l=0,q;for(let u=0,v=i.length;u<v;u++){let A=i[u],E,H;if(A===`
`)A=void 0,E=0,H=!0;else{if(A.rexSizer.hidden)continue;A instanceof Ia&&A.layout(),E=a.orientation===Pa.x?lu(A):mu(A),H=l<E}H&&(q&&(q.width=b-(l+a.space.item),d.width=Math.max(d.width,q.width),d.height+=q.height+a.space.line),q={children:[],width:0,height:0},f.push(q),l=b),l-=E+a.space.item;if(A){q.children.push(A);const R=a.orientation===Pa.x?mu(A):lu(A);q.height=Math.max(q.height,R)}}return q&&(q.width=b-(l+a.space.item),d.width=Math.max(d.width,q.width),d.height+=q.height),d}function lu(a){const b=a.rexSizer.padding;return a.width+b.left+b.right}function mu(a){const b=a.rexSizer.padding;return a.height+b.top+b.bottom}function du(a,b,d,f){if(a.rexSizer.hidden||!a.needLayout)return;a.preLayout(b),d===void 0&&(d=Math.max(a.maxChildWidth+a.space.left+a.space.right,a.minWidth)),f===void 0&&(f=Math.max(a.maxChildHeight+a.space.top+a.space.bottom,a.minHeight));let i;a.orientation===Pa.x?i=d-a.space.left-a.space.right:i=f-a.space.top-a.space.bottom;const l=ku(a,i);a.orientation===Pa.x?f=Math.max(f,l.height+a.space.top+a.space.bottom):d=Math.max(d,l.height+a.space.left+a.space.right),a.resize(d,f);const q=a.innerLeft,u=a.innerTop;let v=q,A=u;const E=l.lines;for(let L=0,O=E.length;L<O;L++){const V=E[L],X=V.children;a.rtl&&X.reverse();const ea=i-V.width;let ga=0;switch(a.align){case Bc.left:break;case Bc.right:a.orientation===Pa.x?v+=ea:A+=ea;break;case Bc.center:a.orientation===Pa.x?v+=ea/2:A+=ea/2;break;case Bc["justify-left"]:ga=ln(i,ea,X.length);break;case Bc["justify-right"]:ga=ln(i,ea,X.length),ga===0&&(a.orientation===Pa.x?v+=ea:A+=ea);break;case Bc["justify-center"]:ga=ln(i,ea,X.length),ga===0&&(a.orientation===Pa.x?v+=ea/2:A+=ea/2);break}for(var H=0,R=X.length;H<R;H++){const ka=X[H],ha=ka.rexSizer,oa=ha.padding;let pa,ja,I,P;a.orientation===Pa.x?(pa=v+oa.left,H>0&&(pa+=a.space.item),ja=A+oa.top,I=ka.width,P=ka.height,v=pa+I+oa.right+ga):(pa=v+oa.left,ja=A+oa.top,H>0&&(ja+=a.space.item),I=ka.width,P=ka.height,A=ja+P+oa.bottom+ga),Yc.setTo(pa,ja,I,P).alignIn(ka,tb.center)}a.orientation===Pa.x?(v=q,A+=V.height+a.space.line):(v+=V.height+a.space.line,A=u)}a.layoutBackgrounds(),a.postLayout()}function ln(a,b,d){return b/a<=.25?b/(d-1):0}function eu(a){Kf(a),a._maxChildWidth=void 0,a._maxChildHeight=void 0}function fu(a,b,{padding:d=0,childKey:f,index:i}={}){lc(a,b);const l=a.getSizerState(b);l.padding=Ac(d),i===void 0||i>=a.sizerChildren.length?a.sizerChildren.push(b):a.sizerChildren.splice(i,0,b),f!==void 0&&a.addChildrenMap(f,b)}function gu(a){a.sizerChildren.push(`
`)}function Ig(a,b){if(b>=a.length)return;let d=a.length-1,f=a[b];for(let i=b;i<d;i++)a[i]=a[i+1];return a.length=d,f}function Zc(a,b,d,f=a){if(!Array.isArray(b)){const l=a.indexOf(b);return l!==-1?(Ig(a,l),d&&d.call(f,b),b):null}let i=b.length-1;for(;i>=0;){const l=b[i],q=a.indexOf(l);q!==-1?(Ig(a,q),d&&d.call(f,l)):b.pop(),i--}return b}function hu(a,b,d=!0){Qb(a,b,d);const f=Zc(a.sizerChildren,b);!f&&a.backgroundChildren&&Zc(a.backgroundChildren,b)}function iu(a,b=!0){const d=a.sizerChildren;for(let f=0,i=d.length;f<i;f++){const l=d[f];if(l===`
`)continue;Qb(a,l,b)}a.sizerChildren.length=0}function ju(a,b=!0){Xc(a,b),a.sizerChildren.length=0,a.backgroundChildren&&(a.backgroundChildren.length=0)}class kn extends Ia{constructor({space:a={item:0,line:0},orientation:b=Pa.x,align:d=Bc.left,rtl:f=!1}={}){super(arguments[0]);this.type="rexFixedWidthSizer";this.sizerChildren=[];this.setOrientation(b),this.setItemSpacing(a.item),this.setLineSpacing(a.line),this.setAlign(d),this.setRTL(f)}setOrientation(a){return typeof a==="string"&&(a=Pa[a]),this.orientation=a,this}setItemSpacing(a=0){return this.space.item=a,this}setLineSpacing(a=0){return this.space.line=a,this}setAlign(a){return typeof a==="string"&&(a=Bc[a]),this.align=a,this}setRTL(a=!0){return this.rtl=a,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=_t(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=$t(this)),this._maxChildHeight}getChildrenSizers(a=[]){return au(this,a)}getChildrenWidth(){return bu(this)}getChildrenHeight(){return cu(this)}_layout(a,b,d){return du(this,a,b,d),this}layoutInit(){return eu(this),this}add(a,b){return fu(this,a,b),this}addNewLine(){return gu(this),this}remove(a,b=!0){return hu(this,a,b),this}removeAll(a=!0){return iu(this,a),this}clear(a=!0){return ju(this,a),this}}function _c(a,b,d=0,f=a.length-1){for(let i=d;i<=f;i++)a[i]=b;return a}function nu(a,{column:b=0,row:d=0,columnProportions:f=0,rowProportions:i=0,space:l}={}){a.columnCount=b,a.rowCount=d,a.sizerChildren.length=b*d,_c(a.sizerChildren,null),a.columnProportions.length=b;if(typeof f==="number")_c(a.columnProportions,f);else for(let v=0;v<b;v++)a.columnProportions[v]=f[v]??0;a.rowProportions.length=d;if(typeof i==="number")_c(a.rowProportions,i);else for(let v=0;v<d;v++)a.rowProportions[v]=i[v]??0;a.columnWidth.length=b,a.rowHeight.length=d,a.space.column=[],a.space.column.length=b-1;const q=l.column??0;if(typeof q==="number")_c(a.space.column,q);else for(let v=0,A=a.space.column.length;v<A;v++)a.space.column[v]=q[v]??0;a.space.row=[],a.space.row.length=d-1;const u=l.row??0;if(typeof u==="number")_c(a.space.row,u);else for(let v=0,A=a.space.row.length;v<A;v++)a.space.row[v]=u[v]??0}function ou(a,b=[]){const d=a.sizerChildren;for(var f=0,i=d.length;f<i;f++){const l=d[f];l&&l instanceof Ia&&b.push(l)}return b}function kj(...a){return Array.prototype.reduce.call(a,Ty,0)}function Ty(a,b){return a+b}function pu(a){if(a.rexSizer.hidden)return 0;let b=0;const d=a.sizerChildren;for(let f=0;f<a.columnCount;f++){const i=a.columnProportions[f];let l=0;if(i===0){for(let q=0;q<a.rowCount;q++){const u=d[q*a.columnCount+f];if(!u)continue;if(u.rexSizer.hidden)continue;let v=u instanceof Ia?Math.max(u.minWidth,u.childrenWidth):u.width;const A=u.rexSizer.padding;v+=A.left+A.right,l=Math.max(l,v)}b+=l}a.columnWidth[f]=l}return b+kj(a.space.left,...a.space.column,a.space.right)}function qu(a){if(a.rexSizer.hidden)return 0;let b=0;const d=a.sizerChildren;for(let i=0;i<a.rowCount;i++){const l=a.rowProportions[i];let q=0;if(l===0){for(var f=0;f<a.columnCount;f++){const u=d[i*a.columnCount+f];if(!u)continue;if(u.rexSizer.hidden)continue;let v=u instanceof Ia?Math.max(u.minHeight,u.childrenHeight):u.height;const A=u.rexSizer.padding;v+=A.top+A.bottom,q=Math.max(q,v)}b+=q}a.rowHeight[i]=q}return b+kj(a.space.top,...a.space.row,a.space.bottom)}function Bu(a,b){let d;const f=a.rexSizer;if(f.expand){const i=f.padding;d=b-i.left-i.right}return d}function Au(a,b){let d;const f=a.rexSizer;if(f.expand){const i=f.padding;d=b-i.top-i.bottom}return d}function Zd(a,b,d){return a.sizerChildren[d*a.columnCount+b]}function ru(a,b,d,f){if(a.rexSizer.hidden||!a.needLayout)return;a.preLayout(b);const i=a.totalColumnProportions,l=a.totalRowProportions;if(d===void 0)if(b&&i>0){const V=a.rexSizer.padding;d=b.width-V.left-V.right}else d=Math.max(a.childrenWidth,a.minWidth);if(f===void 0)if(b&&l>0){const V=a.rexSizer.padding;f=b.height-V.top-V.bottom}else f=Math.max(a.childrenHeight,a.minHeight);a.resize(d,f);let q;i>0?q=(a.width-a.childrenWidth)/i:q=0;let u;l>0?u=(a.height-a.childrenHeight)/l:u=0;const v=a.innerLeft,A=a.innerTop,E=a.space.column,H=a.space.row;let R=v,L=A;for(let V=0;V<a.rowCount;V++){const X=a.rowProportions[V],ea=X===0?a.rowHeight[V]:X*u;R=v;for(var O=0;O<a.columnCount;O++){const ga=a.columnProportions[O],ka=ga===0?a.columnWidth[O]:ga*q,ha=Zd(a,O,V);if(!ha||ha.rexSizer.hidden){R+=ka+E[O];continue}const oa=Bu(ha,ka),pa=Au(ha,ea);ha instanceof Ia?ha._layout(a,oa,pa):Yd(ha,oa,pa);const ja=ha.rexSizer,I=ja.padding,P=R+I.left,x=ka-I.left-I.right,G=L+I.top,F=ea-I.top-I.bottom;Yc.setTo(P,G,x,F).alignIn(ha,ja.align),R+=ka+E[O]}L+=ea+H[V]}return a.layoutBackgrounds(),a.postLayout()}function zu(a,b,d,f,i){if(typeof a==="number"&&typeof b==="number"){let l=b*f+a;if(!d[l])return l}else if(b===void 0&&typeof a==="number")for(let l=0;l<i;l++){let q=l*f+a;if(!d[q])return q}else if(a===void 0&&typeof b==="number")for(let l=0;l<f;l++){let q=b*f+l;if(!d[q])return q}else if(b===!0)for(let l=0;l<f;l++)for(let q=0;q<i;q++){let u=q*f+l;if(!d[u])return u}else for(let l=0,q=d.length;l<q;l++)if(!d[l])return l;return null}function su(a,b,{column:d,row:f,align:i=tb.center,padding:l=0,expand:q=!0,childKey:u}={}){const v=zu(d,f,a.sizerChildren,a.columnCount,a.rowCount);if(v===null)return;lc(a,b),typeof i==="string"&&(i=tb[i]);const A=a.getSizerState(b);A.align=i,A.padding=Ac(l),A.expand=q,a.sizerChildren[v]=b,u!==void 0&&a.addChildrenMap(u,b)}function jj(a,b,d=!0){Qb(a,b,d);const f=a.sizerChildren.indexOf(b);f>=0?a.sizerChildren[f]=null:a.backgroundChildren&&Zc(a.backgroundChildren,b)}function tu(a,b,d,f=!0){const i=Zd(a,b,d);i&&jj(a,i,f)}function uu(a,b=!0){Qb(a,a.sizerChildren,b),_c(a.sizerChildren,null)}function vu(a,b=!0){Xc(a,b),_c(a.sizerChildren,null),a.backgroundChildren&&(a.backgroundChildren.length=0)}function wu(a,b,d){if(!b)return null;const f=a.sizerChildren.indexOf(b);return f===-1?null:(d===void 0&&(d={x:0,y:0}),d.x=f%a.columnCount,d.y=Math.floor(f/a.columnCount),d)}function xu(a,b,d){for(let f=0,i=a.rowCount;f<i;f++)for(let l=0,q=a.columnCount;l<q;l++){if(Zd(a,l,f))continue;let u;d?u=b.call(d,l,f,a):u=b(l,f,a);if(u)return}}function yu(a){const b=a.sizerChildren;let d=0;for(let f=0,i=b.length;f<i;f++)b[f]||d++;return d}class mn extends Ia{constructor(a={}){super(a);this.type="rexGridSizer";this.sizerChildren=[];this.columnProportions=[];this.rowProportions=[];this.columnWidth=[];this.rowHeight=[];nu(this,a)}setColumnProportion(a,b){return a<this.columnProportions.length&&(this.columnProportions[a]=b),this}setRowProportion(a,b){return a<this.rowProportions.length&&(this.rowProportions[a]=b),this}get totalColumnProportions(){return this.columnProportions.reduce((a,b)=>a+b)}get totalRowProportions(){return this.rowProportions.reduce((a,b)=>a+b)}getChildrenSizers(a=[]){return ou(this,a)}getChildrenWidth(){return pu(this)}getChildrenHeight(){return qu(this)}_layout(a,b,d){return ru(this,a,b,d),this}add(a,b){return su(this,a,b),this}remove(a,b=!0){return jj(this,a,b),this}removeAt(a,b,d=!0){return tu(this,a,b,d),this}removeAll(a=!0){return uu(this,a),this}clear(a=!0){return vu(this,a),this}getChildAt(a,b){return Zd(this,a,b)}childToGridIndex(a,b){return wu(this,a,b)}forEachEmptyGrid(a,b){return xu(this,a,b),this}get gridCount(){return this.sizerChildren.length}get emptyGridCount(){return yu(this)}}function Mu(a,b=[]){const d=a.sizerChildren;for(var f=0,i=d.length;f<i;f++){const l=d[f];l instanceof Ia&&b.push(l)}return b}function Nu(a){const b=a.sizerChildren;let d=0;for(let f=0,i=b.length;f<i;f++){const l=b[f];if(l.rexSizer.hidden)continue;const q=l.rexSizer,u=q.proportion;u>0&&(d+=u)}return d}class pj extends te{}function qj(a){return a instanceof pj}function mj(a,b=!0){if(a.rexSizer.hidden)return 0;b===void 0&&(b=!0);const d=a.sizerChildren;let f=0;if(a.orientation===Pa.x)for(var i=0,l=d.length;i<l;i++){const q=d[i],u=q.rexSizer;if(u.hidden)continue;let v;u.proportion===0||b&&!qj(q)&&u.proportion>0?v=q instanceof Ia?Math.max(q.minWidth,q.childrenWidth):q.width:v=0;const A=u.padding;v+=A.left+A.right,i>0&&(v+=a.space.item),f+=v}else for(var i=0,l=d.length;i<l;i++){const q=d[i];if(!q.hasOwnProperty("rexSizer"))continue;const u=q.rexSizer;if(u.hidden)continue;let v=q instanceof Ia?Math.max(q.minWidth,q.childrenWidth):q.width;const A=u.padding;v+=A.left+A.right,f=Math.max(v,f)}return f+a.space.left+a.space.right}function nj(a,b=!0){if(a.rexSizer.hidden)return 0;const d=a.sizerChildren;let f=0;if(a.orientation===Pa.x)for(var i=0,l=d.length;i<l;i++){const q=d[i],u=q.rexSizer;if(u.hidden)continue;let v=q instanceof Ia?Math.max(q.minHeight,q.childrenHeight):q.height;const A=u.padding;v+=A.top+A.bottom,f=Math.max(v,f)}else for(var i=0,l=d.length;i<l;i++){const q=d[i];if(!q.hasOwnProperty("rexSizer"))continue;const u=q.rexSizer;if(u.hidden)continue;let v;u.proportion===0||b&&!qj(q)&&u.proportion>0?v=q instanceof Ia?Math.max(q.minHeight,q.childrenHeight):q.height:v=0;const A=u.padding;v+=A.top+A.bottom,i>0&&(v+=a.space.item),f+=v}return f+a.space.top+a.space.bottom}function Vu(a,b){let d;const f=b.rexSizer,i=f.padding;return a.orientation===Pa.x?f.proportion>0&&a.proportionLength>0&&(d=f.proportion*a.proportionLength):f.expand&&(d=a.innerWidth-i.left-i.right),d}function Uu(a,b){let d;const f=b.rexSizer,i=f.padding;return a.orientation===Pa.x?f.expand&&(d=a.innerHeight-i.top-i.bottom):f.proportion>0&&a.proportionLength>0&&(d=f.proportion*a.proportionLength),d}function Ou(a,b,d,f){if(a.rexSizer.hidden||!a.needLayout)return;a.preLayout(b),d===void 0&&(d=Math.max(a.childrenWidth,a.minWidth)),f===void 0&&(f=Math.max(a.childrenHeight,a.minHeight)),a.resize(d,f);let i;if(a.childrenProportion>0){let R=a.orientation===Pa.x?a.width-a.childrenWidth:a.height-a.childrenHeight;R>0?(R=a.orientation===Pa.x?a.width-mj(a,!1):a.height-nj(a,!1),i=R/a.childrenProportion):i=0}else i=0;a.proportionLength=i;const l=a.sizerChildren,q=a.innerLeft,u=a.innerTop,v=a.innerWidth,A=a.innerHeight;let E=q,H=u;for(let R=0,L=l.length;R<L;R++){const O=l[R];if(O.rexSizer.hidden)continue;const V=O.rexSizer,X=V.padding;let ea=Vu(a,O),ga=Uu(a,O);O instanceof Ia?O._layout(a,ea,ga):Yd(O,ea,ga),ea===void 0&&(ea=O.width),ga===void 0&&(ga=O.height);let ka,ha,oa,pa;a.orientation===Pa.x?(ka=E+X.left,V.proportion===0||i===0?oa=ea:oa=V.proportion*i,ha=H+X.top,pa=A-X.top-X.bottom):(ka=E+X.left,oa=v-X.left-X.right,ha=H+X.top,V.proportion===0||i===0?pa=ga:pa=V.proportion*i),Yc.setTo(ka,ha,oa,pa).alignIn(O,V.align),a.orientation===Pa.x?E+=oa+X.left+X.right+a.space.item:H+=pa+X.top+X.bottom+a.space.item}a.layoutBackgrounds(),a.postLayout()}function Pu(a){Kf(a),a._childrenProportion=void 0}function oj(a,b,{proportion:d=0,align:f=tb.center,padding:i=0,expand:l=!1,childKey:q,index:u}={}){lc(a,b),typeof f==="string"&&(f=tb[f]);const v=a.getSizerState(b);v.proportion=d,v.align=f,v.padding=Ac(i),v.expand=l,u===void 0||u>=a.sizerChildren.length?a.sizerChildren.push(b):a.sizerChildren.splice(u,0,b),q!==void 0&&a.addChildrenMap(q,b)}function Qu(a,b=1){const d=new pj();oj(a,d,{proportion:b})}function Ru(a,b,d=!0){Qb(a,b,d);const f=Zc(a.sizerChildren,b);!f&&a.backgroundChildren&&Zc(a.backgroundChildren,b)}function Su(a,b=!0){Qb(a,a.sizerChildren,b),a.sizerChildren.length=0}function Tu(a,b=!0){Xc(a,b),a.sizerChildren.length=0,a.backgroundChildren&&(a.backgroundChildren.length=0)}class Vg extends Ia{constructor({space:a={item:0},orientation:b=Pa.x}={}){super(arguments[0]);this.type="rexSizer";this.sizerChildren=[];this.setOrientation(b),this.setItemSpacing(a.item)}setOrientation(a){return typeof a==="string"&&(a=Pa[a]),this.orientation=a,this}setItemSpacing(a=0){return this.space.item=a,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=Nu(this)),this._childrenProportion}getChildrenSizers(a=[]){return Mu(this,a)}getChildrenWidth(a=!0){return mj(this,a)}getChildrenHeight(a=!0){return nj(this,a)}_layout(a,b,d){return Ou(this,a,b,d),this}layoutInit(){return Pu(this),this}add(a,b){return oj(this,a,b),this}addSpace(a=1){return Qu(this,a),this}remove(a,b=!0){return Ru(this,a,b),this}removeAll(a=!0){return Su(this,a),this}clear(a=!0){return Tu(this,a),this}}class nn extends Vg{constructor({background:a,icon:b,text:d,expandTextWidth:f=!1,expandTextHeight:i=!1,action:l,align:q,space:u={}}={}){super(arguments[0]);this.type="rexLabel";a&&this.addBackground(a),(q==="right"||q==="bottom"||q==="center")&&this.addSpace();if(b){let v;const A=u.icon??0;this.orientation===Pa.x?(d||l)&&(v={right:A}):(d||l)&&(v={bottom:A}),this.add(b,{padding:v})}if(d){let v,A,E;const H=u.text??0;this.orientation===Pa.x?(v=f?1:0,l&&(A={right:H}),E=i):(v=i?1:0,l&&(A={bottom:H}),E=f),this.add(d,{proportion:v,align:tb.center,padding:A,expand:E})}l&&this.add(l),q==="center"&&this.addSpace(),this.addChildrenMap("background",a),this.addChildrenMap("icon",b),this.addChildrenMap("text",d),this.addChildrenMap("action",l)}get text(){const a=this.childrenMap.text;if(a===void 0)return"";let b;return a.text?(b=a.text,typeof b!=="string"&&(b=b.join(`
`))):b="",b}set text(a){const b=this.childrenMap.text;b!==void 0&&(b.text=a)}setText(a){return typeof a!=="string"&&(a=a.join(`
`)),this.text=a,this}appendText(a){return typeof a!=="string"&&(a=a.join(`
`)),this.text+=a,this}}function Cu(a,b=[]){for(const[d,f]of a.sizerChildren)f instanceof Ia&&b.push(f);return b}function Du(a){if(a.rexSizer.hidden)return 0;let b=0;for(const[d,f]of a.sizerChildren){let i=f instanceof Ia?Math.max(f.minWidth,f.childrenWidth):f.width;const l=f.rexSizer.padding;i+=l.left+l.right,b=Math.max(i,b)}return b+a.space.left+a.space.right}function Eu(a){if(a.rexSizer.hidden)return 0;let b=0;for(const[d,f]of a.sizerChildren){let i=f instanceof Ia?Math.max(f.minHeight,f.childrenHeight):f.height;const l=f.rexSizer.padding;i+=l.top+l.bottom,b=Math.max(i,b)}return b+a.space.top+a.space.bottom}function Lu(a,b){let d;const f=b.rexSizer;if(f.expandWidth){const i=f.padding;d=a.innerWidth-i.left-i.right}return d}function Ku(a,b){let d;const f=b.rexSizer;if(f.expandHeight){const i=f.padding;d=a.innerHeight-i.top-i.bottom}return d}function Fu(a,b,d,f){if(a.rexSizer.hidden||!a.needLayout)return;a.preLayout(b),d===void 0&&(d=Math.max(a.childrenWidth,a.minWidth)),f===void 0&&(f=Math.max(a.childrenHeight,a.minHeight)),a.resize(d,f);const i=a.innerLeft,l=a.innerTop,q=a.innerWidth,u=a.innerHeight;for(let[v,A]of a.sizerChildren){const E=A.rexSizer,H=E.padding;if(A instanceof Ia)A._layout(a,Lu(a,A),Ku(a,A));else{let X,ea;E.expandWidth&&(X=q-H.left-H.right),E.expandHeight&&(ea=u-H.top-H.bottom),Yd(A,X,ea)}const R=i+H.left,L=q-H.left-H.right,O=l+H.top,V=u-H.top-H.bottom;Yc.setTo(R,O,L,V).alignIn(A,E.align)}a.layoutBackgrounds(),a.postLayout()}function Gu(a,b,{key:d=Date.now(),padding:f=0,align:i=tb.center,expand:l=!0}={}){lc(a,b),typeof i==="string"&&(i=tb[i]);const q=a.getSizerState(b);q.key=d,q.align=i,q.padding=Ac(f);if(typeof l==="boolean")q.expandWidth=l,q.expandHeight=l;else{let{width:u=!1,height:v=!1}=l;q.expandWidth=u,q.expandHeight=v}a.sizerChildren.has(d)&&a.sizerChildren.get(d).destroy(),a.sizerChildren.set(d,b)}function lj(a,b){if(b instanceof Gc)if(b.parent===a&&b.hasOwnProperty("rexSizer")){const d=b.rexSizer;return d.key}else return null;else{const d=b;return a.sizerChildren.has(d)?d:null}}function Hu(a,b,d=!0){Qb(a,b,d);const f=lj(a,b);f?a.sizerChildren.delete(f):Zc(a.backgroundChildren,b)}function Iu(a,b=!0){Qb(a,Array.from(a.sizerChildren.values()),b),a.sizerChildren.clear()}function Ju(a,b=!0){Xc(a,b),a.sizerChildren.clear(),a.backgroundChildren&&(a.backgroundChildren.length=0)}class on extends Ia{constructor(a={}){super(a);this.type="rexOverlapSizer";this.sizerChildren=new Map()}getChildrenSizers(a=[]){return Cu(this,a)}getChildrenWidth(){return Du(this)}getChildrenHeight(){return Eu(this)}_layout(a,b,d){return Fu(this,a,b,d),this}add(a,b){return Gu(this,a,b),this}getChildKey(a){return lj(this,a)}remove(a,b=!0){return Hu(this,a,b),this}removeAll(a=!0){return Iu(this,a),this}clear(a=!0){return Ju(this,a),this}}var Rb;(function(a){a[a.none=0]="none",a[a.word=1]="word",a[a.char=2]="char"})(Rb||(Rb={}));var Cb;(function(a){a[a.none=0]="none",a[a.raw=1]="raw",a[a.wrapped=2]="wrapped"})(Cb||(Cb={}));const Cn=/(?:\r\n|\r|\n)/;function lv(a,b,d,f,i,l=0){i<=0&&(f=0);let q=[];if(!a||!a.length)return q;let u=a.split(Cn),v=u.length-1;a.slice(-1)===`
`&&(u.length-=1);let A;for(let E=0,H=u.length;E<H;E++){let R=u[E],L=E===v?0:1;if(f===0){q.push(ah(R,b(R,d),L));continue}E===0?A=i-l:A=i;if(R.length<=100){let ga=b(R,d);if(ga<=A){q.push(ah(R,ga,L));continue}}let O;f===1?O=R.split(" "):O=R;let V="",X="",ea=0;for(let ga=0,ka=O.length;ga<ka;ga++){let ha=O[ga];f===1?(V+=ha,ga<ka-1&&(V+=" ")):V+=ha;let oa=b(V,d);oa>A&&(ga===0?q.push(ah("",0,2)):(q.push(ah(X,ea,2)),V=ha,f===1&&(ga<ka-1&&(V+=" ")),oa=b(V,d)),A=i),X=V,ea=oa}q.push(ah(X,ea,L))}return q}let ah=function(a,b,d){return{text:a,width:b,newLineMode:d}};var Wg;(function(a){a[a.left=0]="left",a[a.center=1]="center",a[a.right=2]="right"})(Wg||(Wg={}));var Xg;(function(a){a[a.top=0]="top",a[a.center=1]="center",a[a.bottom=2]="bottom"})(Xg||(Xg={}));class Re{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(a){return this.items.push(a),this}pushMultiple(a){return this.items.push.apply(this.items,a),a.length=0,this}clear(){return this.items.length=0,this}}class En{constructor(){this.pens=[]}destroy(){this.pens.length=0}addPen(a){return this.pens.push(a),this}get firstPen(){return this.pens[0]}get lastPen(){return this.pens[this.pens.length-1]}hasPen(){return this.pens.length>0}get pensCount(){return this.pens.length}get startIndex(){let a=this.pens[0];return a?a.startIndex:0}get width(){let a=this.lastPen;return a?a.lastX:0}}function Ij(a){if(Array.isArray(a))a.length=0;else for(let b in a)delete a[b]}function Se(a,b=Array.isArray(a)?[]:{}){Ij(b);if(Array.isArray(a)){b.length=a.length;for(let d=0,f=a.length;d<f;d++)b[d]=a[d]}else for(let d in a)b[d]=a[d];return b}class Fn{constructor(){this.text="";this.x=0;this.y=0;this.width=0;this.height=0;this.ascent=0;this.descent=0;this.prop={};this.newLineMode=Cb.none;this.startIndex=0}set(a="",b=0,d=0,f=0,i=0,l=0,q=0,u={},v=Cb.none,A=0){return this.text=a,this.x=b,this.y=d,this.width=f,this.height=i,this.ascent=l,this.descent=q,this.prop=u,this.newLineMode=v,this.startIndex=A,this}clone(){let a=new Fn();return a.set(this.text,this.x,this.y,this.width,this.height,this.ascent,this.descent,Se(this.prop),this.newLineMode,this.startIndex),a}get plainText(){return this.newLineMode===Cb.raw?`${this.text}
`:this.text}get wrapText(){return this.newLineMode!==Cb.none?`${this.text}
`:this.text}get plainTextLength(){let a=this.text.length;return this.newLineMode===Cb.raw&&(a+=1),a}get endIndex(){return this.startIndex+this.plainTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}}class Yg{constructor({penPool:a}){this.pens=[];this.lines=[];this.pens=[],this.lines=[],this.penPool=a}destroy(){this.freePens()}freePens(){return this.penPool.pushMultiple(this.pens),this.lines.forEach(a=>{a.destroy()}),this.lines.length=0,this.maxLineWidth=0,this.totalLineHeight=0,this}addTextPen(a,b,d,f,i,l,q,u,v=Cb.none){let A=this.penPool.pop();return A==null&&(A=new Fn()),A.set(a,b,d,f,i,l,q,u,v),this.addPen(A),this}addImagePen(a,b,d,f,i){return this.addTextPen("",a,b,d,f,f,0,i,Cb.none),this}addNewLinePen(a){let b=this.lastPen;return b&&b.newLineMode===Cb.none&&(b.newLineMode=a),this}addPen(a){let b=this.lastPen;b==null?a.startIndex=0:a.startIndex=b.endIndex,this.pens.push(a);let d=this.lastLine;return d==null&&(d=new En(),this.lines.push(d)),d.addPen(a),a.newLineMode!==Cb.none&&(d=new En(),this.lines.push(d)),this}clone(a){a==null&&(a=new Yg({penPool:this.penPool})),a.freePens();const b=this.pens;for(let i=0,l=b.length;i<l;i++)a.addPen(b[i].clone());const d=this.lines,f=a.lines;for(let i=0,l=d.length;i<l;i++){const q=d[i],u=f[i];u.y=q.y,u.height=q.height}return a}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(a){if(a>=this.lines.length)return this.getLineEndIndex(a);{let b=this.lines[a];if(!b)return 0;let d=b.firstPen;return d?d.startIndex:0}}getLineEndIndex(a){let b=this.lines.length;a>=b&&(a=b-1);for(let d=a;d>=0;d--){let f=this.lines[d];if(f&&f.hasPen())return f.lastPen.endIndex}return 0}getLineWidth(a){let b=this.lines[a];return b?b.width:0}getLineHeights(a=[]){return this.lines.forEach(function(b){a.push(b.height)}),a}get lineCount(){return this.lines.length}get plainText(){let a=[],b=this.pens;for(let d=0,f=b.length;d<f;d++)a.push(b[d].plainText);return a.join()}get plainTextLength(){let a=0;for(let b=0,d=this.pens.length;b<d;b++)a+=this.pens[b].plainTextLength;return a}getSliceTagText(a,b,d=0,f,i=!1){if(f===void 0){let A=this.lastPen;if(!A)return"";f=A.endIndex}let l=[],q;for(var u=0,v=this.pens.length;u<v;u++){let A=this.pens[u],E=A.endIndex;if(E<=d)continue;let H=i?A.wrapText:A.plainText,R=A.prop,L=A.startIndex,O=L>=d&&E<=f;O||(H=H.substring(d-L,f-L)),b?l.push(a.call(b,H,R,q)):l.push(a(H,R,q)),q=R;if(E>=f)break}return l.join()}}function iv(a,b,d){let f=Se(a,d);for(let i in b)f.hasOwnProperty(i)&&(f[i]=b[i]);return f}function wj(a,b,d={key:b}){d=iv(py,d);let f=Ob.get(),i=f.get(d.key);if(!i)return;let l=i.getFrame(d.frame);if(!l)return;let q=d.width,u=d.height;(q===void 0||u===void 0)&&(q===void 0&&u===void 0?(d.width=l.width,d.height=l.height):q===void 0?d.width=l.width*(u/l.height):u===void 0&&(d.height=l.height*(q/l.width))),a.images.set(b,d)}const py={key:void 0,frame:void 0,width:void 0,height:void 0,y:0,left:0,right:0,top:0,bottom:0};class ev{constructor(){this.images=new Map()}destroy(){this.images.clear()}add(a,b){if(typeof a==="string")wj(this,a,b);else if(Array.isArray(a)){let d=a;for(let f=0,i=d.length;f<i;f++)wj(this,d[f])}else{let d=a;for(a in d)wj(this,a,d[a])}return this}remove(a){return this.images.delete(a),this}get(a){return this.images.get(a)}getOuterWidth(a){let b=this.images.get(a);return b?b.width+b.left+b.right:0}getOuterHeight(a){let b=this.images.get(a);return b?b.height+b.top+b.bottom:0}getFrame(a){let b=this.images.get(a);if(!b)return;let d=Ob.get(),f=d.get(b.key);if(!f)return;let i=f.getFrame(b.frame);return i}hasTexture(a){return!!this.getFrame(a)}}function uj(a,b){a.font=b.font}function vj(a,b){a.textBaseline="alphabetic",a.textAlign="start",a.fillStyle=b.fillStyle,a.strokeStyle=b.strokeStyle,a.lineWidth=b.strokeThickness,a.lineCap="round",a.lineJoin="round",a.imageSmoothingEnabled=b.antialias}function Dn(a,b,d){d?(a.shadowColor=b.shadowColor,a.shadowBlur=b.shadowBlur,a.shadowOffsetX=b.shadowOffsetX,a.shadowOffsetY=b.shadowOffsetY):(a.shadowColor="#000",a.shadowBlur=0,a.shadowOffsetX=0,a.shadowOffsetY=0)}function jv(a,b){return b.measureText(a).width}function kv(a,b,d=0){let f=b.measureText(a),i=f.actualBoundingBoxAscent,l=f.actualBoundingBoxDescent;return(!i&&!l||a==="")&&(i=d,l=0),Aj.ascent=i,Aj.descent=l,Aj.height=Math.ceil(Math.abs(i)+Math.abs(l)),Aj}let Aj={ascent:0,descent:0,height:0};function fv(a,b,d,f,i){a.freePens();if(b==="")return a;let l=d.canvas,q=d.context,u=d.parent,v=d.parser.splitText(b),A,E,H=0;for(var R=0,L=v.length;R<L;R++){let ga=d.parser.tagTextToProp(v[R],A),ka=ga.text;A=ga.prop;if(A.img){let ha,oa;d.imageManager?(ha=d.imageManager.getOuterWidth(A.img),oa=d.imageManager.getOuterHeight(A.img)):(ha=0,oa=0),i>0&&f!==Rb.none&&(i<H+ha&&(a.addNewLinePen(Cb.wrapped),H=0)),a.addImagePen(H,0,ha,oa,Se(A)),H+=ha}else if(ka!==""){q.save();let ha=d.parser.propToStyle(u,A);uj(q,ha),vj(q,ha);let oa=ha.strokeThickness,pa=oa/2;E=lv(ka,jv,q,f,i,H);let ja=kv("|MÉq",q);for(let I=0,P=E.length;I<P;I++){const x=E[I],G=ja.height+oa,F=ja.ascent+pa,J=ja.descent+pa;a.addTextPen(x.text,H,0,x.width,G,F,J,Se(A),x.newLineMode),x.newLineMode!==Cb.none?H=0:H+=x.width}q.restore()}}let O=a.lines,V=d.parent.lineSpacing,X=0,ea=0;for(let ga=0,ka=O.length;ga<ka;ga++){const ha=O[ga],oa=ha.pens,pa=oa.length;let ja=0,I=0;for(let G=0;G<pa;G++){const F=oa[G];ja=Math.max(ja,F.ascent),I=Math.max(I,F.descent)}const P=ja+I,x=ea+ja;for(let G=0;G<pa;G++)oa[G].y+=x;ha.y=x,ha.height=P,X=Math.max(X,ha.width),ea+=P+V}return a.maxLineWidth=X,a.totalLineHeight=ea-V,a}const oq={PI2:Math.PI*2,HALF_PI:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};class oy extends _b{constructor(a,b,d,f,i){super(a,b,d,f);this.name=i}}class hv{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return this.hitAreas.length=0,this}add(a,b,d,f,i){let l=new oy(b,d,f,i,a);return this.hitAreas.push(l),this}getFirstHitArea(a,b){for(let d=0,f=this.hitAreas.length;d<f;d++){let i=this.hitAreas[d];if(i.contains(a,b))return i}return null}}function gv(a,b,d,f,i,l=0,q=0,u=a.penManager){a.hitAreaManager&&a.hitAreaManager.clear();let v=u.totalLineHeight;if(v===0)return;const A=f<a.textWidth||i<a.textHeight;let E=a.context;E.save();let H=a.parent;jy(a,H),ky(a,H),A&&(E.beginPath(),E.rect(b,d,f,i),E.clip());let R=H.align%3,L=Math.floor(H.align/3),O=d-q;switch(L){case Xg.center:O+=(i-v)/2;break;case Xg.bottom:O+=i-v-2;break}let V=u.lines,X=O;const ea=b+i;for(let ga=0,ka=V.length;ga<ka;ga++){let ha=V[ga];if(X>ea)break;const oa=X+ha.height;if(oa<d){X=oa;continue}let pa=ha.width;if(pa===0){X=oa;continue}let ja=b-l;switch(R){case Wg.center:ja+=(f-pa)/2;break;case Wg.right:ja+=f-pa;break}let I=ha.pens;for(let P=0,x=I.length;P<x;P++)iy(a,I[P],ja,O);X=oa}E.restore()}function iy(a,b,d,f){d+=b.x,f+=b.y;let i=a.canvas,l=a.context,q=a.parent;l.save();let u=a.parser.propToStyle(q,b.prop);uj(l,u),vj(l,u),u.underlineThickness>0&&b.width>0&&ly(a,d,f,b.width,u),b.isTextPen&&my(a,d,f,b.text,u),b.isImagePen&&ny(a,d,f,b.prop.img,u),l.restore(),b.hasAreaMarker&&b.width>0&&(a.hitAreaManager||(a.hitAreaManager=new hv()),a.hitAreaManager.add(b.prop.area,d,f,b.width,b.height))}function jy(a,b){let d=a.canvas,f=a.context;f.clearRect(0,0,d.width,d.height)}function ky(a,b){let d=a.canvas,f=a.context;f.clearRect(0,0,d.width,d.height);const i=b.backgroundFillStyle,l=b.backgroundStrokeStyle;if(i||l){const q=b.backgroundStrokeThickness,u=q/2,v=b.cornerRadius,A=b.cornerIteration,E=u,H=u,R=d.width-q,L=d.height-q;Ng(d,f,E,H,R,L,v,i,l,q,b.backgroundFillColor2,b.backgroundIsHorizontalGradient,A)}else f.clearRect(0,0,d.width,d.height)}function ly(a,b,d,f,i){d+=i.underlineOffsetY-i.underlineThickness/2;let l=a.context,q=l.lineCap;l.lineCap="butt",l.beginPath(),l.strokeStyle=i.underlineStyle,l.lineWidth=i.underlineThickness,l.moveTo(b,d),l.lineTo(b+f,d),l.stroke(),l.lineCap=q}function my(a,b,d,f,i){let l=a.context;i.strokeStyle&&i.strokeStyle!=="none"&&i.strokeThickness>0&&(Dn(l,i,i.shadowStroke),l.strokeText(f,b,d)),i.fillStyle&&i.fillStyle!=="none"&&(Dn(l,i,i.shadowFill),l.fillText(f,b,d))}function ny(a,b,d,f,i){let l=a.imageManager;if(!l)return;let q=l.get(f),u=l.getFrame(f);b+=q.left,d+=q.y-q.height;let v=a.context;v.drawImage(u.texture.image,u.x,u.y,u.width,u.height,b,d,q.width,q.height)}class Xu{constructor({canvas:a,context:b,parent:d,parser:f,penPool:i=new Re()}){this.textScrollX=0;this.textScrollY=0;this.canvas=a,this.context=b,this.parser=f,this.parent=d,this.penPool=i,this.penManager=new Yg({penPool:i})}destroy(){this.parser.destroy(),this.canvas=null,this.context=null,this.parser=null,this.parent=null,this.penManager&&(this.penManager.destroy(),this.penManager=null),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=null),this.imageManager&&(this.imageManager.destroy(),this.imageManager=null),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=null)}get textWidth(){return this.penManager.maxLineWidth}get textHeight(){return this.penManager.totalLineHeight}updatePenManager(a,b,d,f=this.penManager){return fv(f,a,this,b,d)}draw(a,b,d,f,i=0,l=0){return gv(this,a,b,d,f,i,l,this.penManager),this}get lines(){return this.penManager.lines}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=new Yg({penPool:this.penPool})),this._tmpPenManager}getPlainText(a,b,d){let f;return a==null?f=this.penManager.plainText:f=this.parser.splitText(a,!0).join(""),(b!=null||d!=null)&&(b==null&&(b=0),d==null&&(d=f.length),f=f.substring(b,d)),f}getPenManager(a,b){return a===void 0?this.clonePenManager(b,this.penManager):(b===void 0&&(b=new Yg({penPool:this.penPool})),this.updatePenManager(a,this.parent.wrapMode,this.parent.wrapWidth,b),b)}getText(a,b,d,f){if(a==null)return this.penManager.getSliceTagText(this.parser.propToTagText,this.parser,b,d,f);let i=this.tmpPenManager;return this.updatePenManager(a,this.parent.wrapMode,this.parent.wrapWidth,i),i.getSliceTagText(this.parser.propToTagText,this.parser,b,d,f)}clonePenManager(a,b=this.penManager){return b.clone(a)}getLastPen(a=this.penManager){return a.lastPen}addImageInfo(a,b){return this.imageManager===void 0&&(this.imageManager=new ev()),this.imageManager.add(a,b),this}}function qn(a,b=!0,d=!0){let f=a.canvasText;b&&f.updatePenManager(a.text,a.wrapMode,a.wrapWidth);if(d){let i=a.padding,l,q,u,v;a.fixedWidth===0?(l=f.textWidth,u=l+i.left+i.right):(u=a.fixedWidth,l=u-i.left-i.right,l>f.textWidth&&(l=f.textWidth)),a.fixedHeight===0?(q=f.textHeight,v=q+i.top+i.bottom):(v=a.fixedHeight,q=v-i.top-i.bottom,q>f.textHeight&&(q=f.textHeight));let A=a.resolution,E=Math.ceil(u*A),H=Math.ceil(v*A),R=a.canvas;(R.width!==E||R.height!==H)&&(R.width=E,R.height=H,a.texture.setSize(u,v),a.setSize(u,v));let L=a.context;L.save(),L.scale(A,A),f.draw(i.left,i.top,l,q,0,a.textScrollY),L.restore(),a.texture.binding&&a.texture.binding.update(),a.setDirty(Ga.TEXTURE)}}function rj(a,b=0,d=0){a.fixedWidth=b,a.fixedHeight=d,tj(a)}function rn(a,b,d,f,i){const l=a.padding;if(typeof b==="number")l.left=b,l.right=d===void 0?b:d,l.top=f===void 0?b:f,l.bottom=i===void 0?b:i;else{let q=b;l.left=q.left??0,l.right=q.right??0,l.top=q.top??0,l.bottom=q.bottom??0}tj(a)}function tj(a){const b=a.fixedWidth;if(a.wrapMode!==Rb.none){const d=a.padding,f=b-d.left-d.right;a.wrapWidth=Math.max(f,0)}else a.wrapWidth=0}function Yu(a,b,d=!1){d?a.textScrollYPercentage=b:a.textScrollY=b}function sn(a,b){typeof b==="string"&&(b=tb[b]),a.align=b}function tn(a,b=0){a.lineSpacing=b}function un(a,b,d,f=0,i=0,l,q=!0,u){d||(f=0),a.backgroundFillStyle=b,a.backgroundFillColor2=l,a.backgroundIsHorizontalGradient=q,a.backgroundStrokeStyle=d,a.backgroundStrokeThickness=f,a.cornerRadius=i,a.cornerIteration=u}function Zu(a,b,d){b&&vn(a,b),d&&wn(a,d)}function vn(a,b){a.fontFamily=b}function wn(a,b){typeof b==="number"&&(b=`${b}px`),a.fontSize=b}function xn(a,b){a.fillStyle=b}function yn(a,b,d=2){a.strokeStyle=b,a.strokeThickness=d}function zn(a,b="#000",d=5,f=0,i=0,l=!1,q=!1){a.shadowColor=b,a.shadowBlur=d,a.shadowOffsetX=f,a.shadowOffsetY=i,a.shadowFill=l,a.shadowStroke=q}function An(a,b,d){typeof b==="string"&&(b=Rb[b]),a.wrapMode=b,d===void 0?tj(a):a.wrapWidth=d}function Bn(a,b,d=2,f=0){a.underlineStyle=b,a.underlineThickness=d,a.underlineOffsetY=f}function pn(a,b,d){a.canvasText.addImageInfo(b,d)}function _u(a,b,d,f){return b=a.canvasText.getText(b,d,f,!0),b.split(Cn)}function $u(a,b,d,f){return a.canvasText.getPlainText(b,d,f)}function av(a,b,d,f){return a.canvasText.getText(b,d,f,!1)}function bv(a,b,d,f){return a.canvasText.getText(b,d,f,!1)}function cv(a,b){return a.canvasText.clonePenManager(b)}function dv(a,b,d){return a.canvasText.getPenManager(b,d)}class sj extends md{constructor(a,b,d="",{width:f=0,height:i=0,padding:l,wrapMode:q=Rb.none,backgroundFillStyle:u,backgroundFillColor2:v,backgroundIsHorizontalGradient:A,backgroundStrokeStyle:E,backgroundStrokeThickness:H,cornerRadius:R=0,cornerIteration:L,align:O=tb.top_left,lineSpacing:V=0,fontFamily:X="monospace",fontSize:ea="16px",fillStyle:ga="#fff",strokeStyle:ka,strokeThickness:ha=1,shadowColor:oa="#000",shadowBlur:pa=4,shadowOffsetX:ja=0,shadowOffsetY:I=0,shadowFill:P=!1,shadowStroke:x=!1,underlineStyle:G="#fff",underlineThickness:F=1,underlineOffsetY:J=0,images:U}={},K){super(a,b,Md());this.antialias=!1;this.fontFamily="monospace";this.fontSize="16px";this.fillStyle="#fff";this.strokeThickness=1;this.shadowStroke=!1;this.shadowFill=!1;this.shadowColor="#000";this.shadowBlur=4;this.shadowOffsetX=0;this.shadowOffsetY=0;this.underlineStyle="#fff";this.underlineThickness=1;this.underlineOffsetY=0;this.align=tb.top_left;this.lineSpacing=0;this.wrapMode=Rb.none;this.wrapWidth=0;this.fixedWidth=0;this.fixedHeight=0;this.padding={left:0,right:0,top:0,bottom:0};this._textScrollY=0;this.type="rexText";const ca=yb.get();this.resolution=ca.renderer.resolution,this.canvas=this.texture.image,this.context=this.canvas.getContext("2d"),this.canvasText=new Xu({canvas:this.canvas,context:this.context,parent:this,parser:K}),rj(this,f,i),l&&rn(this,l),An(this,q),sn(this,O),tn(this,V),un(this,u,E,H,R,v,A,L),vn(this,X),wn(this,ea),xn(this,ga),ka&&yn(this,ka,ha),zn(this,oa,pa,ja,I,P,x),Bn(this,G,F,J),U&&pn(this,U),this.setText(d)}destroy(a){this.canvasText.destroy(),this.texture.destroy(),this.canvas=null,this.context=null,super.destroy(a)}updateText(a=!0,b=!0){return qn(this,a,b),this}get text(){return this._text}set text(a){this.setText(a)}setText(a="",b=!0){return Array.isArray(a)&&(a=a.join(`
`)),a!==this._text&&(this._text=a.toString(),b&&this.updateText()),this}setBackgroundStyle(a,b,d=2,f=0,i,l=!0){return un(this,a,b,d,f,i,l),this}setFixedSize(a,b){return rj(this,a,b),this}setPadding(a,b,d,f){return rn(this,a,b,d,f),this}setTextScrollY(a,b=!1){return Yu(this,a,b),this}setAlign(a){return sn(this,a),this}setLineSpacing(a=0){return tn(this,a),this}setFont(a,b){return Zu(this,a,b),this}setFillStyle(a){return xn(this,a),this}setStrokeStyle(a,b=2){return yn(this,a,b),this}setShadow(a="#000",b=5,d=0,f=0,i=!1,l=!1){return zn(this,a,b,d,f,i,l),this}resize(a,b){return rj(this,a,b),qn(this),this}setWrapMode(a,b=0){return An(this,a,b),this}setUnderline(a,b=2,d=0){return Bn(this,a,b,d),this}addImageInfo(a,b){return pn(this,a,b),this}getWrappedText(a,b,d){return _u(this,a,b,d)}getPlainText(a,b,d){return $u(this,a,b,d)}getText(a,b,d){return av(this,a,b,d)}getSubString(a,b,d){return bv(this,a,b,d)}clonePenManager(a){return cv(this,a)}getPenManager(a,b){return dv(this,a,b)}get textScrollY(){return this._textScrollY}set textScrollY(a){this._textScrollY=a}get textScrollYPercentage(){return this._textScrollY/(this.totalTextHeight-this.displayTextHeight)}set textScrollYPercentage(a){const b=this.displayTextHeight,d=this.totalTextHeight;d<=b?this._textScrollY=0:this._textScrollY=(d-b)*a}get totalTextHeight(){return this.canvasText.textHeight}get displayTextHeight(){const a=this.padding;return this.height-a.top-a.bottom}}class xj{destroy(){}}const yj={text:null,prop:null},zj={font:void 0,fontFamily:void 0,fontStyle:void 0,fontSize:void 0,fillStyle:void 0,strokeStyle:void 0,strokeThickness:void 0,shadowColor:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,shadowBlur:void 0,shadowStroke:void 0,shadowFill:void 0,underlineStyle:void 0,underlineThickness:void 0,underlineOffsetY:void 0,image:void 0};class mv extends xj{splitText(a,b=!1){const d=[];let f=0;for(;;){const l=Gn.exec(a);if(!l)break;const q=l[0],u=Gn.lastIndex-q.length;f<u&&d.push(a.substring(f,u)),b||d.push(q),f=Gn.lastIndex}const i=a.length;return f<i&&d.push(a.substring(f,i)),d}tagTextToProp(a,b){let d,f;b==null&&(b={}),b.img&&Ab(b,$c,"img"),sy.test(a)?(Ab(b,oc,"b",!0),d=""):ty.test(a)?(Ab(b,$c,"b"),d=""):uy.test(a)?(Ab(b,oc,"i",!0),d=""):vy.test(a)?(Ab(b,$c,"i"),d=""):nv.test(a)?(f=a.match(nv),Ab(b,oc,"size",f[1]+"px"),d=""):wy.test(a)?(Ab(b,$c,"size"),d=""):ov.test(a)?(f=a.match(ov),Ab(b,oc,"color",f[1]),d=""):xy.test(a)?(Ab(b,$c,"color"),d=""):pv.test(a)?(f=a.match(pv),Ab(b,oc,"u",!0),d=""):qv.test(a)?(f=a.match(qv),Ab(b,oc,"u",f[1]),d=""):yy.test(a)?(Ab(b,$c,"u"),d=""):zy.test(a)?(Ab(b,oc,"shadow",!0),d=""):rv.test(a)?(f=a.match(rv),Ab(b,oc,"shadow",f[1]),d=""):Ay.test(a)?(Ab(b,$c,"shadow"),d=""):By.test(a)?(Ab(b,oc,"stroke",!0),d=""):sv.test(a)?(f=a.match(sv),Ab(b,oc,"stroke",f[1]),d=""):Cy.test(a)?(Ab(b,$c,"stroke"),d=""):tv.test(a)?(f=a.match(tv),Ab(b,oc,"img",f[1]),d=""):Dy.test(a)?(Ab(b,$c,"img"),d=""):uv.test(a)?(f=a.match(uv),Ab(b,oc,"area",f[1]),d=""):Ey.test(a)?(Ab(b,$c,"area"),d=""):d=a;const i=yj;return i.text=d,i.prop=b,i}propToStyle(a,b){const d=zj;return b.hasOwnProperty("img")?d.image=b.img:(d.image=null,d.fontFamily=a.fontFamily,d.fontSize=b.size??a.fontSize,d.fontStyle=qy(b.b,b.i),d.font=`${d.fontStyle} ${d.fontSize} ${d.fontFamily}`,d.fillStyle=b.color??a.fillStyle,b.hasOwnProperty("stroke")?b.stroke===!0?(d.strokeStyle=a.strokeStyle,d.strokeThickness=a.strokeThickness):(d.strokeStyle=b.stroke,d.strokeThickness=a.strokeThickness):(d.strokeStyle=a.strokeStyle,d.strokeThickness=0)),b.hasOwnProperty("shadow")?b.shadow===!0?(d.shadowColor=a.shadowColor,d.shadowOffsetX=a.shadowOffsetX,d.shadowOffsetY=a.shadowOffsetY,d.shadowBlur=a.shadowBlur,d.shadowStroke=!0,d.shadowFill=!0):(d.shadowColor=b.shadow,d.shadowOffsetX=a.shadowOffsetX,d.shadowOffsetY=a.shadowOffsetY,d.shadowBlur=a.shadowBlur,d.shadowStroke=!0,d.shadowFill=!0):(d.shadowColor="#000",d.shadowOffsetX=0,d.shadowOffsetY=0,d.shadowBlur=0,d.shadowStroke=!1,d.shadowFill=!1),b.hasOwnProperty("u")?b.u===!0?(d.underlineStyle=a.underlineStyle,d.underlineThickness=a.underlineThickness,d.underlineOffsetY=a.underlineOffsetY):(d.underlineStyle=b.u,d.underlineThickness=a.underlineThickness,d.underlineOffsetY=a.underlineOffsetY):(d.underlineStyle="#000",d.underlineThickness=0,d.underlineOffsetY=0),d}propToTagText(a,b,d){d==null&&(d=ry);let f=[];for(const l in d){if(b.hasOwnProperty(l))continue;f.push(`[/${l}]`)}a=`${f.join()}${a}`;let i=[];for(const l in b){if(d[l]===b[l])continue;switch(l){case"size":const q=b.size.replace("px","");i.push(`[size=${q}]`);break;case"color":case"img":case"area":i.push(`[${l}=${b[l]}]`);break;case"stroke":case"u":b[l]===!0?i.push(`[${l}]`):i.push(`[${l}=${b[l]}]`);break;default:i.push(`[${l}]`);break}}return a=`${a}${i.join()}`,a}}const Ab=function(a,b,d,f){return b===oc?a[d]=f:a.hasOwnProperty(d)&&delete a[d],a};var qy=function(a,b){return a&&b?"bold italic":a?"bold":b?"italic":""};const ry={},Gn=/\[b\]|\[\/b\]|\[i\]|\[\/i\]|\[size=(\d+)\]|\[\/size\]|\[color=([a-z]+|#[0-9abcdef]+)\]|\[\/color\]|\[u\]|\[u=([a-z]+|#[0-9abcdef]+)\]|\[\/u\]|\[shadow\]|\[shadow=([a-z]+|#[0-9abcdef]+)\]|\[\/shadow\]|\[stroke\]|\[stroke=([a-z]+|#[0-9abcdef]+)\]|\[\/stroke\]|\[img=([^\]]+)\]|\[\/img\]|\[area=([^\]]+)\]|\[\/area\]/ig;var sy=/\[b\]/i,ty=/\[\/b\]/i,uy=/\[i\]/i,vy=/\[\/i\]/i,nv=/\[size=(\d+)\]/i,wy=/\[\/size\]/i,ov=/\[color=([a-z]+|#[0-9abcdef]+)\]/i,xy=/\[\/color\]/i,pv=/\[u\]/i,qv=/\[u=([a-z]+|#[0-9abcdef]+)\]/i,yy=/\[\/u\]/i,zy=/\[shadow\]/i,rv=/\[shadow=([a-z]+|#[0-9abcdef]+)\]/i,Ay=/\[\/shadow\]/i,By=/\[stroke\]/i,sv=/\[stroke=([a-z]+|#[0-9abcdef]+)\]/i,Cy=/\[\/stroke\]/i,tv=/\[img=([^\]]+)\]/i,Dy=/\[\/img\]/i,uv=/\[area=([^\]]+)\]/i,Ey=/\[\/area\]/i;const $c=!1,oc=!0;class nf extends sj{constructor(a,b,d="",f){super(a,b,d,f,new mv());this.type="rexBBcodeText"}}class vv extends xj{constructor(a){super();this.tags=new Map();if(a)for(const b in a)this.addTag(b,a[b])}destroy(){this.tags.clear()}addTag(a,b){return this.tags.set(a,b),this}isTextTag(a){const b=this.tags.get(a);return b?b.img==null:!1}splitText(a,b=!1){const d=[];let f=0;for(;;){const l=Hn.exec(a);if(!l)break;const q=l[0],u=Hn.lastIndex-q.length;f<u&&d.push(a.substring(f,u));if(!b)d.push(q);else if(xv.test(q)){const v=q.match(yv);d.push(v[2])}else if(zv.test(q)){const v=q.match(Av);d.push(v[2])}f=Hn.lastIndex}const i=a.length;return f<i&&d.push(a.substring(f,i)),d}tagTextToProp(a,b){let d,f;if(xv.test(a)){const l=a.match(yv);if(l!=null){const q=l[1],u=this.tags;f=u.get(q)??{},f._class=q,d=l[2]}}else if(zv.test(a)){const l=a.match(Av);if(l!=null){const q=l[1];f=Fy(q),f._style=q,d=l[2]}}d===void 0&&(d=a),f===void 0&&(f={});const i=yj;return i.text=d,i.prop=f,i}propToStyle(a,b){const d=zj;if(b.hasOwnProperty("img"))d.image=b.img;else{d.image=null,d.fontFamily=b.family??b.fontFamily??b["font-family"]??a.fontFamily;let f=b.size??b.fontSize??b["font-size"]??a.fontSize;typeof f==="number"&&(f=`${f}px`),d.fontSize=f,d.fontStyle=b.style??b.fontStyle??b["font-style"]??"",d.font=`${d.fontStyle} ${d.fontSize} ${d.fontFamily}`,d.fillStyle=b.color??b["font-color"]??a.fillStyle;if(b.hasOwnProperty("stroke")){const i=b.stroke;d.strokeStyle=i.color??a.strokeStyle,d.strokeThickness=i.thinkness??a.strokeThickness}else d.strokeStyle=a.strokeStyle,d.strokeThickness=a.strokeThickness}if(b.hasOwnProperty("shadow")){const f=b.shadow;d.shadowColor=f.color??a.shadowColor,d.shadowOffsetX=f.offsetX??a.shadowOffsetX,d.shadowOffsetY=f.offsetY??a.shadowOffsetY,d.shadowBlur=f.blur??a.shadowBlur,d.shadowStroke=!0,d.shadowFill=!0}else d.shadowColor=a.shadowColor,d.shadowOffsetX=a.shadowOffsetX,d.shadowOffsetY=a.shadowOffsetY,d.shadowBlur=a.shadowBlur,d.shadowStroke=a.shadowStroke,d.shadowFill=a.shadowFill;if(b.hasOwnProperty("u")||b.hasOwnProperty("underline")){const f=b.u??b.underline;d.underlineStyle=f.color??a.underlineStyle,d.underlineThickness=f.thinkness??a.underlineThickness,d.underlineOffsetY=f.offset??a.underlineOffsetY}else d.underlineStyle="#000",d.underlineThickness=0,d.underlineOffsetY=0;return d}propToTagText(a,b,d){if(b.hasOwnProperty("_class")){if(a===""){if(this.isTextTag(b._class))return""}return`<class=${b._class}>${a}</class>`}else if(b.hasOwnProperty("_style"))return`<style=${b._style}>${a}</style>`}}function Fy(a){const b=a.split(";"),d={};for(var f=0,i=b.length;f<i;f++){const[l,q]=b[f].split(":");if(wv(l)||wv(q))continue;if(l==="stroke"){const u=q.split(" "),v={},A=u.length;A>=1&&(v.color=u[0]),A>=2&&(v.thinkness=parseInt(u[1].replace("px",""))),d.stroke=v}else if(l==="shadow"){const u=q.split(" "),v={},A=u.length;A>=1&&(v.color=u[0]),A>=2&&(v.offsetX=parseInt(u[1].replace("px",""))),A>=3&&(v.offsetY=parseInt(u[2].replace("px",""))),A>=4&&(v.blur=parseInt(u[3].replace("px",""))),d.shadow=v}else if(l==="u"||l==="underline"){const u=q.split(" "),v={},A=u.length;A>=1&&(v.color=u[0]),A>=2&&(v.thinkness=parseInt(u[1].replace("px",""))),A>=3&&(v.offset=parseInt(u[2].replace("px",""))),d[l]=v}else d[l]=q}return d}function wv(a){return a=a.replace(Gy,""),a.length===0}const Hn=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,xv=/<\s*class=/i,yv=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,zv=/<\s*style=/i,Av=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,Gy=/^\s+|\s+$/;class ij extends sj{constructor(a,b,d="",f){const i=f?f.tags:void 0;super(a,b,d,f,new vv(i));this.type="rexTagText"}get parser(){return this.canvasText.parser}addTag(a,b){return this.parser.addTag(a,b),this}addTags(a){for(const b in a)this.parser.addTag(b,a[b]);return this}}function nc(a,b){return a===void 0||b===void 0?void 0:`${a}|${b}`}function Sr(a,b){let d=a.split("|");return b===void 0&&(b=xx),b.x=parseInt(d[0]),b.y=parseInt(d[1]),b}let xx={x:0,y:0};let $v=new Re();function _q(){let a=$v.pop();return a===null&&(a=new Map()),a}function qi(a){$v.push(a)}function Yq(a,b,d,f,i,l,q,u){if(d===l&&f===q&&i===u)return;let v=nc(d,f),A=nc(l,q);if(v){let E=b.get(v);E.delete(i);if(v===A){E.set(u,a);return}else E.size===0&&(qi(E),b.delete(v))}if(A){let E=b.get(A);E?E.set(u,a):(E=_q(),E.set(u,a),b.set(A,E))}}function Dl(a,b,d,f){let i=nc(b,d),l=a.get(i);l&&(f!==void 0?(l.delete(f),l.size===0&&(qi(l),a.delete(i))):(l.clear(),qi(l),a.delete(i)))}let aw=new Re();function Zq(){let a=aw.pop();return a===null&&(a=new Set()),a}function Cl(a){aw.push(a)}function pi(a,b,d,f){if(d===f)return;if(d!==void 0){let i=b.get(d);i&&(i.delete(a),i.size===0&&(Cl(i),b.delete(d)))}if(f!==void 0){let i=b.get(f);i?i.add(a):(i=Zq(),i.add(a),b.set(f,i))}}function Ae(a,b,d){let f=a.get(b);f&&(f.delete(d),f.size===0&&(Cl(f),a.delete(b)))}function Tq(a,b,d,f,i){let l=a.chessToXYZ.get(b),q=l?l.x:void 0,u=l?l.y:void 0,v=l?l.y:void 0;l?(l.x=d,l.y=f,l.z=i):a.chessToXYZ.set(b,{x:d,y:f,z:i}),Yq(b,a.XYToZMap,q,u,v,d,f,i),pi(b,a.XToChessSet,q,d),pi(b,a.YToChessSet,u,f),pi(b,a.ZToChessSet,v,i)}function ze(a,b,d,f){let i=a.XYToZMap.get(nc(b,d));return i===void 0?null:f!==void 0?i.has(f)?i.get(f):null:i}function Uq(a,b,d,f){if(f!==void 0){let i=ze(a,b,d,f);if(i===void 0)return;a.chessToXYZ.delete(i),Dl(a.XYToZMap,b,d,f),Ae(a.XToChessSet,b,i),Ae(a.YToChessSet,d,i),Ae(a.ZToChessSet,f,i)}else{let i=ze(a,b,d);if(i){for(const[l,q]of i)a.chessToXYZ.delete(q),Ae(a.XToChessSet,b,q),Ae(a.YToChessSet,d,q),Ae(a.ZToChessSet,l,q);Dl(a.XYToZMap,b,d)}}}function Vq(a,b){return a.chessToXYZ.has(b)}function Wq(a,b,d,f){return ze(a,b,d,f)!==null}function Xq(a,b){return a.chessToXYZ.get(b)||null}function Al(a){let b=-Infinity;for(const[d,f]of a)b<d&&(b=d);return b}function Bl(a){let b=Infinity;for(const[d,f]of a)b>d&&(b=d);return b}class kl{constructor(){this.chessToXYZ=new Map();this.XYToZMap=new Map();this.XToChessSet=new Map();this.YToChessSet=new Map();this.ZToChessSet=new Map();this._xMax=void 0;this._xMin=void 0;this._yMax=void 0;this._yMin=void 0}destroy(){this.clear()}clear(){return this.chessToXYZ.clear(),this.XYToZMap.clear(),this.XToChessSet.clear(),this.YToChessSet.clear(),this.ZToChessSet.clear(),this.clearBounds(),this}clearBounds(){return this._xMax=void 0,this._xMin=void 0,this._yMax=void 0,this._yMin=void 0,this}addChess(a,b,d,f){return Tq(this,a,b,d,f),this.clearBounds(),this}getChess(a,b,d){return ze(this,a,b,d)}removeChess(a,b,d){return Uq(this,a,b,d),this.clearBounds(),this}hasChess(a){return Vq(this,a)}contains(a,b,d){return Wq(this,a,b,d)}getXYZ(a){return Xq(this,a)}get xMax(){return this._xMax===void 0&&(this._xMax=Al(this.XToChessSet)),this._xMax}get xMin(){return this._xMin===void 0&&(this._xMin=Bl(this.XToChessSet)),this._xMin}get yMax(){return this._yMax===void 0&&(this._yMax=Al(this.YToChessSet)),this._yMax}get yMin(){return this._yMin===void 0&&(this._yMin=Bl(this.YToChessSet)),this._yMin}}function Ic(a,b=[]){let d=a.boardData.chessToXYZ;for(const[f,i]of d)b.push(f);return b}function Gi(a){if(typeof a!=="object"||a.nodeType||a===a.window)return!1;try{if(a.constructor&&!{}.hasOwnProperty.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0}function zg(a){return Gi(a)?!0:typeof a==="object"?a.isTileXYZ:!1}function Qa(a,b){let d=a.boardData.getXYZ(b);return d?d:zg(b)?b:null}function wb(a,b,d,f){return a.boardData.getChess(b,d,f)}class $q{constructor(a){this.board=null;this.blocker=!1;this.parent=a,this.boot()}boot(){typeof this.parent==="object"&&this.parent.on&&this.parent.on("destroy",this.destroy,this)}destroy(){if(this.board){let a=this.tileXYZ;this.board.boardData.removeChess(a.x,a.y,a.z)}this.parent=void 0,this.board=null}setBoard(a){return this.board=a,this}get tileXYZ(){return this.board==null?null:this.board.boardData.getXYZ(this.parent)}setBlocker(a=!0){return this.blocker=a,this}setBlockEdge(a,b=!0){typeof this.blocker==="boolean"&&(this.blocker={});let d=this.blocker;if(typeof a==="object"){let f=a;for(let i in f)d[i]=f[i]}else d[a]=b;return this}getBlockEdge(a){return typeof this.blocker==="boolean"?!1:this.blocker.hasOwnProperty(a)?this.blocker[a]:!1}}function wc(a){return a.hasOwnProperty("rexChess")||(a.rexChess=new $q(a)),a.rexChess}function gc(a,b,d,f,i,l=!1,q=!1){if(b){let u=Qa(a,b);if(u)d=u.x,f=u.y,i=u.z;else return}else{b=wb(a,d,f,i);if(!b)return}q||a.boardData.removeChess(d,f,i),a._isBoard&&wc(b).setBoard(null),l&&b.destroy&&b.destroy()}function ye(a,b){if(a.infinityMode)return;if(a.height===void 0||a.height<=b){a.height=b;return}let d=Ic(a);d.forEach(f=>{let i=Qa(a,f);i.y>b&&gc(a,f)}),a.height=b}function xe(a,b){if(a.infinityMode)return;if(a.width===void 0||a.width<=b){a.width=b;return}let d=Ic(a);d.forEach(f=>{let i=Qa(a,f);i.x>b&&gc(a,f)}),a.width=b}class $h{constructor({grid:a=void 0,wrap:b=!1,inifinity:d=!1,width:f=0,height:i=0}={}){this.boardData=new kl(),this._isBoard=!0,this.setGrid(a),this.setWrapMode(b),this.setInfinityMode(d),this.setBoardSize(f,i)}destroy(){}setGrid(a){return this.grid=a,this}setWrapMode(a=!0){return this.wrapMode=a,this}setInfinityMode(a=!0){return this.infinityMode=a,this}setBoardSize(a=0,b=0){return xe(this,a),ye(this,b),this}}function vc(a,b,d,f){let i;return a.infinityMode?i=!0:i=b>=0&&b<a.width&&d>=0&&d<a.height,i&&f!==void 0&&(i=a.boardData.contains(b,d,f)),i}function Ub(a,b,d,f){return a.grid.getWorldXY(b,d,f)}function xf(a,b,d,f){if(b===void 0){let i=Ic(a);for(let l=0,q=i.length;l<q;l++){let u=i[l],v=Qa(a,u);Ub(a,v.x,v.y,u)}}else{if(d===void 0){let i=Qa(a,b);d=i.x,f=i.y}Ub(a,d,f,b)}}function Nd(a,b,d,f,i,l=!0){if(!vc(a,d,f))return;let q=Qa(a,b);i===void 0&&(q?i=q.z:i=0);if(q&&q.x===d&&q.y===f&&q.z===i)return;let u=wb(a,d,f,i);u&&(gc(a,null,d,f,i),console.warn(`Chess at (${d},${f},${i}) has been removed because of overlapped`)),a.boardData.addChess(b,d,f,i),a._isBoard&&wc(b).setBoard(a),l&&xf(a,b,d,f)}function Ee(a,b,d,f){return Math.atan2(f-b,d-a)}function Od(a,b,d){let f=Qa(a,b),i=Qa(a,d),l=Ub(a,f.x,f.y,!0),q=l.x,u=l.y;l=Ub(a,i.x,i.y,!0);let v=l.x,A=l.y;return Ee(q,u,v,A)}function nd(a,b,d){let f=d-b;return b+((a-b)%f+f)%f}function wf(a,b,d,f={x:0,y:0}){return f===!0&&(f=Gw),a.wrapMode?b=nd(b,0,a.width):!a.infinityMode&&(b<0||b>=a.width)&&(b=null),a.wrapMode?d=nd(d,0,a.height):!a.infinityMode&&(d<0||d>=a.height)&&(d=null),f.x=b,f.y=d,f}let Gw={x:0,y:0};function fc(a,b,d,f,i){let l=Qa(a,b);if(l===null)return null;typeof d==="string"&&(d.includes(",")?d=d.split(".").map(A=>parseInt(A,10)):d=parseInt(d));let q=typeof d==="number",u=typeof f==="number";if(q&&u){let A=a.grid.getTileXYAtDirection(l,d,f,i);return wf(a,A.x,A.y,A),(A.x===null||A.y===null)&&(A=null),A}Array.isArray(i)||(i=[]),d===null&&(d=a.grid.allDirections);let v;if(q)if(Array.isArray(f))for(let A=0,E=f.length;A<E;A++)v=fc(a,l,d,f[A]),v!==null&&i.push(v);else{let A,E,H;({end:A=1,start:E=A>0?1:-1,step:H=A>=E?1:-1}=f);if(E===A)v=fc(a,l,d,A),v!==null&&i.push(v);else if(E<A)for(let R=E;R<=A;R+=H)v=fc(a,l,d,R),v!==null&&i.push(v);else for(let R=E;R>=A;R+=H)v=fc(a,l,d,R),v!==null&&i.push(v)}else for(let A=0,E=d.length;A<E;A++)u?(v=fc(a,l,d[A],f),v!==null&&i.push(v)):fc(a,l,d[A],f,i);return i}function Vc(a,b,d=null,f={x:0,y:0}){return fc(a,b,d,1,f)}function sf(a,b,d){b===void 0&&(b=Kw);let f=a.wrapMode,i=a.infinityMode;a.wrapMode=!1,a.infinityMode=!0;let l=Vc(a,b,d,!0);return a.wrapMode=f,a.infinityMode=i,Od(a,b,l)}let Kw={x:0,y:0};const Vy=180/Math.PI;function Af(a){return a*Vy}function dr(a,b){let d=b-a;if(d===0)return 0;let f=Math.floor((d- -180)/360);return d-f*360}function rf(a,b,d){d=Af(d);let f=a.grid.allDirections,i=Infinity,l;for(let q=0,u=f.length;q<u;q++){let v=Af(sf(a,b,f[q])),A=Math.abs(dr(d,v));A<i&&(i=A,l=q)}return l}function vf(a,b,d){if(b===null||d===null)return null;if(b.x===d.x&&b.y===d.y)return null;let f=a.grid.getNeighborTileDirection(b,d);if(a.wrapMode&&f===null){let i=Vc(a,b,null);for(let l=0,q=i.length;l<q;l++){let u=i[l];if(d.x===u.x&&d.y===u.y){f=l;break}}}return f}function uf(a,b,d){let f=Qa(a,b),i=Qa(a,d);return vf(a,f,i)}function bi(a,b,d){return uf(a,b,d)!==null}function ci(a,b,d,f=!0){let i=Qa(a,b),l=Qa(a,d);return i===null||l===null?null:a.grid.directionBetween(i,l,f)}function wg(a,b,d=1,f=[]){let i=a.grid.ringToTileXYArray(b,d);for(let l=0,q=i.length;l<q;l++){let u=i[l];vc(a,u.x,u.y)&&f.push(u)}return f}function ml(a,b,d,f=!0,i=[]){for(let l=0;l<=d;l++){let q=f?l:d-l;wg(a,b,q,i)}return i}function Jc(a,b,d,f,i={x:0,y:0}){return i===!0&&(i=Iw),d===0&&f===0?(i.x=b.x,i.y=b.y):a.grid.offset(b,d,f,i),i}let Iw={x:0,y:0};function nl(a,b){let d=Infinity,f=Infinity,i;for(let u=0,v=b.length;u<v;u++)i=b[u],d=Math.min(d,i.x),f=Math.min(f,i.y);if(d!==0||f!==0)for(let u=0,v=b.length;u<v;u++)i=b[u],Jc(a,i,-d,-f,i);let l=-Infinity,q=-Infinity;for(let u=0,v=b.length;u<v;u++)i=b[u],l=Math.max(l,i.x),q=Math.max(q,i.y);return xe(a,l+1),ye(a,q+1),b}var Ce;(function(a){a[a["x+,y+"]=0]="x+,y+",a[a["x-,y+"]=1]="x-,y+",a[a["y+,x+"]=2]="y+,x+",a[a["y-,x+"]=3]="y-,x+"})(Ce||(Ce={}));function di(a,b,d,f=0){let i={x:0,y:0};switch(f){case 0:for(let l=0;l<a.height;l++)for(let q=0;q<a.width;q++)i.x=q,i.y=l,d?b.call(d,i,a):b(i,a);break;case 1:for(let l=0;l<a.height;l++)for(let q=a.width-1;q>=0;q--)i.x=q,i.y=l,d?b.call(d,i,a):b(i,a);break;case 2:for(let l=0;l<a.width;l++)for(let q=0;q<a.height;q++)i.x=l,i.y=q,d?b.call(d,i,a):b(i,a);break;case 3:for(let l=0;l<a.width;l++)for(let q=a.height-1;q>=0;q--)i.x=l,i.y=q,d?b.call(d,i,a):b(i,a)}}function ei(a,b,d,f){return a.grid.getDistance(b,d,f)}function vg(a,b=0,d=[]){if(Array.isArray(b)){let f=b;for(let i=0;i<a.height;i++)for(let l=0;l<a.width;l++){let q=!0;for(let u=0,v=f.length;u<v;u++)if(wb(a,l,i,f[u])!==null){q=!1;break}q&&d.push({x:l,y:i})}}else for(let f=0;f<a.height;f++)for(let i=0;i<a.width;i++)wb(a,i,f,b)===null&&d.push({x:i,y:f});return d}function tf(a,b,d,f){return a.grid.getGridPoints(b,d,f)}function hc(a,b,d,f=[]){let i=a.boardData.getChess(b,d);for(const[l,q]of i)f.push(q);return f}function yf(a,b,d,f=[]){let i=d!=null,l,q;for(let u=0,v=b.length;u<v;u++)l=b[u],i?(q=wb(a,l.x,l.y,d),q!==null&&f.push(q)):hc(a,l.x,l.y,f);return f}function fi(a,b,d,f,i){let l=Qa(a,b);if(l===null)return null;f==null&&(f=l.hasOwnProperty("z")?l.z:null);let q=Vc(a,l,d,!0);return q===null?null:Array.isArray(q)?(i===void 0&&(i=[]),yf(a,q,f,i)):f==null?(i===void 0&&(i=[]),hc(a,q.x,q.y,i)):wb(a,q.x,q.y,f)}function gi(a,b,d,f={x:0,y:0}){let i=rf(a,b,d);return fc(a,b,i,1,f)}function hi(a,b,d,f){return a.grid.getOppositeDirection(b,d,f)}function xg(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function zf(a,b=0,d=a.length){let f=b+Math.floor(Math.random()*d);return a[f]===void 0?null:a[f]}function ol(a,b=0,d={x:0,y:0}){d===!0&&(d=Cw);let f=Math.floor(a.width*a.height*.3);for(let l=0;l<f;l++){let q=xg(0,a.width-1),u=xg(0,a.height-1);if(wb(a,q,u,b)===null)return d.x=q,d.y=u,d}let i=vg(a,b);if(i.length===0)return null;{let l=zf(i);return d.x=l.x,d.y=l.y,d}}let Cw={x:0,y:0};function pl(a,b,d,f){if(f===void 0){let i=hc(a,b,d);for(let l=0,q=i.length;l<q;l++){let u=wc(i[l]).blocker;if(u===!0)return!0}return!1}else{let i=wb(a,b,d,f);if(i===null)return!1;let l=wc(i).blocker;return l===!0}}function ql(a,b){return a.boardData.chessToXYZ.has(b)}function rl(a,b,d,f,i){if(f===void 0){let l=hc(a,b,d);for(let q=0,u=l.length;q<u;q++)if(Sq(wc(l[q]).blocker,i))return!0;return!1}else{let l=wb(a,b,d,f);return l===null?!1:Sq(wc(l).blocker,i)}}function Sq(a,b){return a===!1||a===!0?a:a[b]===!0}function Fl(a){return a=a%Yv,a>=0?a:a+Yv}const Yv=Math.PI*2;function er(a,b,d=1e-4){return Math.abs(a-b)<d}function ii(a,b,d,f,i){let l=Qa(a,b),q=Qa(a,d),u=Od(a,l,q);u=Fl(u);let v=Math.abs(u-f);v=Math.min(v,Lw-v);let A=i/2;return er(v,A)||v<A}const Lw=Math.PI*2;function ji(a,b,d,f,i){let l=Qa(a,b),q=Qa(a,d),u=a.grid.directions;a.grid.directions=a.grid.sides;let v=a.grid.directionBetween(l,q,!1);a.grid.directions=u;let A=Math.abs(v-f);return A=Math.min(A,a.grid.directions-A),A<=i/2}function ac(a,b,d,f={x:0,y:0}){return a.grid.getTileXY(b,d,f)}function ki(a,b,d,f){if(a.infinityMode&&f===void 0)return!0;let i=ac(a,b,d,!0);return vc(a,i.x,i.y,f)}function cr(a,b,d,f){let i=a-d,l=b-f;return Math.sqrt(i*i+l*l)}function El(a,b,d){return(b-a)*d+a}function sl(a,b,d,f,i,l=[]){let q=cr(b,d,f,i),u=Math.min(a.grid.width,a.grid.height),v=Math.ceil(q/(u/4)),A;for(let E=0;E<=v;E++){let H=E/v,R=El(b,f,H),L=El(d,i,H),O=ac(a,R,L);if(!vc(a,O.x,O.y))continue;if(A&&A.x===O.x&&A.y===O.y)continue;l.push(O),A=O}return l}var De;(function(a){a[a.x=1]="x",a[a.horizontal=1]="horizontal",a[a.h=1]="h",a[a.y=2]="y",a[a.vertical=2]="vertical",a[a.v=2]="v",a[a.xy=3]="xy"})(De||(De={}));function tl(a,b,d,f=null,i={x:0,y:0}){return i===!0&&(i=Hw),f!==null?Jc(a,b,-f.x,-f.y,i):(i.x=b.x,i.y=b.y),a.grid.mirror(i,d,i),f!==null&&Jc(a,i,f.x,f.y,i),i}let Hw={x:0,y:0};function ul(a,b=!1,d=!1){let f=Ic(a);for(let i=0,l=f.length;i<l;i++)gc(a,f[i],void 0,void 0,void 0,b,d)}function vl(a,b,d,f=null,i={x:0,y:0}){return i===!0&&(i=Jw),f!==null?Jc(a,b,-f.x,-f.y,i):(i.x=b.x,i.y=b.y),a.grid.rotate(i,d,i),f!==null&&Jc(a,i,f.x,f.y,i),i}let Jw={x:0,y:0};function wl(a,b,d){let f=Qa(a,b);if(f===null)return;Nd(a,b,f.x,f.y,d)}function yg(a,b,d){return Math.max(b,Math.min(d,a))}function xl(a,b,d,f=[]){let i=ac(a,b.left,b.top,!0),l=i.x-1,q=i.y-1,u=ac(a,b.right,b.bottom,!0),v=u.x+1,A=u.y+1;a.infinityMode||(l=yg(l,0,a.width-1),q=yg(q,0,a.height-1),v=yg(v,0,a.width-1),A=yg(A,0,a.height-1));for(let E=l;E<=v;E++)for(let H=q;H<=A;H++){let R=Ub(a,E,H,!0);d(b,R.x,R.y)&&f.push({x:E,y:H})}return f}function yl(a,b,d,f=!0){let i=Qa(a,b),l=Qa(a,d);if(i==null||l==null)return;gc(a,b),gc(a,d),Nd(a,b,l.x,l.y,l.z,f),Nd(a,d,i.x,i.y,i.z,f)}function li(a,b,d=[]){let f=a.boardData.ZToChessSet.get(b);if(f)for(const i of f)d.push(i);return d}function mi(a,b,d=[]){for(let f=0,i=b.length;f<i;f++){let l=b[f];d.push(Ub(a,l.x,l.y))}return d}function ni(a,b,d,f={x:0,y:0}){return f===!0&&(f=Mw),ac(a,b,d,f),Ub(a,f.x,f.y,f),f}let Mw={x:0,y:0};function oi(a,b,d,f,i){let l=ac(a,b,d,!0);return f!==void 0?wb(a,l.x,l.y,f):hc(a,l.x,l.y,i)}class ai extends $h{addChess(a,b,d,f,i=!0){return Nd(this,a,b,d,f,i),this}angleBetween(a,b){return Od(this,a,b)}angleSnapToDirection(a,b){return rf(this,a,b)}angleToward(a,b){return sf(this,a,b)}areNeighbors(a,b){return bi(this,a,b)}chessToTileXYZ(a){return Qa(this,a)}contains(a,b,d){return vc(this,a,b,d)}directionBetween(a,b,d=!0){return ci(this,a,b,d)}filledRingToTileXYArray(a,b,d=!0,f=[]){return ml(this,a,b,d,f)}fit(a){return nl(this,a)}forEachTileXY(a,b,d=0){return di(this,a,b,d),this}getAllChess(a=[]){return Ic(this,a)}getChessData(a){return wc(a)}getDistance(a,b,d=!1){return ei(this,a,b,d)}getEmptyTileXYArray(a=0,b=[]){return vg(this,a,b)}getGridPoints(a,b,d){return tf(this,a,b,d)}getNeighborChess(a,b,d,f){return fi(this,a,b,d,f)}getNeighborChessDirection(a,b){return uf(this,a,b)}getNeighborTileDirection(a,b){return vf(this,a,b)}getNeighborTileXY(a,b=null,d={x:0,y:0}){return Vc(this,a,b,d)}getNeighborTileXYAtAngle(a,b,d={x:0,y:0}){return gi(this,a,b,d)}getOppositeDirection(a,b,d){return hi(this,a,b,d)}getRandomEmptyTileXY(a=0,b={x:0,y:0}){return ol(this,a,b)}getTileXYAtDirection(a,b,d,f){return fc(this,a,b,d,f)}getWrapTileXY(a,b,d={x:0,y:0}){return wf(this,a,b,d)}gridAlign(a,b,d){return xf(this,a,b,d),this}hasBlocker(a,b,d){return pl(this,a,b,d)}hasChess(a){return ql(this,a)}hasEdgeBlocker(a,b,d,f){return rl(this,a,b,d,f)}isAngleInCone(a,b,d,f){return ii(this,a,b,d,f)}isDirectionInCone(a,b,d,f){return ji(this,a,b,d,f)}isOverlappingPoint(a,b,d){return ki(this,a,b,d)}lineToTileXYArray(a,b,d,f,i=[]){return sl(this,a,b,d,f,i)}mirror(a,b,d=null,f={x:0,y:0}){return tl(this,a,b,d,f)}offset(a,b,d,f){return Jc(this,a,b,d,f)}removeAllChess(a=!1,b=!1){return ul(this,a,b),this}removeChess(a,b,d,f,i=!1,l=!1){return gc(this,a,b,d,f,i,l),this}ringToTileXYArray(a,b=1,d=[]){return wg(this,a,b,d)}rotate(a,b,d=null,f={x:0,y:0}){return vl(this,a,b,d,f)}setBoardWidth(a=0){return xe(this,a),this}setBoardHeight(a=0){return ye(this,a),this}setTileZ(a,b){return wl(this,a,b),this}shapeToTileXYArray(a,b,d=[]){return xl(this,a,b,d)}swapChess(a,b,d=!0){return yl(this,a,b,d),this}tileXYArrayToChessArray(a,b,d=[]){return yf(this,a,b,d)}tileXYToChessArray(a,b,d=[]){return hc(this,a,b,d)}tileXYZToChess(a,b,d){return wb(this,a,b,d)}tileZToChessArray(a,b=[]){return li(this,a,b)}tileXYArrayToWorldXYArray(a,b=[]){return mi(this,a,b)}tileXYToWorldXY(a,b,d={x:0,y:0}){return Ub(this,a,b,d)}worldXYSnapToGrid(a,b,d={x:0,y:0}){return ni(this,a,b,d)}worldXYToChess(a,b,d,f){return oi(this,a,b,d,f)}worldXYToTileXY(a,b,d){return ac(this,a,b,d)}}function ll(a,b,d,f,i,l="miter"){ri(b,{points:tf(a,0,0,!0),fillStyle:d,strokeStyle:f,lineWidth:i,lineJoin:l})}class Rq extends ai{createTileTexture(a,b,d,f,i="miter"){return ll(this,a,b,d,f,i),this}}const xc={};Ue(xc,{ChessToTileXYZ:()=>Qa,Contains:()=>vc,DirectionBetween:()=>ci,ForEachTileXY:()=>di,GetDistance:()=>ei,GetOppositeDirection:()=>hi,GetTileXYAtDirection:()=>fc,GetWrapTileXY:()=>wf,IsDirectionInCone:()=>ji,TileXYArrayToChessArray:()=>yf,TileXYToChessArray:()=>hc,TileXYZToChess:()=>wb,TileZToChessArray:()=>li});const Pd={};Ue(Pd,{AngleBetween:()=>Od,AngleSnapToDirection:()=>rf,AngleToward:()=>sf,GetGridPoints:()=>tf,GridAlign:()=>xf,IsAngleInCone:()=>ii,IsOverlappingPoint:()=>ki,TileXYArrayToWorldXYArray:()=>mi,TileXYToWorldXY:()=>Ub,WorldXYSnapToGrid:()=>ni,WorldXYToChess:()=>oi,WorldXYToTileXY:()=>ac});const Be={};Ue(Be,{AreNeighbors:()=>bi,GetNeighborChess:()=>fi,GetNeighborChessDirection:()=>uf,GetNeighborTileDirection:()=>vf,GetNeighborTileXY:()=>Vc,GetNeighborTileXYAtAngle:()=>gi});var sb;(function(a){a[a.orthogonal=0]="orthogonal",a[a.isometric=1]="isometric"})(sb||(sb={}));var od;(function(a){a[a["4dir"]=4]="4dir",a[a["8dir"]=8]="8dir"})(od||(od={}));class Mr{constructor({x:a=0,y:b=0,cellWidth:d=0,cellHeight:f=0,type:i=sb.orthogonal,dir:l=od["4dir"]}={}){this.setOriginPosition(a,b),this.setCellSize(d,f),this.setType(i),this.setDirectionMode(l)}fromJSON({x:a=0,y:b=0,cellWidth:d=0,cellHeight:f=0,type:i=sb.orthogonal,dir:l=od["4dir"]}={}){return this.setType(i),this.setDirectionMode(l),this.setOriginPosition(a,b),this.setCellSize(d,f),this}toJSON(){return{x:this.x,y:this.y,cellWidth:this.cellWidth,cellHeight:this.cellHeight,type:this.mode,dir:this.directions}}setOriginPosition(a=0,b=0){return this.x=a,this.y=b,this}get width(){return this._width}set width(a){this._width=a,this._halfWidth=a/2}get height(){return this._height}set height(a){this._height=a,this._halfHeight=a/2}setCellSize(a=0,b=0){return this.width=a,this.height=b,this}get cellWidth(){return this.width}set cellWidth(a){this.width=a}get cellHeight(){return this.height}set cellHeight(a){this.height=a}setType(a=sb.orthogonal){return typeof a==="string"&&(a=sb[a]),this.mode=a,this}setDirectionMode(a=od["4dir"]){return typeof a==="string"&&(a=od[a]),this.directions=a,this}}function Er(a,b,d,f=!0){let i;switch(a.mode){case sb.orthogonal:case sb.isometric:if(b.y===d.y)i=d.x>=b.x?0:2;else if(b.x===d.x)i=d.y>=b.y?1:3;else if(a.directions===od["4dir"]){let l=Af(Ee(b.x,b.y,d.x,d.y));l<0&&(l+=360),i=l/90,f&&(i=Math.round(i))}else{let l=d.x-b.x,q=d.y-b.y;if(l===q)i=l>0?4:6;else if(l===-q)i=l>0?7:5;else{let u=Af(Math.atan2(q,l));u<0&&(u+=360);let v=u/45;f&&(v=Math.round(v)),v>=0&&v<1?i=v:v>=1&&v<2?i=v+3:v>=2&&v<3?i=v-1:v>=3&&v<4?i=v+2:v>=4&&v<5?i=v-2:v>=5&&v<6?i=v+1:v>=6&&v<7?i=v-3:i=v}}break}return i===a.directions&&(i=0),i}function Bi(a,b){return nd(b,0,a.directions)}function Fr(a,b,d,f=!1){let i=d.x-b.x,l=d.y-b.y,q;return f?q=Math.abs(i)+Math.abs(l):q=Math.sqrt(i*i+l*l),q}function xi(a,b=[]){if(!(b.length===a))if(b.length<a)for(let d=b.length;d<a;d++)b.push({x:0,y:0});else b.length=a;return b}function Ei(a,b,d,f={x:0,y:0}){typeof b==="object"&&(d=b.y,b=b.x),f===!0&&(f=fx);let i,l;switch(a.mode){case sb.orthogonal:i=b*a.width,l=d*a.height;break;case sb.isometric:i=(b-d)*a._halfWidth,l=(b+d)*a._halfHeight;break}return i+=a.x,l+=a.y,f.x=i,f.y=l,f}let fx={x:0,y:0};function Gr(a,b=0,d=0,f=[]){if(typeof b==="object"){let v=b;d=v.y,b=v.x}f===!0&&(f=bx),xi(4,f);let i,l;({x:i,y:l}=Ei(a,b,d));let q=a._halfWidth,u=a._halfHeight;switch(a.mode){case sb.orthogonal:f[0].x=i+q,f[0].y=l-u,f[1].x=i+q,f[1].y=l+u,f[2].x=i-q,f[2].y=l+u,f[3].x=i-q,f[3].y=l-u;break;case sb.isometric:f[0].x=i+q,f[0].y=l,f[1].x=i,f[1].y=l+u,f[2].x=i-q,f[2].y=l,f[3].x=i,f[3].y=l-u;break}return f}let bx=[];const Bf=[[1,0],[0,1],[-1,0],[0,-1],[1,1],[-1,1],[-1,-1],[1,-1]],Ag=Bf;function Br(a){let b={},d,f,i;for(let l in a)d=a[l],f=d[0],i=d[1],b.hasOwnProperty(f)||(b[f]={}),b[f][i]=parseInt(l);return b}const Cr=Br(Bf),Dr=Br(Ag);function Hr(a,b,d){let f;switch(a.mode){case sb.orthogonal:f=Cr;break;case sb.isometric:f=Dr;break}let i=d.x-b.x,l=d.y-b.y;if(f.hasOwnProperty(i)){let q=f[i];if(q.hasOwnProperty(l))return q[l]}return null}function Fi(a,b,d,f,i={x:0,y:0}){i===!0&&(i=ex);let l,q;switch(a.mode){case sb.orthogonal:l=Bf[d][0],q=Bf[d][1];break;case sb.isometric:l=Ag[d][0],q=Ag[d][1];break}return f===1?(i.x=b.x+l,i.y=b.y+q):(i.x=b.x+f*l,i.y=b.y+f*q),i}let ex={x:0,y:0};function Ir(a,b,d,f={x:0,y:0}){return Fi(a,b,d,1,f)}function Jr(a,b,d,f){return cx[f]}const cx={0:2,1:3,2:0,3:1,4:6,5:7,6:4,7:5};function Kr(a,b,d,f={x:0,y:0}){typeof b==="object"&&(d=b.y,b=b.x),f===!0&&(f=dx),b-=a.x,d-=a.y;let i=b/a.width,l=d/a.height;switch(a.mode){case sb.orthogonal:f.x=Math.round(i),f.y=Math.round(l);break;case sb.isometric:f.x=Math.round(+i+l),f.y=Math.round(-i+l);break}return f}let dx={x:0,y:0};function Lr(a,b,d,f={x:0,y:0}){return typeof d==="string"&&(d=De[d]),f===!0&&(f=gx),f.x=d&1?-b.x:b.x,f.y=d&2?-b.y:b.y,f}let gx={x:0,y:0};function Fe(a,b,d,f,i={x:0,y:0}){i===!0&&(i=hx);let l=b.x+d,q=b.y+f;return i.x=l,i.y=q,i}let hx={x:0,y:0};function Nr(a,b,d,f=[]){let i,l;for(i=d,l=-d;l<=d;l++)f.push(Fe(a,b,i,l));for(l=d,i=d-1;i>=-d;i--)f.push(Fe(a,b,i,l));for(i=-d,l=d-1;l>=-d;l--)f.push(Fe(a,b,i,l));for(l=-d,i=-d+1;i<=d-1;i++)f.push(Fe(a,b,i,l));return f}function Or(a,b,d,f={x:0,y:0}){f===!0&&(f=mx),d=nd(d,0,3);let i,l;switch(d){case 1:i=-b.y,l=b.x;break;case 2:i=-b.x,l=-b.y;break;case 3:i=b.y,l=-b.x;break;default:i=b.x,l=b.y;break}return f.x=i,f.y=l,f}let mx={x:0,y:0};function Ci(a){a._savedOriginX=a.x,a._savedOriginY=a.y}function Di(a){a.x=a._savedOriginX,a.y=a._savedOriginY}class Ar extends Mr{get sides(){return 4}get allDirections(){return this.directions===4?ix:jx}get halfDirections(){return this.directions===4?kx:lx}directionBetween(a,b,d=!0){return Er(this,a,b,d)}directionNormalize(a){return Bi(this,a)}getDistance(a,b,d=!1){return Fr(this,a,b,d)}getGridPoints(a=0,b=0,d=[]){return Gr(this,a,b,d)}getNeighborTileDirection(a,b){return Hr(this,a,b)}getNeighborTileXY(a,b,d={x:0,y:0}){return Ir(this,a,b,d)}getOppositeDirection(a,b,d){return Jr(this,a,b,d)}getTileXY(a,b,d={x:0,y:0}){return Kr(this,a,b,d)}getTileXYAtDirection(a,b,d,f={x:0,y:0}){return Fi(this,a,b,d,f)}getWorldXY(a,b,d={x:0,y:0}){return Ei(this,a,b,d)}mirror(a,b,d={x:0,y:0}){return Lr(this,a,b,d)}offset(a,b,d,f={x:0,y:0}){return Fe(this,a,b,d,f)}ringToTileXYArray(a,b,d=[]){return Nr(this,a,b,d)}rotate(a,b,d={x:0,y:0}){return Or(this,a,b,d)}restoreOrigin(){return Di(this),this}saveOrigin(){return Ci(this),this}}const ix=[0,1,2,3],jx=[0,1,2,3,4,5,6,7],kx=[0,1],lx=[0,1,4,5];var Ra;(function(a){a[a.ODD_R=0]="ODD_R",a[a.EVEN_R=1]="EVEN_R",a[a.ODD_Q=2]="ODD_Q",a[a.EVEN_Q=3]="EVEN_Q"})(Ra||(Ra={}));var Kc;(function(a){a[a.y=0]="y",a[a.flat=0]="flat",a[a.x=1]="x",a[a.pointy=1]="pointy"})(Kc||(Kc={}));var Sd;(function(a){a[a.even=0]="even",a[a.odd=1]="odd"})(Sd||(Sd={}));class tr{constructor({x:a=0,y:b=0,radius:d=void 0,cellWidth:f=0,cellHeight:i=0,staggerAxis:l=Kc.x,staggerIndex:q=Sd.odd}={}){this.setType(l,q),this.setDirectionMode(),this.setOriginPosition(a,b),d!==void 0?this.setRadius(d):this.setCellSize(f,i)}fromJSON({x:a=0,y:b=0,radius:d=void 0,cellWidth:f=0,cellHeight:i=0,staggerAxis:l=Kc.x,staggerIndex:q=Sd.odd}={}){return this.setType(l,q),this.setDirectionMode(),this.setOriginPosition(a,b),d!==void 0?this.setRadius(d):this.setCellSize(f,i),this}toJSON(){return{x:this.x,y:this.y,radius:this.radius,cellWidth:this.cellWidth,cellHeight:this.cellHeight,staggerAxis:this.staggerAxis,staggerIndex:this.staggerIndex}}setOriginPosition(a,b){return this.x=a,this.y=b,this}get width(){return this._width}set width(a){this._width=a,this._halfWidth=a/2}get height(){return this._height}set height(a){this._height=a,this._halfHeight=a/2}setCellSize(a=0,b=0){return this.width=a,this.height=b,this.radius=void 0,this}get cellWidth(){return this.width}set cellWidth(a){this.width=a}get cellHeight(){return this.height}set cellHeight(a){this.height=a}setRadius(a=0){let b,d;return this.staggerAxis===Kc.y?(b=2*a,d=zr*a):(b=zr*a,d=2*a),this.setCellSize(b,d),this.radius=a,this}setDirectionMode(){return this.directions=6,this}setType(a=1,b=1){return typeof a==="string"&&(a=Kc[a]),typeof b==="string"&&(b=Sd[b]),this.staggerAxis=a,this.staggerIndex=b,a===Kc.y?this.mode=b===Sd.even?Ra.EVEN_Q:Ra.ODD_Q:this.mode=b===Sd.even?Ra.EVEN_R:Ra.ODD_R,this}}const zr=Math.sqrt(3);function ic(a,b,d,f={x:0,y:0,z:0}){f===!0&&(f=Gl);switch(a){case Ra.ODD_R:f.x=b-(d-(d&1))/2,f.z=d;break;case Ra.EVEN_R:f.x=b-(d+(d&1))/2,f.z=d;break;case Ra.ODD_Q:f.x=b,f.z=d-(b-(b&1))/2;break;case Ra.EVEN_Q:f.x=b,f.z=d-(b+(b&1))/2;break}return f.y=-f.x-f.z,f}function hr(a,b,d,f={x:0,y:0,z:0}){typeof a!=="number"&&(f=a,a=f.x,b=f.y,d=f.z),f===!0&&(f=Gl);let i=Math.round(a),l=Math.round(b),q=Math.round(d),u=Math.abs(i-a),v=Math.abs(l-b),A=Math.abs(q-d);return u>v&&u>A?i=-l-q:v>A?l=-i-q:q=-i-l,f.x=i,f.y=l,f.z=q,f}function Pb(a,b,d,f,i={x:0,y:0}){i===!0&&(i=Ow);switch(a){case Ra.ODD_R:i.x=b+(f-(f&1))/2,i.y=f;break;case Ra.EVEN_R:i.x=b+(f+(f&1))/2,i.y=f;break;case Ra.ODD_Q:i.x=b,i.y=f+(b-(b&1))/2;break;case Ra.EVEN_Q:i.x=b,i.y=f+(b+(b&1))/2;break}return i}function ir(a,b,d={x:0,y:0,z:0}){return d===!0&&(d=Gl),d.x=a,d.y=-a-b,d.z=b,d}let Gl={x:0,y:0,z:0},Ow={x:0,y:0};function kr(a,b,d,f=!0){let i;ic(a.mode,b.x,b.y,ti),ic(a.mode,d.x,d.y,ui);let l=ui.x-ti.x,q=ui.y-ti.y,u=ui.z-ti.z;return u===0?i=l>0?0:3:l===0?i=u>0?1:4:q===0?i=u>0?2:5:l>0&&q<0&&u>0?i=0+u/-q:l<0&&q<0&&u>0?i=1+-q/u:l<0&&q>0&&u>0?i=2+q/-l:l<0&&q>0&&u<0?i=3+-u/q:l>0&&q>0&&u<0?i=4+l/-u:i=5+-q/l,f&&(i=Math.round(i)),i}let ti={x:0,y:0,z:0},ui={x:0,y:0,z:0};function lr(a,b,d,f=!1){ic(a.mode,b.x,b.y,vi),ic(a.mode,d.x,d.y,wi);let i=wi.x-vi.x,l=wi.y-vi.y,q=wi.z-vi.z;return(Math.abs(i)+Math.abs(l)+Math.abs(q))/2}let vi={x:0,y:0,z:0},wi={x:0,y:0,z:0};function yi(a,b,d,f={x:0,y:0}){typeof b==="object"&&(d=b.y,b=b.x),f===!0&&(f=Xw);let i=b*a.width,l=d*a.height;switch(a.mode){case Ra.ODD_R:d&1&&(i+=a._halfWidth),l*=.75;break;case Ra.EVEN_R:d&1&&(i-=a._halfWidth),l*=.75;break;case Ra.ODD_Q:i*=.75,b&1&&(l+=a._halfHeight);break;case Ra.EVEN_Q:i*=.75,b&1&&(l-=a._halfHeight);break}return i+=a.x,l+=a.y,f.x=i,f.y=l,f}let Xw={x:0,y:0};function mr(a,b=0,d=0,f=[]){if(typeof b==="object"){let q=b;d=q.y,b=q.x}f===!0&&(f=Tw),xi(6,f);let i,l;({x:i,y:l}=yi(a,b,d));if(a.radius!==void 0){let q=a.radius,u=a.staggerAxis===Kc.flat?0:-30;for(let v=0;v<6;v++){let A=60*v+u,E=Qd(A);f[v].x=i+q*Math.cos(E),f[v].y=l+q*Math.sin(E)}}else{let q=a._halfWidth,u=q/2,v=a._halfHeight,A=v/2;a.staggerAxis===Kc.flat?(f[0].x=i+q,f[0].y=l,f[1].x=i+u,f[1].y=l+v,f[2].x=i-u,f[2].y=l+v,f[3].x=i-q,f[3].y=l,f[4].x=i-u,f[4].y=l-v,f[5].x=i+u,f[5].y=l-v):(f[0].x=i+q,f[0].y=l-A,f[1].x=i+q,f[1].y=l+A,f[2].x=i,f[2].y=l+v,f[3].x=i-q,f[3].y=l+A,f[4].x=i-q,f[4].y=l-A,f[5].x=i,f[5].y=l-v)}return f}let Tw=[];const Pw=[[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]],[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]]],Qw=[[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]],[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]]],Rw=[[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]],[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]]],Sw=[[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]],[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]]],yc=[Pw,Qw,Rw,Sw];function Rd(a){let b={},d,f;for(let i in a)[d,f]=a[i],b.hasOwnProperty(d)||(b[d]={}),b[d][f]=parseInt(i);return b}const jr=[[Rd(yc[0][0]),Rd(yc[0][1])],[Rd(yc[1][0]),Rd(yc[1][1])],[Rd(yc[2][0]),Rd(yc[2][1])],[Rd(yc[3][0]),Rd(yc[3][1])]];function zi(a,b,d){let f;switch(a){case Ra.ODD_R:case Ra.EVEN_R:f=d&1;break;case Ra.ODD_Q:case Ra.EVEN_Q:f=b&1;break}return f}function nr(a,b,d){let f=a.mode,i=zi(f,b.x,b.y),l=jr[f][i],q=d.x-b.x,u=d.y-b.y;if(l.hasOwnProperty(q)){let v=l[q];if(v.hasOwnProperty(u))return v[u]}return null}function Ai(a,b,d,f,i={x:0,y:0}){i===!0&&(i=Ww);let l=a.mode,q=b.x,u=b.y;if(f===1){let v=zi(l,q,u);i.x=q+yc[l][v][d][0],i.y=u+yc[l][v][d][1]}else if(f===0)i.x=q,i.y=u;else{let v=ic(l,q,u,!0),A,E,H;switch(d){case 1:A=v.x,E=v.y-f,H=v.z+f;break;case 2:A=v.x-f,E=v.y,H=v.z+f;break;case 3:A=v.x-f,E=v.y+f,H=v.z;break;case 4:A=v.x,E=v.y+f,H=v.z-f;break;case 5:A=v.x+f,E=v.y,H=v.z-f;break;default:A=v.x+f,E=v.y-f,H=v.z;break}Pb(l,A,E,H,i)}return i}let Ww={x:0,y:0};function or(a,b,d,f={x:0,y:0}){return Ai(a,b,d,1,f)}function pr(a,b,d,f){return(f+3)%6}const qr=4/3,rr=2/3;function sr(a,b,d,f={x:0,y:0}){typeof b==="object"&&(d=b.y,b=b.x),f===!0&&(f=Vw),b-=a.x,d-=a.y;let i,l;switch(a.mode){case Ra.ODD_R:case Ra.EVEN_R:l=d*qr/a.height,i=b/a.width-rr*(d/a.height);break;case Ra.ODD_Q:case Ra.EVEN_Q:l=d/a.height-rr*(b/a.width),i=b*qr/a.width;break}let q=ir(i,l,Uw);return hr(q),Pb(a.mode,q.x,q.y,q.z,f),f}let Uw={x:0,y:0,z:0},Vw={x:0,y:0};function ur(a,b,d,f={x:0,y:0}){typeof d==="string"&&(d=De[d]),f===!0&&(f=_w);let i=ic(a.mode,b.x,b.y,!0),l=a.mode===Ra.ODD_R||a.mode===Ra.EVEN_R,q,u,v;return d&1&&(l?(q=i.y,u=i.x,v=i.z):(q=-i.x,u=-i.z,v=-i.y),i.x=q,i.y=u,i.z=v),d&2&&(l?(q=-i.y,u=-i.x,v=-i.z):(q=i.x,u=i.z,v=i.y)),Pb(a.mode,q,u,v,f),f}let _w={x:0,y:0};function vr(a,b,d,f,i={x:0,y:0}){i===!0&&(i=$w);let l=b.x+d,q=b.y+f;switch(a.mode){case Ra.ODD_R:(f&1)!==0&&((q&1)===0&&(l+=1));break;case Ra.EVEN_R:(f&1)!==0&&((q&1)===0&&(l-=1));break;case Ra.ODD_Q:(d&1)!==0&&((l&1)==0&&(q+=1));break;case Ra.EVEN_Q:(d&1)!==0&&((l&1)==0&&(q-=1));break}return i.x=l,i.y=q,i}let $w={x:0,y:0};function wr(a,b,d,f=[]){let i=ic(a.mode,b.x,b.y,!0),l=i.x,q=i.y,u=i.z,v,A,E;for(E=d,v=0;v>=-d;v--)A=-v-E,f.push(Pb(a.mode,l+v,q+A,u+E));for(v=-d,A=1;A<=d;A++)E=-v-A,f.push(Pb(a.mode,l+v,q+A,u+E));for(A=d,E=-1;E>=-d;E--)v=-A-E,f.push(Pb(a.mode,l+v,q+A,u+E));for(E=-d,v=1;v<=d;v++)A=-v-E,f.push(Pb(a.mode,l+v,q+A,u+E));for(v=d,A=-1;A>=-d;A--)E=-v-A,f.push(Pb(a.mode,l+v,q+A,u+E));for(A=-d,E=1;E<=d-1;E++)v=-A-E,f.push(Pb(a.mode,l+v,q+A,u+E));return f}function xr(a,b,d,f={x:0,y:0}){f===!0&&(f=ax),d=nd(d,0,5);let i=ic(a.mode,b.x,b.y,!0),l,q,u;switch(d){case 1:l=-i.z,q=-i.x,u=-i.y;break;case 2:l=i.y,q=i.z,u=i.x;break;case 3:l=-i.x,q=-i.y,u=-i.z;break;case 4:l=i.z,q=i.x,u=i.y;break;case 5:l=-i.y,q=-i.z,u=-i.x;break;default:l=i.x,q=i.y,u=i.z;break}return Pb(a.mode,l,q,u,f),f}let ax={x:0,y:0};class yr extends tr{get sides(){return 6}get allDirections(){return Yw}get halfDirections(){return Zw}directionBetween(a,b,d=!0){return kr(this,a,b,d)}directionNormalize(a){return Bi(this,a)}getDistance(a,b,d=!1){return lr(this,a,b,d)}getGridPoints(a=0,b=0,d=[]){return mr(this,a,b,d)}getNeighborTileDirection(a,b){return nr(this,a,b)}getNeighborTileXY(a,b,d={x:0,y:0}){return or(this,a,b,d)}getOppositeDirection(a,b,d){return pr(this,a,b,d)}getTileXY(a,b,d={x:0,y:0}){return sr(this,a,b,d)}getTileXYAtDirection(a,b,d,f={x:0,y:0}){return Ai(this,a,b,d,f)}getWorldXY(a,b,d={x:0,y:0}){return yi(this,a,b,d)}mirror(a,b,d={x:0,y:0}){return ur(this,a,b,d)}offset(a,b,d,f={x:0,y:0}){return vr(this,a,b,d,f)}ringToTileXYArray(a,b,d=[]){return wr(this,a,b,d)}rotate(a,b,d={x:0,y:0}){return xr(this,a,b,d)}restoreOrigin(){return Di(this),this}saveOrigin(){return Ci(this),this}}const Yw=[0,1,2,3,4,5],Zw=[0,1,2];var Lb;(function(a){a[a.random=0]="random",a[a.diagonal=1]="diagonal",a[a.straight=2]="straight",a[a.line=3]="line",a[a.astar=10]="astar",a[a["astar-random"]=11]="astar-random",a[a["astar-line"]=12]="astar-line"})(Lb||(Lb={}));const Ge=null;class Mv{constructor(a){this.content=[],this.scoreFunction=a}clear(){this.content.length=0}push(a){this.content.push(a),this.sinkDown(this.content.length-1)}pop(){let a=this.content[0],b=this.content.pop();return this.content.length>0&&(this.content[0]=b,this.bubbleUp(0)),a}remove(a){const b=this.content.indexOf(a);let d=this.content.pop();b!==this.content.length-1&&(this.content[b]=d,this.scoreFunction(d)<this.scoreFunction(a)?this.sinkDown(b):this.bubbleUp(b))}get size(){return this.content.length}rescoreElement(a){this.sinkDown(this.content.indexOf(a))}sinkDown(a){let b=this.content[a];for(;a>0;){let d=(a+1>>1)-1,f=this.content[d];if(this.scoreFunction(b)<this.scoreFunction(f))this.content[d]=b,this.content[a]=f,a=d;else break}}bubbleUp(a){let b=this.content.length,d=this.content[a],f=this.scoreFunction(d);for(;;){let i=a+1<<1,l=i-1,q=null,u;if(l<b){let v=this.content[l];u=this.scoreFunction(v),u<f&&(q=l)}if(i<b){let v=this.content[i],A=this.scoreFunction(v);A<(q===null?f:u)&&(q=i)}if(q!==null)this.content[a]=this.content[q],this.content[q]=d,a=q;else break}}}let yza=new Mv(a=>a.f);const Fj=function(a,b,d=[]){let f=b;for(;f.prevNodes.length>0;)d.push(f),f=f.prevNodes[0];return d.reverse()};const Pv=function(a,b,d=[]){let f=b;for(;f.prevNodes.length>0;)d.push(f),f.prevNodes.length===1?f=f.prevNodes[0]:f=zf(f.prevNodes);return d.reverse()};const Ov=function(a,b,d=[]){let f=b,i=b.angleTo(a);for(;f.prevNodes.length>0;){d.push(f);if(f.prevNodes.length===1)f=f.prevNodes[0];else{let l=Infinity;for(let q=1,u=f.prevNodes.length;q<u;q++){let v=f.prevNodes[q],A=Math.abs(b.angleTo(v)-i);A<l&&(l=A,f=v)}}}return d.reverse()};const Nv=function(a,b,d=[]){let f=b,i;for(;f.prevNodes.length>0;){d.push(f);if(f.prevNodes.length===1||i===void 0){let l=f.prevNodes[0];i=l.logicDirTo(f),f=l}else{let l,q;for(let u=0,v=f.prevNodes.length;u<v;u++){l=f.prevNodes[u],q=l.logicDirTo(f);if(q!==i)break}i=q,f=l}}return d.reverse()};const Qv=function(a,b,d=[]){let f=b,i;for(;f.prevNodes.length>0;){d.push(f);if(f.prevNodes.length===1||i===void 0){let l=f.prevNodes[0];i=l.logicDirTo(f),f=l}else{let l,q;for(let u=0,v=f.prevNodes.length;u<v;u++){l=f.prevNodes[u],q=l.logicDirTo(f);if(q===i)break}i=q,f=l}}return d.reverse()};let Te={};Te[Lb.astar]=Fj;Te[Lb["astar-line"]]=Fj;Te[Lb["astar-random"]]=Fj;Te[Lb.random]=Pv;Te[Lb.line]=Ov;Te[Lb.diagonal]=Nv;Te[Lb.straight]=Qv;class Rr{constructor(){this.prevNodes=[]}shutdown(){this.key=void 0,this.prevNodes.length=0}destroy(){this.shutdown()}reset(a){this.key=a,this.f=0,this.g=0,this.h=void 0,this.closerH=void 0,this.visited=!1,this.closed=!1}heuristic(a,b,d){if(b===null)return 0;let f,i=this.distanceTo(a)*this.manager.weight;switch(b){case Lb.astar:f=i;break;case Lb["astar-line"]:if(d!==void 0){let l=a.angleTo(d)-this.angleTo(d);f=i+Math.abs(l)}else f=i;case Lb["astar-random"]:f=i+Math.random();break;default:f=i;break}return f}getNextNodes(){return[]}getCost(a){return Ge}distanceTo(a){return 0}angleTo(a){return 0}logicDirTo(a){return 0}getNode(a,b=!1){return this.manager.getNode(a,b)}}function He(a){for(let b=a.length-1;b>0;b--){let d=Math.floor(Math.random()*(b+1)),f=a[b];a[b]=a[d],a[d]=f}return a}class wx extends Rr{constructor(a){super();this.isTileXYZ=!0;this.pathFinder=a}reset(a){super.reset(a),this.key=a,Sr(a,this),this._px=void 0,this._py=void 0,this.cost=void 0}getNextNodes(){let a=Be.GetNeighborTileXY(this.board,this);this.pathFinder.shuffleNeighbors&&He(a);let b=[];return a.forEach(d=>{let f=this.getNode(nc(d.x,d.y),!0);b.push(f)}),b}getCost(a){return this.pathFinder.cacheCost?this.cost===void 0&&(this.cost=this.pathFinder.getCost(this,a)):this.cost=this.pathFinder.getCost(this,a),this.cost}distanceTo(a){return xc.GetDistance(this.board,this,a,!0)}angleTo(a){return Ee(this.worldX,this.wroldY,a.worldX,a.worldX)}logicDirTo(a){return Be.GetNeighborTileDirection(this.board,this,a)}get board(){return this.pathFinder.board}get worldX(){if(this._px===void 0){let a=Pd.TileXYToWorldXY(this.board,this.x,this.y,!0);this._px=a.x,this._py=a.y}return this._px}get wroldY(){if(this._py===void 0){let a=Pd.TileXYToWorldXY(this.board,this.x,this.y,!0);this._px=a.x,this._py=a.y}return this._py}}class rx{constructor(){this.data=[];this.visited=new Set()}push(a,b){if(Array.isArray(a)){let f=a;for(let i=0,l=f.length;i<l;i++)this.push(f[i]);return this}if(typeof a==="object"){let f=a;a=f.x,b=f.y}let d=`${a},${b}`;return this.visited.has(d)?this:(this.data.push({x:a,y:b}),this.visited.add(d),this)}pop(){return this.data.pop()}get length(){return this.data.length}clear(){return this.data.length=0,this.visited.clear(),this}}let u8=new rx();var si;(function(a){a[a.direction=0]="direction",a[a.angle=1]="angle"})(si||(si={}));function Wn(a,b){return a.events.delete(b),a}function Vn(a,b,...d){if(a.events.size===0||!a.events.has(b))return!1;const f=a.events.get(b);let i=f.size;for(const l of f){l.callback.apply(l.context,d),l.once&&f.delete(l),i--;if(i===0)break}return f.size===0&&a.events.delete(b),!0}class $g{constructor(a,b,d=!1){this.callback=a,this.context=b,this.once=d}}function Yn(a){return[...a.events.keys()]}function Xn(a,b){const d=a.events.get(b);return d?d.size:0}function Zn(a,b){const d=[],f=a.events.get(b);return f.forEach(i=>{d.push(i.callback)}),d}function Un(a,b,d,f,i){const l=a.events,q=l.get(b);if(!d)l.delete(b);else if(d instanceof $g)q.delete(d);else{const u=!f,v=i!==void 0;for(const A of q)A.callback===d&&(u&&A.context===f)&&(v&&A.once===i)&&q.delete(A)}return q.size===0&&l.delete(b),a}function _g(a,b,d,f=a,i=!1){if(typeof d!=="function")throw new TypeError("Listener not a function");const l=new $g(d,f,i),q=a.events.get(b);return q?q.add(l):a.events.set(b,new Set([l])),l}function Tn(a,b,d,f=a){return _g(a,b,d,f,!0)}function Hj(a,b){b?a.events.delete(b):a.events.clear()}function Xv(a){return class extends a{constructor(){super(...arguments);this.events=null}setEventEmitter(b){return this.destroyEventEmitter(),this.privateEE=b===void 0,this.privateEE?this.events=new Map():b?this.events=b.events:this.events=null,this.lastEventInstance=null,this}getEventEmitter(){return this}clearEventEmitter(){return this.setEventEmitter(null),this}destroyEventEmitter(){return this.lastEventInstance=null,this.events&&this.privateEE&&(Hj(this),this.events=null),this}on(b,d,f=this,i=!1){return this.lastEventInstance=null,this.events&&(this.lastEventInstance=_g(this,b,d,f,i)),this}once(b,d,f=this){return this.lastEventInstance=null,this.events&&(this.lastEventInstance=Tn(this,b,d,f)),this}off(b,d,f,i){return this.lastEventInstance=null,this.events&&Un(this,b,d,f,i),this}emit(b,...d){return this.lastEventInstance=null,this.events&&Vn(this,b,...d),this}removeAllListeners(b){return this.lastEventInstance=null,this.events&&Hj(this,b),this}clearEvent(b){return this.lastEventInstance=null,this.events&&Wn(this,b),this}getListenerCount(b){return this.lastEventInstance=null,this.events?Xn(this,b):0}getEventNames(){return this.lastEventInstance=null,this.events?Yn(this):[]}getListeners(b){return this.lastEventInstance=null,this.events?Zn(this,b):[]}}}const zb=Xv(class{});var ad;(function(a){a[a.no=0]="no",a[a.lazy=1]="lazy",a[a.always=2]="always"})(ad||(ad={}));const ao="complete";class Dj extends zb{constructor(a,{eventEmitter:b,tickingMode:d=ad.lazy}={}){super();this._isRunning=!1;this.tickingState=!1;this.parent=a,this.setEventEmitter(b),this.setTickingMode(d)}boot(){this.tickingMode===ad.always&&!this.tickingState&&this.startTicking()}shutdown(){this.destroyEventEmitter(),this.tickingState&&this.stopTicking()}setTickingMode(a){typeof a==="string"&&(a=ad[a]),this.tickingMode=a}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(a){if(this._isRunning===a)return;this._isRunning=a,this.tickingMode===ad.lazy&&a!=this.tickingState&&(a?this.startTicking():this.stopTicking())}start(){return this.isRunning=!0,this}pause(){return this.isRunning=!1,this}resume(){return this.isRunning=!0,this}stop(){return this.isRunning=!1,this}complete(a=ao){this.isRunning=!1,this.emit(a,this.parent,this)}}class Lv extends Dj{constructor(a,{updater:b=a,isRunning:d=!1,timeScale:f=1,now:i=0,tickingMode:l=ad.lazy}={}){super(a,arguments[1]);this.updater=null;this.timeScale=1;this.now=0;this.parent=a,this.setUpdater(b),this.isRunning=d,this.timeScale=f,this.now=i,this.setTickingMode(l),this.boot()}resetFromJSON({isRunning:a=!1,timeScale:b=1,now:d=0,tickingMode:f=ad.lazy}={}){return this.isRunning=a,this.timeScale=b,this.now=d,this.setTickingMode(f),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}boot(){super.boot(),mc(this.parent,"destroy",this.destroy,this)}shutdown(){super.shutdown(),this.parent=void 0,this.updater=void 0}destroy(){this.shutdown()}setUpdater(a){return a instanceof Gc&&(a=a.world),a instanceof Fh||a instanceof we?this.updater=a:this.updater=null,this}start(a=0){return this.now=a,super.start(),this}seek(a){return this.now=a,this}addDt(a){return a*=this.timeScale,this.now+=a,this}}class Bj extends Lv{startTicking(){this.update===null&&this.setUpdater(this.parent);if(this.update===null)return;super.startTicking(),this.updater&&mc(this.updater,"update",this.update,this)}stopTicking(){super.stopTicking(),this.updater&&ld(this.updater,"update",this.update,this)}update(a){return!this.isRunning||this.timeScale===0?this:(this.addDt(a),this)}}const oBa=Sb(jl());const Jl="receive";const Ur={receive:Jl};function Vr(a,b){(!a.sendToRef||a.sendToRef.key!==a.receiverID)&&(a.sendToRef=a.database.ref(a.rootPath).child(a.receiverID));if(b===void 0)return a.sendToRef.remove();let d={message:b,senderID:a.userID,stamp:a.stamp};return a.userName!==void 0&&(d.senderName=a.userName),a.skipFirst=!1,a.stamp=!a.stamp,a.sendToRef.set(d)}function Wr(a){if(a.isReceiving&&a.receiverRef.key===a.receiverID)return;Il(a),a.isReceiving=!0,a.skipFirst=!0,a.receiverRef=a.database.ref(a.rootPath).child(a.receiverID),a.receiverRef.on("value",Yr,a),a.receiverRef.onDisconnect().remove()}function Il(a){if(!a.isReceiving)return;a.isReceiving=!1,a.receiverRef.off("value",Yr,a),a.receiverRef.remove(),a.receiverRef.onDisconnect().cancel()}function Yr(a){if(this.skipFirst){this.skipFirst=!1;return}let b=a.val();if(b==null)return;delete b.stamp,this.history.add(b),this.emit(this.eventNames.receive,b)}class Xr{constructor({maxLength:a=-1}={}){this.maxLength=a,this.records=[]}add(a){return this.maxLength===0?this:(this.records.push(a),this.maxLength>0&&this.records.length>this.maxLength&&this.records.shift(),this)}clear(){return this.records.length=0,this}changeUserName(a,b){return this.maxLength===0?this:(this.records.forEach(d=>{d.senderID===a&&(d.senderName=b)}),this)}}const zba=Sb(ec());class Df extends zb{constructor({eventEmitter:a,root:b="",senderID:d="",senderName:f,receiverID:i="",history:l=0,eventNames:q=Ur}={}){super();this.setEventEmitter(a),this.eventNames=q,this.database=zba.database(),this.setRootPath(b),this.skipFirst=!0,this.stamp=!1,this.userInfo={userID:"",userName:void 0},this.setSender(d,f),this.setReceiver(i),this.isReceiving=!1,l===!0?l=-1:l===!1&&(l=0),this.history=new Xr({maxLength:l})}destroy(){this.stopReceiving().destroyEventEmitter()}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.rootPath=a,this.sendToRef=void 0,this.receiverRef=void 0,this}setSender(a,b){return typeof a==="string"?(this.userID=a,this.userName=b):this.userInfo=a,this}setReceiver(a){return this.receiverID=a,this}changeUserName(a,b){return a===this.userID&&(this.userName=b),this.history.changeUserName(a,b),this}getHistory(){return this.history.records}clearHistory(){return this.history.clear(),this}send(a){return Vr(this,a)}startReceiving(){return Wr(this),this}stopReceiving(){return Il(this),this}}const Xy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function Ni(a,b,d=Xy){let f=b===void 0?a:xg(a,b),i="";for(let l=0;l<f;l++)i+=zf(Array.from(d));return i}const Lja=Sb(ec());var xb;(function(a){a[a["1d"]=1]="1d",a[a["2d"]=2]="2d",a[a["3d"]=3]="3d"})(xb||(xb={}));const Ql="init";const Rl="update";const Kl="addkey0";const Ll="addkey1";const Ml="addkey2";const Sl="removekey0";const Tl="removekey1";const Ul="removekey2";const Nl="changekey0";const Ol="changekey1";const Pl="changekey2";const Zr={init:Ql,update:Rl,addkey0:Kl,removekey0:Sl,changekey0:Nl,addkey1:Ll,removekey1:Tl,changekey1:Ol,addkey2:Ml,removekey2:Ul,changekey2:Pl};function Zv(a){return a==null||a===""||a.length===0}function Wy(a,b,d={}){let f=a;if(!Zv(b)){typeof b==="string"&&(b=b.split("."));let i;for(let l=0,q=b.length;l<q;l++){i=b[l];if(f[i]==null||typeof f[i]!=="object"){let u;l===q-1?u=d:u={},f[i]=u}f=f[i]}}return f}function _v(a,b,d){if(typeof a!=="object")return;if(Zv(b)){if(d==null)return;typeof d==="object"&&(a=d)}else{typeof b==="string"&&(b=b.split("."));let f=b.pop(),i=Wy(a,b);i[f]=d}return a}function _n(a){if(typeof a!=="object"||a===null)return a;const b=Array.isArray(a)?[]:{};for(const d in a){const f=a[d];b[d]=_n(f)}return b}class _r{constructor(){this.data={}}setValue(a,b){return a==null?this.clear():typeof a==="object"?this.data=a:_v(this.data,a,b),this}getValue(a){if(a==null)return this.data;{typeof a==="string"&&(a=a.split("."));let b=this.data;for(let d=0,f=a.length;d<f;d++){if(!$n(b))return;b=b[a[d]]}return b}}cloneValue(a){return _n(this.getValue(a))}removeKey(a){if(a==null)this.clear();else{typeof a==="string"&&(a=a.split("."));let b=a.pop(),d=this.data;for(let f=0,i=a.length;f<i;f++){if(!$n(d))return this;d=d[a[f]]}$n(d)&&delete d[b]}return this}clear(){return Ij(this.data),this}incValue(a,b=1){let d=this.getValue(a);return typeof d!=="number"&&(d=0),this.setValue(a,d+b),this}mulValue(a,b){let d=this.getValue(a);return typeof d!=="number"&&(d=1),this.setValue(a,d*b),this}}function $n(a){return a!=null&&typeof a==="object"}const Qca=Sb(ec());class Ie extends zb{constructor({eventEmitter:a,parent:b,key:d,type:f,eventNames:i,table:l}={}){super();this.setEventEmitter(a),this.parent=b,this.children=new Map(),this.key=d,this.parent?this.fullKeyPath=is(this.parent.fullKeyPath,this.key):this.fullKeyPath="",this.type=f,this.eventNames=i,this.table=l,this.database=Qca.database(),this.setRootPath()}destroy(){this.stopUpdate().clear().destroyEventEmitter()}setRootPath(a){if(a===void 0){let b=this.parent?this.parent.rootPath:"";a=`${b}/${this.key}`}this.rootPath=a,this.rootRef=a!==""?this.database.ref(a):void 0;for(const[b,d]of this.children)d instanceof Ie&&d.setRootPath();return this}setData(a,b){if(arguments.length===0)this.clear();else if(typeof a=="string")this.setChildData(a,b);else{let d=a;for(const[f,i]of this.children)d.hasOwnProperty(f)||this.removeChild(f);for(let f in d)this.setChildData(f,d[f])}return this}clear(){this.table.removeKey(this.fullKeyPath);for(const[a,b]of this.children)this.removeChild(a);return this}get childClass(){return null}setChildData(a,b){const d=is(this.fullKeyPath,a);this.table.setValue(d,b);if(!(typeof b!=="object")){if(this.children.has(a))this.children.get(a).setData(b);else if(this.childClass){let f=new this.childClass({parent:this,key:a,type:this.type,eventEmitter:this.eventEmitter,eventNames:this.eventNames,table:this.table});f.startUpdate(),this.children.set(a,f)}}return this}removeChild(a){return this.children.has(a)&&(this.children.get(a).destroy(),this.children.delete(a)),this}startUpdate(){return this}stopUpdate(){return this}}function is(a,b){return a==null||a===""?b:b==null||b===""?a:`${a}.${b}`}class Bg extends Ie{startUpdate(){return this.rootRef.on("child_added",this.addCol,this),this.rootRef.on("child_removed",this.removeCol,this),this.rootRef.on("child_changed",this.changeColValue,this),this}stopUpdate(){return this.rootRef.off("child_added",this.addCol,this),this.rootRef.off("child_removed",this.removeCol,this),this.rootRef.off("child_changed",this.changeColValue,this),this}addCol(a){const b=a.key,d=a.val();this.setData(b,d);switch(this.type){case xb["1d"]:this.emit(this.eventNames.addkey0,b,d);break;case xb["2d"]:this.emit(this.eventNames.addkey1,this.key,b,d);break;default:this.emit(this.eventNames.addkey2,this.pageKey,this.key,b,d);break}this.emit(this.eventNames.update,this.table.data)}removeCol(a){const b=a.key;this.removeChild(b);switch(this.type){case xb["1d"]:this.emit(this.eventNames.removekey0,b);break;case xb["2d"]:this.emit(this.eventNames.removekey1,this.key,b);break;default:this.emit(this.eventNames.removekey2,this.pageKey,this.key,b);break}this.emit(this.eventNames.update,this.table.data)}changeColValue(a){const b=a.key,d=a.val();this.setData(b,d);switch(this.type){case xb["1d"]:this.emit(this.eventNames.changekey0,b,d);break;case xb["2d"]:this.emit(this.eventNames.changekey1,this.key,b,d);break;default:this.emit(this.eventNames.changekey2,this.pageKey,this.key,b,d);break}this.emit(this.eventNames.update,this.table.data)}get pageKey(){return this.parent.key}}class Cg extends Ie{startUpdate(){return this.rootRef.on("child_added",this.addRow,this),this.rootRef.on("child_removed",this.removeRow,this),this}stopUpdate(){return this.rootRef.off("child_added",this.addRow,this),this.rootRef.off("child_removed",this.removeRow,this),this}addRow(a){const b=a.key,d=a.val();this.setData(b,d);switch(this.type){case xb["2d"]:this.emit(this.eventNames.addkey0,b,d);break;default:this.emit(this.eventNames.addkey1,this.key,b,d);break}}removeRow(a){const b=a.key;this.removeChild(b);switch(this.type){case xb["2d"]:this.emit(this.eventNames.removekey0,b);break;default:this.emit(this.eventNames.removekey1,this.key,b);break}}get childClass(){return Bg}}class Vl extends Ie{startUpdate(){return this.rootRef.on("child_added",this.addPage,this),this.rootRef.on("child_removed",this.removePage,this),this}stopUpdate(){return this.rootRef.off("child_added",this.addPage,this),this.rootRef.off("child_removed",this.removePage,this),this}addPage(a){const b=a.key,d=a.val();this.setData(b,d),this.emit(this.eventNames.addkey0,b,d)}removePage(a){const b=a.key;this.removeChild(b),this.emit(this.eventNames.removekey0,b)}get childClass(){return Cg}}const Ji={};Ji[xb["1d"]]=Bg;Ji[xb["2d"]]=Cg;Ji[xb["3d"]]=Vl;function $r(a){return new Ji[a.tableType]({type:a.tableType,eventEmitter:a.eventEmitter,eventNames:a.eventNames,table:a.table})}function as(a){return a.updater.clear(),a.initialFlag=!1,a.rootRef.once("value").then(function(b){let d=b.val()??{};return a.table.setValue(d),a.emit(a.eventNames.init,d),a.initialFlag=!0,Promise.resolve(d)})}function Vb(a,b,d,f){let i=a.rootRef;return i=b?i.child(b):i,i=d?i.child(d):i,i=f?i.child(f):i,i}function bs(a,...b){let d,f,i,l;switch(b.length){case 4:[d,f,i,l]=b;break;case 3:[d,f,l]=b;break;case 2:[d,l]=b;break;default:l=b[0];break}return Vb(a,d,f,i).set(l)}function cs(a,...b){let d,f,i;switch(b.length){case 3:[d,f,i]=b;break;case 2:[d,f]=b;break;default:d=b[0];break}return Vb(a,d,f,i).remove()}function ds(a,...b){let d,f,i,l;switch(b.length){case 4:[d,f,i,l]=b;break;case 3:[d,f,l]=b;break;case 2:[d,l]=b;break;default:l=b[0];break}return Vb(a,d,f,i).transaction(function(q){return q===null&&(q=0),q+l})}function es(a,...b){let d,f,i,l;switch(b.length){case 4:[d,f,i,l]=b;break;case 3:[d,f,l]=b;break;case 2:[d,l]=b;break;default:l=b[0];break}return Vb(a,d,f,i).transaction(l)}function fs(a,b){return Vb(a).update(b)}function gs(a,...b){let d,f,i;switch(b.length){case 3:[d,f,i]=b;break;case 2:[d,f]=b;break;case 1:d=b[0];break}return Vb(a,d,f,i).onDisconnect().remove()}function hs(a,...b){let d,f,i,l;switch(b.length){case 4:[d,f,i,l]=b;break;case 3:[d,f,l]=b;break;case 2:[d,l]=b;break;default:l=b[0];break}return Vb(a,d,f,i).onDisconnect().set(l)}const Tba=Sb(ec());class Ef extends zb{constructor({eventEmitter:a,root:b="",type:d=xb["3d"],eventNames:f=Zr}={}){super();this.setEventEmitter(a),this.eventNames=f,this.database=Tba.database(),this.table=new _r(),this.setTableType(d),this.setRootPath(b),this.initialFlag=!1}destroy(){this.updater.destroy(),this.destroyEventEmitter().stopUpdate()}setRootPath(a){return this.rootPath=a,this.rootRef=a!==""?this.database.ref(this.rootPath):null,this.updater.setRootPath(a),this}setTableType(a){return typeof a==="string"&&(a=xb[a]),this.tableType=a,this.updater&&this.updater.destroy(),this.updater=$r(this),this}startUpdate(){return as(this),this.updater.startUpdate(),this}stopUpdate(){return this.updater.stopUpdate(),this}clear(){return this.updater.clear(),this}getData(){return this.table.getValue(...arguments)}cloneData(){return this.table.cloneValue(...arguments)}getItemRef(a,b,d){return Vb(this,a,b,d)}setData(...a){return bs(this,...a)}removeData(...a){return cs(this,...a)}incValue(...a){return ds(this,...a)}transaction(...a){return es(this,...a)}updateData(a){return fs(this,a)}removeDataOnDisconnect(...a){return gs(this,...a)}setDataOnDisconnect(...a){return hs(this,...a)}}const Via=Sb(ec());var Tm;(function(a){a.d="d",a.w="w",a.m="m",a.y="y",a.a="a",a.day="d",a.week="w",a.month="m",a.year="y",a.all="a"})(Tm||(Tm={}));var Lg;(function(a){a.d="tagD",a.w="tagW",a.m="tagM",a.y="tagY",a.a="tagA"})(Lg||(Lg={}));var Mg;(function(a){a.d="scoreD",a.w="scoreW",a.m="scoreM",a.y="scoreY",a.a="scoreA"})(Mg||(Mg={}));var pt;(function(a){a.d="day",a.w="week",a.m="month",a.y="year",a.a="all"})(pt||(pt={}));function Xm({query:a,totalLines:b=Infinity,linesPerPage:d=1e3,startDocRef:f,startMode:i,forEachPageCallback:l,resolveCallback:q}){return Ht({query:a,remainderLines:b,linesPerPage:d,startDocRef:f,startMode:i,forEachPageCallback:l,resolveCallback:q})}function Ht(a){let b=a.query;a.startDocRef&&(b=b[a.startMode](a.startDocRef));let d=Math.min(a.remainderLines,a.linesPerPage);return a.remainderLines-=d,b.limit(d).get().then(function(f){let i=a.remainderLines===0||f.size<d,l=!1;a.forEachPageCallback&&(l=a.forEachPageCallback(f)||!1),i=i||l;if(i){let q;return a.resolveCallback&&(q=a.resolveCallback()),Promise.resolve(q)}else return a.startDocRef=f.docs[f.size-1],a.startMode="startAfter",Ht(a)})}function bc(a,b=Infinity,d=0,f,i){let l=[],q=0;return Xm({query:a,totalLines:d+b,startDocRef:f,startMode:i,forEachPageCallback:function(u){let v,A=u.size,E=d-q;E<=0?v=u.docs:E<A&&(v=u.docs.slice(E,A)),v&&l.push(...v),q+=A},resolveCallback:function(){return l}})}const _la=Sb(ec());function yt(a,b,d=0){return bc(a.nextQuery,b,d,a.baselineDocRef,a.baselineMode).then(function(f){let i=f.length;return a.cacheItems=f,a.pageIndex=void 0,a.startItemIndex=d,a.endItemIndex=a.startItemIndex+i-1,a.isFullPage=b===void 0?!0:i===b,Promise.resolve(a.cacheItems)})}const yla=Sb(ec());class $i{constructor({query:a={next:void 0,previous:void 0},itemCount:b=100,baselineDoc:d,baselineMode:f="startAt"}={}){this.setQuery(a),this.setItemCount(b),this.setBaselineDoc(d,f),this.pageIndex=void 0,this.baselineDocRef=void 0,this.baselineMode="startAt",this.startItemIndex=void 0,this.endItemIndex=void 0,this.cacheItems=void 0,this.isFullPage=void 0}setQuery(a,b){if(a instanceof yla.firestore.Query)this.nextQuery=a,this.prevQuery=b;else{var d=a;this.nextQuery=d.next,this.prevQuery=d.previous}return this.pageIndex=null,this.isFullPage=!0,this}setItemCount(a){return this.itemCount=a,this}setBaselineDoc(a,b){return a?(this.baselineDocRef=a.ref,this.baselineMode=b):this.baselineDocRef=void 0,this}load(a,b=0){return yt(this,a,b)}loadFirstPage(){return this._loadFirstPage()}loadNextPage(){return this.pageIndex==null?this._loadFirstPage():this._loadNextPage()}loadPreviousPage(){return this.pageIndex==null||this.pageIndex===1?this._loadFirstPage():this._loadPreviousPage()}loadCurrentPage(){return this.pageIndex==null||this.pageIndex===0?this._loadFirstPage():this._loadCurrentPage()}}function Et(a){return bc(a.nextQuery,a.itemCount,0,a.baselineDocRef,a.baselineMode).then(function(b){let d=b.length;return a.cacheItems=b,a.pageIndex=0,a.startItemIndex=0,a.endItemIndex=a.startItemIndex+d-1,a.isFullPage=d===a.itemCount,a.prevPageEndDocRef=null,a.currPageStartDocRef=b[0].ref,a.currPageEndDocRef=b[d-1].ref,Promise.resolve(a.cacheItems)})}function zt(a){return bc(a.nextQuery,a.itemCount,0,a.baselineDocRef,a.baselineMode).then(function(b){let d=b.length;return a.cacheItems=b,a.pageIndex=0,a.startItemIndex=0,a.endItemIndex=a.startItemIndex+d-1,a.isFullPage=d===a.itemCount,Promise.resolve(a.cacheItems)})}function Ft(a){return bc(a.nextQuery,a.itemCount,0,a.currPageEndDocRef,"startAfter").then(function(b){let d=b.length;return a.cacheItems=b,a.pageIndex+=1,a.startItemIndex=a.endItemIndex+1,a.endItemIndex=a.startItemIndex+d-1,a.isFullPage=d===a.itemCount,a.prevPageEndDocRef=a.currPageEndDocRef,a.currPageStartDocRef=b[0].ref,a.currPageEndDocRef=b[d-1].ref,Promise.resolve(a.cacheItems)})}function At(a){let b=(a.pageIndex+1)*a.itemCount;return bc(a.nextQuery,a.itemCount,b,a.baselineDocRef,a.baselineMode).then(function(d){let f=d.length;return a.cacheItems=d,a.pageIndex+=1,a.startItemIndex=a.endItemIndex+1,a.endItemIndex=a.startItemIndex+f-1,a.isFullPage=f===a.itemCount,Promise.resolve(a.cacheItems)})}function Gt(a){return bc(a.prevQuery,a.itemCount+1,0,a.currPageStartDocRef,"startAfter").then(function(b){let d=b.length-1;return a.cacheItems=b,a.cacheItems.pop(),a.cacheItems.reverse(),a.pageIndex-=1,a.endItemIndex=a.startItemIndex-1,a.startItemIndex=a.endItemIndex-d+1,a.isFullPage=d===a.itemCount,a.prevPageEndDocRef=b[d].ref,a.currPageStartDocRef=b[d-1].ref,a.currPageEndDocRef=b[0].ref,Promise.resolve(a.cacheItems)})}function Bt(a){let b=(a.pageIndex-1)*a.itemCount;return bc(a.nextQuery,a.itemCount,b,a.baselineDocRef,a.baselineMode).then(function(d){let f=d.length;return a.cacheItems=d,a.pageIndex-=1,a.endItemIndex=a.startItemIndex-1,a.startItemIndex=a.endItemIndex-f+1,a.isFullPage=f===a.itemCount,Promise.resolve(a.cacheItems)})}function Dt(a){return bc(a.nextQuery,a.itemCount,0,a.prevPageEndDocRef,"startAfter").then(function(b){let d=b.length;return a.cacheItems=b,a.endItemIndex=a.startItemIndex+d-1,a.isFullPage=d===a.itemCount,a.currPageStartDocRef=b[0].ref,a.currPageEndDocRef=b[d-1].ref,Promise.resolve(a.cacheItems)})}function Ct(a){let b=a.pageIndex*a.itemCount;return bc(a.nextQuery,a.itemCount,b,a.baselineDocRef,a.baselineMode).then(function(d){let f=d.length;return a.cacheItems=d,a.endItemIndex=a.startItemIndex+f-1,a.isFullPage=f===a.itemCount,Promise.resolve(a.cacheItems)})}class Um extends $i{_loadFirstPage(){return zt(this)}_loadNextPage(){return At(this)}_loadPreviousPage(){return Bt(this)}_loadCurrentPage(){return Ct(this)}}const yka=Sb(ec());class _i extends $i{_loadFirstPage(){return Et(this)}_loadNextPage(){return Ft(this)}_loadPreviousPage(){return Gt(this)}_loadCurrentPage(){return Dt(this)}}const rla=Sb(ec());function rt(a,b){let d={senderID:a.userID,message:b,timestamp:rla.firestore.FieldValue.serverTimestamp()};return a.userName!==void 0&&(d.senderName=a.userName),a.receiverID!==void 0&&(d.receiverID=a.receiverID),a.rootRef.add(d)}function Vm(a,b=a.receiverID){let d=a.rootRef;return d=b!==void 0?d.where("receiverID","==",b):d,d}function qt(a,b=a.receiverID){let d=Vm(a,b),f=d.orderBy("timestamp"),i=d.orderBy("timestamp","desc");return{next:f,previous:i}}const Wm="receive";function st(a){let b=Vm(a).orderBy("timestamp","desc").limit(1);a.unsubscribe=b.onSnapshot({includeMetadataChanges:!0},function(d){if(d.size>0){let f=d.docs[0];if(f.metadata.hasPendingWrites){a.skipFirst&&(a.skipFirst=!1);return}wt(a,a.receiverID,f);if(a.skipFirst)a.skipFirst=!1;else{let i=xt(f);a.cacheMessages.push(i),a.emit(Wm,i)}}else a.skipFirst&&(a.skipFirst=!1)},function(d){debugger})}function tt(a){a.unsubscribe&&a.unsubscribe(),a.resetQueryFlag=!0,a.cacheMessages.length=0}function ut(a){return wt(a),a.page.loadNextPage().then(function(b){let d=[];for(let f=0,i=b.length;f<i;f++)d.push(xt(b[f]));return a.cacheMessages.splice(0,0,...d),Promise.resolve(d)})}function wt(a,b=a.receiverID,d){if(!a.resetQueryFlag)return;a.resetQueryFlag=!1;let f=a.skipFirst?"startAt":"startAfter";a.page.setBaselineDoc(d,f).setQuery(qt(a,b));return}function xt(a){let b=a.data();return b.timestamp=b.timestamp.toDate(),b}const ila=Sb(ec());class vt extends zb{constructor({eventEmitter:a,root:b="",senderID:d="",senderName:f="",receiverID:i,pageItemCount:l=100}={}){super();this.setEventEmitter(a),this.database=ila.firestore(),this.setRootPath(b),this.userInfo={userID:"",userName:void 0},this.setSender(d,f),this.setReceiver(i),this.skipFirst=!0,this.unsubscribe=void 0,this.page=new _i(),this.setPageItemCount(l),this.resetQueryFlag=!0,this.cacheMessages=[]}destroy(){this.stopReceiving().destroyEventEmitter()}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.resetQueryFlag=this.resetQueryFlag||this.rootPath!==a,this.rootPath=a,this.rootRef=this.database.collection(a),this}setSender(a,b){return typeof a==="string"?(this.userID=a,this.userName=b):this.userInfo=a,this}setReceiver(a){return this.resetQueryFlag=this.resetQueryFlag||this.receiverID!==a,this.receiverID=a,this}setPageItemCount(a){return this.page.setItemCount(a),this}get hasPreviousMessage(){return this.page.isFullPage!==!1}send(a){return rt(this,a)}startReceiving(){return st(this),this}stopReceiving(){return tt(this),this}loadPreviousMessages(){return ut(this)}}const Zl="join";const _l="leave";const am="init";const $l="update";const Yl="changename";const Xl="change";const ns={join:Zl,leave:_l,update:$l,change:Xl,init:am,changename:Yl};var rd;(function(a){a[a.once=0]="once",a[a.child=1]="child",a[a.all=2]="all"})(rd||(rd={}));const Km="add";const Mm="remove";const Lm="change";const Nm="update";const ft={add:Km,remove:Mm,update:Nm,change:Lm};function Yi(a){a.items.length=0,a.itemID2Index.clear()}function gt(a){return a.items}function ht(a,b){return a.itemID2Index.has(b)}function Jm(a,b){return b==null?null:a.itemID2Index.get(b)}function it(a,b){if(b==null)return null;let d=Jm(a,b);return d==null?null:a.items[d]}function jt(a,b,d){a.items.forEach(b,d)}function Xd(a){a.itemID2Index.clear();let b=a.items;for(var d=0,f=b.length;d<f;d++){let i=b[d][a.keyItemID];a.itemID2Index.set(i,d)}}function Om(a,b){let d=Qm.call(this,a,b);Xd(this),this.emit(this.eventNames.add,d),this.emit(this.eventNames.update,this.items)}function Jg(a,b){let d=kt.call(this,a);Xd(this);let f=Qm.call(this,a,b);Xd(this),this.emit(this.eventNames.change,f,d),this.emit(this.eventNames.update,this.items)}function Pm(a){let b=kt.call(this,a);Xd(this),this.emit(this.eventNames.remove,b),this.emit(this.eventNames.update,this.items)}function Kg(a){Yi(this),a.forEach(function(b){Qm.call(this,b,null,!0)}.bind(this)),Xd(this),this.emit(this.eventNames.update,this.items)}function Qm(a,b,d=!1){let f,i=this.getItemCallback,l=this.getItemCallbackScope;l?f=i.call(l,a):f=i(a);if(d)return this.items.push(f),f;if(b==null)this.items.unshift(f);else{let q=this.itemID2Index.get(b);q===this.items.length-1?this.items.push(f):this.items.splice(q+1,0,f)}return f}function kt(a){let b=this.itemID2Index.get(a.key),d=Ig(this.items,b);return d}const nt={start(a,b){a.isUpdating=!1,b.once("value",Kg,a)},stop(a){}};const mt={start(a,b){b.on("child_added",Om,a),b.on("child_removed",Pm,a),b.on("child_moved",Jg,a),b.on("child_changed",Jg,a)},stop(a){a.query.off("child_added",Om,a),a.query.off("child_removed",Pm,a),a.query.off("child_moved",Jg,a),a.query.off("child_changed",Jg,a)}};const lt={start(a,b){b.on("value",Kg,a)},stop(a){a.query.off("value",Kg,a)}};const Hg={};Hg[rd.all]=lt;Hg[rd.child]=mt;Hg[rd.once]=nt;class Je extends zb{constructor({eventEmitter:a,itemIDKey:b="__itemID__",mode:d=rd.child,getItemCallback:f=Sx,getItemCallbackScope:i,query:l,eventNames:q=ft}={}){super();this.setEventEmitter(a),this.eventNames=q,this.isUpdating=!1,this.items=[],this.itemID2Index=new Map(),this.setItemIDKey(b),this.setMode(d),i===void 0&&(i=this),this.setGetitemCallback(f,i),this.setQuery(l)}destroy(){this.stopUpdate().clear()}setItemIDKey(a){return this.keyItemID=a,this}setMode(a){return typeof a==="string"&&(a=rd[a]),this.mode=a,this.updater=Hg[a],this}setGetitemCallback(a,b){return this.getItemCallback=a,this.getItemCallbackScope=b,this}setQuery(a){return this.query=a,this}startUpdate(a){if(a)this.setQuery(a);else if(this.query)a=this.query;else return this;return this.stopUpdate().clear(),this.isUpdating=!0,this.updater.start(this,a),this}stopUpdate(){return!this.query||!this.isUpdating?this:(this.isUpdating=!1,this.updater.stop(this),this)}clear(){return Yi(this),this}getItems(){return gt(this)}hasItem(a){return ht(this,a)}getItemIndexFromItemID(a){return Jm(this,a)}getItemFromItemID(a){return it(this,a)}forEach(a,b){return jt(this,a,b),this}updateItemID2Index(){return Xd(this),this}}const Sx=function(a){let b=a.val();return b[this.keyItemID]=a.key,b};function Td(a,b=a.userID){return a.userID2ItemID.has(b)}function Ki(a,b=a.userID){if(!Td(a,b))return null;let d=a.userID2ItemID.get(b);return a.rootRef.child(d)}function os(a,b=a.userID){if(!Td(a,b))return null;let d=a.userID2ItemID.get(b);return a.userList.getItemFromItemID(d)}function Wl(a){return a.userList.getItems()}function ps(a){a.userList.clear()}function qs(a,b,d){a.userList.forEach(b,d)}function rs(a,b=a.userID){let d=a.userList.getItems()[0];return d&&d.userID===b}function ss(a){return a.maxUsers===0?!1:a.userList.getItems().length>=a.maxUsers}function ks(a=0,b){return new Promise(function(d,f){setTimeout(function(){d(b)},a)})}function ls(a,b=a.userID,d=a.userName){if(Td(a,b))return Promise.resolve();let f={userID:b,userName:d},i=a.maxUsers,l=a.database.ref(a.rootPath),q=l.push();return q.onDisconnect().remove().then(function(){return q.set(f)}).then(function(){return ks(0)}).then(function(){return i===0?(a.isInList=!0,Promise.resolve()):l.limitToFirst(i).once("value").then(function(u){return Gx(u,b)?(a.isInList=!0,Promise.resolve()):(a.isInList=!1,q.remove().then(function(){return q.onDisconnect().cancel()}).then(function(){return Promise.reject()}))})})}function Gx(a,b){let d=!1;return a.forEach(function(f){let i=f.val();if(i.userID===b)return d=!0,!0}),d}function ms(a,b=a.userID){if(!Td(a,b))return Promise.resolve();let d=a.userID2ItemID.get(b),f=a.database.ref(a.rootPath).child(d);return f.remove()}function js(a,b){return new Promise(function(d,f){let i=Ki(a);if(i)return d(i);{let l=a.rootRef.orderByChild("userID").equalTo(a.userID);l.once("child_added").then(function(q){return d(q.ref)})}}).then(function(d){return d.child("userName").set(b)}).then(function(){return a.userName=b,Promise.resolve()})}const Ada=Sb(ec());class Ff extends zb{constructor({eventEmitter:a,root:b="",userID:d="",userName:f="",maxUsers:i=0,eventNames:l=ns}={}){super();this.setEventEmitter(a),this.eventNames=l,this.database=Ada.database(),this.setRootPath(b),this.userInfo={userID:"",userName:""},this.setUser(d,f),this.setMaxUsers(i),this.userList=new Je({eventEmitter:this.eventEmitter,itemIDKey:"joinAt",eventNames:{add:l.join,remove:l.leave,update:l.update,change:l.change}}),this.isInList=!1,this.userID2ItemID=new Map(),this.userList.on(this.eventNames.join,function(q){this.userID2ItemID.set(q.userID,q.joinAt),q.userID===this.userInfo.userID&&this.emit(this.eventNames.init,Wl(this))},this).on(this.eventNames.leave,function(q){this.userID2ItemID.delete(q.userID),q.userID===this.userID&&(this.isInList=!1)},this).on(this.eventNames.change,function(q,u){let v=q.userID,A=q.userName,E=u.userName;A!==E&&this.emit(this.eventNames.changename,v,A,E)},this)}destroy(){this.stopUpdate().destroyEventEmitter().leave(),this.userList.destroy()}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.rootPath=a,this.rootRef=a!==""?this.database.ref(this.rootPath):void 0,this}setUser(a,b){return typeof a==="string"?(this.userID=a,this.userName=b):this.userInfo=a,this}setMaxUsers(a){return this.maxUsers=a,this}clear(){return ps(this),this}forEach(a,b){return qs(this,a,b),this}isFull(){return ss(this)}isFirstUser(a=this.userID){return rs(this,a)}getUser(a=this.userID){return os(this,a)}getUsers(){return Wl(this)}getUserRef(a=this.userID){return Ki(this,a)}contains(a=this.userID){return Td(this,a)}join(a=this.userID,b=this.userName){return ls(this,a,b)}leave(a=this.userID){return ms(this,a)}changeUserName(a){return js(this,a)}startUpdate(){let a=this.rootRef;return this.maxUsers>0&&(a=a.limitToFirst(this.maxUsers)),this.userList.startUpdate(a),this}stopUpdate(){return this.userList.stopUpdate(),this}}const Ke="room.join";const Vd="room.leave";const qm="userlist.join";const rm="userlist.leave";const tm="userlist.init";const sm="userlist.update";const Eg="userlist.changename";const bm="broadcast.receive";function fm(a){return`tables.${a}.init`}function gm(a){return`tables.${a}.update`}function hm(a){return`tables.${a}.addkey0`}function im(a){return`tables.${a}.addkey1`}function jm(a){return`tables.${a}.addkey2`}function km(a){return`tables.${a}.removekey0`}function lm(a){return`tables.${a}.removekey1`}function mm(a){return`tables.${a}.removekey2`}function nm(a){return`tables.${a}.changekey0`}function om(a){return`tables.${a}.changekey1`}function pm(a){return`tables.${a}.changekey2`}const cm="roomlist.add";const dm="roomlist.remove";const em="roomlist.update";function Fs(a){const b=new Ff({eventEmitter:a.eventEmitter,eventNames:{join:qm,leave:rm,update:sm,change:"userlist.change",init:tm,changename:Eg},userID:a.userInfo});return b.on("userlist.leave",function(d){d.userID===a.userID&&Lx(a)}),a.on(Ke,function(){b.startUpdate()}).on(Vd,function(){b.stopUpdate().clear()}),b}function Lx(a){a.emit(Vd),setTimeout(function(){a.roomID=void 0,a.roomName=void 0,a.doorState=void 0,a.leftRoomFlag=!1},0)}function Cs(a){const b=new Je({eventEmitter:a.eventEmitter,itemIDKey:"roomID",eventNames:{update:em,add:cm,remove:dm,change:"roomlist.change"},mode:"once"});return b}function Ms(a){return a.split("|")[0]}function Ls(a){return a.split("|")[1]}function Gf(a,b=""){return`${a}|${b}`}function Lc(a,b){let d=a.rootRef;return b&&(d=d.child(b)),d}function Fg(a,b,d){let f=Lc(a,"rooms");return b!==void 0&&(f=f.child(b),d!==void 0&&(f=f.child(d))),f}function Bs(a,b){return Fg(a,b,"alive")}function Gs(a,b){return Fg(a,b,"users")}function Dg(a,b){let d=Lc(a,"room-filters");return b!==void 0&&(d=d.child(b)),d}function Hf(a,b){let d=Lc(a,"room-metadata");return b!==void 0&&(d=d.child(b)),d}function Mi(a,b,d){let f=`${a.rootPath}/rooms/${b}`;return d&&(f+=`/${d}`),f}function Pi(a,b){return Mi(a,b,"users")}function Ds(a,b,d){let f=Mi(a,b,"tables");return d&&(f+=`/${d}`),f}function Hs(a,b,d="open"){let f=Dg(a);return f=f.orderByChild("filter"),b===void 0?f=f.startAt(d).endAt(`${d}~`):f=f.equalTo(Gf(d,b)),f}function ys(a,b){if(b)b===!0&&(b={history:!1});else return null;const d=new Df({eventEmitter:a.eventEmitter,eventNames:{receive:bm},receiverID:"boradcast",senderID:a.userInfo,history:b.history});return a.on(Ke,function(f){d.setRootPath(Mi(a,f.roomID)).startReceiving()}).on(Vd,function(){d.stopReceiving()}).on(Eg,function(f,i){d.changeUserName(f,i)}),d}function Es(a,b){const d=new Map();return b?(b.forEach(f=>{d.set(f.key,Kx(a,f))}),a.on(Ke,function(f){for(const[i,l]of d)l.setRootPath(Ds(a,f.roomID,i)).startUpdate()}).on(Vd,function(){for(const[f,i]of d)i.stopUpdate().clear()}),d):d}function Kx(a,{key:b,type:d=xb["1d"]}){const f=new Ef({eventEmitter:a.eventEmitter,type:d,eventNames:{init:fm(b),update:gm(b),addkey0:hm(b),removekey0:km(b),changekey0:nm(b),addkey1:im(b),removekey1:lm(b),changekey1:om(b),addkey2:jm(b),removekey2:mm(b),changekey2:pm(b)}});return f}function jc(a,b=a.roomID,d=a.roomName){return{roomID:b,roomName:d}}function Ti(a,b){return b===void 0?a.roomID!==void 0:a.roomID===b}function Ps(a){return a.userList.isFull()}function Qs(a,b=a.userID){return a.userList.isFirstUser(b)}function Rs(a){return a.userList.getUsers()}function Qi(a,b,d,f){a.roomID=b,a.roomName=d,a.roomType=f,a.emit("room.join",jc(a))}function Oi(a,b={}){return b.roomID==null&&(b.roomID=Fg(a).push().key),Ix(a,b.roomID).then(function(){return Jx(a,b)})}function Ix(a,b){return Bs(a,b).transaction(function(d){return d===null?!0:void 0})}function Jx(a,{roomID:b,roomName:d="",roomType:f="",maxUsers:i=0,presisted:l=!1,door:q="open",join:u=!0,filterData:v}){let A=Fg(a,b),E=Dg(a,b),H=Hf(a,b);a.isRemoveRoomWhenLeft=!l,a.isRemoveRoomWhenLeft&&(A.onDisconnect().remove(),E.onDisconnect().remove(),H.onDisconnect().remove());const R=Gf(q,f),L={},O={filter:R,name:d};v&&(O.data=v),L[`room-filters/${b}`]=O;const V={name:d,filter:R,maxUsers:i,moderators:{}};return V.moderators[a.userID]=a.userName,L[`room-metadata/${b}`]=V,new Promise(function(X,ea){if(u){const ga=a.userList.setRootPath(Pi(a,b)).setMaxUsers(0).join();return a.userList.setMaxUsers(i),ga.then(X,ea)}else return X()}).then(function(){return Lc(a).update(L)}).then(function(){return a.isRoomCreator=!0,u&&Qi(a,b,d,f),Promise.resolve(jc(a))})}function zs(a,{digits:b=10,candidates:d="0123456789",retry:f=1e3}){let i=arguments[1];return As(a,b,d,f,i)}function As(a,b,d,f,i){return i.roomID=Ni(b,b,d),f<=0?Promise.reject(i):(f--,Oi(a,i).catch(function(){return As(a,b,d,f,i)}))}function Ui(a,b=a.roomID){const d={};d[`room-filter/${b}`]=null,d[`room-metadata/${b}`]=null,d[`rooms/${b}`]=null;const f=jc(a);return Lc(a).update(d).then(function(){return Promise.resolve(f)})}function If(a){if(!Ti(a))return Promise.resolve(jc(a));a.leftRoomFlag=!0;if(a.isRemoveRoomWhenLeft)return Ui(a);{const b=jc(a);return a.userList.leave().then(function(){return Promise.resolve(b)})}}function Si(a,{leftThenJoin:b=!0,roomID:d}){return b?If(a).then(function(){return Ns(a,d)}):Ns(a,d)}function Ns(a,b){return b==null?Promise.reject(jc(a,b,"")):(a.isRemoveRoomWhenLeft=!1,Mx(a,b).then(function(d){return a.userList.setRootPath(Pi(a,b)).setMaxUsers(d.maxUsers).join().then(function(){return Promise.resolve(d)})}).then(function(d){return Qi(a,b,d.name,Ls(d.filter)),Promise.resolve(jc(a))}))}function Mx(a,b){return Hf(a,b).once("value").then(function(d){let f=d.val();return Nx(a,f)?Promise.resolve(f):Promise.reject()})}function Nx(a,b){if(b==null)return!1;if(Ms(b.filter)==="closed")return!1;const d=a.userID;if(b.moderators[d])return!0;switch(b.permission){case"blocklist":const f=b.blocklist;return!(f&&f[d]);case"allowlist":const i=b.allowlist;return i&&i[d];default:return!0}}function Ri(a,b,d){return new Promise(function(f,i){a.roomList.once("roomlist.update",function(l){f(l)}).startUpdate(Hs(a,b,d))})}function Js(a,{roomType:b="",leftThenJoin:d=!0}={}){return Ri(a,b,"open").then(function(f){if(f.length===0)return Promise.reject("No filtered room");He(f);const i={leftThenJoin:d,roomID:""};return Ks(a,i,f)})}function Ks(a,b,d,f=0){return f===d.length?Promise.reject("Can't join any room"):(b.roomID=d[f].roomID,f++,Si(a,b).catch(function(){return Ks(a,b,d,f)}))}function Os(a,b){return a.userList.contains(b)?b===a.userID?If(a):a.userList.leave(b):Promise.resolve()}function Ud(a,b){return b===a.roomID?Promise.resolve(!0):Hf(a,b).once("value").then(function(d){const f=d.val()!==null;return Promise.resolve(f)})}function Li(a,b,d=a.roomID){return Ud(a,d).then(function(f){if(!f)return Promise.resolve();const i=Gf(b,a.roomType),l={};return l[`room-filters/${d}/filter`]=i,l[`room-metadata/${d}/filter`]=i,Lc(a).update(l)})}function vs(a,b=a.roomID){return Li(a,"open",b)}function ws(a,b=a.roomID){return Li(a,"closed",b)}function ts(a,b,d=a.roomID){return Ud(a,d).then(function(f){return f?Dg(a,d).child("data").update(b):Promise.resolve()})}function xs(a,b){return a.userList.changeUserName(b)}function us(a,b,d=a.roomID){return Ud(a,d).then(function(f){if(!f)return Promise.resolve();const i={};return i[`room-filters/${d}/name`]=b,i[`room-metadata/${d}/name`]=b,Lc(a).update(i)})}function Is(a,b=a.roomID){return b===a.roomID?a.userList.getUsers():new Promise(function(d,f){const i=new Je({itemIDKey:"joinAt",mode:"once"});i.once("update",function(l){d(l)}).startUpdate(Gs(a,b))})}const lfa=Sb(ec());class Ss extends zb{constructor({eventEmitter:a,root:b="",userID:d="",userName:f="",broadcast:i=!0,tables:l=!1}={}){super();this.setEventEmitter(a),this.database=lfa.database(),this.setRootPath(b),this.userInfo={userID:"",userName:""},this.setUser(d,f),this.isRoomCreator=!1,this.roomID=void 0,this.roomName=void 0,this.roomType=void 0,this.doorState=void 0,this.leftRoomFlag=!1,this.isRemoveRoomWhenLeft=void 0,this.userList=Fs(this),this.roomList=Cs(this),this.broadcast=ys(this,i),this.tables=Es(this,l)}destroy(){var a=this;this.destroyEventEmitter().leaveRoom().then(function(){a.userList.destroy(),a.userList=void 0,a.roomList.destroy(),a.roomList=void 0,a.broadcast.destroy(),a.broadcast=void 0})}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.rootPath=a,this.rootRef=a!==""?this.database.ref(this.rootPath):void 0,this}getRoomInfo(a,b){return jc(this,a,b)}setUser(a,b){return typeof a==="string"?(this.userID=a,this.userName=b):this.userInfo=a,this}isInRoom(a){return Ti(this,a)}isFull(){return Ps(this)}isFirstUser(a=this.userID){return Qs(this,a)}getUsers(){return Rs(this)}get maxUsers(){return this.userList.maxUsers}getTable(a){return this.tables.get(a)}createRoom(a){return Oi(this,a)}createRandomRoom(a={}){return zs(this,a)}joinRoom(a){return Si(this,a)}joinRandomRoom(a={}){return Js(this,a)}leaveRoom(){return If(this)}removeRoom(a=this.roomID){return Ui(this,a)}kickUser(a){return Os(this,a)}changeRoomState(a,b=this.roomID){return Li(this,a,b)}openRoom(a=this.roomID){return vs(this,a)}closeRoom(a=this.roomID){return ws(this,a)}changeUserName(a){return xs(this,a)}changeFilterData(a,b=this.roomID){return ts(this,a,b)}changeRoomName(a,b,d=a.roomID){return us(this,b,d)}getUserList(a=this.roomID){return Is(this,a)}getRoomList(a,b){return Ri(this,a,b)}HasRoom(a){return Ud(this,a)}}function Zs(a,b){let d=a.rootPath;return b&&(d+=`/${b}`),d}function Xs(a){return Zs(a,"users")}function Vs(a,b){return`${Zs(a,"tables")}/${b}`}const qd="room.join";const Wd="room.leave";const Gm="userlist.join";const Vi="userlist.leave";const Im="userlist.init";const Hm="userlist.update";const Gg="userlist.changename";const um="broadcast.receive";function vm(a){return`tables.${a}.init`}function wm(a){return`tables.${a}.update`}function xm(a){return`tables.${a}.addkey0`}function ym(a){return`tables.${a}.addkey1`}function zm(a){return`tables.${a}.addkey2`}function Am(a){return`tables.${a}.removekey0`}function Bm(a){return`tables.${a}.removekey1`}function Cm(a){return`tables.${a}.removekey2`}function Dm(a){return`tables.${a}.changekey0`}function Em(a){return`tables.${a}.changekey1`}function Fm(a){return`tables.${a}.changekey2`}function Ys(a,b=0){const d=new Ff({eventEmitter:a.eventEmitter,eventNames:{join:Gm,leave:Vi,update:Hm,change:"userlist.change",init:Im,changename:Gg},root:Xs(a),userID:a.userInfo,maxUsers:b});return d.on(Vi,function(f){f.userID===a.userID&&Qx(a)}),a.on(qd,function(){d.startUpdate()}).on(Wd,function(){d.stopUpdate().clear()}),d}function Qx(a){a.emit(Wd),setTimeout(function(){a.leftRoomFlag=!1},0)}function Us(a,b){if(b)b===!0&&(b={history:!1});else return null;const d=new Df({eventEmitter:a.eventEmitter,eventNames:{receive:um},receiverID:"broadcast",senderID:a.userInfo,history:b.history});return a.on(qd,function(){d.setRootPath(a.rootPath).startReceiving()}).on(Wd,function(){d.stopReceiving()}).on(Gg,function(f,i){d.changeUserName(f,i)}),d}function Ws(a,b){const d=new Map();return b?(b.forEach(f=>{d.set(f.key,Px(a,f))}),a.on(qd,function(){for(const[f,i]of d)i.setRootPath(Vs(a,f)).startUpdate()}).on(Wd,function(){for(const[f,i]of d)i.stopUpdate().clear()}),d):d}function Px(a,{key:b,type:d=xb["1d"]}){const f=new Ef({eventEmitter:a.eventEmitter,type:d,eventNames:{init:vm(b),update:wm(b),addkey0:xm(b),removekey0:Am(b),changekey0:Dm(b),addkey1:ym(b),removekey1:Bm(b),changekey1:Em(b),addkey2:zm(b),removekey2:Cm(b),changekey2:Fm(b)}});return f}function Xi(a){return a.userList.isInList}function bt(a){return a.userList.isFull()}function ct(a,b=a.userID){return a.userList.isFirstUser(b)}function dt(a){return a.userList.getUsers()}function $s(a){return a.userList.join().then(function(){return a.emit(qd),Promise.resolve()})}function Wi(a){return Xi(a)?(a.leftRoomFlag=!0,a.userList.leave()):Promise.resolve()}function _s(a){return a.userList.getUsers()}function at(a,b){return a.userList.contains(b)?b===a.userID?Wi(a):a.userList.leave(b):Promise.resolve()}function Ts(a,b){return a.userList.changeUserName(b)}const Zga=Sb(ec());class et extends zb{constructor({eventEmitter:a,root:b="",userID:d="",userName:f="",maxUsers:i=0,broadcast:l=!0,tables:q=!1}={}){const u=arguments[0];super();this.setEventEmitter(a),this.database=Zga.database(),this.setRootPath(b),this.userInfo={userID:"",userName:""},this.setUser(d,f),this.leftRoomFlag=!1,this.userList=Ys(this,i),this.broadcast=Us(this,l),this.tables=Ws(this,q)}shutdown(){}destroy(){this.shutdown()}get userID(){return this.userInfo.userID}set userID(a){this.userInfo.userID=a}get userName(){return this.userInfo.userName}set userName(a){this.userInfo.userName=a}setRootPath(a){return this.rootPath=a,this.rootRef=a!==""?this.database.ref(this.rootPath):void 0,this}setUser(a,b){return typeof a==="string"?(this.userID=a,this.userName=b):this.userInfo=a,this}isInRoom(){return Xi(this)}isFull(){return bt(this)}isFirstUser(a=this.userID){return ct(this,a)}getUsers(){return dt(this)}get maxUsers(){return this.userList.maxUsers}getTable(a){return this.tables.get(a)}joinRoom(){return $s(this)}leaveRoom(){return Wi(this)}getUserList(){return _s(this)}kickUser(a){return at(this,a)}changeUserName(a){return Ts(this,a)}}const Mn="statechange";function Nn(a){return`exit_${a.toString()}`}function On(a){return`enter_${a.toString()}`}class Bv extends zb{constructor({eventEmitter:a}={}){super();this._states=new Map();this.enable=!0;this.setEventEmitter(a)}destroy(){this.destroyEventEmitter()}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(a=!0){return this.enable=a,this}getState(a){return this._states.get(a)}addState(a){return this._states.set(a.name,a),this}addStates(a){for(let b=0,d=a.length;b<d;b++)this.addState(a[b]);return this}removeState(a){return this._states.delete(a),this}removeAllStates(){return this._states.clear(),this}set state(a){if(!this.enable||this._stateLock)return;if(this._state===a)return;this._prevState=this._state,this._state=a,this._stateLock=!0,this.emit(Mn,this);if(this._prevState!=null){const b=this.getState(this._prevState);b&&b.exit&&b.exit(this),this.emit(Nn(this._prevState),this)}this._stateLock=!1;if(this._state!=null){const b=this.getState(this._state);b&&b.enter&&b.enter(this),this.emit(On(this._state),this)}}get state(){return this._state}get prevState(){return this._prevState}get stateList(){return Array.from(this._states.keys())}start(a){return this._start=a,this._prevState=void 0,this._state=a,this}goto(a){return a!=null&&(this.state=a),this}next(){const a=this.getState(this.state);if(!a||!a.next)return this;let b;return typeof a.next==="string"?b=a.next:b=a.next(this),this.goto(b),this}update(a,b,d="update"){const f=this.getState(this.state);f&&f[d]&&f[d](this,a,b)}preupdate(a,b){this.update(b,a,"preupdate")}postupdate(a,b){this.update(b,a,"postupdate")}}var Pn;(function(a){a[a.shuffle=0]="shuffle",a[a.random=1]="random"})(Pn||(Pn={}));const Sn="die";class Cv extends Bj{constructor(a,{lifeTime:b=1e3,destroy:d=!0}={}){super(a,arguments[1]);this.setLifeTime(b),this.setDestroyMode(d)}resetFromJSON({lifeTime:a=1e3,destroy:b=!0}={}){return super.resetFromJSON(arguments[0]),this.setLifeTime(a),this.setDestroyMode(b),this}toJSON(){const a=super.toJSON();return a.lifeTime=this.lifeTime,a.destroy=this.destroyMode,a}setLifeTime(a){return this.lifeTime=a,this}addToLifeTime(a){return this.lifeTime+=a,this}setDestroyMode(a=!0){return this.destroyMode=a,this}get isAlive(){return this.now<this.lifeTime}get remainder(){let a=this.lifeTime-this.now;return a<0&&(a=0),a}update(a){return this.isRunning?(super.update(a),this.isAlive||(this.complete(Sn),this.destroyMode&&this.gameObject.destroy&&this.gameObject.destroy()),this):this}get gameObject(){return this.parent}}class Cj{constructor(a,b,d,f,i){this.key=a,this.start=b,this.end=d,this.step=f,this.items=i,this._current=b}reset(){this._current=this.start}get isEnd(){return this.step>=0?this._current>=this.end:this._current<=this.end}get length(){return this.step>=0&&this.start>this.end||this.step<0&&this.start<this.end?0:Math.floor(this.end-this.start)+1}next(){return this.isEnd?this._current=this.start:this._current+=this.step,this}get current(){return this.items?this.items[this._current]:this._current}}class Ev{constructor(){this.indexes=[];this.length=0;this.firstPass=!0;this.currentCount=0}reset(){for(let a=0,b=this.indexes.length;a<b;a++)this.indexes[a].reset();return this.firstPass=!0,this.currentCount=0,this}addNumberLoop(a,b,d,f=d>=b?1:-1){return this.indexes.push(new Cj(a,b,d,f)),this.length=this._getLength(),this}addItemsLoop(a,b,d=!1){const f=b.length-1,i=d?f:0,l=d?0:f,q=d?-1:1;return this.indexes.push(new Cj(a,i,l,q,b)),this.length=this._getLength(),this}addLoop({key:a,start:b,end:d,step:f,items:i}){return this.indexes.push(new Cj(a,b,d,f,i)),this.length=this._getLength(),this}removeLoops(){return this.indexes.length=0,this.length=0,this}_getLength(){let a=this.indexes[0]?.length;for(let b=1,d=this.indexes.length;b<d;b++)a*=this.indexes[b].length;return a??0}get progress(){return this.currentCount/this.length}get isEnd(){for(let a=this.indexes.length-1;a>=0;a--)if(!this.indexes[a].isEnd)return!1;return!0}next(){for(let a=this.indexes.length-1;a>=0;a--){const b=this.indexes[a],d=b.isEnd;b.next();if(!d)break}return this}getCurrent(a={}){for(let b=this.indexes.length-1;b>=0;b--){const d=this.indexes[b];a[d.key]=d.current}return a}getNext(a={}){return this.firstPass?this.firstPass=!1:this.next(),this.getCurrent(a),this.currentCount++,a}}const In="tickstart";const Jn="tickend";const Oy=1e3/60;class Dv extends Dj{constructor(a,{callback:b,scope:d,deltaPercentage:f=1}={}){super(a,arguments[1]);this.deltaPercentage=1;this.loopIndexGenerator=new Ev();this.currentIndexes={};this.scene=a,this.setCallback(b,d),this.setDeltaPercentage(f),this.boot()}boot(){super.boot(),se(this.scene,"shutdown",this.destroy,this)}shutdown(){super.shutdown(),this.scene=void 0}destroy(){this.shutdown()}startTicking(){super.startTicking(),mc(this.scene,"update",this.preupdate,this)}stopTicking(){super.stopTicking(),this.scene&&ld(this.scene,"update",this.preupdate,this)}setCallback(a,b){return this.callback=a,this.scope=b,this}setDeltaPercentage(a){return this.deltaPercentage=a,this}addNumberLoop(a,b,d,f){return this.loopIndexGenerator.addNumberLoop(a,b,d,f),this}addItemsLoop(a,b,d=!1){return this.loopIndexGenerator.addItemsLoop(a,b,d),this}addLoop(a){return this.loopIndexGenerator.addLoop(a),this}get curTime(){return new Date().getTime()}get progress(){return this.loopIndexGenerator.progress}preupdate(){if(!this.callback)return;const a=this.curTime,b=Oy*this.deltaPercentage;let d;this.emit(In);do{if(this.loopIndexGenerator.isEnd){this.complete();return}this.currentIndexes=this.loopIndexGenerator.getNext(this.currentIndexes),this.scope?this.callback.call(this.scope,this.currentIndexes,this):this.callback(this.currentIndexes,this),d=this.curTime-a>=b}while(!d);this.emit(Jn)}}const mBa=Sb(bw());var Qn;(function(a){a[a.none=0]="none",a[a.base64=1]="base64",a[a.utf16=2]="utf16",a[a.uri=3]="uri"})(Qn||(Qn={}));let Yy=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i;function Cf(a){let b;return a===""?b=null:Yy.test(a)?b=parseFloat(a):a==="false"?b=!1:a==="true"?b=!0:b=a,b}const Ewa=Sb(jl());function Fv(a,{delimiter:b=",",convert:d=!0,types:f={}}={}){const i=Ewa.default.parse(a,{header:!0,delimiter:b}).data,l=f.question??"q",q=f.option??"",u=d===!0?Cf:d,v=[];let A,E;for(let H=0,R=i.length;H<R;H++){let L=i[H],O=L.type;delete L.type,O===l?(A=L,A.key===""&&delete A.key,Hv(A,u),A.options=[],v.push(A)):O===q&&(A&&(E=L,E.key===""&&delete E.key,Hv(E,u),A.options.push(E)))}return v}function Hv(a,b){const d=a;if(!b)return d;for(const f in a)d[f]=b(a[f],f);return d}function Ln(a,b,d){typeof b==="string"&&(b=Fv(b,d));if(Array.isArray(b))for(let f=0,i=b.length;f<i;f++)Gv(a,b[f]);else Gv(a,b)}function Gv(a,b){const d=b.options;if(d)for(let f=0,i=d.length;f<i;f++){let l=d[f];l.hasOwnProperty("key")||(l.key=`_${f}`)}b.hasOwnProperty("key")||(b.key=`_${a.questions.size}`),a.questions.set(b.key,b)}class Kn{constructor({questions:a}={}){this.questions=new Map();a&&Ln(this,a,arguments[0])}add(a,b){return Ln(this,a,b),this}remove(a){return this.questions.delete(a),this}removeAll(){return this.questions.clear(),this}has(a){return this.questions.has(a)}get(a){return this.questions.get(a)}getKeys(a=[]){const b=this.questions.keys();for(const d of b)a.push(d);return a}getOption(a,b){typeof a==="string"&&(a=this.get(a));if(!a)return null;const d=a.options;if(d)for(let f=0,i=d.length;f<i;f++){let l=d[f];if(l.key===b)return l}return null}}const Ej="quest";class Py extends zb{constructor(a,{eventEmitter:b,shuffleQuestions:d=!1,shuffleOptions:f=!1}={}){super();this.questionKeys=[];this.setEventEmitter(b),Gi(a)&&(a=new Kn(a)),this.questionsManager=a,this.setShuffleQuestionsEnable(d),this.setShuffleOptionsEnable(f),this.init()}setShuffleQuestionsEnable(a=!0){return this.shuffleQuestionsEnable=a,this}setShuffleOptionsEnable(a=!0){return this.shuffleOptionsEnable=a,this}init(){return this.questionKeys.length=0,this.questionsManager.getKeys(this.questionKeys),this.shuffleQuestionsEnable&&He(this.questionKeys),this.nextIndex=-1,this.nextKey=void 0,this}setNextKey(a){return a===void 0?(this.nextIndex++,this.nextKey=this.questionKeys[this.nextIndex]):this.questionsManager.has(a)&&(this.nextKey=a,this.nextIndex=this.questionKeys.indexOf(a)),this}setPrevKey(){return this.nextIndex--,this.nextKey=this.questionKeys[this.nextIndex],this}getQuestion(){const a=this.questionsManager.get(this.nextKey);if(a&&this.shuffleOptionsEnable){const b=a.options;b&&He(b)}return a}getNextQuestion(a){return this.setNextKey(a).getQuestion()}getPrevQuestion(){return this.setPrevKey().getQuestion()}getOption(a,b){return b===void 0&&(b=a,a=this.getQuestion()),this.questionsManager.getOption(a,b)}next(a){const b=this.getNextQuestion(a);return b&&this.emit(Ej,b,this,this.questionsManager),this}prev(){const a=this.getPrevQuestion();return a&&this.emit(Ej,a,this,this.questionsManager),this}restart(a){return this.init(),this.next(a),this}get isLastQuestion(){return this.nextIndex===this.questionKeys.length-1}}var Hl;(function(a){a[a.ascending=0]="ascending",a[a.descending=1]="descending",a[a.logical_ascending=2]="logical_ascending",a[a.logical_descending=3]="logical_descending"})(Hl||(Hl={}));class ew extends Fh{constructor(){super();Gp("dude","../assets/phaser-dude.png").load().then(()=>{this.create()})}create(){const a=new Ik(this),b=`[size=30][color=red][i][u]Phaser[/i][img=dude][/u]\r
[size=20][color=blue][shadow=yellow][b]is[/b][/shadow]\r
[size=40][color=none][stroke=green]Fun`,d=new nf(400,300,b,{backgroundFillStyle:"rgba(100, 100, 100, 0.5)",backgroundFillColor2:"rgba(0, 0, 0, 0.5)",backgroundStrokeStyle:"BurlyWood",backgroundStrokeThickness:4,cornerRadius:20,padding:10,images:["dude"]});ne(a,d)}}new Fp(Hk(),Gk(800,600),Ek("game"),Dk(2960685),Fk(ew));})();
/* @license
Papa Parse
v5.3.0
https://github.com/mholt/PapaParse
License: MIT
*/
/*!
 * Chart.js v2.9.3
 * https://www.chartjs.org
 * (c) 2019 Chart.js Contributors
 * Released under the MIT License
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! moment.js
//! momentjs.com
//! version : 2.29.0
