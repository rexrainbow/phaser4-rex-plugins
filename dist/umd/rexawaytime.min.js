!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).rexawaytime={})}(this,(function(t){"use strict";var e;!function(t){t[t.IDLE=0]="IDLE",t[t.UPDATING=1]="UPDATING"}(e||(e={})),t.AwayTime=class{constructor(t){void 0===t&&(t={}),this.resetFromJSON(t)}destroy(){this.stop()}resetFromJSON({key:t="away",period:i=1e3}){return this.state=e.IDLE,this.setKey(t),this.setPeriod(i),this}get awayTime(){let t=localStorage.getItem(this.key);if(this.start(),null==t)return 0;let e=parseInt(t),i=this.curTime;return e<0||e>i?0:i-e}get curTime(){return(new Date).getTime()}start(){return this.stop(),this.updateTime(),this.timer=window.setInterval(this.updateTime.bind(this),this.period),this.state=e.UPDATING,this}stop(){return this.state===e.IDLE||(clearTimeout(this.timer),this.timer=void 0,this.state=e.IDLE),this}updateTime(){return localStorage.setItem(this.key,this.curTime.toString()),this}setKey(t){return this.key=t,this}setPeriod(t){return this.period=t,this}}}));
